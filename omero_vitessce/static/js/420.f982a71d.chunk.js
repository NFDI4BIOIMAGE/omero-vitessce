/*! For license information please see 420.f982a71d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkomero_vitessce=self.webpackChunkomero_vitessce||[]).push([[420],{420:(e,t,n)=>{n.d(t,{HiGlassComponent:()=>Mwe});var r,i=n(43),o=n(950),a=n(583),s={};r=s,function(e){var t=e.Promise,n=t&&"resolve"in t&&"reject"in t&&"all"in t&&"race"in t&&function(){var e;return new t((function(t){e=t})),"function"==typeof e}();r?(r.Promise=n?t:S,r.Polyfill=S):n||(e.Promise=S);var i="pending",o="sealed",a="fulfilled",s="rejected",l=function(){};function c(e){return"[object Array]"===Object.prototype.toString.call(e)}var u,h=typeof setImmediate<"u"?setImmediate:setTimeout,p=[];function f(){for(var e=0;e<p.length;e++)p[e][0](p[e][1]);p=[],u=!1}function d(e,t){p.push([e,t]),u||(u=!0,h(f,0))}function m(e){var t=e.owner,n=t.state_,r=t.data_,i=e[n],o=e.then;if("function"==typeof i){n=a;try{r=i(r)}catch(l){b(o,l)}}g(o,r)||(n===a&&y(o,r),n===s&&b(o,r))}function g(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t!==r?y(e,r):v(e,r))}),(function(t){n||(n=!0,b(e,t))})),!0}}catch(i){return n||b(e,i),!0}return!1}function y(e,t){(e===t||!g(e,t))&&v(e,t)}function v(e,t){e.state_===i&&(e.state_=o,e.data_=t,d(T,e))}function b(e,t){e.state_===i&&(e.state_=o,e.data_=t,d(E,e))}function _(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)m(t[n])}function T(e){e.state_=a,_(e)}function E(e){e.state_=s,_(e)}function S(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof S))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){b(t,e)}try{e((function(e){y(t,e)}),n)}catch(r){n(r)}}(e,this)}S.prototype={constructor:S,state_:i,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(l),fulfilled:e,rejected:t};return this.state_===a||this.state_===s?d(m,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},S.all=function(e){if(!c(e))throw new TypeError("You must pass an array to Promise.all().");return new this((function(t,n){var r=[],i=0;function o(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var a,s=0;s<e.length;s++)(a=e[s])&&"function"==typeof a.then?a.then(o(s),n):r[s]=a;i||t(r)}))},S.race=function(e){if(!c(e))throw new TypeError("You must pass an array to Promise.race().");return new this((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)}))},S.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(t){t(e)}))},S.reject=function(e){return new this((function(t,n){n(e)}))}}(typeof window<"u"?window:typeof a.aT<"u"?a.aT:typeof self<"u"?self:a.aT);var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;var h=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))c.call(n,a)&&(i[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)u.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i};const p=(0,a.g)(h);window.Promise||(window.Promise=s.Polyfill),Object.assign||(Object.assign=p);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var f=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-f}}for(var d=Date.now(),m=["ms","moz","webkit","o"],g=0;g<m.length&&!window.requestAnimationFrame;++g){var y=m[g];window.requestAnimationFrame=window[y+"RequestAnimationFrame"],window.cancelAnimationFrame=window[y+"CancelAnimationFrame"]||window[y+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+d-t;return n<0&&(n=0),d=t,window.setTimeout((function(){d=Date.now(),e(performance.now())}),n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var v=/iPhone/i,b=/iPod/i,_=/iPad/i,T=/\biOS-universal(?:.+)Mac\b/i,E=/\bAndroid(?:.+)Mobile\b/i,S=/Android/i,w=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,A=/Silk/i,O=/Windows Phone/i,x=/\bWindows(?:.+)ARM\b/i,k=/BlackBerry/i,I=/BB10/i,C=/Opera Mini/i,P=/\b(CriOS|Chrome)(?:.+)Mobile/i,D=/Mobile(?:.+)Firefox\b/i,R=function(e){return typeof e<"u"&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&typeof MSStream>"u"};var N=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var n=t.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),typeof(r=n.split("Twitter"))[1]<"u"&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(v)&&!i(O),ipod:i(b),tablet:!i(v)&&(i(_)||R(t))&&!i(O),universal:i(T),device:(i(v)||i(b)||i(_)||i(T)||R(t))&&!i(O)},amazon:{phone:i(w),tablet:!i(w)&&i(A),device:i(w)||i(A)},android:{phone:!i(O)&&i(w)||!i(O)&&i(E),tablet:!i(O)&&!i(w)&&!i(E)&&(i(A)||i(S)),device:!i(O)&&(i(w)||i(A)||i(E)||i(S))||i(/\bokhttp\b/i)},windows:{phone:i(O),tablet:i(x),device:i(O)||i(x)},other:{blackberry:i(k),blackberry10:i(I),opera:i(C),firefox:i(D),chrome:i(P),device:i(k)||i(I)||i(C)||i(D)||i(P)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator);var M={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(e){var t=!0;if(N.tablet||N.phone){var n;if(N.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(t=!1);if(N.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(t=!1)}return t?e:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:N.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!N.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},L={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!r||s.context===r)&&a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(L);var j=L.exports;const B=(0,a.g)(j);var F={},G={exports:{}};!function(e,t){!function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o="object"==typeof a.aT&&a.aT;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,l,c=2147483647,u=36,h=1,p=26,f=38,d=700,m=72,g=128,y="-",v=/^xn--/,b=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=u-h,S=Math.floor,w=String.fromCharCode;function A(e){throw RangeError(T[e])}function O(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function x(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+O((e=e.replace(_,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function I(e){return O(e,(function(e){var t="";return e>65535&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)})).join("")}function C(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u}function P(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function D(e,t,n){var r=0;for(e=n?S(e/d):e>>1,e+=S(e/t);e>E*p>>1;r+=u)e=S(e/E);return S(r+(E+1)*e/(e+f))}function R(e){var t,n,r,i,o,a,s,l,f,d,v=[],b=e.length,_=0,T=g,E=m;for((n=e.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&A("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=_,a=1,s=u;i>=b&&A("invalid-input"),((l=C(e.charCodeAt(i++)))>=u||l>S((c-_)/a))&&A("overflow"),_+=l*a,!(l<(f=s<=E?h:s>=E+p?p:s-E));s+=u)a>S(c/(d=u-f))&&A("overflow"),a*=d;E=D(_-o,t=v.length+1,0==o),S(_/t)>c-T&&A("overflow"),T+=S(_/t),_%=t,v.splice(_++,0,T)}return I(v)}function N(e){var t,n,r,i,o,a,s,l,f,d,v,b,_,T,E,O=[];for(b=(e=k(e)).length,t=g,n=0,o=m,a=0;a<b;++a)(v=e[a])<128&&O.push(w(v));for(r=i=O.length,i&&O.push(y);r<b;){for(s=c,a=0;a<b;++a)(v=e[a])>=t&&v<s&&(s=v);for(s-t>S((c-n)/(_=r+1))&&A("overflow"),n+=(s-t)*_,t=s,a=0;a<b;++a)if((v=e[a])<t&&++n>c&&A("overflow"),v==t){for(l=n,f=u;!(l<(d=f<=o?h:f>=o+p?p:f-o));f+=u)E=l-d,T=u-d,O.push(w(P(d+E%T,0))),l=S(E/T);O.push(w(P(l,0))),o=D(n,_,r==i),n=0,++r}++n,++t}return O.join("")}if(s={version:"1.3.2",ucs2:{decode:k,encode:I},decode:R,encode:N,toASCII:function(e){return x(e,(function(e){return b.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return x(e,(function(e){return v.test(e)?R(e.slice(4).toLowerCase()):e}))}},r&&i)if(e.exports==r)i.exports=s;else for(l in s)s.hasOwnProperty(l)&&(r[l]=s[l]);else n.punycode=s}(a.aT)}(G,G.exports);var H=G.exports,U={};function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var V=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};U.decode=U.parse=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=e.length;a>0&&s>a&&(s=a);for(var l=0;l<s;++l){var c,u,h,p,f=e[l].replace(o,"%20"),d=f.indexOf(n);d>=0?(c=f.substr(0,d),u=f.substr(d+1)):(c=f,u=""),h=decodeURIComponent(c),p=decodeURIComponent(u),z(i,h)?Array.isArray(i[h])?i[h].push(p):i[h]=[i[h],p]:i[h]=p}return i},U.encode=U.stringify=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(r){var i=encodeURIComponent(V(r))+n;return Array.isArray(e[r])?e[r].map((function(e){return i+encodeURIComponent(V(e))})).join(t):i+encodeURIComponent(V(e[r]))})).join(t):r?encodeURIComponent(V(r))+n+encodeURIComponent(V(e)):""};var X=H,Y={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},W=F.parse=Ae;function q(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}F.resolve=function(e,t){return Ae(e,!1,!0).resolve(t)},F.resolveObject=function(e,t){return e?Ae(e,!1,!0).resolveObject(t):t},F.format=function(e){return Y.isString(e)&&(e=Ae(e)),e instanceof q?e.format():q.prototype.format.call(e)},F.Url=q;var $,K,Q,Z,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he,pe=/^([a-z0-9.+-]+:)/i,fe=/:[0-9]*$/,de=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,me=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),ge=["'"].concat(me),ye=["%","/","?",";","#"].concat(ge),ve=["/","?","#"],be=/^[+a-z0-9A-Z_-]{0,63}$/,_e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Te={javascript:!0,"javascript:":!0},Ee={javascript:!0,"javascript:":!0},Se={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},we=U;function Ae(e,t,n){if(e&&Y.isObject(e)&&e instanceof q)return e;var r=new q;return r.parse(e,t,n),r}q.prototype.parse=function(e,t,n){if(!Y.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var s=de.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?we.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=pe.exec(a);if(l){var c=(l=l[0]).toLowerCase();this.protocol=c,a=a.substr(l.length)}if(n||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===a.substr(0,2);u&&(!l||!Ee[l])&&(a=a.substr(2),this.slashes=!0)}if(!Ee[l]&&(u||l&&!Se[l])){for(var h=-1,p=0;p<ve.length;p++){-1!==(m=a.indexOf(ve[p]))&&(-1===h||m<h)&&(h=m)}var f,d;-1!==(d=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(f)),h=-1;for(p=0;p<ye.length;p++){var m;-1!==(m=a.indexOf(ye[p]))&&(-1===h||m<h)&&(h=m)}-1===h&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),v=(p=0,y.length);p<v;p++){var b=y[p];if(b&&!b.match(be)){for(var _="",T=0,E=b.length;T<E;T++)b.charCodeAt(T)>127?_+="x":_+=b[T];if(!_.match(be)){var S=y.slice(0,p),w=y.slice(p+1),A=b.match(_e);A&&(S.push(A[1]),w.unshift(A[2])),w.length&&(a="/"+w.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=X.toASCII(this.hostname));var O=this.port?":"+this.port:"",x=this.hostname||"";this.host=x+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Te[c])for(p=0,v=ge.length;p<v;p++){var k=ge[p];if(-1!==a.indexOf(k)){var I=encodeURIComponent(k);I===k&&(I=escape(k)),a=a.split(k).join(I)}}var C=a.indexOf("#");-1!==C&&(this.hash=a.substr(C),a=a.slice(0,C));var P=a.indexOf("?");if(-1!==P?(this.search=a.substr(P),this.query=a.substr(P+1),t&&(this.query=we.parse(this.query)),a=a.slice(0,P)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Se[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var D=this.search||"";this.path=O+D}return this.href=this.format(),this},q.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Y.isObject(this.query)&&Object.keys(this.query).length&&(o=we.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Se[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},q.prototype.resolve=function(e){return this.resolveObject(Ae(e,!1,!0)).format()},q.prototype.resolveObject=function(e){if(Y.isString(e)){var t=new q;t.parse(e,!1,!0),e=t}for(var n=new q,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var l=a[s];"protocol"!==l&&(n[l]=e[l])}return Se[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Se[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var h=c[u];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||Ee[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var f=n.pathname||"",d=n.search||"";n.path=f+d}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||n.host&&e.pathname,v=y,b=n.pathname&&n.pathname.split("/")||[],_=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!Se[n.protocol]);if(_&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),y=y&&(""===p[0]||""===b[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),n.search=e.search,n.query=e.query;else if(!Y.isNullOrUndefined(e.search)){if(_)n.hostname=n.host=b.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,(!Y.isNull(n.pathname)||!Y.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=b.slice(-1)[0],E=(n.host||e.host||b.length>1)&&("."===T||".."===T)||""===T,S=0,w=b.length;w>=0;w--)"."===(T=b[w])?b.splice(w,1):".."===T?(b.splice(w,1),S++):S&&(b.splice(w,1),S--);if(!y&&!v)for(;S--;S)b.unshift("..");y&&""!==b[0]&&(!b[0]||"/"!==b[0].charAt(0))&&b.unshift(""),E&&"/"!==b.join("/").substr(-1)&&b.push("");var A,O=""===b[0]||b[0]&&"/"===b[0].charAt(0);_&&(n.hostname=n.host=O?"":b.length?b.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(y=y||n.host&&b.length)&&!O&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),(!Y.isNull(n.pathname)||!Y.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},q.prototype.parseHost=function(){var e=this.host,t=fe.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}($||($={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(K||(K={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Q||(Q={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Z||(Z={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(J||(J={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ee||(ee={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(te||(te={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(ne||(ne={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(re||(re={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ie||(ie={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(oe||(oe={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(ae||(ae={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(se||(se={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(le||(le={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(ce||(ce={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(ue||(ue={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(he||(he={})),M.RETINA_PREFIX=/@([0-9\.]+)x/,M.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Oe,xe=!1,ke="5.3.12";function Ie(e){var t;if(!xe){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS "+ke+" - \u2730 "+e+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,n)}else window.console&&window.console.log("PixiJS "+ke+" - "+e+" - http://www.pixijs.com/");xe=!0}}function Ce(){return typeof Oe>"u"&&(Oe=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:M.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch{return!1}}()),Oe}function Pe(e,t){return void 0===t&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function De(e){var t=e.toString(16);return"#"+(t="000000".substr(0,6-t.length)+t)}function Re(e){return"string"==typeof e&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)}var Ne=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[Z.NORMAL_NPM]=Z.NORMAL,e[Z.ADD_NPM]=Z.ADD,e[Z.SCREEN_NPM]=Z.SCREEN,t[Z.NORMAL]=Z.NORMAL_NPM,t[Z.ADD]=Z.ADD_NPM,t[Z.SCREEN]=Z.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function Me(e,t){return Ne[t?1:0][e]}function Le(e,t,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t):(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=t,n}function je(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(i=i*t+.5|0)}function Be(e,t,n,r){return(n=n||new Float32Array(4))[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n}function Fe(e,t){void 0===t&&(t=null);var n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function Ge(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var He={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Ue(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function ze(e){return!(e&e-1)&&!!e}function Ve(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function Xe(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}function Ye(e){return 0===e?0:e<0?-1:1}var We=0;function qe(){return++We}var $e={};function Ke(e,t,n){if(void 0===n&&(n=3),!$e[t]){var r=(new Error).stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(r))),$e[t]=!0}}var Qe={},Ze=Object.create(null),Je=Object.create(null);var et=function(){function e(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||M.RESOLUTION,this.resize(e,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),e}();function tt(e){var t,n,r,i=e.width,o=e.height,a=e.getContext("2d"),s=a.getImageData(0,0,i,o).data,l=s.length,c={top:null,left:null,right:null,bottom:null},u=null;for(t=0;t<l;t+=4)0!==s[t+3]&&(n=t/4%i,r=~~(t/4/i),null===c.top&&(c.top=r),(null===c.left||n<c.left)&&(c.left=n),(null===c.right||c.right<n)&&(c.right=n+1),(null===c.bottom||c.bottom<r)&&(c.bottom=r));return null!==c.top&&(i=c.right-c.left,o=c.bottom-c.top+1,u=a.getImageData(c.left,c.top,i,o)),{height:o,width:i,data:u}}var nt,rt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function it(e,t){if(void 0===t&&(t=window.location),0===e.indexOf("data:"))return"";t=t||window.location,nt||(nt=document.createElement("a")),nt.href=e;var n=W(nt.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}function ot(e,t){var n=M.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}const at=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Je,CanvasRenderTarget:et,DATA_URI:rt,EventEmitter:B,ProgramCache:Qe,TextureCache:Ze,clearTextureCache:function(){var e;for(e in Ze)delete Ze[e];for(e in Je)delete Je[e]},correctBlendMode:Me,createIndicesForQuads:Fe,decomposeDataUri:function(e){var t=rt.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},deprecation:Ke,destroyTextureCache:function(){var e;for(e in Ze)Ze[e].destroy();for(e in Je)Je[e].destroy()},determineCrossOrigin:it,earcut:a.aU,getBufferType:Ge,getResolutionOfUrl:ot,hex2rgb:Pe,hex2string:De,interleaveTypedArrays:function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,l=0;for(o=0;o<e.length;o++){var c=t[o],u=e[o],h=Ge(u);i[h]||(i[h]=new He[h](a)),s=i[h];for(var p=0;p<u.length;p++){s[(p/c|0)*r+l+p%c]=u[p]}l+=c}return new Float32Array(a)},isMobile:N,isPow2:ze,isWebGLSupported:Ce,log2:Ve,nextPow2:Ue,premultiplyBlendMode:Ne,premultiplyRgba:Le,premultiplyTint:je,premultiplyTintToRgba:Be,removeItems:Xe,rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},sayHello:Ie,sign:Ye,skipHello:function(){xe=!0},string2hex:Re,trimCanvas:tt,uid:qe,url:F},Symbol.toStringTag,{value:"Module"}));var st,lt=2*Math.PI,ct=180/Math.PI,ut=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(st||(st={}));var ht=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=st.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this},e}(),pt=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=st.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n},e.prototype.getBounds=function(){return new ht(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),ft=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r,this.type=st.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},e.prototype.getBounds=function(){return new ht(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),dt=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=Array.isArray(t[0])?t[0]:t;if("number"!=typeof r[0]){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].x,r[o].y);r=i}this.points=r,this.type=st.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],l=this.points[2*o],c=this.points[2*o+1];s>t!=c>t&&e<(t-s)/(c-s)*(l-a)+a&&(n=!n)}return n},e}(),mt=function(){function e(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=st.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),r=t-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i||(n=e-(this.x+this.width-this.radius))*n+r*r<=i||n*n+(r=t-(this.y+this.height-this.radius))*r<=i||(n=e-(this.x+this.radius))*n+r*r<=i)return!0}return!1},e}(),gt=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e}(),yt=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),vt=function(){function e(e,t,n,r,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new gt;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new gt;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),a=Math.atan2(n,t),s=Math.abs(o+a);return s<1e-5||Math.abs(lt-s)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),bt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],_t=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Tt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Et=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],St=[],wt=[],At=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];St.push(t);for(var n=0;n<16;n++)for(var r=At(bt[e]*bt[n]+Tt[e]*_t[n]),i=At(_t[e]*bt[n]+Et[e]*_t[n]),o=At(bt[e]*Tt[n]+Tt[e]*Et[n]),a=At(_t[e]*Tt[n]+Et[e]*Et[n]),s=0;s<16;s++)if(bt[s]===r&&_t[s]===i&&Tt[s]===o&&Et[s]===a){t.push(s);break}}for(e=0;e<16;e++){var l=new vt;l.set(bt[e],_t[e],Tt[e],Et[e],0,0),wt.push(l)}}();var Ot={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return bt[e]},uY:function(e){return _t[e]},vX:function(e){return Tt[e]},vY:function(e){return Et[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return St[e][t]},sub:function(e,t){return St[e][Ot.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2===(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?Ot.S:Ot.N:2*Math.abs(t)<=Math.abs(e)?e>0?Ot.E:Ot.W:t>0?e>0?Ot.SE:Ot.SW:e>0?Ot.NE:Ot.NW},matrixAppendRotationInv:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=wt[Ot.inv(t)];i.tx=n,i.ty=r,e.append(i)}},xt=function(){function e(){this.worldTransform=new vt,this.localTransform=new vt,this.position=new yt(this.onChange,this,0,0),this.scale=new yt(this.onChange,this,1,1),this.pivot=new yt(this.onChange,this,0,0),this.skew=new yt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();M.SORTABLE_CHILDREN=!1;var kt=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ht.EMPTY:((e=e||new ht(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var o=e.a,a=e.b,s=e.c,l=e.d,c=e.tx,u=e.ty,h=this.minX,p=this.minY,f=this.maxX,d=this.maxY,m=o*t+s*n+c,g=a*t+l*n+u;h=m<h?m:h,p=g<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+s*n+c)<h?m:h,p=(g=a*r+l*n+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*t+s*i+c)<h?m:h,p=(g=a*t+l*i+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+s*i+c)<h?m:h,p=(g=a*r+l*i+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,this.minX=h,this.minY=p,this.maxX=f,this.maxY=d},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var l=e[s],c=e[s+1];r=l<r?l:r,i=c<i?c:i,o=l>o?l:o,a=c>a?c:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=e.a,s=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty,p=this.minX,f=this.minY,d=this.maxX,m=this.maxY,g=n;g<r;g+=2){var y=t[g],v=t[g+1],b=a*y+l*v+u,_=c*v+s*y+h;p=Math.min(p,b-i),d=Math.max(d,b+i),f=Math.min(f,_-o),m=Math.max(m,_+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=m},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),It=function(e,t){return(It=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ct(e,t){function n(){this.constructor=e}It(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Pt=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new xt,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new kt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return Ct(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ht),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ht),e=this._localBoundsRect),this._localBounds||(this._localBounds=new kt);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Dt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*ct},set:function(e){this.transform.rotation=e*ut},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask&&((t=this._mask.maskObject||this._mask).renderable=!0,t.isMask=!1);(this._mask=e,this._mask)&&((t=this._mask.maskObject||this._mask).renderable=!1,t.isMask=!0)},enumerable:!1,configurable:!0}),t}(B),Dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return Ct(t,e),t}(Pt);function Rt(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}Pt.prototype.displayObjectUpdateTransform=Pt.prototype.updateTransform;var Nt=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=M.SORTABLE_CHILDREN,t.sortDirty=!1,t}return Ct(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Xe(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Xe(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Xe(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(Rt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);r=0;for(var i=this.children.length;r<i;r++)this.children[r].render(e);e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(Pt);Nt.prototype.containerUpdateTransform=Nt.prototype.updateTransform;var Mt={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Pt.mixin(Mt);var Lt,jt=100,Bt=function(){function e(e){this._hookDiv=null,(N.tablet||N.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=jt+"px",t.style.height=jt+"px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessability for this content",t.addEventListener("focus",(function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){var e=performance.now();if(!(N.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=this.renderer.resolution,r=t.width/this.renderer.width*n,i=t.height/this.renderer.height*n,o=this.div;o.style.left=t.left+"px",o.style.top=t.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var s=this.children[a];if(s.renderId!==this.renderId)s._accessibleActive=!1,Xe(this.children,a,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,a--;else{o=s._accessibleDiv;var l=s.hitArea,c=s.worldTransform;s.hitArea?(o.style.left=(c.tx+l.x*c.a)*r+"px",o.style.top=(c.ty+l.y*c.d)*i+"px",o.style.width=l.width*c.a*r+"px",o.style.height=l.height*c.d*i+"px"):(l=s.getBounds(),this.capHitArea(l),o.style.left=l.x*r+"px",o.style.top=l.y*i+"px",o.style.width=l.width*r+"px",o.style.height=l.height*i+"px",o.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(o.title=s.accessibleTitle),o.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&o.setAttribute("aria-label",s.accessibleHint)),(s.accessibleTitle!==o.title||s.tabIndex!==o.tabIndex)&&(o.title=s.accessibleTitle,o.tabIndex=s.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=jt+"px",t.style.height=jt+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData),t.dispatchEvent(e.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(e.target.displayObject,"tap",t.eventData)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();M.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(Lt||(Lt={}));var Ft=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.fn=e,this.context=t,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),Gt=function(){function e(){var e=this;this._head=new Ft(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/M.TARGET_FPMS,this.elapsedMS=1/M.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=Lt.NORMAL),this._addListener(new Ft(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=Lt.NORMAL),this._addListener(new Ft(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*M.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,M.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Ht=function(){function e(){}return e.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Lt.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Gt.shared:new Gt,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},e}(),Ut=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new gt,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),zt=function(e,t){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Vt=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),Xt=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!==(this._flags&e.FLAGS.OVER)},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!==(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!==(this._flags&e.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),Yt=function(){function e(){this._tempPoint=new gt}return e.prototype.recursiveFindHit=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,s=i=t.interactive||i,l=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,l=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(o)||(r=!1)),l&&t.interactiveChildren&&t.children)for(var c=t.children,u=c.length-1;u>=0;u--){var h=c[u],p=this.recursiveFindHit(e,h,n,r,s);if(p){if(!h.parent)continue;s=!1,p&&(e.target&&(r=!1),a=!0)}}return i&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),n&&n(e,t,!!a))),a},e.prototype.findHit=function(e,t,n,r){this.recursiveFindHit(e,t,n,r,!1)},e}(),Wt={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Pt.mixin(Wt);var qt={target:null,data:{global:null}},$t=function(e){function t(t,n){var r=e.call(this)||this;return n=n||{},r.renderer=t,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new Ut,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new Vt,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Yt,r._tempDisplayObject=new Dt,r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(e,t){function n(){this.constructor=e}zt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t){return qt.target=null,qt.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(qt,t,null,!0),qt.target},t.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Gt.system.add(this.tickerUpdate,this,Lt.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Gt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.delayDispatchEvent=function(e,t,n){this.delayedEvents.push({displayObject:e,eventString:t,eventData:n})},t.prototype.mapPositionToPoint=function(e,t,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r){var i=this.search.findHit(e,t,n,r),o=this.delayedEvents;if(!o.length)return i;e.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var l=o[s],c=l.displayObject,u=l.eventString,h=l.eventData;h.stopsPropagatingAt===c&&(h.stopPropagationHint=!0),this.dispatchEvent(c,u,h)}return i},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new Xt(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],l=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,c),"mouse"===s.pointerType||"pen"===s.pointerType){var u=2===s.button;this.emit(u?"rightup"+o:"mouseup"+o,c)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(s.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(s){var c=2===r.button,u=Xt.FLAGS,h=c?u.RIGHT_DOWN:u.LEFT_DOWN,p=void 0!==o&&o.flags&h;n?(this.dispatchEvent(t,c?"rightup":"mouseup",e),p&&(this.dispatchEvent(t,c?"rightclick":"click",e),l=!0)):p&&this.dispatchEvent(t,c?"rightupoutside":"mouseupoutside",e),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&((!s||l)&&this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);("mouse"===t[0].pointerType||"pen"===t[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=t.trackedPointers[i];n&&!a&&(a=t.trackedPointers[i]=new Xt(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(t,"pointerover",e),o&&this.delayDispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),("mouse"===t.pointerType||"pen"===t.pointerType)&&this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t,n=e.pointerId;return 1===n||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[n]?t=this.activeInteractionData[n]:((t=this.interactionDataPool.pop()||new Ut).identifier=n,this.activeInteractionData[n]=t),t.copyEvent(e),t},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];typeof i.button>"u"&&(i.button=e.touches.length?1:0),typeof i.buttons>"u"&&(i.buttons=e.touches.length?1:0),typeof i.isPrimary>"u"&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else if(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent)t.push(e);else{var o=e;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=1),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,t.push(o)}return t},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(B),Kt=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,c=this.items;this._aliasCount++;for(var u=0,h=c.length;u<h;u++)c[u][l](e,t,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Kt.prototype,{dispatch:{value:Kt.prototype.emit},run:{value:Kt.prototype.emit}}),M.PREFER_ENV=N.any?$.WEBGL:$.WEBGL2,M.STRICT_TEXTURE_CACHE=!1;var Qt=[];function Zt(e,t){if(!e)return null;var n="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=Qt.length-1;i>=0;--i){var o=Qt[i];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var Jt=function(e,t){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function en(e,t){function n(){this.constructor=e}Jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var tn=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Kt("setRealSize"),this.onUpdate=new Kt("update"),this.onError=new Kt("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),nn=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=e.call(this,o,a)||this).data=t,r}return en(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ae.UNPACK),n.width===t.width&&n.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,r.texImage2D(t.target,0,n.internalFormat,t.width,t.height,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(tn),rn={scaleMode:re.NEAREST,format:ee.RGBA,alphaMode:ae.NPM},on=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this,i=(n=n||{}).alphaMode,o=n.mipmap,a=n.anisotropicLevel,s=n.scaleMode,l=n.width,c=n.height,u=n.wrapMode,h=n.format,p=n.type,f=n.target,d=n.resolution,m=n.resourceOptions;return t&&!(t instanceof tn)&&((t=Zt(t,m)).internal=!0),r.width=l||0,r.height=c||0,r.resolution=d||M.RESOLUTION,r.mipmap=void 0!==o?o:M.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==a?a:M.ANISOTROPIC_LEVEL,r.wrapMode=u||M.WRAP_MODE,r.scaleMode=void 0!==s?s:M.SCALE_MODE,r.format=h||ee.RGBA,r.type=p||ne.UNSIGNED_BYTE,r.target=f||te.TEXTURE_2D,r.alphaMode=void 0!==i?i:ae.UNPACK,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.uid=qe(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=l>0&&c>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return en(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e,this.height=t,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=ze(this.realWidth)&&ze(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=this.width*t/e,this.height=this.height*t/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Je[this.cacheId],delete Ze[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,r){void 0===r&&(r=M.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;i?o=e:(e._pixiId||(e._pixiId="pixiid_"+qe()),o=e._pixiId);var a=Je[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new t(e,n)).cacheId=o,t.addToCache(a,o)),a},t.fromBuffer=function(e,n,r,i){e=e||new Float32Array(n*r*4);var o=new nn(e,{width:n,height:r}),a=e instanceof Float32Array?ne.FLOAT:ne.UNSIGNED_BYTE;return new t(o,Object.assign(rn,i||{width:n,height:r,type:a}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Je[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Je[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Je[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Je[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Je[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(B),an=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;(r=e.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<t;s++){var l=new on;r.items.push(l),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return en(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof tn?this.addResourceAt(e[n],n):this.addResourceAt(Zt(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load},t}(tn),sn=function(e){function t(t,n){var r,i,o=this,a=n||{},s=a.width,l=a.height;return Array.isArray(t)?(r=t,i=t.length):i=t,o=e.call(this,i,{width:s,height:l})||this,r&&o.initFromArray(r,n),o}return en(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=te.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,n){var r=this,i=r.length,o=r.itemDirtyIds,a=r.items,s=e.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,t.format,this._width,this._height,i,0,t.format,t.type,null);for(var l=0;l<i;l++){var c=a[l];o[l]<c.dirtyId&&(o[l]=c.dirtyId,c.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,t.type,c.resource.source))}return!0},t}(an),ln=function(e){function t(t){var n=this,r=t,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=e.call(this,i,o)||this).source=t,n.noSubImage=!1,n}return en(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin=it(t):!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,r){var i=e.gl,o=t.realWidth,a=t.realHeight;return r=r||this.source,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ae.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,i.texImage2D(t.target,0,t.format,t.format,t.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,t.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(tn),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return en(t,e),t.test=function(e){var t=window.OffscreenCanvas;return!!(t&&e instanceof t)||e instanceof HTMLCanvasElement},t}(ln),un=function(e){function t(n,r){var i=this,o=r||{},a=o.width,s=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:a,height:s})||this;for(var u=0;u<t.SIDES;u++)i.items[u].target=te.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=!1!==c,n&&i.initFromArray(n,r),!1!==l&&i.load(),i}return en(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=te.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=te.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,n,r){for(var i=this.itemDirtyIds,o=0;o<t.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,r),i[o]=a.dirtyId):i[o]<-1&&(e.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(an),hn=function(e){function t(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var i=new Image;ln.crossOrigin(i,t,n.crossorigin),i.src=t,t=i}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:M.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return en(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load},t.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===ae.UNPACK?"premultiply":"none"}).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process):Promise.resolve(this)},t.prototype.upload=function(t,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(ln),pn=function(e){function t(t,n){var r=this;return n=n||{},(r=e.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return en(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise((function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}))),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;ln.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,o=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,o=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=e.source;a.width=i,a.height=o,a._pixiId="canvas_"+qe(),a.getContext("2d").drawImage(t,0,0,n,r,0,0,i,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,t){return"svg"===t||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&0===e.indexOf("<svg")},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(ln),fn=function(e){function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];ln.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var l=document.createElement("source"),c=n[s],u=c.src,h=c.mime,p=(u=u||n[s]).split("?").shift().toLowerCase(),f=p.substr(p.lastIndexOf(".")+1);h=h||t.MIME_TYPES[f]||"video/"+f,l.src=u,l.type=h,o.appendChild(l)}n=o}return(i=e.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return en(t,e),t.prototype.update=function(t){if(!this.destroyed){var n=Gt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Gt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Gt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&Gt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Gt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Gt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(ln),dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return en(t,e),t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(ln);Qt.push(hn,dn,cn,fn,pn,nn,un,sn);var mn={Resource:tn,BaseImageResource:ln,INSTALLED:Qt,autoDetectResource:Zt,AbstractMultiResource:an,ArrayResource:sn,BufferResource:nn,CanvasResource:cn,CubeResource:un,ImageResource:hn,SVGResource:pn,VideoResource:fn,ImageBitmapResource:dn},gn=function(){function e(e){this.renderer=e}return e.prototype.destroy=function(){this.renderer=null},e}(),yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return en(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ae.UNPACK),n.width===t.width&&n.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,r.texImage2D(t.target,0,1===e.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0},t}(nn),vn=function(){function e(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Kt("disposeFramebuffer"),this.multisample=he.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new on(null,{scaleMode:re.NEAREST,resolution:1,mipmap:oe.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new on(new yn(null,{width:this.width,height:this.height}),{scaleMode:re.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:oe.OFF,format:ee.DEPTH_COMPONENT,type:ne.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),bn=function(e){function t(t){var n=this;"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});n=e.call(this,null,t)||this;var r=t||{},i=r.width,o=r.height;return n.mipmap=0,n.width=Math.ceil(i)||100,n.height=Math.ceil(o)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new vn(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return en(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),this.framebuffer.resize(e*this.resolution,t*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(on),_n=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var o=e.width/2/r,a=e.height/2/i,s=e.x/r+o,l=e.y/i+a;n=Ot.add(n,Ot.NW),this.x0=s+o*Ot.uX(n),this.y0=l+a*Ot.uY(n),n=Ot.add(n,2),this.x1=s+o*Ot.uX(n),this.y1=l+a*Ot.uY(n),n=Ot.add(n,2),this.x2=s+o*Ot.uX(n),this.y2=l+a*Ot.uY(n),n=Ot.add(n,2),this.x3=s+o*Ot.uX(n),this.y3=l+a*Ot.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),Tn=new _n,En=function(e){function t(n,r,i,o,a,s){var l=e.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new ht(0,0,1,1)),n instanceof t&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=Tn,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new gt(s.x,s.y):new gt(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return en(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture;n&&n.url&&Ze[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===Tn&&(this._uvs=new _n),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=M.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;i?o=e:(e._pixiId||(e._pixiId="pixiid_"+qe()),o=e._pixiId);var a=Ze[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||(n.resolution||(n.resolution=ot(e)),(a=new t(new on(e,n))).baseTexture.cacheId=o,on.addToCache(a.baseTexture,o),t.addToCache(a,o)),a},t.fromURL=function(e,n){var r=Object.assign({autoLoad:!1},n?.resourceOptions),i=t.from(e,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},t.fromBuffer=function(e,n,r,i){return new t(on.fromBuffer(e,n,r,i))},t.fromLoader=function(e,n,r){var i=new hn(e);i.url=n;var o=new t(new on(i,{scaleMode:M.SCALE_MODE,resolution:ot(n)}));return r||(r=n),on.addToCache(o.baseTexture,r),t.addToCache(o,r),r!==n&&(on.addToCache(o.baseTexture,n),t.addToCache(o,n)),o},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Ze[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),Ze[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Ze[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ze[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)Ze[e.textureCacheIds[r]]===e&&delete Ze[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",l="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+s+" "+c)}this.valid=r&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(B);function Sn(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}En.EMPTY=new En(new on),Sn(En.EMPTY),Sn(En.EMPTY.baseTexture),En.WHITE=function(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new En(new on(new cn(e)))}(),Sn(En.WHITE),Sn(En.WHITE.baseTexture);var wn=function(e){function t(t,n){var r=this,i=null;if(!(t instanceof bn)){var o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),i=arguments[0],n=null,t=new bn({width:o,height:a,scaleMode:s,resolution:l})}return(r=e.call(this,t,n)||this).legacyRenderer=i,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return en(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0),e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,n&&this.baseTexture.resize(e,t),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){return"number"==typeof e&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new bn(e))},t}(En),An=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t){var n=new bn(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new wn(n)},e.prototype.getOptimalTexture=function(t,n,r){void 0===r&&(r=1);var i=e.SCREEN_KEY;t*=r,n*=r,(!this.enableFullScreen||t!==this._pixelsWidth||n!==this._pixelsHeight)&&(i=(65535&(t=Ue(t)))<<16|65535&(n=Ue(n))),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(t,n)),o.filterPoolKey=i,o.setResolution(r),o},e.prototype.getFilterTexture=function(e,t){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution);return n.filterFrame=e.filterFrame,n},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var n=e.SCREEN_KEY,r=this.texturePool[n];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY="screen",e}(),On=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=5126),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,o){return new e(t,n,r,i,o)},e}(),xn=0,kn=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=xn++,this.disposeRunner=new Kt("disposeBuffer")}return e.prototype.update=function(e){this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}();function In(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var Cn={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Pn={5126:4,5123:2,5121:1},Dn=0,Rn={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Nn=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Dn++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Kt("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof kn||(t instanceof Array&&(t=new Float32Array(t)),t=new kn(t));var l=e.split("|");if(l.length>1){for(var c=0;c<l.length;c++)this.addAttribute(l[c],t,n,r,i);return this}var u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new On(u,n,r,i,o,a,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof kn||(e instanceof Array&&(e=new Uint16Array(e)),e=new kn(e)),e.index=!0,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new kn;for(e in this.attributes){var i=this.attributes[e],o=this.buffers[i.buffer];t.push(o.data),n.push(i.size*Pn[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,l=0;for(o=0;o<e.length;o++){var c=t[o],u=e[o],h=In(u);i[h]||(i[h]=new Cn[h](a)),s=i[h];for(var p=0;p<u.length;p++)s[(p/c|0)*r+l+p%c]=u[p];l+=c}return new Float32Array(a)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new kn(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new On(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},e.merge=function(t){for(var n,r=new e,i=[],o=[],a=[],s=0;s<t.length;s++){n=t[s];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,a[l]=0}for(s=0;s<n.buffers.length;s++)i[s]=new(Rn[In(n.buffers[s].data)])(o[s]),r.buffers[s]=new kn(i[s]);for(s=0;s<t.length;s++){n=t[s];for(l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,a[l]),a[l]+=n.buffers[l].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.index=!0;var c=0,u=0,h=0,p=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){p=s;break}for(var s in n.attributes){var f=n.attributes[s];(0|f.buffer)===p&&(u+=f.size*Pn[f.type]/4)}for(s=0;s<t.length;s++){var d=t[s].indexBuffer.data;for(l=0;l<d.length;l++)r.indexBuffer.data[l+h]+=c;c+=n.buffers[p].data.length/u,h+=d.length}}return r},e}(),Mn=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return en(t,e),t}(Nn),Ln=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new kn(t.vertices),t.uvBuffer=new kn(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return en(t,e),t.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Nn),jn=0,Bn=function(){function e(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=jn++,this.static=!!t}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(t,n,r){this.uniforms[t]=new e(n,r)},e.from=function(t,n){return new e(t,n)},e}(),Fn=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ht,this.destinationFrame=new ht,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Gn=function(e){function t(t){var n=e.call(this,t)||this;return n.defaultFilterStack=[{}],n.texturePool=new An,n.texturePool.setScreenSize(t.view),n.statePool=[],n.quad=new Mn,n.quadUv=new Ln,n.tempRect=new ht,n.activeState={},n.globalUniforms=new Bn({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return en(t,e),t.prototype.push=function(e,t){for(var n=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new Fn,o=t[0].resolution,a=t[0].padding,s=t[0].autoFit,l=t[0].legacy,c=1;c<t.length;c++){var u=t[c];o=Math.min(o,u.resolution),a=this.useMaxPadding?Math.max(a,u.padding):a+u.padding,s=s&&u.autoFit,l=l||u.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),r.push(i),i.resolution=o,i.legacy=l,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(a),s&&i.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),i.sourceFrame.ceil(o),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var h=this.tempRect;h.width=i.sourceFrame.width,h.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,n.renderTexture.bind(i.renderTexture,i.sourceFrame,h),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*t.resolution,o[1]=i[1]*t.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*i[2]-.5*o[2],a[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(t.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,l.renderTexture,se.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var c=t.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,t.resolution);u.filterFrame=c.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,c,u,se.CLEAR,t);var p=c;c=u,u=p}n[h].apply(this,c,l.renderTexture,se.BLEND,t),this.returnFilterTexture(c),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)},t.prototype.bindAndClear=function(e,t){if(void 0===t&&(t=se.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);"boolean"==typeof t&&(t=t?se.CLEAR:se.BLEND,Ke("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(t===se.CLEAR||t===se.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,t,n,r){var i=this.renderer;this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.state.set(e.state),i.shader.bind(e),e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(J.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(J.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=t._texture.orig,a=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(vt.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,t,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(e,t,n)},t.prototype.getFilterTexture=function(e,t){if("number"==typeof e){var n=e;e=t,t=n}e=e||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);return r.filterFrame=e.filterFrame,r},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(gn),Hn=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),Un=function(e){function t(t){var n=e.call(this,t)||this;return n.emptyRenderer=new Hn(t),n.currentRenderer=n.emptyRenderer,n}return en(t,e),t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},t.prototype.boundArray=function(e,t,n,r){for(var i=e.elements,o=e.ids,a=e.count,s=0,l=0;l<a;l++){var c=i[l],u=c._batchLocation;if(u>=0&&u<r&&t[u]===c)o[l]=u;else for(;s<r;){var h=t[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[l]=s,c._batchLocation=s,t[s]=c;break}s++}}},t}(gn),zn=0,Vn=function(e){function t(t){var n=e.call(this,t)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),t.view.addEventListener("webglcontextlost",n.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return en(t,e),Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=zn++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=zn++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},t.prototype.createContext=function(e,t){var n;if(M.PREFER_ENV>=$.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(gn),Xn=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=he.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Yn=new ht,Wn=function(e){function t(t){var n=e.call(this,t)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new vn(10,10),n.msaaSamples=null,n}return en(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ht,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;M.PREFER_ENV===$.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,t){var n=this.gl;if(e){var r=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==e.dirtyId&&(r.dirtyId=e.dirtyId,r.dirtyFormat!==e.dirtyFormat?(r.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):r.dirtySize!==e.dirtySize&&(r.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var i=0;i<e.colorTextures.length;i++){var o=e.colorTextures[i];this.renderer.texture.unbind(o.parentTextureArray||o)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,t,n,r){var i=this.viewport;(i.width!==n||i.height!==r||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,t,n,r,i){void 0===i&&(i=Q.COLOR|Q.DEPTH);var o=this.gl;o.clearColor(e,t,n,r),o.clear(i)},t.prototype.initFramebuffer=function(e){var t=this.gl,n=new Xn(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));for(var r=e.colorTextures,i=0;i<r.length;i++)this.renderer.texture.bind(r[i],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],r=e.colorTextures.length;t.drawBuffers||(r=Math.min(r,1)),n.multisample>1&&(n.msaaBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,n.msaaBuffer));for(var i=[],o=0;o<r;o++)if(!(0===o&&n.multisample>1)){var a=e.colorTextures[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,a.target,s._glTextures[this.CONTEXT_UID].texture,0),i.push(t.COLOR_ATTACHMENT0+o)}if((i.length>1&&t.drawBuffers(i),e.depthTexture)&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height),e.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var t=this.msaaSamples,n=he.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=he.NONE),n},t.prototype.blit=function(e,t,n){var r=this,i=r.current,o=r.renderer,a=r.gl,s=r.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var l=i.glFramebuffers[s];if(l){if(!e){if(l.multisample<=1)return;l.blitFramebuffer||(l.blitFramebuffer=new vn(i.width,i.height),l.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(e=l.blitFramebuffer).width=i.width,e.height=i.height}t||((t=Yn).width=i.width,t.height=i.height),n||(n=t);var c=t.width===n.width&&t.height===n.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height,a.COLOR_BUFFER_BIT,c?a.NEAREST:a.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.stencil&&r.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.enableStencil();var n=e.width,r=e.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ht},t}(gn),qn=function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},$n={5126:4,5123:2,5121:1},Kn=function(e){function t(t){var n=e.call(this,t)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return en(t,e),t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;M.PREFER_ENV===$.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,o){return r.drawElementsInstancedANGLE(e,t,n,i,o)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},t.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[t.program.id]||this.initGeometryVao(e,t.program,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.gl,n=0;n<e.buffers.length;n++){var r=e.buffers[n],i=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==i.updateID){i.updateID=r._updateID;var o=r.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;if(t.bindBuffer(o,i.buffer),this._boundBuffer=i,i.byteLength>=r.data.byteLength)t.bufferSubData(o,0,r.data);else{var a=r.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=r.data.byteLength,t.bufferData(o,r.data,a)}}}},t.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var o in n)r[o]&&i.push(o);return i.join("-")},t.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0),this.checkCompatibility(e,t);var r=this.gl,i=this.CONTEXT_UID,o=this.getSignature(e,t),a=e.glVertexArrayObjects[this.CONTEXT_UID],s=a[o];if(s)return a[t.id]=s,s;var l=e.buffers,c=e.attributes,u={},h={};for(var p in l)u[p]=0,h[p]=0;for(var p in c)!c[p].size&&t.attributeData[p]?c[p].size=t.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[c[p].buffer]+=c[p].size*$n[c[p].type];for(var p in c){var f=c[p],d=f.size;void 0===f.stride&&(u[f.buffer]===d*$n[f.type]?f.stride=0:f.stride=u[f.buffer]),void 0===f.start&&(f.start=h[f.buffer],h[f.buffer]+=d*$n[f.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var m=0;m<l.length;m++){var g=l[m];g._glBuffers[i]||(g._glBuffers[i]=new qn(r.createBuffer()),this.managedBuffers[g.id]=g,g.disposeRunner.add(this)),n&&g._glBuffers[i].refCount++}return this.activateVao(e,t),this._activeVao=s,a[t.id]=s,a[o]=s,s},t.prototype.disposeBuffer=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,t){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,i=e.buffers;if(e.disposeRunner.remove(this),n){for(var o=0;o<i.length;o++){var a=i[o]._glBuffers[this.CONTEXT_UID];a.refCount--,0===a.refCount&&!t&&this.disposeBuffer(i[o],t)}if(!t)for(var s in n)if("g"===s[0]){var l=n[s];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e);t=Object.keys(this.managedBuffers);for(n=0;n<t.length;n++)this.disposeBuffer(this.managedBuffers[t[n]],e)},t.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=e.buffers,o=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[r].buffer);var a=null;for(var s in o){var l=o[s],c=i[l.buffer]._glBuffers[r];if(t.attributeData[s]){a!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),a=c);var u=t.attributeData[s].location;if(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(u,1)}}}},t.prototype.draw=function(e,t,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,t||o.getSize(),r||1):i.drawArrays(e,n,t||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(gn),Qn=function(){function e(e){void 0===e&&(e=null),this.type=ue.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ue.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function Zn(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function Jn(e,t,n,r){var i=Zn(e,e.VERTEX_SHADER,t),o=Zn(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,o),r)for(var s in r)e.bindAttribLocation(a,r[s],s);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(i))),e.getShaderParameter(o,e.COMPILE_STATUS)||(console.warn(n),console.error(e.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(i),e.deleteShader(o),a}function er(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function tr(e,t){switch(e){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return er(2*t);case"bvec3":return er(3*t);case"bvec4":return er(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var nr,rr={},ir=rr;function or(){if(ir===rr||ir&&ir.isContextLost()){var e=document.createElement("canvas"),t=void 0;M.PREFER_ENV>=$.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),ir=t}return ir}function ar(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===ce.HIGH&&n!==ce.HIGH&&(r=ce.MEDIUM),"precision "+r+" float;\n"+e}return n!==ce.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var sr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function lr(e){return sr[e]}var cr=null,ur={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function hr(e,t){if(!cr){var n=Object.keys(ur);cr={};for(var r=0;r<n.length;++r){var i=n[r];cr[e[i]]=ur[i]}}return cr[t]}var pr=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],fr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},dr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var mr,gr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function yr(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}function vr(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=gr.replace(/%forloop%/gi,yr(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}var br=0,_r={},Tr=function(){function e(t,n,r){void 0===r&&(r="pixi-shader"),this.id=br++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),_r[r]?(_r[r]++,r+="-"+_r[r]):_r[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=ar(this.vertexSrc,M.PRECISION_VERTEX,ce.HIGH),this.fragmentSrc=ar(this.fragmentSrc,M.PRECISION_FRAGMENT,function(){if(!nr){nr=ce.MEDIUM;var e=or();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);nr=t.precision?ce.HIGH:ce.MEDIUM}}return nr}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(e,t){var n=or();if(n){var r=Jn(n,e,t);this.attributeData=this.getAttributeData(r,n),this.uniformData=this.getUniformData(r,n),n.deleteProgram(r)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(e,t){for(var n={},r=[],i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=t.getActiveAttrib(e,o),s=hr(t,a.type),l={type:s,name:a.name,size:lr(s),location:0};n[a.name]=l,r.push(l)}r.sort((function(e,t){return e.name>t.name?1:-1}));for(o=0;o<r.length;o++)r[o].location=o;return n},e.prototype.getUniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(e,i),a=o.name.replace(/\[.*?\]$/,""),s=o.name.match(/\[.*?\]$/),l=hr(t,o.type);n[a]={type:l,size:o.size,isArray:s,value:tr(l,o.size)}}return n},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,o=Qe[i];return o||(Qe[i]=o=new e(t,n,r)),o},e}(),Er=function(){function e(e,t){for(var n in this.program=e,this.uniformGroup=t?t instanceof Bn?t:new Bn(t):new Bn({}),e.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){return new e(Tr.from(t,n),r)},e}(),Sr=function(){function e(){this.data=0,this.blendMode=Z.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==Z.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),wr=function(e){function t(n,r,i){var o=this,a=Tr.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return(o=e.call(this,a,i)||this).padding=0,o.resolution=M.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Sr,o}return en(t,e),t.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(Er),Ar=new vt,Or=function(){function e(e,t){this._texture=e,this.mapCoord=new vt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(Ar.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Ar));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0},e}(),xr=function(e){function t(t){var n=this,r=new vt;return n=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,t.renderable=!1,n.maskSprite=t,n.maskMatrix=r,n}return en(t,e),t.prototype.apply=function(e,t,n,r){var i=this.maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Or(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))},t}(wr),kr=function(e){function t(t){var n=e.call(this,t)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return en(t,e),t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Qn;r.pooled=!0,r.maskObject=t,n=r}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case ue.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case ue.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case ue.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},t.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){switch(t.type){case ue.SCISSOR:this.renderer.scissor.pop();break;case ue.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ue.SPRITE:this.popSpriteMask()}t.reset(),t.pooled&&this.maskDataPool.push(t)}},t.prototype.detect=function(e){var t=e.maskObject;if(t.isSprite)e.type=ue.SPRITE;else if(e.type=ue.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var n=t.worldTransform,r=Math.atan2(n.b,n.a),i=Math.atan2(n.d,n.c);r=Math.round(r*(180/Math.PI)*100),i=((i=Math.round(i*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===i&&(e.type=ue.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var t=e.maskObject,n=e._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new xr(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t;var i=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=i,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(gn),Ir=function(e){function t(t){var n=e.call(this,t)||this;return n.maskStack=[],n.glConst=0,n}return en(t,e),t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskStack=null},t}(gn),Cr=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return en(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var t=e.maskObject;t.renderable=!0;var n=e._scissorRect,r=t.getBounds(!0),i=this.renderer.gl;t.renderable=!1,n?r.fit(n):i.enable(i.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=r,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current,n=this.renderer.projection,r=n.transform,i=n.sourceFrame,o=n.destinationFrame,a=t?t.resolution:this.renderer.resolution,s=(e.x-i.x)*a+o.x,l=(e.y-i.y)*a+o.y,c=e.width*a,u=e.height*a;r&&(s+=r.tx*a,l+=r.ty*a),t||(l=this.renderer.height-u-l),this.renderer.gl.scissor(s,l,c,u)},t}(Ir),Pr=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return en(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(Ir),Dr=function(e){function t(t){var n=e.call(this,t)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new vt,n.transform=null,n}return en(t,e),t.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,t,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d},t.prototype.setTransform=function(e){},t}(gn),Rr=new ht,Nr=new ht,Mr=new ht,Lr=function(e){function t(t){var n=e.call(this,t)||this;return n.clearColor=t._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new ht,n.destinationFrame=new ht,n}return en(t,e),t.prototype.bind=function(e,t,n){void 0===e&&(e=null);var r,i,o,a=this.renderer;this.current=e,e?(o=(r=e.baseTexture).resolution,t||(Rr.width=e.frame.width,Rr.height=e.frame.height,t=Rr),n||(Nr.x=e.frame.x,Nr.y=e.frame.y,Nr.width=t.width,Nr.height=t.height,n=Nr),i=r.framebuffer):(o=a.resolution,t||(Rr.width=a.screen.width,Rr.height=a.screen.height,t=Rr),n||((n=Rr).width=t.width,n.height=t.height)),Mr.x=n.x*o,Mr.y=n.y*o,Mr.width=n.width*o,Mr.height=n.height*o,this.renderer.framebuffer.bind(i,Mr),this.renderer.projection.update(n,t,o,!i),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(gn),jr=function(){},Br=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),Fr=0,Gr={textureCount:0},Hr=function(e){function t(t){var n=e.call(this,t)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=Fr++,n}return en(t,e),t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof mr)return mr;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");mr=!0===e({a:"b"},"a","b")}catch{mr=!1}return mr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Gr.textureCount=0,this.syncUniformGroup(e.uniformGroup,Gr)),r},t.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,t){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},t.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=function(e,t){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in e.uniforms){var i=t[r];if(i){for(var o=e.uniforms[r],a=!1,s=0;s<pr.length;s++)if(pr[s].test(i,o)){n.push(pr[s].code(r,o)),a=!0;break}if(!a){var l=(1===i.size?fr:dr)[i.type].replace("location",'ud["'+r+'"].location');n.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+l+";")}}else e.uniforms[r].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,t){var n=e.uniforms,r=[];for(var i in n)r.push(i),t[i]&&r.push(t[i].type);return r.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var t=this.gl,n=e.program,r={};for(var i in n.attributeData)r[i]=n.attributeData[i].location;var o=Jn(t,n.vertexSrc,n.fragmentSrc,r),a={};for(var i in n.uniformData){var s=n.uniformData[i];a[i]={location:t.getUniformLocation(o,i),value:tr(s.type,s.size)}}var l=new Br(o,a);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(gn);var Ur=function(e){function t(t){var n=e.call(this,t)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=Z.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new Sr,n.defaultState.blend=!0,n}return en(t,e),t.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[Z.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.ADD]=[e.ONE,e.ONE],t[Z.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.NONE]=[0,0],t[Z.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Z.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Z.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Z.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Z.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Z.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Z.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Z.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Z.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Z.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Z.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):!t&&-1!==n&&this.checks.splice(n,1)},t.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},t.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},t}(gn),zr=function(e){function t(t){var n=e.call(this,t)||this;return n.count=0,n.checkCount=0,n.maxIdle=M.GC_MAX_IDLE,n.checkCountMax=M.GC_MAX_CHECK_COUNT,n.mode=M.GC_MODE,n}return en(t,e),t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==le.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){var o=0;for(r=0;r<t.length;r++)null!==t[r]&&(t[o++]=t[r]);t.length=o}},t.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},t}(gn),Vr=function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Xr=function(e){function t(t){var n=e.call(this,t)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new on,n}return en(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Vr(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Vr(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if(e){if((e=e.castToBaseTexture()).parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},t.prototype.initTexture=function(e){var t=new Vr(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},t.prototype.initTextureType=function(e,t){if(t.internalFormat=e.format,t.type=e.type,2===this.webGLVersion){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA32F),e.type===ne.HALF_FLOAT&&(t.type=n.HALF_FLOAT),t.type===n.HALF_FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),!e.resource||!e.resource.upload(n,e,t)){var r=e.realWidth,i=e.realHeight,o=n.gl;(t.width!==r||t.height!==i||t.dirtyId<0)&&(t.width=r,t.height=i,o.texImage2D(e.target,0,t.internalFormat,r,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&Xe(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==oe.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=ie.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===re.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===re.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===re.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===re.LINEAR?n.LINEAR:n.NEAREST)},t}(gn),Yr={FilterSystem:Gn,BatchSystem:Un,ContextSystem:Vn,FramebufferSystem:Wn,GeometrySystem:Kn,MaskSystem:kr,ScissorSystem:Cr,StencilSystem:Pr,ProjectionSystem:Dr,RenderTextureSystem:Lr,ShaderSystem:Hr,StateSystem:Ur,TextureGCSystem:zr,TextureSystem:Xr},Wr=new vt,qr=function(e){function t(t,n){void 0===t&&(t=K.UNKNOWN);var r=e.call(this)||this;return(n=Object.assign({},M.RENDER_OPTIONS,n)).roundPixels&&(M.ROUND_PIXELS=n.roundPixels,Ke("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=n,r.type=t,r.screen=new ht(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||M.RESOLUTION,r.transparent=n.transparent,r.autoDensity=n.autoDensity||n.autoResize||!1,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}return en(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=t+"px"),this.emit("resize",e,t)},t.prototype.generateTexture=function(e,t,n,r){0===(r=r||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var i=wn.create({width:0|r.width,height:0|r.height,scaleMode:t,resolution:n});return Wr.tx=-r.x,Wr.ty=-r.y,this.render(e,i,!1,Wr,!!e.parent),i},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=K.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=De(e),Pe(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(B),$r=function(e){function t(n){var r=e.call(this,K.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Kt("destroy"),contextChange:new Kt("contextChange"),reset:new Kt("reset"),update:new Kt("update"),postrender:new Kt("postrender"),prerender:new Kt("prerender"),resize:new Kt("resize")},r.globalUniforms=new Bn({projectionMatrix:new vt},!0),r.addSystem(kr,"mask").addSystem(Vn,"context").addSystem(Ur,"state").addSystem(Hr,"shader").addSystem(Xr,"texture").addSystem(Kn,"geometry").addSystem(Wn,"framebuffer").addSystem(Cr,"scissor").addSystem(Pr,"stencil").addSystem(Dr,"projection").addSystem(zr,"textureGC").addSystem(Gn,"filter").addSystem(Lr,"renderTexture").addSystem(Un,"batch"),r.initPlugins(t.__plugins),n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:n.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Ie(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return en(t,e),t.create=function(e){if(Ce())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,t){t||(t=e.name);var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var r in this[t]=n,this.runners)this.runners[r].add(n);return this},t.prototype.render=function(e,t,n,r,i){if(this.renderingToScreen=!t,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(t||(this._lastObjectRendered=e),!i){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(t),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(t,n)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(qr);function Kr(e){return $r.create(e)}var Qr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Zr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Jr=function(){this.texArray=null,this.blend=0,this.type=J.TRIANGLES,this.start=0,this.size=0,this.data=null},ei=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),ti=function(){function e(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),ni=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Sr.for2d(),n.size=4*M.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return en(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;M.PREFER_ENV===$.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),M.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=vr(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new Jr);for(;n.length<i;)n.push(new ei);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,r=t._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++on._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var p=e[h];e[h]=null,p._batchEnabled!==s&&(c.count>=n&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++s),p._batchEnabled=s,p.touched=a,c.elements[c.count++]=p)}c.count>0&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++s);for(h=0;h<o.length;h++)o[h]=null;on._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,r){var i=this,o=i._bufferedElements,a=i._attributeBuffer,s=i._indexBuffer,l=i.vertexSize,c=t._drawCallPool,u=this._dcIndex,h=this._aIndex,p=this._iIndex,f=c[u];f.start=this._iIndex,f.texArray=e;for(var d=n;d<r;++d){var m=o[d],g=m._texture.baseTexture,y=Ne[g.alphaMode?1:0][m.blendMode];o[d]=null,n<d&&f.blend!==y&&(f.size=p-f.start,n=d,(f=c[++u]).texArray=e,f.start=p),this.packInterleavedGeometry(m,a,s,h,p),h+=m.vertexData.length/2*l,p+=m.indices.length,f.blend=y}n<r&&(f.size=p-f.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=p},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,n=e._attributeBuffer,r=e._indexBuffer;M.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=t._drawCallPool,a=null,s=0;s<e;s++){var l=o[s],c=l.texArray,u=l.type,h=l.size,p=l.start,f=l.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=f,i.set(this.state),r.drawElements(u,h,r.UNSIGNED_SHORT,2*p)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),M.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=Ue(Math.ceil(e/8)),n=Ve(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new ti(r*this.vertexSize*4)),i},t.prototype.getIndexBuffer=function(e){var t=Ue(Math.ceil(e/12)),n=Ve(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},t.prototype.packInterleavedGeometry=function(e,t,n,r,i){for(var o=t.uint32View,a=t.float32View,s=r/this.vertexSize,l=e.uvs,c=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),f=p<1&&e._texture.baseTexture.alphaMode?je(e._tintRGB,p):e._tintRGB+(255*p<<24),d=0;d<u.length;d+=2)a[r++]=u[d],a[r++]=u[d+1],a[r++]=l[d],a[r++]=l[d+1],o[r++]=f,a[r++]=h;for(d=0;d<c.length;d++)n[i++]=s+c[d]},t._drawCallPool=[],t._textureArrayPool=[],t}(Hn),ri=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=Bn.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Tr(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new vt,default:this.defaultGroupCache[e]};return new Er(this.programCache[e],i)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"},e}(),ii=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new kn(null,t,!1),n._indexBuffer=new kn(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ne.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ne.FLOAT).addAttribute("aColor",n._buffer,4,!0,ne.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ne.FLOAT).addIndex(n._indexBuffer),n}return en(t,e),t}(Nn),oi="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ai="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",si=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:oi,fragment:ai,geometryClass:ii,vertexSize:6},e),n=t.vertex,r=t.fragment,i=t.vertexSize,o=t.geometryClass;return function(e){function t(t){var a=e.call(this,t)||this;return a.shaderGenerator=new ri(n,r),a.geometryClass=o,a.vertexSize=i,a}return en(t,e),t}(ni)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return oi},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return ai},enumerable:!1,configurable:!0}),e}(),li=si.create(),ci=function(){function e(t){var n=this;t=Object.assign({forceCanvas:!1},t),this.renderer=Kr(t),this.stage=new Nt,e._plugins.forEach((function(e){e.init.call(n,t)}))}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(e){e.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null},e}();ci._plugins=[];var ui=function(){function e(){}return e.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame((function(){return t.resize()})))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===window)e=window.innerWidth,n=window.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},e.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();ci.registerPlugin(ui);var hi=new ht,pi=function(){function e(e){this.renderer=e,e.extract=this}return e.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},e.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},e.prototype.canvas=function(t){var n,r,i,o=this.renderer,a=!1,s=!1;t&&(t instanceof wn?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=hi).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),u=new et(l,c,1),h=new Uint8Array(4*l*c),p=o.gl;p.readPixels(r.x*n,r.y*n,l,c,p.RGBA,p.UNSIGNED_BYTE,h);var f=u.context.getImageData(0,0,l,c);if(e.arrayPostDivide(h,f.data),u.context.putImageData(f,0,0),a){var d=new et(u.width,u.height,1);d.context.scale(1,-1),d.context.drawImage(u.canvas,0,-c),u.destroy(),u=d}return s&&i.destroy(!0),u.canvas},e.prototype.pixels=function(t){var n,r,i,o=this.renderer,a=!1;t&&(t instanceof wn?i=t:(i=this.renderer.generateTexture(t),a=!0)),i?(n=i.baseTexture.resolution,r=i.frame,o.renderTexture.bind(i)):(n=o.resolution,(r=hi).width=o.width,r.height=o.height,o.renderTexture.bind(null));var s=r.width*n,l=r.height*n,c=new Uint8Array(4*s*l),u=o.gl;return u.readPixels(r.x*n,r.y*n,s,l,u.RGBA,u.UNSIGNED_BYTE,c),a&&i.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var r=t[n+3]=e[n+3];0!==r?(t[n]=Math.round(Math.min(255*e[n]/r,255)),t[n+1]=Math.round(Math.min(255*e[n+1]/r,255)),t[n+2]=Math.round(Math.min(255*e[n+2]/r,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},e}(),fi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;const n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={};let o=14;for(;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(e,t,r){t&&(i[n.q.name][t]=r)})),i};const di=(0,a.g)(fi);class mi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}function gi(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}class yi{constructor(){this._head=this._tail=void 0}handlers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._head;if(e)return!!t;const n=[];for(;t;)n.push(t),t=t._next;return n}has(e){if(!(e instanceof mi))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}dispatch(){let e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return gi(this,new mi(e,!1,t))}once(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return gi(this,new mi(e,!0,t))}detach(e){if(!(e instanceof mi))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this}detachAll(){let e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}function vi(){}function bi(e,t,n,r){var i=0,o=e.length;!function a(s){s||i===o?n&&n(s):r?setTimeout((function(){t(e[i++],a)}),1):t(e[i++],a)}()}function _i(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}var Ti={};function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Si(e,t,n){return t&&Ei(e.prototype,t),n&&Ei(e,n),e}var wi=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Ai=null;function Oi(){}var xi=function(){function e(t,n,r){if("string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Oi,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new yi,this.onProgress=new yi,this.onComplete=new yi,this.onAfterMiddleware=new yi}e.setExtensionLoadType=function(t,n){ki(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){ki(e._xhrTypeMap,t,n)};var t=e.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var n=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout((function(){return t(n)}),1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:wi&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t._hasFlag=function(e){return 0!==(this._flags&e)},t._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){return e.send()}),1)},t._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},t._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var e=this.xhr;this.abort(Ii(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t._xhrOnTimeout=function(){var e=this.xhr;this.abort(Ii(e)+" Request timed out.")},t._xhrOnAbort=function(){var e=this.xhr;this.abort(Ii(e)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t=this.xhr,n="",r=typeof t.status>"u"?200:t.status;if((""===t.responseType||"text"===t.responseType||typeof t.responseType>"u")&&(n=t.responseText),0===r&&(n.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(a){return void this.abort("Error trying to parse loaded json: "+a)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=e.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},t._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,Ai||(Ai=document.createElement("a")),Ai.href=e;var n=!(e=di(Ai.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&n&&r===t.protocol?"":"anonymous"},t._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},t._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Si(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function ki(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function Ii(e){return e.toString().replace("object ","")}xi.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},xi.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},xi.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},xi.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},xi._loadTypeMap={gif:xi.LOAD_TYPE.IMAGE,png:xi.LOAD_TYPE.IMAGE,bmp:xi.LOAD_TYPE.IMAGE,jpg:xi.LOAD_TYPE.IMAGE,jpeg:xi.LOAD_TYPE.IMAGE,tif:xi.LOAD_TYPE.IMAGE,tiff:xi.LOAD_TYPE.IMAGE,webp:xi.LOAD_TYPE.IMAGE,tga:xi.LOAD_TYPE.IMAGE,svg:xi.LOAD_TYPE.IMAGE,"svg+xml":xi.LOAD_TYPE.IMAGE,mp3:xi.LOAD_TYPE.AUDIO,ogg:xi.LOAD_TYPE.AUDIO,wav:xi.LOAD_TYPE.AUDIO,mp4:xi.LOAD_TYPE.VIDEO,webm:xi.LOAD_TYPE.VIDEO},xi._xhrTypeMap={xhtml:xi.XHR_RESPONSE_TYPE.DOCUMENT,html:xi.XHR_RESPONSE_TYPE.DOCUMENT,htm:xi.XHR_RESPONSE_TYPE.DOCUMENT,xml:xi.XHR_RESPONSE_TYPE.DOCUMENT,tmx:xi.XHR_RESPONSE_TYPE.DOCUMENT,svg:xi.XHR_RESPONSE_TYPE.DOCUMENT,tsx:xi.XHR_RESPONSE_TYPE.DOCUMENT,gif:xi.XHR_RESPONSE_TYPE.BLOB,png:xi.XHR_RESPONSE_TYPE.BLOB,bmp:xi.XHR_RESPONSE_TYPE.BLOB,jpg:xi.XHR_RESPONSE_TYPE.BLOB,jpeg:xi.XHR_RESPONSE_TYPE.BLOB,tif:xi.XHR_RESPONSE_TYPE.BLOB,tiff:xi.XHR_RESPONSE_TYPE.BLOB,webp:xi.XHR_RESPONSE_TYPE.BLOB,tga:xi.XHR_RESPONSE_TYPE.BLOB,json:xi.XHR_RESPONSE_TYPE.JSON,text:xi.XHR_RESPONSE_TYPE.TEXT,txt:xi.XHR_RESPONSE_TYPE.TEXT,ttf:xi.XHR_RESPONSE_TYPE.BUFFER,otf:xi.XHR_RESPONSE_TYPE.BUFFER},xi.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Pi=window.URL||window.webkitURL;var Di={caching:function(e,t){var n=this;Ti[e.url]?(e.data=Ti[e.url],e.complete()):e.onComplete.once((function(){return Ti[n.url]=n.data})),t()},parsing:function(e,t){if(e.data){if(e.xhr&&e.xhrType===xi.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=Pi.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.type=xi.TYPE.IMAGE,void(e.data.onload=function(){Pi.revokeObjectURL(n),e.data.onload=null,t()})}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+function(e){for(var t="",n=0;n<e.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<e.length?r[o]=255&e.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(e.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var a=0;a<i.length;++a)t+=Ci.charAt(i[a])}return t}(e.xhr.responseText),e.type=xi.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}},Ri=/(#[\w-]+)?$/,Ni=function(){function e(t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:t,saturated:vi,unsaturated:vi,buffer:t/4,empty:vi,drain:vi,error:vi,started:!1,paused:!1,push:function(e,t){i(e,!1,t)},kill:function(){n=0,r.drain=vi,r.started=!1,r._tasks=[]},unshift:function(e,t){i(e,!0,t)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),(n+=1)===r.concurrency&&r.saturated(),e(t.data,_i(o(t)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var e=1;e<=r.concurrency;e++)r.process()}}};function i(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==e&&r.idle())setTimeout((function(){return r.drain()}),1);else{var i={data:e,callback:"function"==typeof n?n:vi};t?r._tasks.unshift(i):r._tasks.push(i),setTimeout((function(){return r.process()}),1)}}function o(e){return function(){n-=1,e.callback.apply(e,arguments),null!=arguments[0]&&r.error(arguments[0],e.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new yi,this.onError=new yi,this.onLoad=new yi,this.onStart=new yi,this.onComplete=new yi;for(var i=0;i<e._defaultBeforeMiddleware.length;++i)this.pre(e._defaultBeforeMiddleware[i]);for(var o=0;o<e._defaultAfterMiddleware.length;++o)this.use(e._defaultAfterMiddleware[o])}var t=e.prototype;return t.add=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(r=t||e.callback||e.onComplete,n=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new xi(e,t,n),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1)/(a.length+2);o.children.push(this.resources[e]),o.progressChunk=l;for(var c=0;c<a.length;++c)a[c].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},t.pre=function(e){return this._beforeMiddleware.push(e),this},t.use=function(e){return this._afterMiddleware.push(e),this},t.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(e){var t,n=di(e,{strictMode:!0});if(t=n.protocol||!n.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=Ri.exec(t)[0];-1!==(t=t.substr(0,t.length-r.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=r}return t},t._loadResource=function(e,t){var n=this;e._dequeue=t,bi(this._beforeMiddleware,(function(t,r){t.call(n,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())}),!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),bi(this._afterMiddleware,(function(n,r){n.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},Si(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();Ni._defaultBeforeMiddleware=[],Ni._defaultAfterMiddleware=[],Ni.pre=function(e){return Ni._defaultBeforeMiddleware.push(e),Ni},Ni.use=function(e){return Ni._defaultAfterMiddleware.push(e),Ni};var Mi=xi,Li=function(e,t){return(Li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var ji=function(){function e(){}return e.use=function(e,t){e.data&&e.type===xi.TYPE.IMAGE&&(e.texture=En.fromLoader(e.data,e.url,e.name)),t()},e}(),Bi=function(e){function t(n,r){for(var i=e.call(this,n,r)||this,o=0;o<t._plugins.length;++o){var a=t._plugins[o],s=a.pre,l=a.use;s&&i.pre(s),l&&i.use(l)}return i._protected=!1,i}return function(e,t){function n(){this.constructor=e}Li(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(Ni);Bi.registerPlugin({use:Di.parsing}),Bi.registerPlugin(ji);var Fi=function(){function e(){}return e.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Bi.shared:new Bi},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),Gi=function(e,t){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Hi(e,t){function n(){this.constructor=e}Gi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ui,zi,Vi=function(e){function t(t,n,r,i){void 0===t&&(t=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=e.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=Z.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Hi(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Pe(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var t=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Nt),Xi=function(){function e(e,t,n){this.geometry=new Nn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var i=e[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||ne.FLOAT,offset:i.offset},t[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new kn(Fe(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(a=this.dynamicProperties[n]).offset=t,t+=a.size,this.dynamicStride+=a.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new kn(this.dynamicData,!1,!1);var i=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(a=this.staticProperties[n]).offset=i,i+=a.size,this.staticStride+=a.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new kn(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ne.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n){a=this.staticProperties[n];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ne.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===ne.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===ne.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Yi=function(e){function t(t){var n=e.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new vt,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ne.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Er.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=Sr.for2d(),n}return Hi(t,e),t.prototype.render=function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,o=t.length;if(0!==o){o>n&&!e.autoResize&&(o=n);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.state.blendMode=Me(e.blendMode,s.alphaMode),i.state.set(this.state);var l=i.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Le(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,s.alphaMode),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var u=!1,h=0,p=0;h<o;h+=r,p+=1){var f=o-h;f>r&&(f=r),p>=a.length&&a.push(this._generateOneMoreBuffer(e));var d=a[p];d.uploadDynamic(t,h,f);var m=e._bufferUpdateIDs[p]||0;(u=u||d._updateID<m)&&(d._updateID=e._updateID,d.uploadStatic(t,h,f)),i.geometry.bind(d.geometry),l.drawElements(l.TRIANGLES,6*f,l.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,o=0;o<n;o+=r)t.push(new Xi(this.properties,i,r));return t},t.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,n=e._properties;return new Xi(this.properties,n,t)},t.prototype.uploadVertices=function(e,t,n,r,i,o){for(var a=0,s=0,l=0,c=0,u=0;u<n;++u){var h=e[t+u],p=h._texture,f=h.scale.x,d=h.scale.y,m=p.trim,g=p.orig;m?(a=(s=m.x-h.anchor.x*g.width)+m.width,l=(c=m.y-h.anchor.y*g.height)+m.height):(a=g.width*(1-h.anchor.x),s=g.width*-h.anchor.x,l=g.height*(1-h.anchor.y),c=g.height*-h.anchor.y),r[o]=s*f,r[o+1]=c*d,r[o+i]=a*f,r[o+i+1]=c*d,r[o+2*i]=a*f,r[o+2*i+1]=l*d,r[o+3*i]=s*f,r[o+3*i+1]=l*d,o+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a],l=s._texture.baseTexture.alphaMode>0,c=s.alpha,u=c<1&&l?je(s._tintRGB,c):s._tintRGB+(255*c<<24);r[o]=u,r[o+i]=u,r[o+2*i]=u,r[o+3*i]=u,o+=4*i}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Hn);!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(Ui||(Ui={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(zi||(zi={}));var Wi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},qi=function(){function e(){this.color=16777215,this.alpha=1,this.texture=En.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=En.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),$i=function(e,t){return($i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ki(e,t){function n(){this.constructor=e}$i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Qi={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,o=t.indices;if(n.length>=6){for(var s=[],l=0;l<r.length;l++){var c=r[l];s.push(n.length/2),n=n.concat(c.points)}var u=(0,a.aU)(n,s,2);if(!u)return;var h=i.length/2;for(l=0;l<u.length;l+=3)o.push(u[l]+h),o.push(u[l+1]+h),o.push(u[l+2]+h);for(l=0;l<n.length;l++)i.push(n[l])}}},Zi={build:function(e){var t,n,r=e.shape,i=e.points,o=r.x,a=r.y;if(i.length=0,e.type===st.CIRC)t=r.radius,n=r.radius;else{var s=e.shape;t=s.width,n=s.height}if(0!==t&&0!==n){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(t+n));l/=2.3;for(var c=2*Math.PI/l,u=0;u<l-.5;u++)i.push(o+Math.sin(-c*u)*t,a+Math.cos(-c*u)*n);i.push(i[0],i[1])}},triangulate:function(e,t){var n=e.points,r=t.points,i=t.indices,o=r.length/2,a=o,s=e.shape,l=e.matrix,c=s.x,u=s.y;r.push(e.matrix?l.a*c+l.c*u+l.tx:c,e.matrix?l.b*c+l.d*u+l.ty:u);for(var h=0;h<n.length;h+=2)r.push(n[h],n[h+1]),i.push(o++,a,o)}},Ji={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,a=e.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(e,t){var n=e.points,r=t.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function eo(e,t,n){return e+(t-e)*n}function to(e,t,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0;d<=20;++d)l=eo(e,n,m=d/20),c=eo(t,r,m),u=eo(n,i,m),h=eo(r,o,m),p=eo(l,u,m),f=eo(c,h,m),s.push(p,f);return s}var no={build:function(e){var t=e.shape,n=e.points,r=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));n.length=0,s?(to(r,i+s,r,i,r+s,i,n),to(r+o-s,i,r+o,i,r+o,i+s,n),to(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),to(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)},triangulate:function(e,t){for(var n=e.points,r=t.points,i=t.indices,o=r.length/2,s=(0,a.aU)(n,null,2),l=0,c=s.length;l<c;l+=3)i.push(s[l]+o),i.push(s[l+1]+o),i.push(s[l+2]+o);for(l=0,c=n.length;l<c;l++)r.push(n[l],n[++l])}};function ro(e,t,n,r,i,o,a,s){var l,c;a?(l=r,c=-n):(l=-r,c=n);var u=e-n*i+l,h=t-r*i+c,p=e+n*o+l,f=t+r*o+c;return s.push(u,h),s.push(p,f),2}function io(e,t,n,r,i,o,a,s){var l=n-e,c=r-t,u=Math.atan2(l,c),h=Math.atan2(i-e,o-t);s&&u<h?u+=2*Math.PI:!s&&u>h&&(h+=2*Math.PI);var p=u,f=h-u,d=Math.abs(f),m=Math.sqrt(l*l+c*c),g=1+(15*d*Math.sqrt(m)/Math.PI|0),y=f/g;if(p+=y,s){a.push(e,t),a.push(n,r);for(var v=1,b=p;v<g;v++,b+=y)a.push(e,t),a.push(e+Math.sin(b)*m,t+Math.cos(b)*m);a.push(e,t),a.push(i,o)}else{a.push(n,r),a.push(e,t);for(v=1,b=p;v<g;v++,b+=y)a.push(e+Math.sin(b)*m,t+Math.cos(b)*m),a.push(e,t);a.push(i,o),a.push(e,t)}return 2*g}function oo(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,o=r.type!==st.POLY||r.closeStroke;if(0!==i.length){var a=t.points,s=t.indices,l=i.length/2,c=a.length/2,u=c;for(a.push(i[0],i[1]),n=1;n<l;n++)a.push(i[2*n],i[2*n+1]),s.push(u,u+1),u++;o&&s.push(u,c)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var o=e.lineStyle,a=new gt(r[0],r[1]),s=new gt(r[r.length-2],r[r.length-1]),l=n.type!==st.POLY||n.closeStroke,c=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var u=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(u,h),r.push(u,h)}var p=t.points,f=r.length/2,d=r.length,m=p.length/2,g=o.width/2,y=g*g,v=o.miterLimit*o.miterLimit,b=r[0],_=r[1],T=r[2],E=r[3],S=0,w=0,A=-(_-E),O=b-T,x=0,k=0,I=Math.sqrt(A*A+O*O);A/=I,O/=I,A*=g,O*=g;var C=o.alignment,P=2*(1-C),D=2*C;l||(o.cap===zi.ROUND?d+=io(b-A*(P-D)*.5,_-O*(P-D)*.5,b-A*P,_-O*P,b+A*D,_+O*D,p,!0)+2:o.cap===zi.SQUARE&&(d+=ro(b,_,A,O,P,D,!0,p))),p.push(b-A*P,_-O*P),p.push(b+A*D,_+O*D);for(var R=1;R<f-1;++R){b=r[2*(R-1)],_=r[2*(R-1)+1],T=r[2*R],E=r[2*R+1],S=r[2*(R+1)],w=r[2*(R+1)+1],A=-(_-E),O=b-T,A/=I=Math.sqrt(A*A+O*O),O/=I,A*=g,O*=g,x=-(E-w),k=T-S,x/=I=Math.sqrt(x*x+k*k),k/=I,x*=g,k*=g;var N=T-b,M=_-E,L=T-S,j=w-E,B=M*L-j*N,F=B<0;if(Math.abs(B)<.1)p.push(T-A*P,E-O*P),p.push(T+A*D,E+O*D);else{var G=(-A+b)*(-O+E)-(-A+T)*(-O+_),H=(-x+S)*(-k+E)-(-x+T)*(-k+w),U=(N*H-L*G)/B,z=(j*G-M*H)/B,V=(U-T)*(U-T)+(z-E)*(z-E),X=T+(U-T)*P,Y=E+(z-E)*P,W=T-(U-T)*D,q=E-(z-E)*D,$=F?P:D;V<=Math.min(N*N+M*M,L*L+j*j)+$*$*y?o.join===Ui.BEVEL||V/y>v?(F?(p.push(X,Y),p.push(T+A*D,E+O*D),p.push(X,Y),p.push(T+x*D,E+k*D)):(p.push(T-A*P,E-O*P),p.push(W,q),p.push(T-x*P,E-k*P),p.push(W,q)),d+=2):o.join===Ui.ROUND?F?(p.push(X,Y),p.push(T+A*D,E+O*D),d+=io(T,E,T+A*D,E+O*D,T+x*D,E+k*D,p,!0)+4,p.push(X,Y),p.push(T+x*D,E+k*D)):(p.push(T-A*P,E-O*P),p.push(W,q),d+=io(T,E,T-A*P,E-O*P,T-x*P,E-k*P,p,!1)+4,p.push(T-x*P,E-k*P),p.push(W,q)):(p.push(X,Y),p.push(W,q)):(p.push(T-A*P,E-O*P),p.push(T+A*D,E+O*D),o.join===Ui.BEVEL||V/y>v||(o.join===Ui.ROUND?d+=F?io(T,E,T+A*D,E+O*D,T+x*D,E+k*D,p,!0)+2:io(T,E,T-A*P,E-O*P,T-x*P,E-k*P,p,!1)+2:(F?(p.push(W,q),p.push(W,q)):(p.push(X,Y),p.push(X,Y)),d+=2)),p.push(T-x*P,E-k*P),p.push(T+x*D,E+k*D),d+=2)}}b=r[2*(f-2)],_=r[2*(f-2)+1],T=r[2*(f-1)],A=-(_-(E=r[2*(f-1)+1])),O=b-T,A/=I=Math.sqrt(A*A+O*O),O/=I,A*=g,O*=g,p.push(T-A*P,E-O*P),p.push(T+A*D,E+O*D),l||(o.cap===zi.ROUND?d+=io(T-A*(P-D)*.5,E-O*(P-D)*.5,T-A*P,E-O*P,T+A*D,E+O*D,p,!1)+2:o.cap===zi.SQUARE&&(d+=ro(T,E,A,O,P,D,!1,p)));var K=t.indices,Q=Wi.epsilon*Wi.epsilon;for(R=m;R<d+m-2;++R)b=p[2*R],_=p[2*R+1],T=p[2*(R+1)],E=p[2*(R+1)+1],S=p[2*(R+2)],w=p[2*(R+2)+1],!(Math.abs(b*(E-w)+T*(w-_)+S*(_-E))<Q)&&K.push(R,R+1,R+2)}}(e,t)}var ao,so=function(e){function t(t,n,r,i,o,a){void 0===a&&(a=0);o=o||i/2;for(var s=-1*Math.PI/2+a,l=2*r,c=lt/l,u=[],h=0;h<l;h++){var p=h%2?o:i,f=h*c+s;u.push(t+p*Math.cos(f),n+p*Math.sin(f))}return e.call(this,u)||this}return Ki(t,e),t}(dt),lo=function(){function e(){}return e.curveTo=function(e,t,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-t,l=a-e,c=r-t,u=n-e,h=Math.abs(s*u-l*c);if(h<1e-8||0===i)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;var p=s*s+l*l,f=c*c+u*u,d=s*c+l*u,m=i*Math.sqrt(p)/h,g=i*Math.sqrt(f)/h,y=m*d/p,v=g*d/f,b=m*u+g*l,_=m*c+g*s,T=l*(g+y),E=s*(g+y),S=u*(m+v),w=c*(m+v);return{cx:b+e,cy:_+t,radius:i,startAngle:Math.atan2(E-_,T-b),endAngle:Math.atan2(w-_,S-b),anticlockwise:l*c>u*s}},e.arc=function(e,t,n,r,i,o,a,s,l){for(var c=a-o,u=Wi._segmentsCount(Math.abs(c)*i,40*Math.ceil(Math.abs(c)/lt)),h=c/(2*u),p=2*h,f=Math.cos(h),d=Math.sin(h),m=u-1,g=m%1/m,y=0;y<=m;++y){var v=h+o+p*(y+g*y),b=Math.cos(v),_=-Math.sin(v);l.push((f*b+d*_)*i+n,(f*-_+d*b)*i+r)}},e}(),co=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o,a,s){for(var l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,g=0,y=0,v=0,b=e,_=t,T=1;T<=10;++T)y=b-(m=(d=(f=(p=1-(c=T/10))*p)*p)*e+3*f*c*n+3*p*(u=c*c)*i+(h=u*c)*a),v=_-(g=d*t+3*f*c*r+3*p*u*o+h*s),b=m,_=g,l+=Math.sqrt(y*y+v*v);return l},e.curveTo=function(t,n,r,i,o,a,s){var l=s[s.length-2],c=s[s.length-1];s.length-=2;var u=Wi._segmentsCount(e.curveLength(l,c,t,n,r,i,o,a)),h=0,p=0,f=0,d=0,m=0;s.push(l,c);for(var g=1,y=0;g<=u;++g)f=(p=(h=1-(y=g/u))*h)*h,m=(d=y*y)*y,s.push(f*l+3*p*y*t+3*h*d*r+m*o,f*c+3*p*y*n+3*h*d*i+m*a)},e}(),uo=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o){var a=e-2*n+i,s=t-2*r+o,l=2*n-2*e,c=2*r-2*t,u=4*(a*a+s*s),h=4*(a*l+s*c),p=l*l+c*c,f=2*Math.sqrt(u+h+p),d=Math.sqrt(u),m=2*u*d,g=2*Math.sqrt(p),y=h/d;return(m*f+d*h*(f-g)+(4*p*u-h*h)*Math.log((2*d+y+f)/(y+g)))/(4*m)},e.curveTo=function(t,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=Wi._segmentsCount(e.curveLength(a,s,t,n,r,i)),c=0,u=0,h=1;h<=l;++h){var p=h/l;c=a+(t-a)*p,u=s+(n-s)*p,o.push(c+(t+(r-t)*p-c)*p,u+(n+(i-n)*p-u)*p)}},e}(),ho=function(){function e(){this.reset()}return e.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},e.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),po=((ao={})[st.POLY]=Qi,ao[st.CIRC]=Zi,ao[st.ELIP]=Zi,ao[st.RECT]=Ji,ao[st.RREC]=no,ao),fo=[],mo=[],go={buildPoly:Qi,buildCircle:Zi,buildRectangle:Ji,buildRoundedRectangle:no,FILL_COMMANDS:po,BATCH_POOL:fo,DRAW_CALL_POOL:mo,buildLine:oo,Star:so,ArcUtils:lo,BezierUtils:co,QuadraticUtils:uo,BatchPart:ho},yo=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),vo=new gt,bo=new kt,_o=function(e){function t(){var t=e.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new kt,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Ki(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),mo.push(this.drawCalls[e]);this.drawCalls.length=0;for(e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),fo.push(t)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new yo(e,t,n,r);return this.graphicsData.push(i),this.dirty++,this},t.prototype.drawHole=function(e,t){if(void 0===t&&(t=null),!this.graphicsData.length)return null;var n=new yo(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,vo):vo.copyFrom(e),r.shape.contains(vo.x,vo.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(vo.x,vo.y)){i=!0;break}}if(!i)return!0}}return!1},t.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,l=a.lineStyle;po[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var c=0;c<2;c++){var u=0===c?s:l;if(u.visible){var h=u.texture.baseTexture,p=this.indices.length,f=this.points.length/2;h.wrapMode=ie.REPEAT,0===c?this.processFill(a):this.processLine(a);var d=this.points.length/2-f;0!==d&&(r&&!this._compareStyles(i,u)&&(r.end(p,f),r=null),r||((r=fo.pop()||new ho).begin(u,p,f),this.batches.push(r),i=u),this.addUvs(this.points,t,u.texture,f,d,u.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(r&&r.end(m,g),0===this.batches.length)return void(this.batchable=!0);if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var y=g>65535&&e;this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},t.prototype._compareStyles=function(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<2*t.BATCHABLE_SIZE},t.prototype.buildDrawCalls=function(){for(var e=++on._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),mo.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=mo.pop();i||((i=new Jr).texArray=new ei),i.texArray.count=0,i.start=0,i.size=0,i.type=J.TRIANGLES;var o=0,a=null,s=0,l=!1,c=J.TRIANGLES,u=0;this.drawCalls.push(i);for(t=0;t<this.batches.length;t++){var h=this.batches[t],p=h.style,f=p.texture.baseTexture;l!==!!p.native&&(c=(l=!!p.native)?J.LINES:J.TRIANGLES,a=null,o=8,e++),a!==f&&(a=f,f._batchEnabled!==e&&(8===o&&(e++,o=0,i.size>0&&((i=mo.pop())||((i=new Jr).texArray=new ei),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),f.touched=1,f._batchEnabled=e,f._batchLocation=o,f.wrapMode=10497,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,u+=h.size,s=f._batchLocation,this.addColors(n,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,s,h.attribSize,h.attribStart)}on._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,l=0;l<e.length/2;l++)o[s++]=e[2*l],o[s++]=e[2*l+1],o[s++]=t[2*l],o[s++]=t[2*l+1],a[s++]=n[l],o[s++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){e.holes.length?(this.processHoles(e.holes),Qi.triangulate(e,this)):po[e.type].triangulate(e,this)},t.prototype.processLine=function(e){oo(e,this);for(var t=0;t<e.holes.length;t++)oo(e.holes[t],this)},t.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var n=e[t];po[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,t=bo,n=vt.IDENTITY;this._bounds.clear(),t.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,a=i.type,s=i.lineStyle,l=i.matrix||vt.IDENTITY,c=0;if(s&&s.visible){var u=s.alignment;c=s.width,a===st.POLY?c*=.5+Math.abs(.5-u):c*=Math.max(0,u)}if(n!==l&&(t.isEmpty()||(e.addBoundsMatrix(t,n),t.clear()),n=l),a===st.RECT||a===st.RREC){var h=o;t.addFramePad(h.x,h.y,h.x+h.width,h.y+h.height,c,c)}else if(a===st.CIRC){var p=o;t.addFramePad(p.x,p.y,p.x,p.y,p.radius+c,p.radius+c)}else if(a===st.ELIP){var f=o;t.addFramePad(f.x,f.y,f.x,f.y,f.width+c,f.height+c)}else{var d=o;e.addVerticesMatrix(n,d.points,0,d.points.length,c,c)}}t.isEmpty()||e.addBoundsMatrix(t,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}},t.prototype.addColors=function(e,t,n,r,i){void 0===i&&(i=0);var o=je((t>>16)+(65280&t)+((255&t)<<16),n);e.length=Math.max(e.length,i+r);for(var a=0;a<r;a++)e[i+a]=o},t.prototype.addTextureIds=function(e,t,n,r){void 0===r&&(r=0),e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t},t.prototype.addUvs=function(e,t,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=t.length,l=n.frame;a<i;){var c=e[2*(r+a)],u=e[2*(r+a)+1];if(o){var h=o.a*c+o.c*u+o.tx;u=o.b*c+o.d*u+o.ty,c=h}a++,t.push(c/l.width,u/l.height)}var p=n.baseTexture;(l.width<p.width||l.height<p.height)&&this.adjustUvs(t,n,s,i)},t.prototype.adjustUvs=function(e,t,n,r){for(var i=t.baseTexture,o=1e-6,a=n+2*r,s=t.frame,l=s.width/i.width,c=s.height/i.height,u=s.x/s.width,h=s.y/s.height,p=Math.floor(e[n]+o),f=Math.floor(e[n+1]+o),d=n+2;d<a;d+=2)p=Math.min(p,Math.floor(e[d]+o)),f=Math.min(f,Math.floor(e[d+1]+o));u-=p,h-=f;for(d=n;d<a;d+=2)e[d]=(e[d]+u)*l,e[d+1]=(e[d+1]+h)*c},t.BATCHABLE_SIZE=100,t}(ii),To=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=zi.BUTT,t.join=Ui.MITER,t.miterLimit=10,t}return Ki(t,e),t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(qi),Eo=new Float32Array(3),So={},wo=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n._geometry=t||new _o,n._geometry.refCount++,n.shader=null,n.state=Sr.for2d(),n._fillStyle=new qi,n._lineStyle=new To,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=Z.NORMAL,n}return Ki(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(void 0===e&&(e=null),"number"==typeof e){var t=arguments;e={width:t[0]||0,color:t[1]||0,alpha:void 0!==t[2]?t[2]:1,alignment:void 0!==t[3]?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if("number"==typeof e){Ke("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var t=arguments;e={width:t[0],texture:t[1],color:t[2],alpha:t[3],matrix:t[4],alignment:t[5],native:t[6]},Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]}))}e=Object.assign({width:0,texture:En.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:zi.BUTT,join:Ui.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new dt,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new dt,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},t.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==e||i!==t)&&n.push(e,t),this},t.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},t.prototype.quadraticCurveTo=function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),uo.curveTo(e,t,n,r,i),this},t.prototype.bezierCurveTo=function(e,t,n,r,i,o){return this._initCurve(),co.curveTo(e,t,n,r,i,o,this.currentPath.points),this},t.prototype.arcTo=function(e,t,n,r,i){this._initCurve(e,t);var o=this.currentPath.points,a=lo.curveTo(e,t,n,r,i,o);if(a){var s=a.cx,l=a.cy,c=a.radius,u=a.startAngle,h=a.endAngle,p=a.anticlockwise;this.arc(s,l,c,u,h,p)}return this},t.prototype.arc=function(e,t,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=lt:o&&r<=i&&(r+=lt),0===i-r)return this;var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n,l=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var u=Math.abs(c[c.length-2]-a),h=Math.abs(c[c.length-1]-s);u<l&&h<l||c.push(a,s)}else this.moveTo(a,s),c=this.currentPath.points;return lo.arc(a,s,e,t,n,r,i,o,c),this},t.prototype.beginFill=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),this.beginTextureFill({texture:En.WHITE,color:e,alpha:t})},t.prototype.beginTextureFill=function(e){if(e instanceof En){Ke("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var t=arguments;e={texture:t[0],color:t[1],alpha:t[2],matrix:t[3]},Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]}))}e=Object.assign({texture:En.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new ht(e,t,n,r))},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new mt(e,t,n,r,i))},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new pt(e,t,n))},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new ft(e,t,n,r))},t.prototype.drawPolygon=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r,i=!0,o=t[0];o.points?(i=o.closeStroke,r=o.points):r=Array.isArray(t[0])?t[0]:t;var a=new dt(r);return a.closeStroke=i,this.drawShape(a),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,t,n,r,i,o){return void 0===o&&(o=0),this.drawPolygon(new so(e,t,n,r,i,o))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===st.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var t=this._geometry,n=e.context.supports.uint32Indices;t.updateBatches(n),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:a,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Pe(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}},t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.tint,i=this.worldAlpha,o=t.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var s=0,l=a.length;s<l;s++)this._renderDrawCallDirect(e,n.drawCalls[s])},t.prototype._renderDrawCallDirect=function(e,t){for(var n=t.texArray,r=t.type,i=t.size,o=t.start,a=n.count,s=0;s<a;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,o)},t.prototype._resolveDirectShader=function(e){var t=this.shader,n=this.pluginName;if(!t){if(!So[n]){for(var r=e.plugins.batch.MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new vt,default:Bn.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;So[n]=new Er(s,a)}t=So[n]}return t},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Pe(this.tint,Eo),t=0;t<this.batches.length;t++){var n=this.batches[t],r=n._batchRGB,i=(e[0]*r[0]*255<<16)+(e[1]*r[1]*255<<8)+(0|e[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this._geometry.points,c=this.vertexData,u=0,h=0;h<l.length;h+=2){var p=l[h],f=l[h+1];c[u++]=n*p+i*f+a,c[u++]=o*f+r*p+s}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},t._TEMP_POINT=new gt,t}(Nt),Ao=function(e,t){return(Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Oo,xo=new gt,ko=new Uint16Array([0,1,2,0,2,3]),Io=function(e){function t(t){var n=e.call(this)||this;return n._anchor=new yt(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=Z.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||En.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=ko,n.pluginName="batch",n.isSprite=!0,n._roundPixels=M.ROUND_PIXELS,n}return function(e,t){function n(){this.constructor=e}Ao(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ye(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ye(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this.vertexData,c=e.trim,u=e.orig,h=this._anchor,p=0,f=0,d=0,m=0;if(c?(p=(f=c.x-h._x*u.width)+c.width,d=(m=c.y-h._y*u.height)+c.height):(p=(f=-h._x*u.width)+u.width,d=(m=-h._y*u.height)+u.height),l[0]=n*f+i*m+a,l[1]=o*m+r*f+s,l[2]=n*p+i*m+a,l[3]=o*m+r*p+s,l[4]=n*p+i*d+a,l[5]=o*d+r*p+s,l[6]=n*f+i*d+a,l[7]=o*d+r*f+s,this._roundPixels)for(var g=M.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*g|0)/g)}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,c=i.tx,u=i.ty,h=-r._x*n.width,p=h+n.width,f=-r._y*n.height,d=f+n.height;t[0]=o*h+s*f+c,t[1]=l*f+a*h+u,t[2]=o*p+s*f+c,t[3]=l*f+a*p+u,t[4]=o*p+s*d+c,t[5]=l*d+a*p+u,t[6]=o*h+s*d+c,t[7]=l*d+a*h+u},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ht),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,xo);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return xo.x>=r&&xo.x<r+t&&(i=-n*this.anchor.y,xo.y>=i&&xo.y<i+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,n){return new t(e instanceof En?e:En.from(e,n))},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=Ye(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=Ye(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||En.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Nt),Co=function(e,t){return(Co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};!function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Oo||(Oo={}));var Po={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Oo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Do=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ro=function(){function e(e){this.styleID=0,this.reset(),Lo(this,e,e)}return e.prototype.clone=function(){var t={};return Lo(t,this,Po),new e(t)},e.prototype.reset=function(){Lo(this,Po,Po)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=Mo(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=Mo(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=Mo(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Do.indexOf(r)<0&&(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},e}();function No(e){return"number"==typeof e?De(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function Mo(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=No(e[t]);return e}return No(e)}function Lo(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}var jo=function(){function e(e,t,n,r,i,o,a,s,l){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=l}return e.measureText=function(t,n,r,i){void 0===i&&(i=e._canvas),r=r??n.wordWrap;var o=n.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),c=new Array(l.length),u=0,h=0;h<l.length;h++){var p=s.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;c[h]=p,u=Math.max(u,p)}var f=u+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var d=n.lineHeight||a.fontSize+n.strokeThickness,m=Math.max(d,a.fontSize+n.strokeThickness)+(l.length-1)*(d+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new e(t,n,f,m,l,c,d+n.leading,u,a)},e.wordWrap=function(t,n,r){void 0===r&&(r=e._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",l=Object.create(null),c=n.letterSpacing,u=n.whiteSpace,h=e.collapseSpaces(u),p=e.collapseNewlines(u),f=!h,d=n.wordWrapWidth+c,m=e.tokenize(t),g=0;g<m.length;g++){var y=m[g];if(e.isNewline(y)){if(!p){s+=e.addLine(a),f=!h,a="",o=0;continue}y=" "}if(h){var v=e.isBreakingSpace(y),b=e.isBreakingSpace(a[a.length-1]);if(v&&b)continue}var _=e.getFromCache(y,c,l,i);if(_>d)if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(y,n.breakWords))for(var T=e.wordWrapSplit(y),E=0;E<T.length;E++){for(var S=T[E],w=1;T[E+w];){var A=T[E+w],O=S[S.length-1];if(e.canBreakChars(O,A,y,E,n.breakWords))break;S+=A,w++}E+=S.length-1;var x=e.getFromCache(S,c,l,i);x+o>d&&(s+=e.addLine(a),f=!1,a="",o=0),a+=S,o+=x}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var k=g===m.length-1;s+=e.addLine(y,!k),f=!1,a="",o=0}else _+o>d&&(f=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(y)||f)&&(a+=y,o+=_)}return s+=e.addLine(a,!1)},e.addLine=function(t,n){return void 0===n&&(n=!0),t=e.trimRight(t),t=n?t+"\n":t},e.getFromCache=function(e,t,n,r){var i=n[e];if("number"!=typeof i){var o=e.length*t;i=r.measureText(e).width+o,n[e]=i}return i},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],r="";if("string"!=typeof t)return n;for(var i=0;i<t.length;i++){var o=t[i];e.isBreakingSpace(o)||e.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,n,r,i){return!0},e.wordWrapSplit=function(e){return e.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=2*s;s=s*e.BASELINE_MULTIPLIER|0,r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a,l).data,u=c.length,h=4*a,p=0,f=0,d=!1;for(p=0;p<s;++p){for(var m=0;m<h;m+=4)if(255!==c[f+m]){d=!0;break}if(d)break;f+=h}for(n.ascent=s-p,f=u-h,d=!1,p=l;p>s;--p){for(m=0;m<h;m+=4)if(255!==c[f+m]){d=!0;break}if(d)break;f-=h}return n.descent=p-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){void 0===t&&(t=""),t?delete e._fonts[t]:e._fonts={}},e}(),Bo=function(){try{var e=new OffscreenCanvas(0,0),t=e.getContext("2d");return t&&t.measureText?e:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Bo.width=Bo.height=10,jo._canvas=Bo,jo._context=Bo.getContext("2d"),jo._fonts={},jo.METRICS_STRING="|\xc9q\xc5",jo.BASELINE_SYMBOL="M",jo.BASELINE_MULTIPLIER=1.4,jo._newlines=[10,13],jo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Fo={texture:!0,children:!1,baseTexture:!0},Go=function(e){function t(t,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=En.from(r);return a.orig=new ht,a.trim=new ht,(i=e.call(this,a)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=M.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=n,i.localStyleID=-1,i}return function(e,t){function n(){this.constructor=e}Co(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n=this.context,r=jo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,a=r.lines,s=r.lineHeight,l=r.lineWidths,c=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;for(var h,p,f=t.dropShadow?2:1,d=0;d<f;++d){var m=t.dropShadow&&0===d,g=m?Math.ceil(Math.max(1,o)+2*t.padding):0,y=g*this._resolution;if(m){n.fillStyle="black",n.strokeStyle="black";var v=t.dropShadowColor,b=Pe("number"==typeof v?v:Re(v)),_=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;n.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+t.dropShadowAlpha+")",n.shadowBlur=_,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+y}else n.fillStyle=this._generateFillStyle(t,a,r),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var E=0;E<a.length;E++)h=t.strokeThickness/2,p=t.strokeThickness/2+E*s+u.ascent,"right"===t.align?h+=c-l[E]:"center"===t.align&&(h+=(c-l[E])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[E],h+t.padding,p+t.padding-g,!0),t.fill&&this.drawLetterSpacing(a[E],h+t.padding,p+t.padding-g)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,n,r){void 0===r&&(r=!1);var i=this._style.letterSpacing;if(0!==i)for(var o=t,a=Array.from?Array.from(e):e.split(""),s=this.context.measureText(e).width,l=0,c=0;c<a.length;++c){var u=a[c];r?this.context.strokeText(u,o,n):this.context.fillText(u,o,n),o+=s-(l=this.context.measureText(e.substring(c+1)).width)+i,s=l}else r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=tt(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(e.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(e.height/this._resolution),n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,t,n){var r=e.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var i,o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-o-2*a,l=Math.ceil(this.canvas.height/this._resolution)-o-2*a,c=r.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var h=c.length+1,p=1;p<h;++p)u.push(p/h);if(c.unshift(r[0]),u.unshift(0),c.push(r[r.length-1]),u.push(1),e.fillGradientType===Oo.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,a,s/2,l+a);var f=0,d=(n.fontProperties.fontSize+e.strokeThickness)/l;for(p=0;p<t.length;p++)for(var m=n.lineHeight*p,g=0;g<c.length;g++){var y=m/l+("number"==typeof u[g]?u[g]:g/c.length)*d,v=Math.max(f,y);v=Math.min(v,1),i.addColorStop(v,c[g]),f=v}}else{i=this.context.createLinearGradient(a,l/2,s+a,l/2);var b=c.length+1,_=1;for(p=0;p<c.length;p++){var T=void 0;T="number"==typeof u[p]?u[p]:_/b,i.addColorStop(T,c[p]),_++}}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Fo,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=Ye(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=Ye(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof Ro?e:new Ro(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(Io);M.UPLOADS_PER_FRAME=4;var Ho=function(e,t){return(Ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Uo=function(){function e(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function zo(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof En){var i=e._textures[r].baseTexture;-1===t.indexOf(i)&&(t.push(i),n=!0)}return n}function Vo(e,t){if(e.baseTexture instanceof on){var n=e.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Xo(e,t){if(e._texture&&e._texture instanceof En){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Yo(e,t){return t instanceof Go&&(t.updateText(!0),!0)}function Wo(e,t){if(t instanceof Ro){var n=t.toFontString();return jo.measureFont(n),!0}return!1}function qo(e,t){if(e instanceof Go){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function $o(e,t){return e instanceof Ro&&(-1===t.indexOf(e)&&t.push(e),!0)}var Ko=function(){function e(e){var t=this;this.limiter=new Uo(M.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(qo),this.registerFindHook($o),this.registerFindHook(zo),this.registerFindHook(Vo),this.registerFindHook(Xo),this.registerUploadHook(Yo),this.registerUploadHook(Wo)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Gt.system.addOnce(this.tick,this,Lt.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Gt.system.addOnce(this.tick,this,Lt.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(n=0,r=i.length;n<r;n++)i[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Nt)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},e.prototype.destroy=function(){this.ticking&&Gt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Qo(e,t){return t instanceof on&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Zo(e,t){if(!(t instanceof wo))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&Qo(e,o.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Jo(e,t){return e instanceof wo&&(t.push(e),!0)}var ea=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Jo),n.registerUploadHook(Qo),n.registerUploadHook(Zo),n}return function(e,t){function n(){this.constructor=e}Ho(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Ko),ta=function(){function e(e){this.maxMilliseconds=e,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}(),na=function(){function e(e,t,n){void 0===n&&(n=null),this._texture=e instanceof En?e:null,this.baseTexture=e instanceof on?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,n=ot(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,c=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,u=new ht(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s=o.rotated?new ht(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new ht(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new ht(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new En(this.baseTexture,s,u,l,o.rotated?2:0,o.anchor),En.addToCache(this.textures[i],i)}n++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},e.prototype.destroy=function(e){var t;for(var n in void 0===e&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),ra=function(){function e(){}return e.use=function(t,n){var r=this,i=t.name+"_image";if(t.data&&t.type===Mi.TYPE.JSON&&t.data.frames&&!r.resources[i]){var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=e.getResourcePath(t,r.baseUrl);r.add(i,a,o,(function(e){if(e.error)n(e.error);else{var r=new na(e.texture,t.data,t.url);r.parse((function(){t.spritesheet=r,t.textures=r.textures,n()}))}}))}else n()},e.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:F.resolve(e.url.replace(t,""),e.data.meta.image)},e}(),ia=function(e,t){return(ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function oa(e,t){function n(){this.constructor=e}ia(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var aa=new gt,sa=function(e){function t(t,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=e.call(this,t)||this;return i.tileTransform=new xt,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new Or(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return oa(t,e),Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ht),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,aa);var t=this._width,n=this._height,r=-t*this.anchor._x;if(aa.x>=r&&aa.x<r+t){var i=-n*this.anchor._y;if(aa.y>=i&&aa.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,n){return"number"==typeof n&&(Ke("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new t(En.from(e,n),n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(Io),la="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",ca=new vt,ua=function(e){function t(t){var n=e.call(this,t)||this,r={globals:n.renderer.globalUniforms};return n.shader=Er.from(la,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.simpleShader=Er.from(la,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.quad=new Ln,n.state=Sr.for2d(),n}return oa(t,e),t.prototype.render=function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((r=n.uvs)[0]=r[6]=-e.anchor.x,r[1]=r[3]=-e.anchor.y,r[2]=r[4]=1-e.anchor.x,r[5]=r[7]=1-e.anchor.y),n.invalidate();var i=e._texture,o=i.baseTexture,a=e.tileTransform.localTransform,s=e.uvMatrix,l=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;l&&(o._glTextures[t.CONTEXT_UID]?l=o.wrapMode!==ie.CLAMP:o.wrapMode===ie.CLAMP&&(o.wrapMode=ie.REPEAT));var c=l?this.simpleShader:this.shader,u=i.width,h=i.height,p=e._width,f=e._height;ca.set(a.a*u/p,a.b*u/f,a.c*h/p,a.d*h/f,a.tx/p,a.ty/f),ca.invert(),l?ca.prepend(s.mapCoord):(c.uniforms.uMapCoord=s.mapCoord.toArray(!0),c.uniforms.uClampFrame=s.uClampFrame,c.uniforms.uClampOffset=s.uClampOffset),c.uniforms.uTransform=ca.toArray(!0),c.uniforms.uColor=Be(e.tint,e.worldAlpha,c.uniforms.uColor,o.alphaMode),c.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),c.uniforms.uSampler=i,t.shader.bind(c),t.geometry.bind(n),this.state.blendMode=Me(e.blendMode,o.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Hn),ha=function(e,t){return(ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function pa(e,t){function n(){this.constructor=e}ha(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var fa=function(){function e(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),da=new gt,ma=new dt,ga=function(e){function t(t,n,r,i){void 0===i&&(i=J.TRIANGLES);var o=e.call(this)||this;return o.geometry=t,t.refCount++,o.shader=n,o.state=r||Sr.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o._roundPixels=M.ROUND_PIXELS,o.batchUvs=null,o}return pa(t,e),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===J.TRIANGLES&&n.length<2*t.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.program.uniformData.translationMatrix&&(t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var t=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,t=e.buffers[0].data;if(e.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var n=this.transform.worldTransform,r=n.a,i=n.b,o=n.c,a=n.d,s=n.tx,l=n.ty,c=this.vertexData,u=0;u<c.length/2;u++){var h=t[2*u],p=t[2*u+1];c[2*u]=r*h+o*p+s,c[2*u+1]=i*h+a*p+l}if(this._roundPixels){var f=M.RESOLUTION;for(u=0;u<c.length;++u)c[u]=Math.round((c[u]*f|0)/f)}this.vertexDirty=e.vertexDirtyId}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new fa(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,da);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=ma.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],l=2*r[a+1],c=2*r[a+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[c],n[5]=t[c+1],ma.contains(da.x,da.y))return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Nt),ya=function(e){function t(t,n){var r=this,i={uSampler:t,alpha:1,uTextureMatrix:vt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=e.call(this,n.program||Tr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Or(t),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return pa(t,e),Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;Be(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(Er),va=function(e){function t(t,n,r){var i=e.call(this)||this,o=new kn(t),a=new kn(n,!0),s=new kn(r,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,ne.FLOAT).addAttribute("aTextureCoord",a,2,!1,ne.FLOAT).addIndex(s),i._updateId=-1,i}return pa(t,e),Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Nn),ba=function(e,t){return(ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var _a=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Ta=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],o=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var l=o[s].split("="),c=l[0],u=l[1].replace(/"/gm,""),h=parseFloat(u),p=isNaN(h)?u:h;a[c]=p}n[i].push(a)}var f=new _a;return n.info.forEach((function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})})),n.common.forEach((function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})})),n.page.forEach((function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})})),n.char.forEach((function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),n.kerning.forEach((function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),f},e}(),Ea=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new _a,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),s=0;s<n.length;s++)t.info.push({face:n[s].getAttribute("face"),size:parseInt(n[s].getAttribute("size"),10)});for(s=0;s<r.length;s++)t.common.push({lineHeight:parseInt(r[s].getAttribute("lineHeight"),10)});for(s=0;s<i.length;s++)t.page.push({id:parseInt(i[s].getAttribute("id"),10)||0,file:i[s].getAttribute("file")});for(s=0;s<o.length;s++){var l=o[s];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(s=0;s<a.length;s++)t.kerning.push({first:parseInt(a[s].getAttribute("first"),10),second:parseInt(a[s].getAttribute("second"),10),amount:parseInt(a[s].getAttribute("amount"),10)});return t},e}(),Sa=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return Ea.test(t)}return!1},e.parse=function(e){var t=(new window.DOMParser).parseFromString(e,"text/xml");return Ea.parse(t)},e}(),wa=[Ta,Ea,Sa];function Aa(e){for(var t=0;t<wa.length;t++)if(wa[t].test(e))return wa[t];return null}function Oa(e,t,n,r,i,o,a){var s=n.text,l=n.fontProperties;t.translate(r,i),t.scale(o,o);var c=a.strokeThickness/2,u=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=function(e,t,n,r,i,o){var a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s,l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=Math.ceil(e.width/r)-l-2*c,h=Math.ceil(e.height/r)-l-2*c,p=a.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var d=p.length+1,m=1;m<d;++m)f.push(m/d);if(p.unshift(a[0]),f.unshift(0),p.push(a[a.length-1]),f.push(1),n.fillGradientType===Oo.LINEAR_VERTICAL){s=t.createLinearGradient(u/2,c,u/2,h+c);var g=0,y=(o.fontProperties.fontSize+n.strokeThickness)/h;for(m=0;m<i.length;m++)for(var v=o.lineHeight*m,b=0;b<p.length;b++){var _=v/h+("number"==typeof f[b]?f[b]:b/p.length)*y,T=Math.max(g,_);T=Math.min(T,1),s.addColorStop(T,p[b]),g=T}}else{s=t.createLinearGradient(c,h/2,u+c,h/2);var E=p.length+1,S=1;for(m=0;m<p.length;m++){var w=void 0;w="number"==typeof f[m]?f[m]:S/E,s.addColorStop(w,p[m]),S++}}return s}(e,t,a,o,[s],n),t.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,p=Pe("number"==typeof h?h:Re(h)),f=a.dropShadowBlur*o,d=a.dropShadowDistance*o;t.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+a.dropShadowAlpha+")",t.shadowBlur=f,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,c,u+n.lineHeight-l.descent),a.fill&&t.fillText(s,c,u+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}var xa=function(){function e(e,t,n){var r=e.info[0],i=e.common[0],o=ot(e.page[0].file),a={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/o,this.chars={},this.pageTextures=a;for(var s=0;s<e.page.length;s++){var l=e.page[s],c=l.id,u=l.file;a[c]=t instanceof Array?t[s]:t[u]}for(s=0;s<e.char.length;s++){var h=e.char[s],p=(c=h.id,h.page),f=e.char[s],d=f.x,m=f.y,g=f.width,y=f.height,v=f.xoffset,b=f.yoffset,_=f.xadvance;m/=o,g/=o,y/=o,v/=o,b/=o,_/=o;var T=new ht((d/=o)+a[p].frame.x/o,m+a[p].frame.y/o,g,y);this.chars[c]={xOffset:v,yOffset:b,xAdvance:_,kerning:{},texture:new En(a[p].baseTexture,T),page:p}}for(s=0;s<e.kerning.length;s++){var E=e.kerning[s],S=E.first,w=E.second,A=E.amount;S/=o,w/=o,A/=o,this.chars[w]&&(this.chars[w].kerning[S]=A)}}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(t,n,r){var i;if(t instanceof _a)i=t;else{var o=Aa(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}n instanceof En&&(n=[n]);var a=new e(i,n,r);return e.available[a.font]=a,a},e.uninstall=function(t){var n=e.available[t];if(!n)throw new Error("No font found named '"+t+"'");n.destroy(),delete e.available[t]},e.from=function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,c=i.textureHeight,u=function(e){"string"==typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,i.split(""))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(o),h=n instanceof Ro?n:new Ro(n),p=l,f=new _a;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};for(var d,m,g,y=0,v=0,b=0,_=[],T=0;T<u.length;T++){d||((d=document.createElement("canvas")).width=l,d.height=c,m=d.getContext("2d"),g=new on(d,{resolution:s}),_.push(new En(g)),f.page.push({id:_.length-1,file:""}));var E=jo.measureText(u[T],h,!1,d),S=E.width,w=Math.ceil(E.height),A=Math.ceil(("italic"===h.fontStyle?2:1)*S);if(v>=c-w*s){if(0===v)throw new Error("[BitmapFont] textureHeight "+c+"px is too small for "+h.fontSize+"px fonts");--T,d=null,m=null,g=null,v=0,y=0,b=0}else if(b=Math.max(w+E.fontProperties.descent,b),A*s+y>=p)--T,v+=b*s,v=Math.ceil(v),y=0,b=0;else{Oa(d,m,E,y,v,s,h);var O=E.text.charCodeAt(0);f.char.push({id:O,page:_.length-1,x:y/s,y:v/s,width:A,height:w,xoffset:0,yoffset:0,xadvance:Math.ceil(S-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),y+=(A+2*a)*s,y=Math.ceil(y)}}var x=new e(f,_,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=x,x},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),ka=[],Ia=[],Ca=function(e){function t(n,r){void 0===r&&(r={});var i=e.call(this)||this;i._tint=16777215,r.font&&(Ke("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(r));var o=Object.assign({},t.styleDefaults,r),a=o.align,s=o.tint,l=o.maxWidth,c=o.letterSpacing,u=o.fontName,h=o.fontSize;if(!xa.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=u,i._fontSize=h||xa.available[u].size,i._text=n,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=c,i._anchor=new yt((function(){i.dirty=!0}),i,0,0),i._roundPixels=M.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}return function(e,t){function n(){this.constructor=e}ba(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(){for(var e,t=xa.available[this._fontName],n=this._fontSize/t.size,r=new gt,i=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",s=a.length,l=this._maxWidth*t.size/this._fontSize,c=null,u=0,h=0,p=0,f=-1,d=0,m=0,g=0,y=0;y<s;y++){var v=a.charCodeAt(y),b=a.charAt(y);if(/(?:\s)/.test(b)&&(f=y,d=u),"\r"!==b&&"\n"!==b){var _=t.chars[v];if(_){c&&_.kerning[c]&&(r.x+=_.kerning[c]);var T=Ia.pop()||{texture:En.EMPTY,line:0,charCode:0,position:new gt};T.texture=_.texture,T.line=p,T.charCode=v,T.position.x=r.x+_.xOffset+this._letterSpacing/2,T.position.y=r.y+_.yOffset,i.push(T),r.x+=_.xAdvance+this._letterSpacing,u=r.x,g=Math.max(g,_.yOffset+_.texture.height),c=v,-1!==f&&l>0&&r.x>l&&(Xe(i,1+f-++m,1+y-f),y=f,f=-1,o.push(d),h=Math.max(h,d),p++,r.x=0,r.y+=t.lineHeight,c=null)}}else o.push(u),h=Math.max(h,u),++p,++m,r.x=0,r.y+=t.lineHeight,c=null}var E=a.charAt(a.length-1);"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(u=d),o.push(u),h=Math.max(h,u));var S=[];for(y=0;y<=p;y++){var w=0;"right"===this._align?w=h-o[y]:"center"===this._align&&(w=(h-o[y])/2),S.push(w)}var A=i.length,O={},x=[],k=this._activePagesMeshData;for(y=0;y<k.length;y++)ka.push(k[y]);for(y=0;y<A;y++){var I=(B=i[y].texture).baseTexture.uid;if(!O[I]){if(!(X=ka.pop())){var C=new va,P=new ya(En.EMPTY);X={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new ga(C,P),vertices:null,uvs:null,indices:null}}X.index=0,X.indexCount=0,X.vertexCount=0,X.uvsCount=0,X.total=0;var D=this._textureCache;D[I]=D[I]||new En(B.baseTexture),X.mesh.texture=D[I],X.mesh.tint=this._tint,x.push(X),O[I]=X}O[I].total++}for(y=0;y<k.length;y++)-1===x.indexOf(k[y])&&this.removeChild(k[y].mesh);for(y=0;y<x.length;y++)x[y].mesh.parent!==this&&this.addChild(x[y].mesh);for(var y in this._activePagesMeshData=x,O){var R=(X=O[y]).total;if(!((null===(e=X.indices)||void 0===e?void 0:e.length)>6*R)||X.vertices.length<2*ga.BATCHABLE_SIZE)X.vertices=new Float32Array(8*R),X.uvs=new Float32Array(8*R),X.indices=new Uint16Array(6*R);else for(var N=X.total,M=X.vertices,L=4*N*2;L<M.length;L++)M[L]=0;X.mesh.size=6*R}for(y=0;y<A;y++){var j=(b=i[y]).position.x+S[b.line];this._roundPixels&&(j=Math.round(j));var B,F=j*n,G=b.position.y*n,H=O[(B=b.texture).baseTexture.uid],U=B.frame,z=B._uvs,V=H.index++;H.indices[6*V+0]=0+4*V,H.indices[6*V+1]=1+4*V,H.indices[6*V+2]=2+4*V,H.indices[6*V+3]=0+4*V,H.indices[6*V+4]=2+4*V,H.indices[6*V+5]=3+4*V,H.vertices[8*V+0]=F,H.vertices[8*V+1]=G,H.vertices[8*V+2]=F+U.width*n,H.vertices[8*V+3]=G,H.vertices[8*V+4]=F+U.width*n,H.vertices[8*V+5]=G+U.height*n,H.vertices[8*V+6]=F,H.vertices[8*V+7]=G+U.height*n,H.uvs[8*V+0]=z.x0,H.uvs[8*V+1]=z.y0,H.uvs[8*V+2]=z.x1,H.uvs[8*V+3]=z.y1,H.uvs[8*V+4]=z.x2,H.uvs[8*V+5]=z.y2,H.uvs[8*V+6]=z.x3,H.uvs[8*V+7]=z.y3}for(var y in this._textWidth=h*n,this._textHeight=(r.y+t.lineHeight)*n,O){var X=O[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var Y=0,W=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,$=0;$<X.total;$++)X.vertices[Y++]-=W,X.vertices[Y++]-=q,X.vertices[Y++]-=W,X.vertices[Y++]-=q,X.vertices[Y++]-=W,X.vertices[Y++]-=q,X.vertices[Y++]-=W,X.vertices[Y++]-=q;this._maxLineHeight=g*n;var K=X.mesh.geometry.getBuffer("aVertexPosition"),Q=X.mesh.geometry.getBuffer("aTextureCoord"),Z=X.mesh.geometry.getIndex();K.data=X.vertices,Q.data=X.uvs,Z.data=X.indices,K.update(),Q.update(),Z.update()}for(y=0;y<i.length;y++)Ia.push(i[y])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!xa.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(e){if("string"==typeof e.font){var t=e.font.split(" ");e.fontName=1===t.length?t[0]:t.slice(1).join(" "),t.length>=2&&(e.fontSize=parseInt(t[0],10))}else e.fontName=e.font.name,e.fontSize="number"==typeof e.font.size?e.font.size:parseInt(e.font.size,10)},t.prototype.destroy=function(t){var n=this._textureCache;for(var r in n){n[r].destroy(),delete n[r]}this._textureCache=null,e.prototype.destroy.call(this,t)},t.registerFont=function(e,t){return Ke("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),xa.install(e,t)},Object.defineProperty(t,"fonts",{get:function(){return Ke("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),xa.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Nt),Pa=function(){function e(){}return e.add=function(){Mi.setExtensionXhrType("fnt",Mi.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,n){var r=Aa(t.data);if(r)for(var i=e.getBaseUrl(this,t),o=r.parse(t.data),a={},s=function(e){a[e.metadata.pageFile]=e.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=xa.install(o,a,!0),n())},l=0;l<o.page.length;++l){var c=o.page[l].file,u=i+c,h=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===u){f.metadata.pageFile=c,f.texture?s(f):f.onAfterMiddleware.add(s),h=!0;break}}if(!h){var d={crossOrigin:t.crossOrigin,loadType:Mi.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(u,d,s)}}else n()},e.getBaseUrl=function(t,n){var r=n.isDataUrl?"":e.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}(),Da=function(e,t){return(Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Ra=function(e){function t(t){void 0===t&&(t=1);var n=e.call(this,Qr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=t,n}return function(e,t){function n(){this.constructor=e}Da(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(wr),Na=function(e,t){return(Na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ma(e,t){function n(){this.constructor=e}Na(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var La,ja,Ba,Fa,Ga,Ha,Ua,za,Va,Xa,Ya,Wa,qa,$a,Ka,Qa,Za,Ja={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},es=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(La||(La={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(ja||(ja={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ba||(Ba={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Fa||(Fa={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ga||(Ga={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Ha||(Ha={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ua||(Ua={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(za||(za={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(Va||(Va={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Xa||(Xa={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(Ya||(Ya={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Wa||(Wa={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(qa||(qa={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}($a||($a={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Ka||(Ka={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Qa||(Qa={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Za||(Za={}));var ts=function(e){function t(t,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=M.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o,t),l=function(e){for(var t,n=Ja[e],r=n.length,i=es,o="",a=0;a<e;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());t=a,a>=r&&(t=e-a-1),o+=s=s.replace("%value%",n[t].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o);return(a=e.call(this,s,l)||this).horizontal=t,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return Ma(t,e),t.prototype.apply=function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),o=e.renderer,a=t,s=i;this.state.blend=!1,e.applyFilter(this,a,s,qa.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(a,qa.BLIT),this.uniforms.uSampler=s;var c=s;s=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(wr),ns=function(e){function t(t,n,r,i){void 0===t&&(t=8),void 0===n&&(n=4),void 0===r&&(r=M.FILTER_RESOLUTION),void 0===i&&(i=5);var o=e.call(this)||this;return o.blurXFilter=new ts(!0,t,n,r,i),o.blurYFilter=new ts(!1,t,n,r,i),o.resolution=r,o.quality=n,o.blur=t,o.repeatEdgePixels=!1,o}return Ma(t,e),t.prototype.apply=function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,qa.CLEAR),this.blurYFilter.apply(e,a,n,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}(wr),rs=function(e,t){return(rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var is=function(e){function t(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=e.call(this,Zr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,t}return function(e,t){function n(){this.constructor=e}rs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._loadMatrix=function(e,t){void 0===t&&(t=!1);var n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(e,t){void 0===e&&(e=0);var n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,l=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,u=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,e=e||.2,0,l,c,u,t=t||.15,0,o-l,a-c,s-u,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(wr);is.prototype.grayscale=is.prototype.greyscale;var os=function(e,t){return(os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var as=function(e){function t(t,n){var r=this,i=new vt;return t.renderable=!1,(r=e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=i,null==n&&(n=20),r.scale=new gt(n,n),r}return function(e,t){function n(){this.constructor=e}os(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.apply=function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}(wr),ss=function(e,t){return(ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var ls=function(e){function t(){return e.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(e,t){function n(){this.constructor=e}ss(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(wr),cs=function(e,t){return(cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var us=function(e){function t(t,n){void 0===t&&(t=.5),void 0===n&&(n=Math.random());var r=e.call(this,Zr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=n,r}return function(e,t){function n(){this.constructor=e}cs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}(wr),hs=new vt;Pt.prototype._cacheAsBitmap=!1,Pt.prototype._cacheData=null;var ps=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Pt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new ps),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),Pt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Pt.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;n.pad(r)}n.ceil(M.RESOLUTION);var i=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,l=wn.create({width:n.width,height:n.height}),c="cacheAsBitmap_"+qe();this._cacheData.textureCacheId=c,on.addToCache(l.baseTexture,c),En.addToCache(l,c);var u=this.transform.localTransform.copyTo(hs).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,l,!0,u,!1),e.projection.transform=s,e.renderTexture.bind(i,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new Io(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-n.x/n.width,h.anchor.y=-n.y/n.height,h.alpha=t,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)}},Pt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Pt.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=e.context,i=e._projTransform;t.ceil(M.RESOLUTION);var o=wn.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+qe();this._cacheData.textureCacheId=a,on.addToCache(o.baseTexture,a),En.addToCache(o,a);var s=hs;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,s,!1),e.context=r,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new Io(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Pt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Pt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Pt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,on.removeFromCache(this._cacheData.textureCacheId),En.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Pt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Pt.prototype.name=null,Nt.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(n=0,r=this.children.length;n<r;n++){if(this.children[n].getChildByName){var i=this.children[n].getChildByName(e,!0);if(i)return i}}return null},Pt.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new gt),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var fs=function(e,t){return(fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ds(e,t){function n(){this.constructor=e}fs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ms=function(e){function t(t,n,r,i){void 0===t&&(t=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=e.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=t,o.height=n,o.build(),o}return ds(t,e),t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,l=0;l<e;l++){var c=l%this.segWidth,u=l/this.segWidth|0;t.push(c*a,u*s),n.push(c/i,u/o)}var h=i*o;for(l=0;l<h;l++){var p=l%i,f=l/i|0,d=f*this.segWidth+p,m=f*this.segWidth+p+1,g=(f+1)*this.segWidth+p,y=(f+1)*this.segWidth+p+1;r.push(d,m,g,m,y,g)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(va),gs=function(e){function t(t,n,r){void 0===t&&(t=200),void 0===r&&(r=0);var i=e.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=t,i.textureScale=r,i.build(),i}return ds(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=e[0],l=this._width*this.textureScale,c=e.length,u=0;u<c;u++){var h=4*u;if(this.textureScale>0){var p=s.x-e[u].x,f=s.y-e[u].y,d=Math.sqrt(p*p+f*f);s=e[u],a+=d/l}else a=u/(c-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var m=0;for(u=0;u<c-1;u++){h=2*u;o[m++]=h,o[m++]=h+1,o[m++]=h+2,o[m++]=h+2,o[m++]=h+1,o[m++]=h+3}n.update(),r.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,o=this.buffers[0].data,a=e.length,s=0;s<a;s++){var l=e[s],c=4*s;i=-((t=s<e.length-1?e[s+1]:l).x-n.x),r=t.y-n.y;var u=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,i/=u,r*=h,i*=h,o[c]=l.x+r,o[c+1]=l.y+i,o[c+2]=l.x-r,o[c+3]=l.y-i,n=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(va),ys=function(e){function t(t,n,r){void 0===r&&(r=0);var i=this,o=new gs(t.height,n,r),a=new ya(t);return r>0&&(t.baseTexture.wrapMode=ie.REPEAT),(i=e.call(this,o,a)||this).autoUpdate=!0,i}return ds(t,e),t.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,t)},t}(ga),vs=function(e){function t(t,n,r){var i=this,o=new ms(t.width,t.height,n,r),a=new ya(En.WHITE);return(i=e.call(this,o,a)||this).texture=t,i}return ds(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},t.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},t}(ga),bs=function(e){function t(t,n,r,i,o){void 0===t&&(t=En.EMPTY);var a=this,s=new va(n,r,i);s.getBuffer("aVertexPosition").static=!1;var l=new ya(t);return(a=e.call(this,s,l,null,o)||this).autoUpdate=!0,a}return ds(t,e),Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},t}(ga),_s=function(e){function t(t,n,r,i,o){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10);var a=e.call(this,En.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=i,a._topHeight=r,a._bottomHeight=o,a.texture=t,a}return ds(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(vs),Ts=function(e,t){return(Ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Es=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t[0]instanceof En?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}return function(e,t){function n(){this.constructor=e}Ts(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Gt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Gt.shared.add(this.update,this,Lt.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(En.from(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(En.from(e[r]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof En)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Gt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Gt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(Io),Ss=function(e,t){return(Ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ws(e,t){function n(){this.constructor=e}Ss(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var As="5.0.0";$r.registerPlugin("accessibility",Bt),$r.registerPlugin("extract",pi),$r.registerPlugin("interaction",$t),$r.registerPlugin("particle",Yi),$r.registerPlugin("prepare",ea),$r.registerPlugin("batch",li),$r.registerPlugin("tilingSprite",ua),Bi.registerPlugin(Pa),Bi.registerPlugin(ra),ci.registerPlugin(Ht),ci.registerPlugin(Fi);var Os="5.3.12",xs={AlphaFilter:Ra,BlurFilter:ns,BlurFilterPass:ts,ColorMatrixFilter:is,DisplacementFilter:as,FXAAFilter:ls,NoiseFilter:us};const ks=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return ae},AbstractBatchRenderer:ni,AbstractRenderer:qr,AccessibilityManager:Bt,AnimatedSprite:Es,AppLoaderPlugin:Fi,Application:ci,Attribute:On,get BLEND_MODES(){return Z},get BUFFER_BITS(){return Q},BasePrepare:Ko,BaseRenderTexture:bn,BaseTexture:on,BatchDrawCall:Jr,BatchGeometry:ii,BatchPluginFactory:si,BatchRenderer:li,BatchShaderGenerator:ri,BatchTextureArray:ei,BitmapFont:xa,BitmapFontData:_a,BitmapFontLoader:Pa,BitmapText:Ca,Bounds:kt,Buffer:kn,get CLEAR_MODES(){return se},Circle:pt,Container:Nt,CountLimiter:Uo,DEG_TO_RAD:ut,get DRAW_MODES(){return J},DisplayObject:Pt,get ENV(){return $},Ellipse:ft,Extract:pi,get FORMATS(){return ee},FillStyle:qi,Filter:wr,FilterState:Fn,Framebuffer:vn,get GC_MODES(){return le},GLFramebuffer:Xn,GLProgram:Br,GLTexture:Vr,GRAPHICS_CURVES:Wi,Geometry:Nn,Graphics:wo,GraphicsData:yo,GraphicsGeometry:_o,IGLUniformData:jr,InteractionData:Ut,InteractionEvent:Vt,InteractionManager:$t,InteractionTrackingData:Xt,get LINE_CAP(){return zi},get LINE_JOIN(){return Ui},LineStyle:To,Loader:Bi,LoaderResource:Mi,get MASK_TYPES(){return ue},get MIPMAP_MODES(){return oe},get MSAA_QUALITY(){return he},MaskData:Qn,Matrix:vt,Mesh:ga,MeshBatchUvs:fa,MeshGeometry:va,MeshMaterial:ya,NineSlicePlane:_s,ObjectRenderer:Hn,ObservablePoint:yt,PI_2:lt,get PRECISION(){return ce},ParticleContainer:Vi,ParticleRenderer:Yi,PlaneGeometry:ms,Point:gt,Polygon:dt,Prepare:ea,Program:Tr,Quad:Mn,QuadUv:Ln,RAD_TO_DEG:ct,get RENDERER_TYPE(){return K},Rectangle:ht,RenderTexture:wn,RenderTexturePool:An,Renderer:$r,RopeGeometry:gs,RoundedRectangle:mt,Runner:Kt,get SCALE_MODES(){return re},get SHAPES(){return st},Shader:Er,SimpleMesh:bs,SimplePlane:vs,SimpleRope:ys,Sprite:Io,SpriteMaskFilter:xr,Spritesheet:na,SpritesheetLoader:ra,State:Sr,System:gn,get TARGETS(){return te},get TEXT_GRADIENT(){return Oo},get TYPES(){return ne},TemporaryDisplayObject:Dt,Text:Go,TextMetrics:jo,TextStyle:Ro,Texture:En,TextureLoader:ji,TextureMatrix:Or,TextureUvs:_n,Ticker:Gt,TickerPlugin:Ht,TilingSprite:sa,TilingSpriteRenderer:ua,TimeLimiter:ta,Transform:xt,get UPDATE_PRIORITY(){return Lt},UniformGroup:Bn,VERSION:Os,ViewableBuffer:ti,get WRAP_MODES(){return ie},accessibleTarget:Mt,autoDetectRenderer:Kr,checkMaxIfStatementsInShader:vr,defaultFilterVertex:Zr,defaultVertex:Qr,filters:xs,graphicsUtils:go,groupD8:Ot,interactiveTarget:Wt,isMobile:N,resources:mn,settings:M,systems:Yr,uniformParsers:pr,useDeprecated:function(){var e=this;Object.defineProperties(e,{SVG_SIZE:{get:function(){return Ke(As,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),e.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Ke(As,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),e.Transform}},TransformBase:{get:function(){return Ke(As,"PIXI.TransformBase class has been removed, use PIXI.Transform"),e.Transform}},TRANSFORM_MODE:{get:function(){return Ke(As,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Ke(As,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),e.Renderer}},CanvasRenderTarget:{get:function(){return Ke(As,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),e.utils.CanvasRenderTarget}},loader:{get:function(){return Ke(As,"PIXI.loader instance has moved to PIXI.Loader.shared"),e.Loader.shared}},FilterManager:{get:function(){return Ke(As,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),e.systems.FilterSystem}},CanvasTinter:{get:function(){return Ke("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),e.canvasUtils}},GroupD8:{get:function(){return Ke("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),e.groupD8}}}),e.accessibility={},Object.defineProperties(e.accessibility,{AccessibilityManager:{get:function(){return Ke("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),e.AccessibilityManager}}}),e.interaction={},Object.defineProperties(e.interaction,{InteractionManager:{get:function(){return Ke("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),e.InteractionManager}},InteractionData:{get:function(){return Ke("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),e.InteractionData}},InteractionEvent:{get:function(){return Ke("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),e.InteractionEvent}}}),e.prepare={},Object.defineProperties(e.prepare,{BasePrepare:{get:function(){return Ke("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),e.BasePrepare}},Prepare:{get:function(){return Ke("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),e.Prepare}},CanvasPrepare:{get:function(){return Ke("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),e.CanvasPrepare}}}),e.extract={},Object.defineProperties(e.extract,{Extract:{get:function(){return Ke("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),e.Extract}},CanvasExtract:{get:function(){return Ke("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),e.CanvasExtract}}}),e.extras={},Object.defineProperties(e.extras,{TilingSprite:{get:function(){return Ke(As,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),e.TilingSprite}},TilingSpriteRenderer:{get:function(){return Ke(As,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),e.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Ke(As,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),e.AnimatedSprite}},BitmapText:{get:function(){return Ke(As,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),e.BitmapText}}}),e.TilingSprite.fromFrame=function(t,n,r){return Ke("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),e.TilingSprite.from(t,{width:n,height:r})},e.TilingSprite.fromImage=function(t,n,r,i){return void 0===i&&(i={}),Ke("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),i&&"object"!=typeof i&&(i={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),i.width=n,i.height=r,e.TilingSprite.from(t,i)},Object.defineProperties(e.utils,{getSvgSize:{get:function(){return Ke(As,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),e.resources.SVGResource.getSize}}}),e.mesh={},Object.defineProperties(e.mesh,{Mesh:{get:function(){return Ke(As,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),e.SimpleMesh}},NineSlicePlane:{get:function(){return Ke(As,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),e.NineSlicePlane}},Plane:{get:function(){return Ke(As,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),e.SimplePlane}},Rope:{get:function(){return Ke(As,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),e.SimpleRope}},RawMesh:{get:function(){return Ke(As,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),e.Mesh}},CanvasMeshRenderer:{get:function(){return Ke(As,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),e.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Ke(As,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),e.MeshRenderer}}}),e.particles={},Object.defineProperties(e.particles,{ParticleContainer:{get:function(){return Ke(As,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),e.ParticleContainer}},ParticleRenderer:{get:function(){return Ke(As,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),e.ParticleRenderer}}}),e.ticker={},Object.defineProperties(e.ticker,{Ticker:{get:function(){return Ke(As,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),e.Ticker}},shared:{get:function(){return Ke(As,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),e.Ticker.shared}}}),e.loaders={},Object.defineProperties(e.loaders,{Loader:{get:function(){return Ke(As,"PIXI.loaders.Loader class has moved to PIXI.Loader"),e.Loader}},Resource:{get:function(){return Ke(As,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),e.LoaderResource}},bitmapFontParser:{get:function(){return Ke(As,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),e.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){Ke(As,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return Ke(As,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),e.SpritesheetLoader.use}},getResourcePath:{get:function(){return Ke(As,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),e.SpritesheetLoader.getResourcePath}}}),e.Loader.addPixiMiddleware=function(t){return Ke(As,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),e.loaders.Loader.registerPlugin({use:t()})};var t=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)};Object.assign(e.Loader.prototype,{on:function(e){var n=t(e);Ke(As,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+n+".add")},once:function(e){var n=t(e);Ke(As,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+n+".once")},off:function(e){var n=t(e);Ke(As,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+n+".detach")}}),Object.defineProperty(e.extract,"WebGLExtract",{get:function(){return Ke(As,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),e.Extract}}),Object.defineProperty(e.prepare,"WebGLPrepare",{get:function(){return Ke(As,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),e.Prepare}}),e.Container.prototype._renderWebGL=function(e){Ke(As,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(e)},e.Container.prototype.renderWebGL=function(e){Ke(As,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(e)},e.DisplayObject.prototype.renderWebGL=function(e){Ke(As,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(e)},e.Container.prototype.renderAdvancedWebGL=function(e){Ke(As,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(e)},Object.defineProperties(e.settings,{TRANSFORM_MODE:{get:function(){return Ke(As,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Ke(As,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var n=e.BaseTexture;n.prototype.loadSource=function(t){Ke(As,"PIXI.BaseTexture.loadSource method has been deprecated");var n=e.resources.autoDetectResource(t);n.internal=!0,this.setResource(n),this.update()};var r=!1;Object.defineProperties(n.prototype,{hasLoaded:{get:function(){return Ke(As,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var e;return Ke(As,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(e=this.resource)||void 0===e?void 0:e.url},set:function(e){Ke(As,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=e)}},source:{get:function(){return Ke(As,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(e){Ke(As,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=e)}},premultiplyAlpha:{get:function(){return Ke("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(e){Ke("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(e)}},_id:{get:function(){return r||(Ke("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(e){this._batchLocation=e}}}),n.fromImage=function(e,t,r,i){Ke(As,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:i,crossorigin:t};return n.from(e,{scaleMode:r,resourceOptions:o})},n.fromCanvas=function(e,t){return Ke(As,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),n.from(e,{scaleMode:t})},n.fromSVG=function(e,t,r,i){Ke(As,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:i,crossorigin:t};return n.from(e,{scaleMode:r,resourceOptions:o})},Object.defineProperties(e.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Ke("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(e){Ke("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(e)}}}),e.Point.prototype.copy=function(e){return Ke(As,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(e)},e.ObservablePoint.prototype.copy=function(e){return Ke(As,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(e)},e.Rectangle.prototype.copy=function(e){return Ke(As,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(e)},e.Matrix.prototype.copy=function(e){return Ke(As,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(e)},e.systems.StateSystem.prototype.setState=function(e){return Ke("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(e)},Object.assign(e.systems.FilterSystem.prototype,{getRenderTarget:function(e,t){return Ke(As,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,t)},returnRenderTarget:function(e){Ke(As,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(e)},calculateScreenSpaceMatrix:function(e){Ke(As,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var t=e.identity(),n=this.activeState,r=n.sourceFrame,i=n.destinationFrame;return t.translate(r.x/i.width,r.y/i.height),t.scale(i.width,i.height),t},calculateNormalizedScreenSpaceMatrix:function(e){Ke(As,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var t=this.activeState,n=t.sourceFrame,r=t.destinationFrame,i=e.identity();i.translate(n.x/r.width,n.y/r.height);var o=r.width/n.width,a=r.height/n.height;return i.scale(o,a),i}}),Object.defineProperties(e.RenderTexture.prototype,{sourceFrame:{get:function(){return Ke(As,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Ke(As,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var i=function(e){function t(t,n,r,i){return Ke(As,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),e.call(this,!0,t,n,r,i)||this}return ws(t,e),t}(e.filters.BlurFilterPass),o=function(e){function t(t,n,r,i){return Ke(As,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),e.call(this,!1,t,n,r,i)||this}return ws(t,e),t}(e.filters.BlurFilterPass);Object.assign(e.filters,{BlurXFilter:i,BlurYFilter:o});var a=e.Sprite,s=e.Texture,l=e.Graphics;function c(e,t,n,r){return Ke(As,"PIXI.Sprite."+e+" method is deprecated, use PIXI.Sprite.from"),a.from(t,{resourceOptions:{scale:r,crossorigin:n}})}function u(e,t,n,r){return Ke(As,"PIXI.Texture."+e+" method is deprecated, use PIXI.Texture.from"),s.from(t,{resourceOptions:{scale:r,crossorigin:n}})}l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){Ke(As,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return Ke(As,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),a.fromImage=c.bind(null,"fromImage"),a.fromSVG=c.bind(null,"fromSVG"),a.fromCanvas=c.bind(null,"fromCanvas"),a.fromVideo=c.bind(null,"fromVideo"),a.fromFrame=c.bind(null,"fromFrame"),s.fromImage=u.bind(null,"fromImage"),s.fromSVG=u.bind(null,"fromSVG"),s.fromCanvas=u.bind(null,"fromCanvas"),s.fromVideo=u.bind(null,"fromVideo"),s.fromFrame=u.bind(null,"fromFrame"),Object.defineProperty(e.AbstractRenderer.prototype,"autoResize",{get:function(){return Ke(As,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(e){Ke(As,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=e}}),Object.defineProperty(e.Renderer.prototype,"textureManager",{get:function(){return Ke(As,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),e.utils.mixins={mixin:function(){Ke(As,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Ke(As,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Ke(As,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(e.BitmapText.prototype,"font",{get:function(){return Ke("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(t){if(Ke("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),t){var n={font:t};this._upgradeStyle(n),n.fontSize=n.fontSize||e.BitmapFont.available[n.fontName].size,this._fontName=n.fontName,this._fontSize=n.fontSize,this.dirty=!0}}})},utils:at},Symbol.toStringTag,{value:"Module"}));!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('._context-menu_18ock_1{position:fixed;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);border-radius:3px;font-size:12px;cursor:default;padding:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d}._context-menu-dark_18ock_12{color:#ccc;background-color:#444444f7}._context-menu-icon_18ock_17{display:inline-block;margin-right:3px;vertical-align:middle}._context-menu-icon_18ock_17>svg{width:30px;height:20px}._context-menu-item_18ock_27{padding:2px;white-space:nowrap;border-radius:2px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._context-menu-item_18ock_27:hover{background:#337ab7;color:#fff}._context-menu-hr_18ock_38{margin-top:5px;margin-bottom:5px;border:0;border-top:1px solid rgba(0,0,0,.1)}._play-icon_18ock_45{width:12px;height:12px;position:absolute;right:5px}._context-menu-span_18ock_52{margin-right:20px;vertical-align:middle;display:inline-block;line-height:normal;white-space:nowrap}._context-menu-thumbnail_18ock_60{margin-right:10px;border:1px solid #888888}._context-menu-thumbnail-inline_18ock_65{display:inline-block;margin-right:10px;vertical-align:middle}._multitrack-header_1yz7l_1,._multitrack-header-focus_1yz7l_2,._multitrack-header-squeazed_1yz7l_3{position:relative;display:flex;justify-content:space-between;height:24px;margin-top:4px;margin-bottom:4px;color:#999;font-size:12px;line-height:24px;vertical-align:middle;border:0;border-radius:3px;background:#e5e5e5;transition:height .15s cubic-bezier(.25,.1,.25,1),margin .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20{background:#222}._multitrack-header-focus_1yz7l_2{height:32px;margin-top:0;margin-bottom:0}._multitrack-header-id_1yz7l_30{padding-left:3px}._multitrack-header-id_1yz7l_30:before{content:"ID:";font-weight:700;padding-right:5px}._multitrack-header-left_1yz7l_39{display:flex;flex-grow:1}._multitrack-header-grabber_1yz7l_44,._multitrack-header-grabber-squeazed_1yz7l_45{display:flex;align-items:center;justify-content:center;width:24px;height:100%;cursor:move;border-radius:3px 0 0 3px;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-grabber_1yz7l_44:hover,._multitrack-header-grabber-squeazed_1yz7l_45:hover{background:#999}._multitrack-header-grabber_1yz7l_44:hover div,._multitrack-header-grabber-squeazed_1yz7l_45:hover div{background:#fff}._multitrack-header-grabber_1yz7l_44 div,._multitrack-header-grabber-squeazed_1yz7l_45 div{width:1px;height:50%;margin:1px;background:#999;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20 ._multitrack-header-grabber_1yz7l_44 div{background:#666}._multitrack-header-grabber-squeazed_1yz7l_45{width:19.2px}._multitrack-header-search_1yz7l_80{position:relative;flex-grow:1;height:100%;margin-right:12px}._multitrack-header-search_1yz7l_80:after{position:absolute;top:3px;bottom:3px;right:-12px;display:block;content:"";width:1px;margin:0 6px;background:#cccccc}._multitrack-header-dark_1yz7l_20 ._multitrack-header-search_1yz7l_80:after{background:#666}._multitrack-header-nav-list_1yz7l_102,._multitrack-header_1yz7l_1>nav{display:flex}._multitrack-header-icon_1yz7l_107,._multitrack-header-icon-squeazed_1yz7l_108{width:24px;height:100%;padding:6px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-icon_1yz7l_107 g,._multitrack-header-icon-squeazed_1yz7l_108 g{stroke:#999}._multitrack-header-icon_1yz7l_107:hover,._multitrack-header-icon_1yz7l_107:active,._multitrack-header-icon_1yz7l_107:focus,._multitrack-header-icon-squeazed_1yz7l_108:hover,._multitrack-header-icon-squeazed_1yz7l_108:active,._multitrack-header-icon-squeazed_1yz7l_108:focus{color:#fff;background:#337ab7}._multitrack-header-icon_1yz7l_107:hover g,._multitrack-header-icon_1yz7l_107:active g,._multitrack-header-icon_1yz7l_107:focus g,._multitrack-header-icon-squeazed_1yz7l_108:hover g,._multitrack-header-icon-squeazed_1yz7l_108:active g,._multitrack-header-icon-squeazed_1yz7l_108:focus g{stroke:#fff}._multitrack-header-icon_1yz7l_107:last-child,._multitrack-header-icon-squeazed_1yz7l_108:last-child{border-radius:0 3px 3px 0}._mouse-tool-selection_1yz7l_136{color:#fff;border-radius:3px 0 0 3px;background:#337ab7}._multitrack-header-icon-squeazed_1yz7l_108{width:20px 5;padding-left:3px;padding-right:3px}._track-control_w7hx2_1,._track-control-vertical_w7hx2_2{position:absolute;z-index:1;display:flex;background:rgba(255,255,255,.75);right:2px;top:2px;border-radius:2.5px;box-shadow:0 0 0 1px #0000000d,0 0 3px #0000001a;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1)}._track-control-dark_w7hx2_15,._track-control-dark_w7hx2_15 ._track-control-active_w7hx2_16{background:rgba(40,40,40,.85)}._track-control-vertical_w7hx2_2{flex-direction:column-reverse}._track-control-left_w7hx2_24{left:2px;right:auto}._track-control-active_w7hx2_16,._track-control-vertical-active_w7hx2_30{opacity:1;z-index:1}._track-control-active_w7hx2_16:hover,._track-control-vertical-active_w7hx2_30:hover{background:rgb(255,255,255);box-shadow:0 0 0 1px #0000001a,0 0 3px #0003}._track-control-dark_w7hx2_15._track-control-active_w7hx2_16:hover{background:rgba(34,34,34,.95)}._track-control-padding-right_w7hx2_48{right:80px}._track-control-button_w7hx2_52{width:20px;height:20px;padding:4px;cursor:pointer;opacity:.66;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button_w7hx2_52:first-child{border-radius:2.5px 0 0 2.5px}._track-control-button_w7hx2_52:last-child{border-radius:0 2.5px 2.5px 0}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52{color:#ccc}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button-vertical_w7hx2_81:first-child{border-radius:0 0 2.5px 2.5px}._track-control-button-vertical_w7hx2_81:last-child{border-radius:2.5px 2.5px 0 0}._center-track_fiu64_1{position:relative;background:transparent}._center-track-container_fiu64_6{position:absolute;z-index:1}._track-range-selection_5bcsr_1{position:absolute;z-index:-1;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1)}._track-range-selection-active_5bcsr_8{z-index:1;opacity:1}._track-range-selection-group-inactive_5bcsr_22{display:none}._track-range-selection-group-brush-selection_5bcsr_26{outline:2px solid rgba(0,0,0,.33);fill:#000;fill-opacity:.1}._drag-listening-div-active_19gkt_1{z-index:10;box-shadow:inset 0 0 3px red}._gallery-tracks_fbxxi_1{position:relative;top:0;left:0;width:100%;height:100%}._gallery-track_fbxxi_1{position:absolute;box-sizing:border-box;top:0;right:0;bottom:0;left:0}._gallery-sub-track_fbxxi_18,._gallery-invisible-track_fbxxi_19{position:absolute}._tiled-plot_1y7td_1{position:relative;flex:1;overflow:hidden}._horizontalList_1y7td_7{display:flex;width:600px;height:300px;white-space:nowrap}._list_1y7td_14{width:400px;height:600px;overflow:hidden;-webkit-overflow-scrolling:touch}._stylizedList_1y7td_21{position:relative;z-index:0;background-color:#f3f3f3;outline:none}._stylizedItem_1y7td_28{position:relative;display:flex;align-items:center;width:100%;background-color:transparent;-webkit-user-select:none;user-select:none;color:#333;font-weight:400}._stylizedHelper_1y7td_39{box-shadow:0 5px 5px -5px #0003,0 -5px 5px -5px #0003;background-color:#fffc;cursor:row-resize}._stylizedHelper_1y7td_39._horizontalItem_1y7td_44{cursor:col-resize}._horizontalItem_1y7td_44{display:flex;flex-shrink:0;align-items:center;justify-content:center}._resizable-track_1y7td_55{width:100%;height:100%}path._domain_1y7td_60{stroke-width:0px}._top-right-handle_cizw2_1,._bottom-right-handle_cizw2_2{border-right:black solid;border-top:black solid}._top-left-handle_cizw2_7,._bottom-left-handle_cizw2_8{border-left:black solid;border-top:black solid}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14,._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{position:absolute;opacity:0;transition:transform .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._draggable-div_cizw2_22{background-color:transparent;box-sizing:border-box}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{width:10px;height:4px;border-top:1px solid black;border-bottom:1px solid black}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{margin:4px 7px}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{width:4px;height:10px;border-left:1px solid black;border-right:1px solid black}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{margin:7px 4px}._draggable-div_cizw2_22:hover ._top-draggable-handle_cizw2_13,._draggable-div_cizw2_22:hover ._bottom-draggable-handle_cizw2_14,._draggable-div_cizw2_22:hover ._left-draggable-handle_cizw2_15,._draggable-div_cizw2_22:hover ._right-draggable-handle_cizw2_16{opacity:.5;background:rgba(255,255,255,.75);box-shadow:0 0 3px 1px #ffffffbf;border-radius:3px}._top-draggable-handle_cizw2_13:hover,._top-draggable-handle_cizw2_13:active,._bottom-draggable-handle_cizw2_14:hover,._bottom-draggable-handle_cizw2_14:active,._left-draggable-handle_cizw2_15:hover,._left-draggable-handle_cizw2_15:active,._right-draggable-handle_cizw2_16:hover,._right-draggable-handle_cizw2_16:active{opacity:1!important;transform:scale(2)}._top-draggable-handle_cizw2_13:hover ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:hover ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:hover ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:hover ._right-draggable-handle-grabber_cizw2_44,._top-draggable-handle_cizw2_13:active ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:active ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:active ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:active ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:hover ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:hover ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:hover ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:hover ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:active ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:active ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:active ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:active ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:hover ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:hover ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:hover ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:hover ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:active ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:active ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:active ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:active ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:hover ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:hover ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:hover ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:hover ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:active ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:active ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:active ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:active ._right-draggable-handle-grabber_cizw2_44{box-shadow:0 0 3px 1px #0089ff;background:#0089ff}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14{height:12px;cursor:row-resize}._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{width:12px;cursor:col-resize}._horizontal-tiled-plot_1bqkg_1{position:relative}._button_1wnjn_1{display:flex;align-items:center;box-sizing:border-box;padding:.5em;color:#000;font-size:1em;line-height:1em;border:0;border-radius:2.5px;background:#fff;box-shadow:0 0 0 1px #ccc;transition:transform .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1);-webkit-appearance:none}._button_1wnjn_1:hover{background:#f2f2f2;box-shadow:0 0 0 1px #ccc}._button_1wnjn_1:focus{box-shadow:0 0 0 2px #0089ff}._button_1wnjn_1:active{transform:scale(.9)}._button_1wnjn_1:hover,._button_1wnjn_1:focus,._button_1wnjn_1:active{cursor:pointer;outline:none}._button-shortcut_1wnjn_35{padding:.1em 5px;color:#999;font-size:.8em;transition:color .15s cubic-bezier(.25,.1,.25,1)}._cross_2ke8w_1{position:relative;width:1em;height:1em}._cross_2ke8w_1:before,._cross_2ke8w_1:after{content:"";display:block;position:absolute;top:50%;left:0;width:1em;height:1px;background:black;transform-origin:center}._cross_2ke8w_1:before{-webkit-transform:translate(0,-50%) rotate(45deg);-moz-transform:translate(0,-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}._cross_2ke8w_1:after{-webkit-transform:translate(0,-50%) rotate(-45deg);-moz-transform:translate(0,-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg)}._modal-background_zzhoe_1{position:absolute;z-index:1000;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.666);animation:_fade-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1;transition:opacity .2s cubic-bezier(.25,.1,.25,1)}._modal-hide_zzhoe_13{opacity:0}._modal-wrap_zzhoe_17{position:absolute;top:20px;right:20px;bottom:20px;left:20px}._modal-window_zzhoe_25{position:relative;width:100%;max-width:640px;max-height:100%;margin-left:auto;margin-right:auto;color:#000;border-radius:5px;background:#fff;animation:_fade-scale-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1}._modal-window-max-height_zzhoe_38{height:100%}._modal-content_zzhoe_42{padding:10px}@keyframes _fade-in_zzhoe_1{0%{opacity:0}to{opacity:1}}@keyframes _fade-scale-in_zzhoe_1{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}._dialog-header_wp50s_1{position:relative;z-index:2;display:flex;justify-content:space-between;margin:0 -10px 10px;padding:0 10px 10px;border-bottom:1px solid #cccccc}._dialog-header_wp50s_1 h3{margin:0;padding:0;font-size:20px;line-height:1em}._dialog-header_wp50s_1 button{font-size:10px}._dialog-main-max-height_wp50s_20{position:absolute;z-index:1;top:40px;right:0;bottom:50px;left:0;padding:10px;overflow:auto}._dialog-footer_wp50s_31,._dialog-footer-max-height_wp50s_31{display:flex;justify-content:space-between;margin:10px -10px 0;padding:10px 10px 0;border-top:1px solid #cccccc}._dialog-footer_wp50s_31 button,._dialog-footer-max-height_wp50s_31 button{font-size:14px}._dialog-footer-max-height_wp50s_31{position:absolute;z-index:2;left:10px;right:10px;bottom:10px}table.table-track-options{border-collapse:collapse;margin-left:auto;margin-right:auto}td.td-track-options{border:1px solid #fff;outline:none;padding:3px;position:relative;font-family:Roboto,sans-serif;font-size:14px;color:#666}.cell-label{position:absolute;left:0;top:0;margin-left:5px;color:#777}.modal-dialog{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:auto;min-width:300px;margin:auto}._track-renderer_11dwb_1{position:relative}._track-renderer-element_11dwb_5,._track-renderer-events_11dwb_6{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}._track-renderer-events_11dwb_6{z-index:1}.tileset-finder-label{font-weight:700}.tileset-finder-search-box{margin-left:10px}.tileset-finder-search-bar{display:flex;margin-left:5px;justify-content:space-between;align-items:center}.tileset-finder-checkbox-tree{margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px}.react-checkbox-tree{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;font-size:16px}.react-checkbox-tree>ol{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.react-checkbox-tree ol{margin:0;padding-left:0;list-style-type:none}.react-checkbox-tree ol ol{padding-left:24px}.react-checkbox-tree button{line-height:normal;color:inherit}.react-checkbox-tree button:disabled{cursor:not-allowed}.react-checkbox-tree .rct-bare-label{cursor:default}.react-checkbox-tree label{margin-bottom:0;cursor:pointer}.react-checkbox-tree label:hover{background:rgba(51,51,204,.1)}.react-checkbox-tree label:active,.react-checkbox-tree label:focus{background:rgba(51,51,204,.15)}.react-checkbox-tree:not(.rct-native-display) input{display:none}.react-checkbox-tree.rct-native-display input{margin:0 5px}.react-checkbox-tree .rct-icon{display:inline-block;text-align:center;text-rendering:auto;font-family:"Font Awesome 5 Free",FontAwesome,sans-serif;font-weight:400;font-variant:normal;font-style:normal}.rct-disabled>.rct-text>label{opacity:.75;cursor:not-allowed}.rct-disabled>.rct-text>label:hover{background:transparent}.rct-disabled>.rct-text>label:active{background:transparent}.rct-text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.rct-options{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:.5rem;text-align:right}.rct-option{opacity:.75;border:0;background:none;cursor:pointer;padding:0 4px;font-size:18px}.rct-option:hover{opacity:1}.rct-option+.rct-option{margin-left:2px}.rct-collapse,.rct-checkbox,.rct-node-icon{padding:0 5px}.rct-collapse *,.rct-checkbox *,.rct-node-icon *{display:inline-block;margin:0;width:14px}.rct-collapse{-ms-flex-item-align:stretch;align-self:stretch;border:0;background:none;line-height:normal;color:inherit;font-size:12px}.rct-collapse.rct-collapse-btn{cursor:pointer}.rct-collapse>.rct-icon-expand-close{opacity:.5}.rct-collapse>.rct-icon-expand-close:hover{opacity:1}.rct-native-display .rct-checkbox{display:none}.rct-node-clickable{cursor:pointer}.rct-node-clickable:hover{background:rgba(51,51,204,.1)}.rct-node-clickable:focus{outline:0;background:rgba(51,51,204,.2)}.rct-node-icon{color:#33c}.rct-title{padding:0 5px}.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uf054"}.rct-icons-fa4 .rct-icon-expand-open:before{content:"\uf078"}.rct-icons-fa4 .rct-icon-uncheck:before{content:"\uf096"}.rct-icons-fa4 .rct-icon-check:before{content:"\uf046"}.rct-icons-fa4 .rct-icon-half-check:before{opacity:.5;content:"\uf046"}.rct-icons-fa4 .rct-icon-leaf:before{content:"\uf016"}.rct-icons-fa4 .rct-icon-parent-open:before{content:"\uf115"}.rct-icons-fa4 .rct-icon-parent-close:before{content:"\uf114"}.rct-icons-fa4 .rct-icon-expand-all:before{content:"\uf0fe"}.rct-icons-fa4 .rct-icon-collapse-all:before{content:"\uf146"}.rct-icons-fa5 .rct-icon-expand-close:before{font-weight:900;content:"\uf054"}.rct-icons-fa5 .rct-icon-expand-open:before{font-weight:900;content:"\uf078"}.rct-icons-fa5 .rct-icon-uncheck:before{content:"\uf0c8"}.rct-icons-fa5 .rct-icon-check:before{content:"\uf14a"}.rct-icons-fa5 .rct-icon-half-check:before{opacity:.5;content:"\uf14a"}.rct-icons-fa5 .rct-icon-leaf:before{content:"\uf15b"}.rct-icons-fa5 .rct-icon-parent-open:before{content:"\uf07c"}.rct-icons-fa5 .rct-icon-parent-close:before{content:"\uf07b"}.rct-icons-fa5 .rct-icon-expand-all:before{content:"\uf0fe"}.rct-icons-fa5 .rct-icon-collapse-all:before{content:"\uf146"}.rct-direction-rtl{direction:rtl}.rct-direction-rtl ol ol{padding-right:24px;padding-left:0}.rct-direction-rtl.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uf105"}.rct-direction-rtl.rct-icons-fa5 .rct-icon-expand-close:before{content:"\uf053"}.plot-type-selected{background-color:#0000ff4d}.plot-type-container{overflow-y:scroll;margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px;max-height:15vh}.plot-type-container-empty{margin:5px;padding:3px 8px;border:1px solid #aaaaaa;background-color:#e8e8e8;border-radius:5px}.plot-type-item{cursor:pointer}.plot-type-item:not(.plot-type-selected):hover{background-color:#3333cc1a}.track-thumbnail{width:30px;height:20px;display:inline-block;margin-right:10;vertical-align:middle}.track-thumbnail>svg{width:20px;height:20px}._collapse-toggle-icon_ub7s6_1:before{font-family:Glyphicons Halflings;content:"\ue159";float:left;padding-right:3px}._collapse-toggle-icon_ub7s6_1._collapsed_ub7s6_9:before{content:"\ue158"}._modal-title_ub7s6_14{font-family:Roboto;font-weight:700}._modal-container_ub7s6_19{position:relative}._modal-container_ub7s6_19 ._modal_ub7s6_14,._modal-container_ub7s6_19 ._modal-backdrop_ub7s6_23{position:absolute}._modal-dialog_ub7s6_27{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:600px;min-width:300px;margin:auto}._vertical-tiled-plot_f3ho8_1{position:relative}._genome-position-search_1l2sx_1,._genome-position-search-focus_1l2sx_2{position:relative;display:flex;align-items:stretch;height:100%;margin-bottom:0;font-size:13.7142857143px;transition:box-shadow .15s cubic-bezier(.25,.1,.25,1),font-size .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-focus_1l2sx_2{box-shadow:0 0 0 1px #337ab7,0 0 3px 1px #337ab7}._genome-position-search-bar_1l2sx_16{position:relative;box-sizing:border-box;width:100%;height:100%;padding:3px;color:#666;font-size:inherit;line-height:24px;border:0;border-radius:3px 0 0 3px;background:transparent}._genome-position-search-bar_1l2sx_16:focus{outline:none;color:#000}._genome-position-search-dark_1l2sx_34 ._genome-position-search-bar_1l2sx_16:focus{color:#e5e5e5}._genome-position-search-bar-button_1l2sx_38,._genome-position-search-bar-button-focus_1l2sx_39{display:block;height:100%;padding:0 8px!important;color:#999;border:0!important;border-radius:0!important;background:transparent;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-button_1l2sx_38:active,._genome-position-search-bar-button_1l2sx_38:focus,._genome-position-search-bar-button_1l2sx_38:hover,._genome-position-search-bar-button-focus_1l2sx_39:active,._genome-position-search-bar-button-focus_1l2sx_39:focus,._genome-position-search-bar-button-focus_1l2sx_39:hover{color:#fff;background:#337ab7}._genome-position-search-bar-button-focus_1l2sx_39{color:#fff;background:#337ab7}._genome-position-search-bar-icon_1l2sx_62,._genome-position-search-bar-icon-focus_1l2sx_63{display:flex;align-items:center;transition:color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-icon_1l2sx_62:first-child,._genome-position-search-bar-icon-focus_1l2sx_63:first-child{margin-left:6px;margin-right:2px}._genome-position-search-bar-icon_1l2sx_62 span,._genome-position-search-bar-icon-focus_1l2sx_63 span{display:block;margin-top:-2px}._genome-position-search-bar-icon-focus_1l2sx_63{color:#337ab7}._genome-position-search-bar-suggestions_1l2sx_83{position:fixed;border-radius:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);padding:2px 0;font-size:90%;overflow:auto;max-height:50%}._btn_1l2sx_95{display:inline-block;margin-bottom:0;font-size:13.7142857143px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}._btn-sm_1l2sx_116{font-size:12px;line-height:1.5;border-radius:3px}._btn-default_1l2sx_122{color:#666;background-color:#fff;border-color:#ccc}._btn-default_1l2sx_122:hover{color:#000;background:#ccc}._btn-default_1l2sx_122:active,._btn-default_1l2sx_122:focus{color:#fff;border-color:#000;background:#000}._genome-position-search_1l2sx_1 ._btn_1l2sx_95{border-radius:0 3px 3px 0}._export-link-dialog-wrapper_p9gxw_1{display:flex}._export-link-dialog-wrapper_p9gxw_1 input{flex-grow:1}._add-track-position-table_wdy5w_1{border-collapse:collapse;margin:5px;color:#666}._add-track-position-table-dark_wdy5w_7{color:#ccc}._add-track-position-other_wdy5w_11{outline:none}._add-track-position-top-center_wdy5w_15{min-width:80px;min-height:20px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;border-radius:2px 2px 0 0}._add-track-position-top-center_wdy5w_15:hover{color:#fff;background-color:#337ab7}._add-track-position-middle-left_wdy5w_30{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #999;border-radius:2px 0 0 2px}._add-track-position-middle-left_wdy5w_30:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-right_wdy5w_45{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 2px 2px 0}._add-track-position-middle-right_wdy5w_45:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle_wdy5w_60{text-align:center;outline:none;border:1px solid #999}._add-track-position-middle-middle_wdy5w_60:hover{background-color:#337ab7;color:#fff}._add-track-position-bottom-middle_wdy5w_71{min-height:20px;text-align:center;outline:none;border-left:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 0 2px 2px}._add-track-position-bottom-middle_wdy5w_71:hover{background-color:#337ab7;color:#fff}._add-track-position-span_wdy5w_86{margin:5px}._view-config-editor-header_1hlm6_1{margin:-10px -10px 0;padding:10px;display:flex;justify-content:space-between;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button{display:flex;align-items:center;font-size:14px;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button:hover{background:#e5e5e5}._view-config-editor-header_1hlm6_1 button:hover span{color:#666}._view-config-editor_1hlm6_1{position:absolute;top:50px;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;overflow:auto;font-size:12.5px;height:calc(100% - 80px)}._view-config-log_1hlm6_34{position:absolute;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;min-height:30px;background:#f2f2f2;transition:height .15s cubic-bezier(.25,.1,.25,1)}._view-config-log-header_1hlm6_46{background:#f2f2f2;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc;padding-left:10px;height:30px;display:flex;align-items:center;cursor:pointer;position:sticky;position:-webkit-sticky;top:0}._view-config-log-msg_1hlm6_60{background:#f2f2f2;overflow:auto;height:calc(100% - 30px)}._view-config-log-msg_1hlm6_60 tr,._view-config-log-msg_1hlm6_60 td{outline:none;vertical-align:top}._view-config-log-msg_1hlm6_60 ._title_1hlm6_70{font-weight:700;padding-left:8px;padding-top:8px;width:100px}._view-config-log-msg_1hlm6_60 ._Warning_1hlm6_76{color:orange}._view-config-log-msg_1hlm6_60 ._Success_1hlm6_79{color:green}._view-config-log-msg_1hlm6_60 ._Error_1hlm6_82{color:red}._view-config-log-msg_1hlm6_60 pre{background:white;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._higlass_1uoq8_1{position:relative}._higlass-dark-theme_1uoq8_5{background:black}._higlass-container-overflow_1uoq8_9,._higlass-scroll-container-overflow_1uoq8_10,._higlass-scroll-container-scroll_1uoq8_11{position:absolute;top:0;right:0;bottom:0;left:0}._higlass-scroll-container-overflow_1uoq8_10{overflow:hidden}._higlass-scroll-container-scroll_1uoq8_11{overflow-x:hidden;overflow-y:auto}._higlass-canvas_1uoq8_28{position:absolute;width:100%;height:100%}._higlass-drawing-surface_1uoq8_34{position:relative}._higlass-svg_1uoq8_38{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}._tiled-area_1uoq8_47{display:flex;flex-direction:column}._track-mouseover-menu_1uoq8_52{position:fixed;z-index:1;margin:17px 0 0 9px;padding:0 .25rem;max-width:50vw;word-wrap:break-word;font-size:.8em;pointer-events:none;background:white;border-radius:.25rem;box-shadow:0 0 0 1px #0000001a,0 0 3px #00000013,0 0 7px #0000000d}.react-grid-layout{position:relative;transition:height .2s ease}.react-grid-item{transition:all .2s ease;transition-property:left,top}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable-dragging{transition:none;z-index:3;will-change:transform}.react-grid-item.react-grid-placeholder{background:red;opacity:.2;transition-duration:.1s;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.react-grid-item>.react-resizable-handle{position:absolute;width:20px;height:20px;bottom:0;right:0;cursor:se-resize}.react-grid-item>.react-resizable-handle:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}.react-resizable{position:relative}.react-resizable-handle{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+);background-position:bottom right;padding:0 3px 3px 0}.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-resizable-handle-w,.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-resizable-handle-n,.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #dddddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #dddddd}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.string,.token.attr-value{color:#e3116c}.token.punctuation,.token.operator{color:#393a34}.token.entity,.token.url,.token.symbol,.token.number,.token.boolean,.token.variable,.token.constant,.token.property,.token.regex,.token.inserted{color:#36acaa}.token.atrule,.token.keyword,.token.attr-name,.language-autohotkey .token.selector{color:#00a4db}.token.function,.token.deleted,.language-autohotkey .token.tag{color:#9a050f}.token.tag,.token.selector,.language-autohotkey .token.keyword{color:#00009f}.token.important,.token.function,.token.bold{font-weight:700}.token.italic{font-style:italic}.higlass *{box-sizing:border-box}.higlass .react-resizable-handle{z-index:1}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();var Is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Cs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ps(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var Ds={exports:{}};function Rs(){}function Ns(){}Ns.resetWarningCache=Rs;Ds.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ns,resetWarningCache:Rs};return n.PropTypes=n,n}();var Ms=Ds.exports;const Ls=Cs(Ms);var js="http://www.w3.org/1999/xhtml";const Bs={svg:"http://www.w3.org/2000/svg",xhtml:js,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fs(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Bs.hasOwnProperty(t)?{space:Bs[t],local:e}:e}function Gs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===js&&t.documentElement.namespaceURI===js?t.createElement(e):t.createElementNS(n,e)}}function Hs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Us(e){var t=Fs(e);return(t.local?Hs:Gs)(t)}function zs(){}function Vs(e){return null==e?zs:function(){return this.querySelector(e)}}function Xs(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Ys(){return[]}function Ws(e){return null==e?Ys:function(){return this.querySelectorAll(e)}}function qs(e){return function(){return this.matches(e)}}function $s(e){return function(t){return t.matches(e)}}var Ks=Array.prototype.find;function Qs(){return this.firstElementChild}var Zs=Array.prototype.filter;function Js(){return this.children}function el(e){return new Array(e.length)}function tl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function nl(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new tl(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function rl(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,p=o.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<p;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new tl(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function il(e){return e.__data__}function ol(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function al(e){return function(){this.removeAttribute(e)}}function sl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ll(e,t){return function(){this.setAttribute(e,t)}}function cl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ul(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function hl(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fl(e){return function(){this.style.removeProperty(e)}}function dl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ml(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function gl(e,t){return e.style.getPropertyValue(t)||pl(e).getComputedStyle(e,null).getPropertyValue(t)}function yl(e){return function(){delete this[e]}}function vl(e,t){return function(){this[e]=t}}function bl(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function _l(e){return e.trim().split(/^|\s+/)}function Tl(e){return e.classList||new El(e)}function El(e){this._node=e,this._names=_l(e.getAttribute("class")||"")}function Sl(e,t){for(var n=Tl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function wl(e,t){for(var n=Tl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Al(e){return function(){Sl(this,e)}}function Ol(e){return function(){wl(this,e)}}function xl(e,t){return function(){(t.apply(this,arguments)?Sl:wl)(this,e)}}function kl(){this.textContent=""}function Il(e){return function(){this.textContent=e}}function Cl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Pl(){this.innerHTML=""}function Dl(e){return function(){this.innerHTML=e}}function Rl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Nl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ml(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ll(){return null}function jl(){var e=this.parentNode;e&&e.removeChild(this)}function Bl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gl(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Hl(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Ul(e,t,n){var r=pl(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zl(e,t){return function(){return Ul(this,e,t)}}function Vl(e,t){return function(){return Ul(this,e,t.apply(this,arguments))}}tl.prototype={constructor:tl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},El.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Xl=[null];function Yl(e,t){this._groups=e,this._parents=t}function Wl(){return new Yl([[document.documentElement]],Xl)}function ql(e){return"string"==typeof e?new Yl([[document.querySelector(e)]],[document.documentElement]):new Yl([[e]],Xl)}Yl.prototype=Wl.prototype={constructor:Yl,select:function(e){"function"!=typeof e&&(e=Vs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Yl(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Xs(t)}}(e):Ws(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new Yl(r,i)},selectChild:function(e){return this.select(null==e?Qs:function(e){return function(){return Ks.call(this.children,e)}}("function"==typeof e?e:$s(e)))},selectChildren:function(e){return this.selectAll(null==e?Js:function(e){return function(){return Zs.call(this.children,e)}}("function"==typeof e?e:$s(e)))},filter:function(e){"function"!=typeof e&&(e=qs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new Yl(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,il);var n=t?rl:nl,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],p=h.length,f=Xs(e.call(u,u&&u.__data__,c,r)),d=f.length,m=s[c]=new Array(d),g=a[c]=new Array(d);n(u,h,m,g,l[c]=new Array(p),f,t);for(var y,v,b=0,_=0;b<d;++b)if(y=m[b]){for(b>=_&&(_=b+1);!(v=g[_])&&++_<d;);y._next=v||null}}return(a=new Yl(a,r))._enter=s,a._exit=l,a},enter:function(){return new Yl(this._enter||this._groups.map(el),this._parents)},exit:function(){return new Yl(this._exit||this._groups.map(el),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof Yl))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new Yl(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ol);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new Yl(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Fs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?sl:al:"function"==typeof t?n.local?hl:ul:n.local?cl:ll)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?fl:"function"==typeof t?ml:dl)(e,t,n??"")):gl(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?yl:"function"==typeof t?bl:vl)(e,t)):this.node()[e]},classed:function(e,t){var n=_l(e+"");if(arguments.length<2){for(var r=Tl(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?xl:t?Al:Ol)(n,t))},text:function(e){return arguments.length?this.each(null==e?kl:("function"==typeof e?Cl:Il)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Pl:("function"==typeof e?Rl:Dl)(e)):this.node().innerHTML},raise:function(){return this.each(Nl)},lower:function(){return this.each(Ml)},append:function(e){var t="function"==typeof e?e:Us(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Us(e),r=null==t?Ll:"function"==typeof t?t:Vs(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(jl)},clone:function(e){return this.select(e?Fl:Bl)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Hl:Gl,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?Vl:zl)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var $l=0;function Kl(){return new Ql}function Ql(){this._="@"+(++$l).toString(36)}function Zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jl(e,t){if(e=Zl(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}Ql.prototype=Kl.prototype={constructor:Ql,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};const ec=Object.freeze(Object.defineProperty({__proto__:null,create:function(e){return ql(Us(e).call(document.documentElement))},creator:Us,local:Kl,matcher:qs,namespace:Fs,namespaces:Bs,pointer:Jl,pointers:function(e,t){return e.target&&(e=Zl(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,(e=>Jl(e,t)))},select:ql,selectAll:function(e){return"string"==typeof e?new Yl([document.querySelectorAll(e)],[document.documentElement]):new Yl([null==e?[]:Xs(e)],Xl)},selection:Wl,selector:Vs,selectorAll:Ws,style:gl,window:pl},Symbol.toStringTag,{value:"Module"}));function tc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nc(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>tc(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function rc(e){return null===e?NaN:+e}const ic=nc(tc),oc=ic.right,ac=ic.left,sc=nc(rc).center,lc=oc;function cc(e,t){let n=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}return n}function uc(e){return 0|e.length}function hc(e){return!(e>0)}function pc(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function fc(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let a of e)null!=a&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function dc(e,t){const n=fc(e,t);return n&&Math.sqrt(n)}function mc(e,t){let n,r;if(void 0===t)for(const i of e)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yc(r.key),r)}}function yc(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let vc=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._partials=new Float64Array(32),this._n=0}return function(e,t,n){t&&gc(e.prototype,t),n&&gc(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}]),e}();function bc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ec(r.key),r)}}function Tc(e,t,n){return t&&_c(e.prototype,t),n&&_c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ec(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Sc(){return Sc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Sc.apply(this,arguments)}function wc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cc(e,t)}function Ac(e){var t=Ic();return function(){var n,r=Pc(e);if(t){var i=Pc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oc(e)}(this,n)}}function Oc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xc(e){var t="function"==typeof Map?new Map:void 0;return xc=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch{return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return kc(e,arguments,Pc(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Cc(n,e)},xc(e)}function kc(e,t,n){return(kc=Ic()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Cc(i,n.prototype),i}).apply(null,arguments)}function Ic(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function Cc(e,t){return(Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Dc=function(e){wc(n,e);var t=Ac(n);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jc;var i;if(bc(this,n),i=t.call(this),Object.defineProperties(Oc(i),{_intern:{value:new Map},_key:{value:r}}),null!=e)for(const[t,n]of e)i.set(t,n);return i}return Tc(n,[{key:"get",value:function(e){return Sc(Pc(n.prototype),"get",this).call(this,Nc(this,e))}},{key:"has",value:function(e){return Sc(Pc(n.prototype),"has",this).call(this,Nc(this,e))}},{key:"set",value:function(e,t){return Sc(Pc(n.prototype),"set",this).call(this,Mc(this,e),t)}},{key:"delete",value:function(e){return Sc(Pc(n.prototype),"delete",this).call(this,Lc(this,e))}}]),n}(xc(Map)),Rc=function(e){wc(n,e);var t=Ac(n);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jc;var i;if(bc(this,n),i=t.call(this),Object.defineProperties(Oc(i),{_intern:{value:new Map},_key:{value:r}}),null!=e)for(const t of e)i.add(t);return i}return Tc(n,[{key:"has",value:function(e){return Sc(Pc(n.prototype),"has",this).call(this,Nc(this,e))}},{key:"add",value:function(e){return Sc(Pc(n.prototype),"add",this).call(this,Mc(this,e))}},{key:"delete",value:function(e){return Sc(Pc(n.prototype),"delete",this).call(this,Lc(this,e))}}]),n}(xc(Set));function Nc(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function Mc(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function Lc(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(t),n.delete(i)),t}function jc(e){return null!==e&&"object"==typeof e?e.valueOf():e}function Bc(e){return e}function Fc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uc(e,Bc,Bc,n)}function Gc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Uc(e,Bc,t,r)}function Hc(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function Uc(e,t,n,r){return function e(i,o){if(o>=r.length)return n(i);const a=new Dc,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[t,n]of a)a.set(t,e(n,o));return t(a)}(e,0)}function zc(e,t){return Array.from(t,(t=>e[t]))}function Vc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[i=tc]=n;if(1===i.length||n.length>1){const t=Uint32Array.from(e,((e,t)=>t));return n.length>1?(n=n.map((t=>e.map(t))),t.sort(((e,t)=>{for(const r of n){const n=tc(r[e],r[t]);if(n)return n}}))):(i=e.map(i),t.sort(((e,t)=>tc(i[e],i[t])))),zc(e,t)}return e.sort(i)}var Xc=Array.prototype.slice;function Yc(e){return function(){return e}}var Wc=Math.sqrt(50),qc=Math.sqrt(10),$c=Math.sqrt(2);function Kc(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Qc(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function Qc(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Wc?10:o>=qc?5:o>=$c?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Wc?10:o>=qc?5:o>=$c?2:1)}function Zc(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Wc?i*=10:o>=qc?i*=5:o>=$c&&(i*=2),t<e?-i:i}function Jc(e,t,n){let r;for(;;){const i=Qc(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function eu(e){return Math.ceil(Math.log(cc(e))/Math.LN2)+1}function tu(){var e=Bc,t=mc,n=eu;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var l=t(s),c=l[0],u=l[1],h=n(s,c,u);if(!Array.isArray(h)){const e=u,n=+h;if(t===mc&&([c,u]=Jc(c,u,n)),(h=Kc(c,u,n))[h.length-1]>=u)if(e>=u&&t===mc){const e=Qc(c,u,n);isFinite(e)&&(e>0?u=(Math.floor(u/e)+1)*e:e<0&&(u=(Math.ceil(u*-e)+1)/-e))}else h.pop()}for(var p=h.length;h[0]<=c;)h.shift(),--p;for(;h[p-1]>u;)h.pop(),--p;var f,d=new Array(p+1);for(i=0;i<=p;++i)(f=d[i]=[]).x0=i>0?h[i-1]:c,f.x1=i<p?h[i]:u;for(i=0;i<a;++i)c<=(o=s[i])&&o<=u&&d[lc(h,o,0,p)].push(r[i]);return d}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:Yc(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:Yc([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?Yc(Xc.call(e)):Yc(e),r):n},r}function nu(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function ru(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function iu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tc;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);iu(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}const o=e[t];let a=n,s=r;for(ou(e,n,t),i(e[r],o)>0&&ou(e,n,r);a<s;){for(ou(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?ou(e,n,s):(++s,ou(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ou(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function au(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),r=e.length){if((t=+t)<=0||r<2)return ru(e);if(t>=1)return nu(e);var r,i=(r-1)*t,o=Math.floor(i),a=nu(iu(e,o).subarray(0,o+1));return a+(ru(e.subarray(o+1))-a)*(i-o)}}function su(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rc;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function lu(e,t){let n,r=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function cu(e,t){let n=0,r=0;if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function uu(e,t){return au(e,.5,t)}function hu(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function pu(e,t){let n,r=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function fu(e,t){return[e,t]}function du(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function mu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc;if(1===t.length)return pu(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?0===t(o,o):t(o,n)<0)&&(n=o,r=i);return r}const gu=yu(Math.random);function yu(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length)-(n=+n);for(;r;){const i=e()*r--|0,o=t[r+n];t[r+n]=t[i+n],t[i+n]=o}return t}}function vu(e,t){let n=0;if(void 0===t)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function bu(e){if(!(i=e.length))return[];for(var t=-1,n=ru(e,_u),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r}function _u(e){return e.length}function Tu(e){return e instanceof Set?e:new Set(e)}function Eu(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){if(r.has(i))continue;let e,t;for(;({value:e,done:t}=n.next());){if(t)return!1;if(r.add(e),Object.is(i,e))break}}return!0}const Su=Object.freeze(Object.defineProperty({__proto__:null,Adder:vc,InternMap:Dc,InternSet:Rc,ascending:tc,bin:tu,bisect:lc,bisectCenter:sc,bisectLeft:ac,bisectRight:oc,bisector:nc,count:cc,cross:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r="function"==typeof t[t.length-1]&&function(e){return t=>e(...t)}(t.pop()),i=(t=t.map(pc)).map(uc),o=t.length-1,a=new Array(o+1).fill(0),s=[];if(o<0||i.some(hc))return s;for(;;){s.push(a.map(((e,n)=>t[n][e])));let e=o;for(;++a[e]===i[e];){if(0===e)return r?s.map(r):s;a[e--]=0}}},cumsum:function(e,t){var n=0,r=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:i=>n+=+t(i,r++,e)||0)},descending:function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},deviation:dc,difference:function(e){e=new Set(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t of i)e.delete(t);return e},disjoint:function(e,t){const n=t[Symbol.iterator](),r=new Set;for(const i of e){if(r.has(i))return!1;let e,t;for(;({value:e,done:t}=n.next())&&!t;){if(Object.is(i,e))return!1;r.add(e)}}return!0},every:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0},extent:mc,fcumsum:function(e,t){const n=new vc;let r=-1;return Float64Array.from(e,void 0===t?e=>n.add(+e||0):i=>n.add(+t(i,++r,e)||0))},filter:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n},fsum:function(e,t){const n=new vc;if(void 0===t)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n},greatest:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc,r=!1;if(1===n.length){let i;for(const o of e){const e=n(o);(r?tc(e,i)>0:0===tc(e,e))&&(t=o,i=e,r=!0)}}else for(const i of e)(r?n(i,t)>0:0===n(i,i))&&(t=i,r=!0);return t},greatestIndex:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc;if(1===t.length)return lu(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?0===t(o,o):t(o,n)>0)&&(n=o,r=i);return r},group:Fc,groupSort:function(e,t,n){return(1===t.length?Vc(Gc(e,t,n),((e,t)=>{let[n,r]=e,[i,o]=t;return tc(r,o)||tc(n,i)})):Vc(Fc(e,n),((e,n)=>{let[r,i]=e,[o,a]=n;return t(i,a)||tc(r,o)}))).map((e=>{let[t]=e;return t}))},groups:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uc(e,Array.from,Bc,n)},histogram:tu,index:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uc(e,Bc,Hc,n)},indexes:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uc(e,Array.from,Hc,n)},intersection:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=new Set(e),n=n.map(Tu);e:for(const i of e)for(const t of n)if(!t.has(i)){e.delete(i);continue e}return e},least:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tc,r=!1;if(1===n.length){let i;for(const o of e){const e=n(o);(r?tc(e,i)<0:0===tc(e,e))&&(t=o,i=e,r=!0)}}else for(const i of e)(r?n(i,t)<0:0===n(i,i))&&(t=i,r=!0);return t},leastIndex:mu,map:function(e,t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof t)throw new TypeError("mapper is not a function");return Array.from(e,((n,r)=>t(n,r,e)))},max:nu,maxIndex:lu,mean:cu,median:uu,merge:hu,min:ru,minIndex:pu,nice:Jc,pairs:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fu;const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n},permute:zc,quantile:au,quantileSorted:su,quickselect:iu,range:du,reduce:function(e,t,n){if("function"!=typeof t)throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=t(n,o,++a,e);return n},reverse:function(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()},rollup:Gc,rollups:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Uc(e,Array.from,t,r)},scan:function(e,t){const n=mu(e,t);return n<0?void 0:n},shuffle:gu,shuffler:yu,some:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1},sort:Vc,subset:function(e,t){return Eu(t,e)},sum:vu,superset:Eu,thresholdFreedmanDiaconis:function(e,t,n){return Math.ceil((n-t)/(2*(au(e,.75)-au(e,.25))*Math.pow(cc(e),-1/3)))},thresholdScott:function(e,t,n){return Math.ceil((n-t)/(3.5*dc(e)*Math.pow(cc(e),-1/3)))},thresholdSturges:eu,tickIncrement:Qc,tickStep:Zc,ticks:Kc,transpose:bu,union:function(){const e=new Set;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)for(const t of i)e.add(t);return e},variance:fc,zip:function(){return bu(arguments)}},Symbol.toStringTag,{value:"Module"}));function wu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Au(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const Ou=Symbol("implicit");function xu(){var e=new Dc,t=[],n=[],r=Ou;function i(i){let o=e.get(i);if(void 0===o){if(r!==Ou)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Dc;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return xu(t,n).unknown(r)},wu.apply(i,arguments),i}function ku(){var e,t,n=xu().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,p=h?a:o,f=h?o:a;e=(f-p)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),p+=(f-p-e*(n-l))*u,t=e*(1-l),s&&(p=Math.round(p),t=Math.round(t));var d=du(n).map((function(t){return p+e*t}));return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return ku(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},wu.apply(h(),arguments)}function Iu(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Iu(t())},e}function Cu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Du(){}var Ru=.7,Nu=1/Ru,Mu="\\s*([+-]?\\d+)\\s*",Lu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ju="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bu=/^#([0-9a-f]{3,8})$/,Fu=new RegExp("^rgb\\("+[Mu,Mu,Mu]+"\\)$"),Gu=new RegExp("^rgb\\("+[ju,ju,ju]+"\\)$"),Hu=new RegExp("^rgba\\("+[Mu,Mu,Mu,Lu]+"\\)$"),Uu=new RegExp("^rgba\\("+[ju,ju,ju,Lu]+"\\)$"),zu=new RegExp("^hsl\\("+[Lu,ju,ju]+"\\)$"),Vu=new RegExp("^hsla\\("+[Lu,ju,ju,Lu]+"\\)$"),Xu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yu(){return this.rgb().formatHex()}function Wu(){return this.rgb().formatRgb()}function qu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?$u(t):3===n?new Ju(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ku(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ku(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Fu.exec(e))?new Ju(t[1],t[2],t[3],1):(t=Gu.exec(e))?new Ju(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Hu.exec(e))?Ku(t[1],t[2],t[3],t[4]):(t=Uu.exec(e))?Ku(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=zu.exec(e))?rh(t[1],t[2]/100,t[3]/100,1):(t=Vu.exec(e))?rh(t[1],t[2]/100,t[3]/100,t[4]):Xu.hasOwnProperty(e)?$u(Xu[e]):"transparent"===e?new Ju(NaN,NaN,NaN,0):null}function $u(e){return new Ju(e>>16&255,e>>8&255,255&e,1)}function Ku(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ju(e,t,n,r)}function Qu(e){return e instanceof Du||(e=qu(e)),e?new Ju((e=e.rgb()).r,e.g,e.b,e.opacity):new Ju}function Zu(e,t,n,r){return 1===arguments.length?Qu(e):new Ju(e,t,n,r??1)}function Ju(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function eh(){return"#"+nh(this.r)+nh(this.g)+nh(this.b)}function th(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function nh(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function rh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ah(e,t,n,r)}function ih(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);if(e instanceof Du||(e=qu(e)),!e)return new ah;if(e instanceof ah)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ah(a,s,l,e.opacity)}function oh(e,t,n,r){return 1===arguments.length?ih(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function sh(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Cu(Du,qu,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Yu,formatHex:Yu,formatHsl:function(){return ih(this).formatHsl()},formatRgb:Wu,toString:Wu}),Cu(Ju,Zu,Pu(Du,{brighter:function(e){return e=null==e?Nu:Math.pow(Nu,e),new Ju(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ru:Math.pow(Ru,e),new Ju(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eh,formatHex:eh,formatRgb:th,toString:th})),Cu(ah,oh,Pu(Du,{brighter:function(e){return e=null==e?Nu:Math.pow(Nu,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ru:Math.pow(Ru,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ju(sh(e>=240?e-240:e+120,i,r),sh(e,i,r),sh(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const lh=Math.PI/180,ch=180/Math.PI,uh=.96422,hh=1,ph=.82521,fh=4/29,dh=6/29,mh=3*dh*dh,gh=dh*dh*dh;function yh(e){if(e instanceof bh)return new bh(e.l,e.a,e.b,e.opacity);if(e instanceof Oh)return xh(e);e instanceof Ju||(e=Qu(e));var t,n,r=Sh(e.r),i=Sh(e.g),o=Sh(e.b),a=_h((.2225045*r+.7168786*i+.0606169*o)/hh);return r===i&&i===o?t=n=a:(t=_h((.4360747*r+.3850649*i+.1430804*o)/uh),n=_h((.0139322*r+.0971045*i+.7141733*o)/ph)),new bh(116*a-16,500*(t-a),200*(a-n),e.opacity)}function vh(e,t,n,r){return 1===arguments.length?yh(e):new bh(e,t,n,r??1)}function bh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function _h(e){return e>gh?Math.pow(e,1/3):e/mh+fh}function Th(e){return e>dh?e*e*e:mh*(e-fh)}function Eh(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Sh(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wh(e){if(e instanceof Oh)return new Oh(e.h,e.c,e.l,e.opacity);if(e instanceof bh||(e=yh(e)),0===e.a&&0===e.b)return new Oh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ch;return new Oh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ah(e,t,n,r){return 1===arguments.length?wh(e):new Oh(e,t,n,r??1)}function Oh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function xh(e){if(isNaN(e.h))return new bh(e.l,0,0,e.opacity);var t=e.h*lh;return new bh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Cu(bh,vh,Pu(Du,{brighter:function(e){return new bh(this.l+18*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new bh(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Ju(Eh(3.1338561*(t=uh*Th(t))-1.6168667*(e=hh*Th(e))-.4906146*(n=ph*Th(n))),Eh(-.9787684*t+1.9161415*e+.033454*n),Eh(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Cu(Oh,Ah,Pu(Du,{brighter:function(e){return new Oh(this.h,this.c,this.l+18*(e??1),this.opacity)},darker:function(e){return new Oh(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb:function(){return xh(this).rgb()}}));var kh=-.14861,Ih=1.78277,Ch=-.29227,Ph=-.90649,Dh=1.97294,Rh=Dh*Ph,Nh=Dh*Ih,Mh=Ih*Ch-Ph*kh;function Lh(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof jh)return new jh(e.h,e.s,e.l,e.opacity);e instanceof Ju||(e=Qu(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Mh*r+Rh*t-Nh*n)/(Mh+Rh-Nh),o=r-i,a=(Dh*(n-i)-Ch*o)/Ph,s=Math.sqrt(a*a+o*o)/(Dh*i*(1-i)),l=s?Math.atan2(a,o)*ch-120:NaN;return new jh(l<0?l+360:l,s,i,e.opacity)}(e):new jh(e,t,n,r??1)}function jh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Cu(jh,Lh,Pu(Du,{brighter:function(e){return e=null==e?Nu:Math.pow(Nu,e),new jh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ru:Math.pow(Ru,e),new jh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*lh,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ju(255*(t+n*(kh*r+Ih*i)),255*(t+n*(Ch*r+Ph*i)),255*(t+n*(Dh*r)),this.opacity)}}));const Bh=Object.freeze(Object.defineProperty({__proto__:null,color:qu,cubehelix:Lh,gray:function(e,t){return new bh(e,0,0,t??1)},hcl:Ah,hsl:oh,lab:vh,lch:function(e,t,n,r){return 1===arguments.length?wh(e):new Oh(n,t,e,r??1)},rgb:Zu},Symbol.toStringTag,{value:"Module"})),Fh=e=>()=>e;function Gh(e){return 1==(e=+e)?Hh:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Fh(isNaN(t)?n:t)}}function Hh(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Fh(isNaN(e)?t:e)}const Uh=function e(t){var n=Gh(t);function r(e,t){var r=n((e=Zu(e)).r,(t=Zu(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Hh(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function zh(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function Vh(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Qh(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function Xh(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Yh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wh(e,t){var n,r={},i={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=Qh(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var qh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$h=new RegExp(qh.source,"g");function Kh(e,t){var n,r,i,o=qh.lastIndex=$h.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=qh.exec(e))&&(r=$h.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Yh(n,r)})),o=$h.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Qh(e,t){var n,r=typeof t;return null==t||"boolean"===r?Fh(t):("number"===r?Yh:"string"===r?(n=qu(t))?(t=n,Uh):Kh:t instanceof qu?Uh:t instanceof Date?Xh:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?zh:Array.isArray(t)?Vh:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Wh:Yh)(e,t)}function Zh(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Jh,ep=180/Math.PI,tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function np(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ep,skewX:Math.atan(l)*ep,scaleX:a,scaleY:s}}function rp(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Yh(e,i)},{i:l-2,x:Yh(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Yh(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Yh(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Yh(e,n)},{i:s-2,x:Yh(t,r)})}else(1!==n||1!==r)&&o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var ip=rp((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tp:np(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),op=rp((function(e){return null!=e&&(Jh||(Jh=document.createElementNS("http://www.w3.org/2000/svg","g")),Jh.setAttribute("transform",e),e=Jh.transform.baseVal.consolidate())?np((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):tp}),", ",")",")");function ap(e){return((e=Math.exp(e))+1/e)/2}const sp=function e(t,n,r){function i(e,i){var o,a,s=e[0],l=e[1],c=e[2],u=i[0],h=i[1],p=i[2],f=u-s,d=h-l,m=f*f+d*d;if(m<1e-12)a=Math.log(p/c)/t,o=function(e){return[s+e*f,l+e*d,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(p*p-c*c+r*m)/(2*c*n*g),v=(p*p-c*c-r*m)/(2*p*n*g),b=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(v*v+1)-v);a=(_-b)/t,o=function(e){var r=e*a,i=ap(b),o=c/(n*g)*(i*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+o*f,l+o*d,c*i/ap(t*r+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function lp(e){return+e}var cp=[0,1];function up(e){return e}function hp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function pp(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=hp(i,r),o=n(a,o)):(r=hp(r,i),o=n(o,a)),function(e){return o(r(e))}}function fp(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=hp(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=lc(e,t,1,r)-1;return o[n](i[n](t))}}function dp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mp(){var e,t,n,r,i,o,a=cp,s=cp,l=Qh,c=up;function u(){var e=Math.min(a.length,s.length);return c!==up&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?fp:pp,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),Yh)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,lp),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=Zh,u()},h.clamp=function(e){return arguments.length?(c=!!e||up,u()):c!==up},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function gp(){return mp()(up,up)}function yp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vp(e){return(e=yp(Math.abs(e)))?e[1]:NaN}var bp,_p=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tp(e){if(!(t=_p.exec(e)))throw new Error("invalid format: "+e);var t;return new Ep({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ep(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Sp(e,t){var n=yp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Tp.prototype=Ep.prototype,Ep.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const wp={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sp(100*e,t),r:Sp,s:function(e,t){var n=yp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(bp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+yp(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ap(e){return e}var Op,xp,kp,Ip=Array.prototype.map,Cp=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Pp(e){var t=void 0===e.grouping||void 0===e.thousands?Ap:function(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}(Ip.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Ap:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ip.call(e.numerals,String)),a=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=Tp(e)).fill,u=e.align,h=e.sign,p=e.symbol,f=e.zero,d=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):wp[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===c&&"="===u)&&(f=!0,c="0",u="=");var b="$"===p?n:"#"===p&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===p?r:/[%p]/.test(v)?a:"",T=wp[v],E=/[defgprs%]/.test(v);function S(e){var n,r,a,p=b,S=_;if("c"===v)S=T(e)+S,e="";else{var w=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:T(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),w&&0==+e&&"+"!==h&&(w=!1),p=(w?"("===h?h:s:"-"===h||"("===h?"":h)+p,S=("s"===v?Cp[8+bp/3]:"")+S+(w&&"("===h?")":""),E)for(n=-1,r=e.length;++n<r;)if(48>(a=e.charCodeAt(n))||a>57){S=(46===a?i+e.slice(n+1):e.slice(n))+S,e=e.slice(0,n);break}}m&&!f&&(e=t(e,1/0));var A=p.length+e.length+S.length,O=A<d?new Array(d-A+1).join(c):"";switch(m&&f&&(e=t(O+e,O.length?d-S.length:1/0),O=""),u){case"<":e=p+e+S+O;break;case"=":e=p+O+e+S;break;case"^":e=O.slice(0,A=O.length>>1)+p+e+S+O.slice(A);break;default:e=O+p+e+S}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:c,formatPrefix:function(e,t){var n=c(((e=Tp(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(vp(t)/3))),i=Math.pow(10,-r),o=Cp[8+r/3];return function(e){return n(i*e)+o}}}}function Dp(e){return Op=Pp(e),xp=Op.format,kp=Op.formatPrefix,Op}function Rp(e){return Math.max(0,-vp(Math.abs(e)))}function Np(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vp(t)/3)))-vp(Math.abs(e)))}function Mp(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vp(t)-vp(e))+1}Dp({thousands:",",grouping:[3],currency:["$",""]});const Lp=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:Ep,get format(){return xp},formatDefaultLocale:Dp,formatLocale:Pp,get formatPrefix(){return kp},formatSpecifier:Tp,precisionFixed:Rp,precisionPrefix:Np,precisionRound:Mp},Symbol.toStringTag,{value:"Module"}));function jp(e,t,n,r){var i,o=Zc(e,t,n);switch((r=Tp(r??",f")).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null==r.precision&&!isNaN(i=Np(o,a))&&(r.precision=i),kp(r,a);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(i=Mp(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(i=Rp(o))&&(r.precision=i-2*("%"===r.type))}return xp(r)}function Bp(e){var t=e.domain;return e.ticks=function(e){var n=t();return Kc(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var r=t();return jp(r[0],r[r.length-1],e??10,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=Qc(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function Fp(){var e=gp();return e.copy=function(){return dp(e,Fp())},wu.apply(e,arguments),Bp(e)}function Gp(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Hp(e){return Math.log(e)}function Up(e){return Math.exp(e)}function zp(e){return-Math.log(-e)}function Vp(e){return-Math.exp(-e)}function Xp(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Yp(e){return(t,n)=>-e(-t,n)}function Wp(e){const t=e(Hp,Up),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?Xp:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=Yp(r),i=Yp(i),e(zp,Vp)):e(Hp,Up),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=r(a),p=r(s);const f=null==e?10:+e;let d=[];if(!(o%1)&&p-h<f){if(h=Math.floor(h),p=Math.ceil(p),a>0){for(;h<=p;++h)for(c=1;c<o;++c)if(u=h<0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;d.push(u)}}else for(;h<=p;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;d.push(u)}2*d.length<f&&(d=Kc(a,s,f))}else d=Kc(h,p,Math.min(p-h,f)).map(i);return l?d.reverse():d},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(!(o%1)&&null==(n=Tp(n)).precision&&(n.trim=!0),n=xp(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(Gp(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function qp(){const e=Wp(mp()).domain([1,10]);return e.copy=()=>dp(e,qp()).base(e.base()),wu.apply(e,arguments),e}function $p(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Kp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Qp(e){var t=1,n=e($p(t),Kp(t));return n.constant=function(n){return arguments.length?e($p(t=+n),Kp(t)):t},Bp(n)}function Zp(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Jp(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ef(e){return e<0?-e*e:e*e}function tf(e){var t=e(up,up),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(up,up):.5===n?e(Jp,ef):e(Zp(n),Zp(1/n)):n},Bp(t)}function nf(){var e=tf(mp());return e.copy=function(){return dp(e,nf()).exponent(e.exponent())},wu.apply(e,arguments),e}function rf(e){return Math.sign(e)*e*e}function of(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=su(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[lc(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null!=n&&!isNaN(n=+n)&&t.push(n);return t.sort(tc),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return of().domain(t).range(n).unknown(e)},wu.apply(o,arguments)}const af=new Date,sf=new Date;function lf(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>lf((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(af.setTime(+t),sf.setTime(+r),e(af),e(sf),Math.floor(n(af,sf))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const cf=lf((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));cf.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?lf((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):cf:null),cf.range;const uf=1e3,hf=6e4,pf=60*hf,ff=24*pf,df=7*ff,mf=30*ff,gf=365*ff,yf=lf((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*uf)}),((e,t)=>(t-e)/uf),(e=>e.getUTCSeconds()));yf.range;const vf=lf((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uf)}),((e,t)=>{e.setTime(+e+t*hf)}),((e,t)=>(t-e)/hf),(e=>e.getMinutes()));vf.range;const bf=lf((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*hf)}),((e,t)=>(t-e)/hf),(e=>e.getUTCMinutes()));bf.range;const _f=lf((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uf-e.getMinutes()*hf)}),((e,t)=>{e.setTime(+e+t*pf)}),((e,t)=>(t-e)/pf),(e=>e.getHours()));_f.range;const Tf=lf((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*pf)}),((e,t)=>(t-e)/pf),(e=>e.getUTCHours()));Tf.range;const Ef=lf((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hf)/ff),(e=>e.getDate()-1));Ef.range;const Sf=lf((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/ff),(e=>e.getUTCDate()-1));Sf.range;const wf=lf((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/ff),(e=>Math.floor(e/ff)));function Af(e){return lf((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hf)/df))}wf.range;const Of=Af(0),xf=Af(1),kf=Af(2),If=Af(3),Cf=Af(4),Pf=Af(5),Df=Af(6);function Rf(e){return lf((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/df))}Of.range,xf.range,kf.range,If.range,Cf.range,Pf.range,Df.range;const Nf=Rf(0),Mf=Rf(1),Lf=Rf(2),jf=Rf(3),Bf=Rf(4),Ff=Rf(5),Gf=Rf(6);Nf.range,Mf.range,Lf.range,jf.range,Bf.range,Ff.range,Gf.range;const Hf=lf((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));Hf.range;const Uf=lf((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));Uf.range;const zf=lf((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));zf.every=e=>isFinite(e=Math.floor(e))&&e>0?lf((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,zf.range;const Vf=lf((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function Xf(e,t,n,r,i,o){const a=[[yf,1,uf],[yf,5,5e3],[yf,15,15e3],[yf,30,3e4],[o,1,hf],[o,5,5*hf],[o,15,15*hf],[o,30,30*hf],[i,1,pf],[i,3,3*pf],[i,6,6*pf],[i,12,12*pf],[r,1,ff],[r,2,2*ff],[n,1,df],[t,1,mf],[t,3,3*mf],[e,1,gf]];function s(t,n,r){const i=Math.abs(n-t)/r,o=nc((e=>{let[,,t]=e;return t})).right(a,i);if(o===a.length)return e.every(Zc(t/gf,n/gf,r));if(0===o)return cf.every(Math.max(Zc(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}Vf.every=e=>isFinite(e=Math.floor(e))&&e>0?lf((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,Vf.range;const[Yf,Wf]=Xf(Vf,Uf,Nf,wf,Tf,bf),[qf,$f]=Xf(zf,Hf,Of,Ef,_f,vf);function Kf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qf(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Jf,ed,td,nd={"-":"",_:" ",0:"0"},rd=/^\s*\d+/,id=/^%/,od=/[\\^$*+?|[\]().{}]/g;function ad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function sd(e){return e.replace(od,"\\$&")}function ld(e){return new RegExp("^(?:"+e.map(sd).join("|")+")","i")}function cd(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function ud(e,t,n){var r=rd.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hd(e,t,n){var r=rd.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function fd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function dd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function md(e,t,n){var r=rd.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yd(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vd(e,t,n){var r=rd.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function bd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _d(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Td(e,t,n){var r=rd.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ed(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Sd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function wd(e,t,n){var r=rd.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ad(e,t,n){var r=rd.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Od(e,t,n){var r=rd.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xd(e,t,n){var r=id.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kd(e,t,n){var r=rd.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Id(e,t,n){var r=rd.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Cd(e,t){return ad(e.getDate(),t,2)}function Pd(e,t){return ad(e.getHours(),t,2)}function Dd(e,t){return ad(e.getHours()%12||12,t,2)}function Rd(e,t){return ad(1+Ef.count(zf(e),e),t,3)}function Nd(e,t){return ad(e.getMilliseconds(),t,3)}function Md(e,t){return Nd(e,t)+"000"}function Ld(e,t){return ad(e.getMonth()+1,t,2)}function jd(e,t){return ad(e.getMinutes(),t,2)}function Bd(e,t){return ad(e.getSeconds(),t,2)}function Fd(e){var t=e.getDay();return 0===t?7:t}function Gd(e,t){return ad(Of.count(zf(e)-1,e),t,2)}function Hd(e){var t=e.getDay();return t>=4||0===t?Cf(e):Cf.ceil(e)}function Ud(e,t){return e=Hd(e),ad(Cf.count(zf(e),e)+(4===zf(e).getDay()),t,2)}function zd(e){return e.getDay()}function Vd(e,t){return ad(xf.count(zf(e)-1,e),t,2)}function Xd(e,t){return ad(e.getFullYear()%100,t,2)}function Yd(e,t){return ad((e=Hd(e)).getFullYear()%100,t,2)}function Wd(e,t){return ad(e.getFullYear()%1e4,t,4)}function qd(e,t){var n=e.getDay();return ad((e=n>=4||0===n?Cf(e):Cf.ceil(e)).getFullYear()%1e4,t,4)}function $d(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ad(t/60|0,"0",2)+ad(t%60,"0",2)}function Kd(e,t){return ad(e.getUTCDate(),t,2)}function Qd(e,t){return ad(e.getUTCHours(),t,2)}function Zd(e,t){return ad(e.getUTCHours()%12||12,t,2)}function Jd(e,t){return ad(1+Sf.count(Vf(e),e),t,3)}function em(e,t){return ad(e.getUTCMilliseconds(),t,3)}function tm(e,t){return em(e,t)+"000"}function nm(e,t){return ad(e.getUTCMonth()+1,t,2)}function rm(e,t){return ad(e.getUTCMinutes(),t,2)}function im(e,t){return ad(e.getUTCSeconds(),t,2)}function om(e){var t=e.getUTCDay();return 0===t?7:t}function am(e,t){return ad(Nf.count(Vf(e)-1,e),t,2)}function sm(e){var t=e.getUTCDay();return t>=4||0===t?Bf(e):Bf.ceil(e)}function lm(e,t){return e=sm(e),ad(Bf.count(Vf(e),e)+(4===Vf(e).getUTCDay()),t,2)}function cm(e){return e.getUTCDay()}function um(e,t){return ad(Mf.count(Vf(e)-1,e),t,2)}function hm(e,t){return ad(e.getUTCFullYear()%100,t,2)}function pm(e,t){return ad((e=sm(e)).getUTCFullYear()%100,t,2)}function fm(e,t){return ad(e.getUTCFullYear()%1e4,t,4)}function dm(e,t){var n=e.getUTCDay();return ad((e=n>=4||0===n?Bf(e):Bf.ceil(e)).getUTCFullYear()%1e4,t,4)}function mm(){return"+0000"}function gm(){return"%"}function ym(e){return+e}function vm(e){return Math.floor(+e/1e3)}function bm(e){return new Date(e)}function _m(e){return e instanceof Date?+e:+new Date(+e)}function Tm(e,t,n,r,i,o,a,s,l,c){var u=gp(),h=u.invert,p=u.domain,f=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),_=c("%Y");function T(e){return(l(e)<e?f:s(e)<e?d:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:_)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?p(Array.from(e,_m)):p().map(bm)},u.ticks=function(t){var n=p();return e(n[0],n[n.length-1],t??10)},u.tickFormat=function(e,t){return null==t?T:c(t)},u.nice=function(e){var n=p();return(!e||"function"!=typeof e.range)&&(e=t(n[0],n[n.length-1],e??10)),e?p(Gp(n,e)):u},u.copy=function(){return dp(u,Tm(e,t,n,r,i,o,a,s,l,c))},u}function Em(){var e,t,n,r,i,o=0,a=1,s=up,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(Qh),c.rangeRound=u(Zh),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function Sm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wm(){var e=tf(Em());return e.copy=function(){return Sm(e,wm()).exponent(e.exponent())},Au.apply(e,arguments)}function Am(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=up,p=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(p?Math.max(0,Math.min(1,e)):e))}function d(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=function(e,t){void 0===t&&(t=e,e=Qh);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[s,l,c]},f.clamp=function(e){return arguments.length?(p=!!e,f):p},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=d(Qh),f.rangeRound=d(Zh),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function Om(){var e=tf(Am());return e.copy=function(){return Sm(e,Om()).exponent(e.exponent())},Au.apply(e,arguments)}!function(e){Jf=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=ld(i),u=cd(i),h=ld(o),p=cd(o),f=ld(a),d=cd(a),m=ld(s),g=cd(s),y=ld(l),v=cd(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Cd,e:Cd,f:Md,g:Yd,G:qd,H:Pd,I:Dd,j:Rd,L:Nd,m:Ld,M:jd,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ym,s:vm,S:Bd,u:Fd,U:Gd,V:Ud,w:zd,W:Vd,x:null,X:null,y:Xd,Y:Wd,Z:$d,"%":gm},_={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Kd,e:Kd,f:tm,g:pm,G:dm,H:Qd,I:Zd,j:Jd,L:em,m:nm,M:rm,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ym,s:vm,S:im,u:om,U:am,V:lm,w:cm,W:um,x:null,X:null,y:hm,Y:fm,Z:mm,"%":gm},T={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return w(e,t,n,r)},d:_d,e:_d,f:Od,g:gd,G:md,H:Ed,I:Ed,j:Td,L:Ad,m:bd,M:Sd,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:vd,Q:kd,s:Id,S:wd,u:hd,U:pd,V:fd,w:ud,W:dd,x:function(e,t,r){return w(e,n,t,r)},X:function(e,t,n){return w(e,r,t,n)},y:gd,Y:md,Z:yd,"%":xd};function E(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=nd[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function S(e,t){return function(n){var r,i,o=Zf(1900,void 0,1);if(w(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Qf(Zf(o.y,0,1))).getUTCDay(),r=i>4||0===i?Mf.ceil(r):Mf(r),r=Sf.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Kf(Zf(o.y,0,1))).getDay(),r=i>4||0===i?xf.ceil(r):xf(r),r=Ef.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Qf(Zf(o.y,0,1)).getUTCDay():Kf(Zf(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Qf(o)):Kf(o)}}function w(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=T[i in nd?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=E(n,b),b.X=E(r,b),b.c=E(t,b),_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),{format:function(e){var t=E(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=E(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),ed=Jf.format,Jf.parse,td=Jf.utcFormat,Jf.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const xm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ku,scaleDiverging:function e(){var t=Bp(Am()(up));return t.copy=function(){return Sm(t,e())},Au.apply(t,arguments)},scaleDivergingLog:function e(){var t=Wp(Am()).domain([.1,1,10]);return t.copy=function(){return Sm(t,e()).base(t.base())},Au.apply(t,arguments)},scaleDivergingPow:Om,scaleDivergingSqrt:function(){return Om.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=Qp(Am());return t.copy=function(){return Sm(t,e()).constant(t.constant())},Au.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,lp),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,lp):[0,1],Bp(r)},scaleImplicit:Ou,scaleLinear:Fp,scaleLog:qp,scaleOrdinal:xu,scalePoint:function(){return Iu(ku.apply(null,arguments).paddingInner(1))},scalePow:nf,scaleQuantile:of,scaleQuantize:function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[lc(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length&&(t=e),s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},wu.apply(Bp(s),arguments)},scaleRadial:function e(){var t,n=gp(),r=[0,1],i=!1;function o(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:i?Math.round(r):r}return o.invert=function(e){return n.invert(rf(e))},o.domain=function(e){return arguments.length?(n.domain(e),o):n.domain()},o.range=function(e){return arguments.length?(n.range((r=Array.from(e,lp)).map(rf)),o):r.slice()},o.rangeRound=function(e){return o.range(e).round(!0)},o.round=function(e){return arguments.length?(i=!!e,o):i},o.clamp=function(e){return arguments.length?(n.clamp(e),o):n.clamp()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e(n.domain(),r).round(i).clamp(n.clamp()).unknown(t)},wu.apply(o,arguments),Bp(o)},scaleSequential:function e(){var t=Bp(Em()(up));return t.copy=function(){return Sm(t,e())},Au.apply(t,arguments)},scaleSequentialLog:function e(){var t=Wp(Em()).domain([1,10]);return t.copy=function(){return Sm(t,e()).base(t.base())},Au.apply(t,arguments)},scaleSequentialPow:wm,scaleSequentialQuantile:function e(){var t=[],n=up;function r(e){if(null!=e&&!isNaN(e=+e))return n((lc(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null!=n&&!isNaN(n=+n)&&t.push(n);return t.sort(tc),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map(((e,r)=>n(r/(t.length-1))))},r.quantiles=function(e){return Array.from({length:e+1},((n,r)=>au(t,r/e)))},r.copy=function(){return e(n).domain(t)},Au.apply(r,arguments)},scaleSequentialSqrt:function(){return wm.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=Qp(Em());return t.copy=function(){return Sm(t,e()).constant(t.constant())},Au.apply(t,arguments)},scaleSqrt:function(){return nf.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=Qp(mp());return t.copy=function(){return dp(t,e()).constant(t.constant())},wu.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[lc(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},wu.apply(o,arguments)},scaleTime:function(){return wu.apply(Tm(qf,$f,zf,Hf,Of,Ef,_f,vf,yf,ed).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return wu.apply(Tm(Yf,Wf,Vf,Uf,Nf,Sf,Tf,bf,yf,td).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:jp},Symbol.toStringTag,{value:"Module"}));var km,Im={},Cm=new Uint8Array(16);function Pm(){if(!km&&!(km=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return km(Cm)}const Dm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rm(e){return"string"==typeof e&&Dm.test(e)}for(var Nm=[],Mm=0;Mm<256;++Mm)Nm.push((Mm+256).toString(16).substr(1));function Lm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Nm[e[t+0]]+Nm[e[t+1]]+Nm[e[t+2]]+Nm[e[t+3]]+"-"+Nm[e[t+4]]+Nm[e[t+5]]+"-"+Nm[e[t+6]]+Nm[e[t+7]]+"-"+Nm[e[t+8]]+Nm[e[t+9]]+"-"+Nm[e[t+10]]+Nm[e[t+11]]+Nm[e[t+12]]+Nm[e[t+13]]+Nm[e[t+14]]+Nm[e[t+15]]).toLowerCase();if(!Rm(n))throw TypeError("Stringified UUID is invalid");return n}var jm,Bm,Fm=0,Gm=0;function Hm(e){if(!Rm(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function Um(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=Hm(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return Lm(a)}try{r.name=e}catch{}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function zm(e){return 14+(e+64>>>9<<4)+1}function Vm(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Xm(e,t,n,r,i,o){return Vm(function(e,t){return e<<t|e>>>32-t}(Vm(Vm(t,e),Vm(r,o)),i),n)}function Ym(e,t,n,r,i,o,a){return Xm(t&n|~t&r,e,t,i,o,a)}function Wm(e,t,n,r,i,o,a){return Xm(t&r|n&~r,e,t,i,o,a)}function qm(e,t,n,r,i,o,a){return Xm(t^n^r,e,t,i,o,a)}function $m(e,t,n,r,i,o,a){return Xm(n^(t|~r),e,t,i,o,a)}var Km=Um("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[zm(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,l=r,c=i,u=o;n=Ym(n,r,i,o,e[a],7,-680876936),o=Ym(o,n,r,i,e[a+1],12,-389564586),i=Ym(i,o,n,r,e[a+2],17,606105819),r=Ym(r,i,o,n,e[a+3],22,-1044525330),n=Ym(n,r,i,o,e[a+4],7,-176418897),o=Ym(o,n,r,i,e[a+5],12,1200080426),i=Ym(i,o,n,r,e[a+6],17,-1473231341),r=Ym(r,i,o,n,e[a+7],22,-45705983),n=Ym(n,r,i,o,e[a+8],7,1770035416),o=Ym(o,n,r,i,e[a+9],12,-1958414417),i=Ym(i,o,n,r,e[a+10],17,-42063),r=Ym(r,i,o,n,e[a+11],22,-1990404162),n=Ym(n,r,i,o,e[a+12],7,1804603682),o=Ym(o,n,r,i,e[a+13],12,-40341101),i=Ym(i,o,n,r,e[a+14],17,-1502002290),n=Wm(n,r=Ym(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=Wm(o,n,r,i,e[a+6],9,-1069501632),i=Wm(i,o,n,r,e[a+11],14,643717713),r=Wm(r,i,o,n,e[a],20,-373897302),n=Wm(n,r,i,o,e[a+5],5,-701558691),o=Wm(o,n,r,i,e[a+10],9,38016083),i=Wm(i,o,n,r,e[a+15],14,-660478335),r=Wm(r,i,o,n,e[a+4],20,-405537848),n=Wm(n,r,i,o,e[a+9],5,568446438),o=Wm(o,n,r,i,e[a+14],9,-1019803690),i=Wm(i,o,n,r,e[a+3],14,-187363961),r=Wm(r,i,o,n,e[a+8],20,1163531501),n=Wm(n,r,i,o,e[a+13],5,-1444681467),o=Wm(o,n,r,i,e[a+2],9,-51403784),i=Wm(i,o,n,r,e[a+7],14,1735328473),n=qm(n,r=Wm(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=qm(o,n,r,i,e[a+8],11,-2022574463),i=qm(i,o,n,r,e[a+11],16,1839030562),r=qm(r,i,o,n,e[a+14],23,-35309556),n=qm(n,r,i,o,e[a+1],4,-1530992060),o=qm(o,n,r,i,e[a+4],11,1272893353),i=qm(i,o,n,r,e[a+7],16,-155497632),r=qm(r,i,o,n,e[a+10],23,-1094730640),n=qm(n,r,i,o,e[a+13],4,681279174),o=qm(o,n,r,i,e[a],11,-358537222),i=qm(i,o,n,r,e[a+3],16,-722521979),r=qm(r,i,o,n,e[a+6],23,76029189),n=qm(n,r,i,o,e[a+9],4,-640364487),o=qm(o,n,r,i,e[a+12],11,-421815835),i=qm(i,o,n,r,e[a+15],16,530742520),n=$m(n,r=qm(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=$m(o,n,r,i,e[a+7],10,1126891415),i=$m(i,o,n,r,e[a+14],15,-1416354905),r=$m(r,i,o,n,e[a+5],21,-57434055),n=$m(n,r,i,o,e[a+12],6,1700485571),o=$m(o,n,r,i,e[a+3],10,-1894986606),i=$m(i,o,n,r,e[a+10],15,-1051523),r=$m(r,i,o,n,e[a+1],21,-2054922799),n=$m(n,r,i,o,e[a+8],6,1873313359),o=$m(o,n,r,i,e[a+15],10,-30611744),i=$m(i,o,n,r,e[a+6],15,-1560198380),r=$m(r,i,o,n,e[a+13],21,1309151649),n=$m(n,r,i,o,e[a+4],6,-145523070),o=$m(o,n,r,i,e[a+11],10,-1120210379),i=$m(i,o,n,r,e[a+2],15,718787259),r=$m(r,i,o,n,e[a+9],21,-343485551),n=Vm(n,s),r=Vm(r,l),i=Vm(i,c),o=Vm(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(zm(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));const Qm=Km;function Zm(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function Jm(e,t){return e<<t|e>>>32-t}var eg=Um("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];s[l]=c}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<a;++h){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[h][f];for(var d=16;d<80;++d)p[d]=Jm(p[d-3]^p[d-8]^p[d-14]^p[d-16],1);for(var m=n[0],g=n[1],y=n[2],v=n[3],b=n[4],_=0;_<80;++_){var T=Math.floor(_/20),E=Jm(m,5)+Zm(T,g,y,v)+b+t[T]+p[_]>>>0;b=v,v=y,y=Jm(g,30)>>>0,g=m,m=E}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));const tg=eg;const ng=Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:Hm,stringify:Lm,v1:function(e,t,n){var r=t&&n||0,i=t||new Array(16),o=(e=e||{}).node||jm,a=void 0!==e.clockseq?e.clockseq:Bm;if(null==o||null==a){var s=e.random||(e.rng||Pm)();null==o&&(o=jm=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=Bm=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:Gm+1,u=l-Fm+(c-Gm)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||l>Fm)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Fm=l,Gm=c,Bm=a;var h=(1e4*(268435455&(l+=122192928e5))+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=255&p,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var f=0;f<6;++f)i[r+f]=o[f];return t||Lm(i)},v3:Qm,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||Pm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Lm(r)},v5:tg,validate:Rm,version:function(e){if(!Rm(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"}));var rg=Ps(ng),ig=typeof Buffer<"u"?e=>Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode(...e)),og=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));Im.encode=function(e){var t=rg.parse(e);return ig(t).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},Im.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return rg.stringify(og(t))},Im.v4=function(){var e=rg.v4(null,new Uint8Array(16));return ig(e).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},Im.nice=function(){var e=rg.v4(null,new Uint8Array(16));return e[0]=127&e[0],ig(e).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)};const ag=Cs(Im);var sg={exports:{}},lg={},cg={exports:{}};!function(e,t){var n="__lodash_hash_undefined__",r=1,i=2,o=9007199254740991,a="[object Arguments]",s="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Function]",f="[object GeneratorFunction]",d="[object Map]",m="[object Number]",g="[object Null]",y="[object Object]",v="[object Promise]",b="[object Proxy]",_="[object RegExp]",T="[object Set]",E="[object String]",S="[object Symbol]",w="[object Undefined]",A="[object WeakMap]",O="[object ArrayBuffer]",x="[object DataView]",k=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[a]=C[s]=C[O]=C[c]=C[x]=C[u]=C[h]=C[p]=C[d]=C[m]=C[y]=C[_]=C[T]=C[E]=C[A]=!1;var P="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,D="object"==typeof self&&self&&self.Object===Object&&self,R=P||D||Function("return this")(),N=t&&!t.nodeType&&t,M=N&&e&&!e.nodeType&&e,L=M&&M.exports===N,j=L&&P.process,B=function(){try{return j&&j.binding&&j.binding("util")}catch{}}(),F=B&&B.isTypedArray;function G(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function H(e,t){return e.has(t)}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var V,X,Y=Array.prototype,W=Function.prototype,q=Object.prototype,$=R["__core-js_shared__"],K=W.toString,Q=q.hasOwnProperty,Z=function(){var e=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),J=q.toString,ee=RegExp("^"+K.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=L?R.Buffer:void 0,ne=R.Symbol,re=R.Uint8Array,ie=q.propertyIsEnumerable,oe=Y.splice,ae=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=(V=Object.keys,X=Object,function(e){return V(X(e))}),ue=Be(R,"DataView"),he=Be(R,"Map"),pe=Be(R,"Promise"),fe=Be(R,"Set"),de=Be(R,"WeakMap"),me=Be(Object,"create"),ge=Ue(ue),ye=Ue(he),ve=Ue(pe),be=Ue(fe),_e=Ue(de),Te=ne?ne.prototype:void 0,Ee=Te?Te.valueOf:void 0;function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ae;++t<n;)this.add(e[t])}function xe(e){var t=this.__data__=new we(e);this.size=t.size}function ke(e,t){var n=Xe(e),r=!n&&Ve(e),i=!n&&!r&&Ye(e),o=!n&&!r&&!i&&Qe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)(t||Q.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||He(c,l)))&&s.push(c);return s}function Ie(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function Ce(e){return null==e?void 0===e?w:g:ae&&ae in Object(e)?function(e){var t=Q.call(e,ae),n=e[ae];try{e[ae]=void 0;var r=!0}catch{}var i=J.call(e);return r&&(t?e[ae]=n:delete e[ae]),i}(e):function(e){return J.call(e)}(e)}function Pe(e){return Ke(e)&&Ce(e)==a}function De(e,t,n,o,l){return e===t||(null==e||null==t||!Ke(e)&&!Ke(t)?e!==e&&t!==t:function(e,t,n,o,l,p){var f=Xe(e),g=Xe(t),v=f?s:Ge(e),b=g?s:Ge(t),w=(v=v==a?y:v)==y,A=(b=b==a?y:b)==y,k=v==b;if(k&&Ye(e)){if(!Ye(t))return!1;f=!0,w=!1}if(k&&!w)return p||(p=new xe),f||Qe(e)?Me(e,t,n,o,l,p):function(e,t,n,o,a,s,l){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!s(new re(e),new re(t)));case c:case u:case m:return ze(+e,+t);case h:return e.name==t.name&&e.message==t.message;case _:case E:return e==t+"";case d:var p=U;case T:var f=o&r;if(p||(p=z),e.size!=t.size&&!f)return!1;var g=l.get(e);if(g)return g==t;o|=i,l.set(e,t);var y=Me(p(e),p(t),o,a,s,l);return l.delete(e),y;case S:if(Ee)return Ee.call(e)==Ee.call(t)}return!1}(e,t,v,n,o,l,p);if(!(n&r)){var I=w&&Q.call(e,"__wrapped__"),C=A&&Q.call(t,"__wrapped__");if(I||C){var P=I?e.value():e,D=C?t.value():t;return p||(p=new xe),l(P,D,n,o,p)}}return!!k&&(p||(p=new xe),function(e,t,n,i,o,a){var s=n&r,l=Le(e),c=l.length,u=Le(t),h=u.length;if(c!=h&&!s)return!1;for(var p=c;p--;){var f=l[p];if(!(s?f in t:Q.call(t,f)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var m=!0;a.set(e,t),a.set(t,e);for(var g=s;++p<c;){var y=e[f=l[p]],v=t[f];if(i)var b=s?i(v,y,f,t,e,a):i(y,v,f,e,t,a);if(!(void 0===b?y===v||o(y,v,n,i,a):b)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var _=e.constructor,T=t.constructor;_!=T&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof T&&T instanceof T)&&(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,o,l,p))}(e,t,n,o,De,l))}function Re(e){return!(!$e(e)||function(e){return!!Z&&Z in e}(e))&&(We(e)?ee:k).test(Ue(e))}function Ne(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||q;return e===n}(e))return ce(e);var t=[];for(var n in Object(e))Q.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Me(e,t,n,o,a,s){var l=n&r,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var p=-1,f=!0,d=n&i?new Oe:void 0;for(s.set(e,t),s.set(t,e);++p<c;){var m=e[p],g=t[p];if(o)var y=l?o(g,m,p,t,e,s):o(m,g,p,e,t,s);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!G(t,(function(e,t){if(!H(d,t)&&(m===e||a(m,e,n,o,s)))return d.push(t)}))){f=!1;break}}else if(m!==g&&!a(m,g,n,o,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Le(e){return function(e,t,n){var r=t(e);return Xe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ze,Fe)}function je(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Be(e,t){var n=function(e,t){return e?.[t]}(e,t);return Re(n)?n:void 0}Se.prototype.clear=function(){this.__data__=me?me(null):{},this.size=0},Se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Se.prototype.get=function(e){var t=this.__data__;if(me){var r=t[e];return r===n?void 0:r}return Q.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return me?void 0!==t[e]:Q.call(t,e)},Se.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=me&&void 0===t?n:t,this},we.prototype.clear=function(){this.__data__=[],this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=Ie(t,e);return!(n<0)&&(n==t.length-1?t.pop():oe.call(t,n,1),--this.size,!0)},we.prototype.get=function(e){var t=this.__data__,n=Ie(t,e);return n<0?void 0:t[n][1]},we.prototype.has=function(e){return Ie(this.__data__,e)>-1},we.prototype.set=function(e,t){var n=this.__data__,r=Ie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Se,map:new(he||we),string:new Se}},Ae.prototype.delete=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t},Ae.prototype.get=function(e){return je(this,e).get(e)},Ae.prototype.has=function(e){return je(this,e).has(e)},Ae.prototype.set=function(e,t){var n=je(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,n),this},Oe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.clear=function(){this.__data__=new we,this.size=0},xe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof we){var r=n.__data__;if(!he||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ae(r)}return n.set(e,t),this.size=n.size,this};var Fe=se?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(se(e),(function(t){return ie.call(e,t)})))}:function(){return[]},Ge=Ce;function He(e,t){return!!(t=t??o)&&("number"==typeof e||I.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){if(null!=e){try{return K.call(e)}catch{}try{return e+""}catch{}}return""}function ze(e,t){return e===t||e!==e&&t!==t}(ue&&Ge(new ue(new ArrayBuffer(1)))!=x||he&&Ge(new he)!=d||pe&&Ge(pe.resolve())!=v||fe&&Ge(new fe)!=T||de&&Ge(new de)!=A)&&(Ge=function(e){var t=Ce(e),n=t==y?e.constructor:void 0,r=n?Ue(n):"";if(r)switch(r){case ge:return x;case ye:return d;case ve:return v;case be:return T;case _e:return A}return t});var Ve=Pe(function(){return arguments}())?Pe:function(e){return Ke(e)&&Q.call(e,"callee")&&!ie.call(e,"callee")},Xe=Array.isArray;var Ye=le||function(){return!1};function We(e){if(!$e(e))return!1;var t=Ce(e);return t==p||t==f||t==l||t==b}function qe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function $e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ke(e){return null!=e&&"object"==typeof e}var Qe=F?function(e){return function(t){return e(t)}}(F):function(e){return Ke(e)&&qe(e.length)&&!!C[Ce(e)]};function Ze(e){return function(e){return null!=e&&qe(e.length)&&!We(e)}(e)?ke(e):Ne(e)}e.exports=function(e,t){return De(e,t)}}(cg,cg.exports);var ug=cg.exports,hg={exports:{}};!function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&e.push(a)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var s in i)t.call(i,s)&&i[s]&&e.push(s)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(hg);var pg=hg.exports,fg={__esModule:!0,noop:void 0},dg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};fg.bottom=vg,fg.cloneLayout=function(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=bg(e[n]);return t},fg.cloneLayoutItem=bg,fg.childrenEqual=function(e,t){return(0,mg.default)(gg.default.Children.map(e,(function(e){return e.key})),gg.default.Children.map(t,(function(e){return e.key})))},fg.collides=_g,fg.compact=Tg,fg.compactItem=wg,fg.correctBounds=Ag,fg.getLayoutItem=Og,fg.getFirstCollision=xg,fg.getAllCollisions=kg,fg.getStatics=Ig,fg.moveElement=Cg,fg.moveElementAwayFromCollision=Pg,fg.perc=function(e){return 100*e+"%"},fg.setTransform=function(e){var t=e.top,n=e.left,r=e.width,i=e.height,o="translate("+n+"px,"+t+"px)";return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:r+"px",height:i+"px",position:"absolute"}},fg.setTopLeft=function(e){var t=e.top,n=e.left,r=e.width,i=e.height;return{top:t+"px",left:n+"px",width:r+"px",height:i+"px",position:"absolute"}},fg.sortLayoutItems=Dg,fg.sortLayoutItemsByRowCol=Rg,fg.sortLayoutItemsByColRow=Ng,fg.synchronizeLayoutWithChildren=function(e,t,n,r){e=e||[];var i=[];return gg.default.Children.forEach(t,(function(t,n){var r=Og(e,String(t.key));if(r)i[n]=bg(r);else{var o=t.props["data-grid"]||t.props._grid;i[n]=bg(o?dg({},o,{i:t.key}):{w:1,h:1,x:0,y:vg(i),i:String(t.key)})}})),i=Tg(i=Ag(i,{cols:n}),r,n)},fg.validateLayout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var r=0,i=e.length;r<i;r++){for(var o=e[r],a=0;a<n.length;a++)if("number"!=typeof o[n[a]])throw new Error("ReactGridLayout: "+t+"["+r+"]."+n[a]+" must be a number!");if(o.i&&"string"!=typeof o.i)throw new Error("ReactGridLayout: "+t+"["+r+"].i must be a string!");if(void 0!==o.static&&"boolean"!=typeof o.static)throw new Error("ReactGridLayout: "+t+"["+r+"].static must be a boolean!")}},fg.autoBindHandlers=function(e,t){t.forEach((function(t){return e[t]=e[t].bind(e)}))};var mg=yg(ug),gg=yg(i);function yg(e){return e&&e.__esModule?e:{default:e}}function vg(e){for(var t=0,n=void 0,r=0,i=e.length;r<i;r++)(n=e[r].y+e[r].h)>t&&(t=n);return t}function bg(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable}}function _g(e,t){return!(e===t||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function Tg(e,t,n){for(var r=Ig(e),i=Dg(e,t),o=Array(e.length),a=0,s=i.length;a<s;a++){var l=bg(i[a]);l.static||(l=wg(r,l,t,n,i),r.push(l)),o[e.indexOf(i[a])]=l,l.moved=!1}return o}var Eg={x:"w",y:"h"};function Sg(e,t,n,r){var i=Eg[r];t[r]+=1;for(var o=e.indexOf(t)+1;o<e.length;o++){var a=e[o];if(!a.static){if(a.y>t.y+t.h)break;_g(t,a)&&Sg(e,a,n+t[i],r)}}t[r]=n}function wg(e,t,n,r,i){var o="horizontal"===n;if("vertical"===n)for(t.y=Math.min(vg(e),t.y);t.y>0&&!xg(e,t);)t.y--;else if(o)for(t.y=Math.min(vg(e),t.y);t.x>0&&!xg(e,t);)t.x--;for(var a=void 0;a=xg(e,t);)o?Sg(i,t,a.x+a.w,"x"):Sg(i,t,a.y+a.h,"y"),o&&t.x+t.w>r&&(t.x=r-t.w,t.y++);return t}function Ag(e,t){for(var n=Ig(e),r=0,i=e.length;r<i;r++){var o=e[r];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;xg(n,o);)o.y++;else n.push(o)}return e}function Og(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function xg(e,t){for(var n=0,r=e.length;n<r;n++)if(_g(e[n],t))return e[n]}function kg(e,t){return e.filter((function(e){return _g(e,t)}))}function Ig(e){return e.filter((function(e){return e.static}))}function Cg(e,t,n,r,i,o,a,s){if(t.static||t.y===r&&t.x===n)return e;t.i,String(n),String(r),t.x,t.y;var l=t.x,c=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;var u=Dg(e,a);("vertical"===a&&"number"==typeof r?c>=r:"horizontal"===a&&"number"==typeof n&&l>=n)&&(u=u.reverse());var h=kg(u,t);if(o&&h.length)return t.i,t.x=l,t.y=c,t.moved=!1,e;for(var p=0,f=h.length;p<f;p++){var d=h[p];t.i,t.x,t.y,d.i,d.x,d.y,!d.moved&&(e=d.static?Pg(e,d,t,i,a):Pg(e,t,d,i,a))}return e}function Pg(e,t,n,r,i,o){var a="horizontal"===i,s="vertical"===i,l=!1;if(r){r=!1;var c={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!xg(e,c))return n.i,Cg(e,n,a?c.x:void 0,s?c.y:void 0,r,l,i)}return Cg(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,l,i)}function Dg(e,t){return"horizontal"===t?Ng(e):Rg(e)}function Rg(e){return[].concat(e).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function Ng(e){return[].concat(e).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}fg.noop=function(){};var Mg={},Lg={exports:{}};!function(e){e.exports=function(e,t){function n(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){return function(){return e}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e};var o=i,a=function(e){};function s(e,t,n,r,i,o,s,l){if(a(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,l],h=0;(c=new Error(t.replace(/%s/g,(function(){return u[h++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}a=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var l=s,c=o,u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,(function(){return n[i++]}));typeof console<"u"&&console.error(o);try{throw new Error(o)}catch{}};c=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];u.apply(void 0,[t].concat(r))}};var h=c,p=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function m(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function g(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}var y=g()?Object.assign:function(e,t){for(var n,r,i=m(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))f.call(n,a)&&(i[a]=n[a]);if(p){r=p(n);for(var s=0;s<r.length;s++)d.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},v="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",b=l,_=h,T=v,E={};function S(e,t,n,r,i){for(var o in e)if(e.hasOwnProperty(o)){var a;try{b("function"==typeof e[o],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",r||"React class",n,o,typeof e[o]),a=e[o](t,o,r,n,null,T)}catch(l){a=l}if(_(!a||a instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof a),a instanceof Error&&!(a.message in E)){E[a.message]=!0;var s=i?i():"";_(!1,"Failed %s type: %s%s",n,a.message,s??"")}}}var w=S,A=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";function i(e){var t=e&&(n&&e[n]||e[r]);if("function"==typeof t)return t}var a="<<anonymous>>",s={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:d(),arrayOf:m,element:g(),instanceOf:b,node:S(),objectOf:T,oneOf:_,oneOfType:E,shape:A,exact:O};function c(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function p(e){var n={},r=0;function i(i,o,s,c,p,f,d){if(c=c||a,f=f||s,d!==v)if(t)l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(typeof console<"u"){var m=c+":"+s;!n[m]&&r<3&&(h(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",f,c),n[m]=!0,r++)}return null==o[s]?i?null===o[s]?new u("The "+p+" `"+f+"` is marked as required in `"+c+"`, but its value is `null`."):new u("The "+p+" `"+f+"` is marked as required in `"+c+"`, but its value is `undefined`."):null:e(o,s,c,p,f)}var o=i.bind(null,!1);return o.isRequired=i.bind(null,!0),o}function f(e){function t(t,n,r,i,o,a){var s=t[n];return I(s)!==e?new u("Invalid "+i+" `"+o+"` of type `"+C(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}return p(t)}function d(){return p(o.thatReturnsNull)}function m(e){function t(t,n,r,i,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a))return new u("Invalid "+i+" `"+o+"` of type `"+I(a)+"` supplied to `"+r+"`, expected an array.");for(var s=0;s<a.length;s++){var l=e(a,s,r,i,o+"["+s+"]",v);if(l instanceof Error)return l}return null}return p(t)}function g(){function t(t,n,r,i,o){var a=t[n];return e(a)?null:new u("Invalid "+i+" `"+o+"` of type `"+I(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return p(t)}function b(e){function t(t,n,r,i,o){if(!(t[n]instanceof e)){var s=e.name||a;return new u("Invalid "+i+" `"+o+"` of type `"+D(t[n])+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null}return p(t)}function _(e){if(!Array.isArray(e))return h(!1,"Invalid argument supplied to oneOf, expected an instance of array."),o.thatReturnsNull;function t(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(c(a,e[s]))return null;return new u("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return p(t)}function T(e){function t(t,n,r,i,o){if("function"!=typeof e)return new u("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[n],s=I(a);if("object"!==s)return new u("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected an object.");for(var l in a)if(a.hasOwnProperty(l)){var c=e(a,l,r,i,o+"."+l,v);if(c instanceof Error)return c}return null}return p(t)}function E(e){if(!Array.isArray(e))return h(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),o.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return h(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",P(n),t),o.thatReturnsNull}function r(t,n,r,i,o){for(var a=0;a<e.length;a++)if(null==(0,e[a])(t,n,r,i,o,v))return null;return new u("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")}return p(r)}function S(){function e(e,t,n,r,i){return x(e[t])?null:new u("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return p(e)}function A(e){function t(t,n,r,i,o){var a=t[n],s=I(a);if("object"!==s)return new u("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var c=e[l];if(c){var h=c(a,l,r,i,o+"."+l,v);if(h)return h}}return null}return p(t)}function O(e){function t(t,n,r,i,o){var a=t[n],s=I(a);if("object"!==s)return new u("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected `object`.");var l=y({},t[n],e);for(var c in l){var h=e[c];if(!h)return new u("Invalid "+i+" `"+o+"` key `"+c+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=h(a,c,r,i,o+"."+c,v);if(p)return p}return null}return p(t)}function x(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(x);if(null===t||e(t))return!0;var n=i(t);if(!n)return!1;var r,o=n.call(t);if(n!==t.entries){for(;!(r=o.next()).done;)if(!x(r.value))return!1}else for(;!(r=o.next()).done;){var a=r.value;if(a&&!x(a[1]))return!1}return!0;default:return!1}}function k(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}function I(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":k(t,e)?"symbol":t}function C(e){if(typeof e>"u"||null===e)return""+e;var t=I(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function P(e){var t=C(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function D(e){return e.constructor&&e.constructor.name?e.constructor.name:a}return u.prototype=Error.prototype,s.checkPropTypes=w,s.PropTypes=s,s},O=n((function(e){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,n=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},r=!0;e.exports=A(n,r)})),x=n((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===o)for(var a in i)t.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}e.exports?e.exports=n:window.classNames=n}()}));function k(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function I(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function C(e){return"number"==typeof e&&!isNaN(e)}function P(e){return parseInt(e,10)}function D(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}var R=["Moz","Webkit","O","ms"];function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if(typeof window>"u"||typeof window.document>"u")return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<R.length;n++)if(M(e,R[n])in t)return R[n];return""}function M(e,t){return t?""+t+L(e):e}function L(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}var j=N(),B=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),G=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},V=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),X="";function Y(e,t){return X||(X=k(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return I(e[t])}))),!!I(e[X])&&e[X](t)}function W(e,t,n){var r=e;do{if(Y(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function q(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function $(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function K(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=P(n.borderTopWidth),t+=P(n.borderBottomWidth)}function Q(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=P(n.borderLeftWidth),t+=P(n.borderRightWidth)}function Z(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=P(n.paddingTop),t-=P(n.paddingBottom)}function J(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=P(n.paddingLeft),t-=P(n.paddingRight)}function ee(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-n.left,y:e.clientY+t.scrollTop-n.top}}function te(e,t){var n=re(e,t,"px");return G({},M("transform",j),n)}function ne(e,t){return re(e,t,"")}function re(e,t,n){var r="translate("+e.x+n+","+e.y+n+")";return t&&(r="translate("+("string"==typeof t.x?t.x:t.x+n)+", "+("string"==typeof t.y?t.y:t.y+n)+")"+r),r}function ie(e,t){return e.targetTouches&&k(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&k(e.changedTouches,(function(e){return t===e.identifier}))}function oe(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function ae(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&ce(e.body,"react-draggable-transparent-selection")}}function se(e){try{e&&e.body&&ue(e.body,"react-draggable-transparent-selection"),e.selection?e.selection.empty():window.getSelection().removeAllRanges()}catch{}}function le(){return H({touchAction:"none"},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function ce(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)"))||(e.className+=" "+t)}function ue(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),"")}function he(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:ve(r);var i=be(e);if("string"==typeof r){var o=i.ownerDocument,a=o.defaultView,s=void 0;if(!((s="parent"===r?i.parentNode:o.querySelector(r))instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a.getComputedStyle(i),c=a.getComputedStyle(s);r={left:-i.offsetLeft+P(c.paddingLeft)+P(l.marginLeft),top:-i.offsetTop+P(c.paddingTop)+P(l.marginTop),right:J(s)-Q(i)-i.offsetLeft+P(c.paddingRight)-P(l.marginRight),bottom:Z(s)-K(i)-i.offsetTop+P(c.paddingBottom)-P(l.marginBottom)}}return C(r.right)&&(t=Math.min(t,r.right)),C(r.bottom)&&(n=Math.min(n,r.bottom)),C(r.left)&&(t=Math.max(t,r.left)),C(r.top)&&(n=Math.max(n,r.top)),[t,n]}function pe(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]}function fe(e){return"both"===e.props.axis||"x"===e.props.axis}function de(e){return"both"===e.props.axis||"y"===e.props.axis}function me(e,t,n){var r="number"==typeof t?ie(e,t):null;if("number"==typeof t&&!r)return null;var i=be(n);return ee(r||e,n.props.offsetParent||i.offsetParent||i.ownerDocument.body)}function ge(e,t,n){var r=e.state,i=!C(r.lastX),o=be(e);return i?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}}function ye(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function ve(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function be(t){var n=e.findDOMNode(t);if(!n)throw new Error("<DraggableCore>: Unmounted during event!");return n}var _e={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Te=_e.mouse,Ee=function(n){function r(){var t,n,i;B(this,r);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=i=z(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(a))),i.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},i.handleDragStart=function(t){if(i.props.onMouseDown(t),!i.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode(i);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(i.props.disabled||!(t.target instanceof r.defaultView.Node)||i.props.handle&&!W(t.target,i.props.handle,n)||i.props.cancel&&W(t.target,i.props.cancel,n))){var o=oe(t);i.setState({touchIdentifier:o});var a=me(t,o,i);if(null!=a){var s=a.x,l=a.y,c=ge(i,s,l);i.props.onStart,!1!==i.props.onStart(t,c)&&(i.props.enableUserSelectHack&&ae(r),i.setState({dragging:!0,lastX:s,lastY:l}),q(r,Te.move,i.handleDrag),q(r,Te.stop,i.handleDragStop))}}},i.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=me(e,i.state.touchIdentifier,i);if(null!=t){var n=t.x,r=t.y;if(Array.isArray(i.props.grid)){var o=n-i.state.lastX,a=r-i.state.lastY,s=pe(i.props.grid,o,a),l=V(s,2);if(o=l[0],a=l[1],!o&&!a)return;n=i.state.lastX+o,r=i.state.lastY+a}var c=ge(i,n,r);if(!1===i.props.onDrag(e,c)){try{i.handleDragStop(new MouseEvent("mouseup"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.handleDragStop(u)}return}i.setState({lastX:n,lastY:r})}},i.handleDragStop=function(t){if(i.state.dragging){var n=me(t,i.state.touchIdentifier,i);if(null!=n){var r=n.x,o=n.y,a=ge(i,r,o),s=e.findDOMNode(i);s&&i.props.enableUserSelectHack&&se(s.ownerDocument),i.setState({dragging:!1,lastX:NaN,lastY:NaN}),i.props.onStop(t,a),s&&($(s.ownerDocument,Te.move,i.handleDrag),$(s.ownerDocument,Te.stop,i.handleDragStop))}}},i.onMouseDown=function(e){return Te=_e.mouse,i.handleDragStart(e)},i.onMouseUp=function(e){return Te=_e.mouse,i.handleDragStop(e)},i.onTouchStart=function(e){return Te=_e.touch,i.handleDragStart(e)},i.onTouchEnd=function(e){return Te=_e.touch,i.handleDragStop(e)},z(i,n)}return U(r,n),F(r,[{key:"componentWillUnmount",value:function(){var t=e.findDOMNode(this);if(t){var n=t.ownerDocument;$(n,_e.mouse.move,this.handleDrag),$(n,_e.touch.move,this.handleDrag),$(n,_e.mouse.stop,this.handleDragStop),$(n,_e.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&se(n)}}},{key:"render",value:function(){return t.cloneElement(t.Children.only(this.props.children),{style:le(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),r}(t.Component);Ee.displayName="DraggableCore",Ee.propTypes={allowAnyClick:O.bool,disabled:O.bool,enableUserSelectHack:O.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:O.arrayOf(O.number),scale:O.number,handle:O.string,cancel:O.string,onStart:O.func,onDrag:O.func,onStop:O.func,onMouseDown:O.func,className:D,style:D,transform:D},Ee.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var Se=function(n){function r(e){B(this,r);var t=z(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.onDragStart=function(e,n){if(!1===t.props.onStart(e,ye(t,n)))return!1;t.setState({dragging:!0,dragged:!0})},t.onDrag=function(e,n){if(!t.state.dragging)return!1;var r=ye(t,n),i={x:r.x,y:r.y};if(t.props.bounds){var o=i.x,a=i.y;i.x+=t.state.slackX,i.y+=t.state.slackY;var s=he(t,i.x,i.y),l=V(s,2),c=l[0],u=l[1];i.x=c,i.y=u,i.slackX=t.state.slackX+(o-i.x),i.slackY=t.state.slackY+(a-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-t.state.x,r.deltaY=i.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(i)},t.onDragStop=function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,ye(t,n)))return!1;var r={dragging:!1,slackX:0,slackY:0};if(t.props.position){var i=t.props.position,o=i.x,a=i.y;r.x=o,r.y=a}t.setState(r)},t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return U(r,n),F(r,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&e.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){e.position&&(!this.props.position||e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,n={},r=null,i=!this.props.position||this.state.dragging,o=this.props.position||this.props.defaultPosition,a={x:fe(this)&&i?this.state.x:o.x,y:de(this)&&i?this.state.y:o.y};this.state.isElementSVG?r=ne(a,this.props.positionOffset):n=te(a,this.props.positionOffset);var s=this.props,l=s.defaultClassName,c=s.defaultClassNameDragging,u=s.defaultClassNameDragged,h=t.Children.only(this.props.children),p=x(h.props.className||"",l,(G(e={},c,this.state.dragging),G(e,u,this.state.dragged),e));return t.createElement(Ee,H({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(h,{className:p,style:H({},h.props.style,n),transform:r}))}}]),r}(t.Component);return Se.displayName="Draggable",Se.propTypes=H({},Ee.propTypes,{axis:O.oneOf(["both","x","y","none"]),bounds:O.oneOfType([O.shape({left:O.number,right:O.number,top:O.number,bottom:O.number}),O.string,O.oneOf([!1])]),defaultClassName:O.string,defaultClassNameDragging:O.string,defaultClassNameDragged:O.string,defaultPosition:O.shape({x:O.number,y:O.number}),positionOffset:O.shape({x:O.oneOfType([O.number,O.string]),y:O.oneOfType([O.number,O.string])}),position:O.shape({x:O.number,y:O.number}),className:D,style:D,transform:D}),Se.defaultProps=H({},Ee.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),Se.default=Se,Se.DraggableCore=Ee,Se}(o,i)}(Lg);var jg=Lg.exports,Bg={exports:{}},Fg={},Gg={exports:{}},Hg={};function Ug(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Ug(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function zg(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Ug(e))&&(r&&(r+=" "),r+=t);return r}const Vg=Ps(Object.freeze(Object.defineProperty({__proto__:null,clsx:zg,default:zg},Symbol.toStringTag,{value:"Module"})));var Xg={},Yg={};Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},Yg.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},Yg.int=function(e){return parseInt(e,10)},Yg.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},Yg.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var Wg={};Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.browserPrefixToKey=Kg,Wg.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},Wg.default=void 0,Wg.getPrefix=$g;const qg=["Moz","Webkit","O","ms"];function $g(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if(typeof window>"u")return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<qg.length;r++)if(Kg(t,qg[r])in n)return qg[r];return""}function Kg(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}Wg.default=$g(),Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.addClassName=ry,Xg.addEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},Xg.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&ry(e.body,"react-draggable-transparent-selection")},Xg.createCSSTransform=function(e,t){const n=ny(e,t,"px");return{[(0,Zg.browserPrefixToKey)("transform",Zg.default)]:n}},Xg.createSVGTransform=function(e,t){return ny(e,t,"")},Xg.getTouch=function(e,t){return e.targetTouches&&(0,Qg.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,Qg.findInArray)(e.changedTouches,(e=>t===e.identifier))},Xg.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},Xg.getTranslation=ny,Xg.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Qg.int)(n.paddingTop),t-=(0,Qg.int)(n.paddingBottom),t},Xg.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Qg.int)(n.paddingLeft),t-=(0,Qg.int)(n.paddingRight),t},Xg.matchesSelector=ty,Xg.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(ty(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},Xg.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:o}},Xg.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Qg.int)(n.borderTopWidth),t+=(0,Qg.int)(n.borderBottomWidth),t},Xg.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Qg.int)(n.borderLeftWidth),t+=(0,Qg.int)(n.borderRightWidth),t},Xg.removeClassName=iy,Xg.removeEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},Xg.removeUserSelectStyles=function(e){if(e)try{if(e.body&&iy(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch{}};var Qg=Yg,Zg=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Jg(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(Wg);function Jg(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Jg=function(e){return e?n:t})(e)}let ey="";function ty(e,t){return ey||(ey=(0,Qg.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,Qg.isFunction)(e[t])}))),!!(0,Qg.isFunction)(e[ey])&&e[ey](t)}function ny(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),r="".concat("string"==typeof t.y?t.y:t.y+n);o="translate(".concat(e,", ").concat(r,")")+o}return o}function ry(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function iy(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var oy={};Object.defineProperty(oy,"__esModule",{value:!0}),oy.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},oy.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},oy.createCoreData=function(e,t,n){const r=!(0,ay.isNum)(e.lastX),i=ly(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},oy.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},oy.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);const i=ly(e);if("string"==typeof r){const{ownerDocument:e}=i,t=e.defaultView;let n;if(n="parent"===r?i.parentNode:e.querySelector(r),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const o=n,a=t.getComputedStyle(i),s=t.getComputedStyle(o);r={left:-i.offsetLeft+(0,ay.int)(s.paddingLeft)+(0,ay.int)(a.marginLeft),top:-i.offsetTop+(0,ay.int)(s.paddingTop)+(0,ay.int)(a.marginTop),right:(0,sy.innerWidth)(o)-(0,sy.outerWidth)(i)-i.offsetLeft+(0,ay.int)(s.paddingRight)-(0,ay.int)(a.marginRight),bottom:(0,sy.innerHeight)(o)-(0,sy.outerHeight)(i)-i.offsetTop+(0,ay.int)(s.paddingBottom)-(0,ay.int)(a.marginBottom)}}return(0,ay.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,ay.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ay.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,ay.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]},oy.getControlPosition=function(e,t,n){const r="number"==typeof t?(0,sy.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;const i=ly(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,sy.offsetXYFromParent)(r||e,o,n.props.scale)},oy.snapToGrid=function(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]};var ay=Yg,sy=Xg;function ly(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var cy={},uy={};function hy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,py(r.key),r)}}function py(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function fy(e,t){return(fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dy(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=gy(e);if(t){var i=gy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return my(e)}(this,n)}}function my(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gy(e){return(gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(uy,"__esModule",{value:!0}),uy.default=function(){},Object.defineProperty(cy,"__esModule",{value:!0}),cy.default=void 0;var yy=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Ay(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),vy=wy(Ms),by=wy(o),_y=Xg,Ty=oy,Ey=Yg,Sy=wy(uy);function wy(e){return e&&e.__esModule?e:{default:e}}function Ay(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ay=function(e){return e?n:t})(e)}function Oy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xy={start:"touchstart",move:"touchmove",stop:"touchend"},ky={start:"mousedown",move:"mousemove",stop:"mouseup"};let Iy=ky,Cy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fy(e,t)}(n,e);var t=dy(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Oy(my(e=t.apply(this,arguments)),"dragging",!1),Oy(my(e),"lastX",NaN),Oy(my(e),"lastY",NaN),Oy(my(e),"touchIdentifier",null),Oy(my(e),"mounted",!1),Oy(my(e),"handleDragStart",(t=>{if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;const n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,_y.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,_y.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))return;"touchstart"===t.type&&t.preventDefault();const i=(0,_y.getTouchIdentifier)(t);e.touchIdentifier=i;const o=(0,Ty.getControlPosition)(t,i,my(e));if(null==o)return;const{x:a,y:s}=o,l=(0,Ty.createCoreData)(my(e),a,s);(0,Sy.default)("DraggableCore: handleDragStart: %j",l),(0,Sy.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,_y.addUserSelectStyles)(r),e.dragging=!0,e.lastX=a,e.lastY=s,(0,_y.addEvent)(r,Iy.move,e.handleDrag),(0,_y.addEvent)(r,Iy.stop,e.handleDragStop))})),Oy(my(e),"handleDrag",(t=>{const n=(0,Ty.getControlPosition)(t,e.touchIdentifier,my(e));if(null==n)return;let{x:r,y:i}=n;if(Array.isArray(e.props.grid)){let t=r-e.lastX,n=i-e.lastY;if([t,n]=(0,Ty.snapToGrid)(e.props.grid,t,n),!t&&!n)return;r=e.lastX+t,i=e.lastY+n}const o=(0,Ty.createCoreData)(my(e),r,i);if((0,Sy.default)("DraggableCore: handleDrag: %j",o),!1!==e.props.onDrag(t,o)&&!1!==e.mounted)e.lastX=r,e.lastY=i;else try{e.handleDragStop(new MouseEvent("mouseup"))}catch{const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(t)}})),Oy(my(e),"handleDragStop",(t=>{if(!e.dragging)return;const n=(0,Ty.getControlPosition)(t,e.touchIdentifier,my(e));if(null==n)return;let{x:r,y:i}=n;if(Array.isArray(e.props.grid)){let t=r-e.lastX||0,n=i-e.lastY||0;[t,n]=(0,Ty.snapToGrid)(e.props.grid,t,n),r=e.lastX+t,i=e.lastY+n}const o=(0,Ty.createCoreData)(my(e),r,i);if(!1===e.props.onStop(t,o)||!1===e.mounted)return!1;const a=e.findDOMNode();a&&e.props.enableUserSelectHack&&(0,_y.removeUserSelectStyles)(a.ownerDocument),(0,Sy.default)("DraggableCore: handleDragStop: %j",o),e.dragging=!1,e.lastX=NaN,e.lastY=NaN,a&&((0,Sy.default)("DraggableCore: Removing handlers"),(0,_y.removeEvent)(a.ownerDocument,Iy.move,e.handleDrag),(0,_y.removeEvent)(a.ownerDocument,Iy.stop,e.handleDragStop))})),Oy(my(e),"onMouseDown",(t=>(Iy=ky,e.handleDragStart(t)))),Oy(my(e),"onMouseUp",(t=>(Iy=ky,e.handleDragStop(t)))),Oy(my(e),"onTouchStart",(t=>(Iy=xy,e.handleDragStart(t)))),Oy(my(e),"onTouchEnd",(t=>(Iy=xy,e.handleDragStop(t)))),e}return function(e,t,n){t&&hy(e.prototype,t),n&&hy(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.mounted=!0;const e=this.findDOMNode();e&&(0,_y.addEvent)(e,xy.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,_y.removeEvent)(t,ky.move,this.handleDrag),(0,_y.removeEvent)(t,xy.move,this.handleDrag),(0,_y.removeEvent)(t,ky.stop,this.handleDragStop),(0,_y.removeEvent)(t,xy.stop,this.handleDragStop),(0,_y.removeEvent)(e,xy.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,_y.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:by.default.findDOMNode(this)}},{key:"render",value:function(){return yy.cloneElement(yy.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(yy.Component);cy.default=Cy,Oy(Cy,"displayName","DraggableCore"),Oy(Cy,"propTypes",{allowAnyClick:vy.default.bool,children:vy.default.node.isRequired,disabled:vy.default.bool,enableUserSelectHack:vy.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:vy.default.arrayOf(vy.default.number),handle:vy.default.string,cancel:vy.default.string,nodeRef:vy.default.object,onStart:vy.default.func,onDrag:vy.default.func,onStop:vy.default.func,onMouseDown:vy.default.func,scale:vy.default.number,className:Ey.dontSetMe,style:Ey.dontSetMe,transform:Ey.dontSetMe}),Oy(Cy,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return g.default}}),e.default=void 0;var c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),u=v(Ms),h=v(o),p=v(Vg),f=Xg,d=oy,m=Yg,g=v(cy),y=v(uy);function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function T(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(i,e);var n=a(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),T(s(t=n.call(this,e)),"onDragStart",((e,n)=>{if((0,y.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,d.createDraggableData)(s(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),T(s(t),"onDrag",((e,n)=>{if(!t.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",n);const r=(0,d.createDraggableData)(s(t),n),i={x:r.x,y:r.y,slackX:0,slackY:0};if(t.props.bounds){const{x:e,y:n}=i;i.x+=t.state.slackX,i.y+=t.state.slackY;const[o,a]=(0,d.getBoundPosition)(s(t),i.x,i.y);i.x=o,i.y=a,i.slackX=t.state.slackX+(e-i.x),i.slackY=t.state.slackY+(n-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-t.state.x,r.deltaY=i.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(i)})),T(s(t),"onDragStop",((e,n)=>{if(!t.state.dragging||!1===t.props.onStop(e,(0,d.createDraggableData)(s(t),n)))return!1;(0,y.default)("Draggable: onDragStop: %j",n);const r={dragging:!1,slackX:0,slackY:0};if(t.props.position){const{x:e,y:n}=t.props.position;r.x=e,r.y=n}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return function(e,n,r){n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(i,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:h.default.findDOMNode(this)}},{key:"render",value:function(){const{axis:e,bounds:t,children:n,defaultPosition:r,defaultClassName:i,defaultClassNameDragging:o,defaultClassNameDragged:a,position:s,positionOffset:l,scale:u,...h}=this.props;let m={},y=null;const v=!s||this.state.dragging,b=s||r,T={x:(0,d.canDragX)(this)&&v?this.state.x:b.x,y:(0,d.canDragY)(this)&&v?this.state.y:b.y};this.state.isElementSVG?y=(0,f.createSVGTransform)(T,l):m=(0,f.createCSSTransform)(T,l);const E=(0,p.default)(n.props.className||"",i,{[o]:this.state.dragging,[a]:this.state.dragged});return c.createElement(g.default,_({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),c.cloneElement(c.Children.only(n),{className:E,style:{...n.props.style,...m},transform:y}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,y.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}}]),i}(c.Component);e.default=E,T(E,"displayName","Draggable"),T(E,"propTypes",{...g.default.propTypes,axis:u.default.oneOf(["both","x","y","none"]),bounds:u.default.oneOfType([u.default.shape({left:u.default.number,right:u.default.number,top:u.default.number,bottom:u.default.number}),u.default.string,u.default.oneOf([!1])]),defaultClassName:u.default.string,defaultClassNameDragging:u.default.string,defaultClassNameDragged:u.default.string,defaultPosition:u.default.shape({x:u.default.number,y:u.default.number}),positionOffset:u.default.shape({x:u.default.oneOfType([u.default.number,u.default.string]),y:u.default.oneOfType([u.default.number,u.default.string])}),position:u.default.shape({x:u.default.number,y:u.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe}),T(E,"defaultProps",{...g.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(Hg);const{default:Py,DraggableCore:Dy}=Hg;Gg.exports=Py,Gg.exports.default=Py,Gg.exports.DraggableCore=Dy;var Ry=Gg.exports,Ny={__esModule:!0,cloneElement:function(e,t){return t.style&&e.props.style&&(t.style=jy(jy({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),My.default.cloneElement(e,t)}},My=function(e){return e&&e.__esModule?e:{default:e}}(i);function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach((function(t){By(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function By(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fy={__esModule:!0,resizableProps:void 0},Gy=function(e){return e&&e.__esModule?e:{default:e}}(Ms);var Hy={axis:Gy.default.oneOf(["both","x","y","none"]),className:Gy.default.string,children:Gy.default.element.isRequired,draggableOpts:Gy.default.shape({allowAnyClick:Gy.default.bool,cancel:Gy.default.string,children:Gy.default.node,disabled:Gy.default.bool,enableUserSelectHack:Gy.default.bool,offsetParent:Gy.default.node,grid:Gy.default.arrayOf(Gy.default.number),handle:Gy.default.string,nodeRef:Gy.default.object,onStart:Gy.default.func,onDrag:Gy.default.func,onStop:Gy.default.func,onMouseDown:Gy.default.func,scale:Gy.default.number}),height:Gy.default.number.isRequired,handle:Gy.default.oneOfType([Gy.default.node,Gy.default.func]),handleSize:Gy.default.arrayOf(Gy.default.number),lockAspectRatio:Gy.default.bool,maxConstraints:Gy.default.arrayOf(Gy.default.number),minConstraints:Gy.default.arrayOf(Gy.default.number),onResizeStop:Gy.default.func,onResizeStart:Gy.default.func,onResize:Gy.default.func,resizeHandles:Gy.default.arrayOf(Gy.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Gy.default.number,width:Gy.default.number.isRequired};Fy.resizableProps=Hy,Fg.__esModule=!0,Fg.default=void 0;var Uy=function(e){return e&&e.__esModule?e:{default:e}}(i),zy=Ry,Vy=Ny,Xy=Fy;function Yy(){return Yy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(this,arguments)}function Wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wy(Object(n),!0).forEach((function(t){Ky(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ky(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Ky($y(t=e.call.apply(e,[this].concat(r))||this),"state",void 0),Ky($y(t),"lastHandleRect",null),Ky($y(t),"slack",null),t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.lockAspectRatio=function(e,t,n){return[e=(t=e/n)*n,t]},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(e,t){var n=[this.props.minConstraints,this.props.maxConstraints],r=n[0],i=n[1];if(!r&&!i)return[e,t];if(this.props.lockAspectRatio)if(t===this.props.height){var o=this.props.width/this.props.height;e=(t=e/o)*o}else{var a=this.props.height/this.props.width;t=(e=t/a)*a}var s=e,l=t,c=this.slack||[0,0],u=c[0],h=c[1];return e+=u,t+=h,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),this.slack=[u+(s-e),h+(l-t)],[e,t]},n.resizeHandler=function(e,t){var n=this;return function(r,i){var o=i.node,a=i.deltaX,s=i.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],h=t[t.length-1],p=o.getBoundingClientRect();if(null!=n.lastHandleRect){if("w"===h)a+=p.left-n.lastHandleRect.left;if("n"===u)s+=p.top-n.lastHandleRect.top}n.lastHandleRect=p,"w"===h&&(a=-a),"n"===u&&(s=-s);var f=n.props.width+(l?a/n.props.transformScale:0),d=n.props.height+(c?s/n.props.transformScale:0),m=n.runConstraints(f,d);f=m[0],d=m[1];var g=f!==n.props.width||d!==n.props.height,y="function"==typeof n.props[e]?n.props[e]:null;y&&!("onResize"===e&&!g)&&("function"==typeof r.persist&&r.persist(),y(r,{node:o,size:{width:f,height:d},handle:t})),"onResizeStop"===e&&n.resetData()}}},n.renderResizeHandle=function(e){var t=this.props.handle;return t?"function"==typeof t?t(e):t:Uy.default.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e})},n.render=function(){var e=this,t=this.props,n=t.children,r=t.className,i=t.draggableOpts;t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart;var o=t.resizeHandles;t.transformScale;var a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(t,["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"]);return(0,Vy.cloneElement)(n,qy(qy({},a),{},{className:(r?r+" ":"")+"react-resizable",children:[].concat(n.props.children,o.map((function(t){return Uy.default.createElement(zy.DraggableCore,Yy({},i,{key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t))})))}))},t}(Uy.default.Component);Fg.default=Qy,Ky(Qy,"propTypes",Xy.resizableProps),Ky(Qy,"defaultProps",{handleSize:[20,20],lockAspectRatio:!1,axis:"both",minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1});var Zy={__esModule:!0,default:void 0},Jy=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=iv();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(i),ev=rv(Ms),tv=rv(Fg),nv=Fy;function rv(e){return e&&e.__esModule?e:{default:e}}function iv(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return iv=function(){return e},e}function ov(){return ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ov.apply(this,arguments)}function av(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?av(Object(n),!0).forEach((function(t){cv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):av(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uv=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cv(lv(t=e.call.apply(e,[this].concat(r))||this),"state",{width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height}),cv(lv(t),"onResize",(function(e,n){var r=n.size;t.props.onResize?(e.persist&&e.persist(),t.setState(r,(function(){return t.props.onResize&&t.props.onResize(e,n)}))):t.setState(r)})),t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},t.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize;e.onResize;var r=e.onResizeStart,i=e.onResizeStop,o=e.draggableOpts,a=e.minConstraints,s=e.maxConstraints,l=e.lockAspectRatio,c=e.axis;e.width,e.height;var u=e.resizeHandles,h=e.style,p=e.transformScale,f=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"]);return Jy.createElement(tv.default,{axis:c,draggableOpts:o,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:l,maxConstraints:s,minConstraints:a,onResizeStart:r,onResize:this.onResize,onResizeStop:i,resizeHandles:u,transformScale:p,width:this.state.width},Jy.createElement("div",ov({},f,{style:sv(sv({},h),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(Jy.Component);Zy.default=uv,cv(uv,"propTypes",sv(sv({},nv.resizableProps),{},{children:ev.default.element})),Bg.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Bg.exports.Resizable=Fg.default,Bg.exports.ResizableBox=Zy.default;var hv=Bg.exports;Mg.__esModule=!0;var pv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fv=bv(i),dv=bv(Ms),mv=jg,gv=hv,yv=fg,vv=bv(pg);function bv(e){return e&&e.__esModule?e:{default:e}}function _v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Tv=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=_v(this,e.call.apply(e,[this].concat(o))),r.state={resizing:null,dragging:null,className:""},_v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.calcColWidth=function(){var e=this.props,t=e.margin,n=e.containerPadding,r=e.containerWidth,i=e.cols;return(r-t[0]*(i-1)-2*n[0])/i},t.prototype.calcPosition=function(e,t,n,r,i){var o=this.props,a=o.margin,s=o.containerPadding,l=o.rowHeight,c=this.calcColWidth(),u={left:Math.round((c+a[0])*e+s[0]),top:Math.round((l+a[1])*t+s[1]),width:n===1/0?n:Math.round(c*n+Math.max(0,n-1)*a[0]),height:r===1/0?r:Math.round(l*r+Math.max(0,r-1)*a[1])};return i&&i.resizing&&(u.width=Math.round(i.resizing.width),u.height=Math.round(i.resizing.height)),i&&i.dragging&&(u.top=Math.round(i.dragging.top),u.left=Math.round(i.dragging.left)),u},t.prototype.calcXY=function(e,t){var n=this.props,r=n.margin,i=n.cols,o=n.rowHeight,a=n.w,s=n.h,l=n.maxRows,c=this.calcColWidth(),u=Math.round((t-r[0])/(c+r[0])),h=Math.round((e-r[1])/(o+r[1]));return{x:u=Math.max(Math.min(u,i-a),0),y:h=Math.max(Math.min(h,l-s),0)}},t.prototype.calcWH=function(e){var t=e.height,n=e.width,r=this.props,i=r.margin,o=r.maxRows,a=r.cols,s=r.rowHeight,l=r.x,c=r.y,u=this.calcColWidth(),h=Math.round((n+i[0])/(u+i[0])),p=Math.round((t+i[1])/(s+i[1]));return{w:h=Math.max(Math.min(h,a-l),0),h:p=Math.max(Math.min(p,o-c),0)}},t.prototype.createStyle=function(e){var t=this.props,n=t.usePercentages,r=t.containerWidth,i=void 0;return t.useCSSTransforms?i=(0,yv.setTransform)(e):(i=(0,yv.setTopLeft)(e),n&&(i.left=(0,yv.perc)(e.left/r),i.width=(0,yv.perc)(e.width/r))),i},t.prototype.mixinDraggable=function(e){return fv.default.createElement(mv.DraggableCore,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:"")},e)},t.prototype.mixinResizable=function(e,t){var n=this.props,r=n.cols,i=n.x,o=n.minW,a=n.minH,s=n.maxW,l=n.maxH,c=this.calcPosition(0,0,r-i,0).width,u=this.calcPosition(0,0,o,a),h=this.calcPosition(0,0,s,l),p=[u.width,u.height],f=[Math.min(h.width,c),Math.min(h.height,1/0)];return fv.default.createElement(gv.Resizable,{width:t.width,height:t.height,minConstraints:p,maxConstraints:f,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize")},e)},t.prototype.onDragHandler=function(e){var t=this;return function(n,r){var i=r.node,o=r.deltaX,a=r.deltaY,s=t.props[e];if(s){var l={top:0,left:0};switch(e){case"onDragStart":var c=i.offsetParent;if(!c)return;var u=c.getBoundingClientRect(),h=i.getBoundingClientRect();l.left=h.left-u.left+c.scrollLeft,l.top=h.top-u.top+c.scrollTop,t.setState({dragging:l});break;case"onDrag":if(!t.state.dragging)throw new Error("onDrag called before onDragStart.");l.left=t.state.dragging.left+o,l.top=t.state.dragging.top+a,t.setState({dragging:l});break;case"onDragStop":if(!t.state.dragging)throw new Error("onDragEnd called before onDragStart.");l.left=t.state.dragging.left,l.top=t.state.dragging.top,t.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+e)}var p=t.calcXY(l.top,l.left),f=p.x,d=p.y;return s.call(t,t.props.i,f,d,{e:n,node:i,newPosition:l})}}},t.prototype.onResizeHandler=function(e){var t=this;return function(n,r){var i=r.node,o=r.size,a=t.props[e];if(a){var s=t.props,l=s.cols,c=s.x,u=s.i,h=s.maxW,p=s.minW,f=s.maxH,d=s.minH,m=t.calcWH(o),g=m.w,y=m.h;g=Math.min(g,l-c),g=Math.max(g,1),g=Math.max(Math.min(g,h),p),y=Math.max(Math.min(y,f),d),t.setState({resizing:"onResizeStop"===e?null:o}),a.call(t,u,g,y,{e:n,node:i,size:o})}}},t.prototype.render=function(){var e=this.props,t=e.x,n=e.y,r=e.w,i=e.h,o=e.isDraggable,a=e.isResizable,s=e.useCSSTransforms,l=this.calcPosition(t,n,r,i,this.state),c=fv.default.Children.only(this.props.children),u=fv.default.cloneElement(c,{className:(0,vv.default)("react-grid-item",c.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":o,"react-draggable-dragging":!!this.state.dragging,cssTransforms:s}),style:pv({},this.props.style,c.props.style,this.createStyle(l))});return a&&(u=this.mixinResizable(u,l)),o&&(u=this.mixinDraggable(u)),u},t}(fv.default.Component);Tv.propTypes={children:dv.default.element,cols:dv.default.number.isRequired,containerWidth:dv.default.number.isRequired,rowHeight:dv.default.number.isRequired,margin:dv.default.array.isRequired,maxRows:dv.default.number.isRequired,containerPadding:dv.default.array.isRequired,x:dv.default.number.isRequired,y:dv.default.number.isRequired,w:dv.default.number.isRequired,h:dv.default.number.isRequired,minW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minWidth not Number"):n>e.w||n>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxWidth not Number"):n<e.w||n<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minHeight not Number"):n>e.h||n>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxHeight not Number"):n<e.h||n<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:dv.default.string.isRequired,onDragStop:dv.default.func,onDragStart:dv.default.func,onDrag:dv.default.func,onResizeStop:dv.default.func,onResizeStart:dv.default.func,onResize:dv.default.func,isDraggable:dv.default.bool.isRequired,isResizable:dv.default.bool.isRequired,static:dv.default.bool,useCSSTransforms:dv.default.bool.isRequired,className:dv.default.string,handle:dv.default.string,cancel:dv.default.string},Tv.defaultProps={className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0},Mg.default=Tv,lg.__esModule=!0;var Ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sv=Iv(i),wv=Iv(Ms),Av=Iv(ug),Ov=Iv(pg),xv=fg,kv=Iv(Mg);function Iv(e){return e&&e.__esModule?e:{default:e}}var Cv=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return Pv.call(i),(0,xv.autoBindHandlers)(i,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"]),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)},t.prototype.componentWillReceiveProps=function(e){var t=void 0;if((0,Av.default)(e.layout,this.props.layout)&&e.compactType===this.props.compactType?(0,xv.childrenEqual)(this.props.children,e.children)||(t=this.state.layout):t=e.layout,t){var n=(0,xv.synchronizeLayoutWithChildren)(t,e.children,e.cols,this.compactType(e)),r=this.state.layout;this.setState({layout:n}),this.onLayoutMaybeChanged(n,r)}},t.prototype.containerHeight=function(){if(this.props.autoSize){var e=(0,xv.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}},t.prototype.compactType=function(e){return e||(e=this.props),!1===e.verticalCompact?null:e.compactType},t.prototype.onDragStart=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.layout,s=(0,xv.getLayoutItem)(a,e);if(s)return this.setState({oldDragItem:(0,xv.cloneLayoutItem)(s),oldLayout:this.state.layout}),this.props.onDragStart(a,s,s,null,i,o)},t.prototype.onDrag=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.oldDragItem,s=this.state.layout,l=this.props.cols,c=(0,xv.getLayoutItem)(s,e);if(c){var u={w:c.w,h:c.h,x:c.x,y:c.y,placeholder:!0,i:e};s=(0,xv.moveElement)(s,c,t,n,!0,this.props.preventCollision,this.compactType(),l),this.props.onDrag(s,a,c,u,i,o),this.setState({layout:(0,xv.compact)(s,this.compactType(),l),activeDrag:u})}},t.prototype.onDragStop=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.oldDragItem,s=this.state.layout,l=this.props,c=l.cols,u=l.preventCollision,h=(0,xv.getLayoutItem)(s,e);if(h){s=(0,xv.moveElement)(s,h,t,n,!0,u,this.compactType(),c),this.props.onDragStop(s,a,h,null,i,o);var p=(0,xv.compact)(s,this.compactType(),c),f=this.state.oldLayout;this.setState({activeDrag:null,layout:p,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,f)}},t.prototype.onLayoutMaybeChanged=function(e,t){t||(t=this.state.layout),(0,Av.default)(t,e)||this.props.onLayoutChange(e)},t.prototype.onResizeStart=function(e,t,n,r){var i=r.e,o=r.node,a=this.state.layout,s=(0,xv.getLayoutItem)(a,e);s&&(this.setState({oldResizeItem:(0,xv.cloneLayoutItem)(s),oldLayout:this.state.layout}),this.props.onResizeStart(a,s,s,null,i,o))},t.prototype.onResize=function(e,t,n,r){var i=r.e,o=r.node,a=this.state,s=a.layout,l=a.oldResizeItem,c=this.props,u=c.cols,h=c.preventCollision,p=(0,xv.getLayoutItem)(s,e);if(p){var f=void 0;if(h){var d=(0,xv.getAllCollisions)(s,Ev({},p,{w:t,h:n})).filter((function(e){return e.i!==p.i}));if(f=d.length>0){var m=1/0,g=1/0;d.forEach((function(e){e.x>p.x&&(m=Math.min(m,e.x)),e.y>p.y&&(g=Math.min(g,e.y))})),Number.isFinite(m)&&(p.w=m-p.x),Number.isFinite(g)&&(p.h=g-p.y)}}f||(p.w=t,p.h=n);var y={w:p.w,h:p.h,x:p.x,y:p.y,static:!0,i:e};this.props.onResize(s,l,p,y,i,o),this.setState({layout:(0,xv.compact)(s,this.compactType(),u),activeDrag:y})}},t.prototype.onResizeStop=function(e,t,n,r){var i=r.e,o=r.node,a=this.state,s=a.layout,l=a.oldResizeItem,c=this.props.cols,u=(0,xv.getLayoutItem)(s,e);this.props.onResizeStop(s,l,u,null,i,o);var h=(0,xv.compact)(s,this.compactType(),c),p=this.state.oldLayout;this.setState({activeDrag:null,layout:h,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(h,p)},t.prototype.placeholder=function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,n=t.width,r=t.cols,i=t.margin,o=t.containerPadding,a=t.rowHeight,s=t.maxRows,l=t.useCSSTransforms;return Sv.default.createElement(kv.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:n,cols:r,margin:i,containerPadding:o||i,maxRows:s,rowHeight:a,isDraggable:!1,isResizable:!1,useCSSTransforms:l},Sv.default.createElement("div",null))},t.prototype.processGridItem=function(e){if(e&&e.key){var t=(0,xv.getLayoutItem)(this.state.layout,String(e.key));if(!t)return null;var n=this.props,r=n.width,i=n.cols,o=n.margin,a=n.containerPadding,s=n.rowHeight,l=n.maxRows,c=n.isDraggable,u=n.isResizable,h=n.useCSSTransforms,p=n.draggableCancel,f=n.draggableHandle,d=this.state.mounted,m=!(t.static||!c||!t.isDraggable&&null!=t.isDraggable),g=!(t.static||!u||!t.isResizable&&null!=t.isResizable);return Sv.default.createElement(kv.default,{containerWidth:r,cols:i,margin:o,containerPadding:a||o,maxRows:l,rowHeight:s,cancel:p,handle:f,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:m,isResizable:g,useCSSTransforms:h&&d,usePercentages:!d,w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minH:t.minH,minW:t.minW,maxH:t.maxH,maxW:t.maxW,static:t.static},e)}},t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.style,i=(0,Ov.default)("react-grid-layout",n),o=Ev({height:this.containerHeight()},r);return Sv.default.createElement("div",{className:i,style:o},Sv.default.Children.map(this.props.children,(function(t){return e.processGridItem(t)})),this.placeholder())},t}(Sv.default.Component);Cv.displayName="ReactGridLayout",Cv.propTypes={className:wv.default.string,style:wv.default.object,width:wv.default.number,autoSize:wv.default.bool,cols:wv.default.number,draggableCancel:wv.default.string,draggableHandle:wv.default.string,verticalCompact:function(e){e.verticalCompact},compactType:wv.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&(0,xv.validateLayout)(t,"layout")},margin:wv.default.arrayOf(wv.default.number),containerPadding:wv.default.arrayOf(wv.default.number),rowHeight:wv.default.number,maxRows:wv.default.number,isDraggable:wv.default.bool,isResizable:wv.default.bool,preventCollision:wv.default.bool,useCSSTransforms:wv.default.bool,onLayoutChange:wv.default.func,onDragStart:wv.default.func,onDrag:wv.default.func,onDragStop:wv.default.func,onResizeStart:wv.default.func,onResize:wv.default.func,onResizeStop:wv.default.func,children:function(e,t){var n=e[t],r={};Sv.default.Children.forEach(n,(function(e){if(r[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');r[e.key]=!0}))}},Cv.defaultProps={autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isDraggable:!0,isResizable:!0,useCSSTransforms:!0,verticalCompact:!0,compactType:"vertical",preventCollision:!1,onLayoutChange:xv.noop,onDragStart:xv.noop,onDrag:xv.noop,onDragStop:xv.noop,onResizeStart:xv.noop,onResize:xv.noop,onResizeStop:xv.noop};var Pv=function(){this.state={activeDrag:null,layout:(0,xv.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null}};lg.default=Cv;var Dv={},Rv={__esModule:!0,getBreakpointFromWidth:function(e,t){for(var n=Mv(e),r=n[0],i=1,o=n.length;i<o;i++){var a=n[i];t>e[a]&&(r=a)}return r},getColsFromBreakpoint:function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},findOrGenerateResponsiveLayout:function(e,t,n,r,i,o){if(e[n])return(0,Nv.cloneLayout)(e[n]);for(var a=e[r],s=Mv(t),l=s.slice(s.indexOf(n)),c=0,u=l.length;c<u;c++){var h=l[c];if(e[h]){a=e[h];break}}return a=(0,Nv.cloneLayout)(a||[]),(0,Nv.compact)((0,Nv.correctBounds)(a,{cols:i}),o,i)}};Rv.sortBreakpoints=Mv;var Nv=fg;function Mv(e){return Object.keys(e).sort((function(t,n){return e[t]-e[n]}))}Dv.__esModule=!0;var Lv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jv=zv(i),Bv=zv(Ms),Fv=zv(ug),Gv=fg,Hv=Rv,Uv=zv(lg);function zv(e){return e&&e.__esModule?e:{default:e}}function Vv(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Xv=function(e){return Object.prototype.toString.call(e)},Yv=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Vv(this,e.call.apply(e,[this].concat(o))),r.state=r.generateInitialState(),r.onLayoutChange=function(e){var t;r.props.onLayoutChange(e,Lv({},r.props.layouts,((t={})[r.state.breakpoint]=e,t)))},Vv(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.generateInitialState=function(){var e=this.props,t=e.width,n=e.breakpoints,r=e.layouts,i=e.cols,o=(0,Hv.getBreakpointFromWidth)(n,t),a=(0,Hv.getColsFromBreakpoint)(o,i),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,Hv.findOrGenerateResponsiveLayout)(r,n,o,o,a,s),breakpoint:o,cols:a}},t.prototype.componentWillReceiveProps=function(e){if(e.width==this.props.width&&e.breakpoint===this.props.breakpoint&&(0,Fv.default)(e.breakpoints,this.props.breakpoints)&&(0,Fv.default)(e.cols,this.props.cols)){if(!(0,Fv.default)(e.layouts,this.props.layouts)){var t=this.state,n=t.breakpoint,r=t.cols,i=(0,Hv.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType);this.setState({layout:i})}}else this.onWidthChange(e)},t.prototype.onWidthChange=function(e){var t=e.breakpoints,n=e.cols,r=e.layouts,i=e.compactType,o=e.breakpoint||(0,Hv.getBreakpointFromWidth)(e.breakpoints,e.width),a=this.state.breakpoint;if(a!==o||this.props.breakpoints!==t||this.props.cols!==n){a in r||(r[a]=(0,Gv.cloneLayout)(this.state.layout));var s=(0,Hv.getColsFromBreakpoint)(o,n),l=(0,Hv.findOrGenerateResponsiveLayout)(r,t,o,a,s,i);l=(0,Gv.synchronizeLayoutWithChildren)(l,e.children,s,i),r[o]=l,this.props.onLayoutChange(l,r),this.props.onBreakpointChange(o,s),this.props.onWidthChange(e.width,e.margin,s,e.containerPadding),this.setState({breakpoint:o,layout:l,cols:s})}},t.prototype.render=function(){var e=this.props;e.breakpoint,e.breakpoints,e.cols,e.layouts,e.onBreakpointChange,e.onLayoutChange,e.onWidthChange;var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["breakpoint","breakpoints","cols","layouts","onBreakpointChange","onLayoutChange","onWidthChange"]);return jv.default.createElement(Uv.default,Lv({},t,{onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))},t}(jv.default.Component);Yv.propTypes={breakpoint:Bv.default.string,breakpoints:Bv.default.object,cols:Bv.default.object,layouts:function(e,t){if("[object Object]"!==Xv(e[t]))throw new Error("Layout property must be an object. Received: "+Xv(e[t]));Object.keys(e[t]).forEach((function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Gv.validateLayout)(e.layouts[t],"layouts."+t)}))},width:Bv.default.number.isRequired,onBreakpointChange:Bv.default.func,onLayoutChange:Bv.default.func,onWidthChange:Bv.default.func},Yv.defaultProps={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:{},onBreakpointChange:Gv.noop,onLayoutChange:Gv.noop,onWidthChange:Gv.noop},Dv.default=Yv;var Wv={__esModule:!0},qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};Wv.default=function(e){var t,n;return n=t=function(t){function n(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=r=Jv(this,t.call.apply(t,[this].concat(o))),r.state={width:1280},r.mounted=!1,r.onWindowResize=function(){if(r.mounted){var e=Qv.default.findDOMNode(r);e instanceof HTMLElement&&r.setState({width:e.offsetWidth})}},Jv(r,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.componentDidMount=function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},n.prototype.componentWillUnmount=function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)},n.prototype.render=function(){var t=this.props,n=t.measureBeforeMount,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["measureBeforeMount"]);return n&&!this.mounted?$v.default.createElement("div",{className:this.props.className,style:this.props.style}):$v.default.createElement(e,qv({},r,this.state))},n}($v.default.Component),t.defaultProps={measureBeforeMount:!1},t.propTypes={measureBeforeMount:Kv.default.bool},n};var $v=Zv(i),Kv=Zv(Ms),Qv=Zv(o);function Zv(e){return e&&e.__esModule?e:{default:e}}function Jv(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}!function(e){e.exports=lg.default,e.exports.utils=fg,e.exports.Responsive=Dv.default,e.exports.Responsive.utils=Rv,e.exports.WidthProvider=Wv.default}(sg);const eb=Cs(sg.exports);var tb={exports:{}};!function(e){typeof window<"u"&&window,e.exports=function(){if(typeof window>"u")return null;var e=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function r(e,t){var n=Object.prototype.toString.call(e),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||typeof jQuery<"u"&&e instanceof jQuery||typeof Elements<"u"&&e instanceof Elements,i=0,o=e.length;if(r)for(;i<o;i++)t(e[i]);else t(e)}function i(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function o(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}var a=function(e,s){var l=0;function c(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(r){for(e=0,t=n.length;e<t;e++)n[e].call(this,r)},this.remove=function(r){var i=[];for(e=0,t=n.length;e<t;e++)n[e]!==r&&i.push(n[e]);n=i},this.length=function(){return n.length}}function u(e,n){if(e){if(e.resizedAttached)return void e.resizedAttached.add(n);e.resizedAttached=new c,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var r={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},a={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(e.resizeSensor,r);var s=document.createElement("div");s.className="resize-sensor-expand",o(s,r);var u=document.createElement("div");o(u,a),s.appendChild(u);var h=document.createElement("div");h.className="resize-sensor-shrink",o(h,r);var p=document.createElement("div");o(p,a),o(p,{width:"200%",height:"200%"}),h.appendChild(p),e.resizeSensor.appendChild(s),e.resizeSensor.appendChild(h),e.appendChild(e.resizeSensor);var f=window.getComputedStyle(e),d=f?f.getPropertyValue("position"):null;"absolute"!==d&&"relative"!==d&&"fixed"!==d&&"sticky"!==d&&(e.style.position="relative");var m=!1,g=0,y=i(e),v=0,b=0,_=!0;l=0;var T=function(){var t=e.offsetWidth,n=e.offsetHeight;u.style.width=t+10+"px",u.style.height=n+10+"px",s.scrollLeft=t+10,s.scrollTop=n+10,h.scrollLeft=t+10,h.scrollTop=n+10},E=function(){if(_){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t((function(){l=0,E()}))));_=!1}T()};e.resizeSensor.resetSensor=E;var S=function(){g=0,m&&(v=y.width,b=y.height,e.resizedAttached&&e.resizedAttached.call(y))},w=function(){y=i(e),(m=y.width!==v||y.height!==b)&&!g&&(g=t(S)),E()},A=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};A(s,"scroll",w),A(h,"scroll",w),l=t((function(){l=0,E()}))}}r(e,(function(e){u(e,s)})),this.detach=function(t){l||(n(l),l=0),a.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(a.reset=function(e){r(e,(function(e){e.resizeSensor.resetSensor()}))},a.detach=function(e,t){r(e,(function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},typeof MutationObserver<"u"){var s=new MutationObserver((function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,r=0;r<n.length;r++)n[r].resizeSensor&&a.reset(n[r])}));document.addEventListener("DOMContentLoaded",(function(e){s.observe(document.body,{childList:!0,subtree:!0})}))}return a}()}(tb);var nb=tb.exports,rb={exports:{}};!function(e){typeof window<"u"&&window,e.exports=function(e){var t=function(){var t,n={},r=[];function i(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function a(e,t){var n=t.split(/\d/),r=n[n.length-1];switch(t=parseFloat(t),r){case"px":default:return t;case"em":return t*i(e);case"rem":return t*i();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,a=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===r?"min":"max"])(o,a)}}function s(e,t){this.element=e;var r,i,s,l,c,u,h,p,f=["min-width","min-height","max-width","max-height"];this.call=function(){for(r in s=o(this.element),u={},n[t])n[t].hasOwnProperty(r)&&(i=n[t][r],l=a(this.element,i.value),c="width"===i.property?s.width:s.height,p=i.mode+"-"+i.property,h="","min"===i.mode&&c>=l&&(h+=i.value),"max"===i.mode&&c<=l&&(h+=i.value),u[p]||(u[p]=""),h&&-1===(" "+u[p]+" ").indexOf(" "+h+" ")&&(u[p]+=" "+h));for(var e in f)f.hasOwnProperty(e)&&(u[f[e]]?this.element.setAttribute(f[e],u[f[e]].substr(1)):this.element.removeAttribute(f[e]))}}function l(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation.call()})))}function c(e,i,o,a){if(typeof n[e]>"u"){n[e]=[];var s=r.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",r.push(e)}n[e].push({mode:i,property:o,value:a})}function u(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),!t&&typeof $$<"u"&&(t=$$),!t&&typeof jQuery<"u"&&(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function h(e){var t=u(e);for(var r in n)if(n.hasOwnProperty(r))for(var i=t(r,e),o=0,a=i.length;o<a;o++)l(i[o],r)}function p(t){var n=[],r=[],i=[],o=0,a=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){n.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),u=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");i.push(u);var h={minWidth:c};r.push(h),c?t.children[l].style.display="none":(o=n.length-1,t.children[l].style.display="block")}function p(){var e,l=!1;for(e in n)n.hasOwnProperty(e)&&r[e].minWidth&&t.offsetWidth>r[e].minWidth&&(l=e);if(l||(l=o),a!==l)if(s[l])n[a].style.display="none",n[l].style.display="block",a=l;else{var c=new Image;c.onload=function(){n[l].src=i[l],n[a].style.display="none",n[l].style.display="block",s[l]=!0,a=l},c.src=i[l]}else n[l].src=i[l]}a=o,t.resizeSensorInstance=new e(t,p),p()}function f(){for(var e=u()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)p(e[t])}var d=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,m=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function g(e){var t,n,r,i;for(e=e.replace(/'/g,'"');null!==(t=d.exec(e));)for(n=t[1]+t[3],r=t[2];null!==(i=m.exec(r));)c(n,i[1],i[2],i[3])}function y(e){var t="";if(e)if("string"==typeof e)(-1!==(e=e.toLowerCase()).indexOf("min-width")||-1!==e.indexOf("max-width"))&&g(e);else for(var n=0,r=e.length;n<r;n++)1===e[n].type?(-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")||-1!==t.indexOf("min-width")||-1!==t.indexOf("max-width"))&&g(t):4===e[n].type?y(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&y(e[n].styleSheet.cssRules)}var v=!1;this.init=function(){var n="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?n="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?n="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(n="oanimationstart"),document.body.addEventListener(n,(function(t){var n=t.target,i=n&&window.getComputedStyle(n,null),o=i&&i.getPropertyValue("animation-name");if(o&&-1!==o.indexOf("element-queries")){n.elementQueriesSensor=new e(n,(function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()}));var a=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");a=parseInt(a.replace("px","")),l(t.target,r[a])}})),v||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),v=!0);for(var i=0,o=document.styleSheets.length;i<o;i++)try{document.styleSheets[i].href&&0===document.styleSheets[i].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[i].href),y(document.styleSheets[i].cssRules||document.styleSheets[i].rules||document.styleSheets[i].cssText)}catch{}f()},this.findElementQueriesElements=function(e){h(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};var n=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))}),10);else window.onload=e};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){n(t.init)},t}(nb)}(rb);var ib={ResizeSensor:nb,ElementQueries:rb.exports};function ob(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+t);return n}function ab(){this.step="    ",this.shift=ob(this.step)}function sb(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function lb(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}ab.prototype.xml=function(e,t){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,l=t?ob(t):this.shift;for(s=0;s<r;s++)n[s].search(/<!/)>-1?(a+=l[o]+n[s],i=!0,(n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1||n[s].search(/!DOCTYPE/)>-1)&&(i=!1)):n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):n[s].search(/<\w/)>-1&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?a=a+=i?n[s]:l[o++]+n[s]:n[s].search(/<\w/)>-1&&n[s].search(/<\//)>-1?a=a+=i?n[s]:l[o]+n[s]:n[s].search(/<\//)>-1?a=a+=i?n[s]:l[--o]+n[s]:n[s].search(/\/>/)>-1?a=a+=i?n[s]:l[o]+n[s]:n[s].search(/<\?/)>-1||n[s].search(/xmlns\:/)>-1||n[s].search(/xmlns\=/)>-1?a+=l[o]+n[s]:a+=n[s];return"\n"==a[0]?a.slice(1):a},ab.prototype.json=function(e,t){t=t||this.step;return typeof JSON>"u"?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},ab.prototype.css=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=t?ob(t):this.shift;for(a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")},ab.prototype.sql=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),r=n.length,i=[],o=0,a=this.step,s=0,l="",c=0,u=t?ob(t):this.shift;for(c=0;c<r;c++)i=c%2?i.concat(n[c]):i.concat(lb(n[c],a));for(r=i.length,c=0;c<r;c++)s=sb(i[c],s),/\s{0,}\s{0,}SELECT\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,",\n"+a+a)),/\s{0,}\s{0,}SET\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,",\n"+a+a)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(i[c])?l+=u[++o]+i[c]:/\'/.exec(i[c])?(s<1&&o&&o--,l+=i[c]):(l+=u[o]+i[c],s<1&&o&&o--);return l=l.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},ab.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},ab.prototype.jsonmin=function(e){return typeof JSON>"u"?e:JSON.stringify(JSON.parse(e),null,0)},ab.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},ab.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};const cb=Cs(new ab);var ub={},hb=Object.prototype.hasOwnProperty;function pb(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function fb(e){try{return encodeURIComponent(e)}catch{return null}}ub.stringify=function(e,t){t=t||"";var n,r,i=[];for(r in"string"!=typeof t&&(t="?"),e)if(hb.call(e,r)){if(!(n=e[r])&&(null===n||undefined===n||isNaN(n))&&(n=""),r=fb(r),n=fb(n),null===r||null===n)continue;i.push(r+"="+n)}return i.length?t+i.join("&"):""},ub.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=pb(t[1]),o=pb(t[2]);null===i||null===o||i in r||(r[i]=o)}return r};var db=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},mb=ub,gb=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,yb=/[\n\r\t]/g,vb=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,bb=/:\d+$/,_b=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Tb=/^[a-zA-Z]:/;function Eb(e){return(e||"").toString().replace(gb,"")}var Sb=[["#","hash"],["?","query"],function(e,t){return Ob(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],wb={hash:1,query:1};function Ab(e){var t,n=(typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{}).location||{},r={},i=typeof(e=e||n);if("blob:"===e.protocol)r=new kb(unescape(e.pathname),{});else if("string"===i)for(t in r=new kb(e,{}),wb)delete r[t];else if("object"===i){for(t in e)t in wb||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=vb.test(e.href))}return r}function Ob(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function xb(e,t){e=(e=Eb(e)).replace(yb,""),t=t||{};var n,r=_b.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],s=0;return o?a?(n=r[2]+r[3]+r[4],s=r[2].length+r[3].length):(n=r[2]+r[4],s=r[2].length):a?(n=r[3]+r[4],s=r[3].length):n=r[4],"file:"===i?s>=2&&(n=n.slice(2)):Ob(i)?n=r[4]:i?o&&(n=n.slice(2)):s>=2&&Ob(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||Ob(i),slashesCount:s,rest:n}}function kb(e,t,n){if(e=(e=Eb(e)).replace(yb,""),!(this instanceof kb))return new kb(e,t,n);var r,i,o,a,s,l,c=Sb.slice(),u=typeof t,h=this,p=0;for("object"!==u&&"string"!==u&&(n=t,t=null),n&&"function"!=typeof n&&(n=mb.parse),r=!(i=xb(e||"",t=Ab(t))).protocol&&!i.slashes,h.slashes=i.slashes||r&&t.slashes,h.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||Tb.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!Ob(h.protocol)))&&(c[3]=[/(.*)/,"pathname"]);p<c.length;p++)"function"!=typeof(a=c[p])?(o=a[0],l=a[1],o!==o?h[l]=e:"string"==typeof o?~(s="@"===o?e.lastIndexOf(o):e.indexOf(o))&&("number"==typeof a[2]?(h[l]=e.slice(0,s),e=e.slice(s+a[2])):(h[l]=e.slice(s),e=e.slice(0,s))):(s=o.exec(e))&&(h[l]=s[1],e=e.slice(0,s.index)),h[l]=h[l]||r&&a[3]&&t[l]||"",a[4]&&(h[l]=h[l].toLowerCase())):e=a(e,h);n&&(h.query=n(h.query)),r&&t.slashes&&"/"!==h.pathname.charAt(0)&&(""!==h.pathname||""!==t.pathname)&&(h.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),("."===i||".."===i)&&n.push(""),n.join("/")}(h.pathname,t.pathname)),"/"!==h.pathname.charAt(0)&&Ob(h.protocol)&&(h.pathname="/"+h.pathname),db(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(~(s=h.auth.indexOf(":"))?(h.username=h.auth.slice(0,s),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(s+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin="file:"!==h.protocol&&Ob(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}kb.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||mb.parse)(t)),r[e]=t;break;case"port":r[e]=t,db(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,bb.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(r.username=t.slice(0,o),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(o+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<Sb.length;a++){var s=Sb[a];s[4]&&(r[s[1]]=r[s[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&Ob(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){(!e||"function"!=typeof e)&&(e=mb.stringify);var t,n=this,r=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(n.protocol&&n.slashes||Ob(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&Ob(n.protocol)&&!r&&"/"!==n.pathname&&(o+="@"),(":"===r[r.length-1]||bb.test(n.hostname)&&!n.port)&&(r+=":"),o+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},kb.extractProtocol=xb,kb.location=Ab,kb.trimLeft=Eb,kb.qs=mb;const Ib=Cs(kb),Cb=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Pb=(e,t)=>t?e.toLowerCase():e,Db=function(e){let{caseInsensitive:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const o=Pb(n,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(r),e.__times__[o].push(+i||1/0),{event:o,handler:r}}},Rb=function(e){let{caseInsensitive:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n,r)=>{"object"==typeof n&&(r=n.handler,n=n.event);const i=Pb(n,t);if(!e[i])return;const o=e[i].indexOf(r);-1===o||o>=e[i].length||(e[i].splice(o,1),e.__times__[i].splice(o,1))}},Nb=(e,t)=>()=>{e.forEach((e=>e(t)))},Mb=function(e){let{isGlobal:t,caseInsensitive:n,async:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Rb(e);return function(o,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=Pb(o,n);if(!e[l])return;const c=[...e[l]];if(c.forEach(((t,n)=>{--e.__times__[l][n]<1&&i(l,t)})),r||s.async?setTimeout(Nb(c,a),0):Nb(c,a)(),t&&!s.isNoGlobalBroadcast)try{Cb.postMessage({event:l,news:a})}catch(u){if(!(u instanceof DOMException))throw u;console.warn(`Could not broadcast '${l}' globally. Payload is not clonable.`)}}},Lb=e=>()=>{Object.keys(e).filter((e=>"_"!==e[0])).forEach((t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]}))},jb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.async||!1,n=e.caseInsensitive||!1,r=e.stack||{__times__:{}};return r.__times__||(r.__times__={}),{publish:Mb(r,{async:t,caseInsensitive:n}),subscribe:Db(r,{caseInsensitive:n}),unsubscribe:Rb(r,{caseInsensitive:n}),clear:Lb(r),stack:r}},Bb={__times__:{}},Fb={publish:Mb(Bb,{isGlobal:!0}),subscribe:Db(Bb),unsubscribe:Rb(Bb),clear:Lb(Bb),stack:Bb};Cb.onmessage=e=>{let{data:{event:t,news:n}}=e;return Fb.publish(t,n,{isNoGlobalBroadcast:!0})};const Gb={"context-menu":"_context-menu_18ock_1","context-menu-dark":"_context-menu-dark_18ock_12","context-menu-icon":"_context-menu-icon_18ock_17","context-menu-item":"_context-menu-item_18ock_27","context-menu-hr":"_context-menu-hr_18ock_38","play-icon":"_play-icon_18ock_45","context-menu-span":"_context-menu-span_18ock_52","context-menu-thumbnail":"_context-menu-thumbnail_18ock_60","context-menu-thumbnail-inline":"_context-menu-thumbnail-inline_18ock_65"};function Hb(e){return i.createElement("div",{"data-menu-item-for":"string"==typeof e.children?e.children:null,className:Gb["context-menu-item"],onClick:t=>e.onClick(t),onMouseEnter:t=>e.onMouseEnter(t),onMouseLeave:t=>e.onMouseLeave(t),role:"button",tabIndex:0},i.createElement("span",{className:Gb["context-menu-span"]},e.children))}Hb.defaultProps={onMouseEnter:()=>{},onMouseLeave:()=>{}},Hb.propTypes={children:Ls.node.isRequired,onClick:Ls.func.isRequired,onMouseEnter:Ls.func,onMouseLeave:Ls.func};var Ub={value:()=>{}};function zb(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Vb(r)}function Vb(e){this._=e}function Xb(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Yb(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ub,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function Wb(e){e.stopImmediatePropagation()}function qb(e){e.preventDefault(),e.stopImmediatePropagation()}function $b(e){var t=e.document.documentElement,n=ql(e).on("dragstart.drag",qb,!0);"onselectstart"in t?n.on("selectstart.drag",qb,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kb(e,t){var n=e.document.documentElement,r=ql(e).on("dragstart.drag",null);t&&(r.on("click.drag",qb,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}Vb.prototype=zb.prototype={constructor:Vb,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Yb(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Yb(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Xb(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vb(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Qb=e=>()=>e;function Zb(e,t){let{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:c,dy:u,dispatch:h}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Jb(e){return!e.ctrlKey&&!e.button}function e_(){return this.parentNode}function t_(e,t){return t??{x:e.x,y:e.y}}function n_(){return navigator.maxTouchPoints||"ontouchstart"in this}function r_(){var e,t,n,r,i=Jb,o=e_,a=t_,s=n_,l={},c=zb("start","drag","end"),u=0,h=0;function p(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&i.call(this,a,s)){var l=b(this,o.call(this,a,s),a,s,"mouse");l&&(ql(a.view).on("mousemove.drag",d,!0).on("mouseup.drag",m,!0),$b(a.view),Wb(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function d(r){if(qb(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function m(e){ql(e.view).on("mousemove.drag mouseup.drag",null),Kb(e.view,n),qb(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(Wb(e),r("start",e,a[n]))}}function y(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(qb(e),n("drag",e,r[t]))}function v(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<o;++t)(n=l[i[t].identifier])&&(Wb(e),n("end",e,i[t]))}function b(e,t,n,r,i,o){var s,h,f,d=c.copy(),m=Jl(o||n,t);if(null!=(f=a.call(e,new Zb("beforestart",{sourceEvent:n,target:p,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:d}),r)))return s=f.x-m[0]||0,h=f.y-m[1]||0,function n(o,a,c){var g,y=m;switch(o){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=Jl(c||a,t),g=u}d.call(o,e,new Zb(o,{sourceEvent:a,subject:f,target:p,identifier:i,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:d}),r)}}return p.filter=function(e){return arguments.length?(i="function"==typeof e?e:Qb(!!e),p):i},p.container=function(e){return arguments.length?(o="function"==typeof e?e:Qb(e),p):o},p.subject=function(e){return arguments.length?(a="function"==typeof e?e:Qb(e),p):a},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Qb(!!e),p):s},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,p):Math.sqrt(h)},p}Zb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const i_=Object.freeze(Object.defineProperty({__proto__:null,drag:r_,dragDisable:$b,dragEnable:Kb},Symbol.toStringTag,{value:"Module"}));var o_,a_,s_=0,l_=0,c_=0,u_=1e3,h_=0,p_=0,f_=0,d_="object"==typeof performance&&performance.now?performance:Date,m_="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function g_(){return p_||(m_(y_),p_=d_.now()+f_)}function y_(){p_=0}function v_(){this._call=this._time=this._next=null}function b_(e,t,n){var r=new v_;return r.restart(e,t,n),r}function __(){p_=(h_=d_.now())+f_,s_=l_=0;try{!function(){g_(),++s_;for(var e,t=o_;t;)(e=p_-t._time)>=0&&t._call.call(null,e),t=t._next;--s_}()}finally{s_=0,function(){for(var e,t,n=o_,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:o_=t);a_=e,E_(r)}(),p_=0}}function T_(){var e=d_.now(),t=e-h_;t>u_&&(f_-=t,h_=e)}function E_(e){s_||(l_&&(l_=clearTimeout(l_)),e-p_>24?(e<1/0&&(l_=setTimeout(__,e-d_.now()-f_)),c_&&(c_=clearInterval(c_))):(c_||(h_=d_.now(),c_=setInterval(T_,u_)),s_=1,m_(__)))}function S_(e,t,n){var r=new v_;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}v_.prototype=b_.prototype={constructor:v_,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?g_():+n)+(null==t?0:+t),!this._next&&a_!==this&&(a_?a_._next=this:o_=this,a_=this),this._call=e,this._time=n,E_()},stop:function(){this._call&&(this._call=null,this._time=1/0,E_())}};var w_=zb("start","end","cancel","interrupt"),A_=[],O_=0,x_=1,k_=2,I_=3,C_=4,P_=5,D_=6;function R_(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=x_,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,p;if(n.state!==x_)return l();for(c in i)if((p=i[c]).name===n.name){if(p.state===I_)return S_(a);p.state===C_?(p.state=D_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=D_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(S_((function(){n.state===I_&&(n.state=C_,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=k_,n.on.call("start",e,e.__data__,n.index,n.group),n.state===k_){for(n.state=I_,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=P_,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===P_&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=D_,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=b_(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:w_,tween:A_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:O_})}function N_(e,t){var n=L_(e,t);if(n.state>O_)throw new Error("too late; already scheduled");return n}function M_(e,t){var n=L_(e,t);if(n.state>I_)throw new Error("too late; already running");return n}function L_(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function j_(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>k_&&n.state<P_,n.state=D_,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function B_(e,t){var n,r;return function(){var i=M_(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function F_(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=M_(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function G_(e,t,n){var r=e._id;return e.each((function(){var e=M_(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return L_(e,r).value[t]}}function H_(e,t){var n;return("number"==typeof t?Yh:t instanceof qu?Uh:(n=qu(t))?(t=n,Uh):Kh)(e,t)}function U_(e){return function(){this.removeAttribute(e)}}function z_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function V_(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function X_(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Y_(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function W_(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function q_(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function $_(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function K_(e,t){return function(){N_(this,e).delay=+t.apply(this,arguments)}}function Q_(e,t){return t=+t,function(){N_(this,e).delay=t}}function Z_(e,t){return function(){M_(this,e).duration=+t.apply(this,arguments)}}function J_(e,t){return t=+t,function(){M_(this,e).duration=t}}var eT=Wl.prototype.constructor;function tT(e){return function(){this.style.removeProperty(e)}}var nT=0;function rT(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function iT(){return++nT}var oT=Wl.prototype;rT.prototype={constructor:rT,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Vs(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,R_(h[p],t,n,p,h,L_(s,n)));return new rT(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ws(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),d=L_(l,n),m=0,g=f.length;m<g;++m)(p=f[m])&&R_(p,t,n,m,f,d);o.push(f),a.push(l)}return new rT(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=qs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new rT(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new rT(a,this._parents,this._name,this._id)},selection:function(){return new eT(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=iT(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=L_(a,t);R_(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new rT(r,this._parents,e,n)},call:oT.call,nodes:oT.nodes,node:oT.node,size:oT.size,empty:oT.empty,each:oT.each,on:function(e,t){var n=this._id;return arguments.length<2?L_(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?N_:M_;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Fs(e),r="transform"===n?op:H_;return this.attrTween(e,"function"==typeof t?(n.local?W_:Y_)(n,r,G_(this,"attr."+e,t)):null==t?(n.local?z_:U_)(n):(n.local?X_:V_)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Fs(e);return this.tween(n,(r.local?q_:$_)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?ip:H_;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=gl(this,e),a=(this.style.removeProperty(e),gl(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,tT(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=gl(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=gl(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,G_(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=M_(this,e),c=l.on,u=null==l.value[a]?o||(o=tT(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=gl(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(G_(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=L_(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?B_:F_)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?K_:Q_)(t,e)):L_(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Z_:J_)(t,e)):L_(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){M_(this,e).ease=t}}(t,e)):L_(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;M_(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=M_(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:oT[Symbol.iterator]};var aT={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function sT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Wl.prototype.interrupt=function(e){return this.each((function(){j_(this,e)}))},Wl.prototype.transition=function(e){var t,n;e instanceof rT?(t=e._id,e=e._name):(t=iT(),(n=aT).time=g_(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&R_(a,e,t,c,s,n||sT(a,t));return new rT(r,this._parents,e,t)};const lT=e=>()=>e;function cT(e,t){let{sourceEvent:n,target:r,selection:i,mode:o,dispatch:a}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function uT(e){e.preventDefault(),e.stopImmediatePropagation()}var hT={name:"drag"},pT={name:"space"},fT={name:"handle"},dT={name:"center"};const{abs:mT,max:gT,min:yT}=Math;function vT(e){return[+e[0],+e[1]]}function bT(e){return[vT(e[0]),vT(e[1])]}var _T={name:"x",handles:["w","e"].map(kT),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},TT={name:"y",handles:["n","s"].map(kT),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ET={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(kT),input:function(e){return null==e?null:bT(e)},output:function(e){return e}},ST={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wT={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},AT={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},OT={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},xT={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function kT(e){return{type:e}}function IT(e){return!e.ctrlKey&&!e.button}function CT(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function PT(){return navigator.maxTouchPoints||"ontouchstart"in this}function DT(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function RT(){return LT(_T)}function NT(){return LT(TT)}function MT(){return LT(ET)}function LT(e){var t,n=CT,r=IT,i=PT,o=!0,a=zb("start","brush","end"),s=6;function l(t){var n=t.property("__brush",m).selectAll(".overlay").data([kT("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ST.overlay).merge(n).each((function(){var e=DT(this).extent;ql(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])})),t.selectAll(".selection").data([kT("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ST.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,(function(e){return e.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(e){return"handle handle--"+e.type})).attr("cursor",(function(e){return ST[e.type]})),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=ql(this),t=DT(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",(function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2})).attr("y",(function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2})).attr("width",(function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s})).attr("height",(function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s}))):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new h(e,t,n):r}function h(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function p(n){if((!t||n.touches)&&r.apply(this,arguments)){var i,a,s,l,h,p,f,d,m,g,y,v=this,b=n.target.__data__.type,_="selection"===(o&&n.metaKey?b="overlay":b)?hT:o&&n.altKey?dT:fT,T=e===TT?null:OT[b],E=e===_T?null:xT[b],S=DT(v),w=S.extent,A=S.selection,O=w[0][0],x=w[0][1],k=w[1][0],I=w[1][1],C=0,P=0,D=T&&E&&o&&n.shiftKey,R=Array.from(n.touches||[n],(e=>{const t=e.identifier;return(e=Jl(e,v)).point0=e.slice(),e.identifier=t,e}));if("overlay"===b){A&&(m=!0);const t=[R[0],R[1]||R[0]];S.selection=A=[[i=e===TT?O:yT(t[0][0],t[1][0]),s=e===_T?x:yT(t[0][1],t[1][1])],[h=e===TT?k:gT(t[0][0],t[1][0]),f=e===_T?I:gT(t[0][1],t[1][1])]],R.length>1&&F()}else i=A[0][0],s=A[0][1],h=A[1][0],f=A[1][1];a=i,l=s,p=h,d=f;var N=ql(v).attr("pointer-events","none"),M=N.selectAll(".overlay").attr("cursor",ST[b]);j_(v);var L=u(v,arguments,!0).beforestart();if(n.touches)L.moved=B,L.ended=G;else{var j=ql(n.view).on("mousemove.brush",B,!0).on("mouseup.brush",G,!0);o&&j.on("keydown.brush",(function(e){switch(e.keyCode){case 16:D=T&&E;break;case 18:_===fT&&(T&&(h=p-C*T,i=a+C*T),E&&(f=d-P*E,s=l+P*E),_=dT,F());break;case 32:(_===fT||_===dT)&&(T<0?h=p-C:T>0&&(i=a-C),E<0?f=d-P:E>0&&(s=l-P),_=pT,M.attr("cursor",ST.selection),F());break;default:return}uT(e)}),!0).on("keyup.brush",(function(e){switch(e.keyCode){case 16:D&&(g=y=D=!1,F());break;case 18:_===dT&&(T<0?h=p:T>0&&(i=a),E<0?f=d:E>0&&(s=l),_=fT,F());break;case 32:_===pT&&(e.altKey?(T&&(h=p-C*T,i=a+C*T),E&&(f=d-P*E,s=l+P*E),_=dT):(T<0?h=p:T>0&&(i=a),E<0?f=d:E>0&&(s=l),_=fT),M.attr("cursor",ST[b]),F());break;default:return}uT(e)}),!0),$b(n.view)}c.call(v),L.start(n,_.name)}function B(e){for(const t of e.changedTouches||[e])for(const e of R)e.identifier===t.identifier&&(e.cur=Jl(t,v));if(D&&!g&&!y&&1===R.length){const e=R[0];mT(e.cur[0]-e[0])>mT(e.cur[1]-e[1])?y=!0:g=!0}for(const t of R)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,uT(e),F(e)}function F(e){const t=R[0],n=t.point0;var r;switch(C=t[0]-n[0],P=t[1]-n[1],_){case pT:case hT:T&&(C=gT(O-i,yT(k-h,C)),a=i+C,p=h+C),E&&(P=gT(x-s,yT(I-f,P)),l=s+P,d=f+P);break;case fT:R[1]?(T&&(a=gT(O,yT(k,R[0][0])),p=gT(O,yT(k,R[1][0])),T=1),E&&(l=gT(x,yT(I,R[0][1])),d=gT(x,yT(I,R[1][1])),E=1)):(T<0?(C=gT(O-i,yT(k-i,C)),a=i+C,p=h):T>0&&(C=gT(O-h,yT(k-h,C)),a=i,p=h+C),E<0?(P=gT(x-s,yT(I-s,P)),l=s+P,d=f):E>0&&(P=gT(x-f,yT(I-f,P)),l=s,d=f+P));break;case dT:T&&(a=gT(O,yT(k,i-C*T)),p=gT(O,yT(k,h+C*T))),E&&(l=gT(x,yT(I,s-P*E)),d=gT(x,yT(I,f+P*E)))}p<a&&(T*=-1,r=i,i=h,h=r,r=a,a=p,p=r,b in wT&&M.attr("cursor",ST[b=wT[b]])),d<l&&(E*=-1,r=s,s=f,f=r,r=l,l=d,d=r,b in AT&&M.attr("cursor",ST[b=AT[b]])),S.selection&&(A=S.selection),g&&(a=A[0][0],p=A[1][0]),y&&(l=A[0][1],d=A[1][1]),(A[0][0]!==a||A[0][1]!==l||A[1][0]!==p||A[1][1]!==d)&&(S.selection=[[a,l],[p,d]],c.call(v),L.brush(e,_.name))}function G(e){if(function(e){e.stopImmediatePropagation()}(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout((function(){t=null}),500)}else Kb(e.view,m),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),M.attr("cursor",ST.overlay),S.selection&&(A=S.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(A)&&(S.selection=null,c.call(v)),L.end(e,_.name)}}function f(e){u(this,arguments).moved(e)}function d(e){u(this,arguments).ended(e)}function m(){var t=this.__brush||{selection:null};return t.extent=bT(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n){t.tween?t.on("start.brush",(function(e){u(this,arguments).beforestart().start(e)})).on("interrupt.brush end.brush",(function(e){u(this,arguments).end(e)})).tween("brush",(function(){var t=this,r=t.__brush,i=u(t,arguments),o=r.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Qh(o,a);function l(e){r.selection=1===e&&null===a?null:s(e),c.call(t),i.brush()}return null!==o&&null!==a?l:l(1)})):t.each((function(){var t=this,r=arguments,i=t.__brush,o=e.input("function"==typeof n?n.apply(t,r):n,i.extent),a=u(t,r).beforestart();j_(t),i.selection=null===o?null:o,c.call(t),a.start().brush().end()}))},l.clear=function(e){l.move(e,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,r){var i=ql(this.that).datum();a.call(t,this.that,new cT(t,{sourceEvent:n,target:l,selection:e.output(this.state.selection),mode:r,dispatch:a}),i)}},l.extent=function(e){return arguments.length?(n="function"==typeof e?e:lT(bT(e)),l):n},l.filter=function(e){return arguments.length?(r="function"==typeof e?e:lT(!!e),l):r},l.touchable=function(e){return arguments.length?(i="function"==typeof e?e:lT(!!e),l):i},l.handleSize=function(e){return arguments.length?(s=+e,l):s},l.keyModifiers=function(e){return arguments.length?(o=!!e,l):o},l.on=function(){var e=a.on.apply(a,arguments);return e===a?l:e},l}const jT=Object.freeze(Object.defineProperty({__proto__:null,brush:MT,brushSelection:function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},brushX:RT,brushY:NT},Symbol.toStringTag,{value:"Module"}));function BT(){return BT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BT.apply(this,arguments)}function FT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GT(e,t){if(e){if("string"==typeof e)return FT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FT(e,t)}}function HT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||GT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UT(e){return(UT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zT(e){var t=function(e,t){if("object"!==UT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==UT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===UT(t)?t:String(t)}function VT(e,t,n){return(t=zT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){VT(e,t,n[t])}))}return e}function YT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zT(r.key),r)}}function qT(e,t,n){return t&&WT(e.prototype,t),n&&WT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KT(e,t){if(t&&("object"===UT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $T(e)}function QT(e){return(QT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZT(e,t){return(ZT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function JT(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZT(e,t)}var eE=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}};const tE=Cs(eE);function nE(e){return function(e){if(Array.isArray(e))return FT(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rE=function(){function e(){YT(this,e),VT(this,"refs",{})}return qT(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(iE)}}]),e}();function iE(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function oE(e,t,n){return(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}function aE(e,t){return Object.keys(e).reduce((function(n,r){return-1===t.indexOf(r)&&(n[r]=e[r]),n}),{})}var sE={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},lE=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function cE(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function uE(e,t){e.style["".concat(lE,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function hE(e,t){e.style["".concat(lE,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function pE(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function fE(e,t,n){return Math.max(e,Math.min(n,t))}function dE(e){return"px"===e.substr(-2)?parseFloat(e):0}function mE(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function gE(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function yE(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function vE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:vE(e.parentNode,t,r)}}function bE(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,o=t,a="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);tE(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),o=parseFloat(t),a=s[1]}return tE(isFinite(i)&&isFinite(o),"lockOffset value should be a finite. Given %s",t),"%"===a&&(i=i*n/100,o=o*r/100),{x:i,y:o}}function _E(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:_E(e.parentNode):null}var TE=27,EE=32,SE=37,wE=38,AE=39,OE=40,xE={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function kE(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return YT(this,n),KT(this,QT(n).apply(this,arguments))}return JT(n,t),qT(n,[{key:"componentDidMount",value:function(){(0,o.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return tE(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return(0,i.createElement)(e,BT({ref:t},this.props))}}]),n}(i.Component),VT(t,"displayName",mE("sortableHandle",e)),n}function IE(e){return null!=e.sortableHandle}var CE=function(){function e(t,n){YT(this,e),this.container=t,this.onScrollCallback=n}return qT(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,o=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},c=10,u=10,h=this.container,p=h.scrollTop,f=h.scrollLeft,d=h.scrollHeight,m=h.scrollWidth,g=0===p,y=d-p-h.clientHeight===0,v=0===f,b=m-f-h.clientWidth===0;n.y>=i.y-a/2&&!y?(s.y=1,l.y=u*Math.abs((i.y-a/2-n.y)/a)):n.x>=i.x-o/2&&!b?(s.x=1,l.x=c*Math.abs((i.x-o/2-n.x)/o)):n.y<=r.y+a/2&&!g?(s.y=-1,l.y=u*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+o/2&&!v&&(s.x=-1,l.x=c*Math.abs((n.x-o/2-r.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(0!==s.x||0!==s.y)&&(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}();var PE={axis:Ls.oneOf(["x","y","xy"]),contentWindow:Ls.any,disableAutoscroll:Ls.bool,distance:Ls.number,getContainer:Ls.func,getHelperDimensions:Ls.func,helperClass:Ls.string,helperContainer:Ls.oneOfType([Ls.func,typeof HTMLElement>"u"?Ls.any:Ls.instanceOf(HTMLElement)]),hideSortableGhost:Ls.bool,keyboardSortingTransitionDuration:Ls.number,lockAxis:Ls.string,lockOffset:Ls.oneOfType([Ls.number,Ls.string,Ls.arrayOf(Ls.oneOfType([Ls.number,Ls.string]))]),lockToContainerEdges:Ls.bool,onSortEnd:Ls.func,onSortMove:Ls.func,onSortOver:Ls.func,onSortStart:Ls.func,pressDelay:Ls.number,pressThreshold:Ls.number,keyCodes:Ls.shape({lift:Ls.arrayOf(Ls.number),drop:Ls.arrayOf(Ls.number),cancel:Ls.arrayOf(Ls.number),up:Ls.arrayOf(Ls.number),down:Ls.arrayOf(Ls.number)}),shouldCancelStart:Ls.func,transitionDuration:Ls.number,updateBeforeSortStart:Ls.func,useDragHandle:Ls.bool,useWindowAsScrollContainer:Ls.bool},DE={lift:[EE],drop:[EE],cancel:[TE],up:[wE,SE],down:[OE,AE]},RE={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:DE,shouldCancelStart:function(e){return!(-1===[xE.Input,xE.Textarea,xE.Select,xE.Option,xE.Button].indexOf(e.target.tagName)&&!pE(e.target,(function(e){return"true"===e.contentEditable})))},transitionDuration:300,useWindowAsScrollContainer:!1},NE=Object.keys(PE);var ME={index:Ls.number.isRequired,collection:Ls.oneOfType([Ls.number,Ls.string]),disabled:Ls.bool},LE=Object.keys(ME);function jE(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return YT(this,n),KT(this,QT(n).apply(this,arguments))}return JT(n,t),qT(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,i=(0,o.findDOMNode)(this);i.sortableInfo={collection:t,disabled:n,index:r,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return tE(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return(0,i.createElement)(e,BT({ref:t},aE(this.props,LE)))}}]),n}(i.Component),VT(t,"displayName",mE("sortableElement",e)),VT(t,"contextTypes",{manager:Ls.object.isRequired}),VT(t,"propTypes",ME),VT(t,"defaultProps",{collection:0}),n}const BE=nc((e=>e.pos)).left,FE=(e,t)=>{if(!t||!t.cumPositions||!t.cumPositions.length)return null;let n=BE(t.cumPositions,e);const r=t.cumPositions[t.cumPositions.length-1].chr,i=t.chromLengths[r];n>0&&(n-=1);let o=Math.floor(e-t.cumPositions[n].pos),a=0;return o<0&&(a=o-1,o=1),n===t.cumPositions.length-1&&o>i&&(a=o-i,o=i),[t.cumPositions[n].chr,o,a,n]},GE=(e,t)=>n=>n%e*t+Math.floor(n/e),HE=e=>e,UE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:HE;return e.map(((e,r)=>e+t[n(r)]))},zE=(e,t)=>{if("http://www.w3.org/2000/svg"===e.namespaceURI){const n=e.getAttribute("class");return!!n&&!!n.match(new RegExp(`(\\s|^)${t}(\\s|$)`))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))},VE=(e,t,n)=>n.chrPositions[e].pos+t,XE=e=>{if(!(e instanceof Event))throw new Error("Event must be an instance of Event");const t=new e.constructor(e.type,e);return t.sourceUid=e.sourceUid,t.forwarded=e.forwarded,t},YE=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.map(((t,n)=>n*(255/(e.length-1)))),r=Fp().domain(n).range(e),i=du(t?255:254,-1,-1).map(r).map((e=>{const t=Zu(e);return[t.r,t.g,t.b,255*t.opacity]}));return i.length<256&&i.push([255,255,255,0]),i},WE="move",qE="select",$E=3e3,KE="locationListenerPrefix",QE="http://higlass.io/api/v1",ZE=["top","left","right","bottom","center","whole","gallery"],JE=Symbol("Light theme"),eS=Symbol("Dark theme"),tS=JE,nS={PIXI:ks},rS={"multitrack-header":"_multitrack-header_1yz7l_1","multitrack-header-focus":"_multitrack-header-focus_1yz7l_2","multitrack-header-squeazed":"_multitrack-header-squeazed_1yz7l_3","multitrack-header-dark":"_multitrack-header-dark_1yz7l_20","multitrack-header-id":"_multitrack-header-id_1yz7l_30","multitrack-header-left":"_multitrack-header-left_1yz7l_39","multitrack-header-grabber":"_multitrack-header-grabber_1yz7l_44","multitrack-header-grabber-squeazed":"_multitrack-header-grabber-squeazed_1yz7l_45","multitrack-header-search":"_multitrack-header-search_1yz7l_80","multitrack-header-nav-list":"_multitrack-header-nav-list_1yz7l_102","multitrack-header-icon":"_multitrack-header-icon_1yz7l_107","multitrack-header-icon-squeazed":"_multitrack-header-icon-squeazed_1yz7l_108","mouse-tool-selection":"_mouse-tool-selection_1yz7l_136"},iS=[{id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},{id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},{id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},{id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},{id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},{id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},{id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},{id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},{id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]},{id:"check_square_o",viewBox:"0 0 1792 1792",paths:["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]},{id:"square_o",viewBox:"0 0 1792 1792",paths:["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]},{id:"file_o",viewBox:"0 0 1792 1792",paths:["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]},{id:"folder_o",viewBox:"0 0 1792 1792",paths:["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]},{id:"folder_open_o",viewBox:"0 0 1792 1792",paths:["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]},{id:"chevron_right",viewBox:"0 0 1792 1792",paths:["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]},{id:"chevron_down",viewBox:"0 0 1792 1792",paths:["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]}],oS=new DOMParser,aS=oS.parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',"text/xml").documentElement,sS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 20 20">\n  <rect x="0" y="3" width="4" height="14" fill="#637993"/>\n  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>\n  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>\n  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>\n  <rect x="14" y="3" width="2" height="14" fill="#000000"/>\n  <rect x="16" y="3" width="4" height="14" fill="#637993"/>\n</svg>\n',"text/xml").documentElement,lS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>line</title>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>\n    </g>\n</svg>\n',"text/xml").documentElement,cS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-3"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-5"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-7"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,uS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-heatmap</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>\n        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>\n        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>\n        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,hS='\n<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>axis-1d</title>\n    <desc>Created with Sketch.</desc>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>\n        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>\n    </g>\n</svg>\n',pS=oS.parseFromString(hS,"text/xml").documentElement,fS=ql(oS.parseFromString(hS,"text/xml").documentElement).style("transform","rotate(90deg)").node(),dS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>gene-annotations</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>\n        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-1"></use>\n        </mask>\n        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>\n        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-3"></use>\n        </mask>\n        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>\n        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">\n            <use xlink:href="#geneAnnotations-path-5"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>\n        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>\n    </g>\n</svg>\n',"text/xml").documentElement,mS='\n<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>1d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>\n    </g>\n</svg>\n',gS=oS.parseFromString(mS,"text/xml").documentElement,yS=ql(oS.parseFromString(mS,"text/xml").documentElement).style("transform","rotate(90deg)").node(),vS=oS.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>arrowhead-domains</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        </mask>\n        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>\n        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>\n    </g>\n</svg>\n',"text/xml").documentElement;function bS(e){let{theStyle:t,onClick:n}=e;return i.createElement("svg",{className:rS[t],viewBox:"0 0 12 13",onClick:n,xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"none",stroke:"#6c6c6c",strokeWidth:"2"},i.createElement("path",{d:"M11.29 11.71l-4-4"}),i.createElement("circle",{cx:"5",cy:"5",r:"4"})))}bS.propTypes={theStyle:Ls.string,onClick:Ls.func};const _S={type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:aS,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},TS={type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:aS,availableOptions:["style","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},ES=[_S,{..._S,type:"osm"},TS,{...TS,type:"mapbox"},{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:fS,availableOptions:["minWidth"],defaultOptions:{minWidth:100}},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:pS,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"simple-svg",datatype:[],local:!1,orientation:"2d",exportable:!0,availableOptions:["minWidth","minHeight"],defaultOptions:{minWidth:100,minHeight:100}},{type:"heatmap",datatype:["matrix"],local:!1,orientation:"2d",thumbnail:uS,exportable:!0,availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","maxZoom","minWidth","minHeight","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip","extent","zeroValueColor"],defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],colorbarBackgroundColor:"#ffffff",maxZoom:null,minWidth:100,minHeight:100,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1,extent:"full",zeroValueColor:null},defaultOptionsByTheme:{[eS]:{backgroundColor:"#000000",colorRange:["black","rgba(208,2,27,1.0)","rgba(245,166,35,1.0)","white"],colorbarBackgroundColor:"#000000",labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"linear-heatmap",aliases:["horizontal-heatmap","vertical-heatmap"],datatype:["matrix"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:uS,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,minWidth:100,minHeight:40,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","minWidth","minHeight","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"line",aliases:["horizontal-line","vertical-line"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:lS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","lineStrokeWidth","lineStrokeColor","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode","minHeight"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelBackgroundColor:"white",labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,minHeight:20,mousePositionColor:"#000000",showTooltip:!1},defaultOptionsByTheme:{[eS]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"1d-heatmap",aliases:["horizontal-1d-heatmap","vertical-1d-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:sS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin","colorRange","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1}},{type:"vector-heatmap",aliases:["horizontal-vector-heatmap","vertical-vector-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,minHeight:1,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"multivec",aliases:["horizontal-multivec","vertical-multivec"],datatype:["multivec"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","minHeight","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling","selectRows","selectRowsAggregationMode","selectRowsAggregationWithRelativeHeight","selectRowsAggregationMethod","colorbarBackgroundColor","colorbarPosition","zeroValueColor"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,minHeight:100,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",selectRows:null,selectRowsAggregationMode:"mean",selectRowsAggregationWithRelativeHeight:!0,selectRowsAggregationMethod:"client",colorbarBackgroundColor:"#ffffff",colorbarPosition:"topRight",zeroValueColor:null},defaultOptionsByTheme:{[eS]:{colorbarBackgroundColor:"#000000"}}},{type:"point",aliases:["horizontal-point","vertical-point"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"divergent-bar",aliases:["horizontal-divergent-bar","vertical-divergent-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",axisLabelFormatting:"scientific",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"bar",aliases:["horizontal-bar","vertical-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["align","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColor","colorRange","colorRangeGradient","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","barOpacity","showMousePosition","showTooltip","aggregationMode","zeroLineVisible","zeroLineColor","zeroLineOpacity"],defaultOptions:{align:"bottom",labelColor:"[glyph-color]",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:cS},{type:"1d-value-interval",aliases:["horizontal-1d-value-interval","vertical-1d-value-interval"],datatype:["bed-value"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"1D Rectangles",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"stacked-interval",aliases:["top-stacked-interval","left-stacked-interval"],datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,projection:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"gene-annotations",aliases:["horizontal-gene-annotations","vertical-gene-annotations"],datatype:["gene-annotation"],local:!1,defaultHeight:90,defaultWidth:90,rotatable:!0,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:dS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","minHeight","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor","fontSize","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing"],defaultOptions:{fontSize:10,labelColor:"black",labelBackgroundColor:"#ffffff",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#000000",geneAnnotationHeight:16,geneLabelPosition:"outside",geneStrandSpacing:4},defaultOptionsByTheme:{[eS]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff",plusStrandColor:"#40a0ff"}}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:vS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"linear-2d-rectangle-domains",aliases:["horizontal-2d-rectangle-domains","vertical-2d-rectangle-domains"],datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"Horizontal 2D Rectangle Domains",thumbnail:vS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:vS,availableOptions:["flipDiagonal","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainFillOpacity","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{flipDiagonal:"none",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainFillOpacity:.4,rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"horizontal-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokePos","regions"],defaultOptions:{fill:"red",fillOpacity:.2,stroke:"red",strokeOpacity:0,strokeWidth:1,regions:[],strokePos:[]}},{type:"vertical-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","regions"],defaultOptions:{fill:"red",fillOpacity:"0.2",stroke:"red",strokeOpacity:"0",regions:[]}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:vS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:vS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"horizontal-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-horizontal",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"vertical-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-vertical",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"chromosome-labels",aliases:["horizontal-chromosome-labels","vertical-chromosome-labels"],datatype:["chromsizes"],orientation:"1d-horizontal",rotatable:!0,minHeight:35,defaultHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["color","stroke","fontSize","fontIsLeftAligned","showMousePosition","mousePositionColor","tickPositions","tickFormat","reverseOrientation"],defaultOptions:{color:"#808080",stroke:"#ffffff",fontSize:12,fontIsLeftAligned:!1,showMousePosition:!1,mousePositionColor:"#000000",reverseOrientation:!1},defaultOptionsByTheme:{[eS]:{color:"#808080",stroke:"#000000",mousePositionColor:"#ffffff"}}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:yS},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:gS},{type:"osm-2d-tile-ids",datatype:["map-tiles"],local:!1,orientation:"2d",name:"OSM Tile Outlines",thumbnail:cS,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"raster-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Raster Tiles",thumbnail:aS,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],aliases:["vertical-bedlike"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"BED-like track",thumbnail:null,availableOptions:["alternating","annotationHeight","annotationStyle","fillColor","fillOpacity","fontColor","fontSize","minusStrandColor","plusStrandColor","labelBottomMargin","labelColor","labelLeftMargin","labelPosition","labelRightMargin","labelTopMargin","labelTextOpacity","labelBackgroundOpacity","maxAnnotationHeight","minHeight","trackBorderWidth","trackBorderColor","valueColumn","colorEncoding","colorRange","colorEncodingRange","separatePlusMinusStrands","showTexts","axisPositionHorizontal","axisMargin"],defaultOptions:{alternating:!1,annotationStyle:"box",fillColor:"blue",fillOpacity:.3,fontSize:"10",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:20,maxAnnotationHeight:null,trackBorderWidth:0,trackBorderColor:"black",valueColumn:null,colorEncoding:"itemRgb",showTexts:!1,colorRange:["#000000","#652537","#bf5458","#fba273","#ffffe0"],colorEncodingRange:!1,separatePlusMinusStrands:!0,annotationHeight:16}},{type:"empty",datatype:[],orientation:"1d-horizontal",name:"Empty track",thumbnail:null,availableOptions:[],defaultOptions:{}}],SS=e=>{const t={};return ES.filter((t=>!!(t.orientation===e||"1d-vertical"===e&&"1d-horizontal"===t.orientation&&t.rotatable))).forEach((e=>{let n=e.datatype;Array.isArray(e.datatype)||(n=[n]),n.forEach((n=>{n in t||(t[n]=[]),t[n].push(e)}))})),t.none=[],t},wS=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]],AS=ES.reduce(((e,t)=>{if(e[t.type]=t,t.aliases)for(const n of t.aliases)e[n]=t;return e}),{}),OS=ES.reduce(((e,t)=>{for(let n=0;n<t.datatype.length;n++){const r=t.datatype[n];return e[r]?e[r].add(t.orientation):e[r]=new Set,e}return{}}),{}),xS={chromsizes:{center:"2d-chromosome-grid",top:"chromosome-labels",left:"chromosome-labels",bottom:"chromosome-labels",right:"chromosome-labels"},matrix:{center:"heatmap",top:"linear-heatmap",left:"linear-heatmap",right:"linear-heatmap",bottom:"linear-heatmap"},vector:{top:"bar",bottom:"bar",left:"bar",right:"bar"},"geo-json":{center:"geo-json"},"gene-annotation":{top:"gene-annotations",bottom:"gene-annotations",left:"gene-annotations",right:"gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}},kS=(e,t)=>{const n=SS(t);let r=new Set(Object.values(n).flatMap((e=>e)));for(const i of e){const e=new Set(i);r=new Set([...r].filter((t=>t.datatype.filter((t=>e.has(t))).length>0)))}return[...r]},IS=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_TRACK_TYPES:kS,DATATYPE_TO_TRACK_TYPE:SS,DEFAULT_CONTAINER_PADDING_X:10,DEFAULT_CONTAINER_PADDING_Y:10,DEFAULT_SERVER:QE,DEFAULT_TRACKS_FOR_DATATYPE:xS,DEFAULT_VIEW_MARGIN:0,DEFAULT_VIEW_PADDING:5,GLOBALS:nS,HEATED_OBJECT_MAP:wS,LOCATION_LISTENER_PREFIX:KE,LONG_DRAG_TIMEOUT:$E,MAX_CLICK_DELAY:300,MIN_HORIZONTAL_HEIGHT:20,MIN_VERTICAL_WIDTH:20,MOUSE_TOOL_MOVE:WE,MOUSE_TOOL_SELECT:qE,NUM_PRECOMP_SUBSETS_PER_1D_TTILE:8,NUM_PRECOMP_SUBSETS_PER_2D_TTILE:8,POSITIONS_BY_DATATYPE:OS,SHORT_DRAG_TIMEOUT:110,THEME_DARK:eS,THEME_DEFAULT:tS,THEME_LIGHT:JE,TILE_FETCH_DEBOUNCE:100,TRACKS_INFO:ES,TRACKS_INFO_BY_TYPE:AS,TRACK_LOCATIONS:ZE,VIEW_HEADER_MED_WIDTH_SEARCH_BAR:400,VIEW_HEADER_MIN_WIDTH_SEARCH_BAR:300,ZOOM_DEBOUNCE:10,ZOOM_TRANSITION_DURATION:1e3},Symbol.toStringTag,{value:"Module"})),CS=e=>{const t=qu(e);return nS.PIXI.utils.rgb2hex([t.r/255,t.g/255,t.b/255])},PS=e=>{if("transparent"===e)return[255,255,255,0];const t=qu(e);return[t.r,t.g,t.b,255]},DS=(e,t,n)=>{const r=FE(e,n),i=FE(t,n);if(!r||!i)throw new Error("Couldn't convert data to genomic coordinates");return[r[0],Math.round(r[1]),i[0],Math.round(i[1])]},RS=(e,t,n)=>{let r;const i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];const s=n&&!r;clearTimeout(r),r=setTimeout((()=>{r=void 0,n||e(...o)}),t),s&&e(...o)};return i.cancel=()=>{clearTimeout(r),r=void 0},i},NS=e=>(e+16**6).toString(16).substr(-6),MS=e=>{const t={};return e.forEach((e=>{t[e[0]]=e[1]})),t},LS=e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t};function jS(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(n);return t}function BS(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function FS(e,t){const n="string"==typeof t?new Blob([t],{type:"application/octet-stream"}):t,r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)}const GS=e=>(e.center=e.center||[],e.left=e.left||[],e.right=e.right||[],e.top=e.top||[],e.bottom=e.bottom||[],e.whole=e.whole||[],e.gallery=e.gallery||[],["top","bottom","gallery"].map((t=>e[t])).forEach((e=>e.forEach((e=>{const t=AS[e.type],n=t&&t.defaultOptions||{},r=e.options?{...n,...e.options}:n;void 0!==r.minHeight&&void 0===e.height&&(e.height=r.minHeight),void 0===e.height&&(e.height=t&&t.defaultHeight||20)})))),["left","right","gallery"].map((t=>e[t])).forEach((e=>e.forEach((e=>{const t=AS[e.type],n=t&&t.defaultOptions||{},r=e.options?{...n,...e.options}:n;void 0!==r.minWidth&&void 0===e.width&&(e.width=r.minWidth),void 0===e.width&&(e.width=t&&t.defaultWidth||20)})))),e),HS=e=>t=>Array.prototype.reduce.call(t,e),US=HS(((e,t)=>e.concat(t))),zS=(e,t)=>{t.dispatchEvent(XE(e))};const VS=(e,t,n)=>{if(0===n.length)return;if(1===n.length)return n[0];let r=n[0];const i=void 0!==xS[e]?xS[e][t]:void 0;return void 0!==i&&(r=n.find((e=>e.type===i))||r),r};var XS={},YS={};function WS(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function qS(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function $S(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function KS(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+$S(-e,6):e>9999?"+"+$S(e,6):$S(e,4)}(e.getUTCFullYear())+"-"+$S(e.getUTCMonth()+1,2)+"-"+$S(e.getUTCDate(),2)+(i?"T"+$S(t,2)+":"+$S(n,2)+":"+$S(r,2)+"."+$S(i,3)+"Z":r?"T"+$S(t,2)+":"+$S(n,2)+":"+$S(r,2)+"Z":n||t?"T"+$S(t,2)+":"+$S(n,2)+"Z":"")}function QS(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return YS;if(c)return c=!1,XS;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==YS;){for(var h=[];r!==XS&&r!==YS;)h.push(r),r=u();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?KS(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=WS(e);return function(r,i){return t(n(r),i,e)}}(e,t):WS(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=qS(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=qS(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var ZS=QS(","),JS=ZS.parse,ew=ZS.parseRows,tw=ZS.format,nw=ZS.formatBody,rw=ZS.formatRows,iw=ZS.formatRow,ow=ZS.formatValue,aw=QS("\t"),sw=aw.parse,lw=aw.parseRows,cw=aw.format,uw=aw.formatBody,hw=aw.formatRows,pw=aw.formatRow,fw=aw.formatValue;const dw=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),mw=Object.freeze(Object.defineProperty({__proto__:null,autoType:function(e){for(var t in e){var n,r,i=e[t].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;dw&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;e[t]=i}return e},csvFormat:tw,csvFormatBody:nw,csvFormatRow:iw,csvFormatRows:rw,csvFormatValue:ow,csvParse:JS,csvParseRows:ew,dsvFormat:QS,tsvFormat:cw,tsvFormatBody:uw,tsvFormatRow:pw,tsvFormatRows:hw,tsvFormatValue:fw,tsvParse:sw,tsvParseRows:lw},Symbol.toStringTag,{value:"Module"})),gw={},yw=(e,t)=>gw[e]?Promise.resolve(gw[e]):t(e),vw=e=>fetch(e,{credentials:"same-origin"}).then((e=>e.text())).then((e=>(e=>0===e.length?null:xA(lw(e)))(e))).catch((e=>{console.error("Could not retrieve or parse chrom info.",e)})),bw={get:e=>((e,t,n)=>t(e,n).then((t=>(gw[e]=t,gw[e]))))(e,yw,vw)};function _w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tw(r.key),r)}}function Tw(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let Ew=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.customEventHandlers={},this.registeredEls={},this.pubSub=t}return function(e,t,n){t&&_w(e.prototype,t),n&&_w(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getEventHandler",value:function(e){return this.customEventHandlers[e]?this.customEventHandlers[e]:t=>this.pubSub.publish(e,t)}},{key:"unregister",value:function(e,t){!this.registeredEls[e]&&this.registeredEls[e]!==t||(this.registeredEls[e].removeEventListener(e,this.registeredEls[e].__handler__),this.registeredEls[e]=void 0,delete this.registeredEls[e])}},{key:"register",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!t||this.registeredEls[e]===t||(this.registeredEls[e]&&this.unregister(this.registeredEls[e]),this.registeredEls[e]=t,this.registeredEls[e].__handler__=this.getEventHandler(e),this.registeredEls[e].addEventListener(e,this.registeredEls[e].__handler__,{capture:n,passive:!1}))}}]),e}();const Sw=e=>new Ew(e);let ww=!1;const Aw={listen:()=>{if(ww)return;const[e,t]=Kw(),n=[String.fromCharCode(..."102117110099116105111110040041123115101108102046099111110115111108101046108111103040039".match(/.{1,3}/g).map((e=>+e))).toLowerCase(),String.fromCharCode(..."072".match(/.{1,3}/g).map((e=>+e))),String.fromCharCode(..."105".match(/.{1,3}/g).map((e=>+e))).toLowerCase(),String.fromCharCode(..."071".match(/.{1,3}/g).map((e=>+e))),String.fromCharCode(..."108097115115".match(/.{1,3}/g).map((e=>+e))).toLowerCase(),String.fromCharCode(..."032118".match(/.{1,3}/g).map((e=>+e))).toLowerCase(),String.fromCharCode(...t.match(/.{1,3}/g).map((e=>+e))).toLowerCase(),String.fromCharCode(..."058032104116116112058047047104105103108097115115046105111039041125".match(/.{1,3}/g).map((e=>+e))).toLowerCase()].join(""),r=e=>e.charAt(0).toUpperCase()+e.slice(1),i=e=>e.slice(0,6)+e.charAt(6).toUpperCase()+e.slice(7,12)+e.slice(12).toUpperCase(),o=e[String.fromCharCode(..."085082076".match(/.{1,3}/g).map((e=>+e)))],a=e[r(String.fromCharCode(..."066076079066".match(/.{1,3}/g).map((e=>+e))).toLowerCase())],s=e[r(String.fromCharCode(..."087111114107101114".match(/.{1,3}/g).map((e=>+e))).toLowerCase())],l=i(String.fromCharCode(..."099114101097116101079098106101099116085082076".match(/.{1,3}/g).map((e=>+e))).toLowerCase()),c=i(String.fromCharCode(..."114101118111107101079098106101099116085082076".match(/.{1,3}/g).map((e=>+e))).toLowerCase()),u=o[l](new a([`(${n})()`],{type:"application/javascript"}));new s(u),o[c](u),ww=!0}};function Ow(e,t,n,r,i,o){let a,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;"log"===n?a=qp().range([254,0]).domain(r):("linear"!==n&&console.warn("Unknown value scale type:",n," Defaulting to linear"),a=Fp().range([254,0]).domain(r));const{selectedRows:p,selectedRowsAggregationMode:f="mean",selectedRowsAggregationWithRelativeHeight:d=!1,selectedRowsAggregationMethod:m="client"}=h??{};let g=e;c&&p&&(g=rO(p,d)*c[1]);let y,v=0;const b=c?c[1]:Math.sqrt(e),_=new Uint8ClampedArray(4*g),T=(e,t)=>{v=255,!(s&&Math.floor(e/b)<e%b)&&!(l&&Math.floor(e/b)>e%b)&&!Number.isNaN(+t)&&(v=(e=>{const t=a(e);return Number.isNaN(t)?254:Math.max(0,Math.min(254,Math.floor(t)))})(t+i)),(v<0||v>255)&&console.warn("out of bounds rgbIdx:",v," (should be 0 <= rgbIdx <= 255)"),y=u&&!Number.isNaN(+t)&&0==+t?u:o[v],_[4*e]=y[0],_[4*e+1]=y[1],_[4*e+2]=y[2],_[4*e+3]=y[3]};let E;try{if(p&&c)!function(e,t,n,r,i,o,a){let s,l,c,u,h,p,f,d;if(i){const n=nO(i);s=n,l=(r,i)=>n(i.map((n=>e[n*t[1]+r])))??0}for(h=0;h<t[1];h++)for(u=0,p=0;p<r.length;p++){if(d=r[p],s&&"server"===a)c=e[p*t[1]+h];else if(Array.isArray(d)){if(!l)throw new Error("row aggregation requires 'aggFromDataFunc'");c=l(h,d)}else c=e[d*t[1]+h];if(o&&Array.isArray(d))for(f=0;f<d.length;f++)n(u*t[1]+h,c),u++;else n(u*t[1]+h,c),u++}}(t,c,T,p,f,d,m);else for(let e=0;e<t.length;e++)E=t[e],T(e,E)}catch(S){return console.warn("Odd datapoint"),console.warn("d:",E),E=E??0,console.warn("valueScale.domain():",a.domain()),console.warn("valueScale.range():",a.range()),console.warn("value:",a(E+i)),console.warn("pseudocount:",i),console.warn("rgbIdx:",v,"d:",E,"ct:",a(E)),console.error("ERROR:",S),_}return _}function xw(e){let t,n,r,i=31744&e;const o=(32768&e)<<16;switch(i){case 0:if(t=1023&e,0===t)return o;for(t<<=1;!(1024&t);)t<<=1,i++;return n=112-i<<23,r=(1023&t)<<13,o+n+r;case 31744:return o+2139095040+((1023&e)<<13);default:return o+(114688+(32767&e)<<13)}}function kw(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function Iw(e){const t=new Uint32Array(e.length);for(let n=0;n<e.length;n++)t[n]=xw(e[n]);return new Float32Array(t.buffer)}function Cw(e,t,n){const r=e??{};for(const i of n){i in r||(r[i]={});const e=i,n=e.split(".");r[e].server=t,r[e].tileId=e,r[e].zoomLevel=+n[1];const o=n.slice(2,n.length).map((e=>+e)).filter((e=>!Number.isNaN(e)));if(r[e].tilePos=o,r[e].tilesetUid=n[0],"dense"in r[e]){const t=kw(r[e].dense);let n;if("float16"===r[e].dtype){n=Iw(new Uint16Array(t))}else n=new Float32Array(t);const i=2===o.length?new tO(n):new ZA(n);r[e].dense=n,r[e].denseDataExtrema=i,r[e].minNonZero=i.minNonZeroInTile,r[e].maxNonZero=i.maxNonZeroInTile}}return r}function Pw(e,t,n,r,i,o){const a={"content-type":"application/json"};r&&(a.Authorization=r),fetch(e,{credentials:"same-origin",headers:a,...o&&Object.keys(o).length>0?{method:"POST",body:JSON.stringify(o)}:{}}).then((e=>e.json())).then((e=>{i(Cw(e,t,n))})).catch((e=>console.warn("err:",e)))}const Dw=ag.nice();let Rw=0,Nw=null;const Mw=e=>{Nw=e};const Lw=((e,t,n)=>{let r,i=[],o={},a=0;const s=()=>{r=null,i=[],o={}},l=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e({sessionId:Dw,requests:i},...r),s()},c=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];clearTimeout(r),r=setTimeout((()=>{a>0&&(l(e,...i),a=0)}),n)};c.cancel=()=>{clearTimeout(r),s()},c.immediate=()=>{e({sessionId:Dw,requests:i})};let u=!1;return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(e=>{const t=o[e.id];t&&i[t]?i[t].ids=i[t].ids.concat(e.ids):(o[e.id]=i.length,i.push(e))})(e),u?a++:(l(e,...r),c(e,...r),u=!0,a=0,setTimeout((()=>{u=!1}),t))}})((function(e,t){const n=e.requests,r=[],i={},o={};for(const s of n){i[s.server]||(i[s.server]={},o[s.server]=[]);for(const e of s.ids)if(i[s.server][e]=!0,s.options){const t=e.indexOf("."),n=e.substring(0,t),r=e.substring(t+1),i=o[s.server].find((e=>e.tilesetUid===n));i?i.tileIds.push(r):o[s.server].push({tilesetUid:n,tileIds:[r],options:s.options})}}const a=Object.keys(i);for(const s of a){const e=Object.keys(i[s]),n=o[s];for(let i=0;i<e.length;i+=15){const o=e.slice(i,i+Math.min(e.length-i,15)),a=o.map((e=>`d=${e}`)).join("&"),l=`${s}/tiles/?${a}&s=${Dw}`,c=new Promise(((e,r)=>{t.publish("requestSent",l);const i={};i.outUrl=l,i.server=s,i.theseTileIds=o,i.authHeader=Nw,Pw(i.outUrl,i.server,i.theseTileIds,i.authHeader,e,n),t.publish("requestReceived",l)}));r.push(c)}}Promise.all(r).then((e=>{const t={};for(const n of e){const e=Object.keys(n);for(const r of e)t[`${n[r].server}/${r}`]=n[r]}for(const r of n){const e={},{server:n}=r;for(const i of r.ids)e[i]=t[`${n}/${i}`];r.done(e)}}))}),100,100);function jw(e,t,n,r){Rw+=1,r.publish("requestSent",e);let i=null;if("text"===n)i=null;else{if("json"!==n)throw new Error(`fetch either "text" or "json", not "${n}"`);i="application/json"}const o={};return i&&(o["Content-Type"]=i),Nw&&(o.Authorization=Nw),fetch(e,{credentials:"same-origin",headers:o}).then((e=>{if(!e.ok)throw Error(e.statusText);return e[n]()})).then((e=>(t(void 0,e),e))).catch((n=>(console.error(`Could not fetch ${e}`,n),t(n,void 0),n))).finally((()=>{r.publish("requestReceived",e),Rw-=1}))}async function Bw(e,t,n){return e.indexOf("hg19")>=0&&await jA(1),jw(e,t,"json",n)}const Fw={calculateResolution:(e,t)=>{if(e.resolutions)return e.resolutions.map((e=>+e)).sort(((e,t)=>t-e))[t];return e.max_width/(2**t*+e.bins_per_dimension)},calculateTileAndPosInTile:function(e,t,n,r,i){let o=null;const a=e.bins_per_dimension||256;o=e.resolutions?e.resolutions[r]*a:t/2**r;const s=Math.floor((i-n)/o);return[s,Math.floor(a*(i-s*o)/o)]},calculateTiles:(e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return du(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))},calculateTilesFromResolution:(e,t,n,r,i)=>{const o=e*(i||256);r||(r=Number.MAX_VALUE);let a=du(Math.max(0,Math.floor((t.domain()[0]-n)/o)),Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/o));return a.length>20&&(console.warn(`Too many visible tiles: ${a.length} truncating to 20`),a=a.slice(0,20)),a},calculateTileWidth:(e,t,n)=>e.resolutions?e.resolutions.map((e=>+e)).sort(((e,t)=>t-e))[t]*n:e.max_width/2**t,calculateZoomLevel:(e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,l=0;return r&&(l=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=l,s},calculateZoomLevelFromResolutions:(e,t)=>{const n=e.map((e=>+e)).sort(((e,t)=>t-e)),r=t.range()[1]-t.range()[0],i=n.map((e=>(t.domain()[1]-t.domain()[0])/e)).map((e=>e/r)),o=i.filter((e=>e<1));return 0===o.length?0:i.indexOf(o[o.length-1])},fetchTilesDebounced:Lw,json:Bw,text:function(e,t,n){return jw(e,t,"text",n)},tileDataToPixData:(e,t,n,r,i,o,a,s,l,c)=>{const{tileData:u}=e;if(!u.dense)return void o(null);if(e.mirrored&&!e.isMirrored&&e.tileData.tilePos.length>0&&e.tileData.tilePos[0]===e.tileData.tilePos[1]){e.tileData.dense=e.tileData.dense.slice();const t=Math.floor(Math.sqrt(e.tileData.dense.length));for(let n=0;n<t;n++)for(let r=n+1;r<t;r++)e.tileData.dense[n*t+r]=e.tileData.dense[r*t+n];if(s)for(let n=0;n<t;n++)for(let r=0;r<n;r++)e.tileData.dense[n*t+r]=NaN;e.isMirrored=!0}o({pixData:Ow(u.dense.length,u.dense,t,n,r,i,a,s,e.tileData.shape,l,c)})},trackInfo:(e,t,n,r,i)=>{const o=`${FA(e)}/tileset_info/?d=${t}&s=${Dw}`;i.publish("requestSent",o),Bw(o,((t,a)=>{i.publish("requestReceived",o),t?r?r(`Error retrieving tilesetInfo from: ${e}`):console.warn("Error retrieving: ",o):n(a)}),i)}},Gw=Object.freeze(Object.defineProperty({__proto__:null,ElementResizeListener:Aw,get authHeader(){return Nw},chromInfo:bw,createDomEvent:Sw,getTileProxyAuthHeader:()=>Nw,get requestsInFlight(){return Rw},setTileProxyAuthHeader:Mw,tileProxy:Fw,tileResponseToData:Cw},Symbol.toStringTag,{value:"Module"})),Hw=e=>(Aw.listen(),[e.clientWidth,e.clientHeight]),Uw=(e,t)=>{let n=null;const r=e=>(e.uid===t&&(n=e),"combined"===e.type.substr(0,8)&&e.contents.forEach(r),null);return Object.keys(e).map((t=>e[t])).filter((e=>e.filter)).reduce(((e,t)=>e.concat(t)),[]).forEach(r),n},zw=(e,t,n)=>{const r=t?e[t]:Object.values(e)[0];if(!r)return void console.warn(t?`Could't find view with id "${t}"`:"No views available.");let i=r.trackRenderer.trackDefObjects[n];return i?i=i.trackObject:Object.values(r.trackRenderer.trackDefObjects).map((e=>e.trackObject)).filter((e=>e.childTracks)).forEach((e=>{e.createdTracks[n]&&(i=e.createdTracks[n])})),i};function Vw(e){return"combined"===e.type}function Xw(e){return null!==e&&"object"==typeof e}const Yw=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e.forEach((e=>{n&&Vw(e)&&Yw(e.contents,t,n,r),t(e,r)}))},Ww=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=[];for(const[i,o]of Object.entries(e))Yw(o,t,n,i),r.push(...o);return r},qw=(e,t)=>{let n=null;return Ww(e,((e,r)=>{e.uid===t&&(n=r)})),n},$w=e=>t=>Array.prototype.map.call(t,e),Kw=()=>[window,$w((e=>e.charCodeAt(0)))("1.13.4").map((e=>e<=999?`00${e}`.slice(-3):e)).join("")],Qw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;const s=document.createElement("canvas");s.width=t,s.height=n;const l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const c=l.createLinearGradient(r,i,o,a);return e.forEach((e=>{c.addColorStop(e.from,e.color)})),l.fillStyle=c,l.fillRect(0,0,t,n),s},Zw=(e,t)=>{let n=e;for(;n&&n!==t&&"HTML"!==n.tagName;)n=n.parentNode;return n===t},Jw=e=>parseInt(e.replace(/^#/,""),16),eA=()=>{};function tA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nA(r.key),r)}}function nA(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let rA=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.context=t;const{tracks:n,createTrackObject:r}=t;this.childTracks=n.map(r),this.createdTracks={},this.uid=ag.nice(),this.childTracks.forEach(((e,t)=>{this.createdTracks[n[t].uid]=e}));for(let e=0;e<this.childTracks.length;e++)this.childTracks[e]||console.error("Empty child track in CombinedTrack:",this)}return function(e,t,n){t&&tA(e.prototype,t),n&&tA(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"updateContents",value:function(e,t){const n=[],r=new Set;e.forEach((e=>{if(r.add(e.uid),e.uid in this.createdTracks)n.push(this.createdTracks[e.uid]);else{const r=t(e);r.setPosition(this.position),r.setDimensions(this.dimensions),n.push(r),r.zoomed(this._xScale,this._yScale),this.createdTracks[e.uid]=r}})),this.childTracks=n;const i=new Set(Object.keys(this.createdTracks));return[...new Set([...i].filter((e=>!r.has(e))))].forEach((e=>{this.createdTracks[e].remove(),delete this.createdTracks[e]})),this}},{key:"setPosition",value:function(e){this.position=e;for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].setPosition(e)}},{key:"setDimensions",value:function(e){this.dimensions=e;for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].setDimensions(e)}},{key:"zoomed",value:function(e,t,n,r,i,o,a){this._xScale=e,this._yScale=t;for(let s=0;s<this.childTracks.length;s++)this.childTracks[s].zoomed(e,t,n,r,i,o,a)}},{key:"clickOutside",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].clickOutside()}},{key:"click",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].click(...arguments)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(e,t){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].refScalesChanged(e,t)}},{key:"remove",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].remove()}},{key:"exportSVG",value:function(){const e=document.createElement("g");for(const t of this.childTracks)t.exportSVG&&e.appendChild(t.exportSVG()[0]);return[e,e]}},{key:"rerender",value:function(e){}},{key:"minValue",value:function(e){if(0===arguments.length){const e=this.childTracks.filter((e=>e.minValue)).map((e=>e.minValue())).filter((e=>e));return Math.min(...e)}for(const t of this.childTracks)t.minValue&&t.minValue(e)}},{key:"maxValue",value:function(e){if(0===arguments.length){const e=this.childTracks.filter((e=>e.maxValue)).map((e=>e.maxValue())).filter((e=>e));return Math.max(...e)}for(const t of this.childTracks)t.maxValue&&t.maxValue(e)}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){for(const e of this.childTracks)e.stopHover&&e.stopHover()}},{key:"getMouseOverHtml",value:function(e,t){let n="";for(const r of this.childTracks)if(r.getMouseOverHtml){const i=r.getMouseOverHtml(e,t);i&&i.length&&(n+=i,n+="<br/>")}return n}}]),e}();const iA=(e,t)=>t===e||t instanceof rA&&Object.keys(t.createdTracks).map((e=>t.createdTracks[e])).some((t=>iA(e,t))),oA=function(e,t,n,r,i,o){return arguments.length>6&&void 0!==arguments[6]&&arguments[6]?e>=n&&e<=r||t>=i&&t<=o:e>=n&&e<=r&&t>=i&&t<=o},aA=e=>$w((t=>e[t]))(Object.keys(e)),sA=(e,t)=>e>t?e:t;function lA(e){let t=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<1e-7&&r>-1e-7||r>t&&(t=r)}return t}const cA=(e,t)=>e<t?e:t;function uA(e){let t=Number.MAX_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<1e-7&&r>-1e-7||r<t&&(t=r)}return t}const hA=(e,t)=>{const n=+t;if(Number.isNaN(n)){const n=e.shape[0],r=e.shape[1],i=t.shape[0],o=t.shape[1];if(n!==i||r!==o)return void console.warn("Cannot assign source to target ndarray as the dimensions do not match",n,i,r,o);if(1===e.dimension)for(let a=0;a<e.shape[0];++a)e.set(a,t.get(a));else for(let a=0;a<e.shape[0];++a)for(let n=0;n<e.shape[1];++n)e.set(a,n,t.get(a,n))}else if(1===e.dimension)for(let r=0;r<e.shape[0];++r)e.set(r,n);else for(let r=0;r<e.shape[0];++r)for(let t=0;t<e.shape[1];++t)e.set(r,t,n)};var pA=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t};function fA(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var dA=pA,mA=function(e){return null!=e&&(fA(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&fA(e.slice(0,0))}(e)||!!e._isBuffer)},gA=typeof Float64Array<"u";function yA(e,t){return e[0]-t[0]}function vA(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(yA);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function bA(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===t){i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",i)(_A[e][0])}i=["'use strict'"];var o=dA(t),a=o.map((function(e){return"i"+e})),s="this.offset+"+o.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),l=o.map((function(e){return"b"+e})).join(","),c=o.map((function(e){return"c"+e})).join(",");i.push("function "+n+"(a,"+l+","+c+",d){this.data=a","this.shape=["+l+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+a.join(",")+",v){"),r?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+n+"_get("+a.join(",")+"){"),r?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+n+"_index(",a.join(),"){return "+s+"}"),i.push("proto.hi=function "+n+"_hi("+a.join(",")+"){return new "+n+"(this.data,"+o.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+o.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var u=o.map((function(e){return"a"+e+"=this.shape["+e+"]"})),h=o.map((function(e){return"c"+e+"=this.stride["+e+"]"}));i.push("proto.lo=function "+n+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+u.join(",")+","+h.join(","));for(var p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"c"+e})).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+a.join(",")+"){var "+o.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+o.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"b"+e})).join(",")+",c)}");var f=new Array(t),d=new Array(t);for(p=0;p<t;++p)f[p]="a[i"+p+"]",d[p]="b[i"+p+"]";i.push("proto.transpose=function "+n+"_transpose("+a+"){"+a.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+f.join(",")+","+d.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+a+"){var a=[],b=[],c=this.offset");for(p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this.stride["+p+"]*i"+p+")|0}else{a.push(this.shape["+p+"]);b.push(this.stride["+p+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map((function(e){return"shape["+e+"]"})).join(",")+","+o.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(_A[e],vA)}var _A={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};var TA=function(e,t,n,r){if(void 0===e)return(0,_A.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===n){n=new Array(i);for(var o=i-1,a=1;o>=0;--o)n[o]=a,a*=t[o]}if(void 0===r){r=0;for(o=0;o<i;++o)n[o]<0&&(r-=(t[o]-1)*n[o])}for(var s=function(e){if(mA(e))return"buffer";if(gA)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),l=_A[s];l.length<=i+1;)l.push(bA(s,l.length-1));return(0,l[i+1])(e,t,n,r)};const EA=Cs(TA),SA=e=>{const t=e.shape.reduce(((e,t)=>e*t),1),n=new Array(t);if(1===e.dimension){let t=0;for(let r=0;r<e.shape[0];++r)n[t]=e.get(r),t++}else{let t=0;for(let r=0;r<e.shape[0];++r)for(let i=0;i<e.shape[1];++i)n[t]=e.get(r,i),t++}return n},wA=e=>1===e.shape.length?e:EA(SA(e)),AA=e=>{const t=e.split("."),n=t.slice(1).join("").length;return+t.join("")/10**n},OA=(e,t)=>e||t;function xA(e){const t=[],n={},r={};let i=0;for(let o=0;o<e.length;o++){const a=Number(e[o][1]);i+=a;const s={id:o,chr:e[o][0],pos:i-a};t.push(s),r[s.chr]=s,n[e[o][0]]=a}return{cumPositions:t,chrPositions:r,totalLength:i,chromLengths:n}}const kA=e=>{const t=document.createElement("g"),n=document.createElement("text");return 0===e.anchor.x?n.setAttribute("text-anchor","start"):1===e.anchor.x?n.setAttribute("text-anchor","end"):n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",e.style.fontFamily),n.setAttribute("font-size",e.style.fontSize),t.setAttribute("transform",`scale(${e.scale.x},1)`),n.setAttribute("fill",e.style.fill),n.innerHTML=e.text,t.appendChild(n),t.setAttribute("transform",`translate(${e.x},${e.y})scale(${e.scale.x},1)`),t},IA=(e,t)=>{e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)},CA=e=>{const t=e.toString(16);return 1===t.length?`0${t}`:t},PA=(e,t)=>[e.invert((e.range()[0]+e.range()[1])/2),t.invert((t.range()[0]+t.range()[1])/2),e.invert(1)-e.invert(0)],DA=(e,t,n)=>{if(null===n||!e||!t)return;const r=e.domain()[0],i=e.domain()[1],o=t.domain()[0],a=t.domain()[1];return[...DS(r,i,n),...DS(o,a,n)]},RA=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t?e.pMasked:e.pForeground||e.pMain;if(!r)throw new Error("setupShowMousePosition: No scene found. Please make sure to call this method after the scene has been initialized.");const i=((e,t,n,r,i,o,a,s,l)=>{e.publish("app.animateOnMouseMove",!0);const c=n.mousePositionColor?Jw(n.mousePositionColor):11184810,u=n.mousePositionAlpha||1,h=new nS.PIXI.Graphics,p=()=>{h.clear()},f=(e,t,n)=>{if(n||p(),h.lineStyle(1,c,u),t){const t=s?i()[0]:0;h.moveTo(0,e),h.lineTo(o()[0]+t,e)}else{const t=s?i()[1]:0;h.moveTo(e,0),h.lineTo(e,o()[1]+t)}},d=e=>{if(e.noHoveredTracks)return p(),h;let t,n;e.isFromVerticalTrack?(t=e.dataY,n=e.dataY):(t=e.dataX,n=e.isFrom2dTrack?e.dataY:e.dataX);const o=s?i():[0,0],l=a()?r()[0](n)+o[1]:r()[0](t)+o[0];return f(l),s&&f(r()[1](n)+o[1],!0,!0),h};return t.push(e.subscribe("app.mouseMove",d)),t.push(e.subscribe("app.mouseLeave",p)),t.push(e.subscribe("blur",p)),l&&t.push(Fb.subscribe("higlass.mouseMove",d)),h})(e.pubSub,e.pubSubs,e.options,(()=>[e.xScale(),e.yScale()]),e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t,n);return r.addChild(i),()=>{r.removeChild(i)}},NA=(e,t)=>e+t,MA=(e,t,n,r,i,o)=>{const a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",n),a.setAttribute("y1",t),a.setAttribute("y2",r),i&&a.setAttribute("stroke-width",i),o&&a.setAttribute("stroke",o),a},LA=(e,t,n)=>{let r,i=0;const o=function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];clearTimeout(r),r=setTimeout((()=>{i>0&&(e(...o),i=0)}),n)};o.cancel=()=>{clearTimeout(r),r=void 0},o.immediate=function(){e(...arguments)};let a=!1;return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];a?i++:(e(...s),o(...s),a=!0,i=0,setTimeout((()=>{a=!1}),t))}},jA=e=>new Promise((t=>{setTimeout(t,e)})),BA=()=>{},FA=e=>(e||"").replace(/\/$/,""),GA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return i=>{let o=255;return i>r&&(o=Math.max(0,Math.min(255,Math.floor(e(i+n))))),t[o]}},HA=e=>{let t=[];for(let n=0;n<e.length;n++)e[n].contents?t=t.concat(e[n].contents):t.push(e[n]);return t};function UA(e,t,n,r){this.interval=[e,t],this.max=-1/0,this.parentNode=null,this.left=n,this.right=r}function zA(){this.root=null}function VA(e,t,n){let r=new UA(n[0],n[1]);if(r.max=n[1],r.parentNode=e,e[t]=r,e.max<n[1])for(;r;)r.max<n[1]&&(r.max=n[1]),r=r.parentNode}function XA(e,t){e.interval[0]>t[0]?e.left?XA(e.left,t):VA(e,"left",t):e.right?XA(e.right,t):VA(e,"right",t)}function YA(e,t){if(!t)return!1;if(t.interval[0]<=e&&t.interval[1]>=e)return!0;let n,r=!1;return["left","right"].forEach((i=>{n=t[i],n&&n.max>e&&(r=r||YA(e,n))})),r}function WA(e,t){if(!t)return!1;if(function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]<t[0]&&e[1]>t[0]||e[0]<t[1]&&e[1]>t[1]||t[0]<e[0]&&t[1]>e[0]||t[0]<e[1]&&t[1]>e[1]}(t.interval,e))return!0;let n,r=!1;return["left","right"].forEach((i=>{n=t[i],n&&n.max>=e[0]&&(r=r||WA(e,n))})),r}function qA(e){return e?1+Math.max(qA(e.left),qA(e.right)):0}function $A(e){e.sort(((e,t)=>t.to-t.from-(e.to-e.from)));const t=[[]],n=[new zA];for(let r=0;r<e.length;r++){let i=!1;for(let o=0;o<t.length;o++){const a=n[o],s=[+e[r].from,+e[r].to];if(!a.intersects(s)){a.add(s),t[o].push(e[r]),i=!0;break}}if(!i){const i=new zA;i.add([e[r].from,e[r].to]),t.push([e[r]]),n.push(i)}}return t}function KA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QA(r.key),r)}}function QA(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}zA.prototype.add=function(e){if(!this.root)return this.root=new UA(e[0],e[1]),void(this.root.max=e[1]);XA(this.root,e)},zA.prototype.contains=function(e){return YA(e,this.root)},zA.prototype.intersects=function(e){return WA(e,this.root)},zA.prototype.height=function(){return qA(this.root)},zA.prototype.findMax=function(e){const t=[e];let n,r,i=-1/0;for(;t.length;)n=t.pop(),n.left&&t.push(n.left),n.right&&t.push(n.right),n.interval[1]>i&&(i=n.interval[1],r=n);return r},zA.prototype._removeHelper=function(e,t){if(t)if(t.interval[0]===e[0]&&t.interval[1]===e[1]){if(t.left&&t.right){let e=t.left;for(;e.left;)e=e.left;const n=e.interval;e.interval=t.interval,t.interval=n,this._removeHelper(e.interval,t)}else{let e="left";t.right&&(e="right");const n=t.parentNode;n?(n.left===t?n.left=t[e]:n.right=t[e],t[e]&&(t[e].parentNode=n)):(this.root=t[e],this.root&&(this.root.parentNode=null))}const e=t.parentNode;if(e){let n=this.findMax(e);const r=n.interval[1];for(;n;)n.max===t.interval[1]?(n.max=r,n=n.parentNode):n=!1}}else this._removeHelper(e,t.left),this._removeHelper(e,t.right)},zA.prototype.remove=function(e){return this._removeHelper(e,this.root)};let ZA=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.epsilon=1e-6,this.data=t,this.tileSize=this.data.length,this.paddedTileSize=2**Math.ceil(Math.log2(this.tileSize)),this.numSubsets=Math.min(8,this.paddedTileSize),this.subsetSize=this.paddedTileSize/this.numSubsets,this.subsetMinimums=this.computeSubsetNonZeroMinimums(),this.subsetMaximums=this.computeSubsetNonZeroMaximums(),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return function(e,t,n){t&&KA(e.prototype,t),n&&KA(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getMinNonZeroInSubset",value:function(e){const t=e[0],n=e[1];let r=Number.MAX_SAFE_INTEGER;if(0===t&&n===this.tileSize)return this.minNonZeroInTile;const i=Math.ceil(t/this.subsetSize),o=Math.floor((n-1)/this.subsetSize);return i>=o?this.minNonZero(this.data,t,n):(t<i*this.subsetSize&&(r=Math.min(r,this.minNonZero(this.data,t,i*this.subsetSize))),r=Math.min(r,this.minNonZero(this.subsetMinimums,i,o)),n>o*this.subsetSize&&(r=Math.min(r,this.minNonZero(this.data,o*this.subsetSize,n))),r)}},{key:"getMaxNonZeroInSubset",value:function(e){const t=e[0],n=e[1];let r=Number.MIN_SAFE_INTEGER;if(0===t&&n===this.tileSize)return this.maxNonZeroInTile;const i=Math.ceil(t/this.subsetSize),o=Math.floor((n-1)/this.subsetSize);return i>=o?this.maxNonZero(this.data,t,n):(t<i*this.subsetSize&&(r=Math.max(r,this.maxNonZero(this.data,t,i*this.subsetSize))),r=Math.max(r,this.maxNonZero(this.subsetMaximums,i,o)),n>o*this.subsetSize&&(r=Math.max(r,this.maxNonZero(this.data,o*this.subsetSize,n))),r)}},{key:"computeSubsetNonZeroMinimums",value:function(){const e=[];for(let t=0;t<this.numSubsets;t++){let n=Number.MAX_SAFE_INTEGER;for(let e=0;e<this.subsetSize;e++){const r=this.data[t*this.subsetSize+e];void 0!==r&&(r<this.epsilon&&r>-this.epsilon||r<n&&(n=r))}e.push(n)}return e}},{key:"computeSubsetNonZeroMaximums",value:function(){const e=[];for(let t=0;t<this.numSubsets;t++){let n=Number.MIN_SAFE_INTEGER;for(let e=0;e<this.subsetSize;e++){const r=this.data[t*this.subsetSize+e];void 0!==r&&(r<this.epsilon&&r>-this.epsilon||r>n&&(n=r))}e.push(n)}return e}},{key:"getMinNonZeroInTile",value:function(){return Math.min(...this.subsetMinimums)}},{key:"getMaxNonZeroInTile",value:function(){return Math.max(...this.subsetMaximums)}},{key:"minNonZero",value:function(e,t,n){let r=Number.MAX_SAFE_INTEGER;for(let i=t;i<n;i++){const t=e[i];t<this.epsilon&&t>-this.epsilon||t<r&&(r=t)}return r}},{key:"maxNonZero",value:function(e,t,n){let r=Number.MIN_SAFE_INTEGER;for(let i=t;i<n;i++){const t=e[i];t<this.epsilon&&t>-this.epsilon||t>r&&(r=t)}return r}}]),e}();function JA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eO(r.key),r)}}function eO(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let tO=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.epsilon=1e-6,this.tileSize=Math.sqrt(t.length),Number.isSafeInteger(this.tileSize)||console.error("The DenseDataExtrema2D module only works for data of quadratic length."),this.numSubsets=Math.min(8,this.tileSize),this.subsetSize=this.tileSize/this.numSubsets;const n=EA(Array.from(t),[this.tileSize,this.tileSize]);this.subsetMinimums=this.computeSubsetNonZeroMinimums(n),this.subsetMaximums=this.computeSubsetNonZeroMaximums(n),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return function(e,t,n){t&&JA(e.prototype,t),n&&JA(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getMinNonZeroInSubset",value:function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=Math.floor(n/this.subsetSize),a=Math.floor(t/this.subsetSize),s=Math.ceil((i+1)/this.subsetSize)-o,l=Math.ceil((r+1)/this.subsetSize)-a;return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,o,a,l,s)}},{key:"getMaxNonZeroInSubset",value:function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=Math.floor(n/this.subsetSize),a=Math.floor(t/this.subsetSize),s=Math.ceil((i+1)/this.subsetSize)-o,l=Math.ceil((r+1)/this.subsetSize)-a;return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,o,a,l,s)}},{key:"computeSubsetNonZeroMinimums",value:function(e){const t=EA(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let r=0;r<this.numSubsets;r++){const i=this.getMinNonZeroInNdarraySubset(e,n*this.subsetSize,r*this.subsetSize,this.subsetSize,this.subsetSize);t.set(n,r,i)}return t}},{key:"computeSubsetNonZeroMaximums",value:function(e){const t=EA(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let r=0;r<this.numSubsets;r++){const i=this.getMaxNonZeroInNdarraySubset(e,n*this.subsetSize,r*this.subsetSize,this.subsetSize,this.subsetSize);t.set(n,r,i)}return t}},{key:"getMinNonZeroInNdarraySubset",value:function(e,t,n,r,i){let o=Number.MAX_SAFE_INTEGER;for(let a=0;a<r;a++)for(let r=0;r<i;r++){const i=e.get(t+r,n+a);i<this.epsilon&&i>-this.epsilon||i<o&&(o=i)}return o}},{key:"getMaxNonZeroInNdarraySubset",value:function(e,t,n,r,i){let o=Number.MIN_SAFE_INTEGER;for(let a=0;a<r;a++)for(let r=0;r<i;r++){const i=e.get(t+r,n+a);i<this.epsilon&&i>-this.epsilon||i>o&&(o=i)}return o}},{key:"mirrorPrecomputedExtrema",value:function(){for(let e=1;e<this.numSubsets;e++)for(let t=0;t<e;t++)this.subsetMinimums.set(t,e,this.subsetMinimums.get(e,t)),this.subsetMaximums.set(t,e,this.subsetMaximums.get(e,t))}},{key:"getMinNonZeroInTile",value:function(){return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,0,0,this.numSubsets,this.numSubsets)}},{key:"getMaxNonZeroInTile",value:function(){return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,0,0,this.numSubsets,this.numSubsets)}}]),e}();const nO=e=>{let t;switch(e&&e.toLowerCase()){case"mean":t=cu;break;case"sum":t=vu;break;case"variance":t=fc;break;case"deviation":t=dc;break;default:t=cu,console.warn("Encountered an unsupported selectedRowsAggregationMode option.")}return t},rO=(e,t)=>e.reduce(((e,n)=>e+(Array.isArray(n)&&t?n.length:1)),0),iO=e=>{switch(e.type){case"heatmap":case"horizontal-1d-heatmap":case"horizontal-bar":case"horizontal-line":case"horizontal-point":case"vertical-1d-heatmap":case"vertical-bar":case"vertical-line":case"vertical-point":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":case"horizontal-multivec":return!0;case"combined":return e.contents.map((e=>iO(e))).reduce(OA,!1);default:return!1}},oO=(e,t,n)=>{let r=t,i=n;return n||(i=t,r=Object.values(e.state.views)[0].uid),e.tiledPlots[r].trackRenderer.getTrackObject(i)},aO=(e,t)=>e.tiledPlots[t].trackRenderer;var sO,lO,cO={},uO=Object.prototype.toString,hO=function(e){var t=uO.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===uO.call(e.callee)),n};var pO=Array.prototype.slice,fO=hO,dO=Object.keys,mO=dO?function(e){return dO(e)}:function(){if(lO)return sO;var e;if(lO=1,!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=hO,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call((function(){}),"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!c["$"+e]&&t.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch{return!0}}catch{return!0}return!1}();e=function(e){var i=null!==e&&"object"==typeof e,c="[object Function]"===n.call(e),h=r(e),p=i&&"[object String]"===n.call(e),f=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var d=a&&c;if(p&&e.length>0&&!t.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(h&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var y in e)(!d||"prototype"!==y)&&t.call(e,y)&&f.push(String(y));if(o)for(var v=function(e){if(typeof window>"u"||!u)return l(e);try{return l(e)}catch{return!1}}(e),b=0;b<s.length;++b)(!v||"constructor"!==s[b])&&t.call(e,s[b])&&f.push(s[b]);return f}}return sO=e}(),gO=Object.keys;mO.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return fO(e)?gO(pO.call(e)):gO(e)})}else Object.keys=mO;return Object.keys||mO};var yO,vO=mO,bO=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0},_O=typeof Symbol<"u"&&Symbol,TO=bO,EO=function(){return"function"==typeof _O&&"function"==typeof Symbol&&"symbol"==typeof _O("foo")&&"symbol"==typeof Symbol("bar")&&TO()},SO={foo:{}},wO=Object,AO=function(){return{__proto__:SO}.foo===SO.foo&&!({__proto__:null}instanceof wO)},OO=Object.prototype.toString,xO=Math.max,kO=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},IO=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==OO.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=function(e,t){for(var n=[],r=t||0,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n}(arguments,1),i=xO(0,t.length-r.length),o=[],a=0;a<i;a++)o[a]="$"+a;if(n=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(o,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var i=t.apply(this,kO(r,arguments));return Object(i)===i?i:this}return t.apply(e,kO(r,arguments))})),t.prototype){var s=function(){};s.prototype=t.prototype,n.prototype=new s,s.prototype=null}return n},CO=Function.prototype.bind||IO,PO=Function.prototype.call,DO=Object.prototype.hasOwnProperty,RO=CO.call(PO,DO),NO=SyntaxError,MO=Function,LO=TypeError,jO=function(e){try{return MO('"use strict"; return ('+e+").constructor;")()}catch{}},BO=Object.getOwnPropertyDescriptor;if(BO)try{BO({},"")}catch{BO=null}var FO=function(){throw new LO},GO=BO?function(){try{return FO}catch{try{return BO(arguments,"callee").get}catch{return FO}}}():FO,HO=EO(),UO=AO(),zO=Object.getPrototypeOf||(UO?function(e){return e.__proto__}:null),VO={},XO=typeof Uint8Array>"u"||!zO?yO:zO(Uint8Array),YO={"%AggregateError%":typeof AggregateError>"u"?yO:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?yO:ArrayBuffer,"%ArrayIteratorPrototype%":HO&&zO?zO([][Symbol.iterator]()):yO,"%AsyncFromSyncIteratorPrototype%":yO,"%AsyncFunction%":VO,"%AsyncGenerator%":VO,"%AsyncGeneratorFunction%":VO,"%AsyncIteratorPrototype%":VO,"%Atomics%":typeof Atomics>"u"?yO:Atomics,"%BigInt%":typeof BigInt>"u"?yO:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?yO:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?yO:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?yO:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?yO:Float32Array,"%Float64Array%":typeof Float64Array>"u"?yO:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?yO:FinalizationRegistry,"%Function%":MO,"%GeneratorFunction%":VO,"%Int8Array%":typeof Int8Array>"u"?yO:Int8Array,"%Int16Array%":typeof Int16Array>"u"?yO:Int16Array,"%Int32Array%":typeof Int32Array>"u"?yO:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":HO&&zO?zO(zO([][Symbol.iterator]())):yO,"%JSON%":"object"==typeof JSON?JSON:yO,"%Map%":typeof Map>"u"?yO:Map,"%MapIteratorPrototype%":typeof Map>"u"||!HO||!zO?yO:zO((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?yO:Promise,"%Proxy%":typeof Proxy>"u"?yO:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?yO:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?yO:Set,"%SetIteratorPrototype%":typeof Set>"u"||!HO||!zO?yO:zO((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?yO:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":HO&&zO?zO(""[Symbol.iterator]()):yO,"%Symbol%":HO?Symbol:yO,"%SyntaxError%":NO,"%ThrowTypeError%":GO,"%TypedArray%":XO,"%TypeError%":LO,"%Uint8Array%":typeof Uint8Array>"u"?yO:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?yO:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?yO:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?yO:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?yO:WeakMap,"%WeakRef%":typeof WeakRef>"u"?yO:WeakRef,"%WeakSet%":typeof WeakSet>"u"?yO:WeakSet};if(zO)try{null.error}catch(r){var WO=zO(zO(r));YO["%Error.prototype%"]=WO}var qO=function e(t){var n;if("%AsyncFunction%"===t)n=jO("async function () {}");else if("%GeneratorFunction%"===t)n=jO("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=jO("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&zO&&(n=zO(i.prototype))}return YO[t]=n,n},$O={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},KO=CO,QO=RO,ZO=KO.call(Function.call,Array.prototype.concat),JO=KO.call(Function.apply,Array.prototype.splice),ex=KO.call(Function.call,String.prototype.replace),tx=KO.call(Function.call,String.prototype.slice),nx=KO.call(Function.call,RegExp.prototype.exec),rx=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ix=/\\(\\)?/g,ox=function(e,t){var n,r=e;if(QO($O,r)&&(r="%"+(n=$O[r])[0]+"%"),QO(YO,r)){var i=YO[r];if(i===VO&&(i=qO(r)),typeof i>"u"&&!t)throw new LO("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new NO("intrinsic "+e+" does not exist!")},ax=function(e,t){if("string"!=typeof e||0===e.length)throw new LO("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new LO('"allowMissing" argument must be a boolean');if(null===nx(/^%?[^%]*%?$/,e))throw new NO("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=tx(e,0,1),n=tx(e,-1);if("%"===t&&"%"!==n)throw new NO("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new NO("invalid intrinsic syntax, expected opening `%`");var r=[];return ex(e,rx,(function(e,t,n,i){r[r.length]=n?ex(i,ix,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=ox("%"+r+"%",t),o=i.name,a=i.value,s=!1,l=i.alias;l&&(r=l[0],JO(n,ZO([0,1],l)));for(var c=1,u=!0;c<n.length;c+=1){var h=n[c],p=tx(h,0,1),f=tx(h,-1);if(('"'===p||"'"===p||"`"===p||'"'===f||"'"===f||"`"===f)&&p!==f)throw new NO("property names with quotes must have matching quotes");if(("constructor"===h||!u)&&(s=!0),QO(YO,o="%"+(r+="."+h)+"%"))a=YO[o];else if(null!=a){if(!(h in a)){if(!t)throw new LO("base intrinsic for "+e+" exists, but the property is not available.");return}if(BO&&c+1>=n.length){var d=BO(a,h);a=(u=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[h]}else u=QO(a,h),a=a[h];u&&!s&&(YO[o]=a)}}return a},sx=ax("%Object.defineProperty%",!0),lx=function(){if(sx)try{return sx({},"a",{value:1}),!0}catch{return!1}return!1};lx.hasArrayLengthDefineBug=function(){if(!lx())return null;try{return 1!==sx([],"length",{value:1}).length}catch{return!0}};var cx=lx,ux=ax("%Object.getOwnPropertyDescriptor%",!0);if(ux)try{ux([],"length")}catch{ux=null}var hx=ux,px=cx(),fx=ax,dx=px&&fx("%Object.defineProperty%",!0);if(dx)try{dx({},"a",{value:1})}catch{dx=!1}var mx=fx("%SyntaxError%"),gx=fx("%TypeError%"),yx=hx,vx=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new gx("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new gx("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new gx("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new gx("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new gx("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new gx("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],s=!!yx&&yx(e,t);if(dx)dx(e,t,{configurable:null===o&&s?s.configurable:!o,enumerable:null===r&&s?s.enumerable:!r,value:n,writable:null===i&&s?s.writable:!i});else{if(!a&&(r||i||o))throw new mx("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}},bx=vO,_x="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Tx=Object.prototype.toString,Ex=Array.prototype.concat,Sx=vx,wx=cx(),Ax=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if(!function(e){return"function"==typeof e&&"[object Function]"===Tx.call(e)}(r)||!r())return;wx?Sx(e,t,n,!0):Sx(e,t,n)},Ox=function(e,t){var n=arguments.length>2?arguments[2]:{},r=bx(t);_x&&(r=Ex.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)Ax(e,r[i],t[r[i]],n[r[i]])};Ox.supportsDescriptors=!!wx;var xx=Ox,kx={exports:{}},Ix=ax,Cx=vx,Px=cx(),Dx=hx,Rx=Ix("%TypeError%"),Nx=Ix("%Math.floor%"),Mx=function(e,t){if("function"!=typeof e)throw new Rx("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||Nx(t)!==t)throw new Rx("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,i=!0;if("length"in e&&Dx){var o=Dx(e,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(i=!1)}return(r||i||!n)&&(Px?Cx(e,"length",t,!0,!0):Cx(e,"length",t)),e};!function(e){var t=CO,n=ax,r=Mx,i=n("%TypeError%"),o=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||t.call(a,o),l=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}e.exports=function(e){if("function"!=typeof e)throw new i("a function is required");var n=s(t,a,arguments);return r(n,1+c(0,e.length-(arguments.length-1)),!0)};var u=function(){return s(t,o,arguments)};l?l(e.exports,"apply",{value:u}):e.exports.apply=u}(kx);var Lx=kx.exports,jx=ax,Bx=Lx,Fx=Bx(jx("String.prototype.indexOf")),Gx=function(e,t){var n=jx(e,!!t);return"function"==typeof n&&Fx(e,".prototype.")>-1?Bx(n):n},Hx=vO,Ux=bO(),zx=Gx,Vx=Object,Xx=zx("Array.prototype.push"),Yx=zx("Object.prototype.propertyIsEnumerable"),Wx=Ux?Object.getOwnPropertySymbols:null,qx=function(e,t){if(null==e)throw new TypeError("target must be an object");var n=Vx(e);if(1===arguments.length)return n;for(var r=1;r<arguments.length;++r){var i=Vx(arguments[r]),o=Hx(i),a=Ux&&(Object.getOwnPropertySymbols||Wx);if(a)for(var s=a(i),l=0;l<s.length;++l){var c=s[l];Yx(i,c)&&Xx(o,c)}for(var u=0;u<o.length;++u){var h=o[u];if(Yx(i,h)){var p=i[h];n[h]=p}}}return n},$x=qx,Kx=function(){return!Object.assign||function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return"y"===e[1]}return!1}()?$x:Object.assign},Qx=xx,Zx=Kx,Jx=xx,ek=qx,tk=Kx,nk=function(){var e=Zx();return Qx(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},rk=Lx.apply(tk()),ik=function(e,t){return rk(Object,arguments)};Jx(ik,{getPolyfill:tk,implementation:ek,shim:nk});var ok,ak,sk,lk,ck=ik,uk=Number.isNaN||function(e){return e!==e},hk=uk,pk=function(e){return("number"==typeof e||"bigint"==typeof e)&&!hk(e)&&e!==1/0&&e!==-1/0};function fk(){if(ak)return ok;ak=1;var e=ax,t=e("%Math.abs%"),n=e("%Math.floor%"),r=uk,i=pk;return ok=function(e){if("number"!=typeof e||r(e)||!i(e))return!1;var o=t(e);return n(o)===o}}const dk=Ps(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var mk="function"==typeof Map&&Map.prototype,gk=Object.getOwnPropertyDescriptor&&mk?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yk=mk&&gk&&"function"==typeof gk.get?gk.get:null,vk=mk&&Map.prototype.forEach,bk="function"==typeof Set&&Set.prototype,_k=Object.getOwnPropertyDescriptor&&bk?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Tk=bk&&_k&&"function"==typeof _k.get?_k.get:null,Ek=bk&&Set.prototype.forEach,Sk="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,wk="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Ak="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Ok=Boolean.prototype.valueOf,xk=Object.prototype.toString,kk=Function.prototype.toString,Ik=String.prototype.match,Ck=String.prototype.slice,Pk=String.prototype.replace,Dk=String.prototype.toUpperCase,Rk=String.prototype.toLowerCase,Nk=RegExp.prototype.test,Mk=Array.prototype.concat,Lk=Array.prototype.join,jk=Array.prototype.slice,Bk=Math.floor,Fk="function"==typeof BigInt?BigInt.prototype.valueOf:null,Gk=Object.getOwnPropertySymbols,Hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Uk="function"==typeof Symbol&&"object"==typeof Symbol.iterator,zk="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,Vk=Object.prototype.propertyIsEnumerable,Xk=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Yk(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Nk.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-Bk(-e):Bk(e);if(r!==e){var i=String(r),o=Ck.call(t,i.length+1);return Pk.call(i,n,"$&_")+"."+Pk.call(Pk.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pk.call(t,n,"$&_")}var Wk=dk,qk=Wk.custom,$k=tI(qk)?qk:null,Kk=function e(t,n,r,i){var o=n||{};if(cI(o,"quoteStyle")&&"single"!==o.quoteStyle&&"double"!==o.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(cI(o,"maxStringLength")&&("number"==typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!cI(o,"customInspect")||o.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(cI(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(cI(o,"numericSeparator")&&"boolean"!=typeof o.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return pI(t,o);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return s?Yk(t,l):l}if("bigint"==typeof t){var c=String(t)+"n";return s?Yk(t,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&"object"==typeof t)return Jk(t)?"[Array]":"[Object]";var h=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Lk.call(Array(e.indent+1)," ")}return{base:n,prev:Lk.call(Array(t+1),n)}}(o,r);if(typeof i>"u")i=[];else if(hI(i,t)>=0)return"[Circular]";function p(t,n,a){if(n&&(i=jk.call(i)).push(n),a){var s={depth:o.depth};return cI(o,"quoteStyle")&&(s.quoteStyle=o.quoteStyle),e(t,s,r+1,i)}return e(t,o,r+1,i)}if("function"==typeof t&&!eI(t)){var f=function(e){if(e.name)return e.name;var t=Ik.call(kk.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),d=vI(t,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(d.length>0?" { "+Lk.call(d,", ")+" }":"")}if(tI(t)){var m=Uk?Pk.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hk.call(t);return"object"!=typeof t||Uk?m:dI(m)}if(function(e){return!(!e||"object"!=typeof e)&&(typeof HTMLElement<"u"&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var g="<"+Rk.call(String(t.nodeName)),y=t.attributes||[],v=0;v<y.length;v++)g+=" "+y[v].name+"="+Qk(Zk(y[v].value),"double",o);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Rk.call(String(t.nodeName))+">"}if(Jk(t)){if(0===t.length)return"[]";var b=vI(t,p);return h&&!function(e){for(var t=0;t<e.length;t++)if(hI(e[t],"\n")>=0)return!1;return!0}(b)?"["+yI(b,h)+"]":"[ "+Lk.call(b,", ")+" ]"}if(function(e){return"[object Error]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}(t)){var _=vI(t,p);return"cause"in Error.prototype||!("cause"in t)||Vk.call(t,"cause")?0===_.length?"["+String(t)+"]":"{ ["+String(t)+"] "+Lk.call(_,", ")+" }":"{ ["+String(t)+"] "+Lk.call(Mk.call("[cause]: "+p(t.cause),_),", ")+" }"}if("object"==typeof t&&a){if($k&&"function"==typeof t[$k]&&Wk)return Wk(t,{depth:u-r});if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!yk||!e||"object"!=typeof e)return!1;try{yk.call(e);try{Tk.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}(t)){var T=[];return vk&&vk.call(t,(function(e,n){T.push(p(n,t,!0)+" => "+p(e,t))})),gI("Map",yk.call(t),T,h)}if(function(e){if(!Tk||!e||"object"!=typeof e)return!1;try{Tk.call(e);try{yk.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}(t)){var E=[];return Ek&&Ek.call(t,(function(e){E.push(p(e,t))})),gI("Set",Tk.call(t),E,h)}if(function(e){if(!Sk||!e||"object"!=typeof e)return!1;try{Sk.call(e,Sk);try{wk.call(e,wk)}catch{return!0}return e instanceof WeakMap}catch{}return!1}(t))return mI("WeakMap");if(function(e){if(!wk||!e||"object"!=typeof e)return!1;try{wk.call(e,wk);try{Sk.call(e,Sk)}catch{return!0}return e instanceof WeakSet}catch{}return!1}(t))return mI("WeakSet");if(function(e){if(!Ak||!e||"object"!=typeof e)return!1;try{return Ak.call(e),!0}catch{}return!1}(t))return mI("WeakRef");if(function(e){return"[object Number]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}(t))return dI(p(Number(t)));if(function(e){if(!e||"object"!=typeof e||!Fk)return!1;try{return Fk.call(e),!0}catch{}return!1}(t))return dI(p(Fk.call(t)));if(function(e){return"[object Boolean]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}(t))return dI(Ok.call(t));if(function(e){return"[object String]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}(t))return dI(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===globalThis)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}(t)&&!eI(t)){var S=vI(t,p),w=Xk?Xk(t)===Object.prototype:t instanceof Object||t.constructor===Object,A=t instanceof Object?"":"null prototype",O=!w&&zk&&Object(t)===t&&zk in t?Ck.call(uI(t),8,-1):A?"Object":"",x=(w||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(O||A?"["+Lk.call(Mk.call([],O||[],A||[]),": ")+"] ":"");return 0===S.length?x+"{}":h?x+"{"+yI(S,h)+"}":x+"{ "+Lk.call(S,", ")+" }"}return String(t)};function Qk(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function Zk(e){return Pk.call(String(e),/"/g,"&quot;")}function Jk(e){return"[object Array]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}function eI(e){return"[object RegExp]"===uI(e)&&(!zk||!("object"==typeof e&&zk in e))}function tI(e){if(Uk)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!Hk)return!1;try{return Hk.call(e),!0}catch{}return!1}var nI,rI,iI,oI,aI,sI,lI=Object.prototype.hasOwnProperty||function(e){return e in this};function cI(e,t){return lI.call(e,t)}function uI(e){return xk.call(e)}function hI(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function pI(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return pI(Ck.call(e,0,t.maxStringLength),t)+r}return Qk(Pk.call(Pk.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,fI),"single",t)}function fI(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+Dk.call(t.toString(16))}function dI(e){return"Object("+e+")"}function mI(e){return e+" { ? }"}function gI(e,t,n,r){return e+" ("+t+") {"+(r?yI(n,r):Lk.call(n,", "))+"}"}function yI(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+Lk.call(e,","+n)+"\n"+t.prev}function vI(e,t){var n=Jk(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=cI(e,i)?t(e[i],e):""}var o,a="function"==typeof Gk?Gk(e):[];if(Uk){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in e)cI(e,l)&&(n&&String(Number(l))===l&&l<e.length||Uk&&o["$"+l]instanceof Symbol||(Nk.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof Gk)for(var c=0;c<a.length;c++)Vk.call(e,a[c])&&r.push("["+t(a[c])+"]: "+t(e[a[c]],e));return r}function bI(){return rI||(rI=1,nI=function(e){return"string"==typeof e||"symbol"==typeof e}),nI}function _I(){if(sI)return aI;sI=1;var e=(oI||(oI=1,iI=function(e){return null===e?"Null":typeof e>"u"?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}),iI);return aI=function(t){return"symbol"==typeof t?"Symbol":"bigint"==typeof t?"BigInt":e(t)}}var TI,EI,SI,wI,AI=ax("%TypeError%"),OI=Kk,xI=bI(),kI=_I(),II=function(e,t){if("Object"!==kI(e))throw new AI("Assertion failed: Type(O) is not Object");if(!xI(t))throw new AI("Assertion failed: IsPropertyKey(P) is not true, got "+OI(t));return e[t]};function CI(){if(EI)return TI;EI=1;var e=ax("%Array%"),t=!e.isArray&&Gx("Object.prototype.toString");return TI=e.isArray||function(e){return"[object Array]"===t(e)}}function PI(){return wI||(wI=1,SI=CI()),SI}var DI,RI,NI,MI,LI,jI,BI,FI,GI,HI,UI,zI,VI,XI,YI,WI,qI,$I,KI,QI,ZI={exports:{}};function JI(){if(MI)return NI;MI=1;var e=RO,t=ax("%TypeError%");return NI=function(n,r){if("Object"!==n.Type(r))return!1;var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var o in r)if(e(r,o)&&!i[o])return!1;if(n.IsDataDescriptor(r)&&n.IsAccessorDescriptor(r))throw new t("Property Descriptors may not be both accessor and data descriptors");return!0}}function eC(){if(jI)return LI;jI=1;var e=cx,t=ax,n=e()&&t("%Object.defineProperty%",!0),r=e.hasArrayLengthDefineBug(),i=r&&CI(),o=Gx("Object.prototype.propertyIsEnumerable");return LI=function(e,t,a,s,l,c){if(!n){if(!e(c)||!c["[[Configurable]]"]||!c["[[Writable]]"]||l in s&&o(s,l)!==!!c["[[Enumerable]]"])return!1;var u=c["[[Value]]"];return s[l]=u,t(s[l],u)}return r&&"length"===l&&"[[Value]]"in c&&i(s)&&s.length!==c["[[Value]]"]?(s.length=c["[[Value]]"],s.length===c["[[Value]]"]):(n(s,l,a(c)),!0)}}function tC(){if(HI)return GI;HI=1;var e=ax,t=e("%TypeError%"),n=e("%SyntaxError%"),r=RO,i=fk(),o=function(){if(FI)return BI;FI=1;var e=RO;return BI=function(t){return e(t,"[[StartIndex]]")&&e(t,"[[EndIndex]]")&&t["[[StartIndex]]"]>=0&&t["[[EndIndex]]"]>=t["[[StartIndex]]"]&&String(parseInt(t["[[StartIndex]]"],10))===String(t["[[StartIndex]]"])&&String(parseInt(t["[[EndIndex]]"],10))===String(t["[[EndIndex]]"])}}(),a={"Property Descriptor":function(e){var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};if(!e)return!1;for(var i in e)if(r(e,i)&&!n[i])return!1;var o=r(e,"[[Value]]"),a=r(e,"[[Get]]")||r(e,"[[Set]]");if(o&&a)throw new t("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":o,"Iterator Record":function(e){return r(e,"[[Iterator]]")&&r(e,"[[NextMethod]]")&&r(e,"[[Done]]")},"PromiseCapability Record":function(e){return!!e&&r(e,"[[Resolve]]")&&"function"==typeof e["[[Resolve]]"]&&r(e,"[[Reject]]")&&"function"==typeof e["[[Reject]]"]&&r(e,"[[Promise]]")&&e["[[Promise]]"]&&"function"==typeof e["[[Promise]]"].then},"AsyncGeneratorRequest Record":function(e){return!!e&&r(e,"[[Completion]]")&&r(e,"[[Capability]]")&&a["PromiseCapability Record"](e["[[Capability]]"])},"RegExp Record":function(e){return e&&r(e,"[[IgnoreCase]]")&&"boolean"==typeof e["[[IgnoreCase]]"]&&r(e,"[[Multiline]]")&&"boolean"==typeof e["[[Multiline]]"]&&r(e,"[[DotAll]]")&&"boolean"==typeof e["[[DotAll]]"]&&r(e,"[[Unicode]]")&&"boolean"==typeof e["[[Unicode]]"]&&r(e,"[[CapturingGroupsCount]]")&&"number"==typeof e["[[CapturingGroupsCount]]"]&&i(e["[[CapturingGroupsCount]]"])&&e["[[CapturingGroupsCount]]"]>=0}};return GI=function(e,r,i,o){var s=a[r];if("function"!=typeof s)throw new n("unknown record type: "+r);if("Object"!==e(o)||!s(o))throw new t(i+" must be a "+r)}}function nC(){if(XI)return VI;XI=1;var e=tC(),t=(zI||(zI=1,UI=function(e){if(typeof e>"u")return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}),UI),n=_I();return VI=function(r){return typeof r<"u"&&e(n,"Property Descriptor","Desc",r),t(r)}}function rC(){if(WI)return YI;WI=1;var e=RO,t=_I(),n=tC();return YI=function(r){return!(typeof r>"u"||(n(t,"Property Descriptor","Desc",r),!e(r,"[[Get]]")&&!e(r,"[[Set]]")))}}function iC(){if($I)return qI;$I=1;var e=RO,t=_I(),n=tC();return qI=function(r){return!(typeof r>"u"||(n(t,"Property Descriptor","Desc",r),!e(r,"[[Value]]")&&!e(r,"[[Writable]]")))}}function oC(){if(QI)return KI;QI=1;var e=uk;return KI=function(t,n){return t===n?0!==t||1/t===1/n:e(t)&&e(n)}}var aC,sC,lC=function(e){return!!e},cC=Function.prototype.toString,uC="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof uC&&"function"==typeof Object.defineProperty)try{aC=Object.defineProperty({},"length",{get:function(){throw sC}}),sC={},uC((function(){throw 42}),null,aC)}catch(r){r!==sC&&(uC=null)}else uC=null;var hC=/^\s*class\b/,pC=function(e){try{var t=cC.call(e);return hC.test(t)}catch{return!1}},fC=function(e){try{return!pC(e)&&(cC.call(e),!0)}catch{return!1}},dC=Object.prototype.toString,mC="function"==typeof Symbol&&!!Symbol.toStringTag,gC=!(0 in[,]),yC=function(){return!1};if("object"==typeof document){var vC=document.all;dC.call(vC)===dC.call(document.all)&&(yC=function(e){if((gC||!e)&&(typeof e>"u"||"object"==typeof e))try{var t=dC.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch{}return!1})}var bC,_C,TC,EC,SC,wC=uC?function(e){if(yC(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{uC(e,null,aC)}catch(t){if(t!==sC)return!1}return!pC(e)&&fC(e)}:function(e){if(yC(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(mC)return fC(e);if(pC(e))return!1;var t=dC.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&fC(e)},AC=wC;function OC(){if(_C)return bC;_C=1;var e=RO,t=ax("%TypeError%"),n=_I(),r=lC,i=AC;return bC=function(o){if("Object"!==n(o))throw new t("ToPropertyDescriptor requires an object");var a={};if(e(o,"enumerable")&&(a["[[Enumerable]]"]=r(o.enumerable)),e(o,"configurable")&&(a["[[Configurable]]"]=r(o.configurable)),e(o,"value")&&(a["[[Value]]"]=o.value),e(o,"writable")&&(a["[[Writable]]"]=r(o.writable)),e(o,"get")){var s=o.get;if(typeof s<"u"&&!i(s))throw new t("getter must be a function");a["[[Get]]"]=s}if(e(o,"set")){var l=o.set;if(typeof l<"u"&&!i(l))throw new t("setter must be a function");a["[[Set]]"]=l}if((e(a,"[[Get]]")||e(a,"[[Set]]"))&&(e(a,"[[Value]]")||e(a,"[[Writable]]")))throw new t("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return a}}var xC,kC,IC,CC,PC,DC,RC,NC,MC,LC,jC,BC,FC,GC,HC,UC,zC,VC,XC,YC,WC,qC,$C=ax,KC=$C("%Symbol.species%",!0),QC=$C("%TypeError%"),ZC=function(){if(lk)return sk;lk=1;var e=ax,t=e("%Array.prototype%"),n=e("%RangeError%"),r=e("%SyntaxError%"),i=e("%TypeError%"),o=fk(),a=Math.pow(2,32)-1,s=AO(),l=e("%Object.setPrototypeOf%",!0)||(s?function(e,t){return e.__proto__=t,e}:null);return sk=function(e){if(!o(e)||e<0)throw new i("Assertion failed: `length` must be an integer Number >= 0");if(e>a)throw new n("length is greater than (2**32 - 1)");var s=arguments.length>1?arguments[1]:t,c=[];if(s!==t){if(!l)throw new r("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");l(c,s)}return 0!==e&&(c.length=e),c}}(),JC=II,eP=PI(),tP=function(){if(SC)return ZI.exports;SC=1;var e=(RI||(RI=1,DI=ax),DI)("%Reflect.construct%",!0),t=function(){if(EC)return TC;EC=1;var e=ax("%TypeError%"),t=JI(),n=eC(),r=nC(),i=rC(),o=iC(),a=bI(),s=oC(),l=OC(),c=_I();return TC=function(u,h,p){if("Object"!==c(u))throw new e("Assertion failed: Type(O) is not Object");if(!a(h))throw new e("Assertion failed: IsPropertyKey(P) is not true");var f=t({Type:c,IsDataDescriptor:o,IsAccessorDescriptor:i},p)?p:l(p);if(!t({Type:c,IsDataDescriptor:o,IsAccessorDescriptor:i},f))throw new e("Assertion failed: Desc is not a valid Property Descriptor");return n(o,s,r,u,h,f)}}();try{t({},"",{"[[Get]]":function(){}})}catch{t=null}if(t&&e){var n={},r={};t(r,"length",{"[[Get]]":function(){throw n},"[[Enumerable]]":!0}),ZI.exports=function(t){try{e(t,r)}catch(i){return i===n}}}else ZI.exports=function(e){return"function"==typeof e&&!!e.prototype};return ZI.exports}(),nP=_I(),rP=fk(),iP=function(e,t){if(!rP(t)||t<0)throw new QC("Assertion failed: length must be an integer >= 0");if(!eP(e))return ZC(t);var n=JC(e,"constructor");if(KC&&"Object"===nP(n)&&(null===(n=JC(n,KC))&&(n=void 0)),typeof n>"u")return ZC(t);if(!tP(n))throw new QC("C must be a constructor");return new n(t)},oP=Number.MAX_SAFE_INTEGER||9007199254740991;function aP(){if(kC)return xC;kC=1;var e=ax,t=Gx,n=e("%TypeError%"),r=PI(),i=e("%Reflect.apply%",!0)||t("Function.prototype.apply");return xC=function(e,t){var o=arguments.length>2?arguments[2]:[];if(!r(o))throw new n("Assertion failed: optional `argumentsList`, if provided, must be a List");return i(e,t,o)},xC}function sP(){return CC||(CC=1,IC=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}),IC}function lP(){if(BC)return jC;BC=1;var e=ax("%TypeError%"),t=eC(),n=(NC||(NC=1,RC=function(e,t){return!!t&&"object"==typeof t&&"[[Enumerable]]"in t&&"[[Configurable]]"in t&&(e.IsAccessorDescriptor(t)||e.IsDataDescriptor(t))}),RC),r=JI(),i=nC(),o=rC(),a=iC(),s=function(){if(LC)return MC;LC=1;var e=tC(),t=rC(),n=iC(),r=_I();return MC=function(i){return!(typeof i>"u")&&(e(r,"Property Descriptor","Desc",i),!t(i)&&!n(i))}}(),l=bI(),c=oC(),u=_I();return jC=function(h,p,f,d,m){var g,y,v=u(h);if("Undefined"!==v&&"Object"!==v)throw new e("Assertion failed: O must be undefined or an Object");if(!l(p))throw new e("Assertion failed: P must be a Property Key");if("Boolean"!==u(f))throw new e("Assertion failed: extensible must be a Boolean");if(!r({Type:u,IsDataDescriptor:a,IsAccessorDescriptor:o},d))throw new e("Assertion failed: Desc must be a Property Descriptor");if("Undefined"!==u(m)&&!r({Type:u,IsDataDescriptor:a,IsAccessorDescriptor:o},m))throw new e("Assertion failed: current must be a Property Descriptor, or undefined");if("Undefined"===u(m))return!!f&&("Undefined"===v||(o(d)?t(a,c,i,h,p,d):t(a,c,i,h,p,{"[[Configurable]]":!!d["[[Configurable]]"],"[[Enumerable]]":!!d["[[Enumerable]]"],"[[Value]]":d["[[Value]]"],"[[Writable]]":!!d["[[Writable]]"]})));if(!n({IsAccessorDescriptor:o,IsDataDescriptor:a},m))throw new e("`current`, when present, must be a fully populated and valid Property Descriptor");if(!m["[[Configurable]]"]){if("[[Configurable]]"in d&&d["[[Configurable]]"]||"[[Enumerable]]"in d&&!c(d["[[Enumerable]]"],m["[[Enumerable]]"])||!s(d)&&!c(o(d),o(m)))return!1;if(o(m)){if("[[Get]]"in d&&!c(d["[[Get]]"],m["[[Get]]"])||"[[Set]]"in d&&!c(d["[[Set]]"],m["[[Set]]"]))return!1}else if(!m["[[Writable]]"]&&("[[Writable]]"in d&&d["[[Writable]]"]||"[[Value]]"in d&&!c(d["[[Value]]"],m["[[Value]]"])))return!1}return"Undefined"===v||(a(m)&&o(d)?(g=("[[Configurable]]"in d?d:m)["[[Configurable]]"],y=("[[Enumerable]]"in d?d:m)["[[Enumerable]]"],t(a,c,i,h,p,{"[[Configurable]]":!!g,"[[Enumerable]]":!!y,"[[Get]]":("[[Get]]"in d?d:m)["[[Get]]"],"[[Set]]":("[[Set]]"in d?d:m)["[[Set]]"]})):o(m)&&a(d)?(g=("[[Configurable]]"in d?d:m)["[[Configurable]]"],y=("[[Enumerable]]"in d?d:m)["[[Enumerable]]"],t(a,c,i,h,p,{"[[Configurable]]":!!g,"[[Enumerable]]":!!y,"[[Value]]":("[[Value]]"in d?d:m)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in d?d:m)["[[Writable]]"]})):t(a,c,i,h,p,d))}}function cP(){if(GC)return FC;GC=1;var e=ax,t=hx,n=e("%SyntaxError%"),r=e("%TypeError%"),i=JI(),o=rC(),a=iC(),s=function(){if(DC)return PC;DC=1;var e=ax,t=e("%Object.preventExtensions%",!0),n=e("%Object.isExtensible%",!0),r=sP();return PC=t?function(e){return!r(e)&&n(e)}:function(e){return!r(e)}}(),l=bI(),c=OC(),u=oC(),h=_I(),p=lP();return FC=function(e,f,d){if("Object"!==h(e))throw new r("Assertion failed: O must be an Object");if(!l(f))throw new r("Assertion failed: P must be a Property Key");if(!i({Type:h,IsDataDescriptor:a,IsAccessorDescriptor:o},d))throw new r("Assertion failed: Desc must be a Property Descriptor");if(!t){if(o(d))throw new n("This environment does not support accessor property descriptors.");var m=!(f in e)&&d["[[Writable]]"]&&d["[[Enumerable]]"]&&d["[[Configurable]]"]&&"[[Value]]"in d,g=f in e&&(!("[[Configurable]]"in d)||d["[[Configurable]]"])&&(!("[[Enumerable]]"in d)||d["[[Enumerable]]"])&&(!("[[Writable]]"in d)||d["[[Writable]]"])&&"[[Value]]"in d;if(m||g)return e[f]=d["[[Value]]"],u(e[f],d["[[Value]]"]);throw new n("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var y=t(e,f),v=y&&c(y),b=s(e);return p(e,f,b,d,v)}}function uP(){if(VC)return zC;VC=1;var e=ax("%TypeError%"),t=function(){if(UC)return HC;UC=1;var e=ax("%TypeError%"),t=bI(),n=cP(),r=_I();return HC=function(i,o,a){if("Object"!==r(i))throw new e("Assertion failed: Type(O) is not Object");if(!t(o))throw new e("Assertion failed: IsPropertyKey(P) is not true");return n(i,o,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":a,"[[Writable]]":!0})}}(),n=bI(),r=_I();return zC=function(i,o,a){if("Object"!==r(i))throw new e("Assertion failed: Type(O) is not Object");if(!n(o))throw new e("Assertion failed: IsPropertyKey(P) is not true");if(!t(i,o,a))throw new e("unable to create data property")}}function hP(){if(YC)return XC;YC=1;var e=ax("%TypeError%"),t=bI(),n=_I();return XC=function(r,i){if("Object"!==n(r))throw new e("Assertion failed: `O` must be an Object");if(!t(i))throw new e("Assertion failed: `P` must be a Property Key");return i in r}}var pP,fP,dP=bO,mP=function(){return dP()&&!!Symbol.toStringTag};function gP(){if(fP)return pP;fP=1;var e=Date.prototype.getDay,t=Object.prototype.toString,n=mP();return pP=function(r){return"object"==typeof r&&null!==r&&(n?function(t){try{return e.call(t),!0}catch{return!1}}(r):"[object Date]"===t.call(r))}}var yP,vP,bP,_P,TP,EP={exports:{}};function SP(){if(yP)return EP.exports;yP=1;var e=Object.prototype.toString;if(EO()){var t=Symbol.prototype.toString,n=/^Symbol\(.*\)$/;EP.exports=function(r){if("symbol"==typeof r)return!0;if("[object Symbol]"!==e.call(r))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&n.test(t.call(e))}(r)}catch{return!1}}}else EP.exports=function(e){return!1};return EP.exports}function wP(){if(bP)return vP;bP=1;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,t=(qC||(qC=1,WC=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}),WC),n=wC,r=gP(),i=SP();return vP=function(o){if(t(o))return o;var a,s="default";if(arguments.length>1&&(arguments[1]===String?s="string":arguments[1]===Number&&(s="number")),e&&(Symbol.toPrimitive?a=function(e,t){var r=e[t];if(null!==r&&typeof r<"u"){if(!n(r))throw new TypeError(r+" returned for property "+t+" of object "+e+" is not a function");return r}}(o,Symbol.toPrimitive):i(o)&&(a=Symbol.prototype.valueOf)),typeof a<"u"){var l=a.call(o,s);if(t(l))return l;throw new TypeError("unable to convert exotic object to primitive")}return"default"===s&&(r(o)||i(o))&&(s="string"),function(e,r){if(typeof e>"u"||null===e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof r||"number"!==r&&"string"!==r)throw new TypeError('hint must be "string" or "number"');var i,o,a,s="string"===r?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(i=e[s[a]],n(i)&&(o=i.call(e),t(o)))return o;throw new TypeError("No default value")}(o,"default"===s?"number":s)},vP}var AP,OP,xP,kP,IP=Gx,CP=mP();if(CP){AP=IP("Object.prototype.hasOwnProperty"),OP=IP("RegExp.prototype.exec"),xP={};var PP=function(){throw xP};kP={toString:PP,valueOf:PP},"symbol"==typeof Symbol.toPrimitive&&(kP[Symbol.toPrimitive]=PP)}var DP,RP,NP=IP("Object.prototype.toString"),MP=Object.getOwnPropertyDescriptor,LP=CP?function(e){if(!e||"object"!=typeof e)return!1;var t=MP(e,"lastIndex");if(!(t&&AP(t,"value")))return!1;try{OP(e,kP)}catch(n){return n===xP}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===NP(e)};var jP=ax("%TypeError%"),BP=function(e,t){if(null==e)throw new jP(t||"Cannot call method on "+e);return e},FP=ax,GP=FP("%String%"),HP=FP("%TypeError%"),UP=function(e){if("symbol"==typeof e)throw new HP("Cannot convert a Symbol value to a string");return GP(e)},zP=BP,VP=UP,XP=Gx("String.prototype.replace"),YP=/^\s$/.test("\u180e"),WP=YP?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,qP=YP?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,$P=function(){var e=VP(zP(this));return XP(XP(e,WP,""),qP,"")},KP=$P,QP="\u180e",ZP=function(){return String.prototype.trim&&"\u200b"==="\u200b".trim()&&QP.trim()===QP&&"_\u180e"==="_\u180e".trim()&&"\u180e_"==="\u180e_".trim()?String.prototype.trim:KP},JP=xx,eD=ZP,tD=xx,nD=BP,rD=$P,iD=ZP,oD=function(){var e=eD();return JP(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e},aD=Lx(iD()),sD=function(e){return nD(e),aD(e)};tD(sD,{getPolyfill:iD,implementation:rD,shim:oD});var lD,cD,uD=sD;var hD,pD,fD=ax,dD=fD("%TypeError%"),mD=fD("%Number%"),gD=sP(),yD=function(){if(TP)return _P;TP=1;var e=wP();return _P=function(t){return arguments.length>1?e(t,arguments[1]):e(t)},_P}(),vD=function(){if(cD)return lD;cD=1;var e=ax,t=e("%Number%"),n=e("%RegExp%"),r=e("%TypeError%"),i=e("%parseInt%"),o=Gx,a=function(){if(RP)return DP;RP=1;var e=ax,t=LP,n=Gx("RegExp.prototype.exec"),r=e("%TypeError%");return DP=function(e){if(!t(e))throw new r("`regex` must be a RegExp");return function(t){return null!==n(e,t)}}}(),s=o("String.prototype.slice"),l=a(/^0b[01]+$/i),c=a(/^0o[0-7]+$/i),u=a(/^[-+]0x[0-9a-f]+$/i),h=a(new n("["+["\x85","\u200b","\ufffe"].join("")+"]","g")),p=uD,f=_I();return lD=function e(n){if("String"!==f(n))throw new r("Assertion failed: `argument` is not a String");if(l(n))return t(i(s(n,2),2));if(c(n))return t(i(s(n,2),8));if(h(n)||u(n))return NaN;var o=p(n);return o!==n?e(o):t(n)}}(),bD=_I(),_D=Math.floor,TD=function(e){return"BigInt"===bD(e)?e:_D(e)},ED=ax("%TypeError%"),SD=function(e){var t=gD(e)?e:yD(e,mD);if("symbol"==typeof t)throw new dD("Cannot convert a Symbol value to a number");if("bigint"==typeof t)throw new dD("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof t?vD(t):mD(t)},wD=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new ED("argument must be a Number or a BigInt");var t=e<0?-TD(-e):TD(e);return 0===t?0:t},AD=uk,OD=pk,xD=function(e){var t=SD(e);return AD(t)||0===t?0:OD(t)?wD(t):t},kD=oP,ID=xD,CD=function(e){var t=ID(e);return t<=0?0:t>kD?kD:t};function PD(){if(pD)return hD;pD=1;var e=ax("%TypeError%"),t=II,n=CD,r=_I();return hD=function(i){if("Object"!==r(i))throw new e("Assertion failed: `obj` must be an Object");return n(t(i,"length"))}}var DD,RD,ND,MD,LD=ax("%TypeError%"),jD=oP,BD=aP(),FD=uP(),GD=II,HD=hP(),UD=PI(),zD=PD(),VD=UP,XD=ax("%Object%"),YD=BP,WD=function(e){return YD(e),XD(e)},qD=iP,$D=function e(t,n,r,i,o){var a;arguments.length>5&&(a=arguments[5]);for(var s=i,l=0;l<r;){var c=VD(l);if(!0===HD(n,c)){var u=GD(n,c);if(typeof a<"u"){if(arguments.length<=6)throw new LD("Assertion failed: thisArg is required when mapperFunction is provided");u=BD(a,arguments[6],[u,l,n])}var h=!1;if(o>0&&(h=UD(u)),h){s=e(t,u,zD(u),s,o-1)}else{if(s>=jD)throw new LD("index too large");FD(t,VD(s),u),s+=1}}l+=1}return s},KD=II,QD=xD,ZD=CD,JD=WD,eR=function(){var e=JD(this),t=ZD(KD(e,"length")),n=1;arguments.length>0&&typeof arguments[0]<"u"&&(n=QD(arguments[0]));var r=qD(e,0);return $D(r,e,t,0,n),r},tR=eR,nR=function(){return Array.prototype.flat||tR};var rR=xx,iR=Lx,oR=eR,aR=nR,sR=aR(),lR=function(){if(MD)return ND;MD=1;var e=xx,t=function(){if(RD)return DD;RD=1;var e=RO,t="function"==typeof Symbol&&"symbol"==typeof Symbol.unscopables,n=t&&Array.prototype[Symbol.unscopables],r=TypeError;return DD=function(i){if("string"!=typeof i||!i)throw new r("method must be a non-empty string");if(!e(Array.prototype,i))throw new r("method must be on Array.prototype");t&&(n[i]=!0)}}(),n=nR;return ND=function(){var r=n();return e(Array.prototype,{flat:r},{flat:function(){return Array.prototype.flat!==r}}),t("flat"),r}}(),cR=iR(sR);rR(cR,{getPolyfill:aR,implementation:oR,shim:lR});var uR=cR,hR={}.hasOwnProperty,pR=Function.prototype.call,fR=pR.bind?pR.bind(hR):function(e,t){return pR.call(hR,e,t)},dR={},mR={exports:{}},gR=function(e){return e!==e},yR=function(e,t){return 0===e&&0===t?1/e===1/t:!!(e===t||gR(e)&&gR(t))},vR=yR,bR=function(){return"function"==typeof Object.is?Object.is:vR},_R=bR,TR=xx,ER=xx,SR=yR,wR=bR,AR=function(){var e=_R();return TR(Object,{is:e},{is:function(){return Object.is!==e}}),e},OR=Lx(wR(),Object);ER(OR,{getPolyfill:wR,implementation:SR,shim:AR});var xR=OR;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e,t))return!0;if(!e||!t||"object"!==o(e)||"object"!==o(t))return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;i.sort(),a.sort();for(var s=0;s<i.length;s+=1)if(!(0,r.default)(t,i[s])||!(0,n.default)(e[i[s]],t[i[s]]))return!1;return!0};var n=i(xR),r=i(fR);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default}(mR,mR.exports);var kR=mR.exports,IR=BP,CR=Gx,PR=CR("Object.prototype.propertyIsEnumerable"),DR=CR("Array.prototype.push"),RR=function(e){var t=IR(e),n=[];for(var r in t)PR(t,r)&&DR(n,[r,t[r]]);return n},NR=RR,MR=function(){return"function"==typeof Object.entries?Object.entries:NR},LR=MR,jR=xx,BR=xx,FR=RR,GR=MR,HR=function(){var e=LR();return jR(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e},UR=Lx(GR(),Object);BR(UR,{getPolyfill:GR,implementation:FR,shim:HR});var zR=UR,VR=ax("%TypeError%"),XR=RO,YR=bI(),WR=_I(),qR=function(){return"string"==typeof function(){}.name},$R=Object.getOwnPropertyDescriptor;if($R)try{$R([],"length")}catch{$R=null}qR.functionsHaveConfigurableNames=function(){if(!qR()||!$R)return!1;var e=$R((function(){}),"name");return!!e&&!!e.configurable};var KR=Function.prototype.bind;qR.boundFunctionsHaveNames=function(){return qR()&&"function"==typeof KR&&""!==function(){}.bind().name};var QR=qR,ZR=AC,JR=function(e,t){if("Object"!==WR(e))throw new VR("Assertion failed: `O` must be an Object");if(!YR(t))throw new VR("Assertion failed: `P` must be a Property Key");return XR(e,t)},eN=QR(),tN=Gx,nN=tN("Function.prototype.toString"),rN=tN("String.prototype.match"),iN=tN("Object.prototype.toString"),oN=/^class /,aN=/\s*function\s+([^(\s]*)\s*/,sN=!(0 in[,]),lN=Function.prototype,cN=function(){return!1};if("object"==typeof document){var uN=document.all;iN(uN)===iN(document.all)&&(cN=function(e){if((sN||!e)&&(typeof e>"u"||"object"==typeof e))try{var t=iN(e);return("[object HTMLAllCollection]"===t||"[object Object]"===t)&&null==e("")}catch{}return!1})}var hN=function(){if(cN(this)||!function(e){if(ZR(e)||"function"!=typeof e)return!1;try{return!!rN(nN(e),oN)}catch{}return!1}(this)&&!ZR(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(eN&&JR(this,"name"))return this.name;if(this===lN)return"";var e=nN(this),t=rN(e,aN);return t&&t[1]},pN=hN,fN=function(){return pN},dN=xx.supportsDescriptors,mN=QR(),gN=fN,yN=Object.defineProperty,vN=TypeError,bN=xx,_N=hN,TN=fN,EN=function(){var e=gN();if(mN)return e;if(!dN)throw new vN("Shimming Function.prototype.name support requires ES5 property descriptor support.");var t=Function.prototype;return yN(t,"name",{configurable:!0,enumerable:!1,get:function(){var n=e.call(this);return this!==t&&yN(this,"name",{configurable:!0,enumerable:!1,value:n,writable:!1}),n}}),e},SN=Lx(_N);bN(SN,{getPolyfill:TN,implementation:_N,shim:EN});var wN=SN,AN={},ON={};Object.defineProperty(ON,"__esModule",{value:!0});var xN={},kN={},IN=Is&&Is.__assign||function(){return IN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},IN.apply(this,arguments)};Object.defineProperty(kN,"__esModule",{value:!0}),kN.flatten=void 0;kN.default={xml:!1,decodeEntities:!0};var CN={_useHtmlParser2:!0,xmlMode:!0};kN.flatten=function(e){return e?.xml?"boolean"==typeof e.xml?CN:IN(IN({},CN),e.xml):e??void 0};var PN={},DN={},RN={},NN={},MN={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(n=t=e.ElementType||(e.ElementType={})).Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}(MN);var LN={},jN=Is&&Is.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),BN=Is&&Is.__assign||function(){return BN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},BN.apply(this,arguments)};Object.defineProperty(LN,"__esModule",{value:!0}),LN.cloneNode=LN.hasChildren=LN.isDocument=LN.isDirective=LN.isComment=LN.isText=LN.isCDATA=LN.isTag=LN.Element=LN.Document=LN.CDATA=LN.NodeWithChildren=LN.ProcessingInstruction=LN.Comment=LN.Text=LN.DataNode=LN.Node=void 0;var FN=MN,GN=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),tM(this,e)},e}();LN.Node=GN;var HN=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return jN(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(GN);LN.DataNode=HN;var UN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=FN.ElementType.Text,t}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(HN);LN.Text=UN;var zN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=FN.ElementType.Comment,t}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(HN);LN.Comment=zN;var VN=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=FN.ElementType.Directive,r}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(HN);LN.ProcessingInstruction=VN;var XN=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return jN(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(GN);LN.NodeWithChildren=XN;var YN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=FN.ElementType.CDATA,t}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(XN);LN.CDATA=YN;var WN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=FN.ElementType.Root,t}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(XN);LN.Document=WN;var qN=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?FN.ElementType.Script:"style"===t?FN.ElementType.Style:FN.ElementType.Tag);var o=e.call(this,r)||this;return o.name=t,o.attribs=n,o.type=i,o}return jN(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(XN);function $N(e){return(0,FN.isTag)(e)}function KN(e){return e.type===FN.ElementType.CDATA}function QN(e){return e.type===FN.ElementType.Text}function ZN(e){return e.type===FN.ElementType.Comment}function JN(e){return e.type===FN.ElementType.Directive}function eM(e){return e.type===FN.ElementType.Root}function tM(e,t){var n;if(void 0===t&&(t=!1),QN(e))n=new UN(e.data);else if(ZN(e))n=new zN(e.data);else if($N(e)){var r=t?nM(e.children):[],i=new qN(e.name,BN({},e.attribs),r);r.forEach((function(e){return e.parent=i})),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=BN({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=BN({},e["x-attribsPrefix"])),n=i}else if(KN(e)){r=t?nM(e.children):[];var o=new YN(r);r.forEach((function(e){return e.parent=o})),n=o}else if(eM(e)){r=t?nM(e.children):[];var a=new WN(r);r.forEach((function(e){return e.parent=a})),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else{if(!JN(e))throw new Error("Not implemented yet: ".concat(e.type));var s=new VN(e.name,e.data);null!=e["x-name"]&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),n=s}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function nM(e){for(var t=e.map((function(e){return tM(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}LN.Element=qN,LN.isTag=$N,LN.isCDATA=KN,LN.isText=QN,LN.isComment=ZN,LN.isDirective=JN,LN.isDocument=eM,LN.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},LN.cloneNode=tM,function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=MN,i=LN;n(LN,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function e(e,t,n){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=o),"object"==typeof e&&(t=e,e=void 0),this.callback=e??null,this.options=t??o,this.elementCB=n??null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?r.ElementType.Tag:void 0,o=new i.Element(e,t,void 0,n);this.addNode(o),this.tagStack.push(o)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===r.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new i.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=e;else{var t=new i.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new i.Text(""),t=new i.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new i.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=a,e.default=a}(NN);var rM={},iM={},oM={},aM={};Object.defineProperty(aM,"__esModule",{value:!0}),aM.default=new Uint16Array('\u1d41<\xd5\u0131\u028a\u049d\u057b\u05d0\u0675\u06de\u07a2\u07d6\u080f\u0a4a\u0a91\u0da1\u0e6d\u0f09\u0f26\u10ca\u1228\u12e1\u1415\u149d\u14c3\u14df\u1525\0\0\0\0\0\0\u156b\u16cd\u198d\u1c12\u1ddd\u1f7e\u2060\u21b0\u228d\u23c0\u23fb\u2442\u2824\u2912\u2d08\u2e48\u2fce\u3016\u32ba\u3639\u37ac\u38fe\u3a28\u3a71\u3ae0\u3b2e\u0800EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\u803b\xc6\u40c6P\u803b&\u4026cute\u803b\xc1\u40c1reve;\u4102\u0100iyx}rc\u803b\xc2\u40c2;\u4410r;\uc000\ud835\udd04rave\u803b\xc0\u40c0pha;\u4391acr;\u4100d;\u6a53\u0100gp\x9d\xa1on;\u4104f;\uc000\ud835\udd38plyFunction;\u6061ing\u803b\xc5\u40c5\u0100cs\xbe\xc3r;\uc000\ud835\udc9cign;\u6254ilde\u803b\xc3\u40c3ml\u803b\xc4\u40c4\u0400aceforsu\xe5\xfb\xfe\u0117\u011c\u0122\u0127\u012a\u0100cr\xea\xf2kslash;\u6216\u0176\xf6\xf8;\u6ae7ed;\u6306y;\u4411\u0180crt\u0105\u010b\u0114ause;\u6235noullis;\u612ca;\u4392r;\uc000\ud835\udd05pf;\uc000\ud835\udd39eve;\u42d8c\xf2\u0113mpeq;\u624e\u0700HOacdefhilorsu\u014d\u0151\u0156\u0180\u019e\u01a2\u01b5\u01b7\u01ba\u01dc\u0215\u0273\u0278\u027ecy;\u4427PY\u803b\xa9\u40a9\u0180cpy\u015d\u0162\u017aute;\u4106\u0100;i\u0167\u0168\u62d2talDifferentialD;\u6145leys;\u612d\u0200aeio\u0189\u018e\u0194\u0198ron;\u410cdil\u803b\xc7\u40c7rc;\u4108nint;\u6230ot;\u410a\u0100dn\u01a7\u01adilla;\u40b8terDot;\u40b7\xf2\u017fi;\u43a7rcle\u0200DMPT\u01c7\u01cb\u01d1\u01d6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01e2\u01f8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020foubleQuote;\u601duote;\u6019\u0200lnpu\u021e\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6a74\u0180git\u022f\u0236\u023aruent;\u6261nt;\u622fourIntegral;\u622e\u0100fr\u024c\u024e;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6a2fcr;\uc000\ud835\udc9ep\u0100;C\u0284\u0285\u62d3ap;\u624d\u0580DJSZacefios\u02a0\u02ac\u02b0\u02b4\u02b8\u02cb\u02d7\u02e1\u02e6\u0333\u048d\u0100;o\u0179\u02a5trahd;\u6911cy;\u4402cy;\u4405cy;\u440f\u0180grs\u02bf\u02c4\u02c7ger;\u6021r;\u61a1hv;\u6ae4\u0100ay\u02d0\u02d5ron;\u410e;\u4414l\u0100;t\u02dd\u02de\u6207a;\u4394r;\uc000\ud835\udd07\u0100af\u02eb\u0327\u0100cm\u02f0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031ccute;\u40b4o\u0174\u030b\u030d;\u42d9bleAcute;\u42ddrave;\u4060ilde;\u42dcond;\u62c4ferentialD;\u6146\u0470\u033d\0\0\0\u0342\u0354\0\u0405f;\uc000\ud835\udd3b\u0180;DE\u0348\u0349\u034d\u40a8ot;\u60dcqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03cf\u03e2\u03f8ontourIntegra\xec\u0239o\u0274\u0379\0\0\u037b\xbb\u0349nArrow;\u61d3\u0100eo\u0387\u03a4ft\u0180ART\u0390\u0396\u03a1rrow;\u61d0ightArrow;\u61d4e\xe5\u02cang\u0100LR\u03ab\u03c4eft\u0100AR\u03b3\u03b9rrow;\u67f8ightArrow;\u67faightArrow;\u67f9ight\u0100AT\u03d8\u03derrow;\u61d2ee;\u62a8p\u0241\u03e9\0\0\u03efrrow;\u61d1ownArrow;\u61d5erticalBar;\u6225n\u0300ABLRTa\u0412\u042a\u0430\u045e\u047f\u037crrow\u0180;BU\u041d\u041e\u0422\u6193ar;\u6913pArrow;\u61f5reve;\u4311eft\u02d2\u043a\0\u0446\0\u0450ightVector;\u6950eeVector;\u695eector\u0100;B\u0459\u045a\u61bdar;\u6956ight\u01d4\u0467\0\u0471eeVector;\u695fector\u0100;B\u047a\u047b\u61c1ar;\u6957ee\u0100;A\u0486\u0487\u62a4rrow;\u61a7\u0100ct\u0492\u0497r;\uc000\ud835\udc9frok;\u4110\u0800NTacdfglmopqstux\u04bd\u04c0\u04c4\u04cb\u04de\u04e2\u04e7\u04ee\u04f5\u0521\u052f\u0536\u0552\u055d\u0560\u0565G;\u414aH\u803b\xd0\u40d0cute\u803b\xc9\u40c9\u0180aiy\u04d2\u04d7\u04dcron;\u411arc\u803b\xca\u40ca;\u442dot;\u4116r;\uc000\ud835\udd08rave\u803b\xc8\u40c8ement;\u6208\u0100ap\u04fa\u04fecr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65fberySmallSquare;\u65ab\u0100gp\u0526\u052aon;\u4118f;\uc000\ud835\udd3csilon;\u4395u\u0100ai\u053c\u0549l\u0100;T\u0542\u0543\u6a75ilde;\u6242librium;\u61cc\u0100ci\u0557\u055ar;\u6130m;\u6a73a;\u4397ml\u803b\xcb\u40cb\u0100ip\u056a\u056fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058d\u05b2\u05ccy;\u4424r;\uc000\ud835\udd09lled\u0253\u0597\0\0\u05a3mallSquare;\u65fcerySmallSquare;\u65aa\u0370\u05ba\0\u05bf\0\0\u05c4f;\uc000\ud835\udd3dAll;\u6200riertrf;\u6131c\xf2\u05cb\u0600JTabcdfgorst\u05e8\u05ec\u05ef\u05fa\u0600\u0612\u0616\u061b\u061d\u0623\u066c\u0672cy;\u4403\u803b>\u403emma\u0100;d\u05f7\u05f8\u4393;\u43dcreve;\u411e\u0180eiy\u0607\u060c\u0610dil;\u4122rc;\u411c;\u4413ot;\u4120r;\uc000\ud835\udd0a;\u62d9pf;\uc000\ud835\udd3eeater\u0300EFGLST\u0635\u0644\u064e\u0656\u065b\u0666qual\u0100;L\u063e\u063f\u6265ess;\u62dbullEqual;\u6267reater;\u6aa2ess;\u6277lantEqual;\u6a7eilde;\u6273cr;\uc000\ud835\udca2;\u626b\u0400Aacfiosu\u0685\u068b\u0696\u069b\u069e\u06aa\u06be\u06caRDcy;\u442a\u0100ct\u0690\u0694ek;\u42c7;\u405eirc;\u4124r;\u610clbertSpace;\u610b\u01f0\u06af\0\u06b2f;\u610dizontalLine;\u6500\u0100ct\u06c3\u06c5\xf2\u06a9rok;\u4126mp\u0144\u06d0\u06d8ownHum\xf0\u012fqual;\u624f\u0700EJOacdfgmnostu\u06fa\u06fe\u0703\u0707\u070e\u071a\u071e\u0721\u0728\u0744\u0778\u078b\u078f\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803b\xcd\u40cd\u0100iy\u0713\u0718rc\u803b\xce\u40ce;\u4418ot;\u4130r;\u6111rave\u803b\xcc\u40cc\u0180;ap\u0720\u072f\u073f\u0100cg\u0734\u0737r;\u412ainaryI;\u6148lie\xf3\u03dd\u01f4\u0749\0\u0762\u0100;e\u074d\u074e\u622c\u0100gr\u0753\u0758ral;\u622bsection;\u62c2isible\u0100CT\u076c\u0772omma;\u6063imes;\u6062\u0180gpt\u077f\u0783\u0788on;\u412ef;\uc000\ud835\udd40a;\u4399cr;\u6110ilde;\u4128\u01eb\u079a\0\u079ecy;\u4406l\u803b\xcf\u40cf\u0280cfosu\u07ac\u07b7\u07bc\u07c2\u07d0\u0100iy\u07b1\u07b5rc;\u4134;\u4419r;\uc000\ud835\udd0dpf;\uc000\ud835\udd41\u01e3\u07c7\0\u07ccr;\uc000\ud835\udca5rcy;\u4408kcy;\u4404\u0380HJacfos\u07e4\u07e8\u07ec\u07f1\u07fd\u0802\u0808cy;\u4425cy;\u440cppa;\u439a\u0100ey\u07f6\u07fbdil;\u4136;\u441ar;\uc000\ud835\udd0epf;\uc000\ud835\udd42cr;\uc000\ud835\udca6\u0580JTaceflmost\u0825\u0829\u082c\u0850\u0863\u09b3\u09b8\u09c7\u09cd\u0a37\u0a47cy;\u4409\u803b<\u403c\u0280cmnpr\u0837\u083c\u0841\u0844\u084dute;\u4139bda;\u439bg;\u67ealacetrf;\u6112r;\u619e\u0180aey\u0857\u085c\u0861ron;\u413ddil;\u413b;\u441b\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087e\u08a9\u08b1\u08e0\u08e6\u08fc\u092f\u095b\u0390\u096a\u0100nr\u0883\u088fgleBracket;\u67e8row\u0180;BR\u0899\u089a\u089e\u6190ar;\u61e4ightArrow;\u61c6eiling;\u6308o\u01f5\u08b7\0\u08c3bleBracket;\u67e6n\u01d4\u08c8\0\u08d2eeVector;\u6961ector\u0100;B\u08db\u08dc\u61c3ar;\u6959loor;\u630aight\u0100AV\u08ef\u08f5rrow;\u6194ector;\u694e\u0100er\u0901\u0917e\u0180;AV\u0909\u090a\u0910\u62a3rrow;\u61a4ector;\u695aiangle\u0180;BE\u0924\u0925\u0929\u62b2ar;\u69cfqual;\u62b4p\u0180DTV\u0937\u0942\u094cownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61bfar;\u6958ector\u0100;B\u0965\u0966\u61bcar;\u6952ight\xe1\u039cs\u0300EFGLST\u097e\u098b\u0995\u099d\u09a2\u09adqualGreater;\u62daullEqual;\u6266reater;\u6276ess;\u6aa1lantEqual;\u6a7dilde;\u6272r;\uc000\ud835\udd0f\u0100;e\u09bd\u09be\u62d8ftarrow;\u61daidot;\u413f\u0180npw\u09d4\u0a16\u0a1bg\u0200LRlr\u09de\u09f7\u0a02\u0a10eft\u0100AR\u09e6\u09ecrrow;\u67f5ightArrow;\u67f7ightArrow;\u67f6eft\u0100ar\u03b3\u0a0aight\xe1\u03bfight\xe1\u03caf;\uc000\ud835\udd43er\u0100LR\u0a22\u0a2ceftArrow;\u6199ightArrow;\u6198\u0180cht\u0a3e\u0a40\u0a42\xf2\u084c;\u61b0rok;\u4141;\u626a\u0400acefiosu\u0a5a\u0a5d\u0a60\u0a77\u0a7c\u0a85\u0a8b\u0a8ep;\u6905y;\u441c\u0100dl\u0a65\u0a6fiumSpace;\u605flintrf;\u6133r;\uc000\ud835\udd10nusPlus;\u6213pf;\uc000\ud835\udd44c\xf2\u0a76;\u439c\u0480Jacefostu\u0aa3\u0aa7\u0aad\u0ac0\u0b14\u0b19\u0d91\u0d97\u0d9ecy;\u440acute;\u4143\u0180aey\u0ab4\u0ab9\u0aberon;\u4147dil;\u4145;\u441d\u0180gsw\u0ac7\u0af0\u0b0eative\u0180MTV\u0ad3\u0adf\u0ae8ediumSpace;\u600bhi\u0100cn\u0ae6\u0ad8\xeb\u0ad9eryThi\xee\u0ad9ted\u0100GL\u0af8\u0b06reaterGreate\xf2\u0673essLes\xf3\u0a48Line;\u400ar;\uc000\ud835\udd11\u0200Bnpt\u0b22\u0b28\u0b37\u0b3areak;\u6060BreakingSpace;\u40a0f;\u6115\u0680;CDEGHLNPRSTV\u0b55\u0b56\u0b6a\u0b7c\u0ba1\u0beb\u0c04\u0c5e\u0c84\u0ca6\u0cd8\u0d61\u0d85\u6aec\u0100ou\u0b5b\u0b64ngruent;\u6262pCap;\u626doubleVerticalBar;\u6226\u0180lqx\u0b83\u0b8a\u0b9bement;\u6209ual\u0100;T\u0b92\u0b93\u6260ilde;\uc000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0bb6\u0bb7\u0bbd\u0bc9\u0bd3\u0bd8\u0be5\u626fqual;\u6271ullEqual;\uc000\u2267\u0338reater;\uc000\u226b\u0338ess;\u6279lantEqual;\uc000\u2a7e\u0338ilde;\u6275ump\u0144\u0bf2\u0bfdownHump;\uc000\u224e\u0338qual;\uc000\u224f\u0338e\u0100fs\u0c0a\u0c27tTriangle\u0180;BE\u0c1a\u0c1b\u0c21\u62eaar;\uc000\u29cf\u0338qual;\u62ecs\u0300;EGLST\u0c35\u0c36\u0c3c\u0c44\u0c4b\u0c58\u626equal;\u6270reater;\u6278ess;\uc000\u226a\u0338lantEqual;\uc000\u2a7d\u0338ilde;\u6274ested\u0100GL\u0c68\u0c79reaterGreater;\uc000\u2aa2\u0338essLess;\uc000\u2aa1\u0338recedes\u0180;ES\u0c92\u0c93\u0c9b\u6280qual;\uc000\u2aaf\u0338lantEqual;\u62e0\u0100ei\u0cab\u0cb9verseElement;\u620cghtTriangle\u0180;BE\u0ccb\u0ccc\u0cd2\u62ebar;\uc000\u29d0\u0338qual;\u62ed\u0100qu\u0cdd\u0d0cuareSu\u0100bp\u0ce8\u0cf9set\u0100;E\u0cf0\u0cf3\uc000\u228f\u0338qual;\u62e2erset\u0100;E\u0d03\u0d06\uc000\u2290\u0338qual;\u62e3\u0180bcp\u0d13\u0d24\u0d4eset\u0100;E\u0d1b\u0d1e\uc000\u2282\u20d2qual;\u6288ceeds\u0200;EST\u0d32\u0d33\u0d3b\u0d46\u6281qual;\uc000\u2ab0\u0338lantEqual;\u62e1ilde;\uc000\u227f\u0338erset\u0100;E\u0d58\u0d5b\uc000\u2283\u20d2qual;\u6289ilde\u0200;EFT\u0d6e\u0d6f\u0d75\u0d7f\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uc000\ud835\udca9ilde\u803b\xd1\u40d1;\u439d\u0700Eacdfgmoprstuv\u0dbd\u0dc2\u0dc9\u0dd5\u0ddb\u0de0\u0de7\u0dfc\u0e02\u0e20\u0e22\u0e32\u0e3f\u0e44lig;\u4152cute\u803b\xd3\u40d3\u0100iy\u0dce\u0dd3rc\u803b\xd4\u40d4;\u441eblac;\u4150r;\uc000\ud835\udd12rave\u803b\xd2\u40d2\u0180aei\u0dee\u0df2\u0df6cr;\u414cga;\u43a9cron;\u439fpf;\uc000\ud835\udd46enCurly\u0100DQ\u0e0e\u0e1aoubleQuote;\u601cuote;\u6018;\u6a54\u0100cl\u0e27\u0e2cr;\uc000\ud835\udcaaash\u803b\xd8\u40d8i\u016c\u0e37\u0e3cde\u803b\xd5\u40d5es;\u6a37ml\u803b\xd6\u40d6er\u0100BP\u0e4b\u0e60\u0100ar\u0e50\u0e53r;\u603eac\u0100ek\u0e5a\u0e5c;\u63deet;\u63b4arenthesis;\u63dc\u0480acfhilors\u0e7f\u0e87\u0e8a\u0e8f\u0e92\u0e94\u0e9d\u0eb0\u0efcrtialD;\u6202y;\u441fr;\uc000\ud835\udd13i;\u43a6;\u43a0usMinus;\u40b1\u0100ip\u0ea2\u0eadncareplan\xe5\u069df;\u6119\u0200;eio\u0eb9\u0eba\u0ee0\u0ee4\u6abbcedes\u0200;EST\u0ec8\u0ec9\u0ecf\u0eda\u627aqual;\u6aaflantEqual;\u627cilde;\u627eme;\u6033\u0100dp\u0ee9\u0eeeuct;\u620fortion\u0100;a\u0225\u0ef9l;\u621d\u0100ci\u0f01\u0f06r;\uc000\ud835\udcab;\u43a8\u0200Ufos\u0f11\u0f16\u0f1b\u0f1fOT\u803b"\u4022r;\uc000\ud835\udd14pf;\u611acr;\uc000\ud835\udcac\u0600BEacefhiorsu\u0f3e\u0f43\u0f47\u0f60\u0f73\u0fa7\u0faa\u0fad\u1096\u10a9\u10b4\u10bearr;\u6910G\u803b\xae\u40ae\u0180cnr\u0f4e\u0f53\u0f56ute;\u4154g;\u67ebr\u0100;t\u0f5c\u0f5d\u61a0l;\u6916\u0180aey\u0f67\u0f6c\u0f71ron;\u4158dil;\u4156;\u4420\u0100;v\u0f78\u0f79\u611cerse\u0100EU\u0f82\u0f99\u0100lq\u0f87\u0f8eement;\u620builibrium;\u61cbpEquilibrium;\u696fr\xbb\u0f79o;\u43a1ght\u0400ACDFTUVa\u0fc1\u0feb\u0ff3\u1022\u1028\u105b\u1087\u03d8\u0100nr\u0fc6\u0fd2gleBracket;\u67e9row\u0180;BL\u0fdc\u0fdd\u0fe1\u6192ar;\u61e5eftArrow;\u61c4eiling;\u6309o\u01f5\u0ff9\0\u1005bleBracket;\u67e7n\u01d4\u100a\0\u1014eeVector;\u695dector\u0100;B\u101d\u101e\u61c2ar;\u6955loor;\u630b\u0100er\u102d\u1043e\u0180;AV\u1035\u1036\u103c\u62a2rrow;\u61a6ector;\u695biangle\u0180;BE\u1050\u1051\u1055\u62b3ar;\u69d0qual;\u62b5p\u0180DTV\u1063\u106e\u1078ownVector;\u694feeVector;\u695cector\u0100;B\u1082\u1083\u61bear;\u6954ector\u0100;B\u1091\u1092\u61c0ar;\u6953\u0100pu\u109b\u109ef;\u611dndImplies;\u6970ightarrow;\u61db\u0100ch\u10b9\u10bcr;\u611b;\u61b1leDelayed;\u69f4\u0680HOacfhimoqstu\u10e4\u10f1\u10f7\u10fd\u1119\u111e\u1151\u1156\u1161\u1167\u11b5\u11bb\u11bf\u0100Cc\u10e9\u10eeHcy;\u4429y;\u4428FTcy;\u442ccute;\u415a\u0280;aeiy\u1108\u1109\u110e\u1113\u1117\u6abcron;\u4160dil;\u415erc;\u415c;\u4421r;\uc000\ud835\udd16ort\u0200DLRU\u112a\u1134\u113e\u1149ownArrow\xbb\u041eeftArrow\xbb\u089aightArrow\xbb\u0fddpArrow;\u6191gma;\u43a3allCircle;\u6218pf;\uc000\ud835\udd4a\u0272\u116d\0\0\u1170t;\u621aare\u0200;ISU\u117b\u117c\u1189\u11af\u65a1ntersection;\u6293u\u0100bp\u118f\u119eset\u0100;E\u1197\u1198\u628fqual;\u6291erset\u0100;E\u11a8\u11a9\u6290qual;\u6292nion;\u6294cr;\uc000\ud835\udcaear;\u62c6\u0200bcmp\u11c8\u11db\u1209\u120b\u0100;s\u11cd\u11ce\u62d0et\u0100;E\u11cd\u11d5qual;\u6286\u0100ch\u11e0\u1205eeds\u0200;EST\u11ed\u11ee\u11f4\u11ff\u627bqual;\u6ab0lantEqual;\u627dilde;\u627fTh\xe1\u0f8c;\u6211\u0180;es\u1212\u1213\u1223\u62d1rset\u0100;E\u121c\u121d\u6283qual;\u6287et\xbb\u1213\u0580HRSacfhiors\u123e\u1244\u1249\u1255\u125e\u1271\u1276\u129f\u12c2\u12c8\u12d1ORN\u803b\xde\u40deADE;\u6122\u0100Hc\u124e\u1252cy;\u440by;\u4426\u0100bu\u125a\u125c;\u4009;\u43a4\u0180aey\u1265\u126a\u126fron;\u4164dil;\u4162;\u4422r;\uc000\ud835\udd17\u0100ei\u127b\u1289\u01f2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128e\u1298kSpace;\uc000\u205f\u200aSpace;\u6009lde\u0200;EFT\u12ab\u12ac\u12b2\u12bc\u623cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uc000\ud835\udd4bipleDot;\u60db\u0100ct\u12d6\u12dbr;\uc000\ud835\udcafrok;\u4166\u0ae1\u12f7\u130e\u131a\u1326\0\u132c\u1331\0\0\0\0\0\u1338\u133d\u1377\u1385\0\u13ff\u1404\u140a\u1410\u0100cr\u12fb\u1301ute\u803b\xda\u40dar\u0100;o\u1307\u1308\u619fcir;\u6949r\u01e3\u1313\0\u1316y;\u440eve;\u416c\u0100iy\u131e\u1323rc\u803b\xdb\u40db;\u4423blac;\u4170r;\uc000\ud835\udd18rave\u803b\xd9\u40d9acr;\u416a\u0100di\u1341\u1369er\u0100BP\u1348\u135d\u0100ar\u134d\u1350r;\u405fac\u0100ek\u1357\u1359;\u63dfet;\u63b5arenthesis;\u63ddon\u0100;P\u1370\u1371\u62c3lus;\u628e\u0100gp\u137b\u137fon;\u4172f;\uc000\ud835\udd4c\u0400ADETadps\u1395\u13ae\u13b8\u13c4\u03e8\u13d2\u13d7\u13f3rrow\u0180;BD\u1150\u13a0\u13a4ar;\u6912ownArrow;\u61c5ownArrow;\u6195quilibrium;\u696eee\u0100;A\u13cb\u13cc\u62a5rrow;\u61a5own\xe1\u03f3er\u0100LR\u13de\u13e8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13f9\u13fa\u43d2on;\u43a5ing;\u416ecr;\uc000\ud835\udcb0ilde;\u4168ml\u803b\xdc\u40dc\u0480Dbcdefosv\u1427\u142c\u1430\u1433\u143e\u1485\u148a\u1490\u1496ash;\u62abar;\u6aeby;\u4412ash\u0100;l\u143b\u143c\u62a9;\u6ae6\u0100er\u1443\u1445;\u62c1\u0180bty\u144c\u1450\u147aar;\u6016\u0100;i\u144f\u1455cal\u0200BLST\u1461\u1465\u146a\u1474ar;\u6223ine;\u407ceparator;\u6758ilde;\u6240ThinSpace;\u600ar;\uc000\ud835\udd19pf;\uc000\ud835\udd4dcr;\uc000\ud835\udcb1dash;\u62aa\u0280cefos\u14a7\u14ac\u14b1\u14b6\u14bcirc;\u4174dge;\u62c0r;\uc000\ud835\udd1apf;\uc000\ud835\udd4ecr;\uc000\ud835\udcb2\u0200fios\u14cb\u14d0\u14d2\u14d8r;\uc000\ud835\udd1b;\u439epf;\uc000\ud835\udd4fcr;\uc000\ud835\udcb3\u0480AIUacfosu\u14f1\u14f5\u14f9\u14fd\u1504\u150f\u1514\u151a\u1520cy;\u442fcy;\u4407cy;\u442ecute\u803b\xdd\u40dd\u0100iy\u1509\u150drc;\u4176;\u442br;\uc000\ud835\udd1cpf;\uc000\ud835\udd50cr;\uc000\ud835\udcb4ml;\u4178\u0400Hacdefos\u1535\u1539\u153f\u154b\u154f\u155d\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417d;\u4417ot;\u417b\u01f2\u1554\0\u155boWidt\xe8\u0ad9a;\u4396r;\u6128pf;\u6124cr;\uc000\ud835\udcb5\u0be1\u1583\u158a\u1590\0\u15b0\u15b6\u15bf\0\0\0\0\u15c6\u15db\u15eb\u165f\u166d\0\u1695\u169b\u16b2\u16b9\0\u16becute\u803b\xe1\u40e1reve;\u4103\u0300;Ediuy\u159c\u159d\u15a1\u15a3\u15a8\u15ad\u623e;\uc000\u223e\u0333;\u623frc\u803b\xe2\u40e2te\u80bb\xb4\u0306;\u4430lig\u803b\xe6\u40e6\u0100;r\xb2\u15ba;\uc000\ud835\udd1erave\u803b\xe0\u40e0\u0100ep\u15ca\u15d6\u0100fp\u15cf\u15d4sym;\u6135\xe8\u15d3ha;\u43b1\u0100ap\u15dfc\u0100cl\u15e4\u15e7r;\u4101g;\u6a3f\u0264\u15f0\0\0\u160a\u0280;adsv\u15fa\u15fb\u15ff\u1601\u1607\u6227nd;\u6a55;\u6a5clope;\u6a58;\u6a5a\u0380;elmrsz\u1618\u1619\u161b\u161e\u163f\u164f\u1659\u6220;\u69a4e\xbb\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163a\u163c\u163e;\u69a8;\u69a9;\u69aa;\u69ab;\u69ac;\u69ad;\u69ae;\u69aft\u0100;v\u1645\u1646\u621fb\u0100;d\u164c\u164d\u62be;\u699d\u0100pt\u1654\u1657h;\u6222\xbb\xb9arr;\u637c\u0100gp\u1663\u1667on;\u4105f;\uc000\ud835\udd52\u0380;Eaeiop\u12c1\u167b\u167d\u1682\u1684\u1687\u168a;\u6a70cir;\u6a6f;\u624ad;\u624bs;\u4027rox\u0100;e\u12c1\u1692\xf1\u1683ing\u803b\xe5\u40e5\u0180cty\u16a1\u16a6\u16a8r;\uc000\ud835\udcb6;\u402amp\u0100;e\u12c1\u16af\xf1\u0288ilde\u803b\xe3\u40e3ml\u803b\xe4\u40e4\u0100ci\u16c2\u16c8onin\xf4\u0272nt;\u6a11\u0800Nabcdefiklnoprsu\u16ed\u16f1\u1730\u173c\u1743\u1748\u1778\u177d\u17e0\u17e6\u1839\u1850\u170d\u193d\u1948\u1970ot;\u6aed\u0100cr\u16f6\u171ek\u0200ceps\u1700\u1705\u170d\u1713ong;\u624cpsilon;\u43f6rime;\u6035im\u0100;e\u171a\u171b\u623dq;\u62cd\u0176\u1722\u1726ee;\u62bded\u0100;g\u172c\u172d\u6305e\xbb\u172drk\u0100;t\u135c\u1737brk;\u63b6\u0100oy\u1701\u1741;\u4431quo;\u601e\u0280cmprt\u1753\u175b\u1761\u1764\u1768aus\u0100;e\u010a\u0109ptyv;\u69b0s\xe9\u170cno\xf5\u0113\u0180ahw\u176f\u1771\u1773;\u43b2;\u6136een;\u626cr;\uc000\ud835\udd1fg\u0380costuvw\u178d\u179d\u17b3\u17c1\u17d5\u17db\u17de\u0180aiu\u1794\u1796\u179a\xf0\u0760rc;\u65efp\xbb\u1371\u0180dpt\u17a4\u17a8\u17adot;\u6a00lus;\u6a01imes;\u6a02\u0271\u17b9\0\0\u17becup;\u6a06ar;\u6605riangle\u0100du\u17cd\u17d2own;\u65bdp;\u65b3plus;\u6a04e\xe5\u1444\xe5\u14adarow;\u690d\u0180ako\u17ed\u1826\u1835\u0100cn\u17f2\u1823k\u0180lst\u17fa\u05ab\u1802ozenge;\u69ebriangle\u0200;dlr\u1812\u1813\u1818\u181d\u65b4own;\u65beeft;\u65c2ight;\u65b8k;\u6423\u01b1\u182b\0\u1833\u01b2\u182f\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183e\u184d\u0100;q\u1843\u1846\uc000=\u20e5uiv;\uc000\u2261\u20e5t;\u6310\u0200ptwx\u1859\u185e\u1867\u186cf;\uc000\ud835\udd53\u0100;t\u13cb\u1863om\xbb\u13cctie;\u62c8\u0600DHUVbdhmptuv\u1885\u1896\u18aa\u18bb\u18d7\u18db\u18ec\u18ff\u1905\u190a\u1910\u1921\u0200LRlr\u188e\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18a1\u18a2\u18a4\u18a6\u18a8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18b3\u18b5\u18b7\u18b9;\u655d;\u655a;\u655c;\u6559\u0380;HLRhlr\u18ca\u18cb\u18cd\u18cf\u18d1\u18d3\u18d5\u6551;\u656c;\u6563;\u6560;\u656b;\u6562;\u655fox;\u69c9\u0200LRlr\u18e4\u18e6\u18e8\u18ea;\u6555;\u6552;\u6510;\u650c\u0280;DUdu\u06bd\u18f7\u18f9\u18fb\u18fd;\u6565;\u6568;\u652c;\u6534inus;\u629flus;\u629eimes;\u62a0\u0200LRlr\u1919\u191b\u191d\u191f;\u655b;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193b\u6502;\u656a;\u6561;\u655e;\u653c;\u6524;\u651c\u0100ev\u0123\u1942bar\u803b\xa6\u40a6\u0200ceio\u1951\u1956\u195a\u1960r;\uc000\ud835\udcb7mi;\u604fm\u0100;e\u171a\u171cl\u0180;bh\u1968\u1969\u196b\u405c;\u69c5sub;\u67c8\u016c\u1974\u197el\u0100;e\u1979\u197a\u6022t\xbb\u197ap\u0180;Ee\u012f\u1985\u1987;\u6aae\u0100;q\u06dc\u06db\u0ce1\u19a7\0\u19e8\u1a11\u1a15\u1a32\0\u1a37\u1a50\0\0\u1ab4\0\0\u1ac1\0\0\u1b21\u1b2e\u1b4d\u1b52\0\u1bfd\0\u1c0c\u0180cpr\u19ad\u19b2\u19ddute;\u4107\u0300;abcds\u19bf\u19c0\u19c4\u19ca\u19d5\u19d9\u6229nd;\u6a44rcup;\u6a49\u0100au\u19cf\u19d2p;\u6a4bp;\u6a47ot;\u6a40;\uc000\u2229\ufe00\u0100eo\u19e2\u19e5t;\u6041\xee\u0693\u0200aeiu\u19f0\u19fb\u1a01\u1a05\u01f0\u19f5\0\u19f8s;\u6a4don;\u410ddil\u803b\xe7\u40e7rc;\u4109ps\u0100;s\u1a0c\u1a0d\u6a4cm;\u6a50ot;\u410b\u0180dmn\u1a1b\u1a20\u1a26il\u80bb\xb8\u01adptyv;\u69b2t\u8100\xa2;e\u1a2d\u1a2e\u40a2r\xe4\u01b2r;\uc000\ud835\udd20\u0180cei\u1a3d\u1a40\u1a4dy;\u4447ck\u0100;m\u1a47\u1a48\u6713ark\xbb\u1a48;\u43c7r\u0380;Ecefms\u1a5f\u1a60\u1a62\u1a6b\u1aa4\u1aaa\u1aae\u65cb;\u69c3\u0180;el\u1a69\u1a6a\u1a6d\u42c6q;\u6257e\u0261\u1a74\0\0\u1a88rrow\u0100lr\u1a7c\u1a81eft;\u61baight;\u61bb\u0280RSacd\u1a92\u1a94\u1a96\u1a9a\u1a9f\xbb\u0f47;\u64c8st;\u629birc;\u629aash;\u629dnint;\u6a10id;\u6aefcir;\u69c2ubs\u0100;u\u1abb\u1abc\u6663it\xbb\u1abc\u02ec\u1ac7\u1ad4\u1afa\0\u1b0aon\u0100;e\u1acd\u1ace\u403a\u0100;q\xc7\xc6\u026d\u1ad9\0\0\u1ae2a\u0100;t\u1ade\u1adf\u402c;\u4040\u0180;fl\u1ae8\u1ae9\u1aeb\u6201\xee\u1160e\u0100mx\u1af1\u1af6ent\xbb\u1ae9e\xf3\u024d\u01e7\u1afe\0\u1b07\u0100;d\u12bb\u1b02ot;\u6a6dn\xf4\u0246\u0180fry\u1b10\u1b14\u1b17;\uc000\ud835\udd54o\xe4\u0254\u8100\xa9;s\u0155\u1b1dr;\u6117\u0100ao\u1b25\u1b29rr;\u61b5ss;\u6717\u0100cu\u1b32\u1b37r;\uc000\ud835\udcb8\u0100bp\u1b3c\u1b44\u0100;e\u1b41\u1b42\u6acf;\u6ad1\u0100;e\u1b49\u1b4a\u6ad0;\u6ad2dot;\u62ef\u0380delprvw\u1b60\u1b6c\u1b77\u1b82\u1bac\u1bd4\u1bf9arr\u0100lr\u1b68\u1b6a;\u6938;\u6935\u0270\u1b72\0\0\u1b75r;\u62dec;\u62dfarr\u0100;p\u1b7f\u1b80\u61b6;\u693d\u0300;bcdos\u1b8f\u1b90\u1b96\u1ba1\u1ba5\u1ba8\u622arcap;\u6a48\u0100au\u1b9b\u1b9ep;\u6a46p;\u6a4aot;\u628dr;\u6a45;\uc000\u222a\ufe00\u0200alrv\u1bb5\u1bbf\u1bde\u1be3rr\u0100;m\u1bbc\u1bbd\u61b7;\u693cy\u0180evw\u1bc7\u1bd4\u1bd8q\u0270\u1bce\0\0\u1bd2re\xe3\u1b73u\xe3\u1b75ee;\u62ceedge;\u62cfen\u803b\xa4\u40a4earrow\u0100lr\u1bee\u1bf3eft\xbb\u1b80ight\xbb\u1bbde\xe4\u1bdd\u0100ci\u1c01\u1c07onin\xf4\u01f7nt;\u6231lcty;\u632d\u0980AHabcdefhijlorstuwz\u1c38\u1c3b\u1c3f\u1c5d\u1c69\u1c75\u1c8a\u1c9e\u1cac\u1cb7\u1cfb\u1cff\u1d0d\u1d7b\u1d91\u1dab\u1dbb\u1dc6\u1dcdr\xf2\u0381ar;\u6965\u0200glrs\u1c48\u1c4d\u1c52\u1c54ger;\u6020eth;\u6138\xf2\u1133h\u0100;v\u1c5a\u1c5b\u6010\xbb\u090a\u016b\u1c61\u1c67arow;\u690fa\xe3\u0315\u0100ay\u1c6e\u1c73ron;\u410f;\u4434\u0180;ao\u0332\u1c7c\u1c84\u0100gr\u02bf\u1c81r;\u61catseq;\u6a77\u0180glm\u1c91\u1c94\u1c98\u803b\xb0\u40b0ta;\u43b4ptyv;\u69b1\u0100ir\u1ca3\u1ca8sht;\u697f;\uc000\ud835\udd21ar\u0100lr\u1cb3\u1cb5\xbb\u08dc\xbb\u101e\u0280aegsv\u1cc2\u0378\u1cd6\u1cdc\u1ce0m\u0180;os\u0326\u1cca\u1cd4nd\u0100;s\u0326\u1cd1uit;\u6666amma;\u43ddin;\u62f2\u0180;io\u1ce7\u1ce8\u1cf8\u40f7de\u8100\xf7;o\u1ce7\u1cf0ntimes;\u62c7n\xf8\u1cf7cy;\u4452c\u026f\u1d06\0\0\u1d0arn;\u631eop;\u630d\u0280lptuw\u1d18\u1d1d\u1d22\u1d49\u1d55lar;\u4024f;\uc000\ud835\udd55\u0280;emps\u030b\u1d2d\u1d37\u1d3d\u1d42q\u0100;d\u0352\u1d33ot;\u6251inus;\u6238lus;\u6214quare;\u62a1blebarwedg\xe5\xfan\u0180adh\u112e\u1d5d\u1d67ownarrow\xf3\u1c83arpoon\u0100lr\u1d72\u1d76ef\xf4\u1cb4igh\xf4\u1cb6\u0162\u1d7f\u1d85karo\xf7\u0f42\u026f\u1d8a\0\0\u1d8ern;\u631fop;\u630c\u0180cot\u1d98\u1da3\u1da6\u0100ry\u1d9d\u1da1;\uc000\ud835\udcb9;\u4455l;\u69f6rok;\u4111\u0100dr\u1db0\u1db4ot;\u62f1i\u0100;f\u1dba\u1816\u65bf\u0100ah\u1dc0\u1dc3r\xf2\u0429a\xf2\u0fa6angle;\u69a6\u0100ci\u1dd2\u1dd5y;\u445fgrarr;\u67ff\u0900Dacdefglmnopqrstux\u1e01\u1e09\u1e19\u1e38\u0578\u1e3c\u1e49\u1e61\u1e7e\u1ea5\u1eaf\u1ebd\u1ee1\u1f2a\u1f37\u1f44\u1f4e\u1f5a\u0100Do\u1e06\u1d34o\xf4\u1c89\u0100cs\u1e0e\u1e14ute\u803b\xe9\u40e9ter;\u6a6e\u0200aioy\u1e22\u1e27\u1e31\u1e36ron;\u411br\u0100;c\u1e2d\u1e2e\u6256\u803b\xea\u40ealon;\u6255;\u444dot;\u4117\u0100Dr\u1e41\u1e45ot;\u6252;\uc000\ud835\udd22\u0180;rs\u1e50\u1e51\u1e57\u6a9aave\u803b\xe8\u40e8\u0100;d\u1e5c\u1e5d\u6a96ot;\u6a98\u0200;ils\u1e6a\u1e6b\u1e72\u1e74\u6a99nters;\u63e7;\u6113\u0100;d\u1e79\u1e7a\u6a95ot;\u6a97\u0180aps\u1e85\u1e89\u1e97cr;\u4113ty\u0180;sv\u1e92\u1e93\u1e95\u6205et\xbb\u1e93p\u01001;\u1e9d\u1ea4\u0133\u1ea1\u1ea3;\u6004;\u6005\u6003\u0100gs\u1eaa\u1eac;\u414bp;\u6002\u0100gp\u1eb4\u1eb8on;\u4119f;\uc000\ud835\udd56\u0180als\u1ec4\u1ece\u1ed2r\u0100;s\u1eca\u1ecb\u62d5l;\u69e3us;\u6a71i\u0180;lv\u1eda\u1edb\u1edf\u43b5on\xbb\u1edb;\u43f5\u0200csuv\u1eea\u1ef3\u1f0b\u1f23\u0100io\u1eef\u1e31rc\xbb\u1e2e\u0269\u1ef9\0\0\u1efb\xed\u0548ant\u0100gl\u1f02\u1f06tr\xbb\u1e5dess\xbb\u1e7a\u0180aei\u1f12\u1f16\u1f1als;\u403dst;\u625fv\u0100;D\u0235\u1f20D;\u6a78parsl;\u69e5\u0100Da\u1f2f\u1f33ot;\u6253rr;\u6971\u0180cdi\u1f3e\u1f41\u1ef8r;\u612fo\xf4\u0352\u0100ah\u1f49\u1f4b;\u43b7\u803b\xf0\u40f0\u0100mr\u1f53\u1f57l\u803b\xeb\u40ebo;\u60ac\u0180cip\u1f61\u1f64\u1f67l;\u4021s\xf4\u056e\u0100eo\u1f6c\u1f74ctatio\xee\u0559nential\xe5\u0579\u09e1\u1f92\0\u1f9e\0\u1fa1\u1fa7\0\0\u1fc6\u1fcc\0\u1fd3\0\u1fe6\u1fea\u2000\0\u2008\u205allingdotse\xf1\u1e44y;\u4444male;\u6640\u0180ilr\u1fad\u1fb3\u1fc1lig;\u8000\ufb03\u0269\u1fb9\0\0\u1fbdg;\u8000\ufb00ig;\u8000\ufb04;\uc000\ud835\udd23lig;\u8000\ufb01lig;\uc000fj\u0180alt\u1fd9\u1fdc\u1fe1t;\u666dig;\u8000\ufb02ns;\u65b1of;\u4192\u01f0\u1fee\0\u1ff3f;\uc000\ud835\udd57\u0100ak\u05bf\u1ff7\u0100;v\u1ffc\u1ffd\u62d4;\u6ad9artint;\u6a0d\u0100ao\u200c\u2055\u0100cs\u2011\u2052\u03b1\u201a\u2030\u2038\u2045\u2048\0\u2050\u03b2\u2022\u2025\u2027\u202a\u202c\0\u202e\u803b\xbd\u40bd;\u6153\u803b\xbc\u40bc;\u6155;\u6159;\u615b\u01b3\u2034\0\u2036;\u6154;\u6156\u02b4\u203e\u2041\0\0\u2043\u803b\xbe\u40be;\u6157;\u615c5;\u6158\u01b6\u204c\0\u204e;\u615a;\u615d8;\u615el;\u6044wn;\u6322cr;\uc000\ud835\udcbb\u0880Eabcdefgijlnorstv\u2082\u2089\u209f\u20a5\u20b0\u20b4\u20f0\u20f5\u20fa\u20ff\u2103\u2112\u2138\u0317\u213e\u2152\u219e\u0100;l\u064d\u2087;\u6a8c\u0180cmp\u2090\u2095\u209dute;\u41f5ma\u0100;d\u209c\u1cda\u43b3;\u6a86reve;\u411f\u0100iy\u20aa\u20aerc;\u411d;\u4433ot;\u4121\u0200;lqs\u063e\u0642\u20bd\u20c9\u0180;qs\u063e\u064c\u20c4lan\xf4\u0665\u0200;cdl\u0665\u20d2\u20d5\u20e5c;\u6aa9ot\u0100;o\u20dc\u20dd\u6a80\u0100;l\u20e2\u20e3\u6a82;\u6a84\u0100;e\u20ea\u20ed\uc000\u22db\ufe00s;\u6a94r;\uc000\ud835\udd24\u0100;g\u0673\u061bmel;\u6137cy;\u4453\u0200;Eaj\u065a\u210c\u210e\u2110;\u6a92;\u6aa5;\u6aa4\u0200Eaes\u211b\u211d\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6a8arox\xbb\u2124\u0100;q\u212e\u212f\u6a88\u0100;q\u212e\u211bim;\u62e7pf;\uc000\ud835\udd58\u0100ci\u2143\u2146r;\u610am\u0180;el\u066b\u214e\u2150;\u6a8e;\u6a90\u8300>;cdlqr\u05ee\u2160\u216a\u216e\u2173\u2179\u0100ci\u2165\u2167;\u6aa7r;\u6a7aot;\u62d7Par;\u6995uest;\u6a7c\u0280adels\u2184\u216a\u2190\u0656\u219b\u01f0\u2189\0\u218epro\xf8\u209er;\u6978q\u0100lq\u063f\u2196les\xf3\u2088i\xed\u066b\u0100en\u21a3\u21adrtneqq;\uc000\u2269\ufe00\xc5\u21aa\u0500Aabcefkosy\u21c4\u21c7\u21f1\u21f5\u21fa\u2218\u221d\u222f\u2268\u227dr\xf2\u03a0\u0200ilmr\u21d0\u21d4\u21d7\u21dbrs\xf0\u1484f\xbb\u2024il\xf4\u06a9\u0100dr\u21e0\u21e4cy;\u444a\u0180;cw\u08f4\u21eb\u21efir;\u6948;\u61adar;\u610firc;\u4125\u0180alr\u2201\u220e\u2213rts\u0100;u\u2209\u220a\u6665it\xbb\u220alip;\u6026con;\u62b9r;\uc000\ud835\udd25s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223a\u223e\u2243\u225e\u2263rr;\u61fftht;\u623bk\u0100lr\u2249\u2253eftarrow;\u61a9ightarrow;\u61aaf;\uc000\ud835\udd59bar;\u6015\u0180clt\u226f\u2274\u2278r;\uc000\ud835\udcbdas\xe8\u21f4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xbb\u1c5b\u0ae1\u22a3\0\u22aa\0\u22b8\u22c5\u22ce\0\u22d5\u22f3\0\0\u22f8\u2322\u2367\u2362\u237f\0\u2386\u23aa\u23b4cute\u803b\xed\u40ed\u0180;iy\u0771\u22b0\u22b5rc\u803b\xee\u40ee;\u4438\u0100cx\u22bc\u22bfy;\u4435cl\u803b\xa1\u40a1\u0100fr\u039f\u22c9;\uc000\ud835\udd26rave\u803b\xec\u40ec\u0200;ino\u073e\u22dd\u22e9\u22ee\u0100in\u22e2\u22e6nt;\u6a0ct;\u622dfin;\u69dcta;\u6129lig;\u4133\u0180aop\u22fe\u231a\u231d\u0180cgt\u2305\u2308\u2317r;\u412b\u0180elp\u071f\u230f\u2313in\xe5\u078ear\xf4\u0720h;\u4131f;\u62b7ed;\u41b5\u0280;cfot\u04f4\u232c\u2331\u233d\u2341are;\u6105in\u0100;t\u2338\u2339\u621eie;\u69dddo\xf4\u2319\u0280;celp\u0757\u234c\u2350\u235b\u2361al;\u62ba\u0100gr\u2355\u2359er\xf3\u1563\xe3\u234darhk;\u6a17rod;\u6a3c\u0200cgpt\u236f\u2372\u2376\u237by;\u4451on;\u412ff;\uc000\ud835\udd5aa;\u43b9uest\u803b\xbf\u40bf\u0100ci\u238a\u238fr;\uc000\ud835\udcben\u0280;Edsv\u04f4\u239b\u239d\u23a1\u04f3;\u62f9ot;\u62f5\u0100;v\u23a6\u23a7\u62f4;\u62f3\u0100;i\u0777\u23aelde;\u4129\u01eb\u23b8\0\u23bccy;\u4456l\u803b\xef\u40ef\u0300cfmosu\u23cc\u23d7\u23dc\u23e1\u23e7\u23f5\u0100iy\u23d1\u23d5rc;\u4135;\u4439r;\uc000\ud835\udd27ath;\u4237pf;\uc000\ud835\udd5b\u01e3\u23ec\0\u23f1r;\uc000\ud835\udcbfrcy;\u4458kcy;\u4454\u0400acfghjos\u240b\u2416\u2422\u2427\u242d\u2431\u2435\u243bppa\u0100;v\u2413\u2414\u43ba;\u43f0\u0100ey\u241b\u2420dil;\u4137;\u443ar;\uc000\ud835\udd28reen;\u4138cy;\u4445cy;\u445cpf;\uc000\ud835\udd5ccr;\uc000\ud835\udcc0\u0b80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248d\u2491\u250e\u253d\u255a\u2580\u264e\u265e\u2665\u2679\u267d\u269a\u26b2\u26d8\u275d\u2768\u278b\u27c0\u2801\u2812\u0180art\u2477\u247a\u247cr\xf2\u09c6\xf2\u0395ail;\u691barr;\u690e\u0100;g\u0994\u248b;\u6a8bar;\u6962\u0963\u24a5\0\u24aa\0\u24b1\0\0\0\0\0\u24b5\u24ba\0\u24c6\u24c8\u24cd\0\u24f9ute;\u413amptyv;\u69b4ra\xee\u084cbda;\u43bbg\u0180;dl\u088e\u24c1\u24c3;\u6991\xe5\u088e;\u6a85uo\u803b\xab\u40abr\u0400;bfhlpst\u0899\u24de\u24e6\u24e9\u24eb\u24ee\u24f1\u24f5\u0100;f\u089d\u24e3s;\u691fs;\u691d\xeb\u2252p;\u61abl;\u6939im;\u6973l;\u61a2\u0180;ae\u24ff\u2500\u2504\u6aabil;\u6919\u0100;s\u2509\u250a\u6aad;\uc000\u2aad\ufe00\u0180abr\u2515\u2519\u251drr;\u690crk;\u6772\u0100ak\u2522\u252cc\u0100ek\u2528\u252a;\u407b;\u405b\u0100es\u2531\u2533;\u698bl\u0100du\u2539\u253b;\u698f;\u698d\u0200aeuy\u2546\u254b\u2556\u2558ron;\u413e\u0100di\u2550\u2554il;\u413c\xec\u08b0\xe2\u2529;\u443b\u0200cqrs\u2563\u2566\u256d\u257da;\u6936uo\u0100;r\u0e19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694bh;\u61b2\u0280;fgqs\u258b\u258c\u0989\u25f3\u25ff\u6264t\u0280ahlrt\u2598\u25a4\u25b7\u25c2\u25e8rrow\u0100;t\u0899\u25a1a\xe9\u24f6arpoon\u0100du\u25af\u25b4own\xbb\u045ap\xbb\u0966eftarrows;\u61c7ight\u0180ahs\u25cd\u25d6\u25derrow\u0100;s\u08f4\u08a7arpoon\xf3\u0f98quigarro\xf7\u21f0hreetimes;\u62cb\u0180;qs\u258b\u0993\u25falan\xf4\u09ac\u0280;cdgs\u09ac\u260a\u260d\u261d\u2628c;\u6aa8ot\u0100;o\u2614\u2615\u6a7f\u0100;r\u261a\u261b\u6a81;\u6a83\u0100;e\u2622\u2625\uc000\u22da\ufe00s;\u6a93\u0280adegs\u2633\u2639\u263d\u2649\u264bppro\xf8\u24c6ot;\u62d6q\u0100gq\u2643\u2645\xf4\u0989gt\xf2\u248c\xf4\u099bi\xed\u09b2\u0180ilr\u2655\u08e1\u265asht;\u697c;\uc000\ud835\udd29\u0100;E\u099c\u2663;\u6a91\u0161\u2669\u2676r\u0100du\u25b2\u266e\u0100;l\u0965\u2673;\u696alk;\u6584cy;\u4459\u0280;acht\u0a48\u2688\u268b\u2691\u2696r\xf2\u25c1orne\xf2\u1d08ard;\u696bri;\u65fa\u0100io\u269f\u26a4dot;\u4140ust\u0100;a\u26ac\u26ad\u63b0che\xbb\u26ad\u0200Eaes\u26bb\u26bd\u26c9\u26d4;\u6268p\u0100;p\u26c3\u26c4\u6a89rox\xbb\u26c4\u0100;q\u26ce\u26cf\u6a87\u0100;q\u26ce\u26bbim;\u62e6\u0400abnoptwz\u26e9\u26f4\u26f7\u271a\u272f\u2741\u2747\u2750\u0100nr\u26ee\u26f1g;\u67ecr;\u61fdr\xeb\u08c1g\u0180lmr\u26ff\u270d\u2714eft\u0100ar\u09e6\u2707ight\xe1\u09f2apsto;\u67fcight\xe1\u09fdparrow\u0100lr\u2725\u2729ef\xf4\u24edight;\u61ac\u0180afl\u2736\u2739\u273dr;\u6985;\uc000\ud835\udd5dus;\u6a2dimes;\u6a34\u0161\u274b\u274fst;\u6217\xe1\u134e\u0180;ef\u2757\u2758\u1800\u65cange\xbb\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277c\u2785\u2787r\xf2\u08a8orne\xf2\u1d8car\u0100;d\u0f98\u2783;\u696d;\u600eri;\u62bf\u0300achiqt\u2798\u279d\u0a40\u27a2\u27ae\u27bbquo;\u6039r;\uc000\ud835\udcc1m\u0180;eg\u09b2\u27aa\u27ac;\u6a8d;\u6a8f\u0100bu\u252a\u27b3o\u0100;r\u0e1f\u27b9;\u601arok;\u4142\u8400<;cdhilqr\u082b\u27d2\u2639\u27dc\u27e0\u27e5\u27ea\u27f0\u0100ci\u27d7\u27d9;\u6aa6r;\u6a79re\xe5\u25f2mes;\u62c9arr;\u6976uest;\u6a7b\u0100Pi\u27f5\u27f9ar;\u6996\u0180;ef\u2800\u092d\u181b\u65c3r\u0100du\u2807\u280dshar;\u694ahar;\u6966\u0100en\u2817\u2821rtneqq;\uc000\u2268\ufe00\xc5\u281e\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288e\u2893\u28a0\u28a5\u28a8\u28da\u28e2\u28e4\u0a83\u28f3\u2902Dot;\u623a\u0200clpr\u284e\u2852\u2863\u287dr\u803b\xaf\u40af\u0100et\u2857\u2859;\u6642\u0100;e\u285e\u285f\u6720se\xbb\u285f\u0100;s\u103b\u2868to\u0200;dlu\u103b\u2873\u2877\u287bow\xee\u048cef\xf4\u090f\xf0\u13d1ker;\u65ae\u0100oy\u2887\u288cmma;\u6a29;\u443cash;\u6014asuredangle\xbb\u1626r;\uc000\ud835\udd2ao;\u6127\u0180cdn\u28af\u28b4\u28c9ro\u803b\xb5\u40b5\u0200;acd\u1464\u28bd\u28c0\u28c4s\xf4\u16a7ir;\u6af0ot\u80bb\xb7\u01b5us\u0180;bd\u28d2\u1903\u28d3\u6212\u0100;u\u1d3c\u28d8;\u6a2a\u0163\u28de\u28e1p;\u6adb\xf2\u2212\xf0\u0a81\u0100dp\u28e9\u28eeels;\u62a7f;\uc000\ud835\udd5e\u0100ct\u28f8\u28fdr;\uc000\ud835\udcc2pos\xbb\u159d\u0180;lm\u2909\u290a\u290d\u43bctimap;\u62b8\u0c00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297e\u2989\u2998\u29da\u29e9\u2a15\u2a1a\u2a58\u2a5d\u2a83\u2a95\u2aa4\u2aa8\u2b04\u2b07\u2b44\u2b7f\u2bae\u2c34\u2c67\u2c7c\u2ce9\u0100gt\u2947\u294b;\uc000\u22d9\u0338\u0100;v\u2950\u0bcf\uc000\u226b\u20d2\u0180elt\u295a\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61cdightarrow;\u61ce;\uc000\u22d8\u0338\u0100;v\u297b\u0c47\uc000\u226a\u20d2ightarrow;\u61cf\u0100Dd\u298e\u2993ash;\u62afash;\u62ae\u0280bcnpt\u29a3\u29a7\u29ac\u29b1\u29ccla\xbb\u02deute;\u4144g;\uc000\u2220\u20d2\u0280;Eiop\u0d84\u29bc\u29c0\u29c5\u29c8;\uc000\u2a70\u0338d;\uc000\u224b\u0338s;\u4149ro\xf8\u0d84ur\u0100;a\u29d3\u29d4\u666el\u0100;s\u29d3\u0b38\u01f3\u29df\0\u29e3p\u80bb\xa0\u0b37mp\u0100;e\u0bf9\u0c00\u0280aeouy\u29f4\u29fe\u2a03\u2a10\u2a13\u01f0\u29f9\0\u29fb;\u6a43on;\u4148dil;\u4146ng\u0100;d\u0d7e\u2a0aot;\uc000\u2a6d\u0338p;\u6a42;\u443dash;\u6013\u0380;Aadqsx\u0b92\u2a29\u2a2d\u2a3b\u2a41\u2a45\u2a50rr;\u61d7r\u0100hr\u2a33\u2a36k;\u6924\u0100;o\u13f2\u13f0ot;\uc000\u2250\u0338ui\xf6\u0b63\u0100ei\u2a4a\u2a4ear;\u6928\xed\u0b98ist\u0100;s\u0ba0\u0b9fr;\uc000\ud835\udd2b\u0200Eest\u0bc5\u2a66\u2a79\u2a7c\u0180;qs\u0bbc\u2a6d\u0be1\u0180;qs\u0bbc\u0bc5\u2a74lan\xf4\u0be2i\xed\u0bea\u0100;r\u0bb6\u2a81\xbb\u0bb7\u0180Aap\u2a8a\u2a8d\u2a91r\xf2\u2971rr;\u61aear;\u6af2\u0180;sv\u0f8d\u2a9c\u0f8c\u0100;d\u2aa1\u2aa2\u62fc;\u62facy;\u445a\u0380AEadest\u2ab7\u2aba\u2abe\u2ac2\u2ac5\u2af6\u2af9r\xf2\u2966;\uc000\u2266\u0338rr;\u619ar;\u6025\u0200;fqs\u0c3b\u2ace\u2ae3\u2aeft\u0100ar\u2ad4\u2ad9rro\xf7\u2ac1ightarro\xf7\u2a90\u0180;qs\u0c3b\u2aba\u2aealan\xf4\u0c55\u0100;s\u0c55\u2af4\xbb\u0c36i\xed\u0c5d\u0100;r\u0c35\u2afei\u0100;e\u0c1a\u0c25i\xe4\u0d90\u0100pt\u2b0c\u2b11f;\uc000\ud835\udd5f\u8180\xac;in\u2b19\u2b1a\u2b36\u40acn\u0200;Edv\u0b89\u2b24\u2b28\u2b2e;\uc000\u22f9\u0338ot;\uc000\u22f5\u0338\u01e1\u0b89\u2b33\u2b35;\u62f7;\u62f6i\u0100;v\u0cb8\u2b3c\u01e1\u0cb8\u2b41\u2b43;\u62fe;\u62fd\u0180aor\u2b4b\u2b63\u2b69r\u0200;ast\u0b7b\u2b55\u2b5a\u2b5flle\xec\u0b7bl;\uc000\u2afd\u20e5;\uc000\u2202\u0338lint;\u6a14\u0180;ce\u0c92\u2b70\u2b73u\xe5\u0ca5\u0100;c\u0c98\u2b78\u0100;e\u0c92\u2b7d\xf1\u0c98\u0200Aait\u2b88\u2b8b\u2b9d\u2ba7r\xf2\u2988rr\u0180;cw\u2b94\u2b95\u2b99\u619b;\uc000\u2933\u0338;\uc000\u219d\u0338ghtarrow\xbb\u2b95ri\u0100;e\u0ccb\u0cd6\u0380chimpqu\u2bbd\u2bcd\u2bd9\u2b04\u0b78\u2be4\u2bef\u0200;cer\u0d32\u2bc6\u0d37\u2bc9u\xe5\u0d45;\uc000\ud835\udcc3ort\u026d\u2b05\0\0\u2bd6ar\xe1\u2b56m\u0100;e\u0d6e\u2bdf\u0100;q\u0d74\u0d73su\u0100bp\u2beb\u2bed\xe5\u0cf8\xe5\u0d0b\u0180bcp\u2bf6\u2c11\u2c19\u0200;Ees\u2bff\u2c00\u0d22\u2c04\u6284;\uc000\u2ac5\u0338et\u0100;e\u0d1b\u2c0bq\u0100;q\u0d23\u2c00c\u0100;e\u0d32\u2c17\xf1\u0d38\u0200;Ees\u2c22\u2c23\u0d5f\u2c27\u6285;\uc000\u2ac6\u0338et\u0100;e\u0d58\u2c2eq\u0100;q\u0d60\u2c23\u0200gilr\u2c3d\u2c3f\u2c45\u2c47\xec\u0bd7lde\u803b\xf1\u40f1\xe7\u0c43iangle\u0100lr\u2c52\u2c5ceft\u0100;e\u0c1a\u2c5a\xf1\u0c26ight\u0100;e\u0ccb\u2c65\xf1\u0cd7\u0100;m\u2c6c\u2c6d\u43bd\u0180;es\u2c74\u2c75\u2c79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2c8f\u2c94\u2c99\u2c9e\u2ca3\u2cb0\u2cb6\u2cd3\u2ce3ash;\u62adarr;\u6904p;\uc000\u224d\u20d2ash;\u62ac\u0100et\u2ca8\u2cac;\uc000\u2265\u20d2;\uc000>\u20d2nfin;\u69de\u0180Aet\u2cbd\u2cc1\u2cc5rr;\u6902;\uc000\u2264\u20d2\u0100;r\u2cca\u2ccd\uc000<\u20d2ie;\uc000\u22b4\u20d2\u0100At\u2cd8\u2cdcrr;\u6903rie;\uc000\u22b5\u20d2im;\uc000\u223c\u20d2\u0180Aan\u2cf0\u2cf4\u2d02rr;\u61d6r\u0100hr\u2cfa\u2cfdk;\u6923\u0100;o\u13e7\u13e5ear;\u6927\u1253\u1a95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2d2d\0\u2d38\u2d48\u2d60\u2d65\u2d72\u2d84\u1b07\0\0\u2d8d\u2dab\0\u2dc8\u2dce\0\u2ddc\u2e19\u2e2b\u2e3e\u2e43\u0100cs\u2d31\u1a97ute\u803b\xf3\u40f3\u0100iy\u2d3c\u2d45r\u0100;c\u1a9e\u2d42\u803b\xf4\u40f4;\u443e\u0280abios\u1aa0\u2d52\u2d57\u01c8\u2d5alac;\u4151v;\u6a38old;\u69bclig;\u4153\u0100cr\u2d69\u2d6dir;\u69bf;\uc000\ud835\udd2c\u036f\u2d79\0\0\u2d7c\0\u2d82n;\u42dbave\u803b\xf2\u40f2;\u69c1\u0100bm\u2d88\u0df4ar;\u69b5\u0200acit\u2d95\u2d98\u2da5\u2da8r\xf2\u1a80\u0100ir\u2d9d\u2da0r;\u69beoss;\u69bbn\xe5\u0e52;\u69c0\u0180aei\u2db1\u2db5\u2db9cr;\u414dga;\u43c9\u0180cdn\u2dc0\u2dc5\u01cdron;\u43bf;\u69b6pf;\uc000\ud835\udd60\u0180ael\u2dd4\u2dd7\u01d2r;\u69b7rp;\u69b9\u0380;adiosv\u2dea\u2deb\u2dee\u2e08\u2e0d\u2e10\u2e16\u6228r\xf2\u1a86\u0200;efm\u2df7\u2df8\u2e02\u2e05\u6a5dr\u0100;o\u2dfe\u2dff\u6134f\xbb\u2dff\u803b\xaa\u40aa\u803b\xba\u40bagof;\u62b6r;\u6a56lope;\u6a57;\u6a5b\u0180clo\u2e1f\u2e21\u2e27\xf2\u2e01ash\u803b\xf8\u40f8l;\u6298i\u016c\u2e2f\u2e34de\u803b\xf5\u40f5es\u0100;a\u01db\u2e3as;\u6a36ml\u803b\xf6\u40f6bar;\u633d\u0ae1\u2e5e\0\u2e7d\0\u2e80\u2e9d\0\u2ea2\u2eb9\0\0\u2ecb\u0e9c\0\u2f13\0\0\u2f2b\u2fbc\0\u2fc8r\u0200;ast\u0403\u2e67\u2e72\u0e85\u8100\xb6;l\u2e6d\u2e6e\u40b6le\xec\u0403\u0269\u2e78\0\0\u2e7bm;\u6af3;\u6afdy;\u443fr\u0280cimpt\u2e8b\u2e8f\u2e93\u1865\u2e97nt;\u4025od;\u402eil;\u6030enk;\u6031r;\uc000\ud835\udd2d\u0180imo\u2ea8\u2eb0\u2eb4\u0100;v\u2ead\u2eae\u43c6;\u43d5ma\xf4\u0a76ne;\u660e\u0180;tv\u2ebf\u2ec0\u2ec8\u43c0chfork\xbb\u1ffd;\u43d6\u0100au\u2ecf\u2edfn\u0100ck\u2ed5\u2eddk\u0100;h\u21f4\u2edb;\u610e\xf6\u21f4s\u0480;abcdemst\u2ef3\u2ef4\u1908\u2ef9\u2efd\u2f04\u2f06\u2f0a\u2f0e\u402bcir;\u6a23ir;\u6a22\u0100ou\u1d40\u2f02;\u6a25;\u6a72n\u80bb\xb1\u0e9dim;\u6a26wo;\u6a27\u0180ipu\u2f19\u2f20\u2f25ntint;\u6a15f;\uc000\ud835\udd61nd\u803b\xa3\u40a3\u0500;Eaceinosu\u0ec8\u2f3f\u2f41\u2f44\u2f47\u2f81\u2f89\u2f92\u2f7e\u2fb6;\u6ab3p;\u6ab7u\xe5\u0ed9\u0100;c\u0ece\u2f4c\u0300;acens\u0ec8\u2f59\u2f5f\u2f66\u2f68\u2f7eppro\xf8\u2f43urlye\xf1\u0ed9\xf1\u0ece\u0180aes\u2f6f\u2f76\u2f7approx;\u6ab9qq;\u6ab5im;\u62e8i\xed\u0edfme\u0100;s\u2f88\u0eae\u6032\u0180Eas\u2f78\u2f90\u2f7a\xf0\u2f75\u0180dfp\u0eec\u2f99\u2faf\u0180als\u2fa0\u2fa5\u2faalar;\u632eine;\u6312urf;\u6313\u0100;t\u0efb\u2fb4\xef\u0efbrel;\u62b0\u0100ci\u2fc0\u2fc5r;\uc000\ud835\udcc5;\u43c8ncsp;\u6008\u0300fiopsu\u2fda\u22e2\u2fdf\u2fe5\u2feb\u2ff1r;\uc000\ud835\udd2epf;\uc000\ud835\udd62rime;\u6057cr;\uc000\ud835\udcc6\u0180aeo\u2ff8\u3009\u3013t\u0100ei\u2ffe\u3005rnion\xf3\u06b0nt;\u6a16st\u0100;e\u3010\u3011\u403f\xf1\u1f19\xf4\u0f14\u0a80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30e0\u310e\u312b\u3147\u3162\u3172\u318e\u3206\u3215\u3224\u3229\u3258\u326e\u3272\u3290\u32b0\u32b7\u0180art\u3047\u304a\u304cr\xf2\u10b3\xf2\u03ddail;\u691car\xf2\u1c65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307f\u308f\u3094\u30cc\u0100eu\u306d\u3071;\uc000\u223d\u0331te;\u4155i\xe3\u116emptyv;\u69b3g\u0200;del\u0fd1\u3089\u308b\u308d;\u6992;\u69a5\xe5\u0fd1uo\u803b\xbb\u40bbr\u0580;abcfhlpstw\u0fdc\u30ac\u30af\u30b7\u30b9\u30bc\u30be\u30c0\u30c3\u30c7\u30cap;\u6975\u0100;f\u0fe0\u30b4s;\u6920;\u6933s;\u691e\xeb\u225d\xf0\u272el;\u6945im;\u6974l;\u61a3;\u619d\u0100ai\u30d1\u30d5il;\u691ao\u0100;n\u30db\u30dc\u6236al\xf3\u0f1e\u0180abr\u30e7\u30ea\u30eer\xf2\u17e5rk;\u6773\u0100ak\u30f3\u30fdc\u0100ek\u30f9\u30fb;\u407d;\u405d\u0100es\u3102\u3104;\u698cl\u0100du\u310a\u310c;\u698e;\u6990\u0200aeuy\u3117\u311c\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xec\u0ff2\xe2\u30fa;\u4440\u0200clqs\u3134\u3137\u313d\u3144a;\u6937dhar;\u6969uo\u0100;r\u020e\u020dh;\u61b3\u0180acg\u314e\u315f\u0f44l\u0200;ips\u0f78\u3158\u315b\u109cn\xe5\u10bbar\xf4\u0fa9t;\u65ad\u0180ilr\u3169\u1023\u316esht;\u697d;\uc000\ud835\udd2f\u0100ao\u3177\u3186r\u0100du\u317d\u317f\xbb\u047b\u0100;l\u1091\u3184;\u696c\u0100;v\u318b\u318c\u43c1;\u43f1\u0180gns\u3195\u31f9\u31fcht\u0300ahlrst\u31a4\u31b0\u31c2\u31d8\u31e4\u31eerrow\u0100;t\u0fdc\u31ada\xe9\u30c8arpoon\u0100du\u31bb\u31bfow\xee\u317ep\xbb\u1092eft\u0100ah\u31ca\u31d0rrow\xf3\u0feaarpoon\xf3\u0551ightarrows;\u61c9quigarro\xf7\u30cbhreetimes;\u62ccg;\u42daingdotse\xf1\u1f32\u0180ahm\u320d\u3210\u3213r\xf2\u0feaa\xf2\u0551;\u600foust\u0100;a\u321e\u321f\u63b1che\xbb\u321fmid;\u6aee\u0200abpt\u3232\u323d\u3240\u3252\u0100nr\u3237\u323ag;\u67edr;\u61fer\xeb\u1003\u0180afl\u3247\u324a\u324er;\u6986;\uc000\ud835\udd63us;\u6a2eimes;\u6a35\u0100ap\u325d\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6a12ar\xf2\u31e3\u0200achq\u327b\u3280\u10bc\u3285quo;\u603ar;\uc000\ud835\udcc7\u0100bu\u30fb\u328ao\u0100;r\u0214\u0213\u0180hir\u3297\u329b\u32a0re\xe5\u31f8mes;\u62cai\u0200;efl\u32aa\u1059\u1821\u32ab\u65b9tri;\u69celuhar;\u6968;\u611e\u0d61\u32d5\u32db\u32df\u332c\u3338\u3371\0\u337a\u33a4\0\0\u33ec\u33f0\0\u3428\u3448\u345a\u34ad\u34b1\u34ca\u34f1\0\u3616\0\0\u3633cute;\u415bqu\xef\u27ba\u0500;Eaceinpsy\u11ed\u32f3\u32f5\u32ff\u3302\u330b\u330f\u331f\u3326\u3329;\u6ab4\u01f0\u32fa\0\u32fc;\u6ab8on;\u4161u\xe5\u11fe\u0100;d\u11f3\u3307il;\u415frc;\u415d\u0180Eas\u3316\u3318\u331b;\u6ab6p;\u6abaim;\u62e9olint;\u6a13i\xed\u1204;\u4441ot\u0180;be\u3334\u1d47\u3335\u62c5;\u6a66\u0380Aacmstx\u3346\u334a\u3357\u335b\u335e\u3363\u336drr;\u61d8r\u0100hr\u3350\u3352\xeb\u2228\u0100;o\u0a36\u0a34t\u803b\xa7\u40a7i;\u403bwar;\u6929m\u0100in\u3369\xf0nu\xf3\xf1t;\u6736r\u0100;o\u3376\u2055\uc000\ud835\udd30\u0200acoy\u3382\u3386\u3391\u33a0rp;\u666f\u0100hy\u338b\u338fcy;\u4449;\u4448rt\u026d\u3399\0\0\u339ci\xe4\u1464ara\xec\u2e6f\u803b\xad\u40ad\u0100gm\u33a8\u33b4ma\u0180;fv\u33b1\u33b2\u33b2\u43c3;\u43c2\u0400;deglnpr\u12ab\u33c5\u33c9\u33ce\u33d6\u33de\u33e1\u33e6ot;\u6a6a\u0100;q\u12b1\u12b0\u0100;E\u33d3\u33d4\u6a9e;\u6aa0\u0100;E\u33db\u33dc\u6a9d;\u6a9fe;\u6246lus;\u6a24arr;\u6972ar\xf2\u113d\u0200aeit\u33f8\u3408\u340f\u3417\u0100ls\u33fd\u3404lsetm\xe9\u336ahp;\u6a33parsl;\u69e4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341c\u341d\u6aaa\u0100;s\u3422\u3423\u6aac;\uc000\u2aac\ufe00\u0180flp\u342e\u3433\u3442tcy;\u444c\u0100;b\u3438\u3439\u402f\u0100;a\u343e\u343f\u69c4r;\u633ff;\uc000\ud835\udd64a\u0100dr\u344d\u0402es\u0100;u\u3454\u3455\u6660it\xbb\u3455\u0180csu\u3460\u3479\u349f\u0100au\u3465\u346fp\u0100;s\u1188\u346b;\uc000\u2293\ufe00p\u0100;s\u11b4\u3475;\uc000\u2294\ufe00u\u0100bp\u347f\u348f\u0180;es\u1197\u119c\u3486et\u0100;e\u1197\u348d\xf1\u119d\u0180;es\u11a8\u11ad\u3496et\u0100;e\u11a8\u349d\xf1\u11ae\u0180;af\u117b\u34a6\u05b0r\u0165\u34ab\u05b1\xbb\u117car\xf2\u1148\u0200cemt\u34b9\u34be\u34c2\u34c5r;\uc000\ud835\udcc8tm\xee\xf1i\xec\u3415ar\xe6\u11be\u0100ar\u34ce\u34d5r\u0100;f\u34d4\u17bf\u6606\u0100an\u34da\u34edight\u0100ep\u34e3\u34eapsilo\xee\u1ee0h\xe9\u2eafs\xbb\u2852\u0280bcmnp\u34fb\u355e\u1209\u358b\u358e\u0480;Edemnprs\u350e\u350f\u3511\u3515\u351e\u3523\u352c\u3531\u3536\u6282;\u6ac5ot;\u6abd\u0100;d\u11da\u351aot;\u6ac3ult;\u6ac1\u0100Ee\u3528\u352a;\u6acb;\u628alus;\u6abfarr;\u6979\u0180eiu\u353d\u3552\u3555t\u0180;en\u350e\u3545\u354bq\u0100;q\u11da\u350feq\u0100;q\u352b\u3528m;\u6ac7\u0100bp\u355a\u355c;\u6ad5;\u6ad3c\u0300;acens\u11ed\u356c\u3572\u3579\u357b\u3326ppro\xf8\u32faurlye\xf1\u11fe\xf1\u11f3\u0180aes\u3582\u3588\u331bppro\xf8\u331aq\xf1\u3317g;\u666a\u0680123;Edehlmnps\u35a9\u35ac\u35af\u121c\u35b2\u35b4\u35c0\u35c9\u35d5\u35da\u35df\u35e8\u35ed\u803b\xb9\u40b9\u803b\xb2\u40b2\u803b\xb3\u40b3;\u6ac6\u0100os\u35b9\u35bct;\u6abeub;\u6ad8\u0100;d\u1222\u35c5ot;\u6ac4s\u0100ou\u35cf\u35d2l;\u67c9b;\u6ad7arr;\u697bult;\u6ac2\u0100Ee\u35e4\u35e6;\u6acc;\u628blus;\u6ac0\u0180eiu\u35f4\u3609\u360ct\u0180;en\u121c\u35fc\u3602q\u0100;q\u1222\u35b2eq\u0100;q\u35e7\u35e4m;\u6ac8\u0100bp\u3611\u3613;\u6ad4;\u6ad6\u0180Aan\u361c\u3620\u362drr;\u61d9r\u0100hr\u3626\u3628\xeb\u222e\u0100;o\u0a2b\u0a29war;\u692alig\u803b\xdf\u40df\u0be1\u3651\u365d\u3660\u12ce\u3673\u3679\0\u367e\u36c2\0\0\0\0\0\u36db\u3703\0\u3709\u376c\0\0\0\u3787\u0272\u3656\0\0\u365bget;\u6316;\u43c4r\xeb\u0e5f\u0180aey\u3666\u366b\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uc000\ud835\udd31\u0200eiko\u3686\u369d\u36b5\u36bc\u01f2\u368b\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369b\u43b8ym;\u43d1\u0100cn\u36a2\u36b2k\u0100as\u36a8\u36aeppro\xf8\u12c1im\xbb\u12acs\xf0\u129e\u0100as\u36ba\u36ae\xf0\u12c1rn\u803b\xfe\u40fe\u01ec\u031f\u36c6\u22e7es\u8180\xd7;bd\u36cf\u36d0\u36d8\u40d7\u0100;a\u190f\u36d5r;\u6a31;\u6a30\u0180eps\u36e1\u36e3\u3700\xe1\u2a4d\u0200;bcf\u0486\u36ec\u36f0\u36f4ot;\u6336ir;\u6af1\u0100;o\u36f9\u36fc\uc000\ud835\udd65rk;\u6ada\xe1\u3362rime;\u6034\u0180aip\u370f\u3712\u3764d\xe5\u1248\u0380adempst\u3721\u374d\u3740\u3751\u3757\u375c\u375fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65b5own\xbb\u1dbbeft\u0100;e\u2800\u373e\xf1\u092e;\u625cight\u0100;e\u32aa\u374b\xf1\u105aot;\u65ecinus;\u6a3alus;\u6a39b;\u69cdime;\u6a3bezium;\u63e2\u0180cht\u3772\u377d\u3781\u0100ry\u3777\u377b;\uc000\ud835\udcc9;\u4446cy;\u445brok;\u4167\u0100io\u378b\u378ex\xf4\u1777head\u0100lr\u3797\u37a0eftarro\xf7\u084fightarrow\xbb\u0f5d\u0900AHabcdfghlmoprstuw\u37d0\u37d3\u37d7\u37e4\u37f0\u37fc\u380e\u381c\u3823\u3834\u3851\u385d\u386b\u38a9\u38cc\u38d2\u38ea\u38f6r\xf2\u03edar;\u6963\u0100cr\u37dc\u37e2ute\u803b\xfa\u40fa\xf2\u1150r\u01e3\u37ea\0\u37edy;\u445eve;\u416d\u0100iy\u37f5\u37farc\u803b\xfb\u40fb;\u4443\u0180abh\u3803\u3806\u380br\xf2\u13adlac;\u4171a\xf2\u13c3\u0100ir\u3813\u3818sht;\u697e;\uc000\ud835\udd32rave\u803b\xf9\u40f9\u0161\u3827\u3831r\u0100lr\u382c\u382e\xbb\u0957\xbb\u1083lk;\u6580\u0100ct\u3839\u384d\u026f\u383f\0\0\u384arn\u0100;e\u3845\u3846\u631cr\xbb\u3846op;\u630fri;\u65f8\u0100al\u3856\u385acr;\u416b\u80bb\xa8\u0349\u0100gp\u3862\u3866on;\u4173f;\uc000\ud835\udd66\u0300adhlsu\u114b\u3878\u387d\u1372\u3891\u38a0own\xe1\u13b3arpoon\u0100lr\u3888\u388cef\xf4\u382digh\xf4\u382fi\u0180;hl\u3899\u389a\u389c\u43c5\xbb\u13faon\xbb\u389aparrows;\u61c8\u0180cit\u38b0\u38c4\u38c8\u026f\u38b6\0\0\u38c1rn\u0100;e\u38bc\u38bd\u631dr\xbb\u38bdop;\u630eng;\u416fri;\u65f9cr;\uc000\ud835\udcca\u0180dir\u38d9\u38dd\u38e2ot;\u62f0lde;\u4169i\u0100;f\u3730\u38e8\xbb\u1813\u0100am\u38ef\u38f2r\xf2\u38a8l\u803b\xfc\u40fcangle;\u69a7\u0780ABDacdeflnoprsz\u391c\u391f\u3929\u392d\u39b5\u39b8\u39bd\u39df\u39e4\u39e8\u39f3\u39f9\u39fd\u3a01\u3a20r\xf2\u03f7ar\u0100;v\u3926\u3927\u6ae8;\u6ae9as\xe8\u03e1\u0100nr\u3932\u3937grt;\u699c\u0380eknprst\u34e3\u3946\u394b\u3952\u395d\u3964\u3996app\xe1\u2415othin\xe7\u1e96\u0180hir\u34eb\u2ec8\u3959op\xf4\u2fb5\u0100;h\u13b7\u3962\xef\u318d\u0100iu\u3969\u396dgm\xe1\u33b3\u0100bp\u3972\u3984setneq\u0100;q\u397d\u3980\uc000\u228a\ufe00;\uc000\u2acb\ufe00setneq\u0100;q\u398f\u3992\uc000\u228b\ufe00;\uc000\u2acc\ufe00\u0100hr\u399b\u399fet\xe1\u369ciangle\u0100lr\u39aa\u39afeft\xbb\u0925ight\xbb\u1051y;\u4432ash\xbb\u1036\u0180elr\u39c4\u39d2\u39d7\u0180;be\u2dea\u39cb\u39cfar;\u62bbq;\u625alip;\u62ee\u0100bt\u39dc\u1468a\xf2\u1469r;\uc000\ud835\udd33tr\xe9\u39aesu\u0100bp\u39ef\u39f1\xbb\u0d1c\xbb\u0d59pf;\uc000\ud835\udd67ro\xf0\u0efbtr\xe9\u39b4\u0100cu\u3a06\u3a0br;\uc000\ud835\udccb\u0100bp\u3a10\u3a18n\u0100Ee\u3980\u3a16\xbb\u397en\u0100Ee\u3992\u3a1e\xbb\u3990igzag;\u699a\u0380cefoprs\u3a36\u3a3b\u3a56\u3a5b\u3a54\u3a61\u3a6airc;\u4175\u0100di\u3a40\u3a51\u0100bg\u3a45\u3a49ar;\u6a5fe\u0100;q\u15fa\u3a4f;\u6259erp;\u6118r;\uc000\ud835\udd34pf;\uc000\ud835\udd68\u0100;e\u1479\u3a66at\xe8\u1479cr;\uc000\ud835\udccc\u0ae3\u178e\u3a87\0\u3a8b\0\u3a90\u3a9b\0\0\u3a9d\u3aa8\u3aab\u3aaf\0\0\u3ac3\u3ace\0\u3ad8\u17dc\u17dftr\xe9\u17d1r;\uc000\ud835\udd35\u0100Aa\u3a94\u3a97r\xf2\u03c3r\xf2\u09f6;\u43be\u0100Aa\u3aa1\u3aa4r\xf2\u03b8r\xf2\u09eba\xf0\u2713is;\u62fb\u0180dpt\u17a4\u3ab5\u3abe\u0100fl\u3aba\u17a9;\uc000\ud835\udd69im\xe5\u17b2\u0100Aa\u3ac7\u3acar\xf2\u03cer\xf2\u0a01\u0100cq\u3ad2\u17b8r;\uc000\ud835\udccd\u0100pt\u17d6\u3adcr\xe9\u17d4\u0400acefiosu\u3af0\u3afd\u3b08\u3b0c\u3b11\u3b15\u3b1b\u3b21c\u0100uy\u3af6\u3afbte\u803b\xfd\u40fd;\u444f\u0100iy\u3b02\u3b06rc;\u4177;\u444bn\u803b\xa5\u40a5r;\uc000\ud835\udd36cy;\u4457pf;\uc000\ud835\udd6acr;\uc000\ud835\udcce\u0100cm\u3b26\u3b29y;\u444el\u803b\xff\u40ff\u0500acdefhiosw\u3b42\u3b48\u3b54\u3b58\u3b64\u3b69\u3b6d\u3b74\u3b7a\u3b80cute;\u417a\u0100ay\u3b4d\u3b52ron;\u417e;\u4437ot;\u417c\u0100et\u3b5d\u3b61tr\xe6\u155fa;\u43b6r;\uc000\ud835\udd37cy;\u4436grarr;\u61ddpf;\uc000\ud835\udd6bcr;\uc000\ud835\udccf\u0100jn\u3b85\u3b87;\u600dj;\u600c'.split("").map((function(e){return e.charCodeAt(0)})));var sM={};Object.defineProperty(sM,"__esModule",{value:!0}),sM.default=new Uint16Array("\u0200aglq\t\x15\x18\x1b\u026d\x0f\0\0\x12p;\u4026os;\u4027t;\u403et;\u403cuot;\u4022".split("").map((function(e){return e.charCodeAt(0)})));var lM={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=n.get(e))&&void 0!==t?t:e}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},e.replaceCodePoint=r,e.default=function(t){return(0,e.fromCodePoint)(r(t))}}(lM),function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=i(aM);e.htmlDecodeTree=o.default;var a=i(sM);e.xmlDecodeTree=a.default;var s=r(lM);e.decodeCodePoint=s.default;var l,c,u=lM;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return u.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return u.fromCodePoint}}),(c=l||(l={}))[c.NUM=35]="NUM",c[c.SEMI=59]="SEMI",c[c.EQUALS=61]="EQUALS",c[c.ZERO=48]="ZERO",c[c.NINE=57]="NINE",c[c.LOWER_A=97]="LOWER_A",c[c.LOWER_F=102]="LOWER_F",c[c.LOWER_X=120]="LOWER_X",c[c.LOWER_Z=122]="LOWER_Z",c[c.UPPER_A=65]="UPPER_A",c[c.UPPER_F=70]="UPPER_F",c[c.UPPER_Z=90]="UPPER_Z";var h,p,f;function d(e){return e>=l.ZERO&&e<=l.NINE}function m(e){return e>=l.UPPER_A&&e<=l.UPPER_F||e>=l.LOWER_A&&e<=l.LOWER_F}function g(e){return e===l.EQUALS||function(e){return e>=l.UPPER_A&&e<=l.UPPER_Z||e>=l.LOWER_A&&e<=l.LOWER_Z||d(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(h=e.BinTrieFlags||(e.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(p||(p={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(f=e.DecodingMode||(e.DecodingMode={}));var y=function(){function e(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===l.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,n,r){if(t!==n){var i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!d(r)&&!m(r))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!d(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,s.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var n=this.decodeTree,r=n[this.treeIndex],i=(r&h.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=b(n,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===f.Attribute&&(0===i||g(o))?0:this.emitNotTerminatedNamedEntity();if(0!==(i=((r=n[this.treeIndex])&h.VALUE_LENGTH)>>14)){if(o===l.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,n=(this.decodeTree[t]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,n){var r=this.decodeTree;return this.emitCodePoint(1===t?r[e]&~h.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===f.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function v(e){var t="",n=new y(e,(function(e){return t+=(0,s.fromCodePoint)(e)}));return function(e,r){for(var i=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),n.startEntity(r);var a=n.write(e,o+1);if(a<0){i=o+n.end();break}i=o+a,o=0===a?i+1:i}var s=t+e.slice(i);return t="",s}}function b(e,t,n,r){var i=(t&h.BRANCH_LENGTH)>>7,o=t&h.JUMP_TABLE;if(0===i)return 0!==o&&r===o?n:-1;if(o){var a=r-o;return a<0||a>=i?-1:e[n+a]-1}for(var s=n,l=s+i-1;s<=l;){var c=s+l>>>1,u=e[c];if(u<r)s=c+1;else{if(!(u>r))return e[c+i];l=c-1}}return-1}e.EntityDecoder=y,e.determineBranch=b;var _=v(o.default),T=v(a.default);e.decodeHTML=function(e,t){return void 0===t&&(t=f.Legacy),_(e,t)},e.decodeHTMLAttribute=function(e){return _(e,f.Attribute)},e.decodeHTMLStrict=function(e){return _(e,f.Strict)},e.decodeXML=function(e){return T(e,f.Strict)}}(oM);var cM={},uM={};function hM(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(uM,"__esModule",{value:!0}),uM.default=new Map(hM([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(hM([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(hM([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(hM([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var pM={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function n(n){for(var r,i="",o=0;null!==(r=e.xmlReplacer.exec(n));){var a=r.index,s=n.charCodeAt(a),l=t.get(s);void 0!==l?(i+=n.substring(o,a)+l,o=a+1):(i+="".concat(n.substring(o,a),"&#x").concat((0,e.getCodePoint)(n,a).toString(16),";"),o=e.xmlReplacer.lastIndex+=+(55296===(64512&s)))}return i+n.substr(o)}function r(e,t){return function(n){for(var r,i=0,o="";r=e.exec(n);)i!==r.index&&(o+=n.substring(i,r.index)),o+=t.get(r[0].charCodeAt(0)),i=r.index+1;return o+n.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296===(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=n,e.escape=n,e.escapeUTF8=r(/[&<>'"]/g,t),e.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(pM);var fM=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cM,"__esModule",{value:!0}),cM.encodeNonAsciiHTML=cM.encodeHTML=void 0;var dM=fM(uM),mM=pM,gM=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function yM(e,t){for(var n,r="",i=0;null!==(n=e.exec(t));){var o=n.index;r+=t.substring(i,o);var a=t.charCodeAt(o),s=dM.default.get(a);if("object"==typeof s){if(o+1<t.length){var l=t.charCodeAt(o+1),c="number"==typeof s.n?s.n===l?s.o:void 0:s.n.get(l);if(void 0!==c){r+=c,i=e.lastIndex+=1;continue}}s=s.v}if(void 0!==s)r+=s,i=o+1;else{var u=(0,mM.getCodePoint)(t,o);r+="&#x".concat(u.toString(16),";"),i=e.lastIndex+=+(u!==a)}}return r+t.substr(i)}cM.encodeHTML=function(e){return yM(gM,e)},cM.encodeNonAsciiHTML=function(e){return yM(mM.xmlReplacer,e)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t,n,r,i=oM,o=cM,a=pM;function s(e,n){if(void 0===n&&(n=t.XML),("number"==typeof n?n:n.level)===t.HTML){var r="object"==typeof n?n.mode:void 0;return(0,i.decodeHTML)(e,r)}return(0,i.decodeXML)(e)}(n=t=e.EntityLevel||(e.EntityLevel={}))[n.XML=0]="XML",n[n.HTML=1]="HTML",function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(r=e.EncodingMode||(e.EncodingMode={})),e.decode=s,e.decodeStrict=function(e,n){var r;void 0===n&&(n=t.XML);var o="number"==typeof n?{level:n}:n;return null!==(r=o.mode)&&void 0!==r||(o.mode=i.DecodingMode.Strict),s(e,o)},e.encode=function(e,n){void 0===n&&(n=t.XML);var i="number"==typeof n?{level:n}:n;return i.mode===r.UTF8?(0,a.escapeUTF8)(e):i.mode===r.Attribute?(0,a.escapeAttribute)(e):i.mode===r.Text?(0,a.escapeText)(e):i.level===t.HTML?i.mode===r.ASCII?(0,o.encodeNonAsciiHTML)(e):(0,o.encodeHTML)(e):(0,a.encodeXML)(e)};var l=pM;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return l.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return l.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return l.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return l.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return l.escapeText}});var c=cM;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return c.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return c.encodeHTML}});var u=oM;Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return u.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return u.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return u.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return u.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return u.decodeXML}})}(iM);var vM={};Object.defineProperty(vM,"__esModule",{value:!0}),vM.attributeNames=vM.elementNames=void 0,vM.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((function(e){return[e.toLowerCase(),e]}))),vM.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((function(e){return[e.toLowerCase(),e]})));var bM=Is&&Is.__assign||function(){return bM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bM.apply(this,arguments)},_M=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),TM=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),EM=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&_M(t,e,n);return TM(t,e),t};Object.defineProperty(rM,"__esModule",{value:!0}),rM.render=void 0;var SM=EM(MN),wM=iM,AM=vM,OM=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function xM(e){return e.replace(/"/g,"&quot;")}var kM=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function IM(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",i=0;i<n.length;i++)r+=CM(n[i],t);return r}function CM(e,t){switch(e.type){case SM.Root:return IM(e.children,t);case SM.Doctype:case SM.Directive:return function(e){return"<".concat(e.data,">")}(e);case SM.Comment:return function(e){return"\x3c!--".concat(e.data,"--\x3e")}(e);case SM.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(e);case SM.Script:case SM.Style:case SM.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=AM.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&PM.has(e.parent.name)&&(t=bM(bM({},t),{xmlMode:!1}))),!t.xmlMode&&DM.has(e.name)&&(t=bM(bM({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),i=function(e,t){var n;if(e){var r=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?xM:t.xmlMode||"utf8"!==t.encodeEntities?wM.encodeXML:wM.escapeAttribute;return Object.keys(e).map((function(n){var i,o,a=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(o=AM.attributeNames.get(n))&&void 0!==o?o:n),t.emptyAttrs||t.xmlMode||""!==a?"".concat(n,'="').concat(r(a),'"'):n})).join(" ")}}(e.attribs,t);return i&&(r+=" ".concat(i)),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&kM.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=IM(e.children,t)),(t.xmlMode||!kM.has(e.name))&&(r+="</".concat(e.name,">"))),r}(e,t);case SM.Text:return function(e,t){var n,r=e.data||"";return!1!==(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)&&!(!t.xmlMode&&e.parent&&OM.has(e.parent.name))&&(r=t.xmlMode||"utf8"!==t.encodeEntities?(0,wM.encodeXML)(r):(0,wM.escapeText)(r)),r}(e,t)}}rM.render=IM,rM.default=IM;var PM=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),DM=new Set(["svg","math"]);var RM=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(RN,"__esModule",{value:!0}),RN.innerText=RN.textContent=RN.getText=RN.getInnerHTML=RN.getOuterHTML=void 0;var NM=NN,MM=RM(rM),LM=MN;function jM(e,t){return(0,MM.default)(e,t)}RN.getOuterHTML=jM,RN.getInnerHTML=function(e,t){return(0,NM.hasChildren)(e)?e.children.map((function(e){return jM(e,t)})).join(""):""},RN.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,NM.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,NM.isCDATA)(t)?e(t.children):(0,NM.isText)(t)?t.data:""},RN.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,NM.hasChildren)(t)&&!(0,NM.isComment)(t)?e(t.children):(0,NM.isText)(t)?t.data:""},RN.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,NM.hasChildren)(t)&&(t.type===LM.ElementType.Tag||(0,NM.isCDATA)(t))?e(t.children):(0,NM.isText)(t)?t.data:""};var BM={};Object.defineProperty(BM,"__esModule",{value:!0}),BM.prevElementSibling=BM.nextElementSibling=BM.getName=BM.hasAttrib=BM.getAttributeValue=BM.getSiblings=BM.getParent=BM.getChildren=void 0;var FM=NN;function GM(e){return(0,FM.hasChildren)(e)?e.children:[]}function HM(e){return e.parent||null}BM.getChildren=GM,BM.getParent=HM,BM.getSiblings=function(e){var t=HM(e);if(null!=t)return GM(t);for(var n=[e],r=e.prev,i=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=i;)n.push(i),i=i.next;return n},BM.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},BM.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},BM.getName=function(e){return e.name},BM.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,FM.isTag)(t);)t=t.next;return t},BM.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,FM.isTag)(t);)t=t.prev;return t};var UM={};function zM(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(UM,"__esModule",{value:!0}),UM.prepend=UM.prependChild=UM.append=UM.appendChild=UM.replaceElement=UM.removeElement=void 0,UM.removeElement=zM,UM.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}},UM.appendChild=function(e,t){if(zM(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},UM.append=function(e,t){zM(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},UM.prependChild=function(e,t){if(zM(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},UM.prepend=function(e,t){zM(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t};var VM={};Object.defineProperty(VM,"__esModule",{value:!0}),VM.findAll=VM.existsOne=VM.findOne=VM.findOneChild=VM.find=VM.filter=void 0;var XM=NN;function YM(e,t,n,r){for(var i=[],o=[t],a=[0];;)if(a[0]>=o[0].length){if(1===a.length)return i;o.shift(),a.shift()}else{var s=o[0][a[0]++];if(e(s)&&(i.push(s),--r<=0))return i;n&&(0,XM.hasChildren)(s)&&s.children.length>0&&(a.unshift(0),o.unshift(s.children))}}VM.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),YM(e,Array.isArray(t)?t:[t],n,r)},VM.find=YM,VM.findOneChild=function(e,t){return t.find(e)},VM.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var i=null,o=0;o<n.length&&!i;o++){var a=n[o];(0,XM.isTag)(a)&&(t(a)?i=a:r&&a.children.length>0&&(i=e(t,a.children,!0)))}return i},VM.existsOne=function e(t,n){return n.some((function(n){return(0,XM.isTag)(n)&&(t(n)||e(t,n.children))}))},VM.findAll=function(e,t){for(var n=[],r=[t],i=[0];;)if(i[0]>=r[0].length){if(1===r.length)return n;r.shift(),i.shift()}else{var o=r[0][i[0]++];(0,XM.isTag)(o)&&(e(o)&&n.push(o),o.children.length>0&&(i.unshift(0),r.unshift(o.children)))}};var WM={};Object.defineProperty(WM,"__esModule",{value:!0}),WM.getElementsByTagType=WM.getElementsByTagName=WM.getElementById=WM.getElements=WM.testElement=void 0;var qM=NN,$M=VM,KM={tag_name:function(e){return"function"==typeof e?function(t){return(0,qM.isTag)(t)&&e(t.name)}:"*"===e?qM.isTag:function(t){return(0,qM.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,qM.isText)(t)&&e(t.data)}:function(t){return(0,qM.isText)(t)&&t.data===e}}};function QM(e,t){return"function"==typeof t?function(n){return(0,qM.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,qM.isTag)(n)&&n.attribs[e]===t}}function ZM(e,t){return function(n){return e(n)||t(n)}}function JM(e){var t=Object.keys(e).map((function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(KM,t)?KM[t](n):QM(t,n)}));return 0===t.length?null:t.reduce(ZM)}WM.testElement=function(e,t){var n=JM(e);return!n||n(t)},WM.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var i=JM(e);return i?(0,$M.filter)(i,t,n,r):[]},WM.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,$M.findOne)(QM("id",e),t,n)},WM.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,$M.filter)(KM.tag_name(e),t,n,r)},WM.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,$M.filter)(KM.tag_type(e),t,n,r)};var eL={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t,n,r=NN;function i(e,n){var i=[],o=[];if(e===n)return 0;for(var a=(0,r.hasChildren)(e)?e:e.parent;a;)i.unshift(a),a=a.parent;for(a=(0,r.hasChildren)(n)?n:n.parent;a;)o.unshift(a),a=a.parent;for(var s=Math.min(i.length,o.length),l=0;l<s&&i[l]===o[l];)l++;if(0===l)return t.DISCONNECTED;var c=i[l-1],u=c.children,h=i[l],p=o[l];return u.indexOf(h)>u.indexOf(p)?c===n?t.FOLLOWING|t.CONTAINED_BY:t.FOLLOWING:c===e?t.PRECEDING|t.CONTAINS:t.PRECEDING}e.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},(n=t=e.DocumentPosition||(e.DocumentPosition={}))[n.DISCONNECTED=1]="DISCONNECTED",n[n.PRECEDING=2]="PRECEDING",n[n.FOLLOWING=4]="FOLLOWING",n[n.CONTAINS=8]="CONTAINS",n[n.CONTAINED_BY=16]="CONTAINED_BY",e.compareDocumentPosition=i,e.uniqueSort=function(e){return(e=e.filter((function(e,t,n){return!n.includes(e,t+1)}))).sort((function(e,n){var r=i(e,n);return r&t.PRECEDING?-1:r&t.FOLLOWING?1:0})),e}}(eL);var tL={};Object.defineProperty(tL,"__esModule",{value:!0}),tL.getFeed=void 0;var nL=RN,rL=WM;tL.getFeed=function(e){var t=sL(uL,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,rL.getElementsByTagName)("entry",n).map((function(e){var t,n=e.children,r={media:aL(n)};cL(r,"id","id",n),cL(r,"title","title",n);var i=null===(t=sL("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);var o=lL("summary",n)||lL("content",n);o&&(r.description=o);var a=lL("updated",n);return a&&(r.pubDate=new Date(a)),r}))};cL(r,"id","id",n),cL(r,"title","title",n);var i=null===(t=sL("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i),cL(r,"description","subtitle",n);var o=lL("updated",n);return o&&(r.updated=new Date(o)),cL(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=sL("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:(0,rL.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,n={media:aL(t)};cL(n,"id","guid",t),cL(n,"title","title",t),cL(n,"link","link",t),cL(n,"description","description",t);var r=lL("pubDate",t)||lL("dc:date",t);return r&&(n.pubDate=new Date(r)),n}))};cL(i,"title","title",r),cL(i,"link","link",r),cL(i,"description","description",r);var o=lL("lastBuildDate",r);return o&&(i.updated=new Date(o)),cL(i,"author","managingEditor",r,!0),i}(t):null};var iL=["url","type","lang"],oL=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function aL(e){return(0,rL.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,i=iL;r<i.length;r++){t[s=i[r]]&&(n[s]=t[s])}for(var o=0,a=oL;o<a.length;o++){var s;t[s=a[o]]&&(n[s]=parseInt(t[s],10))}return t.expression&&(n.expression=t.expression),n}))}function sL(e,t){return(0,rL.getElementsByTagName)(e,t,!0,1)[0]}function lL(e,t,n){return void 0===n&&(n=!1),(0,nL.textContent)((0,rL.getElementsByTagName)(e,t,n,1)).trim()}function cL(e,t,n,r,i){void 0===i&&(i=!1);var o=lL(n,r,i);o&&(e[t]=o)}function uL(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}!function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(RN,e),n(BM,e),n(UM,e),n(VM,e),n(WM,e),n(eL,e),n(tL,e);var r=NN;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return r.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return r.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return r.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return r.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return r.hasChildren}})}(DN);var hL=Is&&Is.__assign||function(){return hL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hL.apply(this,arguments)},pL=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),fL=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dL=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&pL(t,e,n);return fL(t,e),t};Object.defineProperty(PN,"__esModule",{value:!0}),PN.merge=PN.contains=PN.root=PN.parseHTML=PN.text=PN.xml=PN.html=void 0;var mL=DN,gL=dL(kN);function yL(e,t,n){return e?e(t??e._root.children,null,void 0,n).toString():""}function vL(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}PN.html=function(e,t){return yL(this,function(e,t){return!t&&"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}(e)?void(t=e):e,hL(hL(hL({},gL.default),null===this||void 0===this?void 0:this._options),(0,gL.flatten)(t??{})))},PN.xml=function(e){return yL(this,e,hL(hL({},this._options),{xmlMode:!0}))},PN.text=function(e){for(var t=e||(this?this.root():[]),n="",r=0;r<t.length;r++)n+=(0,mL.textContent)(t[r]);return n},PN.parseHTML=function(e,t,n){if(void 0===n&&(n="boolean"==typeof t&&t),!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t);var r=this.load(e,gL.default,!1);return n||r("script").remove(),r.root()[0].children.slice()},PN.root=function(){return this(this._root)},PN.contains=function(e,t){if(t===e)return!1;for(var n=t;n&&n!==n.parent;)if((n=n.parent)===e)return!0;return!1},PN.merge=function(e,t){if(vL(e)&&vL(t)){for(var n=e.length,r=+t.length,i=0;i<r;i++)e[n++]=t[i];return e.length=n,e}};var bL={},_L={},TL={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHtml=e.cloneDom=e.domEach=e.cssCase=e.camelCase=e.isCheerio=e.isTag=void 0;var t,n,r=NN,i=NN;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return i.isTag}}),e.isCheerio=function(e){return null!=e.cheerio},e.camelCase=function(e){return e.replace(/[_.-](\w|$)/g,(function(e,t){return t.toUpperCase()}))},e.cssCase=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},e.domEach=function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r);return e},e.cloneDom=function(e){var t="length"in e?Array.prototype.map.call(e,(function(e){return(0,r.cloneNode)(e,!0)})):[(0,r.cloneNode)(e,!0)],n=new r.Document(t);return t.forEach((function(e){e.parent=n})),t},(n=t||(t={}))[n.LowerA=97]="LowerA",n[n.LowerZ=122]="LowerZ",n[n.UpperA=65]="UpperA",n[n.UpperZ=90]="UpperZ",n[n.Exclamation=33]="Exclamation",e.isHtml=function(e){var n=e.indexOf("<");if(n<0||n>e.length-3)return!1;var r=e.charCodeAt(n+1);return(r>=t.LowerA&&r<=t.LowerZ||r>=t.UpperA&&r<=t.UpperZ||r===t.Exclamation)&&e.includes(">",n+2)}}(TL),Object.defineProperty(_L,"__esModule",{value:!0}),_L.toggleClass=_L.removeClass=_L.addClass=_L.hasClass=_L.removeAttr=_L.val=_L.data=_L.prop=_L.attr=void 0;var EL=PN,SL=TL,wL=DN,AL=Object.prototype.hasOwnProperty,OL=/\s+/,xL="data-",kL={null:null,true:!0,false:!1},IL=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,CL=/^{[^]*}$|^\[[^]*]$/;function PL(e,t,n){var r;if(e&&(0,SL.isTag)(e)){if(null!==(r=e.attribs)&&void 0!==r||(e.attribs={}),!t)return e.attribs;if(AL.call(e.attribs,t))return!n&&IL.test(t)?t:e.attribs[t];if("option"===e.name&&"value"===t)return(0,EL.text)(e.children);if("input"===e.name&&("radio"===e.attribs.type||"checkbox"===e.attribs.type)&&"value"===t)return"on"}}function DL(e,t,n){null===n?jL(e,t):e.attribs[t]="".concat(n)}function RL(e,t,n){return t in e?e[t]:!n&&IL.test(t)?void 0!==PL(e,t,!1):PL(e,t,n)}function NL(e,t,n,r){t in e?e[t]=n:DL(e,t,!r&&IL.test(t)?n?"":null:"".concat(n))}function ML(e,t,n){var r,i=e;null!==(r=i.data)&&void 0!==r||(i.data={}),"object"==typeof t?Object.assign(i.data,t):"string"==typeof t&&void 0!==n&&(i.data[t]=n)}function LL(e,t){var n,r,i;null==t?r=(n=Object.keys(e.attribs).filter((function(e){return e.startsWith(xL)}))).map((function(e){return(0,SL.camelCase)(e.slice(xL.length))})):(n=[xL+(0,SL.cssCase)(t)],r=[t]);for(var o=0;o<n.length;++o){var a=n[o],s=r[o];if(AL.call(e.attribs,a)&&!AL.call(e.data,s)){if(i=e.attribs[a],AL.call(kL,i))i=kL[i];else if(i===String(Number(i)))i=Number(i);else if(CL.test(i))try{i=JSON.parse(i)}catch{}e.data[s]=i}}return null==t?e.data:i}function jL(e,t){!e.attribs||!AL.call(e.attribs,t)||delete e.attribs[t]}function BL(e){return e?e.trim().split(OL):[]}_L.attr=function(e,t){if("object"==typeof e||void 0!==t){if("function"==typeof t){if("string"!=typeof e)throw new Error("Bad combination of arguments.");return(0,SL.domEach)(this,(function(n,r){(0,SL.isTag)(n)&&DL(n,e,t.call(n,r,n.attribs[e]))}))}return(0,SL.domEach)(this,(function(n){(0,SL.isTag)(n)&&("object"==typeof e?Object.keys(e).forEach((function(t){var r=e[t];DL(n,t,r)})):DL(n,e,t))}))}return arguments.length>1?this:PL(this[0],e,this.options.xmlMode)},_L.prop=function(e,t){var n,r=this;if("string"==typeof e&&void 0===t){var i=this[0];if(!i||!(0,SL.isTag)(i))return;switch(e){case"style":var o=this.css(),a=Object.keys(o);return a.forEach((function(e,t){o[t]=e})),o.length=a.length,o;case"tagName":case"nodeName":return i.name.toUpperCase();case"href":case"src":var s=null===(n=i.attribs)||void 0===n?void 0:n[e];return typeof URL<"u"&&("href"===e&&("a"===i.tagName||"link"===i.name)||"src"===e&&("img"===i.tagName||"iframe"===i.tagName||"audio"===i.tagName||"video"===i.tagName||"source"===i.tagName))&&void 0!==s&&this.options.baseURI?new URL(s,this.options.baseURI).href:s;case"innerText":return(0,wL.innerText)(i);case"textContent":return(0,wL.textContent)(i);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return RL(i,e,this.options.xmlMode)}}if("object"==typeof e||void 0!==t){if("function"==typeof t){if("object"==typeof e)throw new Error("Bad combination of arguments.");return(0,SL.domEach)(this,(function(n,i){(0,SL.isTag)(n)&&NL(n,e,t.call(n,i,RL(n,e,r.options.xmlMode)),r.options.xmlMode)}))}return(0,SL.domEach)(this,(function(n){(0,SL.isTag)(n)&&("object"==typeof e?Object.keys(e).forEach((function(t){var i=e[t];NL(n,t,i,r.options.xmlMode)})):NL(n,e,t,r.options.xmlMode))}))}},_L.data=function(e,t){var n,r=this[0];if(r&&(0,SL.isTag)(r)){var i=r;return null!==(n=i.data)&&void 0!==n||(i.data={}),e?"object"==typeof e||void 0!==t?((0,SL.domEach)(this,(function(n){(0,SL.isTag)(n)&&("object"==typeof e?ML(n,e):ML(n,e,t))})),this):AL.call(i.data,e)?i.data[e]:LL(i,e):LL(i)}},_L.val=function(e){var t=0===arguments.length,n=this[0];if(!n||!(0,SL.isTag)(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":var r=this.find("option:selected");if(!t){if(null==this.attr("multiple")&&"object"==typeof e)return this;this.find("option").removeAttr("selected");for(var i="object"!=typeof e?[e]:e,o=0;o<i.length;o++)this.find('option[value="'.concat(i[o],'"]')).attr("selected","");return this}return this.attr("multiple")?r.toArray().map((function(e){return(0,EL.text)(e.children)})):r.attr("value");case"input":case"option":return t?this.attr("value"):this.attr("value",e)}},_L.removeAttr=function(e){for(var t=BL(e),n=function(e){(0,SL.domEach)(r,(function(n){(0,SL.isTag)(n)&&jL(n,t[e])}))},r=this,i=0;i<t.length;i++)n(i);return this},_L.hasClass=function(e){return this.toArray().some((function(t){var n=(0,SL.isTag)(t)&&t.attribs.class,r=-1;if(n&&e.length)for(;(r=n.indexOf(e,r+1))>-1;){var i=r+e.length;if((0===r||OL.test(n[r-1]))&&(i===n.length||OL.test(n[i])))return!0}return!1}))},_L.addClass=function e(t){if("function"==typeof t)return(0,SL.domEach)(this,(function(n,r){if((0,SL.isTag)(n)){var i=n.attribs.class||"";e.call([n],t.call(n,r,i))}}));if(!t||"string"!=typeof t)return this;for(var n=t.split(OL),r=this.length,i=0;i<r;i++){var o=this[i];if((0,SL.isTag)(o)){var a=PL(o,"class",!1);if(a){for(var s=" ".concat(a," "),l=0;l<n.length;l++){var c="".concat(n[l]," ");s.includes(" ".concat(c))||(s+=c)}DL(o,"class",s.trim())}else DL(o,"class",n.join(" ").trim())}}return this},_L.removeClass=function e(t){if("function"==typeof t)return(0,SL.domEach)(this,(function(n,r){(0,SL.isTag)(n)&&e.call([n],t.call(n,r,n.attribs.class||""))}));var n=BL(t),r=n.length,i=0===arguments.length;return(0,SL.domEach)(this,(function(e){if((0,SL.isTag)(e))if(i)e.attribs.class="";else{for(var t=BL(e.attribs.class),o=!1,a=0;a<r;a++){var s=t.indexOf(n[a]);s>=0&&(t.splice(s,1),o=!0,a--)}o&&(e.attribs.class=t.join(" "))}}))},_L.toggleClass=function e(t,n){if("function"==typeof t)return(0,SL.domEach)(this,(function(r,i){(0,SL.isTag)(r)&&e.call([r],t.call(r,i,r.attribs.class||"",n),n)}));if(!t||"string"!=typeof t)return this;for(var r=t.split(OL),i=r.length,o="boolean"==typeof n?n?1:-1:0,a=this.length,s=0;s<a;s++){var l=this[s];if((0,SL.isTag)(l)){for(var c=BL(l.attribs.class),u=0;u<i;u++){var h=c.indexOf(r[u]);o>=0&&h<0?c.push(r[u]):o<=0&&h>=0&&c.splice(h,1)}l.attribs.class=c.join(" ")}}return this};var FL,GL={},HL={};!function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"}(FL||(FL={}));var UL;!function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"}(UL||(UL={}));const zL=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,VL=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,XL=new Map([[126,UL.Element],[94,UL.Start],[36,UL.End],[42,UL.Any],[33,UL.Not],[124,UL.Hyphen]]),YL=new Set(["has","not","matches","is","where","host","host-context"]);function WL(e){switch(e.type){case FL.Adjacent:case FL.Child:case FL.Descendant:case FL.Parent:case FL.Sibling:case FL.ColumnCombinator:return!0;default:return!1}}const qL=new Set(["contains","icontains"]);function $L(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)}function KL(e){return e.replace(VL,$L)}function QL(e){return 39===e||34===e}function ZL(e){return 32===e||9===e||10===e||12===e||13===e}function JL(e,t,n){let r=[];function i(e){const r=t.slice(n+e).match(zL);if(!r)throw new Error(`Expected name, found ${t.slice(n)}`);const[i]=r;return n+=e+i.length,KL(i)}function o(e){for(n+=e;n<t.length&&ZL(t.charCodeAt(n));)n++}function a(){const e=n+=1;let r=1;for(;r>0&&n<t.length;n++)40!==t.charCodeAt(n)||s(n)?41===t.charCodeAt(n)&&!s(n)&&r--:r++;if(r)throw new Error("Parenthesis not matched");return KL(t.slice(e,n-1))}function s(e){let n=0;for(;92===t.charCodeAt(--e);)n++;return 1===(1&n)}function l(){if(r.length>0&&WL(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function c(e){r.length>0&&r[r.length-1].type===FL.Descendant?r[r.length-1].type=e:(l(),r.push({type:e}))}function u(e,t){r.push({type:FL.Attribute,name:e,action:t,value:i(1),namespace:null,ignoreCase:"quirks"})}function h(){if(r.length&&r[r.length-1].type===FL.Descendant&&r.pop(),0===r.length)throw new Error("Empty sub-selector");e.push(r)}if(o(0),t.length===n)return n;e:for(;n<t.length;){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:(0===r.length||r[0].type!==FL.Descendant)&&(l(),r.push({type:FL.Descendant})),o(1);break;case 62:c(FL.Child),o(1);break;case 60:c(FL.Parent),o(1);break;case 126:c(FL.Sibling),o(1);break;case 43:c(FL.Adjacent),o(1);break;case 46:u("class",UL.Element);break;case 35:u("id",UL.Equals);break;case 91:{o(1);let e,a=null;124===t.charCodeAt(n)?e=i(1):t.startsWith("*|",n)?(a="*",e=i(2)):(e=i(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(a=e,e=i(1))),o(0);let l=UL.Exists;const c=XL.get(t.charCodeAt(n));if(c){if(l=c,61!==t.charCodeAt(n+1))throw new Error("Expected `=`");o(2)}else 61===t.charCodeAt(n)&&(l=UL.Equals,o(1));let u="",h=null;if("exists"!==l){if(QL(t.charCodeAt(n))){const e=t.charCodeAt(n);let r=n+1;for(;r<t.length&&(t.charCodeAt(r)!==e||s(r));)r+=1;if(t.charCodeAt(r)!==e)throw new Error("Attribute value didn't end");u=KL(t.slice(n+1,r)),n=r+1}else{const e=n;for(;n<t.length&&(!ZL(t.charCodeAt(n))&&93!==t.charCodeAt(n)||s(n));)n+=1;u=KL(t.slice(e,n))}o(0);const e=32|t.charCodeAt(n);115===e?(h=!1,o(1)):105===e&&(h=!0,o(1))}if(93!==t.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const p={type:FL.Attribute,name:e,action:l,value:u,namespace:a,ignoreCase:h};r.push(p);break}case 58:{if(58===t.charCodeAt(n+1)){r.push({type:FL.PseudoElement,name:i(2).toLowerCase(),data:40===t.charCodeAt(n)?a():null});continue}const e=i(1).toLowerCase();let o=null;if(40===t.charCodeAt(n))if(YL.has(e)){if(QL(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(o=[],n=JL(o,t,n+1),41!==t.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(o=a(),qL.has(e)){const e=o.charCodeAt(0);e===o.charCodeAt(o.length-1)&&QL(e)&&(o=o.slice(1,-1))}o=KL(o)}r.push({type:FL.Pseudo,name:e,data:o});break}case 44:h(),r=[],o(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(e<0)throw new Error("Comment was not terminated");n=e+2,0===r.length&&o(0);break}let a,s=null;if(42===e)n+=1,a="*";else if(124===e){if(a="",124===t.charCodeAt(n+1)){c(FL.ColumnCombinator),o(2);break}}else{if(!zL.test(t.slice(n)))break e;a=i(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(s=a,42===t.charCodeAt(n+1)?(a="*",n+=2):a=i(1)),r.push("*"===a?{type:FL.Universal,namespace:s}:{type:FL.Tag,name:a,namespace:s})}}}return h(),n}const ej=["\\",'"'],tj=[...ej,"(",")"],nj=new Set(ej.map((e=>e.charCodeAt(0)))),rj=new Set(tj.map((e=>e.charCodeAt(0)))),ij=new Set([...tj,"~","^","$","*","+","!","|",":","[","]"," ","."].map((e=>e.charCodeAt(0))));function oj(e){return e.map((e=>e.map(aj).join(""))).join(", ")}function aj(e,t,n){switch(e.type){case FL.Child:return 0===t?"> ":" > ";case FL.Parent:return 0===t?"< ":" < ";case FL.Sibling:return 0===t?"~ ":" ~ ";case FL.Adjacent:return 0===t?"+ ":" + ";case FL.Descendant:return" ";case FL.ColumnCombinator:return 0===t?"|| ":" || ";case FL.Universal:return"*"===e.namespace&&t+1<n.length&&"name"in n[t+1]?"":`${lj(e.namespace)}*`;case FL.Tag:return sj(e);case FL.PseudoElement:return`::${cj(e.name,ij)}${null===e.data?"":`(${cj(e.data,rj)})`}`;case FL.Pseudo:return`:${cj(e.name,ij)}${null===e.data?"":`(${"string"==typeof e.data?cj(e.data,rj):oj(e.data)})`}`;case FL.Attribute:{if("id"===e.name&&e.action===UL.Equals&&"quirks"===e.ignoreCase&&!e.namespace)return`#${cj(e.value,ij)}`;if("class"===e.name&&e.action===UL.Element&&"quirks"===e.ignoreCase&&!e.namespace)return`.${cj(e.value,ij)}`;const t=sj(e);return e.action===UL.Exists?`[${t}]`:`[${t}${function(e){switch(e){case UL.Equals:return"";case UL.Element:return"~";case UL.Start:return"^";case UL.End:return"$";case UL.Any:return"*";case UL.Not:return"!";case UL.Hyphen:return"|";case UL.Exists:throw new Error("Shouldn't be here")}}(e.action)}="${cj(e.value,nj)}"${null===e.ignoreCase?"":e.ignoreCase?" i":" s"}]`}}}function sj(e){return`${lj(e.namespace)}${cj(e.name,ij)}`}function lj(e){return null!==e?`${"*"===e?"*":cj(e,ij)}|`:""}function cj(e,t){let n=0,r="";for(let i=0;i<e.length;i++)t.has(e.charCodeAt(i))&&(r+=`${e.slice(n,i)}\\${e.charAt(i)}`,n=i+1);return r.length>0?r+e.slice(n):e}const uj=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return UL},IgnoreCaseMode:{Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1},get SelectorType(){return FL},isTraversal:WL,parse:function(e){const t=[],n=JL(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t},stringify:oj},Symbol.toStringTag,{value:"Module"})),hj=Ps(uj);var pj={},fj={trueFunc:function(){return!0},falseFunc:function(){return!1}},dj={},mj={};Object.defineProperty(mj,"__esModule",{value:!0}),mj.isTraversal=void 0;var gj=hj,yj=new Map([[gj.SelectorType.Universal,50],[gj.SelectorType.Tag,30],[gj.SelectorType.Attribute,1],[gj.SelectorType.Pseudo,0]]);mj.isTraversal=function(e){return!yj.has(e.type)};var vj=new Map([[gj.AttributeAction.Exists,10],[gj.AttributeAction.Equals,8],[gj.AttributeAction.Not,7],[gj.AttributeAction.Start,6],[gj.AttributeAction.End,6],[gj.AttributeAction.Any,5]]);function bj(e){var t,n,r=null!==(t=yj.get(e.type))&&void 0!==t?t:-1;return e.type===gj.SelectorType.Attribute?(r=null!==(n=vj.get(e.action))&&void 0!==n?n:4,e.action===gj.AttributeAction.Equals&&"id"===e.name&&(r=9),e.ignoreCase&&(r>>=1)):e.type===gj.SelectorType.Pseudo&&(e.data?"has"===e.name||"contains"===e.name?r=0:Array.isArray(e.data)?(r=Math.min.apply(Math,e.data.map((function(e){return Math.min.apply(Math,e.map(bj))}))))<0&&(r=0):r=2:r=3),r}mj.default=function(e){for(var t=e.map(bj),n=1;n<e.length;n++){var r=t[n];if(!(r<0))for(var i=n-1;i>=0&&r<t[i];i--){var o=e[i+1];e[i+1]=e[i],e[i]=o,t[i+1]=t[i],t[i]=r}}};var _j={},Tj={},Ej=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tj,"__esModule",{value:!0}),Tj.attributeRules=void 0;var Sj=Ej(fj),wj=/[-[\]{}()*+?.,\\^$|#\s]/g;function Aj(e){return e.replace(wj,"\\$&")}var Oj=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function xj(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&Oj.has(e.name)}Tj.attributeRules={equals:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;return xj(t,n)?(o=o.toLowerCase(),function(t){var n=r.getAttributeValue(t,i);return null!=n&&n.length===o.length&&n.toLowerCase()===o&&e(t)}):function(t){return r.getAttributeValue(t,i)===o&&e(t)}},hyphen:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=o.length;return xj(t,n)?(o=o.toLowerCase(),function(t){var n=r.getAttributeValue(t,i);return null!=n&&(n.length===a||"-"===n.charAt(a))&&n.substr(0,a).toLowerCase()===o&&e(t)}):function(t){var n=r.getAttributeValue(t,i);return null!=n&&(n.length===a||"-"===n.charAt(a))&&n.substr(0,a)===o&&e(t)}},element:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;if(/\s/.test(o))return Sj.default.falseFunc;var a=new RegExp("(?:^|\\s)".concat(Aj(o),"(?:$|\\s)"),xj(t,n)?"i":"");return function(t){var n=r.getAttributeValue(t,i);return null!=n&&n.length>=o.length&&a.test(n)&&e(t)}},exists:function(e,t,n){var r=t.name,i=n.adapter;return function(t){return i.hasAttrib(t,r)&&e(t)}},start:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=o.length;return 0===a?Sj.default.falseFunc:xj(t,n)?(o=o.toLowerCase(),function(t){var n=r.getAttributeValue(t,i);return null!=n&&n.length>=a&&n.substr(0,a).toLowerCase()===o&&e(t)}):function(t){var n;return!(null===(n=r.getAttributeValue(t,i))||void 0===n||!n.startsWith(o))&&e(t)}},end:function(e,t,n){var r=n.adapter,i=t.name,o=t.value,a=-o.length;return 0===a?Sj.default.falseFunc:xj(t,n)?(o=o.toLowerCase(),function(t){var n;return(null===(n=r.getAttributeValue(t,i))||void 0===n?void 0:n.substr(a).toLowerCase())===o&&e(t)}):function(t){var n;return!(null===(n=r.getAttributeValue(t,i))||void 0===n||!n.endsWith(o))&&e(t)}},any:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;if(""===o)return Sj.default.falseFunc;if(xj(t,n)){var a=new RegExp(Aj(o),"i");return function(t){var n=r.getAttributeValue(t,i);return null!=n&&n.length>=o.length&&a.test(n)&&e(t)}}return function(t){var n;return!(null===(n=r.getAttributeValue(t,i))||void 0===n||!n.includes(o))&&e(t)}},not:function(e,t,n){var r=n.adapter,i=t.name,o=t.value;return""===o?function(t){return!!r.getAttributeValue(t,i)&&e(t)}:xj(t,n)?(o=o.toLowerCase(),function(t){var n=r.getAttributeValue(t,i);return(null==n||n.length!==o.length||n.toLowerCase()!==o)&&e(t)}):function(t){return r.getAttributeValue(t,i)!==o&&e(t)}}};var kj={},Ij={},Cj={},Pj={};Object.defineProperty(Pj,"__esModule",{value:!0}),Pj.parse=void 0;var Dj=new Set([9,10,12,13,32]),Rj="0".charCodeAt(0),Nj="9".charCodeAt(0);Pj.parse=function(e){if("even"===(e=e.trim().toLowerCase()))return[2,0];if("odd"===e)return[2,1];var t=0,n=0,r=o(),i=a();if(t<e.length&&"n"===e.charAt(t)&&(t++,n=r*(i??1),s(),t<e.length?(r=o(),s(),i=a()):r=i=0),null===i||t<e.length)throw new Error("n-th rule couldn't be parsed ('".concat(e,"')"));return[n,r*i];function o(){return"-"===e.charAt(t)?(t++,-1):("+"===e.charAt(t)&&t++,1)}function a(){for(var n=t,r=0;t<e.length&&e.charCodeAt(t)>=Rj&&e.charCodeAt(t)<=Nj;)r=10*r+(e.charCodeAt(t)-Rj),t++;return t===n?null:r}function s(){for(;t<e.length&&Dj.has(e.charCodeAt(t));)t++}};var Mj={},Lj=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mj,"__esModule",{value:!0}),Mj.generate=Mj.compile=void 0;var jj=Lj(fj);Mj.compile=function(e){var t=e[0],n=e[1]-1;if(n<0&&t<=0)return jj.default.falseFunc;if(-1===t)return function(e){return e<=n};if(0===t)return function(e){return e===n};if(1===t)return n<0?jj.default.trueFunc:function(e){return e>=n};var r=Math.abs(t),i=(n%r+r)%r;return t>1?function(e){return e>=n&&e%r===i}:function(e){return e<=n&&e%r===i}},Mj.generate=function(e){var t=e[0],n=e[1]-1,r=0;if(t<0){var i=-t,o=(n%i+i)%i;return function(){var e=o+i*r++;return e>n?null:e}}return 0===t?n<0?function(){return null}:function(){return 0===r++?n:null}:(n<0&&(n+=t*Math.ceil(-n/t)),function(){return t*r+++n})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=e.generate=e.compile=e.parse=void 0;var t=Pj;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}});var n=Mj;Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return n.compile}}),Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return n.generate}}),e.default=function(e){return(0,n.compile)((0,t.parse)(e))},e.sequence=function(e){return(0,n.generate)((0,t.parse)(e))}}(Cj),function(e){var t=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var n=t(Cj),r=t(fj);function i(e,t){return function(n){var r=t.getParent(n);return null!=r&&t.isTag(r)&&e(n)}}function o(e){return function(t,n,i){var o=i.adapter[e];return"function"!=typeof o?r.default.falseFunc:function(e){return o(e)&&t(e)}}}e.filters={contains:function(e,t,n){var r=n.adapter;return function(n){return e(n)&&r.getText(n).includes(t)}},icontains:function(e,t,n){var r=n.adapter,i=t.toLowerCase();return function(t){return e(t)&&r.getText(t).toLowerCase().includes(i)}},"nth-child":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.default.falseFunc?r.default.falseFunc:l===r.default.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=0;i<n.length&&!s(t,n[i]);i++)a.isTag(n[i])&&r++;return l(r)&&e(t)}},"nth-last-child":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.default.falseFunc?r.default.falseFunc:l===r.default.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=n.length-1;i>=0&&!s(t,n[i]);i--)a.isTag(n[i])&&r++;return l(r)&&e(t)}},"nth-of-type":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.default.falseFunc?r.default.falseFunc:l===r.default.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=0;i<n.length;i++){var o=n[i];if(s(t,o))break;a.isTag(o)&&a.getName(o)===a.getName(t)&&r++}return l(r)&&e(t)}},"nth-last-of-type":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.default.falseFunc?r.default.falseFunc:l===r.default.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=n.length-1;i>=0;i--){var o=n[i];if(s(t,o))break;a.isTag(o)&&a.getName(o)===a.getName(t)&&r++}return l(r)&&e(t)}},root:function(e,t,n){var r=n.adapter;return function(t){var n=r.getParent(t);return(null==n||!r.isTag(n))&&e(t)}},scope:function(t,n,r,i){var o=r.equals;return i&&0!==i.length?1===i.length?function(e){return o(i[0],e)&&t(e)}:function(e){return i.includes(e)&&t(e)}:e.filters.root(t,n,r)},hover:o("isHovered"),visited:o("isVisited"),active:o("isActive")}}(Ij);var Bj={};Object.defineProperty(Bj,"__esModule",{value:!0}),Bj.verifyPseudoArgs=Bj.pseudos=void 0,Bj.pseudos={empty:function(e,t){var n=t.adapter;return!n.getChildren(e).some((function(e){return n.isTag(e)||""!==n.getText(e)}))},"first-child":function(e,t){var n=t.adapter,r=t.equals;if(n.prevElementSibling)return null==n.prevElementSibling(e);var i=n.getSiblings(e).find((function(e){return n.isTag(e)}));return null!=i&&r(e,i)},"last-child":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=i.length-1;o>=0;o--){if(r(e,i[o]))return!0;if(n.isTag(i[o]))break}return!1},"first-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=0;a<i.length;a++){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"last-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=i.length-1;a>=0;a--){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"only-of-type":function(e,t){var n=t.adapter,r=t.equals,i=n.getName(e);return n.getSiblings(e).every((function(t){return r(e,t)||!n.isTag(t)||n.getName(t)!==i}))},"only-child":function(e,t){var n=t.adapter,r=t.equals;return n.getSiblings(e).every((function(t){return r(e,t)||!n.isTag(t)}))}},Bj.verifyPseudoArgs=function(e,t,n,r){if(null===n){if(e.length>r)throw new Error("Pseudo-class :".concat(t," requires an argument"))}else if(e.length===r)throw new Error("Pseudo-class :".concat(t," doesn't have any arguments"))};var Fj={};Object.defineProperty(Fj,"__esModule",{value:!0}),Fj.aliases=void 0,Fj.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var Gj={};!function(e){var t=Is&&Is.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},n=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.subselects=e.getNextSiblings=e.ensureIsTag=e.PLACEHOLDER_ELEMENT=void 0;var r=n(fj),i=mj;function o(e,t){return e===r.default.falseFunc?r.default.falseFunc:function(n){return t.isTag(n)&&e(n)}}function a(e,t){var n=t.getSiblings(e);if(n.length<=1)return[];var r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}function s(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}e.PLACEHOLDER_ELEMENT={},e.ensureIsTag=o,e.getNextSiblings=a;var l=function(e,t,n,i,o){var a=o(t,s(n),i);return a===r.default.trueFunc?e:a===r.default.falseFunc?r.default.falseFunc:function(t){return a(t)&&e(t)}};e.subselects={is:l,matches:l,where:l,not:function(e,t,n,i,o){var a=o(t,s(n),i);return a===r.default.falseFunc?e:a===r.default.trueFunc?r.default.falseFunc:function(t){return!a(t)&&e(t)}},has:function(n,l,c,u,h){var p=c.adapter,f=s(c);f.relativeSelector=!0;var d=l.some((function(e){return e.some(i.isTraversal)}))?[e.PLACEHOLDER_ELEMENT]:void 0,m=h(l,f,d);if(m===r.default.falseFunc)return r.default.falseFunc;var g=o(m,p);if(d&&m!==r.default.trueFunc){var y=m.shouldTestNextSiblings,v=void 0!==y&&y;return function(e){if(!n(e))return!1;d[0]=e;var r=p.getChildren(e),i=v?t(t([],r,!0),a(e,p),!0):r;return p.existsOne(g,i)}}return function(e){return n(e)&&p.existsOne(g,p.getChildren(e))}}}}(Gj),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compilePseudoSelector=e.aliases=e.pseudos=e.filters=void 0;var t=hj,n=Ij;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return n.filters}});var r=Bj;Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return r.pseudos}});var i=Fj;Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return i.aliases}});var o=Gj;e.compilePseudoSelector=function(e,a,s,l,c){var u,h=a.name,p=a.data;if(Array.isArray(p)){if(!(h in o.subselects))throw new Error("Unknown pseudo-class :".concat(h,"(").concat(p,")"));return o.subselects[h](e,p,s,l,c)}var f=null===(u=s.pseudos)||void 0===u?void 0:u[h],d="string"==typeof f?f:i.aliases[h];if("string"==typeof d){if(null!=p)throw new Error("Pseudo ".concat(h," doesn't have any arguments"));var m=(0,t.parse)(d);return o.subselects.is(e,m,s,l,c)}if("function"==typeof f)return(0,r.verifyPseudoArgs)(f,h,p,1),function(t){return f(t,p)&&e(t)};if(h in n.filters)return n.filters[h](e,p,s,l);if(h in r.pseudos){var g=r.pseudos[h];return(0,r.verifyPseudoArgs)(g,h,p,2),function(t){return g(t,s,p)&&e(t)}}throw new Error("Unknown pseudo-class :".concat(h))}}(kj),Object.defineProperty(_j,"__esModule",{value:!0}),_j.compileGeneralSelector=void 0;var Hj=Tj,Uj=kj,zj=hj;function Vj(e,t){var n=t.getParent(e);return n&&t.isTag(n)?n:null}_j.compileGeneralSelector=function(e,t,n,r,i){var o=n.adapter,a=n.equals;switch(t.type){case zj.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case zj.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case zj.SelectorType.Attribute:if(null!=t.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),Hj.attributeRules[t.action](e,t,n);case zj.SelectorType.Pseudo:return(0,Uj.compilePseudoSelector)(e,t,n,r,i);case zj.SelectorType.Tag:if(null!=t.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");var s=t.name;return(!n.xmlMode||n.lowerCaseTags)&&(s=s.toLowerCase()),function(t){return o.getName(t)===s&&e(t)};case zj.SelectorType.Descendant:if(!1===n.cacheResults||typeof WeakSet>"u")return function(t){for(var n=t;n=Vj(n,o);)if(e(n))return!0;return!1};var l=new WeakSet;return function(t){for(var n=t;n=Vj(n,o);)if(!l.has(n)){if(o.isTag(n)&&e(n))return!0;l.add(n)}return!1};case"_flexibleDescendant":return function(t){var n=t;do{if(e(n))return!0}while(n=Vj(n,o));return!1};case zj.SelectorType.Parent:return function(t){return o.getChildren(t).some((function(t){return o.isTag(t)&&e(t)}))};case zj.SelectorType.Child:return function(t){var n=o.getParent(t);return null!=n&&o.isTag(n)&&e(n)};case zj.SelectorType.Sibling:return function(t){for(var n=o.getSiblings(t),r=0;r<n.length;r++){var i=n[r];if(a(t,i))break;if(o.isTag(i)&&e(i))return!0}return!1};case zj.SelectorType.Adjacent:return o.prevElementSibling?function(t){var n=o.prevElementSibling(t);return null!=n&&e(n)}:function(t){for(var n,r=o.getSiblings(t),i=0;i<r.length;i++){var s=r[i];if(a(t,s))break;o.isTag(s)&&(n=s)}return!!n&&e(n)};case zj.SelectorType.Universal:if(null!=t.namespace&&"*"!==t.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}};var Xj=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Yj=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Wj=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&Xj(t,e,n);return Yj(t,e),t},qj=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dj,"__esModule",{value:!0}),dj.compileToken=dj.compileUnsafe=dj.compile=void 0;var $j=hj,Kj=qj(fj),Qj=Wj(mj),Zj=_j,Jj=Gj;function eB(e,t,n){return oB("string"==typeof e?(0,$j.parse)(e):e,t,n)}function tB(e){return e.type===$j.SelectorType.Pseudo&&("scope"===e.name||Array.isArray(e.data)&&e.data.some((function(e){return e.some(tB)})))}dj.compile=function(e,t,n){var r=eB(e,t,n);return(0,Jj.ensureIsTag)(r,t.adapter)},dj.compileUnsafe=eB;var nB={type:$j.SelectorType.Descendant},rB={type:"_flexibleDescendant"},iB={type:$j.SelectorType.Pseudo,name:"scope",data:null};function oB(e,t,n){var r;e.forEach(Qj.default),n=null!==(r=t.context)&&void 0!==r?r:n;var i=Array.isArray(n),o=n&&(Array.isArray(n)?n:[n]);if(!1!==t.relativeSelector)!function(e,t,n){for(var r=t.adapter,i=!!n?.every((function(e){var t=r.isTag(e)&&r.getParent(e);return e===Jj.PLACEHOLDER_ELEMENT||t&&r.isTag(t)})),o=0,a=e;o<a.length;o++){var s=a[o];if(!(s.length>0&&(0,Qj.isTraversal)(s[0])&&s[0].type!==$j.SelectorType.Descendant)){if(!i||s.some(tB))continue;s.unshift(nB)}s.unshift(iB)}}(e,t,o);else if(e.some((function(e){return e.length>0&&(0,Qj.isTraversal)(e[0])})))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var a=!1,s=e.map((function(e){if(e.length>=2){var n=e[0],r=e[1];n.type!==$j.SelectorType.Pseudo||"scope"!==n.name||(i&&r.type===$j.SelectorType.Descendant?e[1]=rB:(r.type===$j.SelectorType.Adjacent||r.type===$j.SelectorType.Sibling)&&(a=!0))}return function(e,t,n){var r;return e.reduce((function(e,r){return e===Kj.default.falseFunc?Kj.default.falseFunc:(0,Zj.compileGeneralSelector)(e,r,t,n,oB)}),null!==(r=t.rootFunc)&&void 0!==r?r:Kj.default.trueFunc)}(e,t,o)})).reduce(aB,Kj.default.falseFunc);return s.shouldTestNextSiblings=a,s}function aB(e,t){return t===Kj.default.falseFunc||e===Kj.default.trueFunc?e:e===Kj.default.falseFunc||t===Kj.default.trueFunc?t:function(n){return e(n)||t(n)}}dj.compileToken=oB,function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.aliases=e.pseudos=e.filters=e.is=e.selectOne=e.selectAll=e.prepareContext=e._compileToken=e._compileUnsafe=e.compile=void 0;var o=r(DN),a=i(fj),s=dj,l=Gj,c=function(e,t){return e===t},u={adapter:o,equals:c};function h(e){var t,n,r,i,a=e??u;return null!==(t=a.adapter)&&void 0!==t||(a.adapter=o),null!==(n=a.equals)&&void 0!==n||(a.equals=null!==(i=null===(r=a.adapter)||void 0===r?void 0:r.equals)&&void 0!==i?i:c),a}function p(e){return function(t,n,r){var i=h(n);return e(t,i,r)}}function f(e){return function(t,n,r){var i=h(r);"function"!=typeof t&&(t=(0,s.compileUnsafe)(t,i,n));var o=d(n,i.adapter,t.shouldTestNextSiblings);return e(t,o,i)}}function d(e,t,n){return void 0===n&&(n=!1),n&&(e=function(e,t){for(var n=Array.isArray(e)?e.slice(0):[e],r=n.length,i=0;i<r;i++){var o=(0,l.getNextSiblings)(n[i],t);n.push.apply(n,o)}return n}(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}e.compile=p(s.compile),e._compileUnsafe=p(s.compileUnsafe),e._compileToken=p(s.compileToken),e.prepareContext=d,e.selectAll=f((function(e,t,n){return e!==a.default.falseFunc&&t&&0!==t.length?n.adapter.findAll(e,t):[]})),e.selectOne=f((function(e,t,n){return e!==a.default.falseFunc&&t&&0!==t.length?n.adapter.findOne(e,t):null})),e.is=function(e,t,n){var r=h(n);return("function"==typeof t?t:(0,s.compile)(t,r))(e)},e.default=e.selectAll;var m=kj;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return m.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return m.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return m.aliases}})}(pj);var sB={},lB={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLimit=e.isFilter=e.filterNames=void 0,e.filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]),e.isFilter=function t(n){return"pseudo"===n.type&&(!!e.filterNames.has(n.name)||!("not"!==n.name||!Array.isArray(n.data))&&n.data.some((function(e){return e.some(t)})))},e.getLimit=function(e,t,n){var r=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(r)?r>=0?r+1:1/0:0;case"lt":return isFinite(r)?r>=0?Math.min(r,n):1/0:0;case"gt":return isFinite(r)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}}(lB),Object.defineProperty(sB,"__esModule",{value:!0}),sB.groupSelectors=sB.getDocumentRoot=void 0;var cB=lB;sB.getDocumentRoot=function(e){for(;e.parent;)e=e.parent;return e},sB.groupSelectors=function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];o.some(cB.isFilter)?t.push(o):n.push(o)}return[n,t]},function(e){var t=Is&&Is.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=Is&&Is.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.filter=e.some=e.is=e.aliases=e.pseudos=e.filters=void 0;var a=hj,s=pj,l=i(DN),c=i(fj),u=sB,h=lB,p=pj;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return p.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return p.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return p.aliases}});var f={type:a.SelectorType.Universal,namespace:null},d={type:a.SelectorType.Pseudo,name:"scope",data:null};function m(e,t,n){if(void 0===n&&(n={}),"function"==typeof t)return e.some(t);var r=(0,u.groupSelectors)((0,a.parse)(t)),i=r[0],o=r[1];return i.length>0&&e.some((0,s._compileToken)(i,n))||o.some((function(t){return y(t,e,n).length>0}))}function g(e,t,n){if(0===t.length)return[];var r,i=(0,u.groupSelectors)(e),o=i[0],a=i[1];if(o.length){var s=T(t,o,n);if(0===a.length)return s;s.length&&(r=new Set(s))}for(var c=0;c<a.length&&r?.size!==t.length;c++){var h=a[c];if(0===(r?t.filter((function(e){return l.isTag(e)&&!r.has(e)})):t).length)break;if((s=y(h,t,n)).length)if(r)s.forEach((function(e){return r.add(e)}));else{if(c===a.length-1)return s;r=new Set(s)}}return typeof r<"u"?r.size===t.length?t:t.filter((function(e){return r.has(e)})):[]}function y(e,n,r){var i;if(e.some(a.isTraversal)){var o=null!==(i=r.root)&&void 0!==i?i:(0,u.getDocumentRoot)(n[0]),s=t(t({},r),{context:n,relativeSelector:!1});return e.push(d),v(o,e,s,!0,n.length)}return v(n,e,r,!1,n.length)}function v(e,n,r,i,o){var u=n.findIndex(h.isFilter),p=n.slice(0,u),d=n[u],m=n.length-1===u?o:1/0,y=(0,h.getLimit)(d.name,d.data,m);if(0===y)return[];var _=(0!==p.length||Array.isArray(e)?0===p.length?(Array.isArray(e)?e:[e]).filter(l.isTag):i||p.some(a.isTraversal)?b(e,[p],r,y):T(e,[p],r):l.getChildren(e).filter(l.isTag)).slice(0,y),E=function(e,t,n,r){var i="string"==typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter((function(e,t){return t%2===0}));case"odd":return t.filter((function(e,t){return t%2===1}));case"not":var o=new Set(g(n,t,r));return t.filter((function(e){return!o.has(e)}))}}(d.name,_,d.data,r);if(0===E.length||n.length===u+1)return E;var S=n.slice(u+1),w=S.some(a.isTraversal);if(w){if((0,a.isTraversal)(S[0])){var A=S[0].type;(A===a.SelectorType.Sibling||A===a.SelectorType.Adjacent)&&(E=(0,s.prepareContext)(E,l,!0)),S.unshift(f)}r=t(t({},r),{relativeSelector:!1,rootFunc:function(e){return E.includes(e)}})}else r.rootFunc&&r.rootFunc!==c.trueFunc&&(r=t(t({},r),{rootFunc:c.trueFunc}));return S.some(h.isFilter)?v(E,S,r,!1,o):w?b(E,[S],r,o):T(E,[S],r)}function b(e,t,n,r){return _(e,(0,s._compileToken)(t,n,e),r)}function _(e,t,n){void 0===n&&(n=1/0);var r=(0,s.prepareContext)(e,l,t.shouldTestNextSiblings);return l.find((function(e){return l.isTag(e)&&t(e)}),r,!0,n)}function T(e,t,n){var r=(Array.isArray(e)?e:[e]).filter(l.isTag);if(0===r.length)return r;var i=(0,s._compileToken)(t,n);return i===c.trueFunc?r:r.filter(i)}e.is=function(e,t,n){return void 0===n&&(n={}),m([e],t,n)},e.some=m,e.filter=function(e,t,n){return void 0===n&&(n={}),g((0,a.parse)(e),t,n)},e.select=function(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=1/0),"function"==typeof e)return _(t,e);var i=(0,u.groupSelectors)((0,a.parse)(e)),s=i[0],c=i[1].map((function(e){return v(t,e,n,!0,r)}));return s.length&&c.push(b(t,s,n,r)),0===c.length?[]:1===c.length?c[0]:l.uniqueSort(c.reduce((function(e,t){return o(o([],e,!0),t,!0)})))}}(HL);var uB=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),hB=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),pB=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&uB(t,e,n);return hB(t,e),t},fB=Is&&Is.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(GL,"__esModule",{value:!0}),GL.addBack=GL.add=GL.end=GL.slice=GL.index=GL.toArray=GL.get=GL.eq=GL.last=GL.first=GL.has=GL.not=GL.is=GL.filterArray=GL.filter=GL.map=GL.each=GL.contents=GL.children=GL.siblings=GL.prevUntil=GL.prevAll=GL.prev=GL.nextUntil=GL.nextAll=GL.next=GL.closest=GL.parentsUntil=GL.parents=GL.parent=GL.find=void 0;var dB=NN,mB=pB(HL),gB=TL,yB=PN,vB=DN,bB=/^\s*[~+]/;function _B(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(r){var i,o=e(t,this);return r&&(o=OB(o,r,this.options.xmlMode,null===(i=this._root)||void 0===i?void 0:i[0])),this._make(this.length>1&&o.length>1?n.reduce((function(e,t){return t(e)}),o):o)}}}GL.find=function(e){var t;if(!e)return this._make([]);var n=this.toArray();if("string"!=typeof e){var r=(0,gB.isCheerio)(e)?e.toArray():[e];return this._make(r.filter((function(e){return n.some((function(t){return(0,yB.contains)(t,e)}))})))}var i=bB.test(e)?n:this.children().toArray(),o={context:n,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(mB.select(e,i,o))};var TB=_B((function(e,t){for(var n,r=[],i=0;i<t.length;i++){var o=e(t[i]);r.push(o)}return(n=new Array).concat.apply(n,r)})),EB=_B((function(e,t){for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);null!==i&&n.push(i)}return n}));function SB(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,i=_B((function(e,t){var n=[];return(0,gB.domEach)(t,(function(t){for(var i;(i=e(t))&&!r?.(i,n.length);t=i)n.push(i)})),n})).apply(void 0,fB([e],t,!1));return function(e,t){var n=this;r="string"==typeof e?function(t){return mB.is(t,e,n.options)}:e?AB(e):null;var o=i.call(this,t);return r=null,o}}function wB(e){return Array.from(new Set(e))}function AB(e){return"function"==typeof e?function(t,n){return e.call(t,n,t)}:(0,gB.isCheerio)(e)?function(t){return Array.prototype.includes.call(e,t)}:function(t){return e===t}}function OB(e,t,n,r){return"string"==typeof t?mB.filter(t,e,{xmlMode:n,root:r}):e.filter(AB(t))}GL.parent=EB((function(e){var t=e.parent;return t&&!(0,dB.isDocument)(t)?t:null}),wB),GL.parents=TB((function(e){for(var t=[];e.parent&&!(0,dB.isDocument)(e.parent);)t.push(e.parent),e=e.parent;return t}),vB.uniqueSort,(function(e){return e.reverse()})),GL.parentsUntil=SB((function(e){var t=e.parent;return t&&!(0,dB.isDocument)(t)?t:null}),vB.uniqueSort,(function(e){return e.reverse()})),GL.closest=function(e){var t,n=[];if(!e)return this._make(n);var r={xmlMode:this.options.xmlMode,root:null===(t=this._root)||void 0===t?void 0:t[0]},i="string"==typeof e?function(t){return mB.is(t,e,r)}:AB(e);return(0,gB.domEach)(this,(function(e){for(;e&&(0,gB.isTag)(e);){if(i(e,0)){n.includes(e)||n.push(e);break}e=e.parent}})),this._make(n)},GL.next=EB((function(e){return(0,vB.nextElementSibling)(e)})),GL.nextAll=TB((function(e){for(var t=[];e.next;)e=e.next,(0,gB.isTag)(e)&&t.push(e);return t}),wB),GL.nextUntil=SB((function(e){return(0,vB.nextElementSibling)(e)}),wB),GL.prev=EB((function(e){return(0,vB.prevElementSibling)(e)})),GL.prevAll=TB((function(e){for(var t=[];e.prev;)e=e.prev,(0,gB.isTag)(e)&&t.push(e);return t}),wB),GL.prevUntil=SB((function(e){return(0,vB.prevElementSibling)(e)}),wB),GL.siblings=TB((function(e){return(0,vB.getSiblings)(e).filter((function(t){return(0,gB.isTag)(t)&&t!==e}))}),vB.uniqueSort),GL.children=TB((function(e){return(0,vB.getChildren)(e).filter(gB.isTag)}),wB),GL.contents=function(){var e=this.toArray().reduce((function(e,t){return(0,dB.hasChildren)(t)?e.concat(t.children):e}),[]);return this._make(e)},GL.each=function(e){for(var t=0,n=this.length;t<n&&!1!==e.call(this[t],t,this[t]);)++t;return this},GL.map=function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n],i=e.call(r,n,r);null!=i&&(t=t.concat(i))}return this._make(t)},GL.filter=function(e){var t;return this._make(OB(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))},GL.filterArray=OB,GL.is=function(e){var t=this.toArray();return"string"==typeof e?mB.some(t.filter(gB.isTag),e,this.options):!!e&&t.some(AB(e))},GL.not=function(e){var t=this.toArray();if("string"==typeof e){var n=new Set(mB.filter(e,t,this.options));t=t.filter((function(e){return!n.has(e)}))}else{var r=AB(e);t=t.filter((function(e,t){return!r(e,t)}))}return this._make(t)},GL.has=function(e){var t=this;return this.filter("string"==typeof e?":has(".concat(e,")"):function(n,r){return t._make(r).find(e).length>0})},GL.first=function(){return this.length>1?this._make(this[0]):this},GL.last=function(){return this.length>0?this._make(this[this.length-1]):this},GL.eq=function(e){var t;return 0===(e=+e)&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))},GL.get=function(e){return null==e?this.toArray():this[e<0?this.length+e:e]},GL.toArray=function(){return Array.prototype.slice.call(this)},GL.index=function(e){var t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"==typeof e?(t=this._make(e),n=this[0]):(t=this,n=(0,gB.isCheerio)(e)?e[0]:e),Array.prototype.indexOf.call(t,n)},GL.slice=function(e,t){return this._make(Array.prototype.slice.call(this,e,t))},GL.end=function(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])},GL.add=function(e,t){var n=this._make(e,t),r=(0,vB.uniqueSort)(fB(fB([],this.get(),!0),n.get(),!0));return this._make(r)},GL.addBack=function(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this};var xB={},kB={};Object.defineProperty(kB,"__esModule",{value:!0}),kB.update=kB.getParse=void 0;var IB=DN,CB=NN;function PB(e,t){var n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(var r=0;r<n.length;r++){var i=n[r];i.parent&&i.parent.children!==n&&(0,IB.removeElement)(i),t?(i.prev=n[r-1]||null,i.next=n[r+1]||null):i.prev=i.next=null,i.parent=t}return t}kB.getParse=function(e){return function(t,n,r,i){if(typeof Buffer<"u"&&Buffer.isBuffer(t)&&(t=t.toString()),"string"==typeof t)return e(t,n,r,i);var o=t;if(!Array.isArray(o)&&(0,CB.isDocument)(o))return o;var a=new CB.Document([]);return PB(o,a),a}},kB.update=PB;var DB=Is&&Is.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(xB,"__esModule",{value:!0}),xB.clone=xB.text=xB.toString=xB.html=xB.empty=xB.replaceWith=xB.remove=xB.insertBefore=xB.before=xB.insertAfter=xB.after=xB.wrapAll=xB.unwrap=xB.wrapInner=xB.wrap=xB.prepend=xB.append=xB.prependTo=xB.appendTo=xB._makeDomArray=void 0;var RB=NN,NB=kB,MB=PN,LB=TL,jB=DN;function BB(e){return function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this.length-1;return(0,LB.domEach)(this,(function(r,o){if((0,RB.hasChildren)(r)){var a="function"==typeof n[0]?n[0].call(r,o,t._render(r.children)):n,s=t._makeDomArray(a,o<i);e(s,r.children,r)}}))}}function FB(e,t,n,r,i){for(var o,a,s=DB([t,n],r,!0),l=0===t?null:e[t-1],c=t+n>=e.length?null:e[t+n],u=0;u<r.length;++u){var h=r[u],p=h.parent;if(p){var f=p.children.indexOf(h);f>-1&&(p.children.splice(f,1),i===p&&t>f&&s[0]--)}h.parent=i,h.prev&&(h.prev.next=null!==(o=h.next)&&void 0!==o?o:null),h.next&&(h.next.prev=null!==(a=h.prev)&&void 0!==a?a:null),h.prev=0===u?l:r[u-1],h.next=u===r.length-1?c:r[u+1]}return l&&(l.next=r[0]),c&&(c.prev=r[r.length-1]),e.splice.apply(e,s)}function GB(e){return function(t){for(var n=this.length-1,r=this.parents().last(),i=0;i<this.length;i++){var o=this[i],a="function"==typeof t?t.call(o,i,o):"string"!=typeof t||(0,LB.isHtml)(t)?t:r.find(t).clone(),s=this._makeDomArray(a,i<n)[0];if(s&&(0,RB.hasChildren)(s)){for(var l=s,c=0;c<l.children.length;){var u=l.children[c];(0,LB.isTag)(u)?(l=u,c=0):c++}e(o,l,[s])}}return this}}xB._makeDomArray=function(e,t){var n=this;return null==e?[]:(0,LB.isCheerio)(e)?t?(0,LB.cloneDom)(e.get()):e.get():Array.isArray(e)?e.reduce((function(e,r){return e.concat(n._makeDomArray(r,t))}),[]):"string"==typeof e?this._parse(e,this.options,!1,null).children:t?(0,LB.cloneDom)([e]):[e]},xB.appendTo=function(e){return((0,LB.isCheerio)(e)?e:this._make(e)).append(this),this},xB.prependTo=function(e){return((0,LB.isCheerio)(e)?e:this._make(e)).prepend(this),this},xB.append=BB((function(e,t,n){FB(t,t.length,0,e,n)})),xB.prepend=BB((function(e,t,n){FB(t,0,0,e,n)})),xB.wrap=GB((function(e,t,n){var r=e.parent;if(r){var i=r.children,o=i.indexOf(e);(0,NB.update)([e],t),FB(i,o,0,n,r)}})),xB.wrapInner=GB((function(e,t,n){(0,RB.hasChildren)(e)&&((0,NB.update)(e.children,t),(0,NB.update)(n,e))})),xB.unwrap=function(e){var t=this;return this.parent(e).not("body").each((function(e,n){t._make(n).replaceWith(n.children)})),this},xB.wrapAll=function(e){var t=this[0];if(t){for(var n=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t),r=void 0,i=0;i<n.length;i++)"tag"===n[i].type&&(r=n[i]);for(var o=0;r&&o<r.children.length;){var a=r.children[o];"tag"===a.type?(r=a,o=0):o++}r&&this._make(r).append(this)}return this},xB.after=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return(0,LB.domEach)(this,(function(n,i){var o=n.parent;if((0,RB.hasChildren)(n)&&o){var a=o.children,s=a.indexOf(n);if(!(s<0)){var l="function"==typeof t[0]?t[0].call(n,i,e._render(n.children)):t;FB(a,s+1,0,e._makeDomArray(l,i<r),o)}}}))},xB.insertAfter=function(e){var t=this;"string"==typeof e&&(e=this._make(e)),this.remove();var n=[];return this._makeDomArray(e).forEach((function(e){var r=t.clone().toArray(),i=e.parent;if(i){var o=i.children,a=o.indexOf(e);a<0||(FB(o,a+1,0,r,i),n.push.apply(n,r))}})),this._make(n)},xB.before=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return(0,LB.domEach)(this,(function(n,i){var o=n.parent;if((0,RB.hasChildren)(n)&&o){var a=o.children,s=a.indexOf(n);if(!(s<0)){var l="function"==typeof t[0]?t[0].call(n,i,e._render(n.children)):t;FB(a,s,0,e._makeDomArray(l,i<r),o)}}}))},xB.insertBefore=function(e){var t=this,n=this._make(e);this.remove();var r=[];return(0,LB.domEach)(n,(function(e){var n=t.clone().toArray(),i=e.parent;if(i){var o=i.children,a=o.indexOf(e);a<0||(FB(o,a,0,n,i),r.push.apply(r,n))}})),this._make(r)},xB.remove=function(e){var t=e?this.filter(e):this;return(0,LB.domEach)(t,(function(e){(0,jB.removeElement)(e),e.prev=e.next=e.parent=null})),this},xB.replaceWith=function(e){var t=this;return(0,LB.domEach)(this,(function(n,r){var i=n.parent;if(i){var o=i.children,a="function"==typeof e?e.call(n,r,n):e,s=t._makeDomArray(a);(0,NB.update)(s,null);var l=o.indexOf(n);FB(o,l,1,s,i),s.includes(n)||(n.parent=n.prev=n.next=null)}}))},xB.empty=function(){return(0,LB.domEach)(this,(function(e){(0,RB.hasChildren)(e)&&(e.children.forEach((function(e){e.next=e.prev=e.parent=null})),e.children.length=0)}))},xB.html=function(e){var t=this;if(void 0===e){var n=this[0];return n&&(0,RB.hasChildren)(n)?this._render(n.children):null}return(0,LB.domEach)(this,(function(n){if((0,RB.hasChildren)(n)){n.children.forEach((function(e){e.next=e.prev=e.parent=null}));var r=(0,LB.isCheerio)(e)?e.toArray():t._parse("".concat(e),t.options,!1,n).children;(0,NB.update)(r,n)}}))},xB.toString=function(){return this._render(this)},xB.text=function(e){var t=this;return void 0===e?(0,MB.text)(this):(0,LB.domEach)(this,"function"==typeof e?function(n,r){return t._make(n).text(e.call(n,r,(0,MB.text)([n])))}:function(t){if((0,RB.hasChildren)(t)){t.children.forEach((function(e){e.next=e.prev=e.parent=null}));var n=new RB.Text("".concat(e));(0,NB.update)(n,t)}})},xB.clone=function(){return this._make((0,LB.cloneDom)(this.get()))};var HB={};Object.defineProperty(HB,"__esModule",{value:!0}),HB.css=void 0;var UB=TL;function zB(e,t,n,r){if("string"==typeof t){var i=VB(e),o="function"==typeof n?n.call(e,r,i[t]):n;""===o?delete i[t]:null!=o&&(i[t]=o),e.attribs.style=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat(t?" ":"").concat(n,": ").concat(e[n],";")}),"")}(i)}else"object"==typeof t&&Object.keys(t).forEach((function(n,r){zB(e,n,t[n],r)}))}function VB(e,t){if(e&&(0,UB.isTag)(e)){var n=function(e){if(e=(e||"").trim(),!e)return{};for(var t,n={},r=0,i=e.split(";");r<i.length;r++){var o=i[r],a=o.indexOf(":");if(a<1||a===o.length-1){var s=o.trimEnd();s.length>0&&void 0!==t&&(n[t]+=";".concat(s))}else n[t=o.slice(0,a).trim()]=o.slice(a+1).trim()}return n}(e.attribs.style);if("string"==typeof t)return n[t];if(Array.isArray(t)){var r={};return t.forEach((function(e){null!=n[e]&&(r[e]=n[e])})),r}return n}}HB.css=function(e,t){return null!=e&&null!=t||"object"==typeof e&&!Array.isArray(e)?(0,UB.domEach)(this,(function(n,r){(0,UB.isTag)(n)&&zB(n,e,t,r)})):0!==this.length?VB(this[0],e):void 0};var XB={};Object.defineProperty(XB,"__esModule",{value:!0}),XB.serializeArray=XB.serialize=void 0;var YB=TL,WB="input,select,textarea,keygen",qB=/%20/g,$B=/\r?\n/g;XB.serialize=function(){return this.serializeArray().map((function(e){return"".concat(encodeURIComponent(e.name),"=").concat(encodeURIComponent(e.value))})).join("&").replace(qB,"+")},XB.serializeArray=function(){var e=this;return this.map((function(t,n){var r=e._make(n);return(0,YB.isTag)(n)&&"form"===n.name?r.find(WB).toArray():r.filter(WB).toArray()})).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((function(t,n){var r,i=e._make(n),o=i.attr("name"),a=null!==(r=i.val())&&void 0!==r?r:"";return Array.isArray(a)?a.map((function(e){return{name:o,value:e.replace($B,"\r\n")}})):{name:o,value:a.replace($B,"\r\n")}})).toArray()};var KB=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),QB=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ZB=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&KB(t,e,n);return QB(t,e),t};Object.defineProperty(bL,"__esModule",{value:!0}),bL.Cheerio=void 0;var JB=ZB(_L),eF=ZB(GL),tF=ZB(xB),nF=ZB(HB),rF=ZB(XB),iF=function(){return function(e,t,n){if(this.length=0,this.options=n,this._root=t,e){for(var r=0;r<e.length;r++)this[r]=e[r];this.length=e.length}}}();bL.Cheerio=iF,iF.prototype.cheerio="[cheerio object]",iF.prototype.splice=Array.prototype.splice,iF.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(iF.prototype,JB,eF,tF,nF,rF);var oF=Is&&Is.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aF=Is&&Is.__assign||function(){return aF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},aF.apply(this,arguments)},sF=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),lF=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cF=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&sF(t,e,n);return lF(t,e),t};Object.defineProperty(xN,"__esModule",{value:!0}),xN.getLoad=void 0;var uF=cF(kN),hF=cF(PN),pF=bL,fF=TL;xN.getLoad=function(e,t){return function n(r,i,o){if(void 0===o&&(o=!0),null==r)throw new Error("cheerio.load() expects a string");var a=aF(aF({},uF.default),(0,uF.flatten)(i)),s=e(r,a,o,null),l=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return oF(r,n),r.prototype._make=function(e,t){var n=c(e,t);return n.prevObject=this,n},r.prototype._parse=function(t,n,r,i){return e(t,n,r,i)},r.prototype._render=function(e){return t(e,this.options)},r}(pF.Cheerio);function c(t,n,r,i){if(void 0===r&&(r=s),t&&(0,fF.isCheerio)(t))return t;var o=aF(aF({},a),(0,uF.flatten)(i)),c="string"==typeof r?[e(r,o,!1,null)]:"length"in r?r:[r],u=(0,fF.isCheerio)(c)?c:new l(c,null,o);if(u._root=u,!t)return new l(void 0,u,o);var h="string"==typeof t&&(0,fF.isHtml)(t)?e(t,o,!1,null).children:function(e){return!!e.name||"root"===e.type||"text"===e.type||"comment"===e.type}(t)?[t]:Array.isArray(t)?t:void 0,p=new l(h,u,o);if(h)return p;if("string"!=typeof t)throw new Error("Unexpected type of selector");var f=t,d=n?"string"==typeof n?(0,fF.isHtml)(n)?new l([e(n,o,!1,null)],u,o):(f="".concat(n," ").concat(f),u):(0,fF.isCheerio)(n)?n:new l(Array.isArray(n)?n:[n],u,o):u;return d?d.find(f):p}return Object.assign(c,hF,{load:n,_root:s,_options:a,fn:l.prototype,prototype:l.prototype}),c}};var dF={},mF={},gF={},yF={},vF={},bF={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);var n;e.REPLACEMENT_CHARACTER="\ufffd",(n=e.CODE_POINTS||(e.CODE_POINTS={}))[n.EOF=-1]="EOF",n[n.NULL=0]="NULL",n[n.TABULATION=9]="TABULATION",n[n.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",n[n.LINE_FEED=10]="LINE_FEED",n[n.FORM_FEED=12]="FORM_FEED",n[n.SPACE=32]="SPACE",n[n.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",n[n.QUOTATION_MARK=34]="QUOTATION_MARK",n[n.NUMBER_SIGN=35]="NUMBER_SIGN",n[n.AMPERSAND=38]="AMPERSAND",n[n.APOSTROPHE=39]="APOSTROPHE",n[n.HYPHEN_MINUS=45]="HYPHEN_MINUS",n[n.SOLIDUS=47]="SOLIDUS",n[n.DIGIT_0=48]="DIGIT_0",n[n.DIGIT_9=57]="DIGIT_9",n[n.SEMICOLON=59]="SEMICOLON",n[n.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",n[n.EQUALS_SIGN=61]="EQUALS_SIGN",n[n.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",n[n.QUESTION_MARK=63]="QUESTION_MARK",n[n.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",n[n.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",n[n.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",n[n.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",n[n.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",n[n.GRAVE_ACCENT=96]="GRAVE_ACCENT",n[n.LATIN_SMALL_A=97]="LATIN_SMALL_A",n[n.LATIN_SMALL_F=102]="LATIN_SMALL_F",n[n.LATIN_SMALL_X=120]="LATIN_SMALL_X",n[n.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",n[n.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER",e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"},e.isSurrogate=function(e){return e>=55296&&e<=57343},e.isSurrogatePair=function(e){return e>=56320&&e<=57343},e.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},e.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},e.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||t.has(e)}}(bF);var _F={};function TF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EF(r.key),r)}}function EF(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,(t=e.ERR||(e.ERR={})).controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(_F),Object.defineProperty(vF,"__esModule",{value:!0}),vF.Preprocessor=void 0;const SF=bF,wF=_F;let AF=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return function(e,t,n){t&&TF(e.prototype,t),n&&TF(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(e){const{line:t,col:n,offset:r}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:r,endOffset:r}}},{key:"_err",value:function(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if((0,SF.isSurrogatePair)(t))return this.pos++,this._addGap(),(0,SF.getSurrogatePairCodePoint)(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,SF.CODE_POINTS.EOF;return this._err(wF.ERR.surrogateInInputStream),e}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}},{key:"insertHtmlAtCurrentPos",value:function(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((32|this.html.charCodeAt(this.pos+n))!==e.charCodeAt(n))return!1;return!0}},{key:"peek",value:function(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,SF.CODE_POINTS.EOF;const n=this.html.charCodeAt(t);return n===SF.CODE_POINTS.CARRIAGE_RETURN?SF.CODE_POINTS.LINE_FEED:n}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,SF.CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===SF.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,SF.CODE_POINTS.LINE_FEED):e===SF.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,SF.isSurrogate)(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===SF.CODE_POINTS.LINE_FEED||e===SF.CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}},{key:"_checkForProblematicCharacters",value:function(e){(0,SF.isControlCodePoint)(e)?this._err(wF.ERR.controlCharacterInInputStream):(0,SF.isUndefinedCodePoint)(e)&&this._err(wF.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();vF.Preprocessor=AF;var OF={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,(t=e.TokenType||(e.TokenType={}))[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION",e.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}}(OF);var xF={};function kF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IF(r.key),r)}}function IF(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0,(n=t=e.NS||(e.NS={})).HTML="http://www.w3.org/1999/xhtml",n.MATHML="http://www.w3.org/1998/Math/MathML",n.SVG="http://www.w3.org/2000/svg",n.XLINK="http://www.w3.org/1999/xlink",n.XML="http://www.w3.org/XML/1998/namespace",n.XMLNS="http://www.w3.org/2000/xmlns/",function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(r=e.TAG_NAMES||(e.TAG_NAMES={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(i=e.TAG_ID||(e.TAG_ID={}));const o=new Map([[r.A,i.A],[r.ADDRESS,i.ADDRESS],[r.ANNOTATION_XML,i.ANNOTATION_XML],[r.APPLET,i.APPLET],[r.AREA,i.AREA],[r.ARTICLE,i.ARTICLE],[r.ASIDE,i.ASIDE],[r.B,i.B],[r.BASE,i.BASE],[r.BASEFONT,i.BASEFONT],[r.BGSOUND,i.BGSOUND],[r.BIG,i.BIG],[r.BLOCKQUOTE,i.BLOCKQUOTE],[r.BODY,i.BODY],[r.BR,i.BR],[r.BUTTON,i.BUTTON],[r.CAPTION,i.CAPTION],[r.CENTER,i.CENTER],[r.CODE,i.CODE],[r.COL,i.COL],[r.COLGROUP,i.COLGROUP],[r.DD,i.DD],[r.DESC,i.DESC],[r.DETAILS,i.DETAILS],[r.DIALOG,i.DIALOG],[r.DIR,i.DIR],[r.DIV,i.DIV],[r.DL,i.DL],[r.DT,i.DT],[r.EM,i.EM],[r.EMBED,i.EMBED],[r.FIELDSET,i.FIELDSET],[r.FIGCAPTION,i.FIGCAPTION],[r.FIGURE,i.FIGURE],[r.FONT,i.FONT],[r.FOOTER,i.FOOTER],[r.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[r.FORM,i.FORM],[r.FRAME,i.FRAME],[r.FRAMESET,i.FRAMESET],[r.H1,i.H1],[r.H2,i.H2],[r.H3,i.H3],[r.H4,i.H4],[r.H5,i.H5],[r.H6,i.H6],[r.HEAD,i.HEAD],[r.HEADER,i.HEADER],[r.HGROUP,i.HGROUP],[r.HR,i.HR],[r.HTML,i.HTML],[r.I,i.I],[r.IMG,i.IMG],[r.IMAGE,i.IMAGE],[r.INPUT,i.INPUT],[r.IFRAME,i.IFRAME],[r.KEYGEN,i.KEYGEN],[r.LABEL,i.LABEL],[r.LI,i.LI],[r.LINK,i.LINK],[r.LISTING,i.LISTING],[r.MAIN,i.MAIN],[r.MALIGNMARK,i.MALIGNMARK],[r.MARQUEE,i.MARQUEE],[r.MATH,i.MATH],[r.MENU,i.MENU],[r.META,i.META],[r.MGLYPH,i.MGLYPH],[r.MI,i.MI],[r.MO,i.MO],[r.MN,i.MN],[r.MS,i.MS],[r.MTEXT,i.MTEXT],[r.NAV,i.NAV],[r.NOBR,i.NOBR],[r.NOFRAMES,i.NOFRAMES],[r.NOEMBED,i.NOEMBED],[r.NOSCRIPT,i.NOSCRIPT],[r.OBJECT,i.OBJECT],[r.OL,i.OL],[r.OPTGROUP,i.OPTGROUP],[r.OPTION,i.OPTION],[r.P,i.P],[r.PARAM,i.PARAM],[r.PLAINTEXT,i.PLAINTEXT],[r.PRE,i.PRE],[r.RB,i.RB],[r.RP,i.RP],[r.RT,i.RT],[r.RTC,i.RTC],[r.RUBY,i.RUBY],[r.S,i.S],[r.SCRIPT,i.SCRIPT],[r.SECTION,i.SECTION],[r.SELECT,i.SELECT],[r.SOURCE,i.SOURCE],[r.SMALL,i.SMALL],[r.SPAN,i.SPAN],[r.STRIKE,i.STRIKE],[r.STRONG,i.STRONG],[r.STYLE,i.STYLE],[r.SUB,i.SUB],[r.SUMMARY,i.SUMMARY],[r.SUP,i.SUP],[r.TABLE,i.TABLE],[r.TBODY,i.TBODY],[r.TEMPLATE,i.TEMPLATE],[r.TEXTAREA,i.TEXTAREA],[r.TFOOT,i.TFOOT],[r.TD,i.TD],[r.TH,i.TH],[r.THEAD,i.THEAD],[r.TITLE,i.TITLE],[r.TR,i.TR],[r.TRACK,i.TRACK],[r.TT,i.TT],[r.U,i.U],[r.UL,i.UL],[r.SVG,i.SVG],[r.VAR,i.VAR],[r.WBR,i.WBR],[r.XMP,i.XMP]]);e.getTagID=function(e){var t;return null!==(t=o.get(e))&&void 0!==t?t:i.UNKNOWN};const a=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set},e.isNumberedHeader=function(e){return e===a.H1||e===a.H2||e===a.H3||e===a.H4||e===a.H5||e===a.H6};const s=new Set([r.STYLE,r.SCRIPT,r.XMP,r.IFRAME,r.NOEMBED,r.NOFRAMES,r.PLAINTEXT]);e.hasUnescapedText=function(e,t){return s.has(e)||t&&e===r.NOSCRIPT}}(xF),Object.defineProperty(yF,"__esModule",{value:!0}),yF.Tokenizer=yF.TokenizerMode=void 0;const CF=vF,PF=bF,DF=OF,RF=oM,NF=_F,MF=xF,LF=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var jF;function BF(e){return e>=PF.CODE_POINTS.DIGIT_0&&e<=PF.CODE_POINTS.DIGIT_9}function FF(e){return e>=PF.CODE_POINTS.LATIN_CAPITAL_A&&e<=PF.CODE_POINTS.LATIN_CAPITAL_Z}function GF(e){return function(e){return e>=PF.CODE_POINTS.LATIN_SMALL_A&&e<=PF.CODE_POINTS.LATIN_SMALL_Z}(e)||FF(e)}function HF(e){return GF(e)||BF(e)}function UF(e){return e>=PF.CODE_POINTS.LATIN_CAPITAL_A&&e<=PF.CODE_POINTS.LATIN_CAPITAL_F}function zF(e){return e>=PF.CODE_POINTS.LATIN_SMALL_A&&e<=PF.CODE_POINTS.LATIN_SMALL_F}function VF(e){return e+32}function XF(e){return e===PF.CODE_POINTS.SPACE||e===PF.CODE_POINTS.LINE_FEED||e===PF.CODE_POINTS.TABULATION||e===PF.CODE_POINTS.FORM_FEED}function YF(e){return e===PF.CODE_POINTS.EQUALS_SIGN||HF(e)}function WF(e){return XF(e)||e===PF.CODE_POINTS.SOLIDUS||e===PF.CODE_POINTS.GREATER_THAN_SIGN}!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(jF||(jF={})),yF.TokenizerMode={DATA:jF.DATA,RCDATA:jF.RCDATA,RAWTEXT:jF.RAWTEXT,SCRIPT_DATA:jF.SCRIPT_DATA,PLAINTEXT:jF.PLAINTEXT,CDATA_SECTION:jF.CDATA_SECTION};let qF=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=jF.DATA,this.returnState=jF.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new CF.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return function(e,t,n){t&&kF(e.prototype,t),n&&kF(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"_err",value:function(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}},{key:"getCurrentLocation",value:function(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}},{key:"write",value:function(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||n?.()}},{key:"insertHtmlAtCurrentPos",value:function(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}},{key:"_reconsumeInState",value:function(e,t){this.state=e,this._callState(t)}},{key:"_advanceBy",value:function(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}},{key:"_createStartTagToken",value:function(){this.currentToken={type:DF.TokenType.START_TAG,tagName:"",tagID:MF.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:DF.TokenType.END_TAG,tagName:"",tagID:MF.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(e){this.currentToken={type:DF.TokenType.COMMENT,data:"",location:this.getCurrentLocation(e)}}},{key:"_createDoctypeToken",value:function(e){this.currentToken={type:DF.TokenType.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}},{key:"_createAttr",value:function(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var e,t;const n=this.currentToken;if(null===(0,DF.getTokenAttr)(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(NF.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const e=this.currentToken;this.prepareToken(e),e.tagID=(0,MF.getTagID)(e.tagName),e.type===DF.TokenType.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(NF.ERR.endTagWithAttributes),e.selfClosing&&this._err(NF.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case DF.TokenType.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case DF.TokenType.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case DF.TokenType.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:DF.TokenType.EOF,location:e}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}},{key:"_emitCodePoint",value:function(e){const t=XF(e)?DF.TokenType.WHITESPACE_CHARACTER:e===PF.CODE_POINTS.NULL?DF.TokenType.NULL_CHARACTER:DF.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}},{key:"_emitChars",value:function(e){this._appendCharToCurrentCharacterToken(DF.TokenType.CHARACTER,e)}},{key:"_matchNamedCharacterReference",value:function(e){let t=null,n=0,r=!1;for(let i=0,o=RF.htmlDecodeTree[0];i>=0&&(i=(0,RF.determineBranch)(RF.htmlDecodeTree,o,i+1,e),!(i<0));e=this._consume()){n+=1,o=RF.htmlDecodeTree[i];const a=o&RF.BinTrieFlags.VALUE_LENGTH;if(a){const o=(a>>14)-1;if(e!==PF.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&YF(this.preprocessor.peek(1))?(t=[PF.CODE_POINTS.AMPERSAND],i+=o):(t=0===o?[RF.htmlDecodeTree[i]&~RF.BinTrieFlags.VALUE_LENGTH]:1===o?[RF.htmlDecodeTree[++i]]:[RF.htmlDecodeTree[++i],RF.htmlDecodeTree[++i]],n=0,r=e!==PF.CODE_POINTS.SEMICOLON),0===o){this._consume();break}}}return this._unconsume(n),r&&!this.preprocessor.endOfChunkHit&&this._err(NF.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),t}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===jF.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===jF.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===jF.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}},{key:"_callState",value:function(e){switch(this.state){case jF.DATA:this._stateData(e);break;case jF.RCDATA:this._stateRcdata(e);break;case jF.RAWTEXT:this._stateRawtext(e);break;case jF.SCRIPT_DATA:this._stateScriptData(e);break;case jF.PLAINTEXT:this._statePlaintext(e);break;case jF.TAG_OPEN:this._stateTagOpen(e);break;case jF.END_TAG_OPEN:this._stateEndTagOpen(e);break;case jF.TAG_NAME:this._stateTagName(e);break;case jF.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case jF.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case jF.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case jF.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case jF.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case jF.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case jF.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case jF.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case jF.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case jF.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case jF.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case jF.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case jF.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case jF.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case jF.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case jF.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case jF.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case jF.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case jF.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case jF.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case jF.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case jF.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case jF.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case jF.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case jF.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case jF.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case jF.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case jF.BOGUS_COMMENT:this._stateBogusComment(e);break;case jF.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case jF.COMMENT_START:this._stateCommentStart(e);break;case jF.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case jF.COMMENT:this._stateComment(e);break;case jF.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case jF.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case jF.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case jF.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case jF.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case jF.COMMENT_END:this._stateCommentEnd(e);break;case jF.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case jF.DOCTYPE:this._stateDoctype(e);break;case jF.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case jF.DOCTYPE_NAME:this._stateDoctypeName(e);break;case jF.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case jF.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case jF.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case jF.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case jF.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case jF.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case jF.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case jF.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case jF.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case jF.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case jF.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case jF.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case jF.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case jF.CDATA_SECTION:this._stateCdataSection(e);break;case jF.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case jF.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case jF.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case jF.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case jF.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case jF.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case jF.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case jF.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case jF.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case jF.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(e){switch(e){case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.TAG_OPEN;break;case PF.CODE_POINTS.AMPERSAND:this.returnState=jF.DATA,this.state=jF.CHARACTER_REFERENCE;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitCodePoint(e);break;case PF.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateRcdata",value:function(e){switch(e){case PF.CODE_POINTS.AMPERSAND:this.returnState=jF.RCDATA,this.state=jF.CHARACTER_REFERENCE;break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.RCDATA_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateRawtext",value:function(e){switch(e){case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.RAWTEXT_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptData",value:function(e){switch(e){case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_statePlaintext",value:function(e){switch(e){case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateTagOpen",value:function(e){if(GF(e))this._createStartTagToken(),this.state=jF.TAG_NAME,this._stateTagName(e);else switch(e){case PF.CODE_POINTS.EXCLAMATION_MARK:this.state=jF.MARKUP_DECLARATION_OPEN;break;case PF.CODE_POINTS.SOLIDUS:this.state=jF.END_TAG_OPEN;break;case PF.CODE_POINTS.QUESTION_MARK:this._err(NF.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=jF.BOGUS_COMMENT,this._stateBogusComment(e);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(NF.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=jF.DATA,this._stateData(e)}}},{key:"_stateEndTagOpen",value:function(e){if(GF(e))this._createEndTagToken(),this.state=jF.TAG_NAME,this._stateTagName(e);else switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingEndTagName),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(NF.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=jF.BOGUS_COMMENT,this._stateBogusComment(e)}}},{key:"_stateTagName",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.BEFORE_ATTRIBUTE_NAME;break;case PF.CODE_POINTS.SOLIDUS:this.state=jF.SELF_CLOSING_START_TAG;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentTagToken();break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.tagName+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(FF(e)?VF(e):e)}}},{key:"_stateRcdataLessThanSign",value:function(e){e===PF.CODE_POINTS.SOLIDUS?this.state=jF.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=jF.RCDATA,this._stateRcdata(e))}},{key:"_stateRcdataEndTagOpen",value:function(e){GF(e)?(this.state=jF.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=jF.RCDATA,this._stateRcdata(e))}},{key:"handleSpecialEndTag",value:function(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();switch(this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=jF.BEFORE_ATTRIBUTE_NAME,!1;case PF.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=jF.SELF_CLOSING_START_TAG,!1;case PF.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=jF.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=jF.RCDATA,this._stateRcdata(e))}},{key:"_stateRawtextLessThanSign",value:function(e){e===PF.CODE_POINTS.SOLIDUS?this.state=jF.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=jF.RAWTEXT,this._stateRawtext(e))}},{key:"_stateRawtextEndTagOpen",value:function(e){GF(e)?(this.state=jF.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=jF.RAWTEXT,this._stateRawtext(e))}},{key:"_stateRawtextEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=jF.RAWTEXT,this._stateRawtext(e))}},{key:"_stateScriptDataLessThanSign",value:function(e){switch(e){case PF.CODE_POINTS.SOLIDUS:this.state=jF.SCRIPT_DATA_END_TAG_OPEN;break;case PF.CODE_POINTS.EXCLAMATION_MARK:this.state=jF.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=jF.SCRIPT_DATA,this._stateScriptData(e)}}},{key:"_stateScriptDataEndTagOpen",value:function(e){GF(e)?(this.state=jF.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=jF.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=jF.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscapeStart",value:function(e){e===PF.CODE_POINTS.HYPHEN_MINUS?(this.state=jF.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=jF.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscapeStartDash",value:function(e){e===PF.CODE_POINTS.HYPHEN_MINUS?(this.state=jF.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=jF.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscaped",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedDash",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.state=jF.SCRIPT_DATA_ESCAPED,this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=jF.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedDashDash",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.SCRIPT_DATA,this._emitChars(">");break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.state=jF.SCRIPT_DATA_ESCAPED,this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=jF.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(e){e===PF.CODE_POINTS.SOLIDUS?this.state=jF.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:GF(e)?(this._emitChars("<"),this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=jF.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(e){GF(e)?(this.state=jF.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=jF.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataEscapedEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=jF.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(e){if(this.preprocessor.startsWith(PF.SEQUENCES.SCRIPT,!1)&&WF(this.preprocessor.peek(PF.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<PF.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=jF.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataDoubleEscaped",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case PF.CODE_POINTS.LESS_THAN_SIGN:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.SCRIPT_DATA,this._emitChars(">");break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(PF.REPLACEMENT_CHARACTER);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(e){e===PF.CODE_POINTS.SOLIDUS?(this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(e){if(this.preprocessor.startsWith(PF.SEQUENCES.SCRIPT,!1)&&WF(this.preprocessor.peek(PF.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<PF.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=jF.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=jF.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}},{key:"_stateBeforeAttributeName",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.SOLIDUS:case PF.CODE_POINTS.GREATER_THAN_SIGN:case PF.CODE_POINTS.EOF:this.state=jF.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case PF.CODE_POINTS.EQUALS_SIGN:this._err(NF.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=jF.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=jF.ATTRIBUTE_NAME,this._stateAttributeName(e)}}},{key:"_stateAttributeName",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:case PF.CODE_POINTS.SOLIDUS:case PF.CODE_POINTS.GREATER_THAN_SIGN:case PF.CODE_POINTS.EOF:this._leaveAttrName(),this.state=jF.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case PF.CODE_POINTS.EQUALS_SIGN:this._leaveAttrName(),this.state=jF.BEFORE_ATTRIBUTE_VALUE;break;case PF.CODE_POINTS.QUOTATION_MARK:case PF.CODE_POINTS.APOSTROPHE:case PF.CODE_POINTS.LESS_THAN_SIGN:this._err(NF.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.currentAttr.name+=PF.REPLACEMENT_CHARACTER;break;default:this.currentAttr.name+=String.fromCodePoint(FF(e)?VF(e):e)}}},{key:"_stateAfterAttributeName",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.SOLIDUS:this.state=jF.SELF_CLOSING_START_TAG;break;case PF.CODE_POINTS.EQUALS_SIGN:this.state=jF.BEFORE_ATTRIBUTE_VALUE;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentTagToken();break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=jF.ATTRIBUTE_NAME,this._stateAttributeName(e)}}},{key:"_stateBeforeAttributeValue",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.QUOTATION_MARK:this.state=jF.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:this.state=jF.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingAttributeValue),this.state=jF.DATA,this.emitCurrentTagToken();break;default:this.state=jF.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(e){switch(e){case PF.CODE_POINTS.QUOTATION_MARK:this.state=jF.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case PF.CODE_POINTS.AMPERSAND:this.returnState=jF.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=jF.CHARACTER_REFERENCE;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.currentAttr.value+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAttributeValueSingleQuoted",value:function(e){switch(e){case PF.CODE_POINTS.APOSTROPHE:this.state=jF.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case PF.CODE_POINTS.AMPERSAND:this.returnState=jF.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=jF.CHARACTER_REFERENCE;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.currentAttr.value+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAttributeValueUnquoted",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=jF.BEFORE_ATTRIBUTE_NAME;break;case PF.CODE_POINTS.AMPERSAND:this.returnState=jF.ATTRIBUTE_VALUE_UNQUOTED,this.state=jF.CHARACTER_REFERENCE;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=jF.DATA,this.emitCurrentTagToken();break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this.currentAttr.value+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.QUOTATION_MARK:case PF.CODE_POINTS.APOSTROPHE:case PF.CODE_POINTS.LESS_THAN_SIGN:case PF.CODE_POINTS.EQUALS_SIGN:case PF.CODE_POINTS.GRAVE_ACCENT:this._err(NF.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAfterAttributeValueQuoted",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=jF.BEFORE_ATTRIBUTE_NAME;break;case PF.CODE_POINTS.SOLIDUS:this._leaveAttrValue(),this.state=jF.SELF_CLOSING_START_TAG;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=jF.DATA,this.emitCurrentTagToken();break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this._err(NF.ERR.missingWhitespaceBetweenAttributes),this.state=jF.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}},{key:"_stateSelfClosingStartTag",value:function(e){switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=jF.DATA,this.emitCurrentTagToken();break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInTag),this._emitEOFToken();break;default:this._err(NF.ERR.unexpectedSolidusInTag),this.state=jF.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}},{key:"_stateBogusComment",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentComment(t);break;case PF.CODE_POINTS.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.data+=PF.REPLACEMENT_CHARACTER;break;default:t.data+=String.fromCodePoint(e)}}},{key:"_stateMarkupDeclarationOpen",value:function(e){this._consumeSequenceIfMatch(PF.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(PF.SEQUENCES.DASH_DASH.length+1),this.state=jF.COMMENT_START):this._consumeSequenceIfMatch(PF.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(PF.SEQUENCES.DOCTYPE.length+1),this.state=jF.DOCTYPE):this._consumeSequenceIfMatch(PF.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=jF.CDATA_SECTION:(this._err(NF.ERR.cdataInHtmlContent),this._createCommentToken(PF.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=jF.BOGUS_COMMENT):this._ensureHibernation()||(this._err(NF.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=jF.BOGUS_COMMENT,this._stateBogusComment(e))}},{key:"_stateCommentStart",value:function(e){switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.COMMENT_START_DASH;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:{this._err(NF.ERR.abruptClosingOfEmptyComment),this.state=jF.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateCommentStartDash",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.COMMENT_END;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.abruptClosingOfEmptyComment),this.state=jF.DATA,this.emitCurrentComment(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateComment",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.COMMENT_END_DASH;break;case PF.CODE_POINTS.LESS_THAN_SIGN:t.data+="<",this.state=jF.COMMENT_LESS_THAN_SIGN;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.data+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}},{key:"_stateCommentLessThanSign",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.EXCLAMATION_MARK:t.data+="!",this.state=jF.COMMENT_LESS_THAN_SIGN_BANG;break;case PF.CODE_POINTS.LESS_THAN_SIGN:t.data+="<";break;default:this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateCommentLessThanSignBang",value:function(e){e===PF.CODE_POINTS.HYPHEN_MINUS?this.state=jF.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=jF.COMMENT,this._stateComment(e))}},{key:"_stateCommentLessThanSignBangDash",value:function(e){e===PF.CODE_POINTS.HYPHEN_MINUS?this.state=jF.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=jF.COMMENT_END_DASH,this._stateCommentEndDash(e))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(e){e!==PF.CODE_POINTS.GREATER_THAN_SIGN&&e!==PF.CODE_POINTS.EOF&&this._err(NF.ERR.nestedComment),this.state=jF.COMMENT_END,this._stateCommentEnd(e)}},{key:"_stateCommentEndDash",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:this.state=jF.COMMENT_END;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateCommentEnd",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentComment(t);break;case PF.CODE_POINTS.EXCLAMATION_MARK:this.state=jF.COMMENT_END_BANG;break;case PF.CODE_POINTS.HYPHEN_MINUS:t.data+="-";break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateCommentEndBang",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.HYPHEN_MINUS:t.data+="--!",this.state=jF.COMMENT_END_DASH;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.incorrectlyClosedComment),this.state=jF.DATA,this.emitCurrentComment(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=jF.COMMENT,this._stateComment(e)}}},{key:"_stateDoctype",value:function(e){switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.BEFORE_DOCTYPE_NAME;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case PF.CODE_POINTS.EOF:{this._err(NF.ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(NF.ERR.missingWhitespaceBeforeDoctypeName),this.state=jF.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}},{key:"_stateBeforeDoctypeName",value:function(e){if(FF(e))this._createDoctypeToken(String.fromCharCode(VF(e))),this.state=jF.DOCTYPE_NAME;else switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),this._createDoctypeToken(PF.REPLACEMENT_CHARACTER),this.state=jF.DOCTYPE_NAME;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:{this._err(NF.ERR.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=jF.DATA;break}case PF.CODE_POINTS.EOF:{this._err(NF.ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=jF.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.AFTER_DOCTYPE_NAME;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.name+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(FF(e)?VF(e):e)}}},{key:"_stateAfterDoctypeName",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(PF.SEQUENCES.PUBLIC,!1)?this.state=jF.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(PF.SEQUENCES.SYSTEM,!1)?this.state=jF.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(NF.ERR.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case PF.CODE_POINTS.QUOTATION_MARK:this._err(NF.ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=jF.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:this._err(NF.ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=jF.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.QUOTATION_MARK:t.publicId="",this.state=jF.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:t.publicId="",this.state=jF.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.QUOTATION_MARK:this.state=jF.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.publicId+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.APOSTROPHE:this.state=jF.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.publicId+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.QUOTATION_MARK:this._err(NF.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:this._err(NF.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:this.state=jF.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case PF.CODE_POINTS.QUOTATION_MARK:this._err(NF.ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:this._err(NF.ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case PF.CODE_POINTS.APOSTROPHE:t.systemId="",this.state=jF.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.DATA,this.emitCurrentDoctype(t);break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.QUOTATION_MARK:this.state=jF.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.systemId+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.APOSTROPHE:this.state=jF.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter),t.systemId+=PF.REPLACEMENT_CHARACTER;break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this._err(NF.ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.SPACE:case PF.CODE_POINTS.LINE_FEED:case PF.CODE_POINTS.TABULATION:case PF.CODE_POINTS.FORM_FEED:break;case PF.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(NF.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=jF.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBogusDoctype",value:function(e){const t=this.currentToken;switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=jF.DATA;break;case PF.CODE_POINTS.NULL:this._err(NF.ERR.unexpectedNullCharacter);break;case PF.CODE_POINTS.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}},{key:"_stateCdataSection",value:function(e){switch(e){case PF.CODE_POINTS.RIGHT_SQUARE_BRACKET:this.state=jF.CDATA_SECTION_BRACKET;break;case PF.CODE_POINTS.EOF:this._err(NF.ERR.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateCdataSectionBracket",value:function(e){e===PF.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=jF.CDATA_SECTION_END:(this._emitChars("]"),this.state=jF.CDATA_SECTION,this._stateCdataSection(e))}},{key:"_stateCdataSectionEnd",value:function(e){switch(e){case PF.CODE_POINTS.GREATER_THAN_SIGN:this.state=jF.DATA;break;case PF.CODE_POINTS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=jF.CDATA_SECTION,this._stateCdataSection(e)}}},{key:"_stateCharacterReference",value:function(e){e===PF.CODE_POINTS.NUMBER_SIGN?this.state=jF.NUMERIC_CHARACTER_REFERENCE:HF(e)?(this.state=jF.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,e))}},{key:"_stateNamedCharacterReference",value:function(e){const t=this._matchNamedCharacterReference(e);if(!this._ensureHibernation())if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.AMPERSAND),this.state=jF.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(e){HF(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===PF.CODE_POINTS.SEMICOLON&&this._err(NF.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}},{key:"_stateNumericCharacterReference",value:function(e){this.charRefCode=0,e===PF.CODE_POINTS.LATIN_SMALL_X||e===PF.CODE_POINTS.LATIN_CAPITAL_X?this.state=jF.HEXADEMICAL_CHARACTER_REFERENCE_START:BF(e)?(this.state=jF.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(NF.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(e){!function(e){return BF(e)||UF(e)||zF(e)}(e)?(this._err(NF.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(PF.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState):(this.state=jF.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e))}},{key:"_stateHexademicalCharacterReference",value:function(e){UF(e)?this.charRefCode=16*this.charRefCode+e-55:zF(e)?this.charRefCode=16*this.charRefCode+e-87:BF(e)?this.charRefCode=16*this.charRefCode+e-48:e===PF.CODE_POINTS.SEMICOLON?this.state=jF.NUMERIC_CHARACTER_REFERENCE_END:(this._err(NF.ERR.missingSemicolonAfterCharacterReference),this.state=jF.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}},{key:"_stateDecimalCharacterReference",value:function(e){BF(e)?this.charRefCode=10*this.charRefCode+e-48:e===PF.CODE_POINTS.SEMICOLON?this.state=jF.NUMERIC_CHARACTER_REFERENCE_END:(this._err(NF.ERR.missingSemicolonAfterCharacterReference),this.state=jF.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}},{key:"_stateNumericCharacterReferenceEnd",value:function(e){if(this.charRefCode===PF.CODE_POINTS.NULL)this._err(NF.ERR.nullCharacterReference),this.charRefCode=PF.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(NF.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=PF.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,PF.isSurrogate)(this.charRefCode))this._err(NF.ERR.surrogateCharacterReference),this.charRefCode=PF.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,PF.isUndefinedCodePoint)(this.charRefCode))this._err(NF.ERR.noncharacterCharacterReference);else if((0,PF.isControlCodePoint)(this.charRefCode)||this.charRefCode===PF.CODE_POINTS.CARRIAGE_RETURN){this._err(NF.ERR.controlCharacterReference);const e=LF.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}]),e}();yF.Tokenizer=qF;var $F={};function KF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QF(r.key),r)}}function QF(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}Object.defineProperty($F,"__esModule",{value:!0}),$F.OpenElementStack=void 0;const ZF=xF,JF=new Set([ZF.TAG_ID.DD,ZF.TAG_ID.DT,ZF.TAG_ID.LI,ZF.TAG_ID.OPTGROUP,ZF.TAG_ID.OPTION,ZF.TAG_ID.P,ZF.TAG_ID.RB,ZF.TAG_ID.RP,ZF.TAG_ID.RT,ZF.TAG_ID.RTC]),eG=new Set([...JF,ZF.TAG_ID.CAPTION,ZF.TAG_ID.COLGROUP,ZF.TAG_ID.TBODY,ZF.TAG_ID.TD,ZF.TAG_ID.TFOOT,ZF.TAG_ID.TH,ZF.TAG_ID.THEAD,ZF.TAG_ID.TR]),tG=new Map([[ZF.TAG_ID.APPLET,ZF.NS.HTML],[ZF.TAG_ID.CAPTION,ZF.NS.HTML],[ZF.TAG_ID.HTML,ZF.NS.HTML],[ZF.TAG_ID.MARQUEE,ZF.NS.HTML],[ZF.TAG_ID.OBJECT,ZF.NS.HTML],[ZF.TAG_ID.TABLE,ZF.NS.HTML],[ZF.TAG_ID.TD,ZF.NS.HTML],[ZF.TAG_ID.TEMPLATE,ZF.NS.HTML],[ZF.TAG_ID.TH,ZF.NS.HTML],[ZF.TAG_ID.ANNOTATION_XML,ZF.NS.MATHML],[ZF.TAG_ID.MI,ZF.NS.MATHML],[ZF.TAG_ID.MN,ZF.NS.MATHML],[ZF.TAG_ID.MO,ZF.NS.MATHML],[ZF.TAG_ID.MS,ZF.NS.MATHML],[ZF.TAG_ID.MTEXT,ZF.NS.MATHML],[ZF.TAG_ID.DESC,ZF.NS.SVG],[ZF.TAG_ID.FOREIGN_OBJECT,ZF.NS.SVG],[ZF.TAG_ID.TITLE,ZF.NS.SVG]]),nG=[ZF.TAG_ID.H1,ZF.TAG_ID.H2,ZF.TAG_ID.H3,ZF.TAG_ID.H4,ZF.TAG_ID.H5,ZF.TAG_ID.H6],rG=[ZF.TAG_ID.TR,ZF.TAG_ID.TEMPLATE,ZF.TAG_ID.HTML],iG=[ZF.TAG_ID.TBODY,ZF.TAG_ID.TFOOT,ZF.TAG_ID.THEAD,ZF.TAG_ID.TEMPLATE,ZF.TAG_ID.HTML],oG=[ZF.TAG_ID.TABLE,ZF.TAG_ID.TEMPLATE,ZF.TAG_ID.HTML],aG=[ZF.TAG_ID.TD,ZF.TAG_ID.TH];let sG=function(){function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=ZF.TAG_ID.UNKNOWN,this.current=t}return function(e,t,n){t&&KF(e.prototype,t),n&&KF(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(e){return this.items.lastIndexOf(e,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===ZF.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ZF.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}},{key:"pop",value:function(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}},{key:"replace",value:function(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}},{key:"insertAfter",value:function(e,t,n){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==ZF.NS.HTML);this.shortenToLength(t<0?0:t)}},{key:"shortenToLength",value:function(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}},{key:"popUntilElementPopped",value:function(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}},{key:"popUntilPopped",value:function(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(nG,ZF.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(aG,ZF.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}},{key:"clearBackTo",value:function(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(oG,ZF.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(iG,ZF.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(rG,ZF.NS.HTML)}},{key:"remove",value:function(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===ZF.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(e){return this._indexOf(e)>-1}},{key:"getCommonAncestor",value:function(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}},{key:"isRootHtmlElementCurrent",value:function(){return 0===this.stackTop&&this.tagIDs[0]===ZF.TAG_ID.HTML}},{key:"hasInScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===ZF.NS.HTML)return!0;if(tG.get(n)===r)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if((0,ZF.isNumberedHeader)(t)&&n===ZF.NS.HTML)return!0;if(tG.get(t)===n)return!1}return!0}},{key:"hasInListItemScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===ZF.NS.HTML)return!0;if((n===ZF.TAG_ID.UL||n===ZF.TAG_ID.OL)&&r===ZF.NS.HTML||tG.get(n)===r)return!1}return!0}},{key:"hasInButtonScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===ZF.NS.HTML)return!0;if(n===ZF.TAG_ID.BUTTON&&r===ZF.NS.HTML||tG.get(n)===r)return!1}return!0}},{key:"hasInTableScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ZF.NS.HTML){if(n===e)return!0;if(n===ZF.TAG_ID.TABLE||n===ZF.TAG_ID.TEMPLATE||n===ZF.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===ZF.NS.HTML){if(t===ZF.TAG_ID.TBODY||t===ZF.TAG_ID.THEAD||t===ZF.TAG_ID.TFOOT)return!0;if(t===ZF.TAG_ID.TABLE||t===ZF.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ZF.NS.HTML){if(n===e)return!0;if(n!==ZF.TAG_ID.OPTION&&n!==ZF.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;JF.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;eG.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(e){for(;this.currentTagId!==e&&eG.has(this.currentTagId);)this.pop()}}]),e}();$F.OpenElementStack=sG;var lG={};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;var r,i;(i=r=e.EntryType||(e.EntryType={}))[i.Marker=0]="Marker",i[i.Element=1]="Element";const o={type:r.Marker};let a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.treeAdapter=t,this.entries=[],this.bookmark=null}return function(e,n,r){n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"_getNoahArkConditionCandidates",value:function(e,t){const n=[],i=t.length,o=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const e=this.entries[s];if(e.type===r.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===o&&this.treeAdapter.getNamespaceURI(t)===a){const e=this.treeAdapter.getAttrList(t);e.length===i&&n.push({idx:s,attrs:e})}}return n}},{key:"_ensureNoahArkCondition",value:function(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const r=new Map(t.map((e=>[e.name,e.value])));let i=0;for(let o=0;o<n.length;o++){const e=n[o];e.attrs.every((e=>r.get(e.name)===e.value))&&(i+=1,i>=3&&this.entries.splice(e.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(o)}},{key:"pushElement",value:function(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:r.Element,element:e,token:t})}},{key:"insertElementAfterBookmark",value:function(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:r.Element,element:e,token:t})}},{key:"removeEntry",value:function(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}},{key:"clearToLastMarker",value:function(){const e=this.entries.indexOf(o);e>=0?this.entries.splice(0,e+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(e){const t=this.entries.find((t=>t.type===r.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===r.Element?t:null}},{key:"getElementEntry",value:function(e){return this.entries.find((t=>t.type===r.Element&&t.element===e))}}]),e}();e.FormattingElementList=a}(lG);var cG={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=xF;function n(e){return{nodeName:"#text",value:e,parentNode:null}}e.defaultTreeAdapter={createDocument:()=>({nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(t,n,r,i){const o=t.childNodes.find((e=>"#documentType"===e.nodeName));if(o)o.name=n,o.publicId=r,o.systemId=i;else{const o={nodeName:"#documentType",name:n,publicId:r,systemId:i,parentNode:null};e.defaultTreeAdapter.appendChild(t,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(t,r){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(n))return void(n.value+=r)}e.defaultTreeAdapter.appendChild(t,n(r))},insertTextBefore(t,r,i){const o=t.childNodes[t.childNodes.indexOf(i)-1];o&&e.defaultTreeAdapter.isTextNode(o)?o.value+=r:e.defaultTreeAdapter.insertBefore(t,n(r),i)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation=Object.assign(Object.assign({},e.sourceCodeLocation),t)}}}(cG);var uG={};Object.defineProperty(uG,"__esModule",{value:!0}),uG.getDocumentMode=uG.isConforming=void 0;const hG=xF,pG="html",fG=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],dG=[...fG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],mG=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),gG=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],yG=[...gG,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function vG(e,t){return t.some((t=>e.startsWith(t)))}uG.isConforming=function(e){return e.name===pG&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},uG.getDocumentMode=function(e){if(e.name!==pG)return hG.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return hG.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),mG.has(n))return hG.DOCUMENT_MODE.QUIRKS;let e=null===t?dG:fG;if(vG(n,e))return hG.DOCUMENT_MODE.QUIRKS;if(e=null===t?gG:yG,vG(n,e))return hG.DOCUMENT_MODE.LIMITED_QUIRKS}return hG.DOCUMENT_MODE.NO_QUIRKS};var bG={};function _G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TG(r.key),r)}}function TG(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=xF,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},r=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),i=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e])));const o=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);e.causesExit=function(e){const n=e.tagID;return n===t.TAG_ID.FONT&&e.attrs.some((e=>{let{name:n}=e;return n===t.ATTRS.COLOR||n===t.ATTRS.SIZE||n===t.ATTRS.FACE}))||o.has(n)},e.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},e.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=r.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}},e.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=i.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},e.adjustTokenSVGTagName=function(n){const r=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(n.tagName);null!=r&&(n.tagName=r,n.tagID=(0,t.getTagID)(n.tagName))},e.isIntegrationPoint=function(e,r,i,o){return(!o||o===t.NS.HTML)&&function(e,r,i){if(r===t.NS.MATHML&&e===t.TAG_ID.ANNOTATION_XML)for(let o=0;o<i.length;o++)if(i[o].name===t.ATTRS.ENCODING){const e=i[o].value.toLowerCase();return e===n.TEXT_HTML||e===n.APPLICATION_XML}return r===t.NS.SVG&&(e===t.TAG_ID.FOREIGN_OBJECT||e===t.TAG_ID.DESC||e===t.TAG_ID.TITLE)}(e,r,i)||(!o||o===t.NS.MATHML)&&function(e,n){return n===t.NS.MATHML&&(e===t.TAG_ID.MI||e===t.TAG_ID.MO||e===t.TAG_ID.MN||e===t.TAG_ID.MS||e===t.TAG_ID.MTEXT)}(e,r)}}(bG),Object.defineProperty(gF,"__esModule",{value:!0}),gF.Parser=void 0;const EG=yF,SG=$F,wG=lG,AG=cG,OG=uG,xG=bG,kG=_F,IG=bF,CG=xF,PG=OF,DG="hidden",RG=8,NG=3;var MG;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(MG||(MG={}));const LG={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},jG=new Set([CG.TAG_ID.TABLE,CG.TAG_ID.TBODY,CG.TAG_ID.TFOOT,CG.TAG_ID.THEAD,CG.TAG_ID.TR]),BG={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:AG.defaultTreeAdapter,onParseError:null};let FG=function(){function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=MG.INITIAL,this.originalInsertionMode=MG.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},BG),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new EG.Tokenizer(this.options,this),this.activeFormattingElements=new wG.FormattingElementList(this.treeAdapter),this.fragmentContextID=r?(0,CG.getTagID)(this.treeAdapter.getTagName(r)):CG.TAG_ID.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new SG.OpenElementStack(this.document,this.treeAdapter,this)}return function(e,t,n){t&&_G(e.prototype,t),n&&_G(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getFragment",value:function(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}},{key:"_err",value:function(e,t,n){var r;if(!this.onParseError)return;const i=null!==(r=e.location)&&void 0!==r?r:LG,o={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(o)}},{key:"onItemPush",value:function(e,t,n){var r,i;null===(i=(r=this.treeAdapter).onItemPush)||void 0===i||i.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}},{key:"onItemPop",value:function(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}},{key:"_setContextModes",value:function(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===CG.NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}},{key:"_switchToTextParsing",value:function(e,t){this._insertElement(e,CG.NS.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=MG.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=MG.TEXT,this.originalInsertionMode=MG.IN_BODY,this.tokenizer.state=EG.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===CG.TAG_NAMES.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===CG.NS.HTML)switch(this.fragmentContextID){case CG.TAG_ID.TITLE:case CG.TAG_ID.TEXTAREA:this.tokenizer.state=EG.TokenizerMode.RCDATA;break;case CG.TAG_ID.STYLE:case CG.TAG_ID.XMP:case CG.TAG_ID.IFRAME:case CG.TAG_ID.NOEMBED:case CG.TAG_ID.NOFRAMES:case CG.TAG_ID.NOSCRIPT:this.tokenizer.state=EG.TokenizerMode.RAWTEXT;break;case CG.TAG_ID.SCRIPT:this.tokenizer.state=EG.TokenizerMode.SCRIPT_DATA;break;case CG.TAG_ID.PLAINTEXT:this.tokenizer.state=EG.TokenizerMode.PLAINTEXT}}},{key:"_setDocumentType",value:function(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}},{key:"_attachElementToTree",value:function(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&Object.assign(Object.assign({},t),{startTag:t});this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}},{key:"_appendElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}},{key:"_insertElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}},{key:"_insertFakeElement",value:function(e,t){const n=this.treeAdapter.createElement(e,CG.NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}},{key:"_insertTemplate",value:function(e){const t=this.treeAdapter.createElement(e.tagName,CG.NS.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}},{key:"_insertFakeRootElement",value:function(){const e=this.treeAdapter.createElement(CG.TAG_NAMES.HTML,CG.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,CG.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}},{key:"_insertCharacters",value:function(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),i=n?r.lastIndexOf(n):r.length,o=r[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}},{key:"_adoptNodes",value:function(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}},{key:"_setEndLocation",value:function(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i=t.type===PG.TokenType.END_TAG&&r===t.tagName?{endTag:Object.assign({},n),endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==CG.TAG_ID.SVG||this.treeAdapter.getTagName(t)!==CG.TAG_NAMES.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==CG.NS.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===CG.TAG_ID.MGLYPH||e.tagID===CG.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(n,t,CG.NS.HTML))}},{key:"_processToken",value:function(e){switch(e.type){case PG.TokenType.CHARACTER:this.onCharacter(e);break;case PG.TokenType.NULL_CHARACTER:this.onNullCharacter(e);break;case PG.TokenType.COMMENT:this.onComment(e);break;case PG.TokenType.DOCTYPE:this.onDoctype(e);break;case PG.TokenType.START_TAG:this._processStartTag(e);break;case PG.TokenType.END_TAG:this.onEndTag(e);break;case PG.TokenType.EOF:this.onEof(e);break;case PG.TokenType.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}},{key:"_isIntegrationPoint",value:function(e,t,n){const r=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return xG.isIntegrationPoint(e,r,i,n)}},{key:"_reconstructActiveFormattingElements",value:function(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===wG.EntryType.Marker||this.openElements.contains(e.element)));for(let n=t<0?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=MG.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(CG.TAG_ID.P),this.openElements.popUntilTagNamePopped(CG.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case CG.TAG_ID.TR:return void(this.insertionMode=MG.IN_ROW);case CG.TAG_ID.TBODY:case CG.TAG_ID.THEAD:case CG.TAG_ID.TFOOT:return void(this.insertionMode=MG.IN_TABLE_BODY);case CG.TAG_ID.CAPTION:return void(this.insertionMode=MG.IN_CAPTION);case CG.TAG_ID.COLGROUP:return void(this.insertionMode=MG.IN_COLUMN_GROUP);case CG.TAG_ID.TABLE:return void(this.insertionMode=MG.IN_TABLE);case CG.TAG_ID.BODY:return void(this.insertionMode=MG.IN_BODY);case CG.TAG_ID.FRAMESET:return void(this.insertionMode=MG.IN_FRAMESET);case CG.TAG_ID.SELECT:return void this._resetInsertionModeForSelect(e);case CG.TAG_ID.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case CG.TAG_ID.HTML:return void(this.insertionMode=this.headElement?MG.AFTER_HEAD:MG.BEFORE_HEAD);case CG.TAG_ID.TD:case CG.TAG_ID.TH:if(e>0)return void(this.insertionMode=MG.IN_CELL);break;case CG.TAG_ID.HEAD:if(e>0)return void(this.insertionMode=MG.IN_HEAD)}this.insertionMode=MG.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===CG.TAG_ID.TEMPLATE)break;if(e===CG.TAG_ID.TABLE)return void(this.insertionMode=MG.IN_SELECT_IN_TABLE)}this.insertionMode=MG.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(e){return jG.has(e)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case CG.TAG_ID.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===CG.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case CG.TAG_ID.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}},{key:"_isSpecialElement",value:function(e,t){const n=this.treeAdapter.getNamespaceURI(e);return CG.SPECIAL_ELEMENTS[n].has(t)}},{key:"onCharacter",value:function(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case MG.INITIAL:$G(this,e);break;case MG.BEFORE_HTML:KG(this,e);break;case MG.BEFORE_HEAD:QG(this,e);break;case MG.IN_HEAD:eH(this,e);break;case MG.IN_HEAD_NO_SCRIPT:tH(this,e);break;case MG.AFTER_HEAD:nH(this,e);break;case MG.IN_BODY:case MG.IN_CAPTION:case MG.IN_CELL:case MG.IN_TEMPLATE:oH(this,e);break;case MG.TEXT:case MG.IN_SELECT:case MG.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case MG.IN_TABLE:case MG.IN_TABLE_BODY:case MG.IN_ROW:dH(this,e);break;case MG.IN_TABLE_TEXT:bH(this,e);break;case MG.IN_COLUMN_GROUP:SH(this,e);break;case MG.AFTER_BODY:DH(this,e);break;case MG.AFTER_AFTER_BODY:RH(this,e)}}},{key:"onNullCharacter",value:function(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=IG.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case MG.INITIAL:$G(this,e);break;case MG.BEFORE_HTML:KG(this,e);break;case MG.BEFORE_HEAD:QG(this,e);break;case MG.IN_HEAD:eH(this,e);break;case MG.IN_HEAD_NO_SCRIPT:tH(this,e);break;case MG.AFTER_HEAD:nH(this,e);break;case MG.TEXT:this._insertCharacters(e);break;case MG.IN_TABLE:case MG.IN_TABLE_BODY:case MG.IN_ROW:dH(this,e);break;case MG.IN_COLUMN_GROUP:SH(this,e);break;case MG.AFTER_BODY:DH(this,e);break;case MG.AFTER_AFTER_BODY:RH(this,e)}}},{key:"onComment",value:function(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)WG(this,e);else switch(this.insertionMode){case MG.INITIAL:case MG.BEFORE_HTML:case MG.BEFORE_HEAD:case MG.IN_HEAD:case MG.IN_HEAD_NO_SCRIPT:case MG.AFTER_HEAD:case MG.IN_BODY:case MG.IN_TABLE:case MG.IN_CAPTION:case MG.IN_COLUMN_GROUP:case MG.IN_TABLE_BODY:case MG.IN_ROW:case MG.IN_CELL:case MG.IN_SELECT:case MG.IN_SELECT_IN_TABLE:case MG.IN_TEMPLATE:case MG.IN_FRAMESET:case MG.AFTER_FRAMESET:WG(this,e);break;case MG.IN_TABLE_TEXT:_H(this,e);break;case MG.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case MG.AFTER_AFTER_BODY:case MG.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}},{key:"onDoctype",value:function(e){switch(this.skipNextNewLine=!1,this.insertionMode){case MG.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?CG.DOCUMENT_MODE.QUIRKS:OG.getDocumentMode(t);OG.isConforming(t)||e._err(t,kG.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=MG.BEFORE_HTML}(this,e);break;case MG.BEFORE_HEAD:case MG.IN_HEAD:case MG.IN_HEAD_NO_SCRIPT:case MG.AFTER_HEAD:this._err(e,kG.ERR.misplacedDoctype);break;case MG.IN_TABLE_TEXT:_H(this,e)}}},{key:"onStartTag",value:function(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,kG.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(xG.causesExit(t))NH(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===CG.NS.MATHML?xG.adjustTokenMathMLAttrs(t):r===CG.NS.SVG&&(xG.adjustTokenSVGTagName(t),xG.adjustTokenSVGAttrs(t)),xG.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}},{key:"_startTagOutsideForeignContent",value:function(e){switch(this.insertionMode){case MG.INITIAL:$G(this,e);break;case MG.BEFORE_HTML:!function(e,t){t.tagID===CG.TAG_ID.HTML?(e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.BEFORE_HEAD):KG(e,t)}(this,e);break;case MG.BEFORE_HEAD:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.HEAD:e._insertElement(t,CG.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=MG.IN_HEAD;break;default:QG(e,t)}}(this,e);break;case MG.IN_HEAD:ZG(this,e);break;case MG.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.BASEFONT:case CG.TAG_ID.BGSOUND:case CG.TAG_ID.HEAD:case CG.TAG_ID.LINK:case CG.TAG_ID.META:case CG.TAG_ID.NOFRAMES:case CG.TAG_ID.STYLE:ZG(e,t);break;case CG.TAG_ID.NOSCRIPT:e._err(t,kG.ERR.nestedNoscriptInHead);break;default:tH(e,t)}}(this,e);break;case MG.AFTER_HEAD:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.BODY:e._insertElement(t,CG.NS.HTML),e.framesetOk=!1,e.insertionMode=MG.IN_BODY;break;case CG.TAG_ID.FRAMESET:e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_FRAMESET;break;case CG.TAG_ID.BASE:case CG.TAG_ID.BASEFONT:case CG.TAG_ID.BGSOUND:case CG.TAG_ID.LINK:case CG.TAG_ID.META:case CG.TAG_ID.NOFRAMES:case CG.TAG_ID.SCRIPT:case CG.TAG_ID.STYLE:case CG.TAG_ID.TEMPLATE:case CG.TAG_ID.TITLE:e._err(t,kG.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,CG.TAG_ID.HEAD),ZG(e,t),e.openElements.remove(e.headElement);break;case CG.TAG_ID.HEAD:e._err(t,kG.ERR.misplacedStartTagForHeadElement);break;default:nH(e,t)}}(this,e);break;case MG.IN_BODY:uH(this,e);break;case MG.IN_TABLE:mH(this,e);break;case MG.IN_TABLE_TEXT:_H(this,e);break;case MG.IN_CAPTION:!function(e,t){const n=t.tagID;TH.has(n)?e.openElements.hasInTableScope(CG.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(CG.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=MG.IN_TABLE,mH(e,t)):uH(e,t)}(this,e);break;case MG.IN_COLUMN_GROUP:EH(this,e);break;case MG.IN_TABLE_BODY:wH(this,e);break;case MG.IN_ROW:OH(this,e);break;case MG.IN_CELL:!function(e,t){const n=t.tagID;TH.has(n)?(e.openElements.hasInTableScope(CG.TAG_ID.TD)||e.openElements.hasInTableScope(CG.TAG_ID.TH))&&(e._closeTableCell(),OH(e,t)):uH(e,t)}(this,e);break;case MG.IN_SELECT:kH(this,e);break;case MG.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===CG.TAG_ID.CAPTION||n===CG.TAG_ID.TABLE||n===CG.TAG_ID.TBODY||n===CG.TAG_ID.TFOOT||n===CG.TAG_ID.THEAD||n===CG.TAG_ID.TR||n===CG.TAG_ID.TD||n===CG.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(CG.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):kH(e,t)}(this,e);break;case MG.IN_TEMPLATE:!function(e,t){switch(t.tagID){case CG.TAG_ID.BASE:case CG.TAG_ID.BASEFONT:case CG.TAG_ID.BGSOUND:case CG.TAG_ID.LINK:case CG.TAG_ID.META:case CG.TAG_ID.NOFRAMES:case CG.TAG_ID.SCRIPT:case CG.TAG_ID.STYLE:case CG.TAG_ID.TEMPLATE:case CG.TAG_ID.TITLE:ZG(e,t);break;case CG.TAG_ID.CAPTION:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:e.tmplInsertionModeStack[0]=MG.IN_TABLE,e.insertionMode=MG.IN_TABLE,mH(e,t);break;case CG.TAG_ID.COL:e.tmplInsertionModeStack[0]=MG.IN_COLUMN_GROUP,e.insertionMode=MG.IN_COLUMN_GROUP,EH(e,t);break;case CG.TAG_ID.TR:e.tmplInsertionModeStack[0]=MG.IN_TABLE_BODY,e.insertionMode=MG.IN_TABLE_BODY,wH(e,t);break;case CG.TAG_ID.TD:case CG.TAG_ID.TH:e.tmplInsertionModeStack[0]=MG.IN_ROW,e.insertionMode=MG.IN_ROW,OH(e,t);break;default:e.tmplInsertionModeStack[0]=MG.IN_BODY,e.insertionMode=MG.IN_BODY,uH(e,t)}}(this,e);break;case MG.AFTER_BODY:!function(e,t){t.tagID===CG.TAG_ID.HTML?uH(e,t):DH(e,t)}(this,e);break;case MG.IN_FRAMESET:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.FRAMESET:e._insertElement(t,CG.NS.HTML);break;case CG.TAG_ID.FRAME:e._appendElement(t,CG.NS.HTML),t.ackSelfClosing=!0;break;case CG.TAG_ID.NOFRAMES:ZG(e,t)}}(this,e);break;case MG.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.NOFRAMES:ZG(e,t)}}(this,e);break;case MG.AFTER_AFTER_BODY:!function(e,t){t.tagID===CG.TAG_ID.HTML?uH(e,t):RH(e,t)}(this,e);break;case MG.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.NOFRAMES:ZG(e,t)}}(this,e)}}},{key:"onEndTag",value:function(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===CG.TAG_ID.P||t.tagID===CG.TAG_ID.BR)return NH(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===CG.NS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}},{key:"_endTagOutsideForeignContent",value:function(e){switch(this.insertionMode){case MG.INITIAL:$G(this,e);break;case MG.BEFORE_HTML:!function(e,t){const n=t.tagID;(n===CG.TAG_ID.HTML||n===CG.TAG_ID.HEAD||n===CG.TAG_ID.BODY||n===CG.TAG_ID.BR)&&KG(e,t)}(this,e);break;case MG.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===CG.TAG_ID.HEAD||n===CG.TAG_ID.BODY||n===CG.TAG_ID.HTML||n===CG.TAG_ID.BR?QG(e,t):e._err(t,kG.ERR.endTagWithoutMatchingOpenElement)}(this,e);break;case MG.IN_HEAD:!function(e,t){switch(t.tagID){case CG.TAG_ID.HEAD:e.openElements.pop(),e.insertionMode=MG.AFTER_HEAD;break;case CG.TAG_ID.BODY:case CG.TAG_ID.BR:case CG.TAG_ID.HTML:eH(e,t);break;case CG.TAG_ID.TEMPLATE:JG(e,t);break;default:e._err(t,kG.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case MG.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case CG.TAG_ID.NOSCRIPT:e.openElements.pop(),e.insertionMode=MG.IN_HEAD;break;case CG.TAG_ID.BR:tH(e,t);break;default:e._err(t,kG.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case MG.AFTER_HEAD:!function(e,t){switch(t.tagID){case CG.TAG_ID.BODY:case CG.TAG_ID.HTML:case CG.TAG_ID.BR:nH(e,t);break;case CG.TAG_ID.TEMPLATE:JG(e,t);break;default:e._err(t,kG.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case MG.IN_BODY:pH(this,e);break;case MG.TEXT:!function(e,t){var n;t.tagID===CG.TAG_ID.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case MG.IN_TABLE:gH(this,e);break;case MG.IN_TABLE_TEXT:_H(this,e);break;case MG.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case CG.TAG_ID.CAPTION:case CG.TAG_ID.TABLE:e.openElements.hasInTableScope(CG.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(CG.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=MG.IN_TABLE,n===CG.TAG_ID.TABLE&&gH(e,t));break;case CG.TAG_ID.BODY:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.HTML:case CG.TAG_ID.TBODY:case CG.TAG_ID.TD:case CG.TAG_ID.TFOOT:case CG.TAG_ID.TH:case CG.TAG_ID.THEAD:case CG.TAG_ID.TR:break;default:pH(e,t)}}(this,e);break;case MG.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case CG.TAG_ID.COLGROUP:e.openElements.currentTagId===CG.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=MG.IN_TABLE);break;case CG.TAG_ID.TEMPLATE:JG(e,t);break;case CG.TAG_ID.COL:break;default:SH(e,t)}}(this,e);break;case MG.IN_TABLE_BODY:AH(this,e);break;case MG.IN_ROW:xH(this,e);break;case MG.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case CG.TAG_ID.TD:case CG.TAG_ID.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=MG.IN_ROW);break;case CG.TAG_ID.TABLE:case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:case CG.TAG_ID.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),xH(e,t));break;case CG.TAG_ID.BODY:case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.HTML:break;default:pH(e,t)}}(this,e);break;case MG.IN_SELECT:IH(this,e);break;case MG.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===CG.TAG_ID.CAPTION||n===CG.TAG_ID.TABLE||n===CG.TAG_ID.TBODY||n===CG.TAG_ID.TFOOT||n===CG.TAG_ID.THEAD||n===CG.TAG_ID.TR||n===CG.TAG_ID.TD||n===CG.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(CG.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):IH(e,t)}(this,e);break;case MG.IN_TEMPLATE:!function(e,t){t.tagID===CG.TAG_ID.TEMPLATE&&JG(e,t)}(this,e);break;case MG.AFTER_BODY:PH(this,e);break;case MG.IN_FRAMESET:!function(e,t){t.tagID===CG.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==CG.TAG_ID.FRAMESET&&(e.insertionMode=MG.AFTER_FRAMESET))}(this,e);break;case MG.AFTER_FRAMESET:!function(e,t){t.tagID===CG.TAG_ID.HTML&&(e.insertionMode=MG.AFTER_AFTER_FRAMESET)}(this,e);break;case MG.AFTER_AFTER_BODY:RH(this,e)}}},{key:"onEof",value:function(e){switch(this.insertionMode){case MG.INITIAL:$G(this,e);break;case MG.BEFORE_HTML:KG(this,e);break;case MG.BEFORE_HEAD:QG(this,e);break;case MG.IN_HEAD:eH(this,e);break;case MG.IN_HEAD_NO_SCRIPT:tH(this,e);break;case MG.AFTER_HEAD:nH(this,e);break;case MG.IN_BODY:case MG.IN_TABLE:case MG.IN_CAPTION:case MG.IN_COLUMN_GROUP:case MG.IN_TABLE_BODY:case MG.IN_ROW:case MG.IN_CELL:case MG.IN_SELECT:case MG.IN_SELECT_IN_TABLE:fH(this,e);break;case MG.TEXT:!function(e,t){e._err(t,kG.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case MG.IN_TABLE_TEXT:_H(this,e);break;case MG.IN_TEMPLATE:CH(this,e);break;case MG.AFTER_BODY:case MG.IN_FRAMESET:case MG.AFTER_FRAMESET:case MG.AFTER_AFTER_BODY:case MG.AFTER_AFTER_FRAMESET:qG(this,e)}}},{key:"onWhitespaceCharacter",value:function(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===IG.CODE_POINTS.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case MG.IN_HEAD:case MG.IN_HEAD_NO_SCRIPT:case MG.AFTER_HEAD:case MG.TEXT:case MG.IN_COLUMN_GROUP:case MG.IN_SELECT:case MG.IN_SELECT_IN_TABLE:case MG.IN_FRAMESET:case MG.AFTER_FRAMESET:this._insertCharacters(e);break;case MG.IN_BODY:case MG.IN_CAPTION:case MG.IN_CELL:case MG.IN_TEMPLATE:case MG.AFTER_BODY:case MG.AFTER_AFTER_BODY:case MG.AFTER_AFTER_FRAMESET:iH(this,e);break;case MG.IN_TABLE:case MG.IN_TABLE_BODY:case MG.IN_ROW:dH(this,e);break;case MG.IN_TABLE_TEXT:vH(this,e)}}}],[{key:"parse",value:function(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}},{key:"getFragmentParser",value:function(e,t){const n=Object.assign(Object.assign({},BG),t);e??(e=n.treeAdapter.createElement(CG.TAG_NAMES.TEMPLATE,CG.NS.HTML,[]));const r=n.treeAdapter.createElement("documentmock",CG.NS.HTML,[]),i=new this(n,r,e);return i.fragmentContextID===CG.TAG_ID.TEMPLATE&&i.tmplInsertionModeStack.unshift(MG.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}}]),e}();function GG(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):hH(e,t),n}function HG(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function UG(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),s=n&&o>=NG;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=zG(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function zG(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function VG(e,t,n){const r=e.treeAdapter.getTagName(t),i=(0,CG.getTagID)(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const r=e.treeAdapter.getNamespaceURI(t);i===CG.TAG_ID.TEMPLATE&&r===CG.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function XG(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function YG(e,t){for(let n=0;n<RG;n++){const n=GG(e,t);if(!n)break;const r=HG(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;const i=UG(e,r,n.element),o=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),o&&VG(e,o,i),XG(e,r,n)}}function WG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function qG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function $G(e,t){e._err(t,kG.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,CG.DOCUMENT_MODE.QUIRKS),e.insertionMode=MG.BEFORE_HTML,e._processToken(t)}function KG(e,t){e._insertFakeRootElement(),e.insertionMode=MG.BEFORE_HEAD,e._processToken(t)}function QG(e,t){e._insertFakeElement(CG.TAG_NAMES.HEAD,CG.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=MG.IN_HEAD,e._processToken(t)}function ZG(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.BASE:case CG.TAG_ID.BASEFONT:case CG.TAG_ID.BGSOUND:case CG.TAG_ID.LINK:case CG.TAG_ID.META:e._appendElement(t,CG.NS.HTML),t.ackSelfClosing=!0;break;case CG.TAG_ID.TITLE:e._switchToTextParsing(t,EG.TokenizerMode.RCDATA);break;case CG.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,EG.TokenizerMode.RAWTEXT):(e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_HEAD_NO_SCRIPT);break;case CG.TAG_ID.NOFRAMES:case CG.TAG_ID.STYLE:e._switchToTextParsing(t,EG.TokenizerMode.RAWTEXT);break;case CG.TAG_ID.SCRIPT:e._switchToTextParsing(t,EG.TokenizerMode.SCRIPT_DATA);break;case CG.TAG_ID.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=MG.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(MG.IN_TEMPLATE);break;case CG.TAG_ID.HEAD:e._err(t,kG.ERR.misplacedStartTagForHeadElement);break;default:eH(e,t)}}function JG(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==CG.TAG_ID.TEMPLATE&&e._err(t,kG.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(CG.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,kG.ERR.endTagWithoutMatchingOpenElement)}function eH(e,t){e.openElements.pop(),e.insertionMode=MG.AFTER_HEAD,e._processToken(t)}function tH(e,t){const n=t.type===PG.TokenType.EOF?kG.ERR.openElementsLeftAfterEof:kG.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=MG.IN_HEAD,e._processToken(t)}function nH(e,t){e._insertFakeElement(CG.TAG_NAMES.BODY,CG.TAG_ID.BODY),e.insertionMode=MG.IN_BODY,rH(e,t)}function rH(e,t){switch(t.type){case PG.TokenType.CHARACTER:oH(e,t);break;case PG.TokenType.WHITESPACE_CHARACTER:iH(e,t);break;case PG.TokenType.COMMENT:WG(e,t);break;case PG.TokenType.START_TAG:uH(e,t);break;case PG.TokenType.END_TAG:pH(e,t);break;case PG.TokenType.EOF:fH(e,t)}}function iH(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function oH(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function aH(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,CG.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function sH(e){const t=(0,PG.getTokenAttr)(e,CG.ATTRS.TYPE);return null!=t&&t.toLowerCase()===DG}function lH(e,t){e._switchToTextParsing(t,EG.TokenizerMode.RAWTEXT)}function cH(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML)}function uH(e,t){switch(t.tagID){case CG.TAG_ID.I:case CG.TAG_ID.S:case CG.TAG_ID.B:case CG.TAG_ID.U:case CG.TAG_ID.EM:case CG.TAG_ID.TT:case CG.TAG_ID.BIG:case CG.TAG_ID.CODE:case CG.TAG_ID.FONT:case CG.TAG_ID.SMALL:case CG.TAG_ID.STRIKE:case CG.TAG_ID.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case CG.TAG_ID.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(CG.TAG_NAMES.A);n&&(YG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case CG.TAG_ID.H1:case CG.TAG_ID.H2:case CG.TAG_ID.H3:case CG.TAG_ID.H4:case CG.TAG_ID.H5:case CG.TAG_ID.H6:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),(0,CG.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.P:case CG.TAG_ID.DL:case CG.TAG_ID.OL:case CG.TAG_ID.UL:case CG.TAG_ID.DIV:case CG.TAG_ID.DIR:case CG.TAG_ID.NAV:case CG.TAG_ID.MAIN:case CG.TAG_ID.MENU:case CG.TAG_ID.ASIDE:case CG.TAG_ID.CENTER:case CG.TAG_ID.FIGURE:case CG.TAG_ID.FOOTER:case CG.TAG_ID.HEADER:case CG.TAG_ID.HGROUP:case CG.TAG_ID.DIALOG:case CG.TAG_ID.DETAILS:case CG.TAG_ID.ADDRESS:case CG.TAG_ID.ARTICLE:case CG.TAG_ID.SECTION:case CG.TAG_ID.SUMMARY:case CG.TAG_ID.FIELDSET:case CG.TAG_ID.BLOCKQUOTE:case CG.TAG_ID.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.LI:case CG.TAG_ID.DD:case CG.TAG_ID.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.tagIDs[r];if(n===CG.TAG_ID.LI&&t===CG.TAG_ID.LI||(n===CG.TAG_ID.DD||n===CG.TAG_ID.DT)&&(t===CG.TAG_ID.DD||t===CG.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==CG.TAG_ID.ADDRESS&&t!==CG.TAG_ID.DIV&&t!==CG.TAG_ID.P&&e._isSpecialElement(e.openElements.items[r],t))break}e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.BR:case CG.TAG_ID.IMG:case CG.TAG_ID.WBR:case CG.TAG_ID.AREA:case CG.TAG_ID.EMBED:case CG.TAG_ID.KEYGEN:aH(e,t);break;case CG.TAG_ID.HR:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._appendElement(t,CG.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.RB:case CG.TAG_ID.RTC:!function(e,t){e.openElements.hasInScope(CG.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.RT:case CG.TAG_ID.RP:!function(e,t){e.openElements.hasInScope(CG.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(CG.TAG_ID.RTC),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.PRE:case CG.TAG_ID.LISTING:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case CG.TAG_ID.XMP:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,EG.TokenizerMode.RAWTEXT)}(e,t);break;case CG.TAG_ID.SVG:!function(e,t){e._reconstructActiveFormattingElements(),xG.adjustTokenSVGAttrs(t),xG.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,CG.NS.SVG):e._insertElement(t,CG.NS.SVG),t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case CG.TAG_ID.BASE:case CG.TAG_ID.LINK:case CG.TAG_ID.META:case CG.TAG_ID.STYLE:case CG.TAG_ID.TITLE:case CG.TAG_ID.SCRIPT:case CG.TAG_ID.BGSOUND:case CG.TAG_ID.BASEFONT:case CG.TAG_ID.TEMPLATE:ZG(e,t);break;case CG.TAG_ID.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case CG.TAG_ID.FORM:!function(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case CG.TAG_ID.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(CG.TAG_ID.NOBR)&&(YG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,CG.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case CG.TAG_ID.MATH:!function(e,t){e._reconstructActiveFormattingElements(),xG.adjustTokenMathMLAttrs(t),xG.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,CG.NS.MATHML):e._insertElement(t,CG.NS.MATHML),t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==CG.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML),e.framesetOk=!1,e.insertionMode=MG.IN_TABLE}(e,t);break;case CG.TAG_ID.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,CG.NS.HTML),sH(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.PARAM:case CG.TAG_ID.TRACK:case CG.TAG_ID.SOURCE:!function(e,t){e._appendElement(t,CG.NS.HTML),t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.IMAGE:!function(e,t){t.tagName=CG.TAG_NAMES.IMG,t.tagID=CG.TAG_ID.IMG,aH(e,t)}(e,t);break;case CG.TAG_ID.BUTTON:!function(e,t){e.openElements.hasInScope(CG.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(CG.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML),e.framesetOk=!1}(e,t);break;case CG.TAG_ID.APPLET:case CG.TAG_ID.OBJECT:case CG.TAG_ID.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case CG.TAG_ID.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,EG.TokenizerMode.RAWTEXT)}(e,t);break;case CG.TAG_ID.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===MG.IN_TABLE||e.insertionMode===MG.IN_CAPTION||e.insertionMode===MG.IN_TABLE_BODY||e.insertionMode===MG.IN_ROW||e.insertionMode===MG.IN_CELL?MG.IN_SELECT_IN_TABLE:MG.IN_SELECT}(e,t);break;case CG.TAG_ID.OPTION:case CG.TAG_ID.OPTGROUP:!function(e,t){e.openElements.currentTagId===CG.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,CG.NS.HTML)}(e,t);break;case CG.TAG_ID.NOEMBED:lH(e,t);break;case CG.TAG_ID.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_FRAMESET)}(e,t);break;case CG.TAG_ID.TEXTAREA:!function(e,t){e._insertElement(t,CG.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=EG.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=MG.TEXT}(e,t);break;case CG.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?lH(e,t):cH(e,t);break;case CG.TAG_ID.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(CG.TAG_ID.P)&&e._closePElement(),e._insertElement(t,CG.NS.HTML),e.tokenizer.state=EG.TokenizerMode.PLAINTEXT}(e,t);break;case CG.TAG_ID.COL:case CG.TAG_ID.TH:case CG.TAG_ID.TD:case CG.TAG_ID.TR:case CG.TAG_ID.HEAD:case CG.TAG_ID.FRAME:case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:case CG.TAG_ID.CAPTION:case CG.TAG_ID.COLGROUP:break;default:cH(e,t)}}function hH(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const t=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==CG.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(t)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(t,o))break}}function pH(e,t){switch(t.tagID){case CG.TAG_ID.A:case CG.TAG_ID.B:case CG.TAG_ID.I:case CG.TAG_ID.S:case CG.TAG_ID.U:case CG.TAG_ID.EM:case CG.TAG_ID.TT:case CG.TAG_ID.BIG:case CG.TAG_ID.CODE:case CG.TAG_ID.FONT:case CG.TAG_ID.NOBR:case CG.TAG_ID.SMALL:case CG.TAG_ID.STRIKE:case CG.TAG_ID.STRONG:YG(e,t);break;case CG.TAG_ID.P:!function(e){e.openElements.hasInButtonScope(CG.TAG_ID.P)||e._insertFakeElement(CG.TAG_NAMES.P,CG.TAG_ID.P),e._closePElement()}(e);break;case CG.TAG_ID.DL:case CG.TAG_ID.UL:case CG.TAG_ID.OL:case CG.TAG_ID.DIR:case CG.TAG_ID.DIV:case CG.TAG_ID.NAV:case CG.TAG_ID.PRE:case CG.TAG_ID.MAIN:case CG.TAG_ID.MENU:case CG.TAG_ID.ASIDE:case CG.TAG_ID.BUTTON:case CG.TAG_ID.CENTER:case CG.TAG_ID.FIGURE:case CG.TAG_ID.FOOTER:case CG.TAG_ID.HEADER:case CG.TAG_ID.HGROUP:case CG.TAG_ID.DIALOG:case CG.TAG_ID.ADDRESS:case CG.TAG_ID.ARTICLE:case CG.TAG_ID.DETAILS:case CG.TAG_ID.SECTION:case CG.TAG_ID.SUMMARY:case CG.TAG_ID.LISTING:case CG.TAG_ID.FIELDSET:case CG.TAG_ID.BLOCKQUOTE:case CG.TAG_ID.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case CG.TAG_ID.LI:!function(e){e.openElements.hasInListItemScope(CG.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(CG.TAG_ID.LI),e.openElements.popUntilTagNamePopped(CG.TAG_ID.LI))}(e);break;case CG.TAG_ID.DD:case CG.TAG_ID.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case CG.TAG_ID.H1:case CG.TAG_ID.H2:case CG.TAG_ID.H3:case CG.TAG_ID.H4:case CG.TAG_ID.H5:case CG.TAG_ID.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case CG.TAG_ID.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(CG.TAG_NAMES.BR,CG.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case CG.TAG_ID.BODY:!function(e,t){if(e.openElements.hasInScope(CG.TAG_ID.BODY)&&(e.insertionMode=MG.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case CG.TAG_ID.HTML:!function(e,t){e.openElements.hasInScope(CG.TAG_ID.BODY)&&(e.insertionMode=MG.AFTER_BODY,PH(e,t))}(e,t);break;case CG.TAG_ID.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(CG.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(CG.TAG_ID.FORM):n&&e.openElements.remove(n))}(e);break;case CG.TAG_ID.APPLET:case CG.TAG_ID.OBJECT:case CG.TAG_ID.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case CG.TAG_ID.TEMPLATE:JG(e,t);break;default:hH(e,t)}}function fH(e,t){e.tmplInsertionModeStack.length>0?CH(e,t):qG(e,t)}function dH(e,t){if(jG.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=MG.IN_TABLE_TEXT,t.type){case PG.TokenType.CHARACTER:bH(e,t);break;case PG.TokenType.WHITESPACE_CHARACTER:vH(e,t)}else yH(e,t)}function mH(e,t){switch(t.tagID){case CG.TAG_ID.TD:case CG.TAG_ID.TH:case CG.TAG_ID.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(CG.TAG_NAMES.TBODY,CG.TAG_ID.TBODY),e.insertionMode=MG.IN_TABLE_BODY,wH(e,t)}(e,t);break;case CG.TAG_ID.STYLE:case CG.TAG_ID.SCRIPT:case CG.TAG_ID.TEMPLATE:ZG(e,t);break;case CG.TAG_ID.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(CG.TAG_NAMES.COLGROUP,CG.TAG_ID.COLGROUP),e.insertionMode=MG.IN_COLUMN_GROUP,EH(e,t)}(e,t);break;case CG.TAG_ID.FORM:!function(e,t){!e.formElement&&0===e.openElements.tmplCount&&(e._insertElement(t,CG.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case CG.TAG_ID.TABLE:!function(e,t){e.openElements.hasInTableScope(CG.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(CG.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_TABLE_BODY}(e,t);break;case CG.TAG_ID.INPUT:!function(e,t){sH(t)?e._appendElement(t,CG.NS.HTML):yH(e,t),t.ackSelfClosing=!0}(e,t);break;case CG.TAG_ID.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_CAPTION}(e,t);break;case CG.TAG_ID.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_COLUMN_GROUP}(e,t);break;default:yH(e,t)}}function gH(e,t){switch(t.tagID){case CG.TAG_ID.TABLE:e.openElements.hasInTableScope(CG.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(CG.TAG_ID.TABLE),e._resetInsertionMode());break;case CG.TAG_ID.TEMPLATE:JG(e,t);break;case CG.TAG_ID.BODY:case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.HTML:case CG.TAG_ID.TBODY:case CG.TAG_ID.TD:case CG.TAG_ID.TFOOT:case CG.TAG_ID.TH:case CG.TAG_ID.THEAD:case CG.TAG_ID.TR:break;default:yH(e,t)}}function yH(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,rH(e,t),e.fosterParentingEnabled=n}function vH(e,t){e.pendingCharacterTokens.push(t)}function bH(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function _H(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)yH(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}gF.Parser=FG;const TH=new Set([CG.TAG_ID.CAPTION,CG.TAG_ID.COL,CG.TAG_ID.COLGROUP,CG.TAG_ID.TBODY,CG.TAG_ID.TD,CG.TAG_ID.TFOOT,CG.TAG_ID.TH,CG.TAG_ID.THEAD,CG.TAG_ID.TR]);function EH(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.COL:e._appendElement(t,CG.NS.HTML),t.ackSelfClosing=!0;break;case CG.TAG_ID.TEMPLATE:ZG(e,t);break;default:SH(e,t)}}function SH(e,t){e.openElements.currentTagId===CG.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=MG.IN_TABLE,e._processToken(t))}function wH(e,t){switch(t.tagID){case CG.TAG_ID.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_ROW;break;case CG.TAG_ID.TH:case CG.TAG_ID.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(CG.TAG_NAMES.TR,CG.TAG_ID.TR),e.insertionMode=MG.IN_ROW,OH(e,t);break;case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE,mH(e,t));break;default:mH(e,t)}}function AH(e,t){const n=t.tagID;switch(t.tagID){case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE);break;case CG.TAG_ID.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE,gH(e,t));break;case CG.TAG_ID.BODY:case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.HTML:case CG.TAG_ID.TD:case CG.TAG_ID.TH:case CG.TAG_ID.TR:break;default:gH(e,t)}}function OH(e,t){switch(t.tagID){case CG.TAG_ID.TH:case CG.TAG_ID.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,CG.NS.HTML),e.insertionMode=MG.IN_CELL,e.activeFormattingElements.insertMarker();break;case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:case CG.TAG_ID.TR:e.openElements.hasInTableScope(CG.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE_BODY,wH(e,t));break;default:mH(e,t)}}function xH(e,t){switch(t.tagID){case CG.TAG_ID.TR:e.openElements.hasInTableScope(CG.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE_BODY);break;case CG.TAG_ID.TABLE:e.openElements.hasInTableScope(CG.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE_BODY,AH(e,t));break;case CG.TAG_ID.TBODY:case CG.TAG_ID.TFOOT:case CG.TAG_ID.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(CG.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=MG.IN_TABLE_BODY,AH(e,t));break;case CG.TAG_ID.BODY:case CG.TAG_ID.CAPTION:case CG.TAG_ID.COL:case CG.TAG_ID.COLGROUP:case CG.TAG_ID.HTML:case CG.TAG_ID.TD:case CG.TAG_ID.TH:break;default:gH(e,t)}}function kH(e,t){switch(t.tagID){case CG.TAG_ID.HTML:uH(e,t);break;case CG.TAG_ID.OPTION:e.openElements.currentTagId===CG.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,CG.NS.HTML);break;case CG.TAG_ID.OPTGROUP:e.openElements.currentTagId===CG.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===CG.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,CG.NS.HTML);break;case CG.TAG_ID.INPUT:case CG.TAG_ID.KEYGEN:case CG.TAG_ID.TEXTAREA:case CG.TAG_ID.SELECT:e.openElements.hasInSelectScope(CG.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(CG.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==CG.TAG_ID.SELECT&&e._processStartTag(t));break;case CG.TAG_ID.SCRIPT:case CG.TAG_ID.TEMPLATE:ZG(e,t)}}function IH(e,t){switch(t.tagID){case CG.TAG_ID.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===CG.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===CG.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===CG.TAG_ID.OPTGROUP&&e.openElements.pop();break;case CG.TAG_ID.OPTION:e.openElements.currentTagId===CG.TAG_ID.OPTION&&e.openElements.pop();break;case CG.TAG_ID.SELECT:e.openElements.hasInSelectScope(CG.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(CG.TAG_ID.SELECT),e._resetInsertionMode());break;case CG.TAG_ID.TEMPLATE:JG(e,t)}}function CH(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(CG.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):qG(e,t)}function PH(e,t){var n;if(t.tagID===CG.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=MG.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===CG.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n||!n.endTag)&&e._setEndLocation(r,t)}}else DH(e,t)}function DH(e,t){e.insertionMode=MG.IN_BODY,rH(e,t)}function RH(e,t){e.insertionMode=MG.IN_BODY,rH(e,t)}function NH(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==CG.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}var MH={};Object.defineProperty(MH,"__esModule",{value:!0}),MH.serializeOuter=MH.serialize=void 0;const LH=xF,jH=pM,BH=cG,FH=new Set([LH.TAG_NAMES.AREA,LH.TAG_NAMES.BASE,LH.TAG_NAMES.BASEFONT,LH.TAG_NAMES.BGSOUND,LH.TAG_NAMES.BR,LH.TAG_NAMES.COL,LH.TAG_NAMES.EMBED,LH.TAG_NAMES.FRAME,LH.TAG_NAMES.HR,LH.TAG_NAMES.IMG,LH.TAG_NAMES.INPUT,LH.TAG_NAMES.KEYGEN,LH.TAG_NAMES.LINK,LH.TAG_NAMES.META,LH.TAG_NAMES.PARAM,LH.TAG_NAMES.SOURCE,LH.TAG_NAMES.TRACK,LH.TAG_NAMES.WBR]);function GH(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===LH.NS.HTML&&FH.has(t.treeAdapter.getTagName(e))}const HH={treeAdapter:BH.defaultTreeAdapter,scriptingEnabled:!0};function UH(e,t){let n="";const r=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===LH.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===LH.NS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(r);if(i)for(const o of i)n+=zH(o,t);return n}function zH(e,t){return t.treeAdapter.isElementNode(e)?function(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${function(e,t){let{treeAdapter:n}=t,r="";for(const i of n.getAttrList(e)){if(r+=" ",i.namespace)switch(i.namespace){case LH.NS.XML:r+=`xml:${i.name}`;break;case LH.NS.XMLNS:"xmlns"!==i.name&&(r+="xmlns:"),r+=i.name;break;case LH.NS.XLINK:r+=`xlink:${i.name}`;break;default:r+=`${i.prefix}:${i.name}`}else r+=i.name;r+=`="${(0,jH.escapeAttribute)(i.value)}"`}return r}(e,t)}>${GH(e,t)?"":`${UH(e,t)}</${n}>`}`}(e,t):t.treeAdapter.isTextNode(e)?function(e,t){const{treeAdapter:n}=t,r=n.getTextNodeContent(e),i=n.getParentNode(e),o=i&&n.isElementNode(i)&&n.getTagName(i);return o&&n.getNamespaceURI(i)===LH.NS.HTML&&(0,LH.hasUnescapedText)(o,t.scriptingEnabled)?r:(0,jH.escapeText)(r)}(e,t):t.treeAdapter.isCommentNode(e)?function(e,t){let{treeAdapter:n}=t;return`\x3c!--${n.getCommentNodeContent(e)}--\x3e`}(e,t):t.treeAdapter.isDocumentTypeNode(e)?function(e,t){let{treeAdapter:n}=t;return`<!DOCTYPE ${n.getDocumentTypeNodeName(e)}>`}(e,t):""}MH.serialize=function(e,t){const n=Object.assign(Object.assign({},HH),t);return GH(e,n)?"":UH(e,n)},MH.serializeOuter=function(e,t){return zH(e,Object.assign(Object.assign({},HH),t))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=gF;var n=cG;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var r=gF;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=MH;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return i.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return i.serializeOuter}});var o=_F;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=bG,e.html=xF,e.Token=OF;var a=yF;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}}),e.parse=function(e,n){return t.Parser.parse(e,n)},e.parseFragment=function(e,n,r){"string"==typeof e&&(r=n,n=e,e=null);const i=t.Parser.getFragmentParser(e,r);return i.tokenizer.write(n,!0),i.getFragment()}}(mF);var VH={},XH={},YH={},WH={},qH={},$H={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);var n;e.REPLACEMENT_CHARACTER="\ufffd",(n=e.CODE_POINTS||(e.CODE_POINTS={}))[n.EOF=-1]="EOF",n[n.NULL=0]="NULL",n[n.TABULATION=9]="TABULATION",n[n.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",n[n.LINE_FEED=10]="LINE_FEED",n[n.FORM_FEED=12]="FORM_FEED",n[n.SPACE=32]="SPACE",n[n.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",n[n.QUOTATION_MARK=34]="QUOTATION_MARK",n[n.NUMBER_SIGN=35]="NUMBER_SIGN",n[n.AMPERSAND=38]="AMPERSAND",n[n.APOSTROPHE=39]="APOSTROPHE",n[n.HYPHEN_MINUS=45]="HYPHEN_MINUS",n[n.SOLIDUS=47]="SOLIDUS",n[n.DIGIT_0=48]="DIGIT_0",n[n.DIGIT_9=57]="DIGIT_9",n[n.SEMICOLON=59]="SEMICOLON",n[n.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",n[n.EQUALS_SIGN=61]="EQUALS_SIGN",n[n.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",n[n.QUESTION_MARK=63]="QUESTION_MARK",n[n.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",n[n.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",n[n.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",n[n.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",n[n.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",n[n.GRAVE_ACCENT=96]="GRAVE_ACCENT",n[n.LATIN_SMALL_A=97]="LATIN_SMALL_A",n[n.LATIN_SMALL_F=102]="LATIN_SMALL_F",n[n.LATIN_SMALL_X=120]="LATIN_SMALL_X",n[n.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",n[n.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER",e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"},e.isSurrogate=function(e){return e>=55296&&e<=57343},e.isSurrogatePair=function(e){return e>=56320&&e<=57343},e.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},e.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},e.isUndefinedCodePoint=function(e){return e>=64976&&e<=65007||t.has(e)}}($H);var KH={};function QH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ZH(r.key),r)}}function ZH(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,(t=e.ERR||(e.ERR={})).controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(KH),Object.defineProperty(qH,"__esModule",{value:!0}),qH.Preprocessor=void 0;const JH=$H,eU=KH;let tU=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return function(e,t,n){t&&QH(e.prototype,t),n&&QH(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(e){const{line:t,col:n,offset:r}=this;return{code:e,startLine:t,endLine:t,startCol:n,endCol:n,startOffset:r,endOffset:r}}},{key:"_err",value:function(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if((0,JH.isSurrogatePair)(t))return this.pos++,this._addGap(),(0,JH.getSurrogatePairCodePoint)(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,JH.CODE_POINTS.EOF;return this._err(eU.ERR.surrogateInInputStream),e}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}},{key:"insertHtmlAtCurrentPos",value:function(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++)if((32|this.html.charCodeAt(this.pos+n))!==e.charCodeAt(n))return!1;return!0}},{key:"peek",value:function(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,JH.CODE_POINTS.EOF;const n=this.html.charCodeAt(t);return n===JH.CODE_POINTS.CARRIAGE_RETURN?JH.CODE_POINTS.LINE_FEED:n}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,JH.CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===JH.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,JH.CODE_POINTS.LINE_FEED):e===JH.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,JH.isSurrogate)(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===JH.CODE_POINTS.LINE_FEED||e===JH.CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}},{key:"_checkForProblematicCharacters",value:function(e){(0,JH.isControlCodePoint)(e)?this._err(eU.ERR.controlCharacterInInputStream):(0,JH.isUndefinedCodePoint)(e)&&this._err(eU.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();qH.Preprocessor=tU;var nU={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,(t=e.TokenType||(e.TokenType={}))[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION",e.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}}(nU);var rU={};function iU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oU(r.key),r)}}function oU(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){var t,n,r,i;Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0,(n=t=e.NS||(e.NS={})).HTML="http://www.w3.org/1999/xhtml",n.MATHML="http://www.w3.org/1998/Math/MathML",n.SVG="http://www.w3.org/2000/svg",n.XLINK="http://www.w3.org/1999/xlink",n.XML="http://www.w3.org/XML/1998/namespace",n.XMLNS="http://www.w3.org/2000/xmlns/",function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(r=e.TAG_NAMES||(e.TAG_NAMES={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"}(i=e.TAG_ID||(e.TAG_ID={}));const o=new Map([[r.A,i.A],[r.ADDRESS,i.ADDRESS],[r.ANNOTATION_XML,i.ANNOTATION_XML],[r.APPLET,i.APPLET],[r.AREA,i.AREA],[r.ARTICLE,i.ARTICLE],[r.ASIDE,i.ASIDE],[r.B,i.B],[r.BASE,i.BASE],[r.BASEFONT,i.BASEFONT],[r.BGSOUND,i.BGSOUND],[r.BIG,i.BIG],[r.BLOCKQUOTE,i.BLOCKQUOTE],[r.BODY,i.BODY],[r.BR,i.BR],[r.BUTTON,i.BUTTON],[r.CAPTION,i.CAPTION],[r.CENTER,i.CENTER],[r.CODE,i.CODE],[r.COL,i.COL],[r.COLGROUP,i.COLGROUP],[r.DD,i.DD],[r.DESC,i.DESC],[r.DETAILS,i.DETAILS],[r.DIALOG,i.DIALOG],[r.DIR,i.DIR],[r.DIV,i.DIV],[r.DL,i.DL],[r.DT,i.DT],[r.EM,i.EM],[r.EMBED,i.EMBED],[r.FIELDSET,i.FIELDSET],[r.FIGCAPTION,i.FIGCAPTION],[r.FIGURE,i.FIGURE],[r.FONT,i.FONT],[r.FOOTER,i.FOOTER],[r.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[r.FORM,i.FORM],[r.FRAME,i.FRAME],[r.FRAMESET,i.FRAMESET],[r.H1,i.H1],[r.H2,i.H2],[r.H3,i.H3],[r.H4,i.H4],[r.H5,i.H5],[r.H6,i.H6],[r.HEAD,i.HEAD],[r.HEADER,i.HEADER],[r.HGROUP,i.HGROUP],[r.HR,i.HR],[r.HTML,i.HTML],[r.I,i.I],[r.IMG,i.IMG],[r.IMAGE,i.IMAGE],[r.INPUT,i.INPUT],[r.IFRAME,i.IFRAME],[r.KEYGEN,i.KEYGEN],[r.LABEL,i.LABEL],[r.LI,i.LI],[r.LINK,i.LINK],[r.LISTING,i.LISTING],[r.MAIN,i.MAIN],[r.MALIGNMARK,i.MALIGNMARK],[r.MARQUEE,i.MARQUEE],[r.MATH,i.MATH],[r.MENU,i.MENU],[r.META,i.META],[r.MGLYPH,i.MGLYPH],[r.MI,i.MI],[r.MO,i.MO],[r.MN,i.MN],[r.MS,i.MS],[r.MTEXT,i.MTEXT],[r.NAV,i.NAV],[r.NOBR,i.NOBR],[r.NOFRAMES,i.NOFRAMES],[r.NOEMBED,i.NOEMBED],[r.NOSCRIPT,i.NOSCRIPT],[r.OBJECT,i.OBJECT],[r.OL,i.OL],[r.OPTGROUP,i.OPTGROUP],[r.OPTION,i.OPTION],[r.P,i.P],[r.PARAM,i.PARAM],[r.PLAINTEXT,i.PLAINTEXT],[r.PRE,i.PRE],[r.RB,i.RB],[r.RP,i.RP],[r.RT,i.RT],[r.RTC,i.RTC],[r.RUBY,i.RUBY],[r.S,i.S],[r.SCRIPT,i.SCRIPT],[r.SECTION,i.SECTION],[r.SELECT,i.SELECT],[r.SOURCE,i.SOURCE],[r.SMALL,i.SMALL],[r.SPAN,i.SPAN],[r.STRIKE,i.STRIKE],[r.STRONG,i.STRONG],[r.STYLE,i.STYLE],[r.SUB,i.SUB],[r.SUMMARY,i.SUMMARY],[r.SUP,i.SUP],[r.TABLE,i.TABLE],[r.TBODY,i.TBODY],[r.TEMPLATE,i.TEMPLATE],[r.TEXTAREA,i.TEXTAREA],[r.TFOOT,i.TFOOT],[r.TD,i.TD],[r.TH,i.TH],[r.THEAD,i.THEAD],[r.TITLE,i.TITLE],[r.TR,i.TR],[r.TRACK,i.TRACK],[r.TT,i.TT],[r.U,i.U],[r.UL,i.UL],[r.SVG,i.SVG],[r.VAR,i.VAR],[r.WBR,i.WBR],[r.XMP,i.XMP]]);e.getTagID=function(e){var t;return null!==(t=o.get(e))&&void 0!==t?t:i.UNKNOWN};const a=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([a.ADDRESS,a.APPLET,a.AREA,a.ARTICLE,a.ASIDE,a.BASE,a.BASEFONT,a.BGSOUND,a.BLOCKQUOTE,a.BODY,a.BR,a.BUTTON,a.CAPTION,a.CENTER,a.COL,a.COLGROUP,a.DD,a.DETAILS,a.DIR,a.DIV,a.DL,a.DT,a.EMBED,a.FIELDSET,a.FIGCAPTION,a.FIGURE,a.FOOTER,a.FORM,a.FRAME,a.FRAMESET,a.H1,a.H2,a.H3,a.H4,a.H5,a.H6,a.HEAD,a.HEADER,a.HGROUP,a.HR,a.HTML,a.IFRAME,a.IMG,a.INPUT,a.LI,a.LINK,a.LISTING,a.MAIN,a.MARQUEE,a.MENU,a.META,a.NAV,a.NOEMBED,a.NOFRAMES,a.NOSCRIPT,a.OBJECT,a.OL,a.P,a.PARAM,a.PLAINTEXT,a.PRE,a.SCRIPT,a.SECTION,a.SELECT,a.SOURCE,a.STYLE,a.SUMMARY,a.TABLE,a.TBODY,a.TD,a.TEMPLATE,a.TEXTAREA,a.TFOOT,a.TH,a.THEAD,a.TITLE,a.TR,a.TRACK,a.UL,a.WBR,a.XMP]),[t.MATHML]:new Set([a.MI,a.MO,a.MN,a.MS,a.MTEXT,a.ANNOTATION_XML]),[t.SVG]:new Set([a.TITLE,a.FOREIGN_OBJECT,a.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set},e.isNumberedHeader=function(e){return e===a.H1||e===a.H2||e===a.H3||e===a.H4||e===a.H5||e===a.H6};const s=new Set([r.STYLE,r.SCRIPT,r.XMP,r.IFRAME,r.NOEMBED,r.NOFRAMES,r.PLAINTEXT]);e.hasUnescapedText=function(e,t){return s.has(e)||t&&e===r.NOSCRIPT}}(rU),Object.defineProperty(WH,"__esModule",{value:!0}),WH.Tokenizer=WH.TokenizerMode=void 0;const aU=qH,sU=$H,lU=nU,cU=oM,uU=KH,hU=rU,pU=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var fU;function dU(e){return e>=sU.CODE_POINTS.DIGIT_0&&e<=sU.CODE_POINTS.DIGIT_9}function mU(e){return e>=sU.CODE_POINTS.LATIN_CAPITAL_A&&e<=sU.CODE_POINTS.LATIN_CAPITAL_Z}function gU(e){return function(e){return e>=sU.CODE_POINTS.LATIN_SMALL_A&&e<=sU.CODE_POINTS.LATIN_SMALL_Z}(e)||mU(e)}function yU(e){return gU(e)||dU(e)}function vU(e){return e>=sU.CODE_POINTS.LATIN_CAPITAL_A&&e<=sU.CODE_POINTS.LATIN_CAPITAL_F}function bU(e){return e>=sU.CODE_POINTS.LATIN_SMALL_A&&e<=sU.CODE_POINTS.LATIN_SMALL_F}function _U(e){return e+32}function TU(e){return e===sU.CODE_POINTS.SPACE||e===sU.CODE_POINTS.LINE_FEED||e===sU.CODE_POINTS.TABULATION||e===sU.CODE_POINTS.FORM_FEED}function EU(e){return e===sU.CODE_POINTS.EQUALS_SIGN||yU(e)}function SU(e){return TU(e)||e===sU.CODE_POINTS.SOLIDUS||e===sU.CODE_POINTS.GREATER_THAN_SIGN}!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"}(fU||(fU={})),WH.TokenizerMode={DATA:fU.DATA,RCDATA:fU.RCDATA,RAWTEXT:fU.RAWTEXT,SCRIPT_DATA:fU.SCRIPT_DATA,PLAINTEXT:fU.PLAINTEXT,CDATA_SECTION:fU.CDATA_SECTION};let wU=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=fU.DATA,this.returnState=fU.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new aU.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return function(e,t,n){t&&iU(e.prototype,t),n&&iU(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"_err",value:function(e){var t,n;null===(n=(t=this.handler).onParseError)||void 0===n||n.call(t,this.preprocessor.getError(e))}},{key:"getCurrentLocation",value:function(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}},{key:"write",value:function(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||n?.()}},{key:"insertHtmlAtCurrentPos",value:function(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return!!this.preprocessor.endOfChunkHit&&(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0)}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}},{key:"_reconsumeInState",value:function(e,t){this.state=e,this._callState(t)}},{key:"_advanceBy",value:function(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}},{key:"_createStartTagToken",value:function(){this.currentToken={type:lU.TokenType.START_TAG,tagName:"",tagID:hU.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:lU.TokenType.END_TAG,tagName:"",tagID:hU.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(e){this.currentToken={type:lU.TokenType.COMMENT,data:"",location:this.getCurrentLocation(e)}}},{key:"_createDoctypeToken",value:function(e){this.currentToken={type:lU.TokenType.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}},{key:"_createAttr",value:function(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var e,t;const n=this.currentToken;if(null===(0,lU.getTokenAttr)(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(uU.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const e=this.currentToken;this.prepareToken(e),e.tagID=(0,hU.getTagID)(e.tagName),e.type===lU.TokenType.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(uU.ERR.endTagWithAttributes),e.selfClosing&&this._err(uU.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case lU.TokenType.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case lU.TokenType.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case lU.TokenType.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:lU.TokenType.EOF,location:e}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}},{key:"_emitCodePoint",value:function(e){const t=TU(e)?lU.TokenType.WHITESPACE_CHARACTER:e===sU.CODE_POINTS.NULL?lU.TokenType.NULL_CHARACTER:lU.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}},{key:"_emitChars",value:function(e){this._appendCharToCurrentCharacterToken(lU.TokenType.CHARACTER,e)}},{key:"_matchNamedCharacterReference",value:function(e){let t=null,n=0,r=!1;for(let i=0,o=cU.htmlDecodeTree[0];i>=0&&(i=(0,cU.determineBranch)(cU.htmlDecodeTree,o,i+1,e),!(i<0));e=this._consume()){n+=1,o=cU.htmlDecodeTree[i];const a=o&cU.BinTrieFlags.VALUE_LENGTH;if(a){const o=(a>>14)-1;if(e!==sU.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&EU(this.preprocessor.peek(1))?(t=[sU.CODE_POINTS.AMPERSAND],i+=o):(t=0===o?[cU.htmlDecodeTree[i]&~cU.BinTrieFlags.VALUE_LENGTH]:1===o?[cU.htmlDecodeTree[++i]]:[cU.htmlDecodeTree[++i],cU.htmlDecodeTree[++i]],n=0,r=e!==sU.CODE_POINTS.SEMICOLON),0===o){this._consume();break}}}return this._unconsume(n),r&&!this.preprocessor.endOfChunkHit&&this._err(uU.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),t}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===fU.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===fU.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===fU.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}},{key:"_callState",value:function(e){switch(this.state){case fU.DATA:this._stateData(e);break;case fU.RCDATA:this._stateRcdata(e);break;case fU.RAWTEXT:this._stateRawtext(e);break;case fU.SCRIPT_DATA:this._stateScriptData(e);break;case fU.PLAINTEXT:this._statePlaintext(e);break;case fU.TAG_OPEN:this._stateTagOpen(e);break;case fU.END_TAG_OPEN:this._stateEndTagOpen(e);break;case fU.TAG_NAME:this._stateTagName(e);break;case fU.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case fU.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case fU.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case fU.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case fU.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case fU.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case fU.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case fU.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case fU.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case fU.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case fU.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case fU.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case fU.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case fU.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case fU.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case fU.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case fU.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case fU.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case fU.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case fU.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case fU.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case fU.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case fU.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case fU.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case fU.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case fU.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case fU.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case fU.BOGUS_COMMENT:this._stateBogusComment(e);break;case fU.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case fU.COMMENT_START:this._stateCommentStart(e);break;case fU.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case fU.COMMENT:this._stateComment(e);break;case fU.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case fU.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case fU.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case fU.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case fU.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case fU.COMMENT_END:this._stateCommentEnd(e);break;case fU.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case fU.DOCTYPE:this._stateDoctype(e);break;case fU.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case fU.DOCTYPE_NAME:this._stateDoctypeName(e);break;case fU.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case fU.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case fU.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case fU.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case fU.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case fU.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case fU.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case fU.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case fU.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case fU.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case fU.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case fU.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case fU.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case fU.CDATA_SECTION:this._stateCdataSection(e);break;case fU.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case fU.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case fU.CHARACTER_REFERENCE:this._stateCharacterReference(e);break;case fU.NAMED_CHARACTER_REFERENCE:this._stateNamedCharacterReference(e);break;case fU.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;case fU.NUMERIC_CHARACTER_REFERENCE:this._stateNumericCharacterReference(e);break;case fU.HEXADEMICAL_CHARACTER_REFERENCE_START:this._stateHexademicalCharacterReferenceStart(e);break;case fU.HEXADEMICAL_CHARACTER_REFERENCE:this._stateHexademicalCharacterReference(e);break;case fU.DECIMAL_CHARACTER_REFERENCE:this._stateDecimalCharacterReference(e);break;case fU.NUMERIC_CHARACTER_REFERENCE_END:this._stateNumericCharacterReferenceEnd(e);break;default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(e){switch(e){case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.TAG_OPEN;break;case sU.CODE_POINTS.AMPERSAND:this.returnState=fU.DATA,this.state=fU.CHARACTER_REFERENCE;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitCodePoint(e);break;case sU.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateRcdata",value:function(e){switch(e){case sU.CODE_POINTS.AMPERSAND:this.returnState=fU.RCDATA,this.state=fU.CHARACTER_REFERENCE;break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.RCDATA_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateRawtext",value:function(e){switch(e){case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.RAWTEXT_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptData",value:function(e){switch(e){case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_statePlaintext",value:function(e){switch(e){case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateTagOpen",value:function(e){if(gU(e))this._createStartTagToken(),this.state=fU.TAG_NAME,this._stateTagName(e);else switch(e){case sU.CODE_POINTS.EXCLAMATION_MARK:this.state=fU.MARKUP_DECLARATION_OPEN;break;case sU.CODE_POINTS.SOLIDUS:this.state=fU.END_TAG_OPEN;break;case sU.CODE_POINTS.QUESTION_MARK:this._err(uU.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=fU.BOGUS_COMMENT,this._stateBogusComment(e);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(uU.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=fU.DATA,this._stateData(e)}}},{key:"_stateEndTagOpen",value:function(e){if(gU(e))this._createEndTagToken(),this.state=fU.TAG_NAME,this._stateTagName(e);else switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingEndTagName),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(uU.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=fU.BOGUS_COMMENT,this._stateBogusComment(e)}}},{key:"_stateTagName",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.BEFORE_ATTRIBUTE_NAME;break;case sU.CODE_POINTS.SOLIDUS:this.state=fU.SELF_CLOSING_START_TAG;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentTagToken();break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.tagName+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(mU(e)?_U(e):e)}}},{key:"_stateRcdataLessThanSign",value:function(e){e===sU.CODE_POINTS.SOLIDUS?this.state=fU.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=fU.RCDATA,this._stateRcdata(e))}},{key:"_stateRcdataEndTagOpen",value:function(e){gU(e)?(this.state=fU.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=fU.RCDATA,this._stateRcdata(e))}},{key:"handleSpecialEndTag",value:function(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();switch(this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=fU.BEFORE_ATTRIBUTE_NAME,!1;case sU.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=fU.SELF_CLOSING_START_TAG,!1;case sU.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=fU.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=fU.RCDATA,this._stateRcdata(e))}},{key:"_stateRawtextLessThanSign",value:function(e){e===sU.CODE_POINTS.SOLIDUS?this.state=fU.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=fU.RAWTEXT,this._stateRawtext(e))}},{key:"_stateRawtextEndTagOpen",value:function(e){gU(e)?(this.state=fU.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=fU.RAWTEXT,this._stateRawtext(e))}},{key:"_stateRawtextEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=fU.RAWTEXT,this._stateRawtext(e))}},{key:"_stateScriptDataLessThanSign",value:function(e){switch(e){case sU.CODE_POINTS.SOLIDUS:this.state=fU.SCRIPT_DATA_END_TAG_OPEN;break;case sU.CODE_POINTS.EXCLAMATION_MARK:this.state=fU.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=fU.SCRIPT_DATA,this._stateScriptData(e)}}},{key:"_stateScriptDataEndTagOpen",value:function(e){gU(e)?(this.state=fU.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=fU.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=fU.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscapeStart",value:function(e){e===sU.CODE_POINTS.HYPHEN_MINUS?(this.state=fU.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=fU.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscapeStartDash",value:function(e){e===sU.CODE_POINTS.HYPHEN_MINUS?(this.state=fU.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=fU.SCRIPT_DATA,this._stateScriptData(e))}},{key:"_stateScriptDataEscaped",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedDash",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.state=fU.SCRIPT_DATA_ESCAPED,this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=fU.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedDashDash",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.SCRIPT_DATA,this._emitChars(">");break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.state=fU.SCRIPT_DATA_ESCAPED,this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=fU.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(e){e===sU.CODE_POINTS.SOLIDUS?this.state=fU.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:gU(e)?(this._emitChars("<"),this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=fU.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(e){gU(e)?(this.state=fU.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=fU.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataEscapedEndTagName",value:function(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=fU.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(e){if(this.preprocessor.startsWith(sU.SEQUENCES.SCRIPT,!1)&&SU(this.preprocessor.peek(sU.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<sU.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=fU.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}},{key:"_stateScriptDataDoubleEscaped",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case sU.CODE_POINTS.LESS_THAN_SIGN:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.SCRIPT_DATA,this._emitChars(">");break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(sU.REPLACEMENT_CHARACTER);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(e){e===sU.CODE_POINTS.SOLIDUS?(this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(e){if(this.preprocessor.startsWith(sU.SEQUENCES.SCRIPT,!1)&&SU(this.preprocessor.peek(sU.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<sU.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=fU.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=fU.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}},{key:"_stateBeforeAttributeName",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.SOLIDUS:case sU.CODE_POINTS.GREATER_THAN_SIGN:case sU.CODE_POINTS.EOF:this.state=fU.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case sU.CODE_POINTS.EQUALS_SIGN:this._err(uU.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=fU.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=fU.ATTRIBUTE_NAME,this._stateAttributeName(e)}}},{key:"_stateAttributeName",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:case sU.CODE_POINTS.SOLIDUS:case sU.CODE_POINTS.GREATER_THAN_SIGN:case sU.CODE_POINTS.EOF:this._leaveAttrName(),this.state=fU.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case sU.CODE_POINTS.EQUALS_SIGN:this._leaveAttrName(),this.state=fU.BEFORE_ATTRIBUTE_VALUE;break;case sU.CODE_POINTS.QUOTATION_MARK:case sU.CODE_POINTS.APOSTROPHE:case sU.CODE_POINTS.LESS_THAN_SIGN:this._err(uU.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.currentAttr.name+=sU.REPLACEMENT_CHARACTER;break;default:this.currentAttr.name+=String.fromCodePoint(mU(e)?_U(e):e)}}},{key:"_stateAfterAttributeName",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.SOLIDUS:this.state=fU.SELF_CLOSING_START_TAG;break;case sU.CODE_POINTS.EQUALS_SIGN:this.state=fU.BEFORE_ATTRIBUTE_VALUE;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentTagToken();break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=fU.ATTRIBUTE_NAME,this._stateAttributeName(e)}}},{key:"_stateBeforeAttributeValue",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.QUOTATION_MARK:this.state=fU.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:this.state=fU.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingAttributeValue),this.state=fU.DATA,this.emitCurrentTagToken();break;default:this.state=fU.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(e){switch(e){case sU.CODE_POINTS.QUOTATION_MARK:this.state=fU.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case sU.CODE_POINTS.AMPERSAND:this.returnState=fU.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=fU.CHARACTER_REFERENCE;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.currentAttr.value+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAttributeValueSingleQuoted",value:function(e){switch(e){case sU.CODE_POINTS.APOSTROPHE:this.state=fU.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case sU.CODE_POINTS.AMPERSAND:this.returnState=fU.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=fU.CHARACTER_REFERENCE;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.currentAttr.value+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAttributeValueUnquoted",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=fU.BEFORE_ATTRIBUTE_NAME;break;case sU.CODE_POINTS.AMPERSAND:this.returnState=fU.ATTRIBUTE_VALUE_UNQUOTED,this.state=fU.CHARACTER_REFERENCE;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=fU.DATA,this.emitCurrentTagToken();break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this.currentAttr.value+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.QUOTATION_MARK:case sU.CODE_POINTS.APOSTROPHE:case sU.CODE_POINTS.LESS_THAN_SIGN:case sU.CODE_POINTS.EQUALS_SIGN:case sU.CODE_POINTS.GRAVE_ACCENT:this._err(uU.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}},{key:"_stateAfterAttributeValueQuoted",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=fU.BEFORE_ATTRIBUTE_NAME;break;case sU.CODE_POINTS.SOLIDUS:this._leaveAttrValue(),this.state=fU.SELF_CLOSING_START_TAG;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=fU.DATA,this.emitCurrentTagToken();break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this._err(uU.ERR.missingWhitespaceBetweenAttributes),this.state=fU.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}},{key:"_stateSelfClosingStartTag",value:function(e){switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=fU.DATA,this.emitCurrentTagToken();break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInTag),this._emitEOFToken();break;default:this._err(uU.ERR.unexpectedSolidusInTag),this.state=fU.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}},{key:"_stateBogusComment",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentComment(t);break;case sU.CODE_POINTS.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.data+=sU.REPLACEMENT_CHARACTER;break;default:t.data+=String.fromCodePoint(e)}}},{key:"_stateMarkupDeclarationOpen",value:function(e){this._consumeSequenceIfMatch(sU.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(sU.SEQUENCES.DASH_DASH.length+1),this.state=fU.COMMENT_START):this._consumeSequenceIfMatch(sU.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(sU.SEQUENCES.DOCTYPE.length+1),this.state=fU.DOCTYPE):this._consumeSequenceIfMatch(sU.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=fU.CDATA_SECTION:(this._err(uU.ERR.cdataInHtmlContent),this._createCommentToken(sU.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=fU.BOGUS_COMMENT):this._ensureHibernation()||(this._err(uU.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=fU.BOGUS_COMMENT,this._stateBogusComment(e))}},{key:"_stateCommentStart",value:function(e){switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.COMMENT_START_DASH;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:{this._err(uU.ERR.abruptClosingOfEmptyComment),this.state=fU.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateCommentStartDash",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.COMMENT_END;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.abruptClosingOfEmptyComment),this.state=fU.DATA,this.emitCurrentComment(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateComment",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.COMMENT_END_DASH;break;case sU.CODE_POINTS.LESS_THAN_SIGN:t.data+="<",this.state=fU.COMMENT_LESS_THAN_SIGN;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.data+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}},{key:"_stateCommentLessThanSign",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.EXCLAMATION_MARK:t.data+="!",this.state=fU.COMMENT_LESS_THAN_SIGN_BANG;break;case sU.CODE_POINTS.LESS_THAN_SIGN:t.data+="<";break;default:this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateCommentLessThanSignBang",value:function(e){e===sU.CODE_POINTS.HYPHEN_MINUS?this.state=fU.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=fU.COMMENT,this._stateComment(e))}},{key:"_stateCommentLessThanSignBangDash",value:function(e){e===sU.CODE_POINTS.HYPHEN_MINUS?this.state=fU.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=fU.COMMENT_END_DASH,this._stateCommentEndDash(e))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(e){e!==sU.CODE_POINTS.GREATER_THAN_SIGN&&e!==sU.CODE_POINTS.EOF&&this._err(uU.ERR.nestedComment),this.state=fU.COMMENT_END,this._stateCommentEnd(e)}},{key:"_stateCommentEndDash",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:this.state=fU.COMMENT_END;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateCommentEnd",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentComment(t);break;case sU.CODE_POINTS.EXCLAMATION_MARK:this.state=fU.COMMENT_END_BANG;break;case sU.CODE_POINTS.HYPHEN_MINUS:t.data+="-";break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateCommentEndBang",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.HYPHEN_MINUS:t.data+="--!",this.state=fU.COMMENT_END_DASH;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.incorrectlyClosedComment),this.state=fU.DATA,this.emitCurrentComment(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=fU.COMMENT,this._stateComment(e)}}},{key:"_stateDoctype",value:function(e){switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.BEFORE_DOCTYPE_NAME;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case sU.CODE_POINTS.EOF:{this._err(uU.ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(uU.ERR.missingWhitespaceBeforeDoctypeName),this.state=fU.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}},{key:"_stateBeforeDoctypeName",value:function(e){if(mU(e))this._createDoctypeToken(String.fromCharCode(_U(e))),this.state=fU.DOCTYPE_NAME;else switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),this._createDoctypeToken(sU.REPLACEMENT_CHARACTER),this.state=fU.DOCTYPE_NAME;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:{this._err(uU.ERR.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=fU.DATA;break}case sU.CODE_POINTS.EOF:{this._err(uU.ERR.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=fU.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.AFTER_DOCTYPE_NAME;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.name+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(mU(e)?_U(e):e)}}},{key:"_stateAfterDoctypeName",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(sU.SEQUENCES.PUBLIC,!1)?this.state=fU.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(sU.SEQUENCES.SYSTEM,!1)?this.state=fU.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(uU.ERR.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case sU.CODE_POINTS.QUOTATION_MARK:this._err(uU.ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=fU.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:this._err(uU.ERR.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=fU.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.QUOTATION_MARK:t.publicId="",this.state=fU.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:t.publicId="",this.state=fU.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.QUOTATION_MARK:this.state=fU.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.publicId+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.APOSTROPHE:this.state=fU.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.publicId+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.QUOTATION_MARK:this._err(uU.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:this._err(uU.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:this.state=fU.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case sU.CODE_POINTS.QUOTATION_MARK:this._err(uU.ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:this._err(uU.ERR.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.QUOTATION_MARK:t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case sU.CODE_POINTS.APOSTROPHE:t.systemId="",this.state=fU.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.DATA,this.emitCurrentDoctype(t);break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.QUOTATION_MARK:this.state=fU.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.systemId+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.APOSTROPHE:this.state=fU.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter),t.systemId+=sU.REPLACEMENT_CHARACTER;break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this._err(uU.ERR.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.SPACE:case sU.CODE_POINTS.LINE_FEED:case sU.CODE_POINTS.TABULATION:case sU.CODE_POINTS.FORM_FEED:break;case sU.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(uU.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=fU.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}},{key:"_stateBogusDoctype",value:function(e){const t=this.currentToken;switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=fU.DATA;break;case sU.CODE_POINTS.NULL:this._err(uU.ERR.unexpectedNullCharacter);break;case sU.CODE_POINTS.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}},{key:"_stateCdataSection",value:function(e){switch(e){case sU.CODE_POINTS.RIGHT_SQUARE_BRACKET:this.state=fU.CDATA_SECTION_BRACKET;break;case sU.CODE_POINTS.EOF:this._err(uU.ERR.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}},{key:"_stateCdataSectionBracket",value:function(e){e===sU.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=fU.CDATA_SECTION_END:(this._emitChars("]"),this.state=fU.CDATA_SECTION,this._stateCdataSection(e))}},{key:"_stateCdataSectionEnd",value:function(e){switch(e){case sU.CODE_POINTS.GREATER_THAN_SIGN:this.state=fU.DATA;break;case sU.CODE_POINTS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=fU.CDATA_SECTION,this._stateCdataSection(e)}}},{key:"_stateCharacterReference",value:function(e){e===sU.CODE_POINTS.NUMBER_SIGN?this.state=fU.NUMERIC_CHARACTER_REFERENCE:yU(e)?(this.state=fU.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,e))}},{key:"_stateNamedCharacterReference",value:function(e){const t=this._matchNamedCharacterReference(e);if(!this._ensureHibernation())if(t){for(let e=0;e<t.length;e++)this._flushCodePointConsumedAsCharacterReference(t[e]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.AMPERSAND),this.state=fU.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(e){yU(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===sU.CODE_POINTS.SEMICOLON&&this._err(uU.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}},{key:"_stateNumericCharacterReference",value:function(e){this.charRefCode=0,e===sU.CODE_POINTS.LATIN_SMALL_X||e===sU.CODE_POINTS.LATIN_CAPITAL_X?this.state=fU.HEXADEMICAL_CHARACTER_REFERENCE_START:dU(e)?(this.state=fU.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(uU.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(e){!function(e){return dU(e)||vU(e)||bU(e)}(e)?(this._err(uU.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(sU.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState):(this.state=fU.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e))}},{key:"_stateHexademicalCharacterReference",value:function(e){vU(e)?this.charRefCode=16*this.charRefCode+e-55:bU(e)?this.charRefCode=16*this.charRefCode+e-87:dU(e)?this.charRefCode=16*this.charRefCode+e-48:e===sU.CODE_POINTS.SEMICOLON?this.state=fU.NUMERIC_CHARACTER_REFERENCE_END:(this._err(uU.ERR.missingSemicolonAfterCharacterReference),this.state=fU.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}},{key:"_stateDecimalCharacterReference",value:function(e){dU(e)?this.charRefCode=10*this.charRefCode+e-48:e===sU.CODE_POINTS.SEMICOLON?this.state=fU.NUMERIC_CHARACTER_REFERENCE_END:(this._err(uU.ERR.missingSemicolonAfterCharacterReference),this.state=fU.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}},{key:"_stateNumericCharacterReferenceEnd",value:function(e){if(this.charRefCode===sU.CODE_POINTS.NULL)this._err(uU.ERR.nullCharacterReference),this.charRefCode=sU.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(uU.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=sU.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,sU.isSurrogate)(this.charRefCode))this._err(uU.ERR.surrogateCharacterReference),this.charRefCode=sU.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,sU.isUndefinedCodePoint)(this.charRefCode))this._err(uU.ERR.noncharacterCharacterReference);else if((0,sU.isControlCodePoint)(this.charRefCode)||this.charRefCode===sU.CODE_POINTS.CARRIAGE_RETURN){this._err(uU.ERR.controlCharacterReference);const e=pU.get(this.charRefCode);void 0!==e&&(this.charRefCode=e)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}]),e}();WH.Tokenizer=wU;var AU={};function OU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xU(r.key),r)}}function xU(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}Object.defineProperty(AU,"__esModule",{value:!0}),AU.OpenElementStack=void 0;const kU=rU,IU=new Set([kU.TAG_ID.DD,kU.TAG_ID.DT,kU.TAG_ID.LI,kU.TAG_ID.OPTGROUP,kU.TAG_ID.OPTION,kU.TAG_ID.P,kU.TAG_ID.RB,kU.TAG_ID.RP,kU.TAG_ID.RT,kU.TAG_ID.RTC]),CU=new Set([...IU,kU.TAG_ID.CAPTION,kU.TAG_ID.COLGROUP,kU.TAG_ID.TBODY,kU.TAG_ID.TD,kU.TAG_ID.TFOOT,kU.TAG_ID.TH,kU.TAG_ID.THEAD,kU.TAG_ID.TR]),PU=new Map([[kU.TAG_ID.APPLET,kU.NS.HTML],[kU.TAG_ID.CAPTION,kU.NS.HTML],[kU.TAG_ID.HTML,kU.NS.HTML],[kU.TAG_ID.MARQUEE,kU.NS.HTML],[kU.TAG_ID.OBJECT,kU.NS.HTML],[kU.TAG_ID.TABLE,kU.NS.HTML],[kU.TAG_ID.TD,kU.NS.HTML],[kU.TAG_ID.TEMPLATE,kU.NS.HTML],[kU.TAG_ID.TH,kU.NS.HTML],[kU.TAG_ID.ANNOTATION_XML,kU.NS.MATHML],[kU.TAG_ID.MI,kU.NS.MATHML],[kU.TAG_ID.MN,kU.NS.MATHML],[kU.TAG_ID.MO,kU.NS.MATHML],[kU.TAG_ID.MS,kU.NS.MATHML],[kU.TAG_ID.MTEXT,kU.NS.MATHML],[kU.TAG_ID.DESC,kU.NS.SVG],[kU.TAG_ID.FOREIGN_OBJECT,kU.NS.SVG],[kU.TAG_ID.TITLE,kU.NS.SVG]]),DU=[kU.TAG_ID.H1,kU.TAG_ID.H2,kU.TAG_ID.H3,kU.TAG_ID.H4,kU.TAG_ID.H5,kU.TAG_ID.H6],RU=[kU.TAG_ID.TR,kU.TAG_ID.TEMPLATE,kU.TAG_ID.HTML],NU=[kU.TAG_ID.TBODY,kU.TAG_ID.TFOOT,kU.TAG_ID.THEAD,kU.TAG_ID.TEMPLATE,kU.TAG_ID.HTML],MU=[kU.TAG_ID.TABLE,kU.TAG_ID.TEMPLATE,kU.TAG_ID.HTML],LU=[kU.TAG_ID.TD,kU.TAG_ID.TH];let jU=function(){function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=kU.TAG_ID.UNKNOWN,this.current=t}return function(e,t,n){t&&OU(e.prototype,t),n&&OU(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(e){return this.items.lastIndexOf(e,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===kU.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===kU.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}},{key:"pop",value:function(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}},{key:"replace",value:function(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}},{key:"insertAfter",value:function(e,t,n){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==kU.NS.HTML);this.shortenToLength(t<0?0:t)}},{key:"shortenToLength",value:function(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}},{key:"popUntilElementPopped",value:function(e){const t=this._indexOf(e);this.shortenToLength(t<0?0:t)}},{key:"popUntilPopped",value:function(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n<0?0:n)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(DU,kU.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(LU,kU.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(e,t){for(let n=this.stackTop;n>=0;n--)if(e.includes(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}},{key:"clearBackTo",value:function(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(MU,kU.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(NU,kU.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(RU,kU.NS.HTML)}},{key:"remove",value:function(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===kU.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(e){return this._indexOf(e)>-1}},{key:"getCommonAncestor",value:function(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}},{key:"isRootHtmlElementCurrent",value:function(){return 0===this.stackTop&&this.tagIDs[0]===kU.TAG_ID.HTML}},{key:"hasInScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===kU.NS.HTML)return!0;if(PU.get(n)===r)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e],n=this.treeAdapter.getNamespaceURI(this.items[e]);if((0,kU.isNumberedHeader)(t)&&n===kU.NS.HTML)return!0;if(PU.get(t)===n)return!1}return!0}},{key:"hasInListItemScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===kU.NS.HTML)return!0;if((n===kU.TAG_ID.UL||n===kU.TAG_ID.OL)&&r===kU.NS.HTML||PU.get(n)===r)return!1}return!0}},{key:"hasInButtonScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===kU.NS.HTML)return!0;if(n===kU.TAG_ID.BUTTON&&r===kU.NS.HTML||PU.get(n)===r)return!1}return!0}},{key:"hasInTableScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===kU.NS.HTML){if(n===e)return!0;if(n===kU.TAG_ID.TABLE||n===kU.TAG_ID.TEMPLATE||n===kU.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===kU.NS.HTML){if(t===kU.TAG_ID.TBODY||t===kU.TAG_ID.THEAD||t===kU.TAG_ID.TFOOT)return!0;if(t===kU.TAG_ID.TABLE||t===kU.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===kU.NS.HTML){if(n===e)return!0;if(n!==kU.TAG_ID.OPTION&&n!==kU.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;IU.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;CU.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(e){for(;this.currentTagId!==e&&CU.has(this.currentTagId);)this.pop()}}]),e}();AU.OpenElementStack=jU;var BU={};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;var r,i;(i=r=e.EntryType||(e.EntryType={}))[i.Marker=0]="Marker",i[i.Element=1]="Element";const o={type:r.Marker};let a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.treeAdapter=t,this.entries=[],this.bookmark=null}return function(e,n,r){n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"_getNoahArkConditionCandidates",value:function(e,t){const n=[],i=t.length,o=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const e=this.entries[s];if(e.type===r.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===o&&this.treeAdapter.getNamespaceURI(t)===a){const e=this.treeAdapter.getAttrList(t);e.length===i&&n.push({idx:s,attrs:e})}}return n}},{key:"_ensureNoahArkCondition",value:function(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const r=new Map(t.map((e=>[e.name,e.value])));let i=0;for(let o=0;o<n.length;o++){const e=n[o];e.attrs.every((e=>r.get(e.name)===e.value))&&(i+=1,i>=3&&this.entries.splice(e.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(o)}},{key:"pushElement",value:function(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:r.Element,element:e,token:t})}},{key:"insertElementAfterBookmark",value:function(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:r.Element,element:e,token:t})}},{key:"removeEntry",value:function(e){const t=this.entries.indexOf(e);t>=0&&this.entries.splice(t,1)}},{key:"clearToLastMarker",value:function(){const e=this.entries.indexOf(o);e>=0?this.entries.splice(0,e+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(e){const t=this.entries.find((t=>t.type===r.Marker||this.treeAdapter.getTagName(t.element)===e));return t&&t.type===r.Element?t:null}},{key:"getElementEntry",value:function(e){return this.entries.find((t=>t.type===r.Element&&t.element===e))}}]),e}();e.FormattingElementList=a}(BU);var FU={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=rU;function n(e){return{nodeName:"#text",value:e,parentNode:null}}e.defaultTreeAdapter={createDocument:()=>({nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(t,n,r,i){const o=t.childNodes.find((e=>"#documentType"===e.nodeName));if(o)o.name=n,o.publicId=r,o.systemId=i;else{const o={nodeName:"#documentType",name:n,publicId:r,systemId:i,parentNode:null};e.defaultTreeAdapter.appendChild(t,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(t,r){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(n))return void(n.value+=r)}e.defaultTreeAdapter.appendChild(t,n(r))},insertTextBefore(t,r,i){const o=t.childNodes[t.childNodes.indexOf(i)-1];o&&e.defaultTreeAdapter.isTextNode(o)?o.value+=r:e.defaultTreeAdapter.insertBefore(t,n(r),i)},adoptAttributes(e,t){const n=new Set(e.attrs.map((e=>e.name)));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation=Object.assign(Object.assign({},e.sourceCodeLocation),t)}}}(FU);var GU={};Object.defineProperty(GU,"__esModule",{value:!0}),GU.getDocumentMode=GU.isConforming=void 0;const HU=rU,UU="html",zU=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],VU=[...zU,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],XU=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),YU=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],WU=[...YU,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function qU(e,t){return t.some((t=>e.startsWith(t)))}GU.isConforming=function(e){return e.name===UU&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},GU.getDocumentMode=function(e){if(e.name!==UU)return HU.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return HU.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),XU.has(n))return HU.DOCUMENT_MODE.QUIRKS;let e=null===t?VU:zU;if(qU(n,e))return HU.DOCUMENT_MODE.QUIRKS;if(e=null===t?YU:WU,qU(n,e))return HU.DOCUMENT_MODE.LIMITED_QUIRKS}return HU.DOCUMENT_MODE.NO_QUIRKS};var $U={};function KU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QU(r.key),r)}}function QU(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=rU,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},r=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((e=>[e.toLowerCase(),e]))),i=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((e=>[e.toLowerCase(),e])));const o=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);e.causesExit=function(e){const n=e.tagID;return n===t.TAG_ID.FONT&&e.attrs.some((e=>{let{name:n}=e;return n===t.ATTRS.COLOR||n===t.ATTRS.SIZE||n===t.ATTRS.FACE}))||o.has(n)},e.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},e.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=r.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}},e.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=i.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},e.adjustTokenSVGTagName=function(n){const r=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(n.tagName);null!=r&&(n.tagName=r,n.tagID=(0,t.getTagID)(n.tagName))},e.isIntegrationPoint=function(e,r,i,o){return(!o||o===t.NS.HTML)&&function(e,r,i){if(r===t.NS.MATHML&&e===t.TAG_ID.ANNOTATION_XML)for(let o=0;o<i.length;o++)if(i[o].name===t.ATTRS.ENCODING){const e=i[o].value.toLowerCase();return e===n.TEXT_HTML||e===n.APPLICATION_XML}return r===t.NS.SVG&&(e===t.TAG_ID.FOREIGN_OBJECT||e===t.TAG_ID.DESC||e===t.TAG_ID.TITLE)}(e,r,i)||(!o||o===t.NS.MATHML)&&function(e,n){return n===t.NS.MATHML&&(e===t.TAG_ID.MI||e===t.TAG_ID.MO||e===t.TAG_ID.MN||e===t.TAG_ID.MS||e===t.TAG_ID.MTEXT)}(e,r)}}($U),Object.defineProperty(YH,"__esModule",{value:!0}),YH.Parser=void 0;const ZU=WH,JU=AU,ez=BU,tz=FU,nz=GU,rz=$U,iz=KH,oz=$H,az=rU,sz=nU,lz="hidden",cz=8,uz=3;var hz;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(hz||(hz={}));const pz={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},fz=new Set([az.TAG_ID.TABLE,az.TAG_ID.TBODY,az.TAG_ID.TFOOT,az.TAG_ID.THEAD,az.TAG_ID.TR]),dz={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:tz.defaultTreeAdapter,onParseError:null};let mz=function(){function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=hz.INITIAL,this.originalInsertionMode=hz.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},dz),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new ZU.Tokenizer(this.options,this),this.activeFormattingElements=new ez.FormattingElementList(this.treeAdapter),this.fragmentContextID=r?(0,az.getTagID)(this.treeAdapter.getTagName(r)):az.TAG_ID.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new JU.OpenElementStack(this.document,this.treeAdapter,this)}return function(e,t,n){t&&KU(e.prototype,t),n&&KU(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"getFragment",value:function(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}},{key:"_err",value:function(e,t,n){var r;if(!this.onParseError)return;const i=null!==(r=e.location)&&void 0!==r?r:pz,o={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(o)}},{key:"onItemPush",value:function(e,t,n){var r,i;null===(i=(r=this.treeAdapter).onItemPush)||void 0===i||i.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}},{key:"onItemPop",value:function(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}},{key:"_setContextModes",value:function(e,t){const n=e===this.document||this.treeAdapter.getNamespaceURI(e)===az.NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&!this._isIntegrationPoint(t,e)}},{key:"_switchToTextParsing",value:function(e,t){this._insertElement(e,az.NS.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=hz.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=hz.TEXT,this.originalInsertionMode=hz.IN_BODY,this.tokenizer.state=ZU.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===az.TAG_NAMES.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===az.NS.HTML)switch(this.fragmentContextID){case az.TAG_ID.TITLE:case az.TAG_ID.TEXTAREA:this.tokenizer.state=ZU.TokenizerMode.RCDATA;break;case az.TAG_ID.STYLE:case az.TAG_ID.XMP:case az.TAG_ID.IFRAME:case az.TAG_ID.NOEMBED:case az.TAG_ID.NOFRAMES:case az.TAG_ID.NOSCRIPT:this.tokenizer.state=ZU.TokenizerMode.RAWTEXT;break;case az.TAG_ID.SCRIPT:this.tokenizer.state=ZU.TokenizerMode.SCRIPT_DATA;break;case az.TAG_ID.PLAINTEXT:this.tokenizer.state=ZU.TokenizerMode.PLAINTEXT}}},{key:"_setDocumentType",value:function(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){const t=this.treeAdapter.getChildNodes(this.document).find((e=>this.treeAdapter.isDocumentTypeNode(e)));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}},{key:"_attachElementToTree",value:function(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&Object.assign(Object.assign({},t),{startTag:t});this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(t,e)}}},{key:"_appendElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}},{key:"_insertElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}},{key:"_insertFakeElement",value:function(e,t){const n=this.treeAdapter.createElement(e,az.NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}},{key:"_insertTemplate",value:function(e){const t=this.treeAdapter.createElement(e.tagName,az.NS.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}},{key:"_insertFakeRootElement",value:function(){const e=this.treeAdapter.createElement(az.TAG_NAMES.HTML,az.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,az.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}},{key:"_insertCharacters",value:function(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),i=n?r.lastIndexOf(n):r.length,o=r[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}},{key:"_adoptNodes",value:function(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}},{key:"_setEndLocation",value:function(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i=t.type===sz.TokenType.END_TAG&&r===t.tagName?{endTag:Object.assign({},n),endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==az.TAG_ID.SVG||this.treeAdapter.getTagName(t)!==az.TAG_NAMES.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==az.NS.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===az.TAG_ID.MGLYPH||e.tagID===az.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(n,t,az.NS.HTML))}},{key:"_processToken",value:function(e){switch(e.type){case sz.TokenType.CHARACTER:this.onCharacter(e);break;case sz.TokenType.NULL_CHARACTER:this.onNullCharacter(e);break;case sz.TokenType.COMMENT:this.onComment(e);break;case sz.TokenType.DOCTYPE:this.onDoctype(e);break;case sz.TokenType.START_TAG:this._processStartTag(e);break;case sz.TokenType.END_TAG:this.onEndTag(e);break;case sz.TokenType.EOF:this.onEof(e);break;case sz.TokenType.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}},{key:"_isIntegrationPoint",value:function(e,t,n){const r=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return rz.isIntegrationPoint(e,r,i,n)}},{key:"_reconstructActiveFormattingElements",value:function(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex((e=>e.type===ez.EntryType.Marker||this.openElements.contains(e.element)));for(let n=t<0?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=hz.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(az.TAG_ID.P),this.openElements.popUntilTagNamePopped(az.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case az.TAG_ID.TR:return void(this.insertionMode=hz.IN_ROW);case az.TAG_ID.TBODY:case az.TAG_ID.THEAD:case az.TAG_ID.TFOOT:return void(this.insertionMode=hz.IN_TABLE_BODY);case az.TAG_ID.CAPTION:return void(this.insertionMode=hz.IN_CAPTION);case az.TAG_ID.COLGROUP:return void(this.insertionMode=hz.IN_COLUMN_GROUP);case az.TAG_ID.TABLE:return void(this.insertionMode=hz.IN_TABLE);case az.TAG_ID.BODY:return void(this.insertionMode=hz.IN_BODY);case az.TAG_ID.FRAMESET:return void(this.insertionMode=hz.IN_FRAMESET);case az.TAG_ID.SELECT:return void this._resetInsertionModeForSelect(e);case az.TAG_ID.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case az.TAG_ID.HTML:return void(this.insertionMode=this.headElement?hz.AFTER_HEAD:hz.BEFORE_HEAD);case az.TAG_ID.TD:case az.TAG_ID.TH:if(e>0)return void(this.insertionMode=hz.IN_CELL);break;case az.TAG_ID.HEAD:if(e>0)return void(this.insertionMode=hz.IN_HEAD)}this.insertionMode=hz.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===az.TAG_ID.TEMPLATE)break;if(e===az.TAG_ID.TABLE)return void(this.insertionMode=hz.IN_SELECT_IN_TABLE)}this.insertionMode=hz.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(e){return fz.has(e)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case az.TAG_ID.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===az.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case az.TAG_ID.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}},{key:"_isSpecialElement",value:function(e,t){const n=this.treeAdapter.getNamespaceURI(e);return az.SPECIAL_ELEMENTS[n].has(t)}},{key:"onCharacter",value:function(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case hz.INITIAL:Az(this,e);break;case hz.BEFORE_HTML:Oz(this,e);break;case hz.BEFORE_HEAD:xz(this,e);break;case hz.IN_HEAD:Cz(this,e);break;case hz.IN_HEAD_NO_SCRIPT:Pz(this,e);break;case hz.AFTER_HEAD:Dz(this,e);break;case hz.IN_BODY:case hz.IN_CAPTION:case hz.IN_CELL:case hz.IN_TEMPLATE:Mz(this,e);break;case hz.TEXT:case hz.IN_SELECT:case hz.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case hz.IN_TABLE:case hz.IN_TABLE_BODY:case hz.IN_ROW:Vz(this,e);break;case hz.IN_TABLE_TEXT:$z(this,e);break;case hz.IN_COLUMN_GROUP:Jz(this,e);break;case hz.AFTER_BODY:lV(this,e);break;case hz.AFTER_AFTER_BODY:cV(this,e)}}},{key:"onNullCharacter",value:function(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=oz.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case hz.INITIAL:Az(this,e);break;case hz.BEFORE_HTML:Oz(this,e);break;case hz.BEFORE_HEAD:xz(this,e);break;case hz.IN_HEAD:Cz(this,e);break;case hz.IN_HEAD_NO_SCRIPT:Pz(this,e);break;case hz.AFTER_HEAD:Dz(this,e);break;case hz.TEXT:this._insertCharacters(e);break;case hz.IN_TABLE:case hz.IN_TABLE_BODY:case hz.IN_ROW:Vz(this,e);break;case hz.IN_COLUMN_GROUP:Jz(this,e);break;case hz.AFTER_BODY:lV(this,e);break;case hz.AFTER_AFTER_BODY:cV(this,e)}}},{key:"onComment",value:function(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)Sz(this,e);else switch(this.insertionMode){case hz.INITIAL:case hz.BEFORE_HTML:case hz.BEFORE_HEAD:case hz.IN_HEAD:case hz.IN_HEAD_NO_SCRIPT:case hz.AFTER_HEAD:case hz.IN_BODY:case hz.IN_TABLE:case hz.IN_CAPTION:case hz.IN_COLUMN_GROUP:case hz.IN_TABLE_BODY:case hz.IN_ROW:case hz.IN_CELL:case hz.IN_SELECT:case hz.IN_SELECT_IN_TABLE:case hz.IN_TEMPLATE:case hz.IN_FRAMESET:case hz.AFTER_FRAMESET:Sz(this,e);break;case hz.IN_TABLE_TEXT:Kz(this,e);break;case hz.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case hz.AFTER_AFTER_BODY:case hz.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}},{key:"onDoctype",value:function(e){switch(this.skipNextNewLine=!1,this.insertionMode){case hz.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?az.DOCUMENT_MODE.QUIRKS:nz.getDocumentMode(t);nz.isConforming(t)||e._err(t,iz.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=hz.BEFORE_HTML}(this,e);break;case hz.BEFORE_HEAD:case hz.IN_HEAD:case hz.IN_HEAD_NO_SCRIPT:case hz.AFTER_HEAD:this._err(e,iz.ERR.misplacedDoctype);break;case hz.IN_TABLE_TEXT:Kz(this,e)}}},{key:"onStartTag",value:function(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,iz.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(rz.causesExit(t))uV(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===az.NS.MATHML?rz.adjustTokenMathMLAttrs(t):r===az.NS.SVG&&(rz.adjustTokenSVGTagName(t),rz.adjustTokenSVGAttrs(t)),rz.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}},{key:"_startTagOutsideForeignContent",value:function(e){switch(this.insertionMode){case hz.INITIAL:Az(this,e);break;case hz.BEFORE_HTML:!function(e,t){t.tagID===az.TAG_ID.HTML?(e._insertElement(t,az.NS.HTML),e.insertionMode=hz.BEFORE_HEAD):Oz(e,t)}(this,e);break;case hz.BEFORE_HEAD:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.HEAD:e._insertElement(t,az.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=hz.IN_HEAD;break;default:xz(e,t)}}(this,e);break;case hz.IN_HEAD:kz(this,e);break;case hz.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.BASEFONT:case az.TAG_ID.BGSOUND:case az.TAG_ID.HEAD:case az.TAG_ID.LINK:case az.TAG_ID.META:case az.TAG_ID.NOFRAMES:case az.TAG_ID.STYLE:kz(e,t);break;case az.TAG_ID.NOSCRIPT:e._err(t,iz.ERR.nestedNoscriptInHead);break;default:Pz(e,t)}}(this,e);break;case hz.AFTER_HEAD:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.BODY:e._insertElement(t,az.NS.HTML),e.framesetOk=!1,e.insertionMode=hz.IN_BODY;break;case az.TAG_ID.FRAMESET:e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_FRAMESET;break;case az.TAG_ID.BASE:case az.TAG_ID.BASEFONT:case az.TAG_ID.BGSOUND:case az.TAG_ID.LINK:case az.TAG_ID.META:case az.TAG_ID.NOFRAMES:case az.TAG_ID.SCRIPT:case az.TAG_ID.STYLE:case az.TAG_ID.TEMPLATE:case az.TAG_ID.TITLE:e._err(t,iz.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,az.TAG_ID.HEAD),kz(e,t),e.openElements.remove(e.headElement);break;case az.TAG_ID.HEAD:e._err(t,iz.ERR.misplacedStartTagForHeadElement);break;default:Dz(e,t)}}(this,e);break;case hz.IN_BODY:Gz(this,e);break;case hz.IN_TABLE:Xz(this,e);break;case hz.IN_TABLE_TEXT:Kz(this,e);break;case hz.IN_CAPTION:!function(e,t){const n=t.tagID;Qz.has(n)?e.openElements.hasInTableScope(az.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(az.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=hz.IN_TABLE,Xz(e,t)):Gz(e,t)}(this,e);break;case hz.IN_COLUMN_GROUP:Zz(this,e);break;case hz.IN_TABLE_BODY:eV(this,e);break;case hz.IN_ROW:nV(this,e);break;case hz.IN_CELL:!function(e,t){const n=t.tagID;Qz.has(n)?(e.openElements.hasInTableScope(az.TAG_ID.TD)||e.openElements.hasInTableScope(az.TAG_ID.TH))&&(e._closeTableCell(),nV(e,t)):Gz(e,t)}(this,e);break;case hz.IN_SELECT:iV(this,e);break;case hz.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===az.TAG_ID.CAPTION||n===az.TAG_ID.TABLE||n===az.TAG_ID.TBODY||n===az.TAG_ID.TFOOT||n===az.TAG_ID.THEAD||n===az.TAG_ID.TR||n===az.TAG_ID.TD||n===az.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(az.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):iV(e,t)}(this,e);break;case hz.IN_TEMPLATE:!function(e,t){switch(t.tagID){case az.TAG_ID.BASE:case az.TAG_ID.BASEFONT:case az.TAG_ID.BGSOUND:case az.TAG_ID.LINK:case az.TAG_ID.META:case az.TAG_ID.NOFRAMES:case az.TAG_ID.SCRIPT:case az.TAG_ID.STYLE:case az.TAG_ID.TEMPLATE:case az.TAG_ID.TITLE:kz(e,t);break;case az.TAG_ID.CAPTION:case az.TAG_ID.COLGROUP:case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:e.tmplInsertionModeStack[0]=hz.IN_TABLE,e.insertionMode=hz.IN_TABLE,Xz(e,t);break;case az.TAG_ID.COL:e.tmplInsertionModeStack[0]=hz.IN_COLUMN_GROUP,e.insertionMode=hz.IN_COLUMN_GROUP,Zz(e,t);break;case az.TAG_ID.TR:e.tmplInsertionModeStack[0]=hz.IN_TABLE_BODY,e.insertionMode=hz.IN_TABLE_BODY,eV(e,t);break;case az.TAG_ID.TD:case az.TAG_ID.TH:e.tmplInsertionModeStack[0]=hz.IN_ROW,e.insertionMode=hz.IN_ROW,nV(e,t);break;default:e.tmplInsertionModeStack[0]=hz.IN_BODY,e.insertionMode=hz.IN_BODY,Gz(e,t)}}(this,e);break;case hz.AFTER_BODY:!function(e,t){t.tagID===az.TAG_ID.HTML?Gz(e,t):lV(e,t)}(this,e);break;case hz.IN_FRAMESET:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.FRAMESET:e._insertElement(t,az.NS.HTML);break;case az.TAG_ID.FRAME:e._appendElement(t,az.NS.HTML),t.ackSelfClosing=!0;break;case az.TAG_ID.NOFRAMES:kz(e,t)}}(this,e);break;case hz.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.NOFRAMES:kz(e,t)}}(this,e);break;case hz.AFTER_AFTER_BODY:!function(e,t){t.tagID===az.TAG_ID.HTML?Gz(e,t):cV(e,t)}(this,e);break;case hz.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.NOFRAMES:kz(e,t)}}(this,e)}}},{key:"onEndTag",value:function(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===az.TAG_ID.P||t.tagID===az.TAG_ID.BR)return uV(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===az.NS.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}},{key:"_endTagOutsideForeignContent",value:function(e){switch(this.insertionMode){case hz.INITIAL:Az(this,e);break;case hz.BEFORE_HTML:!function(e,t){const n=t.tagID;(n===az.TAG_ID.HTML||n===az.TAG_ID.HEAD||n===az.TAG_ID.BODY||n===az.TAG_ID.BR)&&Oz(e,t)}(this,e);break;case hz.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===az.TAG_ID.HEAD||n===az.TAG_ID.BODY||n===az.TAG_ID.HTML||n===az.TAG_ID.BR?xz(e,t):e._err(t,iz.ERR.endTagWithoutMatchingOpenElement)}(this,e);break;case hz.IN_HEAD:!function(e,t){switch(t.tagID){case az.TAG_ID.HEAD:e.openElements.pop(),e.insertionMode=hz.AFTER_HEAD;break;case az.TAG_ID.BODY:case az.TAG_ID.BR:case az.TAG_ID.HTML:Cz(e,t);break;case az.TAG_ID.TEMPLATE:Iz(e,t);break;default:e._err(t,iz.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case hz.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case az.TAG_ID.NOSCRIPT:e.openElements.pop(),e.insertionMode=hz.IN_HEAD;break;case az.TAG_ID.BR:Pz(e,t);break;default:e._err(t,iz.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case hz.AFTER_HEAD:!function(e,t){switch(t.tagID){case az.TAG_ID.BODY:case az.TAG_ID.HTML:case az.TAG_ID.BR:Dz(e,t);break;case az.TAG_ID.TEMPLATE:Iz(e,t);break;default:e._err(t,iz.ERR.endTagWithoutMatchingOpenElement)}}(this,e);break;case hz.IN_BODY:Uz(this,e);break;case hz.TEXT:!function(e,t){var n;t.tagID===az.TAG_ID.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case hz.IN_TABLE:Yz(this,e);break;case hz.IN_TABLE_TEXT:Kz(this,e);break;case hz.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case az.TAG_ID.CAPTION:case az.TAG_ID.TABLE:e.openElements.hasInTableScope(az.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(az.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=hz.IN_TABLE,n===az.TAG_ID.TABLE&&Yz(e,t));break;case az.TAG_ID.BODY:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.HTML:case az.TAG_ID.TBODY:case az.TAG_ID.TD:case az.TAG_ID.TFOOT:case az.TAG_ID.TH:case az.TAG_ID.THEAD:case az.TAG_ID.TR:break;default:Uz(e,t)}}(this,e);break;case hz.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case az.TAG_ID.COLGROUP:e.openElements.currentTagId===az.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=hz.IN_TABLE);break;case az.TAG_ID.TEMPLATE:Iz(e,t);break;case az.TAG_ID.COL:break;default:Jz(e,t)}}(this,e);break;case hz.IN_TABLE_BODY:tV(this,e);break;case hz.IN_ROW:rV(this,e);break;case hz.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case az.TAG_ID.TD:case az.TAG_ID.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=hz.IN_ROW);break;case az.TAG_ID.TABLE:case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:case az.TAG_ID.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),rV(e,t));break;case az.TAG_ID.BODY:case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.HTML:break;default:Uz(e,t)}}(this,e);break;case hz.IN_SELECT:oV(this,e);break;case hz.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===az.TAG_ID.CAPTION||n===az.TAG_ID.TABLE||n===az.TAG_ID.TBODY||n===az.TAG_ID.TFOOT||n===az.TAG_ID.THEAD||n===az.TAG_ID.TR||n===az.TAG_ID.TD||n===az.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(az.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):oV(e,t)}(this,e);break;case hz.IN_TEMPLATE:!function(e,t){t.tagID===az.TAG_ID.TEMPLATE&&Iz(e,t)}(this,e);break;case hz.AFTER_BODY:sV(this,e);break;case hz.IN_FRAMESET:!function(e,t){t.tagID===az.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==az.TAG_ID.FRAMESET&&(e.insertionMode=hz.AFTER_FRAMESET))}(this,e);break;case hz.AFTER_FRAMESET:!function(e,t){t.tagID===az.TAG_ID.HTML&&(e.insertionMode=hz.AFTER_AFTER_FRAMESET)}(this,e);break;case hz.AFTER_AFTER_BODY:cV(this,e)}}},{key:"onEof",value:function(e){switch(this.insertionMode){case hz.INITIAL:Az(this,e);break;case hz.BEFORE_HTML:Oz(this,e);break;case hz.BEFORE_HEAD:xz(this,e);break;case hz.IN_HEAD:Cz(this,e);break;case hz.IN_HEAD_NO_SCRIPT:Pz(this,e);break;case hz.AFTER_HEAD:Dz(this,e);break;case hz.IN_BODY:case hz.IN_TABLE:case hz.IN_CAPTION:case hz.IN_COLUMN_GROUP:case hz.IN_TABLE_BODY:case hz.IN_ROW:case hz.IN_CELL:case hz.IN_SELECT:case hz.IN_SELECT_IN_TABLE:zz(this,e);break;case hz.TEXT:!function(e,t){e._err(t,iz.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case hz.IN_TABLE_TEXT:Kz(this,e);break;case hz.IN_TEMPLATE:aV(this,e);break;case hz.AFTER_BODY:case hz.IN_FRAMESET:case hz.AFTER_FRAMESET:case hz.AFTER_AFTER_BODY:case hz.AFTER_AFTER_FRAMESET:wz(this,e)}}},{key:"onWhitespaceCharacter",value:function(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===oz.CODE_POINTS.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case hz.IN_HEAD:case hz.IN_HEAD_NO_SCRIPT:case hz.AFTER_HEAD:case hz.TEXT:case hz.IN_COLUMN_GROUP:case hz.IN_SELECT:case hz.IN_SELECT_IN_TABLE:case hz.IN_FRAMESET:case hz.AFTER_FRAMESET:this._insertCharacters(e);break;case hz.IN_BODY:case hz.IN_CAPTION:case hz.IN_CELL:case hz.IN_TEMPLATE:case hz.AFTER_BODY:case hz.AFTER_AFTER_BODY:case hz.AFTER_AFTER_FRAMESET:Nz(this,e);break;case hz.IN_TABLE:case hz.IN_TABLE_BODY:case hz.IN_ROW:Vz(this,e);break;case hz.IN_TABLE_TEXT:qz(this,e)}}}],[{key:"parse",value:function(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}},{key:"getFragmentParser",value:function(e,t){const n=Object.assign(Object.assign({},dz),t);e??(e=n.treeAdapter.createElement(az.TAG_NAMES.TEMPLATE,az.NS.HTML,[]));const r=n.treeAdapter.createElement("documentmock",az.NS.HTML,[]),i=new this(n,r,e);return i.fragmentContextID===az.TAG_ID.TEMPLATE&&i.tmplInsertionModeStack.unshift(hz.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}}]),e}();function gz(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Hz(e,t),n}function yz(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function vz(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),s=n&&o>=uz;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=bz(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function bz(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function _z(e,t,n){const r=e.treeAdapter.getTagName(t),i=(0,az.getTagID)(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const r=e.treeAdapter.getNamespaceURI(t);i===az.TAG_ID.TEMPLATE&&r===az.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Tz(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function Ez(e,t){for(let n=0;n<cz;n++){const n=gz(e,t);if(!n)break;const r=yz(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;const i=vz(e,r,n.element),o=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),o&&_z(e,o,i),Tz(e,r,n)}}function Sz(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function wz(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function Az(e,t){e._err(t,iz.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,az.DOCUMENT_MODE.QUIRKS),e.insertionMode=hz.BEFORE_HTML,e._processToken(t)}function Oz(e,t){e._insertFakeRootElement(),e.insertionMode=hz.BEFORE_HEAD,e._processToken(t)}function xz(e,t){e._insertFakeElement(az.TAG_NAMES.HEAD,az.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=hz.IN_HEAD,e._processToken(t)}function kz(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.BASE:case az.TAG_ID.BASEFONT:case az.TAG_ID.BGSOUND:case az.TAG_ID.LINK:case az.TAG_ID.META:e._appendElement(t,az.NS.HTML),t.ackSelfClosing=!0;break;case az.TAG_ID.TITLE:e._switchToTextParsing(t,ZU.TokenizerMode.RCDATA);break;case az.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,ZU.TokenizerMode.RAWTEXT):(e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_HEAD_NO_SCRIPT);break;case az.TAG_ID.NOFRAMES:case az.TAG_ID.STYLE:e._switchToTextParsing(t,ZU.TokenizerMode.RAWTEXT);break;case az.TAG_ID.SCRIPT:e._switchToTextParsing(t,ZU.TokenizerMode.SCRIPT_DATA);break;case az.TAG_ID.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=hz.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(hz.IN_TEMPLATE);break;case az.TAG_ID.HEAD:e._err(t,iz.ERR.misplacedStartTagForHeadElement);break;default:Cz(e,t)}}function Iz(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==az.TAG_ID.TEMPLATE&&e._err(t,iz.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(az.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,iz.ERR.endTagWithoutMatchingOpenElement)}function Cz(e,t){e.openElements.pop(),e.insertionMode=hz.AFTER_HEAD,e._processToken(t)}function Pz(e,t){const n=t.type===sz.TokenType.EOF?iz.ERR.openElementsLeftAfterEof:iz.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=hz.IN_HEAD,e._processToken(t)}function Dz(e,t){e._insertFakeElement(az.TAG_NAMES.BODY,az.TAG_ID.BODY),e.insertionMode=hz.IN_BODY,Rz(e,t)}function Rz(e,t){switch(t.type){case sz.TokenType.CHARACTER:Mz(e,t);break;case sz.TokenType.WHITESPACE_CHARACTER:Nz(e,t);break;case sz.TokenType.COMMENT:Sz(e,t);break;case sz.TokenType.START_TAG:Gz(e,t);break;case sz.TokenType.END_TAG:Uz(e,t);break;case sz.TokenType.EOF:zz(e,t)}}function Nz(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Mz(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Lz(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,az.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function jz(e){const t=(0,sz.getTokenAttr)(e,az.ATTRS.TYPE);return null!=t&&t.toLowerCase()===lz}function Bz(e,t){e._switchToTextParsing(t,ZU.TokenizerMode.RAWTEXT)}function Fz(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML)}function Gz(e,t){switch(t.tagID){case az.TAG_ID.I:case az.TAG_ID.S:case az.TAG_ID.B:case az.TAG_ID.U:case az.TAG_ID.EM:case az.TAG_ID.TT:case az.TAG_ID.BIG:case az.TAG_ID.CODE:case az.TAG_ID.FONT:case az.TAG_ID.SMALL:case az.TAG_ID.STRIKE:case az.TAG_ID.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case az.TAG_ID.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(az.TAG_NAMES.A);n&&(Ez(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case az.TAG_ID.H1:case az.TAG_ID.H2:case az.TAG_ID.H3:case az.TAG_ID.H4:case az.TAG_ID.H5:case az.TAG_ID.H6:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),(0,az.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.P:case az.TAG_ID.DL:case az.TAG_ID.OL:case az.TAG_ID.UL:case az.TAG_ID.DIV:case az.TAG_ID.DIR:case az.TAG_ID.NAV:case az.TAG_ID.MAIN:case az.TAG_ID.MENU:case az.TAG_ID.ASIDE:case az.TAG_ID.CENTER:case az.TAG_ID.FIGURE:case az.TAG_ID.FOOTER:case az.TAG_ID.HEADER:case az.TAG_ID.HGROUP:case az.TAG_ID.DIALOG:case az.TAG_ID.DETAILS:case az.TAG_ID.ADDRESS:case az.TAG_ID.ARTICLE:case az.TAG_ID.SECTION:case az.TAG_ID.SUMMARY:case az.TAG_ID.FIELDSET:case az.TAG_ID.BLOCKQUOTE:case az.TAG_ID.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.LI:case az.TAG_ID.DD:case az.TAG_ID.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.tagIDs[r];if(n===az.TAG_ID.LI&&t===az.TAG_ID.LI||(n===az.TAG_ID.DD||n===az.TAG_ID.DT)&&(t===az.TAG_ID.DD||t===az.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==az.TAG_ID.ADDRESS&&t!==az.TAG_ID.DIV&&t!==az.TAG_ID.P&&e._isSpecialElement(e.openElements.items[r],t))break}e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.BR:case az.TAG_ID.IMG:case az.TAG_ID.WBR:case az.TAG_ID.AREA:case az.TAG_ID.EMBED:case az.TAG_ID.KEYGEN:Lz(e,t);break;case az.TAG_ID.HR:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._appendElement(t,az.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.RB:case az.TAG_ID.RTC:!function(e,t){e.openElements.hasInScope(az.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.RT:case az.TAG_ID.RP:!function(e,t){e.openElements.hasInScope(az.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(az.TAG_ID.RTC),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.PRE:case az.TAG_ID.LISTING:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case az.TAG_ID.XMP:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ZU.TokenizerMode.RAWTEXT)}(e,t);break;case az.TAG_ID.SVG:!function(e,t){e._reconstructActiveFormattingElements(),rz.adjustTokenSVGAttrs(t),rz.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,az.NS.SVG):e._insertElement(t,az.NS.SVG),t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case az.TAG_ID.BASE:case az.TAG_ID.LINK:case az.TAG_ID.META:case az.TAG_ID.STYLE:case az.TAG_ID.TITLE:case az.TAG_ID.SCRIPT:case az.TAG_ID.BGSOUND:case az.TAG_ID.BASEFONT:case az.TAG_ID.TEMPLATE:kz(e,t);break;case az.TAG_ID.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case az.TAG_ID.FORM:!function(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case az.TAG_ID.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(az.TAG_ID.NOBR)&&(Ez(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,az.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case az.TAG_ID.MATH:!function(e,t){e._reconstructActiveFormattingElements(),rz.adjustTokenMathMLAttrs(t),rz.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,az.NS.MATHML):e._insertElement(t,az.NS.MATHML),t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==az.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML),e.framesetOk=!1,e.insertionMode=hz.IN_TABLE}(e,t);break;case az.TAG_ID.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,az.NS.HTML),jz(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.PARAM:case az.TAG_ID.TRACK:case az.TAG_ID.SOURCE:!function(e,t){e._appendElement(t,az.NS.HTML),t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.IMAGE:!function(e,t){t.tagName=az.TAG_NAMES.IMG,t.tagID=az.TAG_ID.IMG,Lz(e,t)}(e,t);break;case az.TAG_ID.BUTTON:!function(e,t){e.openElements.hasInScope(az.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(az.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML),e.framesetOk=!1}(e,t);break;case az.TAG_ID.APPLET:case az.TAG_ID.OBJECT:case az.TAG_ID.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case az.TAG_ID.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ZU.TokenizerMode.RAWTEXT)}(e,t);break;case az.TAG_ID.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===hz.IN_TABLE||e.insertionMode===hz.IN_CAPTION||e.insertionMode===hz.IN_TABLE_BODY||e.insertionMode===hz.IN_ROW||e.insertionMode===hz.IN_CELL?hz.IN_SELECT_IN_TABLE:hz.IN_SELECT}(e,t);break;case az.TAG_ID.OPTION:case az.TAG_ID.OPTGROUP:!function(e,t){e.openElements.currentTagId===az.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,az.NS.HTML)}(e,t);break;case az.TAG_ID.NOEMBED:Bz(e,t);break;case az.TAG_ID.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_FRAMESET)}(e,t);break;case az.TAG_ID.TEXTAREA:!function(e,t){e._insertElement(t,az.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ZU.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=hz.TEXT}(e,t);break;case az.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?Bz(e,t):Fz(e,t);break;case az.TAG_ID.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(az.TAG_ID.P)&&e._closePElement(),e._insertElement(t,az.NS.HTML),e.tokenizer.state=ZU.TokenizerMode.PLAINTEXT}(e,t);break;case az.TAG_ID.COL:case az.TAG_ID.TH:case az.TAG_ID.TD:case az.TAG_ID.TR:case az.TAG_ID.HEAD:case az.TAG_ID.FRAME:case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:case az.TAG_ID.CAPTION:case az.TAG_ID.COLGROUP:break;default:Fz(e,t)}}function Hz(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const t=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==az.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(t)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(t,o))break}}function Uz(e,t){switch(t.tagID){case az.TAG_ID.A:case az.TAG_ID.B:case az.TAG_ID.I:case az.TAG_ID.S:case az.TAG_ID.U:case az.TAG_ID.EM:case az.TAG_ID.TT:case az.TAG_ID.BIG:case az.TAG_ID.CODE:case az.TAG_ID.FONT:case az.TAG_ID.NOBR:case az.TAG_ID.SMALL:case az.TAG_ID.STRIKE:case az.TAG_ID.STRONG:Ez(e,t);break;case az.TAG_ID.P:!function(e){e.openElements.hasInButtonScope(az.TAG_ID.P)||e._insertFakeElement(az.TAG_NAMES.P,az.TAG_ID.P),e._closePElement()}(e);break;case az.TAG_ID.DL:case az.TAG_ID.UL:case az.TAG_ID.OL:case az.TAG_ID.DIR:case az.TAG_ID.DIV:case az.TAG_ID.NAV:case az.TAG_ID.PRE:case az.TAG_ID.MAIN:case az.TAG_ID.MENU:case az.TAG_ID.ASIDE:case az.TAG_ID.BUTTON:case az.TAG_ID.CENTER:case az.TAG_ID.FIGURE:case az.TAG_ID.FOOTER:case az.TAG_ID.HEADER:case az.TAG_ID.HGROUP:case az.TAG_ID.DIALOG:case az.TAG_ID.ADDRESS:case az.TAG_ID.ARTICLE:case az.TAG_ID.DETAILS:case az.TAG_ID.SECTION:case az.TAG_ID.SUMMARY:case az.TAG_ID.LISTING:case az.TAG_ID.FIELDSET:case az.TAG_ID.BLOCKQUOTE:case az.TAG_ID.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case az.TAG_ID.LI:!function(e){e.openElements.hasInListItemScope(az.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(az.TAG_ID.LI),e.openElements.popUntilTagNamePopped(az.TAG_ID.LI))}(e);break;case az.TAG_ID.DD:case az.TAG_ID.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case az.TAG_ID.H1:case az.TAG_ID.H2:case az.TAG_ID.H3:case az.TAG_ID.H4:case az.TAG_ID.H5:case az.TAG_ID.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case az.TAG_ID.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(az.TAG_NAMES.BR,az.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case az.TAG_ID.BODY:!function(e,t){if(e.openElements.hasInScope(az.TAG_ID.BODY)&&(e.insertionMode=hz.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case az.TAG_ID.HTML:!function(e,t){e.openElements.hasInScope(az.TAG_ID.BODY)&&(e.insertionMode=hz.AFTER_BODY,sV(e,t))}(e,t);break;case az.TAG_ID.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(az.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(az.TAG_ID.FORM):n&&e.openElements.remove(n))}(e);break;case az.TAG_ID.APPLET:case az.TAG_ID.OBJECT:case az.TAG_ID.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case az.TAG_ID.TEMPLATE:Iz(e,t);break;default:Hz(e,t)}}function zz(e,t){e.tmplInsertionModeStack.length>0?aV(e,t):wz(e,t)}function Vz(e,t){if(fz.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=hz.IN_TABLE_TEXT,t.type){case sz.TokenType.CHARACTER:$z(e,t);break;case sz.TokenType.WHITESPACE_CHARACTER:qz(e,t)}else Wz(e,t)}function Xz(e,t){switch(t.tagID){case az.TAG_ID.TD:case az.TAG_ID.TH:case az.TAG_ID.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(az.TAG_NAMES.TBODY,az.TAG_ID.TBODY),e.insertionMode=hz.IN_TABLE_BODY,eV(e,t)}(e,t);break;case az.TAG_ID.STYLE:case az.TAG_ID.SCRIPT:case az.TAG_ID.TEMPLATE:kz(e,t);break;case az.TAG_ID.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(az.TAG_NAMES.COLGROUP,az.TAG_ID.COLGROUP),e.insertionMode=hz.IN_COLUMN_GROUP,Zz(e,t)}(e,t);break;case az.TAG_ID.FORM:!function(e,t){!e.formElement&&0===e.openElements.tmplCount&&(e._insertElement(t,az.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case az.TAG_ID.TABLE:!function(e,t){e.openElements.hasInTableScope(az.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(az.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_TABLE_BODY}(e,t);break;case az.TAG_ID.INPUT:!function(e,t){jz(t)?e._appendElement(t,az.NS.HTML):Wz(e,t),t.ackSelfClosing=!0}(e,t);break;case az.TAG_ID.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_CAPTION}(e,t);break;case az.TAG_ID.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_COLUMN_GROUP}(e,t);break;default:Wz(e,t)}}function Yz(e,t){switch(t.tagID){case az.TAG_ID.TABLE:e.openElements.hasInTableScope(az.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(az.TAG_ID.TABLE),e._resetInsertionMode());break;case az.TAG_ID.TEMPLATE:Iz(e,t);break;case az.TAG_ID.BODY:case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.HTML:case az.TAG_ID.TBODY:case az.TAG_ID.TD:case az.TAG_ID.TFOOT:case az.TAG_ID.TH:case az.TAG_ID.THEAD:case az.TAG_ID.TR:break;default:Wz(e,t)}}function Wz(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Rz(e,t),e.fosterParentingEnabled=n}function qz(e,t){e.pendingCharacterTokens.push(t)}function $z(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Kz(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Wz(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}YH.Parser=mz;const Qz=new Set([az.TAG_ID.CAPTION,az.TAG_ID.COL,az.TAG_ID.COLGROUP,az.TAG_ID.TBODY,az.TAG_ID.TD,az.TAG_ID.TFOOT,az.TAG_ID.TH,az.TAG_ID.THEAD,az.TAG_ID.TR]);function Zz(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.COL:e._appendElement(t,az.NS.HTML),t.ackSelfClosing=!0;break;case az.TAG_ID.TEMPLATE:kz(e,t);break;default:Jz(e,t)}}function Jz(e,t){e.openElements.currentTagId===az.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=hz.IN_TABLE,e._processToken(t))}function eV(e,t){switch(t.tagID){case az.TAG_ID.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_ROW;break;case az.TAG_ID.TH:case az.TAG_ID.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(az.TAG_NAMES.TR,az.TAG_ID.TR),e.insertionMode=hz.IN_ROW,nV(e,t);break;case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE,Xz(e,t));break;default:Xz(e,t)}}function tV(e,t){const n=t.tagID;switch(t.tagID){case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE);break;case az.TAG_ID.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE,Yz(e,t));break;case az.TAG_ID.BODY:case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.HTML:case az.TAG_ID.TD:case az.TAG_ID.TH:case az.TAG_ID.TR:break;default:Yz(e,t)}}function nV(e,t){switch(t.tagID){case az.TAG_ID.TH:case az.TAG_ID.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,az.NS.HTML),e.insertionMode=hz.IN_CELL,e.activeFormattingElements.insertMarker();break;case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:case az.TAG_ID.TR:e.openElements.hasInTableScope(az.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE_BODY,eV(e,t));break;default:Xz(e,t)}}function rV(e,t){switch(t.tagID){case az.TAG_ID.TR:e.openElements.hasInTableScope(az.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE_BODY);break;case az.TAG_ID.TABLE:e.openElements.hasInTableScope(az.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE_BODY,tV(e,t));break;case az.TAG_ID.TBODY:case az.TAG_ID.TFOOT:case az.TAG_ID.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(az.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=hz.IN_TABLE_BODY,tV(e,t));break;case az.TAG_ID.BODY:case az.TAG_ID.CAPTION:case az.TAG_ID.COL:case az.TAG_ID.COLGROUP:case az.TAG_ID.HTML:case az.TAG_ID.TD:case az.TAG_ID.TH:break;default:Yz(e,t)}}function iV(e,t){switch(t.tagID){case az.TAG_ID.HTML:Gz(e,t);break;case az.TAG_ID.OPTION:e.openElements.currentTagId===az.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,az.NS.HTML);break;case az.TAG_ID.OPTGROUP:e.openElements.currentTagId===az.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===az.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,az.NS.HTML);break;case az.TAG_ID.INPUT:case az.TAG_ID.KEYGEN:case az.TAG_ID.TEXTAREA:case az.TAG_ID.SELECT:e.openElements.hasInSelectScope(az.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(az.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==az.TAG_ID.SELECT&&e._processStartTag(t));break;case az.TAG_ID.SCRIPT:case az.TAG_ID.TEMPLATE:kz(e,t)}}function oV(e,t){switch(t.tagID){case az.TAG_ID.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===az.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===az.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===az.TAG_ID.OPTGROUP&&e.openElements.pop();break;case az.TAG_ID.OPTION:e.openElements.currentTagId===az.TAG_ID.OPTION&&e.openElements.pop();break;case az.TAG_ID.SELECT:e.openElements.hasInSelectScope(az.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(az.TAG_ID.SELECT),e._resetInsertionMode());break;case az.TAG_ID.TEMPLATE:Iz(e,t)}}function aV(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(az.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):wz(e,t)}function sV(e,t){var n;if(t.tagID===az.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=hz.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===az.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n||!n.endTag)&&e._setEndLocation(r,t)}}else lV(e,t)}function lV(e,t){e.insertionMode=hz.IN_BODY,Rz(e,t)}function cV(e,t){e.insertionMode=hz.IN_BODY,Rz(e,t)}function uV(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==az.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}var hV={};Object.defineProperty(hV,"__esModule",{value:!0}),hV.serializeOuter=hV.serialize=void 0;const pV=rU,fV=pM,dV=FU,mV=new Set([pV.TAG_NAMES.AREA,pV.TAG_NAMES.BASE,pV.TAG_NAMES.BASEFONT,pV.TAG_NAMES.BGSOUND,pV.TAG_NAMES.BR,pV.TAG_NAMES.COL,pV.TAG_NAMES.EMBED,pV.TAG_NAMES.FRAME,pV.TAG_NAMES.HR,pV.TAG_NAMES.IMG,pV.TAG_NAMES.INPUT,pV.TAG_NAMES.KEYGEN,pV.TAG_NAMES.LINK,pV.TAG_NAMES.META,pV.TAG_NAMES.PARAM,pV.TAG_NAMES.SOURCE,pV.TAG_NAMES.TRACK,pV.TAG_NAMES.WBR]);function gV(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===pV.NS.HTML&&mV.has(t.treeAdapter.getTagName(e))}const yV={treeAdapter:dV.defaultTreeAdapter,scriptingEnabled:!0};function vV(e,t){let n="";const r=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===pV.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===pV.NS.HTML?t.treeAdapter.getTemplateContent(e):e,i=t.treeAdapter.getChildNodes(r);if(i)for(const o of i)n+=bV(o,t);return n}function bV(e,t){return t.treeAdapter.isElementNode(e)?function(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${function(e,t){let{treeAdapter:n}=t,r="";for(const i of n.getAttrList(e)){if(r+=" ",i.namespace)switch(i.namespace){case pV.NS.XML:r+=`xml:${i.name}`;break;case pV.NS.XMLNS:"xmlns"!==i.name&&(r+="xmlns:"),r+=i.name;break;case pV.NS.XLINK:r+=`xlink:${i.name}`;break;default:r+=`${i.prefix}:${i.name}`}else r+=i.name;r+=`="${(0,fV.escapeAttribute)(i.value)}"`}return r}(e,t)}>${gV(e,t)?"":`${vV(e,t)}</${n}>`}`}(e,t):t.treeAdapter.isTextNode(e)?function(e,t){const{treeAdapter:n}=t,r=n.getTextNodeContent(e),i=n.getParentNode(e),o=i&&n.isElementNode(i)&&n.getTagName(i);return o&&n.getNamespaceURI(i)===pV.NS.HTML&&(0,pV.hasUnescapedText)(o,t.scriptingEnabled)?r:(0,fV.escapeText)(r)}(e,t):t.treeAdapter.isCommentNode(e)?function(e,t){let{treeAdapter:n}=t;return`\x3c!--${n.getCommentNodeContent(e)}--\x3e`}(e,t):t.treeAdapter.isDocumentTypeNode(e)?function(e,t){let{treeAdapter:n}=t;return`<!DOCTYPE ${n.getDocumentTypeNodeName(e)}>`}(e,t):""}hV.serialize=function(e,t){const n=Object.assign(Object.assign({},yV),t);return gV(e,n)?"":vV(e,n)},hV.serializeOuter=function(e,t){return bV(e,Object.assign(Object.assign({},yV),t))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=YH;var n=FU;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var r=YH;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return r.Parser}});var i=hV;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return i.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return i.serializeOuter}});var o=KH;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return o.ERR}}),e.foreignContent=$U,e.html=rU,e.Token=nU;var a=WH;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return a.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return a.TokenizerMode}}),e.parse=function(e,n){return t.Parser.parse(e,n)},e.parseFragment=function(e,n,r){"string"==typeof e&&(r=n,n=e,e=null);const i=t.Parser.getFragmentParser(e,r);return i.tokenizer.write(n,!0),i.getFragment()}}(XH),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adapter=e.serializeDoctypeContent=void 0;const t=XH,n=NN;function r(e){return new n.Text(e)}function i(e){const t=e.includes('"')?"'":'"';return t+e+t}function o(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=` PUBLIC ${i(t)}`:n&&(r+=" SYSTEM"),n&&(r+=` ${i(n)}`),r}e.serializeDoctypeContent=o,e.adapter={isCommentNode:n.isComment,isElementNode:n.isTag,isTextNode:n.isText,createDocument(){const e=new n.Document([]);return e["x-mode"]=t.html.DOCUMENT_MODE.NO_QUIRKS,e},createDocumentFragment:()=>new n.Document([]),createElement(e,t,r){const i=Object.create(null),o=Object.create(null),a=Object.create(null);for(let n=0;n<r.length;n++){const e=r[n].name;i[e]=r[n].value,o[e]=r[n].namespace,a[e]=r[n].prefix}const s=new n.Element(e,i,[]);return s.namespace=t,s["x-attribsNamespace"]=o,s["x-attribsPrefix"]=a,s},createCommentNode:e=>new n.Comment(e),appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const r=e.children.indexOf(n),{prev:i}=n;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(r,0,t),t.parent=e},setTemplateContent(t,n){e.adapter.appendChild(t,n)},getTemplateContent:e=>e.children[0],setDocumentType(t,r,i,a){const s=o(r,i,a);let l=t.children.find((e=>(0,n.isDirective)(e)&&"!doctype"===e.name));l?l.data=s??null:(l=new n.ProcessingInstruction("!doctype",s),e.adapter.appendChild(t,l)),l["x-name"]=r??void 0,l["x-publicId"]=i??void 0,l["x-systemId"]=a??void 0},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode:e=>e["x-mode"],detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:r}=e;e.prev=null,e.next=null,n&&(n.next=r),r&&(r.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(t,i){const o=t.children[t.children.length-1];o&&(0,n.isText)(o)?o.data+=i:e.adapter.appendChild(t,r(i))},insertTextBefore(t,i,o){const a=t.children[t.children.indexOf(o)-1];a&&(0,n.isText)(a)?a.data+=i:e.adapter.insertBefore(t,r(i),o)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const r=t[n].name;typeof e.attribs[r]>"u"&&(e.attribs[r]=t[n].value,e["x-attribsNamespace"][r]=t[n].namespace,e["x-attribsPrefix"][r]=t[n].prefix)}},getFirstChild:e=>e.children[0],getChildNodes:e=>e.children,getParentNode:e=>e.parent,getAttrList:e=>e.attributes,getTagName:e=>e.name,getNamespaceURI:e=>e.namespace,getTextNodeContent:e=>e.data,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName(e){var t;return null!==(t=e["x-name"])&&void 0!==t?t:""},getDocumentTypeNodePublicId(e){var t;return null!==(t=e["x-publicId"])&&void 0!==t?t:""},getDocumentTypeNodeSystemId(e){var t;return null!==(t=e["x-systemId"])&&void 0!==t?t:""},isDocumentTypeNode:e=>(0,n.isDirective)(e)&&"!doctype"===e.name,setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){null!=t.endOffset&&(e.endIndex=t.endOffset),e.sourceCodeLocation=Object.assign(Object.assign({},e.sourceCodeLocation),t)}}}(VH);var _V=Is&&Is.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(dF,"__esModule",{value:!0}),dF.renderWithParse5=dF.parseWithParse5=void 0;var TV=NN,EV=mF,SV=VH;dF.parseWithParse5=function(e,t,n,r){var i={scriptingEnabled:"boolean"!=typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:SV.adapter,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?(0,EV.parse)(e,i):(0,EV.parseFragment)(r,e,i)};var wV={treeAdapter:SV.adapter};dF.renderWithParse5=function(e){for(var t,n=("length"in e?e:[e]),r=0;r<n.length;r+=1){var i=n[r];(0,TV.isDocument)(i)&&(t=Array.prototype.splice).call.apply(t,_V([n,r,1],i.children,!1))}var o="";for(r=0;r<n.length;r+=1){i=n[r];o+=(0,EV.serializeOuter)(i,wV)}return o};var AV={},OV={},xV={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t,n,r,i,o=oM;function a(e){return e===t.Space||e===t.NewLine||e===t.Tab||e===t.FormFeed||e===t.CarriageReturn}function s(e){return e===t.Slash||e===t.Gt||a(e)}function l(e){return e>=t.Zero&&e<=t.Nine}(n=t||(t={}))[n.Tab=9]="Tab",n[n.NewLine=10]="NewLine",n[n.FormFeed=12]="FormFeed",n[n.CarriageReturn=13]="CarriageReturn",n[n.Space=32]="Space",n[n.ExclamationMark=33]="ExclamationMark",n[n.Number=35]="Number",n[n.Amp=38]="Amp",n[n.SingleQuote=39]="SingleQuote",n[n.DoubleQuote=34]="DoubleQuote",n[n.Dash=45]="Dash",n[n.Slash=47]="Slash",n[n.Zero=48]="Zero",n[n.Nine=57]="Nine",n[n.Semi=59]="Semi",n[n.Lt=60]="Lt",n[n.Eq=61]="Eq",n[n.Gt=62]="Gt",n[n.Questionmark=63]="Questionmark",n[n.UpperA=65]="UpperA",n[n.LowerA=97]="LowerA",n[n.UpperF=70]="UpperF",n[n.LowerF=102]="LowerF",n[n.UpperZ=90]="UpperZ",n[n.LowerZ=122]="LowerZ",n[n.LowerX=120]="LowerX",n[n.OpeningSquareBracket=91]="OpeningSquareBracket",function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(r||(r={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(i=e.QuoteType||(e.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},u=function(){function e(e,t){var n=e.xmlMode,i=void 0!==n&&n,a=e.decodeEntities,s=void 0===a||a;this.cbs=t,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=i,this.decodeEntities=s,this.entityTrie=i?o.xmlDecodeTree:o.htmlDecodeTree}return e.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===t.Amp&&(this.state=r.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?s(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===t.Gt||a(e)){var n=this.index-this.currentSequence.length;if(this.sectionStart<n){var i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}return this.isSpecial=!1,this.sectionStart=n+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===c.TitleEnd?this.decodeEntities&&e===t.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===t.Lt)},e.prototype.stateCDATASequence=function(e){e===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!s(e):function(e){return e>=t.LowerA&&e<=t.LowerZ||e>=t.UpperA&&e<=t.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=r.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===t.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===t.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var n=32|e;this.sectionStart=this.index,this.xmlMode||n!==c.TitleEnd[2]?this.state=this.xmlMode||n!==c.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(c.TitleEnd,3)}else e===t.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){s(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){a(e)||(e===t.Gt?this.state=r.Text:(this.state=this.isTagStartChar(e)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===t.Gt||a(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===t.Slash?this.state=r.InSelfClosingTag:a(e)||(this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(e)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===t.Eq||s(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===t.Eq?this.state=r.BeforeAttributeValue:e===t.Slash||e===t.Gt?(this.cbs.onattribend(i.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):a(e)||(this.cbs.onattribend(i.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===t.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):e===t.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):a(e)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,n){e===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===t.DoubleQuote?i.Double:i.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,t.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,t.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){a(e)||e===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===t.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=e===t.Dash?r.BeforeComment:r.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===t.Dash?(this.state=r.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):t===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===t.Number?this.state=r.BeforeNumericEntity:e===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,o.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var n=this.trieCurrent&o.BinTrieFlags.VALUE_LENGTH;if(n){var r=(n>>14)-1;if(this.allowLegacyEntity()||e===t.Semi){var i=this.index-this.entityExcess+1;i>this.sectionStart&&this.emitPartial(this.sectionStart,i),this.entityResult=this.trieIndex,this.trieIndex+=r,this.entityExcess=0,this.sectionStart=this.index+1,0===r&&this.emitNamedEntity()}else this.trieIndex+=r}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&o.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~o.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===t.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+ +(this.state===r.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,o.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):l(e)?(this.entityResult=10*this.entityResult+(e-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):l(e)?(this.entityResult=16*this.entityResult+(e-t.Zero),this.entityExcess++):function(e){return e>=t.UpperA&&e<=t.UpperF||e>=t.LowerA&&e<=t.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-t.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===r.InAttributeValueDq||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(e);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case r.InSpecialTag:this.stateInSpecialTag(e);break;case r.CDATASequence:this.stateCDATASequence(e);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case r.InAttributeName:this.stateInAttributeName(e);break;case r.InCommentLike:this.stateInCommentLike(e);break;case r.InSpecialComment:this.stateInSpecialComment(e);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case r.InTagName:this.stateInTagName(e);break;case r.InClosingTagName:this.stateInClosingTagName(e);break;case r.BeforeTagName:this.stateBeforeTagName(e);break;case r.AfterAttributeName:this.stateAfterAttributeName(e);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case r.InDeclaration:this.stateInDeclaration(e);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case r.BeforeComment:this.stateBeforeComment(e);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case r.InNamedEntity:this.stateInNamedEntity(e);break;case r.BeforeEntity:this.stateBeforeEntity(e);break;case r.InHexEntity:this.stateInHexEntity(e);break;case r.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()||this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();e.default=u}(xV);var kV=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),IV=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),CV=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&kV(t,e,n);return IV(t,e),t};Object.defineProperty(OV,"__esModule",{value:!0}),OV.Parser=void 0;var PV=CV(xV),DV=oM,RV=new Set(["input","option","optgroup","select","button","datalist","textarea"]),NV=new Set(["p"]),MV=new Set(["thead","tbody"]),LV=new Set(["dd","dt"]),jV=new Set(["rt","rp"]),BV=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",NV],["h1",NV],["h2",NV],["h3",NV],["h4",NV],["h5",NV],["h6",NV],["select",RV],["input",RV],["output",RV],["button",RV],["datalist",RV],["textarea",RV],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",LV],["dt",LV],["address",NV],["article",NV],["aside",NV],["blockquote",NV],["details",NV],["div",NV],["dl",NV],["fieldset",NV],["figcaption",NV],["figure",NV],["footer",NV],["form",NV],["header",NV],["hr",NV],["main",NV],["nav",NV],["ol",NV],["pre",NV],["section",NV],["table",NV],["ul",NV],["rt",jV],["rp",jV],["tbody",MV],["tfoot",MV]]),FV=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),GV=new Set(["math","svg"]),HV=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),UV=/\s|\//,zV=function(){function e(e,t){var n,r,i,o,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=e??{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:PV.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.ontext=function(e,t){var n,r,i=this.getSlice(e,t);this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,i),this.startIndex=t},e.prototype.ontextentity=function(e){var t,n,r=this.tokenizer.getSectionStart();this.endIndex=r-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,(0,DV.fromCodePoint)(e)),this.startIndex=r},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&FV.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},e.prototype.emitOpenTag=function(e){var t,n,r,i;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&BV.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var a=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,a,!0)}this.isVoidElement(e)||(this.stack.push(e),GV.has(e)?this.foreignContext.push(!0):HV.has(e)&&this.foreignContext.push(!1)),null===(i=(r=this.cbs).onopentagname)||void 0===i||i.call(r,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var n,r,i,o,a,s;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(GV.has(l)||HV.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))!this.options.xmlMode&&"br"===l&&(null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,"br"),null===(o=(i=this.cbs).onopentag)||void 0===o||o.call(i,"br",{},!0),null===(s=(a=this.cbs).onclosetag)||void 0===s||s.call(a,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var u=this.stack.length-c;u--;)this.cbs.onclosetag(this.stack.pop(),0!==u);else this.stack.length=c;else!this.options.xmlMode&&"p"===l&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,n,r=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===r&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,r,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,DV.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var n,r;this.endIndex=t,null===(r=(n=this.cbs).onattribute)||void 0===r||r.call(n,this.attribname,this.attribvalue,e===PV.QuoteType.Double?'"':e===PV.QuoteType.Single?"'":e===PV.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(UV),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(n))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(n))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,n){var r,i,o,a;this.endIndex=t,null===(i=(r=this.cbs).oncomment)||void 0===i||i.call(r,this.getSlice(e,t-n)),null===(a=(o=this.cbs).oncommentend)||void 0===a||a.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,n){var r,i,o,a,s,l,c,u,h,p;this.endIndex=t;var f=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(r=this.cbs).oncdatastart)||void 0===i||i.call(r),null===(a=(o=this.cbs).ontext)||void 0===a||a.call(o,f),null===(l=(s=this.cbs).oncdataend)||void 0===l||l.call(s)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,"[CDATA[".concat(f,"]]")),null===(p=(h=this.cbs).oncommentend)||void 0===p||p.call(h)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();OV.Parser=zV,function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var o=OV,a=OV;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}});var s=NN,l=NN;function c(e,t){var n=new s.DomHandler(void 0,t);return new o.Parser(n,t).end(e),n.root}function u(e,t){return c(e,t).children}Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}}),e.parseDocument=c,e.parseDOM=u,e.createDomStream=function(e,t,n){var r=new s.DomHandler(e,t,n);return new o.Parser(r,t)};var h=xV;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),e.ElementType=r(MN);var p=DN,f=DN;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return f.getFeed}});var d={xmlMode:!0};e.parseFeed=function(e,t){return void 0===t&&(t=d),(0,p.getFeed)(u(e,t))},e.DomUtils=r(DN)}(AV),function(e){var t=Is&&Is.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Is&&Is.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Is&&Is.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)},i=Is&&Is.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},o=Is&&Is.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.root=e.parseHTML=e.merge=e.contains=e.text=e.xml=e.html=e.load=void 0,r(ON,e);var a=xN,s=kB,l=dF,c=o(rM),u=AV,h=(0,s.getParse)((function(e,t,n,r){return t.xmlMode||t._useHtmlParser2?(0,u.parseDocument)(e,t):(0,l.parseWithParse5)(e,t,n,r)}));e.load=(0,a.getLoad)(h,(function(e,t){return t.xmlMode||t._useHtmlParser2?(0,c.default)(e,t):(0,l.renderWithParse5)(e)})),e.default=(0,e.load)([]);var p=PN;Object.defineProperty(e,"html",{enumerable:!0,get:function(){return p.html}}),Object.defineProperty(e,"xml",{enumerable:!0,get:function(){return p.xml}}),Object.defineProperty(e,"text",{enumerable:!0,get:function(){return p.text}});var f=i(PN);e.contains=f.contains,e.merge=f.merge,e.parseHTML=f.parseHTML,e.root=f.root}(AN);var VV={},XV={},YV=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function WV(e,t){return new Error(String(e)+" is a required method of "+String(t)+", but was not implemented.")}var qV=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options={}}return YV(e,[{key:"createRenderer",value:function(){return function(e){throw WV("createRenderer","EnzymeAdapter")}}()},{key:"nodeToElement",value:function(){return function(e){throw WV("nodeToElement","EnzymeAdapter")}}()},{key:"matchesElementType",value:function(){return function(e,t){return e?e.type===t:e}}()},{key:"isValidElement",value:function(){return function(e){throw WV("isValidElement","EnzymeAdapter")}}()},{key:"createElement",value:function(){return function(e,t){throw WV("createElement","EnzymeAdapter")}}()},{key:"invokeSetStateCallback",value:function(){return function(e,t){t.call(e)}}()}]),e}();qV.MODES={STRING:"string",MOUNT:"mount",SHALLOW:"shallow"};var $V=qV;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(!e)throw new Error("\n      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.\n      To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n      before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n      corresponding to the library currently being tested. For example:\n\n      import Adapter from 'enzyme-adapter-react-15';\n\n      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n    ");if("function"==typeof e)throw Object.getPrototypeOf(e)===n.default?new Error("\n        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -\n        you provided an adapter *constructor*.\n        To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n        before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n        corresponding to the library currently being tested. For example:\n\n        import Adapter from 'enzyme-adapter-react-15';\n\n        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n      "):new Error("\n      Enzyme Internal Error: Enzyme expects an adapter to be configured -\n      an enzyme adapter must be an object instance; you provided a function.\n      To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n      before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n      corresponding to the library currently being tested. For example:\n\n      import Adapter from 'enzyme-adapter-react-15';\n\n      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n    ");if(!(e instanceof n.default))throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class")};var t,n=(t=$V)&&t.__esModule?t:{default:t}}(XV),Object.defineProperty(VV,"__esModule",{value:!0}),VV.get=function(){return(0,KV.default)({},JV)},VV.merge=eX,VV.reset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};JV={},eX(e)};var KV=ZV(ck),QV=ZV(XV);function ZV(e){return e&&e.__esModule?e:{default:e}}var JV={};function eX(e){e.adapter&&(0,QV.default)(e.adapter),(0,KV.default)(JV,e)}var tX={},nX={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&Object.keys(t).every((function(r){if(!e.propertyIsEnumerable(r))return!1;var i=t[r],o=e[r];return!("object"==typeof i&&null!==i?!n(o,i):o!==i)}))}));t.default=n,e.exports=t.default}(nX,nX.exports);var rX=nX.exports,iX={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.adapter)return(0,n.default)(e.adapter),e.adapter;var t=(0,r.get)().adapter;return(0,n.default)(t),t};var t,n=(t=XV)&&t.__esModule?t:{default:t},r=VV}(iX),Object.defineProperty(tX,"__esModule",{value:!0});var oX=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();tX.propsOfNode=mX,tX.childrenOfNode=gX,tX.hasClassName=function(e,t){var n=mX(e).className||"";return n=String(n).replace(/\s/g," "),(0,hX.default)(t)?t.test(n):(" "+String(n)+" ").indexOf(" "+String(t)+" ")>-1},tX.treeForEach=yX,tX.treeFilter=vX,tX.findParentNode=function(e,t){var n=vX(e,(function(e){return!!e.rendered&&-1!==gX(e).indexOf(t)}));return n[0]||null},tX.pathToNode=_X,tX.parentsOfNode=function(e,t){return(_X(e,t)||[]).reverse()},tX.nodeHasId=function(e,t){return mX(e).id===t},tX.nodeMatchesObjectProps=function(e,t){return(0,cX.default)(mX(e),function(e){return(0,lX.default)(e).reduce((function(e,t){var n=oX(t,2),r=n[0],i=n[1];return(0,aX.default)({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,function(e){return typeof e<"u"?e:TX}(i)))}),{})}(t))},tX.getTextFromNode=function e(t){return SX(t,{recurse:e,getCustom:function(){return function(e){var t=e.type;return"<"+String(t.displayName||(0,uX.default)(t))+" />"}}()})},tX.getTextFromHostNodes=function e(t,n){return SX(t,{recurse:function(){function t(t){return e(t,n)}return t}(),handleHostNodes:function(){return function(e){return[].concat(n.nodeToHostNode(e,!0)).map(EX).join("")}}()})},tX.getHTMLFromHostNodes=function e(t,n){return SX(t,{recurse:function(){function t(t){return e(t,n)}return t}(),handleHostNodes:function(){return function(e){return[].concat(n.nodeToHostNode(e,!0)).map(wX).join("")}}(),nullRenderReturnsNull:!0})};var aX=fX(ck),sX=fX(uR),lX=fX(zR),cX=fX(rX),uX=fX(wN),hX=fX(LP),pX=fX(iX);function fX(e){return e&&e.__esModule?e:{default:e}}function dX(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function mX(e){return e&&e.props||{}}function gX(e){if(!e)return[];var t=(0,pX.default)(),n=t.isFragment&&"function"==typeof t.isFragment,r=Array.isArray(e.rendered)?(0,sX.default)(e.rendered,1):[e.rendered];return n?(0,sX.default)(r.map((function(e){return t.isFragment(e)?gX(e):e})),1):r}function yX(e,t){e&&t(e),gX(e).forEach((function(e){return yX(e,t)}))}function vX(e,t){var n=[];return yX(e,(function(e){t(e)&&n.push(e)})),n}function bX(e,t){return e.filter((function(e){return 0!==vX(e,t).length}))}function _X(e,t){for(var n=[t],r=[],i=function(t){return e===t};n.length;){var o=n.pop(),a=gX(o);if(o===e)return bX(r,i);r.push(o),0===a.length&&r.pop(),n.push.apply(n,dX(a))}return null}var TX={};function EX(e){return"string"==typeof e?String(e||""):e&&e.textContent||""}function SX(e,t){var n=t.getCustom,r=t.handleHostNodes,i=t.recurse,o=t.nullRenderReturnsNull,a=void 0!==o&&o;return null==e?"":"string"==typeof e||"number"==typeof e?String(e):n&&e.type&&"function"==typeof e.type?n(e):r&&"host"===e.nodeType?r(e):null==e.rendered&&a?null:gX(e).map(i).join("")}function wX(e){return null==e?null:e.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g,"")}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shallowEqual=e.ITERATOR_SYMBOL=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getAdapter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"),(0,g.default)(e)},e.makeOptions=function(e){var t=(0,d.get)(),n=t.attachTo,r=t.hydrateIn,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["attachTo","hydrateIn"]);_(n,r);var a=e.attachTo,s=e.hydrateIn;_(a,s);var l=s||r||n||a||void 0,c=s||r||void 0,u=(0,i.default)({},l&&{attachTo:l},c&&{hydrateIn:c});return(0,i.default)({},o,e,u)},e.isCustomComponent=function(e,t){return(0,y.default)(t),t.isCustomComponent?!!t.isCustomComponent(e):"function"==typeof e},e.isCustomComponentElement=function(e,t){return t.isCustomComponentElement?!!t.isCustomComponentElement(e):!!e&&t.isValidElement(e)&&"function"==typeof e.type},e.propsOfNode=T,e.typeOfNode=function(e){return e?e.type:null},e.nodeHasType=function(e,t){if(!t||!e)return!1;var n=(0,g.default)();if(n.displayNameOfNode){return n.displayNameOfNode(e)===t}return!!e.type&&("string"==typeof e.type?e.type===t:("function"==typeof e.type?(0,l.default)(e.type)===t:e.type.name===t)||e.type.displayName===t)},e.nodeMatches=x,e.nodeEqual=k,e.containsChildrenSubArray=function(e,t,n){var r=(0,m.childrenOfNode)(t);return r.some((function(t,i){return function(e,t,n){return t.length===n.length&&t.every((function(t,r){return e(t,n[r])}))}(e,r.slice(i,i+n.length),n)}))},e.childrenToSimplifiedArray=I,e.isReactElementAlike=function(e,t){return t.isValidElement(e)||C(e)||Array.isArray(e)},e.withSetStateAllowed=function(e){var t=!1;typeof globalThis.document>"u"&&(t=!0,globalThis.document={}),e(),t&&(globalThis.document=void 0,delete globalThis.document)},e.AND=function(e){var t=e.slice().reverse();return function(e){return t.every((function(t){return t(e)}))}},e.displayNameOfNode=function(e){if(!e)return null;var t=e.type;return t?t.displayName||("function"==typeof t?(0,l.default)(t):t.name||t):null},e.sym=function(e){return"function"==typeof Symbol?Symbol.for("enzyme."+String(e)):e},e.privateSet=function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})},e.cloneElement=function(e,t,n){return e.createElement(t.type,(0,i.default)({},t.props,n))},e.spyMethod=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0,i=e[t],o=(0,c.default)(e,t),a=void 0;return o&&(a=Object.getOwnPropertyDescriptor(e,t)),Object.defineProperty(e,t,{configurable:!0,enumerable:!a||!!a.enumerable,value:n(i)||function(){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=i.apply(this,t);return r=o,o}}()}),{restore:function(){return function(){o?a?Object.defineProperty(e,t,a):e[t]=i:delete e[t]}}(),getLastReturnValue:function(){return function(){return r}}()}};var r=kR;Object.defineProperty(e,"shallowEqual",{enumerable:!0,get:function(){return function(){return v(r).default}}()}),e.isEmptyValue=P,e.renderedDive=function e(t){return!!P(t)||[].concat(t).every((function(t){if(t){var n=t.rendered;return P(n)||e(n)}return P(t)}))},e.loadCheerioRoot=function(e){return e?(0,f.isHtml)(e)?p.default.load("")(e):p.default.load(e,null,!1).root():p.default.root()};var i=v(ck),o=v(ug),a=v(xR),s=v(zR),l=v(wN),c=v(fR),u=v(uR),h=v(uD),p=v(AN),f=TL,d=VV,m=tX,g=v(iX),y=v(XV);function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(e&&t&&e!==t)throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)")}function T(e){return(0,s.default)(e&&e.props||{}).filter((function(e){return typeof n(e,2)[1]<"u"})).reduce((function(e,t){var r=n(t,2),o=r[0],a=r[1];return(0,i.default)(e,b({},o,a))}),{})}function E(e,t,n,r){var i=r?x:k;if(e===t)return!0;if(!Array.isArray(e)&&!Array.isArray(t))return i(e,t,n);var o=(0,u.default)(e,1/0),a=(0,u.default)(t,1/0);if(o.length!==a.length)return!1;if(0===o.length&&0===a.length)return!0;for(var s=0;s<o.length;s+=1)if(!i(o[s],a[s],n))return!1;return!0}function S(e,t,n){return E(e,t,n,!0)}function w(e,t,n){return E(e,t,n,!1)}function A(e,t){var r=n(t,2),o=r[0],a=r[1],s=null==a?{}:b({},o,a);return(0,i.default)({},e,s)}function O(e,n,r,i){if(e===n)return!0;if(!e||!n||e.type!==n.type)return!1;var a=T(e),l=T(n);i&&(a=(0,s.default)(a).reduce(A,{}),l=(0,s.default)(l).reduce(A,{}));for(var c=Object.keys(a),u=0;u<c.length;u+=1){var h=c[u];if("children"!==h){if(!(h in l))return!1;if(l[h]!==a[h]){if(t(l[h])!==t(a[h])||"object"!==t(a[h]))return!1;if(!(0,o.default)(a[h],l[h]))return!1}}}var p="children"in a,f="children"in l;if((p||f)&&!(i?S:w)(I(a.children,i),I(l.children,i),r))return!1;if(!C(e)){var d=Object.keys(l);return r(c.length-p,d.length-f)}return!1}function x(e,t){return O(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,!0)}function k(e,t){return O(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,!1)}function I(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var t=[],n=function(e){null===e||!1===e||typeof e>"u"||t.push(e)};return Array.isArray(e)?e.forEach(n):n(e),t}(e),r=[],i=0;i<n.length;i+=1){var o=n[i],a=r.pop();typeof a>"u"?r.push(o):C(o)&&C(a)?r.push(a+o):(r.push(a),r.push(o))}return t?r.map((function(e){return"string"==typeof e?(0,h.default)(e):e})):r}function C(e){return"string"==typeof e||"number"==typeof e}function P(e){return null===e||!1===e}e.ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator}(dR);var AX={},OX=1/0,xX="[object Symbol]",kX=/[&<>"'`]/g,IX=RegExp(kX.source),CX="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,PX="object"==typeof self&&self&&self.Object===Object&&self,DX=CX||PX||Function("return this")();var RX=function(e){return function(t){return e?.[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),NX=Object.prototype.toString,MX=DX.Symbol,LX=MX?MX.prototype:void 0,jX=LX?LX.toString:void 0;function BX(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&NX.call(e)==xX}(e))return jX?jX.call(e):"";var t=e+"";return"0"==t&&1/e==-OX?"-0":t}var FX=function(e){return(e=function(e){return null==e?"":BX(e)}(e))&&IX.test(e)?e.replace(kX,RX):e},GX=String.prototype.valueOf,HX=Object.prototype.toString,UX=mP(),zX=function(e){return"string"==typeof e||"object"==typeof e&&(UX?function(e){try{return GX.call(e),!0}catch{return!1}}(e):"[object String]"===HX.call(e))},VX=Number.prototype.toString,XX=Object.prototype.toString,YX=mP(),WX=Gx,qX=WX("Boolean.prototype.toString"),$X=WX("Object.prototype.toString"),KX=mP();Object.defineProperty(AX,"__esModule",{value:!0});var QX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};AX.typeName=pY,AX.spaces=fY,AX.indent=dY,AX.debugNode=gY,AX.debugNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map((function(e){return gY(e,void 0,t)})).join("\n\n\n")};var ZX=uY(FX),JX=uY(wN),eY=uY(zX),tY=function(e){return"number"==typeof e||"object"==typeof e&&(YX?function(e){try{return VX.call(e),!0}catch{return!1}}(e):"[object Number]"===XX.call(e))},nY=uY(tY),rY=uY(wC),iY=function(e){return"boolean"==typeof e||null!==e&&"object"==typeof e&&(KX&&Symbol.toStringTag in e?function(e){try{return qX(e),!0}catch{return!1}}(e):"[object Boolean]"===$X(e))},oY=uY(iY),aY=uY(Kk),sY=uY(fR),lY=tX,cY=uY(iX);function uY(e){return e&&e.__esModule?e:{default:e}}var hY=Function.bind.call(Function.call,Boolean.prototype.valueOf);function pY(e){return(0,cY.default)().displayNameOfNode?(0,cY.default)().displayNameOfNode(e)||"Component":"function"==typeof e.type?e.type.displayName||(0,JX.default)(e.type)||"Component":e.type}function fY(e){return Array(e+1).join(" ")}function dY(e,t){return t.split("\n").map((function(t){return""+String(fY(e))+String(t)})).join("\n")}function mY(e,t){var n=(0,lY.propsOfNode)(e);return Object.keys(n).filter((function(e){return"children"!==e})).map((function(e){return String(e)+"="+String(function(e,t){return(0,eY.default)(e)?(0,aY.default)(String(e),{quoteStyle:"double"}):(0,nY.default)(e)?"{"+String((0,aY.default)(Number(e)))+"}":(0,oY.default)(e)?"{"+String((0,aY.default)(hY(e)))+"}":(0,rY.default)(e)?"{"+String((0,aY.default)(e))+"}":"object"===(typeof e>"u"?"undefined":QX(e))?t.verbose?"{"+String((0,aY.default)(e))+"}":"{{...}}":"{["+(typeof e>"u"?"undefined":QX(e))+"]}"}(n[e],t))})).join(" ")}function gY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e||"number"==typeof e)return(0,ZX.default)(e);if("function"==typeof e){var r=(0,JX.default)(e);return"[function"+(r?" "+String(r):"")+"]"}if(!e)return"";if(!(0,cY.default)().isValidElement(e)&&!function(e){return(0,sY.default)(e,"nodeType")&&"string"==typeof e.nodeType&&(0,sY.default)(e,"type")&&(0,sY.default)(e,"key")&&(0,sY.default)(e,"ref")&&(0,sY.default)(e,"instance")&&(0,sY.default)(e,"rendered")}(e))return"{"+String((0,aY.default)(e))+"}";var i=(0,lY.childrenOfNode)(e).map((function(e){return gY(e,t,n)})).filter(Boolean),o=pY(e),a=n.ignoreProps?"":mY(e,n),s=a?" ":"",l=i.length?">":" ",c=function(e,t){return e.length?"\n"+String(e.map((function(e){return dY(t,e)})).join("\n"))+"\n":""}(i,t),u=i.length?"</"+String(o)+">":"/>";return"<"+String(o)+s+String(a)+l+String(c)+u}var yY={},vY={},bY={};Object.defineProperty(bY,"__esModule",{value:!0});var _Y=function(e){return JSON.stringify(e)},TY=function(e){var t=e.body,n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=void 0;if("universalSelector"===l.type)c="*";else if("typeSelector"===l.type)c=l.name;else if("idSelector"===l.type)c="#"+l.name;else if("classSelector"===l.type)c="."+l.name;else if("attributePresenceSelector"===l.type)c="["+l.name+"]";else if("attributeValueSelector"===l.type)c="["+l.name+l.operator+_Y(l.value)+"]";else if("pseudoClassSelector"===l.type)c=":"+l.name,l.parameters.length&&(c+="("+l.parameters.map(_Y).join(", ")+")");else{if("pseudoElementSelector"!==l.type)throw new Error("Unknown token.");c="::"+l.name}n.push(c)}}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n.join("")};bY.default=function(){return{generate:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("selector"===s.type)t.push(TY(s));else if("descendantCombinator"===s.type)t.push(" ");else if("childCombinator"===s.type)t.push(" > ");else if("adjacentSiblingCombinator"===s.type)t.push(" + ");else{if("generalSiblingCombinator"!==s.type)throw new Error("Unknown token.");t.push(" ~ ")}}}catch(l){r=!0,i=l}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t.join("")}}};var EY={},SY={exports:{}};!function(e){var t,n;t=Is,n=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach((function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)}))}function i(){this.reset("")}function o(e,t,o){if(e instanceof r){var a=e;o=t}else a=r.fromCompiled(e,t);for(var s in this.grammar=a,this.options={keepHistory:!1,lexer:a.lexer||new i},o||{})this.options[s]=o[s];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(a,0);this.table=[l],l.wants[a.start]=[],l.predict(a.start),l.process(),this.current=0}function a(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=typeof e>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,e).map(a).join(" ")+" \u25cf "+this.symbols.slice(e).map(a).join(" ");return this.name+" \u2192 "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,i=0;i<t.length;i++){var a=t[i];if(a.isComplete){if(a.finish(),a.data!==o.fail){for(var s=a.wantedBy,l=s.length;l--;){var c=s[l];this.complete(c,a)}if(a.reference===this.index){var u=a.rule.name;(this.completed[u]=this.completed[u]||[]).push(a)}}}else{if("string"!=typeof(u=a.rule.symbols[a.dot])){this.scannable.push(a);continue}if(n[u]){if(n[u].push(a),r.hasOwnProperty(u)){var h=r[u];for(l=0;l<h.length;l++){var p=h[l];this.complete(a,p)}}}else n[u]=[a],this.predict(u)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var i=n[r],o=this.wants[e],a=new t(i,0,this.index,o);this.states.push(a)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var i=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var o=new r(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),n);return o.lexer=i,o},i.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(e,t){var n=this.buffer;if("string"==typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var o=this.index-this.lastLineBreak,a=String(this.line).length;return t+=" at line "+this.line+" col "+o+":\n\n",t+=r.map((function(e,t){return s(this.line-r.length+t+1,a)+" "+e}),this).join("\n"),t+="\n"+s("",a+o)+"^\n"}return t+" at index "+(this.index-1);function s(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(g){var o=new n(this.grammar,this.current+1);throw this.table.push(o),(s=new Error(this.reportLexerError(g))).offset=this.current,s.token=g.token,s}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var s,l=this.current+1;o=new n(this.grammar,l),this.table.push(o);for(var c=void 0!==t.text?t.text:t.value,u=r.constructor===i?t.value:t,h=a.scannable,p=h.length;p--;){var f=h[p],d=f.rule.symbols[f.dot];if(d.test?d.test(u):d.type?d.type===t.type:d.literal===c){var m=f.nextState({data:u,token:t,isToken:!0,reference:l-1});o.states.push(m)}}if(o.process(),0===o.states.length)throw(s=new Error(this.reportError(t))).offset=this.current,s.token=t,s;this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},o.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},o.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,i=this.table[r],o=i.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===o.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),o.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],r=t.rule.symbols[t.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(e,n)}),this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],a=o.rule.toString(o.dot);a===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+a)),n=a}},o.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},o.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),i=this.buildFirstStateStack(n,r);return null===i?null:[e].concat(i)},o.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},o.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},o.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},o.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&e.push(n)})),e.map((function(e){return e.data}))},{Parser:o,Grammar:r,Rule:e}},e.exports?e.exports=n():t.nearley=n()}(SY);var wY=SY.exports,AY={exports:{}},OY=1/0,xY=9007199254740991,kY="[object Arguments]",IY="[object Function]",CY="[object GeneratorFunction]",PY="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,DY="object"==typeof self&&self&&self.Object===Object&&self,RY=PY||DY||Function("return this")();function NY(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var MY=Object.prototype,LY=MY.hasOwnProperty,jY=MY.toString,BY=RY.Symbol,FY=MY.propertyIsEnumerable,GY=BY?BY.isConcatSpreadable:void 0;function HY(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=UY),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?HY(s,t-1,n,r,i):NY(i,s):r||(i[i.length]=s)}return i}function UY(e){return zY(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xY}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?jY.call(e):"";return t==IY||t==CY}(e)}(e)}(e)&&LY.call(e,"callee")&&(!FY.call(e,"callee")||jY.call(e)==kY)}(e)||!!(GY&&e&&e[GY])}var zY=Array.isArray;var VY=function(e){return(e?e.length:0)?HY(e,OY):[]};!function(e){!function(){function t(e){return e[0]}var n,r,i=VY,o=function(e){return e=e.filter((function(e){return null!==e})),i(e)},a={" ":"descendantCombinator","+":"adjacentSiblingCombinator",">":"childCombinator","~":"generalSiblingCombinator"},s=function(e,t,n){var r=i(e).join(""),o=parseFloat(r);return isNaN(o)?n:o},l=function(e,t,n){return"true"===e[0]||"false"!==e[0]&&n},c=function(e,t,n){return"NaN"===e[0]?NaN:"undefined"!==e[0]?"null"===e[0]?null:n:void 0},u={Lexer:void 0,ParserRules:[{name:"combinator",symbols:["selector"]},{name:"combinator",symbols:["combinator","_",/[>+~ ]/,"_","selector"],postprocess:function(e){return(Array.isArray(e[0])?e[0]:[e[0]]).concat({type:a[e[2]]}).concat(e[4])}},{name:"selector",symbols:["selectorBody"],postprocess:function(e){return{type:"selector",body:e[0]}}},{name:"selectorBody$ebnf$1",symbols:["typeSelector"],postprocess:t},{name:"selectorBody$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"selectorBody$ebnf$2",symbols:[]},{name:"selectorBody$ebnf$2",symbols:["selectorBody$ebnf$2","simpleSelector"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"selectorBody",symbols:["selectorBody$ebnf$1","selectorBody$ebnf$2"],postprocess:function(e,t,n){var r=o(e);return r.length?r:n}},{name:"selectorBody$ebnf$3",symbols:[]},{name:"selectorBody$ebnf$3",symbols:["selectorBody$ebnf$3","simpleSelector"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"selectorBody",symbols:["universalSelector","selectorBody$ebnf$3"],postprocess:o},{name:"simpleSelector",symbols:["idSelector"]},{name:"simpleSelector",symbols:["classSelector"]},{name:"simpleSelector",symbols:["attributeValueSelector"]},{name:"simpleSelector",symbols:["attributePresenceSelector"]},{name:"simpleSelector",symbols:["pseudoClassSelector"]},{name:"simpleSelector",symbols:["pseudoElementSelector"]},{name:"typeSelector",symbols:["attributeName"],postprocess:function(e){return{type:"typeSelector",name:e[0]}}},{name:"className$ebnf$1",symbols:[{literal:"-"}],postprocess:t},{name:"className$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"className$ebnf$2",symbols:[]},{name:"className$ebnf$2",symbols:["className$ebnf$2",/[_a-zA-Z0-9-]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"className",symbols:["className$ebnf$1",/[_a-zA-Z]/,"className$ebnf$2"],postprocess:function(e){return(e[0]||"")+e[1]+e[2].join("")}},{name:"attributeName$ebnf$1",symbols:[]},{name:"attributeName$ebnf$1",symbols:["attributeName$ebnf$1",/[_a-zA-Z()0-9-]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"attributeName",symbols:[/[_a-z()A-Z]/,"attributeName$ebnf$1"],postprocess:function(e){return e[0]+e[1].join("")}},{name:"classSelector",symbols:[{literal:"."},"className"],postprocess:function(e){return{type:"classSelector",name:e[1]}}},{name:"idSelector",symbols:[{literal:"#"},"attributeName"],postprocess:function(e){return{type:"idSelector",name:e[1]}}},{name:"universalSelector",symbols:[{literal:"*"}],postprocess:function(e){return{type:"universalSelector"}}},{name:"attributePresenceSelector",symbols:[{literal:"["},"attributeName",{literal:"]"}],postprocess:function(e){return{type:"attributePresenceSelector",name:e[1]}}},{name:"attributeOperator",symbols:[{literal:"="}]},{name:"attributeOperator$string$1",symbols:[{literal:"~"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$1"]},{name:"attributeOperator$string$2",symbols:[{literal:"|"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$2"]},{name:"attributeOperator$string$3",symbols:[{literal:"^"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$3"]},{name:"attributeOperator$string$4",symbols:[{literal:"$"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$4"]},{name:"attributeOperator$string$5",symbols:[{literal:"*"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$5"]},{name:"attributeValueSelector",symbols:[{literal:"["},"attributeName","attributeOperator","attributeValue",{literal:"]"}],postprocess:function(e){return{type:"attributeValueSelector",name:e[1],value:e[3],operator:e[2][0]}}},{name:"attributeValue",symbols:["falsyPrimitiveStrings"],postprocess:t},{name:"attributeValue",symbols:["numericValue"],postprocess:t},{name:"attributeValue",symbols:["sqstring"],postprocess:t},{name:"attributeValue",symbols:["dqstring"],postprocess:t},{name:"falsyPrimitiveStrings$string$1",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$1"],postprocess:l},{name:"falsyPrimitiveStrings$string$2",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$2"],postprocess:l},{name:"falsyPrimitiveStrings$string$3",symbols:[{literal:"N"},{literal:"a"},{literal:"N"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$3"],postprocess:c},{name:"falsyPrimitiveStrings$string$4",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$4"],postprocess:c},{name:"falsyPrimitiveStrings$string$5",symbols:[{literal:"u"},{literal:"n"},{literal:"d"},{literal:"e"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"e"},{literal:"d"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$5"],postprocess:c},{name:"numericValue",symbols:["int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int"],postprocess:s},{name:"numericValue",symbols:["int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int"],postprocess:s},{name:"numericValue$string$1",symbols:[{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$1"],postprocess:s},{name:"numericValue$string$2",symbols:[{literal:"+"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$2"],postprocess:s},{name:"numericValue$string$3",symbols:[{literal:"-"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$3"],postprocess:s},{name:"int$ebnf$1",symbols:[/[0-9]/]},{name:"int$ebnf$1",symbols:["int$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"int",symbols:["int$ebnf$1"]},{name:"classParameters",symbols:[]},{name:"classParameters",symbols:["classParameter"]},{name:"classParameters",symbols:["classParameters",{literal:","},"_","classParameter"],postprocess:(n=0,r=3,function(e){return e[n].concat([e[r]])})},{name:"classParameter$ebnf$1",symbols:[/[^()"', ]/]},{name:"classParameter$ebnf$1",symbols:["classParameter$ebnf$1",/[^()"', ]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"classParameter",symbols:["classParameter$ebnf$1"],postprocess:function(e){return e[0].join("")}},{name:"classParameter",symbols:["sqstring"],postprocess:t},{name:"classParameter",symbols:["dqstring"],postprocess:t},{name:"pseudoElementSelector$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:function(e){return e.join("")}},{name:"pseudoElementSelector",symbols:["pseudoElementSelector$string$1","pseudoClassSelectorName"],postprocess:function(e){return{type:"pseudoElementSelector",name:e[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName"],postprocess:function(e){return{type:"pseudoClassSelector",name:e[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName",{literal:"("},"classParameters",{literal:")"}],postprocess:function(e){return{type:"pseudoClassSelector",name:e[1],parameters:e[3]}}},{name:"pseudoClassSelectorName$ebnf$1",symbols:[/[a-zA-Z0-9-_]/]},{name:"pseudoClassSelectorName$ebnf$1",symbols:["pseudoClassSelectorName$ebnf$1",/[a-zA-Z0-9-_]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"pseudoClassSelectorName",symbols:[/[a-zA-Z]/,"pseudoClassSelectorName$ebnf$1"],postprocess:function(e){return e[0]+e[1].join("")}},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"dstrchar",symbols:[/[^"]/],postprocess:t},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(e){return'"'}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"sstrchar",symbols:[/[^']/],postprocess:t},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(e){return"'"}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(e){return null}}],ParserStart:"combinator"};e.exports=u}()}(AY);var XY=AY.exports;Object.defineProperty(EY,"__esModule",{value:!0});var YY=wY,WY=function(e){return e&&e.__esModule?e:{default:e}}(XY);EY.default=function(){return{parse:function(e){var t=new YY.Parser(WY.default.ParserRules,WY.default.ParserStart).feed(e).results;if(0===t.length)throw new Error("Found no parsings.");if(t.length>1)throw new Error("Ambiguous results.");return t[0]}}},Object.defineProperty(vY,"__esModule",{value:!0}),vY.createParser=vY.createGenerator=void 0;var qY=KY(bY),$Y=KY(EY);function KY(e){return e&&e.__esModule?e:{default:e}}vY.createGenerator=qY.default,vY.createParser=$Y.default;var QY=BP,ZY=Gx,JY=ZY("Object.prototype.propertyIsEnumerable"),eW=ZY("Array.prototype.push"),tW=function(e){var t=QY(e),n=[];for(var r in t)JY(t,r)&&eW(n,t[r]);return n},nW=tW,rW=function(){return"function"==typeof Object.values?Object.values:nW},iW=rW,oW=xx,aW=xx,sW=tW,lW=rW,cW=function(){var e=iW();return oW(Object,{values:e},{values:function(){return Object.values!==e}}),e},uW=Lx(lW(),Object);aW(uW,{getPolyfill:lW,implementation:sW,shim:cW});var hW,pW,fW=uW,dW=iP,mW=aP(),gW=uP(),yW=II,vW=hP(),bW=AC,_W=PD(),TW=lC,EW=WD,SW=UP,wW=Gx,AW=zX,OW=Object("a"),xW="a"!==OW[0]||!(0 in OW),kW=wW("String.prototype.split"),IW=function(e){var t,n=EW(this),r=xW&&AW(n)?kW(n,""):n,i=_W(r);if(!bW(e))throw new TypeError("Array.prototype.filter callback must be a function");arguments.length>1&&(t=arguments[1]);for(var o=dW(n,0),a=0,s=0;a<i;){var l=SW(a);if(vW(n,l)){var c=yW(n,l);TW(mW(e,t,[c,a,n]))&&(gW(o,SW(s),c),s+=1)}a+=1}return o},CW=function(e){var t=!0,n=!0,r=!1;if("function"==typeof e){try{e.call("f",(function(e,n,r){"object"!=typeof r&&(t=!1)})),e.call([null],(function(){n="string"==typeof this}),"x")}catch{r=!0}return!r&&t&&n}return!1},PW=IW,DW=function(){var e=Array.prototype.filter;return CW(e)?e:PW};var RW=xx,NW=BP,MW=Gx,LW=IW,jW=DW,BW=Lx.apply(jW()),FW=function(){if(pW)return hW;pW=1;var e=xx,t=DW;return hW=function(){var n=t();return e(Array.prototype,{filter:n},{filter:function(){return Array.prototype.filter!==n}}),n}}(),GW=MW("Array.prototype.slice"),HW=function(e,t){return NW(e),BW(e,GW(arguments,1))};RW(HW,{getPolyfill:jW,implementation:LW,shim:FW});var UW=HW,zW=Gx("Array.prototype.push"),VW=function(e,t){for(var n=[],r=0;r<e.length;r+=1)zW(n,t(e[r],r));return n},XW=[["HTMLElement","article"],["HTMLElement","section"],["HTMLBaseFontElement","basefont","HTMLBaseFontElementConstructor"],["HTMLPhraseElement","cite","HTMLElement"],["HTMLElement","noscript"],["HTMLBGSoundElement","bgsound","HTMLElement"],["HTMLPhraseElement","blink","HTMLElement"],["HTMLElement","multicol"],["HTMLNextIdElement","nextid","HTMLElement"],["HTMLElement","rb"],["HTMLElement","spacer"],["HTMLAnchorElement","a","HTMLElement"],["HTMLAreaElement","area","HTMLElement"],["HTMLAudioElement","audio","HTMLElement"],["HTMLBaseElement","base","HTMLElement"],["HTMLBodyElement","body","HTMLElement"],["HTMLBRElement","br","HTMLElement"],["HTMLButtonElement","button"],["HTMLCanvasElement","canvas"],["HTMLContentElement","content","HTMLElement"],["HTMLDataElement","data","HTMLElement"],["HTMLDataListElement","datalist"],["HTMLDialogElement","dialog","HTMLElement"],["HTMLDirectoryElement","dir"],["HTMLDivElement","div"],["HTMLDListElement","dl"],["HTMLEmbedElement","embed"],["HTMLFieldSetElement","fieldset"],["HTMLFontElement","font"],["HTMLFormElement","form"],["HTMLFrameElement","frame"],["HTMLFrameSetElement","frameset"],["HTMLHeadElement","head"],["HTMLHeadingElement","h1"],["HTMLHeadingElement","h2"],["HTMLHeadingElement","h3"],["HTMLHeadingElement","h4"],["HTMLHeadingElement","h5"],["HTMLHeadingElement","h6"],["HTMLHtmlElement","html"],["HTMLHRElement","hr"],["HTMLIFrameElement","iframe"],["HTMLImageElement","img"],["HTMLInputElement","input"],["HTMLIsIndexElement","index","HTMLElement"],["HTMLKeygenElement","keygen","HTMLBlockElement"],["HTMLLabelElement","label"],["HTMLLegendElement","legend"],["HTMLLIElement","li"],["HTMLLinkElement","link"],["HTMLElement","main"],["HTMLMapElement","map"],["HTMLMarqueeElement","marquee"],["HTMLMenuElement","menu"],["HTMLMetaElement","meta"],["HTMLMeterElement","meter","HTMLElement"],["HTMLModElement","del"],["HTMLModElement","ins"],["HTMLObjectElement","object"],["HTMLOListElement","ol"],["HTMLOptGroupElement","optgroup"],["HTMLOptionElement","option"],["HTMLOutputElement","output"],["HTMLParagraphElement","p"],["HTMLParamElement","param"],["HTMLPictureElement","picture","HTMLElement"],["HTMLPreElement","pre"],["HTMLProgressElement","progress","HTMLElement"],["HTMLQuoteElement","q","HTMLBlockquoteElement"],["HTMLQuoteElement","blockquote","HTMLBlockElement","HTMLBlockquoteElement"],["HTMLScriptElement","script"],["HTMLSelectElement","select"],["HTMLShadowElement","shadow","HTMLElement"],["HTMLSourceElement","source"],["HTMLSpanElement","span","HTMLElement"],["HTMLStyleElement","style"],["HTMLTableElement","table"],["HTMLTableCaptionElement","caption"],["HTMLTableCellElement","td","HTMLTableDataCellElement"],["HTMLTableCellElement","th","HTMLTableHeaderCellElement"],["HTMLTableRowElement","tr"],["HTMLTableColElement","col"],["HTMLTableColElement","colgroup"],["HTMLTableSectionElement","tbody"],["HTMLTableSectionElement","thead"],["HTMLTableSectionElement","tfoot"],["HTMLTemplateElement","template","HTMLElement"],["HTMLTextAreaElement","textarea"],["HTMLTimeElement","time","HTMLElement"],["HTMLTitleElement","title"],["HTMLTrackElement","track","HTMLElement"],["HTMLUListElement","ul"],["HTMLVideoElement","video"],["HTMLElement","abbr"],["HTMLElement","address"],["HTMLElement","aside"],["HTMLElement","b"],["HTMLElement","bdi"],["HTMLElement","bdo"],["HTMLElement","code"],["HTMLElement","dd"],["HTMLDetailsElement","details","HTMLElement"],["HTMLElement","dfn"],["HTMLElement","dt"],["HTMLElement","em"],["HTMLElement","figcaption"],["HTMLElement","figure"],["HTMLElement","footer"],["HTMLElement","header"],["HTMLElement","hgroup"],["HTMLElement","i"],["HTMLElement","kbd"],["HTMLElement","mark"],["HTMLElement","nav"],["HTMLElement","rp"],["HTMLElement","rt"],["HTMLElement","ruby"],["HTMLElement","s"],["HTMLElement","samp"],["HTMLSlotElement","slot","HTMLElement"],["HTMLElement","small"],["HTMLElement","strong"],["HTMLElement","summary"],["HTMLElement","u"],["HTMLElement","var"],["HTMLElement","wbr"]],YW=function(e,t,n){if(typeof document<"u"&&"function"==typeof document.createElement){var r=document.createElement(e).constructor;if(r!==n)return r}},WW=UW,qW=function(){var e=globalThis.HTMLUnknownElement;return{all:globalThis.HTMLElement,elements:VW(XW,(function(t){for(var n,r,i=t[0],o=t[1],a=2;a<arguments.length&&!r;a+=1)r=(n=t[a])&&globalThis[n];var s=globalThis[i];return{constructor:YW(o,0,e),constructorName:r?n:i,expectedConstructor:r||s,tag:o}})),unknown:e}};Object.defineProperty(yY,"__esModule",{value:!0});var $W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KW=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();yY.buildPredicate=Nq,yY.reduceTreeBySelector=Fq,yY.reduceTreesBySelector=function(e,t){var n=t.map((function(t){return Fq(e,t)}));return kq((0,JW.default)(n,1))};var QW=vY,ZW=sq(fW),JW=sq(uR),eq=sq(xR),tq=sq(fR),nq=function(e){if(!e)return[];var t=qW();return e===t.unknown?[]:e===t.all?t.elements:WW(t.elements,(function(t){return t.constructor===e}))},rq=sq(nq),iq=tX,oq=dR,aq=sq(iX);function sq(e){return e&&e.__esModule?e:{default:e}}var lq=(0,QW.createParser)(),cq="childCombinator",uq="adjacentSiblingCombinator",hq="generalSiblingCombinator",pq="descendantCombinator",fq="selector",dq="typeSelector",mq="classSelector",gq="idSelector",yq="universalSelector",vq="attributePresenceSelector",bq="attributeValueSelector",_q="pseudoClassSelector",Tq="pseudoElementSelector",Eq="=",Sq="~=",wq="|=",Aq="^=",Oq="$=",xq="*=";function kq(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(e)))}function Iq(e,t){return kq(t.reduce(e,[]))}function Cq(e){try{return lq.parse(e)}catch{throw new Error("Failed to parse selector: "+String(e))}}function Pq(e,t){var n=t.operator,r=t.value,i=t.name,o=(0,oq.propsOfNode)(e),a=Object.getOwnPropertyDescriptor(o,i);if(a&&a.get)return!1;var s=o[i];if(typeof s>"u")return!1;if(t.type===vq)return(0,tq.default)(o,t.name);if(("string"!=typeof s||"string"!=typeof r)&&n!==Eq)return!1;switch(n){case Eq:return(0,eq.default)(s,r);case Sq:return-1!==s.split(" ").indexOf(r);case wq:return s===r||s.startsWith(String(r)+"-");case Aq:return""!==r&&s.slice(0,r.length)===r;case Oq:return""!==r&&s.slice(-r.length)===r;case xq:return""!==r&&-1!==s.indexOf(r);default:throw new Error('Enzyme::Selector: Unknown attribute selector operator "'+String(n)+'"')}}function Dq(e,t,n){if(null===e||"string"==typeof e)return!1;switch(t.type){case yq:return!0;case mq:return(0,iq.hasClassName)(e,t.name);case dq:return(0,oq.nodeHasType)(e,t.name);case gq:return(0,iq.nodeHasId)(e,t.name);case vq:case bq:return Pq(e,t);case Tq:case _q:return function(e,t,n){var r=t.name,i=t.parameters;if("not"===r)return i.every((function(t){return 0===Fq(t,e).length}));if("empty"===r)return 0===(0,iq.treeFilter)(e,(function(t){return t!==e})).length;if("first-child"===r){var o=(0,iq.findParentNode)(n,e).rendered;return KW(o,1)[0]===e}if("last-child"===r){var a=(0,iq.findParentNode)(n,e).rendered;return a[a.length-1]===e}if("focus"===r){if(typeof document>"u")throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a global `document`.');var s=(0,aq.default)();return document.activeElement&&s.nodeToHostNode(e)===document.activeElement}throw new TypeError('Enzyme::Selector does not support the "'+String(t.name)+'" pseudo-element or pseudo-class selectors.')}(e,t,n);default:throw new Error("Unknown token type: "+String(t.type))}}function Rq(e,t){return function(n){return e.body.every((function(e){return Dq(n,e,t)}))}}function Nq(e){if("string"==typeof e){var t=Cq(e);if(function(e){return e.some((function(e){return e.type!==fq}))}(t))throw new TypeError("This method does not support complex CSS selectors");return Rq(t[0])}var n=(0,aq.default)();if(n.isValidElementType?n.isValidElementType(e):"function"==typeof e)return function(t){return n.matchesElementType(t,e)};if("object"===(typeof e>"u"?"undefined":$W(e))){if(!Array.isArray(e)&&null!==e&&Object.keys(e).length>0){if((0,ZW.default)(e).some((function(e){return typeof e>"u"})))throw new TypeError("Enzyme::Props can\u2019t have `undefined` values. Try using \u2018findWhere()\u2019 instead.");return function(t){return(0,iq.nodeMatchesObjectProps)(t,e)}}throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector")}throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)")}function Mq(e,t,n){return e.reduce((function(e,r){var i=(0,iq.findParentNode)(n,r);if(!i)return e;var o=(0,iq.childrenOfNode)(i),a=o.indexOf(r),s=o[a+1];return s&&t(s)&&e.push(s),e}),[])}function Lq(e,t,n){return Iq((function(e,r){var i=(0,iq.findParentNode)(n,r);if(!i)return e;var o=(0,iq.childrenOfNode)(i),a=o.indexOf(r),s=o.slice(a+1);return e.concat(s.filter(t))}),e)}function jq(e,t){return Iq((function(e,n){return e.concat((0,iq.childrenOfNode)(n).filter(t))}),e)}function Bq(e,t){return Iq((function(e,n){return e.concat((0,iq.treeFilter)(n,t))}),(0,JW.default)(e.map(iq.childrenOfNode)))}function Fq(e,t){if("string"!=typeof e){var n=(0,rq.default)(e);if(n.length>0)return(0,JW.default)(n.map((function(e){return Fq(e.tag,t)})))}if("function"==typeof e||"object"===(typeof e>"u"?"undefined":$W(e)))return(0,iq.treeFilter)(t,Nq(e));var r=[];if("string"!=typeof e)throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");for(var i=Cq(e),o=0;o<i.length;){var a=i[o];if(a.type===fq){var s=Rq(a,t);r=r.concat((0,iq.treeFilter)(t,s))}else{var l=a.type,c=Rq(i[o+=1],t);switch(l){case uq:r=Mq(r,c,t);break;case hq:r=Lq(r,c,t);break;case cq:r=jq(r,c);break;case pq:r=Bq(r,c);break;default:throw new Error("Unknown combinator selector: "+String(l))}}o+=1}return r}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=h(ck),i=h(uR),o=h(fR),a=dR,s=h(iX),l=AX,c=tX,u=yY;function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=(0,a.sym)("__node__"),m=(0,a.sym)("__nodes__"),g=(0,a.sym)("__renderer__"),y=(0,a.sym)("__unrendered__"),v=(0,a.sym)("__root__"),b=(0,a.sym)("__options__"),_=(0,a.sym)("__rootNodes__"),T=(0,a.sym)("__wrappingComponent__"),E=(0,a.sym)("__linkedRoots__"),S=(0,a.sym)("__updatedBy__");function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.treeFilter;return e.flatMap((function(e){return n(e.getNodeInternal(),t)}))}function A(e,t){return e.wrap(e.getNodesInternal().filter(t).filter(Boolean))}function O(e){if(1!==e[v].length)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return e[v]!==e?e[_][0]:e[v][d]}function x(e,t){return(0,c.parentsOfNode)(t,O(e))}function k(e,t){t?Array.isArray(t)?((0,a.privateSet)(e,d,t[0]),(0,a.privateSet)(e,m,t)):((0,a.privateSet)(e,d,t),(0,a.privateSet)(e,m,[t])):((0,a.privateSet)(e,d,null),(0,a.privateSet)(e,m,[])),(0,a.privateSet)(e,"length",e[m].length)}var I=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f(this,e),!globalThis.window&&!globalThis.document)throw new Error("It looks like you called `mount()` without a global document being loaded.");var o=(0,a.makeOptions)(i);if(n)(0,a.privateSet)(this,g,n[g]),(0,a.privateSet)(this,v,n),k(this,t),(0,a.privateSet)(this,_,n[m]),(0,a.privateSet)(this,b,n[b]),(0,a.privateSet)(this,E,[]);else{var l=(0,s.default)(o);if(!l.isValidElement(t))throw new TypeError("ReactWrapper can only wrap valid elements");var c=l.createRenderer((0,r.default)({mode:"mount"},o));if((0,a.privateSet)(this,g,c),c.render(t,o.context),(0,a.privateSet)(this,v,this),k(this,this[g].getNode()),(0,a.privateSet)(this,b,o),(0,a.privateSet)(this,E,[]),(0,a.isCustomComponent)(o.wrappingComponent,l)){if("function"!=typeof this[g].getWrappingComponentRenderer)throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");(0,a.privateSet)(this,T,new C(this,this[g].getWrappingComponentRenderer())),this[E].push(this[T])}}(0,a.privateSet)(this,y,t),(0,a.privateSet)(this,S,null)}return n(e,[{key:"root",value:function(){return function(){return this[v]}}()},{key:"getNodeInternal",value:function(){return function(){if(1!==this.length)throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");return this[m][0]}}()},{key:"getNodesInternal",value:function(){return function(){return this[m]}}()},{key:"getElement",value:function(){return function(){var e=this;return this.single("getElement",(function(){return(0,s.default)(e[b]).nodeToElement(e[d])}))}}()},{key:"getElements",value:function(){return function(){var e=this;return this[m].map((function(t){return(0,s.default)(e[b]).nodeToElement(t)}))}}()},{key:"getNode",value:function(){return function(){throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead")}}()},{key:"getNodes",value:function(){return function(){throw new Error("ReactWrapper::getNodes() is no longer supported.")}}()},{key:"getDOMNode",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("getDOMNode",(function(t){return e.nodeToHostNode(t,!0)}))}}()},{key:"ref",value:function(){return function(e){if(this[v]!==this)throw new Error("ReactWrapper::ref(refname) can only be called on the root");return this.instance().refs[e]}}()},{key:"instance",value:function(){return function(){var e=this;return this.single("instance",(function(){return e[d].instance}))}}()},{key:"getWrappingComponent",value:function(){return function(){if(this[v]!==this)throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");if(!this[b].wrappingComponent)throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[T]}}()},{key:"update",value:function(){return function(){var e=this,t=this[v];return this!==t?t.update():(k(this,this[g].getNode()),this[E].forEach((function(t){if(t!==e[S]){t[S]=e;try{t.update()}finally{t[S]=null}}})),this)}}()},{key:"unmount",value:function(){return function(){var e=this;if(this[v]!==this)throw new Error("ReactWrapper::unmount() can only be called on the root");return this.single("unmount",(function(){e[g].unmount(),e.update()})),this}}()},{key:"mount",value:function(){return function(){var e=this;if(this[v]!==this)throw new Error("ReactWrapper::mount() can only be called on the root");return this[g].render(this[y],this[b].context,(function(){return e.update()})),this}}()},{key:"setProps",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[v]!==this)throw new Error("ReactWrapper::setProps() can only be called on the root");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");var r=(0,s.default)(this[b]);return this[y]=(0,a.cloneElement)(r,this[y],e),this[g].render(this[y],null,(function(){t.update(),n&&n()})),this}}()},{key:"setState",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null===this.instance()||"class"!==this.getNodeInternal().nodeType)throw new Error("ReactWrapper::setState() can only be called on class components");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.instance().setState(e,(function(){if(t.update(),n){var e=(0,s.default)(t[b]),r=t.instance();e.invokeSetStateCallback?e.invokeSetStateCallback(r,n):n.call(r)}})),this}}()},{key:"setContext",value:function(){return function(e){var t=this;if(this[v]!==this)throw new Error("ReactWrapper::setContext() can only be called on the root");if(!this[b].context)throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this[g].render(this[y],e,(function(){return t.update()})),this}}()},{key:"contains",value:function(){return function(e){var t=(0,s.default)(this[b]);return w(this,Array.isArray(e)?function(n){return(0,a.containsChildrenSubArray)(a.nodeEqual,n,e.map((function(e){return t.elementToNode(e)})))}:function(n){return(0,a.nodeEqual)(t.elementToNode(e),n)}).length>0}}()},{key:"containsMatchingElement",value:function(){return function(e){var t=(0,s.default)(this[b]).elementToNode(e);return w(this,function(){return function(e){return(0,a.nodeMatches)(t,e,(function(e,t){return e<=t}))}}()).length>0}}()},{key:"containsAllMatchingElements",value:function(){return function(e){var t=this;if(!Array.isArray(e))throw new TypeError("nodes should be an Array");return e.every((function(e){return t.containsMatchingElement(e)}))}}()},{key:"containsAnyMatchingElements",value:function(){return function(e){var t=this;return Array.isArray(e)&&e.some((function(e){return t.containsMatchingElement(e)}))}}()},{key:"equals",value:function(){return function(e){var t=this;return this.single("equals",(function(){return(0,a.nodeEqual)(t.getNodeInternal(),e)}))}}()},{key:"matchesElement",value:function(){return function(e){var t=this;return this.single("matchesElement",(function(){var n=(0,s.default)(t[b]).elementToNode(e);return(0,a.nodeMatches)(n,t.getNodeInternal(),(function(e,t){return e<=t}))}))}}()},{key:"find",value:function(){return function(e){return this.wrap((0,u.reduceTreesBySelector)(e,this.getNodesInternal()))}}()},{key:"is",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return this.single("is",(function(e){return t(e)}))}}()},{key:"isEmptyRender",value:function(){return function(){var e=this.getNodeInternal();return(0,a.renderedDive)(e)}}()},{key:"filterWhere",value:function(){return function(e){var t=this;return A(this,(function(n){return e(t.wrap(n))}))}}()},{key:"filter",value:function(){return function(e){return A(this,(0,u.buildPredicate)(e))}}()},{key:"not",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return A(this,(function(e){return!t(e)}))}}()},{key:"text",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("text",(function(t){return(0,c.getTextFromHostNodes)(t,e)}))}}()},{key:"html",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("html",(function(t){return(0,c.getHTMLFromHostNodes)(t,e)}))}}()},{key:"render",value:function(){return function(){var e=this.html();return(0,a.loadCheerioRoot)(e)}}()},{key:"simulate",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.single("simulate",(function(r){return t[g].simulateEvent(r,e,n),t[v].update(),t}))}}()},{key:"simulateError",value:function(){return function(e){var t=this;if(this[v]===this)throw new Error("ReactWrapper::simulateError() may not be called on the root");return this.single("simulateError",(function(n){if("host"===n.nodeType)throw new Error("ReactWrapper::simulateError() can only be called on custom components");var r=t[g];if("function"!=typeof r.simulateError)throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var i=O(t),o=[n].concat(x(t,n));return r.simulateError(o,i,e),t[v].update(),t}))}}()},{key:"props",value:function(){return function(){return this.single("props",c.propsOfNode)}}()},{key:"state",value:function(){return function(e){var t=this,n=this[v]===this?this[g].getNode():this.getNodeInternal();if(null===this.instance()||"class"!==n.nodeType)throw new Error("ReactWrapper::state() can only be called on class components");var r=this.single("state",(function(){return t.instance().state}));if(typeof e<"u"){if(null==r)throw new TypeError('ReactWrapper::state("'+String(e)+'") requires that `state` not be `null` or `undefined`');return r[e]}return r}}()},{key:"context",value:function(){return function(e){var t=this;if(this[v]!==this)throw new Error("ReactWrapper::context() can only be called on the root");var n=this.single("context",(function(){return t.instance()}));if(null===n)throw new Error("ReactWrapper::context() can only be called on components with instances");var r=n.context;return typeof e<"u"?r[e]:r}}()},{key:"children",value:function(){return function(e){var t=this.flatMap((function(e){return(0,c.childrenOfNode)(e.getNodeInternal())}));return e?t.filter(e):t}}()},{key:"childAt",value:function(){return function(e){var t=this;return this.single("childAt",(function(){return t.children().at(e)}))}}()},{key:"parents",value:function(){return function(e){var t=this;return this.single("parents",(function(n){var r=t.wrap(x(t,n));return e?r.filter(e):r}))}}()},{key:"parent",value:function(){return function(){return this.flatMap((function(e){return[e.parents().get(0)]}))}}()},{key:"closest",value:function(){return function(e){if(this.is(e))return this;var t=this.parents().filter(e);return t.length>0?t.first():this.findWhere((function(){return!1}))}}()},{key:"prop",value:function(){return function(e){return this.props()[e]}}()},{key:"invoke",value:function(){return function(e){var t=this;return this.single("invoke",(function(){var n=t.prop(e);if("function"!=typeof n)throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var o="function"==typeof t[g].wrapInvoke?t[g].wrapInvoke((function(){return n.apply(void 0,r)})):n.apply(void 0,r);return t[v].update(),o}}))}}()},{key:"renderProp",value:function(){return function(e){var n=this,r=(0,s.default)(this[b]);if("function"!=typeof r.wrap)throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",(function(i){if("host"===i.nodeType)throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");if("string"!=typeof e)throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");var a=n.props();if(!(0,o.default)(a,e))throw new Error("ReactWrapper::renderProp(): no prop called \u201c"+String(e)+"\u201c found");var s=a[e];if("function"!=typeof s)throw new TypeError("ReactWrapper::renderProp(): expected prop \u201c"+String(e)+"\u201c to contain a function, but it holds \u201c"+(typeof s>"u"?"undefined":t(s))+"\u201c");return function(){var e=s.apply(void 0,arguments),t=r.wrap(e);return n.wrap(t,null,n[b])}}))}}()},{key:"key",value:function(){return function(){return this.single("key",(function(e){return void 0===e.key?null:e.key}))}}()},{key:"type",value:function(){return function(){return this.single("type",(function(e){return(0,a.typeOfNode)(e)}))}}()},{key:"name",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("name",(function(t){return e.displayNameOfNode?e.displayNameOfNode(t):(0,a.displayNameOfNode)(t)}))}}()},{key:"hasClass",value:function(){return function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",(function(t){return(0,c.hasClassName)(t,e)}))}}()},{key:"forEach",value:function(){return function(e){var t=this;return this.getNodesInternal().forEach((function(n,r){return e.call(t,t.wrap(n),r)})),this}}()},{key:"map",value:function(){return function(e){var t=this;return this.getNodesInternal().map((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"reduce",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce((function(n,r,i){return e.call(t,n,t.wrap(r),i)}),n):this.getNodesInternal().reduce((function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)}))}}()},{key:"reduceRight",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight((function(n,r,i){return e.call(t,n,t.wrap(r),i)}),n):this.getNodesInternal().reduceRight((function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)}))}}()},{key:"slice",value:function(){return function(e,t){return this.wrap(this.getNodesInternal().slice(e,t))}}()},{key:"some",value:function(){return function(e){if(this[v]===this)throw new Error("ReactWrapper::some() can not be called on the root");var t=(0,u.buildPredicate)(e);return this.getNodesInternal().some(t)}}()},{key:"someWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().some((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"every",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return this.getNodesInternal().every(t)}}()},{key:"everyWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().every((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"flatMap",value:function(){return function(e){var t=this,n=this.getNodesInternal().map((function(n,r){return e.call(t,t.wrap(n),r)})),r=(0,i.default)(n,1);return this.wrap(r.filter(Boolean))}}()},{key:"findWhere",value:function(){return function(e){var t=this;return w(this,(function(n){var r=t.wrap(n);return r.length>0&&e(r)}))}}()},{key:"get",value:function(){return function(e){return this.getElements()[e]}}()},{key:"at",value:function(){return function(e){var t=this.getNodesInternal();return e<t.length?this.wrap(t[e]):this.wrap([])}}()},{key:"first",value:function(){return function(){return this.at(0)}}()},{key:"last",value:function(){return function(){return this.at(this.length-1)}}()},{key:"isEmpty",value:function(){return function(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}}()},{key:"exists",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>0?this.find(e).exists():this.length>0}}()},{key:"single",value:function(){return function(e,t){var n="string"==typeof e?e:"unknown",r="function"==typeof t?t:e;if(1!==this.length)throw new Error("Method \u201c"+n+"\u201d is meant to be run on 1 node. "+String(this.length)+" found instead.");return r.call(this,this.getNodeInternal())}}()},{key:"wrap",value:function(){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[v];if(t instanceof e)return t;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat([t,n],i)))}}()},{key:"debug",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.debugNodes)(this.getNodesInternal(),e)}}()},{key:"tap",value:function(){return function(e){return e(this),this}}()},{key:"detach",value:function(){return function(){if(this[v]!==this)throw new Error("ReactWrapper::detach() can only be called on the root");if(!this[b].attachTo)throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");this[g].unmount()}}()},{key:"hostNodes",value:function(){return function(){return this.filterWhere((function(e){return"string"==typeof e.type()}))}}()}]),e}(),C=function(e){function t(e,n){f(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.getNode(),e));return(0,a.privateSet)(r,v,r),(0,a.privateSet)(r,g,n),r[E].push(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"getWrappingComponent",value:function(){return function(){throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root")}}()}]),t}(I);function P(e,t){Object.defineProperty(I.prototype,e,{get:function(){return function(){throw new Error("\n        Attempted to access ReactWrapper::"+String(e)+", which was previously a private property on\n        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.\n        "+String(t)+"\n      ")}}(),enumerable:!1,configurable:!1})}a.ITERATOR_SYMBOL&&Object.defineProperty(I.prototype,a.ITERATOR_SYMBOL,{configurable:!0,value:function(){return function(){var e,t=this[m][a.ITERATOR_SYMBOL](),n=(0,s.default)(this[b]);return p(e={},a.ITERATOR_SYMBOL,(function(){return this})),p(e,"next",function(){return function(){var e=t.next();return e.done?{done:!0}:{done:!1,value:n.nodeToElement(e.value)}}}()),e}}()}),P("node","Consider using the getElement() method instead."),P("nodes","Consider using the getElements() method instead."),P("renderer",""),P("options",""),P("complexSelector",""),e.default=I}(cO);var Gq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)}}(),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=f(ck),o=f(uR),a=f(fR),s=f(kR),l=dR,c=f(iX),u=AX,h=tX,p=yY;function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,l.sym)("__node__"),v=(0,l.sym)("__nodes__"),b=(0,l.sym)("__renderer__"),_=(0,l.sym)("__unrendered__"),T=(0,l.sym)("__root__"),E=(0,l.sym)("__options__"),S=(0,l.sym)("__setState__"),w=(0,l.sym)("__rootNodes__"),A=(0,l.sym)("__childContext__"),O=(0,l.sym)("__wrappingComponent__"),x=(0,l.sym)("__primaryWrapper__"),k=(0,l.sym)("__rootFinder__"),I=(0,l.sym)("__providerValues__");function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.treeFilter;return e.flatMap((function(e){return n(e.getNodeInternal(),t)}))}function P(e,t){return e.wrap(e.getNodesInternal().filter(t).filter(Boolean))}function D(e){var t=e.options,n=t.lifecycles,r=void 0===n?{}:n,o=t.enableComponentDidUpdateOnSetState,a=t.supportPrevContextArgumentOfComponentDidUpdate,s=typeof o<"u",l=typeof a<"u",c=s||l?(0,i.default)({},s&&{onSetState:!!o},l&&{prevContext:!!a}):null,u=r.getDerivedStateFromProps,h=!!u&&{hasShouldComponentUpdateBug:!!u.hasShouldComponentUpdateBug};return(0,i.default)({},r,{setState:(0,i.default)({},r.setState),getChildContext:(0,i.default)({calledByRenderer:!0},r.getChildContext)},c&&{componentDidUpdate:c},{getDerivedStateFromProps:h})}function R(e){return"host"===e.nodeType?e:e.rendered}function N(e){if(1!==e[T].length)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return e[T]!==e?e[w][0]:e[T][y]}function M(e,t){return(0,h.parentsOfNode)(t,N(e))}function L(e,t){Array.isArray(t)?((0,l.privateSet)(e,y,t[0]),(0,l.privateSet)(e,v,t)):((0,l.privateSet)(e,y,t),(0,l.privateSet)(e,v,[t])),(0,l.privateSet)(e,"length",e[v].length)}function j(e,t,n,r){return!(0,s.default)(e,t)||!(0,s.default)(n,r)}function B(e){return e&&e.isPureReactComponent}function F(e,t,n,i,o){var a=t[b];if("parent"===e.options.legacyContextMode)if(o)(0,l.privateSet)(t,A,o.getLastReturnValue()),o.restore();else if("function"==typeof n.getChildContext){var s=function(e,t,n){var i=e.instance,o=e.type,a=(0,l.displayNameOfNode)(e);if("object"!==r(o.childContextTypes))return console.warn(String(a)+".getChildContext(): childContextTypes must be defined in order to use getChildContext()."),{};var s=i.getChildContext();return Object.keys(s).forEach((function(e){if(!(e in o.childContextTypes))throw new Error(String(a)+'.getChildContext(): key "'+String(e)+'" is not defined in childContextTypes.')})),"function"==typeof n.checkPropTypes&&n.checkPropTypes(o.childContextTypes,s,"child context",t),s}(i,[t[y]].concat(M(t,t[y])),a);(0,l.privateSet)(t,A,s)}else(0,l.privateSet)(t,A,null)}function G(e,t){if("function"==typeof e.type.getDerivedStateFromProps)var n=e.instance,r=(0,l.spyMethod)(n,"shouldComponentUpdate",(function(e){return function(){return function(){n.state=t;for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=e.apply(n,o),l=o[1];return n.state=l,i(),s}}()})),i=r.restore}function H(e,t,n){var r=e[y],i=r&&n.nodeToElement(r);if(e.type()===t)return e.dive();if(i&&(0,l.isCustomComponentElement)(i,n))return H(e.dive(),t,n);for(var o=e.children(),a=0;a<o.length;a+=1){var s=H(o.at(a),t,n);if(typeof s<"u")return s}}function U(e,t){var n=H(e,e[k],t);if(!n)throw new Error("`wrappingComponent` must render its children!");return{legacyContext:n[E].context,providerValues:n[I]}}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,i.default)({},e[E],t,{context:t.context||(0,i.default)({},e[E].context,e[T][A])});return(0,l.privateSet)(n,I,e[T][I]),n}var V=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m(this,e),function(e){var t=e.lifecycleExperimental,n=e.disableLifecycleMethods,r=e.enableComponentDidUpdateOnSetState,i=e.supportPrevContextArgumentOfComponentDidUpdate,o=e.lifecycles;if(typeof t<"u"&&"boolean"!=typeof t)throw new Error("lifecycleExperimental must be either true or false if provided");if(typeof n<"u"&&"boolean"!=typeof n)throw new Error("disableLifecycleMethods must be either true or false if provided");if(null!=t&&null!=n&&t===n)throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");if(typeof r<"u"&&o.componentDidUpdate&&o.componentDidUpdate.onSetState!==r)throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");if(typeof i<"u"&&o.componentDidUpdate&&o.componentDidUpdate.prevContext!==i)throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility")}(o);var a=function(e,t,n,r){var o=(0,l.makeOptions)(n),a=(0,c.default)(n);if((0,l.privateSet)(o,I,n[I]),t||!(0,l.isCustomComponent)(o.wrappingComponent,a))return o;if("function"!=typeof a.wrapWithWrappingComponent)throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");var s=a.wrapWithWrappingComponent(e,o),u=s.node,h=s.RootFinder,p=new Y(u,r,h),f=U(p,a),d=f.legacyContext,m=f.providerValues;return(0,l.privateSet)(r,O,p),(0,i.default)({},o,g({context:(0,i.default)({},o.context,d)},I,m))}(t,n,o,this),s=(0,c.default)(a),u=D(s);if(n)(0,l.privateSet)(this,T,n),(0,l.privateSet)(this,_,null),(0,l.privateSet)(this,b,n[b]),L(this,t),(0,l.privateSet)(this,E,n[E]),(0,l.privateSet)(this,w,n[v]),(0,l.privateSet)(this,I,null);else{if(!s.isValidElement(t))throw new TypeError("ShallowWrapper can only wrap valid elements");var h=u.getChildContext.calledByRenderer?function(e,t){return(0,l.isCustomComponentElement)(e,t)&&e.type.prototype&&"function"==typeof e.type.prototype.getChildContext?(0,l.spyMethod)(e.type.prototype,"getChildContext"):null}(t,s):null;(0,l.privateSet)(this,T,this),(0,l.privateSet)(this,_,t);var p=s.createRenderer((0,i.default)({mode:"shallow"},a));(0,l.privateSet)(this,b,p);var f=new Map(a[I]||[]);this[b].render(t,a.context,{providerValues:f});var y=this[b].getNode();L(this,R(y)),(0,l.privateSet)(this,E,a),(0,l.privateSet)(this,I,f);var A=y.instance;A&&!a.disableLifecycleMethods&&(u.componentDidUpdate.onSetState&&!A[S]&&((0,l.privateSet)(A,S,A.setState),A.setState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return r.setState.apply(r,d(null==t?[e]:[e,t]))}),"function"==typeof A.componentDidMount&&this[b].batchedUpdates((function(){A.componentDidMount()})),F(s,this,A,y,h))}}return n(e,[{key:"root",value:function(){return function(){return this[T]}}()},{key:"getNodeInternal",value:function(){return function(){if(1!==this.length)throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");return this[T]===this&&this.update(),this[y]}}()},{key:"getNodesInternal",value:function(){return function(){return this[T]===this&&1===this.length&&this.update(),this[v]}}()},{key:"getElement",value:function(){return function(){var e=this;return this.single("getElement",(function(t){return(0,c.default)(e[E]).nodeToElement(t)}))}}()},{key:"getElements",value:function(){return function(){var e=this;return this.getNodesInternal().map((function(t){return(0,c.default)(e[E]).nodeToElement(t)}))}}()},{key:"getNode",value:function(){return function(){throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead")}}()},{key:"getNodes",value:function(){return function(){throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead")}}()},{key:"instance",value:function(){return function(){if(this[T]!==this)throw new Error("ShallowWrapper::instance() can only be called on the root");return this[b].getNode().instance}}()},{key:"getWrappingComponent",value:function(){return function(){if(this[T]!==this)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");if(!this[E].wrappingComponent)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[O]}}()},{key:"update",value:function(){return function(){if(this[T]!==this)throw new Error("ShallowWrapper::update() can only be called on the root");if(1!==this.length)throw new Error("ShallowWrapper::update() can only be called when wrapping one node");return L(this,R(this[b].getNode())),this}}()},{key:"unmount",value:function(){return function(){return this[b].unmount(),this[T][O]&&this[T][O].unmount(),this}}()},{key:"rerender",value:function(){return function(e,t){var n=this,r=(0,c.default)(this[E]);return this.single("rerender",(function(){(0,l.withSetStateAllowed)((function(){var o=n[b].getNode(),a=o.instance||{},c=o.type||{},u=a.state,h=a.props||n[_].props,p=a.context||n[E].context,f=t||p;t&&(n[E]=(0,i.default)({},n[E],{context:f})),n[b].batchedUpdates((function(){var t=D(r),d=!0,m=void 0,g=void 0;if(!n[E].disableLifecycleMethods&&a){if("function"==typeof a.shouldComponentUpdate){var y=t.getDerivedStateFromProps;y&&y.hasShouldComponentUpdateBug&&G(o,u),m=(0,l.spyMethod)(a,"shouldComponentUpdate")}t.getChildContext.calledByRenderer&&"function"==typeof a.getChildContext&&(g=(0,l.spyMethod)(a,"getChildContext"))}if(!m&&B(a)&&(d=j(h,e,u,a.state)),e&&(n[_]=(0,l.cloneElement)(r,n[_],e)),n[b].render(n[_],f,{providerValues:n[I]}),m&&(d=m.getLastReturnValue(),m.restore()),d&&!n[E].disableLifecycleMethods&&a)if(F(r,n,a,o,g),t.getSnapshotBeforeUpdate){var v=void 0;"function"==typeof a.getSnapshotBeforeUpdate&&(v=a.getSnapshotBeforeUpdate(h,u)),t.componentDidUpdate&&"function"==typeof a.componentDidUpdate&&(!u||(0,s.default)(u,n.instance().state)||"function"==typeof c.getDerivedStateFromProps)&&a.componentDidUpdate(h,u,v)}else t.componentDidUpdate&&"function"==typeof a.componentDidUpdate&&(t.componentDidUpdate.prevContext?a.componentDidUpdate(h,u,p):(!u||(0,s.default)(n.instance().state,u))&&a.componentDidUpdate(h,u));else(0,s.default)(e,a.props)||(a.props=(Object.freeze||Object)((0,i.default)({},a.props,e)));n.update()}))}))})),this}}()},{key:"setProps",value:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[T]!==this)throw new Error("ShallowWrapper::setProps() can only be called on the root");if(arguments.length>1&&"function"!=typeof t)throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");return this.rerender(e),t&&t(),this}}()},{key:"setState",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[T]!==this)throw new Error("ShallowWrapper::setState() can only be called on the root");if(null===this.instance()||"class"!==this[b].getNode().nodeType)throw new Error("ShallowWrapper::setState() can only be called on class components");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.single("setState",(function(){(0,l.withSetStateAllowed)((function(){var r=(0,c.default)(t[E]),o=D(r),a=t[b].getNode(),s=a.instance,u=s.props,h=s.state,p=s.context,f="function"==typeof e?e.call(s,h,u):e,d=!o.setState.skipsComponentDidUpdateOnNullish||null!=f,m=void 0,g=void 0,y=!0;if(!t[E].disableLifecycleMethods&&s){if(o.componentDidUpdate&&o.componentDidUpdate.onSetState&&"function"==typeof s.shouldComponentUpdate){var v=o.getDerivedStateFromProps;v&&v.hasShouldComponentUpdateBug&&G(a,e),m=(0,l.spyMethod)(s,"shouldComponentUpdate")}o.getChildContext.calledByRenderer&&"function"==typeof s.getChildContext&&(g=(0,l.spyMethod)(s,"getChildContext"))}if(!m&&B(s)&&(y=j(u,s.props,h,(0,i.default)({},h,f))),s[S]?s[S](f):s.setState(f),m&&(y=m.getLastReturnValue(),m.restore()),d&&y&&!t[E].disableLifecycleMethods&&(F(r,t,s,a,g),o.componentDidUpdate&&o.componentDidUpdate.onSetState))if(o.getSnapshotBeforeUpdate&&"function"==typeof s.getSnapshotBeforeUpdate){var _=s.getSnapshotBeforeUpdate(u,h);"function"==typeof s.componentDidUpdate&&s.componentDidUpdate(u,h,_)}else"function"==typeof s.componentDidUpdate&&(o.componentDidUpdate.prevContext?s.componentDidUpdate(u,h,p):s.componentDidUpdate(u,h));t.update(),n&&(r.invokeSetStateCallback?r.invokeSetStateCallback(s,n):n.call(s))}))})),this}}()},{key:"setContext",value:function(){return function(e){if(this[T]!==this)throw new Error("ShallowWrapper::setContext() can only be called on the root");if(!this[E].context)throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this.rerender(null,e)}}()},{key:"contains",value:function(){return function(e){var t=(0,c.default)(this[E]);if(!(0,l.isReactElementAlike)(e,t))throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");return C(this,Array.isArray(e)?function(n){return(0,l.containsChildrenSubArray)(l.nodeEqual,n,e.map((function(e){return t.elementToNode(e)})))}:function(n){return(0,l.nodeEqual)(t.elementToNode(e),n)}).length>0}}()},{key:"containsMatchingElement",value:function(){return function(e){var t=(0,c.default)(this[E]).elementToNode(e);return C(this,function(){return function(e){return(0,l.nodeMatches)(t,e,(function(e,t){return e<=t}))}}()).length>0}}()},{key:"containsAllMatchingElements",value:function(){return function(e){var t=this;if(!Array.isArray(e))throw new TypeError("nodes should be an Array");return e.every((function(e){return t.containsMatchingElement(e)}))}}()},{key:"containsAnyMatchingElements",value:function(){return function(e){var t=this;return Array.isArray(e)&&e.some((function(e){return t.containsMatchingElement(e)}))}}()},{key:"equals",value:function(){return function(e){var t=this;return this.single("equals",(function(){return(0,l.nodeEqual)(t.getNodeInternal(),e)}))}}()},{key:"matchesElement",value:function(){return function(e){var t=this;return this.single("matchesElement",(function(){var n=(0,c.default)(t[E]).elementToNode(e);return(0,l.nodeMatches)(n,t.getNodeInternal(),(function(e,t){return e<=t}))}))}}()},{key:"find",value:function(){return function(e){return this.wrap((0,p.reduceTreesBySelector)(e,this.getNodesInternal()))}}()},{key:"is",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return this.single("is",(function(e){return t(e)}))}}()},{key:"isEmptyRender",value:function(){return function(){return this.getNodesInternal().every((function(e){return(0,l.isEmptyValue)(e)}))}}()},{key:"filterWhere",value:function(){return function(e){var t=this;return P(this,(function(n){return e(t.wrap(n))}))}}()},{key:"filter",value:function(){return function(e){return P(this,(0,p.buildPredicate)(e))}}()},{key:"not",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return P(this,(function(e){return!t(e)}))}}()},{key:"text",value:function(){return function(){return this.single("text",h.getTextFromNode)}}()},{key:"html",value:function(){return function(){var e=this;return this.single("html",(function(t){if(null===e.type())return null;var n=(0,c.default)(e[E]);return n.createRenderer((0,i.default)({},e[E],{mode:"string"})).render(n.nodeToElement(t))}))}}()},{key:"render",value:function(){return function(){var e=this.html();return(0,l.loadCheerioRoot)(e)}}()},{key:"simulate",value:function(){return function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.single("simulate",(function(n){var i;return(i=t[b]).simulateEvent.apply(i,[n,e].concat(r)),t[T].update(),t}))}}()},{key:"simulateError",value:function(){return function(e){var t=this;return this.single("simulateError",(function(n){if("host"===n.nodeType)throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");var r=t[b];if("function"!=typeof r.simulateError)throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var i=N(t),o=[n].concat(M(t,n));return r.simulateError(o,i,e),t}))}}()},{key:"props",value:function(){return function(){return this.single("props",h.propsOfNode)}}()},{key:"state",value:function(){return function(e){var t=this;if(this[T]!==this)throw new Error("ShallowWrapper::state() can only be called on the root");if(null===this.instance()||"class"!==this[b].getNode().nodeType)throw new Error("ShallowWrapper::state() can only be called on class components");var n=this.single("state",(function(){return t.instance().state}));if(typeof e<"u"){if(null==n)throw new TypeError('ShallowWrapper::state("'+String(e)+'") requires that `state` not be `null` or `undefined`');return n[e]}return n}}()},{key:"context",value:function(){return function(e){var t=this;if(this[T]!==this)throw new Error("ShallowWrapper::context() can only be called on the root");if(!this[E].context)throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");if(null===this.instance())throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");var n=this.single("context",(function(){return t.instance().context}));return e?n[e]:n}}()},{key:"children",value:function(){return function(e){var t=this.flatMap((function(e){return(0,h.childrenOfNode)(e.getNodeInternal())}));return e?t.filter(e):t}}()},{key:"childAt",value:function(){return function(e){var t=this;return this.single("childAt",(function(){return t.children().at(e)}))}}()},{key:"parents",value:function(){return function(e){var t=this;return this.single("parents",(function(n){var r=t.wrap(M(t,n));return e?r.filter(e):r}))}}()},{key:"parent",value:function(){return function(){return this.flatMap((function(e){return[e.parents().get(0)]}))}}()},{key:"closest",value:function(){return function(e){if(this.is(e))return this;var t=this.parents().filter(e);return t.length>0?t.first():this.findWhere((function(){return!1}))}}()},{key:"shallow",value:function(){return function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.single("shallow",(function(n){var r=z(e,t);return e.wrap((0,c.default)(e[E]).nodeToElement(n),null,r)}))}}()},{key:"prop",value:function(){return function(e){return this.props()[e]}}()},{key:"invoke",value:function(){return function(e){var t=this;return this.single("invoke",(function(){var n=t.prop(e);if("function"!=typeof n)throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");return function(){var e=n.apply(void 0,arguments);return t[T].update(),e}}))}}()},{key:"renderProp",value:function(){return function(e){var t=this,n=(0,c.default)(this[E]);if("function"!=typeof n.wrap)throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",(function(i){if("host"===i.nodeType)throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");if("string"!=typeof e)throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");var o=t.props();if(!(0,a.default)(o,e))throw new Error("ShallowWrapper::renderProp(): no prop called \u201c"+String(e)+"\u201c found");var s=o[e];if("function"!=typeof s)throw new TypeError("ShallowWrapper::renderProp(): expected prop \u201c"+String(e)+"\u201c to contain a function, but it holds \u201c"+(typeof s>"u"?"undefined":r(s))+"\u201c");return function(){var e=s.apply(void 0,arguments),r=n.wrap(e);return t.wrap(r,null,t[E])}}))}}()},{key:"key",value:function(){return function(){return this.single("key",(function(e){return void 0===e.key?null:e.key}))}}()},{key:"type",value:function(){return function(){return this.single("type",(function(e){return(0,l.typeOfNode)(e)}))}}()},{key:"name",value:function(){return function(){var e=(0,c.default)(this[E]);return this.single("name",(function(t){return e.displayNameOfNode?e.displayNameOfNode(t):(0,l.displayNameOfNode)(t)}))}}()},{key:"hasClass",value:function(){return function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",(function(t){return(0,h.hasClassName)(t,e)}))}}()},{key:"forEach",value:function(){return function(e){var t=this;return this.getNodesInternal().forEach((function(n,r){return e.call(t,t.wrap(n),r)})),this}}()},{key:"map",value:function(){return function(e){var t=this;return this.getNodesInternal().map((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"reduce",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce((function(n,r,i){return e.call(t,n,t.wrap(r),i)}),n):this.getNodesInternal().reduce((function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)}))}}()},{key:"reduceRight",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight((function(n,r,i){return e.call(t,n,t.wrap(r),i)}),n):this.getNodesInternal().reduceRight((function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)}))}}()},{key:"slice",value:function(){return function(e,t){return this.wrap(this.getNodesInternal().slice(e,t))}}()},{key:"some",value:function(){return function(e){if(this[T]===this)throw new Error("ShallowWrapper::some() can not be called on the root");var t=(0,p.buildPredicate)(e);return this.getNodesInternal().some(t)}}()},{key:"someWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().some((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"every",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return this.getNodesInternal().every(t)}}()},{key:"everyWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().every((function(n,r){return e.call(t,t.wrap(n),r)}))}}()},{key:"flatMap",value:function(){return function(e){var t=this,n=this.getNodesInternal().map((function(n,r){return e.call(t,t.wrap(n),r)})),r=(0,o.default)(n,1);return this.wrap(r.filter(Boolean))}}()},{key:"findWhere",value:function(){return function(e){var t=this;return C(this,(function(n){var r=t.wrap(n);return r.length>0&&e(r)}))}}()},{key:"get",value:function(){return function(e){return this.getElements()[e]}}()},{key:"at",value:function(){return function(e){var t=this.getNodesInternal();return e<t.length?this.wrap(t[e]):this.wrap([])}}()},{key:"first",value:function(){return function(){return this.at(0)}}()},{key:"last",value:function(){return function(){return this.at(this.length-1)}}()},{key:"isEmpty",value:function(){return function(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}}()},{key:"exists",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>0?this.find(e).exists():this.length>0}}()},{key:"single",value:function(){return function(e,t){var n="string"==typeof e?e:"unknown",r="function"==typeof t?t:e;if(1!==this.length)throw new Error("Method \u201c"+n+"\u201d is meant to be run on 1 node. "+String(this.length)+" found instead.");return r.call(this,this.getNodeInternal())}}()},{key:"wrap",value:function(){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[T];if(t instanceof e)return t;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat([t,n],i)))}}()},{key:"debug",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.debugNodes)(this.getNodesInternal(),e)}}()},{key:"tap",value:function(){return function(e){return e(this),this}}()},{key:"dive",value:function(){return function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,c.default)(this[E]),r="dive";return this.single(r,(function(r){if(r&&"host"===r.nodeType)throw new TypeError("ShallowWrapper::dive() can not be called on Host Components");var i=(0,c.default)(e[E]).nodeToElement(r);if(!(0,l.isCustomComponentElement)(i,n))throw new TypeError("ShallowWrapper::dive() can only be called on components");var o=z(e,t);return e.wrap(i,null,o)}))}}()},{key:"hostNodes",value:function(){return function(){return this.filterWhere((function(e){return"string"==typeof e.type()}))}}()}]),e}();function X(e){var t=(0,c.default)(e[E]),n=e[x],r=n[b].getNode(),o=U(e,t),a=o.legacyContext,s=o.providerValues,l=n[I];if(n.setContext((0,i.default)({},e[x][E].context,a)),n[I]=new Map([].concat(d(l),d(s))),"function"==typeof t.isContextConsumer&&t.isContextConsumer(r.type)){var u=r.type,h=t.getProviderFromConsumer(u);s.get(h)!==l.get(h)&&n.rerender()}}var Y=function(e){function r(e,t,n){m(this,r);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return(0,l.privateSet)(i,x,t),(0,l.privateSet)(i,k,n),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),n(r,[{key:"rerender",value:function(){return function(){for(var e,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=(e=t(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"rerender",this)).call.apply(e,[this].concat(i));return X(this),a}}()},{key:"setState",value:function(){return function(){for(var e,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=(e=t(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setState",this)).call.apply(e,[this].concat(i));return X(this),a}}()},{key:"getWrappingComponent",value:function(){return function(){throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root")}}()}]),r}(V);function W(e,t){Object.defineProperty(V.prototype,e,{get:function(){return function(){throw new Error("\n        Attempted to access ShallowWrapper::"+String(e)+", which was previously a private property on\n        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.\n        "+String(t)+"\n      ")}}(),enumerable:!1,configurable:!1})}l.ITERATOR_SYMBOL&&Object.defineProperty(V.prototype,l.ITERATOR_SYMBOL,{configurable:!0,value:function(){return function(){var e,t=this.getNodesInternal()[l.ITERATOR_SYMBOL](),n=(0,c.default)(this[E]);return g(e={},l.ITERATOR_SYMBOL,(function(){return this})),g(e,"next",function(){return function(){var e=t.next();return e.done?{done:!0}:{done:!1,value:n.nodeToElement(e.value)}}}()),e}}()}),W("node","Consider using the getElement() method instead."),W("nodes","Consider using the getElements() method instead."),W("renderer",""),W("options",""),W("complexSelector",""),e.default=V}(Gq);var Hq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return new n.default(e,null,t)};var t,n=(t=cO)&&t.__esModule?t:{default:t}}(Hq);var Uq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return new n.default(e,null,t)};var t,n=(t=Gq)&&t.__esModule?t:{default:t}}(Uq);var zq={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,n.default)(i).createRenderer((0,t.default)({mode:"string"},i)).render(e,i.context);return(0,r.loadCheerioRoot)(o)};var t=i(ck),n=i(iX),r=dR;function i(e){return e&&e.__esModule?e:{default:e}}}(zq);var Vq=Qq(cO),Xq=Qq(Gq),Yq=Qq($V),Wq=Qq(Hq),qq=Qq(Uq),$q=Qq(zq),Kq=VV;function Qq(e){return e&&e.__esModule?e:{default:e}}var Zq={render:$q.default,shallow:qq.default,mount:Wq.default,ShallowWrapper:Xq.default,ReactWrapper:Vq.default,configure:Kq.merge,EnzymeAdapter:Yq.default};const Jq=(e,t)=>{(e=>{for(const t of e.iterateOverTracks())if(aO(e,t.viewId,t.trackId).activeTransitions>0)return!0;return!1})(e)?setTimeout((()=>{Jq(e,t)}),100):t()},e$=e=>{Rw>0?setTimeout((()=>e$(e)),100):e()},t$=(e,t)=>{(e=>{for(const t of e.iterateOverTracks()){let n=oO(e,t.viewId,t.trackId);if(t.track.server||t.track.tilesetUid||t.track.data&&"divided"===t.track.data.type){if(!(t.track.data&&"divided"===t.track.data.type||t.track.server&&t.track.tilesetUid))throw Error('"server" and "tilesetUid" belong together');if(n.originalTrack&&(n=n.originalTrack),!n.tilesetInfo&&!n.chromInfo||n.fetching&&n.fetching.size)return!0}}return!1})(e)?setTimeout((()=>{t$(e,t)}),100):t()},n$=function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{style:a="width:800px; background-color: lightgreen;",bounded:s=!1,extendedDelay:l=!1}=o;t&&(t.unmount(),t.detach()),e&&globalThis.document.body.removeChild(e);const c=globalThis.document.createElement("div");globalThis.document.body.appendChild(c),c.setAttribute("style",a),c.setAttribute("id","simple-hg-component");const u=Zq.mount(i.createElement(Mwe,{options:{bounded:s},viewConfig:n}),{attachTo:c});return u.update(),e$((()=>{if(l){const e=()=>setTimeout((()=>{r()}),1e3);t$(u.instance(),e)}else t$(u.instance(),r)})),[c,u]};var r$,i$,o$=0,a$=0,s$=0,l$=1e3,c$=0,u$=0,h$=0,p$="object"==typeof performance&&performance.now?performance:Date,f$="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d$(){return u$||(f$(m$),u$=p$.now()+h$)}function m$(){u$=0}function g$(){this._call=this._time=this._next=null}function y$(e,t,n){var r=new g$;return r.restart(e,t,n),r}function v$(){u$=(c$=p$.now())+h$,o$=a$=0;try{!function(){d$(),++o$;for(var e,t=r$;t;)(e=u$-t._time)>=0&&t._call.call(void 0,e),t=t._next;--o$}()}finally{o$=0,function(){for(var e,t,n=r$,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:r$=t);i$=e,_$(r)}(),u$=0}}function b$(){var e=p$.now(),t=e-c$;t>l$&&(h$-=t,c$=e)}function _$(e){o$||(a$&&(a$=clearTimeout(a$)),e-u$>24?(e<1/0&&(a$=setTimeout(v$,e-p$.now()-h$)),s$&&(s$=clearInterval(s$))):(s$||(c$=p$.now(),s$=setInterval(b$,l$)),o$=1,f$(v$)))}function T$(e,t,n){var r=new g$;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}g$.prototype=y$.prototype={constructor:g$,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?d$():+n)+(null==t?0:+t),!this._next&&i$!==this&&(i$?i$._next=this:r$=this,i$=this),this._call=e,this._time=n,_$()},stop:function(){this._call&&(this._call=null,this._time=1/0,_$())}};var E$=zb("start","end","cancel","interrupt"),S$=[],w$=0,A$=1,O$=2,x$=3,k$=4,I$=5,C$=6;function P$(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=A$,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,p;if(n.state!==A$)return l();for(c in i)if((p=i[c]).name===n.name){if(p.state===x$)return T$(a);p.state===k$?(p.state=C$,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=C$,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(T$((function(){n.state===x$&&(n.state=k$,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=O$,n.on.call("start",e,e.__data__,n.index,n.group),n.state===O$){for(n.state=x$,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=I$,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===I$&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=C$,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=y$(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:E$,tween:S$,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:w$})}function D$(e,t){var n=N$(e,t);if(n.state>w$)throw new Error("too late; already scheduled");return n}function R$(e,t){var n=N$(e,t);if(n.state>x$)throw new Error("too late; already running");return n}function N$(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function M$(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>O$&&n.state<I$,n.state=C$,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function L$(e,t){var n,r;return function(){var i=R$(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function j$(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=R$(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function B$(e,t,n){var r=e._id;return e.each((function(){var e=R$(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return N$(e,r).value[t]}}function F$(e,t){var n;return("number"==typeof t?Yh:t instanceof qu?Uh:(n=qu(t))?(t=n,Uh):Kh)(e,t)}function G$(e){return function(){this.removeAttribute(e)}}function H$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U$(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function z$(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function V$(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function X$(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function Y$(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function W$(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function q$(e,t){return function(){D$(this,e).delay=+t.apply(this,arguments)}}function K$(e,t){return t=+t,function(){D$(this,e).delay=t}}function Q$(e,t){return function(){R$(this,e).duration=+t.apply(this,arguments)}}function Z$(e,t){return t=+t,function(){R$(this,e).duration=t}}var J$=Wl.prototype.constructor;function eK(e){return function(){this.style.removeProperty(e)}}var tK=0;function nK(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function rK(e){return Wl().transition(e)}function iK(){return++tK}var oK=Wl.prototype;nK.prototype=rK.prototype={constructor:nK,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Vs(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,P$(h[p],t,n,p,h,N$(s,n)));return new nK(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ws(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),d=N$(l,n),m=0,g=f.length;m<g;++m)(p=f[m])&&P$(p,t,n,m,f,d);o.push(f),a.push(l)}return new nK(o,a,t,n)},selectChild:oK.selectChild,selectChildren:oK.selectChildren,filter:function(e){"function"!=typeof e&&(e=qs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new nK(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new nK(a,this._parents,this._name,this._id)},selection:function(){return new J$(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=iK(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=N$(a,t);P$(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nK(r,this._parents,e,n)},call:oK.call,nodes:oK.nodes,node:oK.node,size:oK.size,empty:oK.empty,each:oK.each,on:function(e,t){var n=this._id;return arguments.length<2?N$(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?D$:R$;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=Fs(e),r="transform"===n?op:F$;return this.attrTween(e,"function"==typeof t?(n.local?X$:V$)(n,r,B$(this,"attr."+e,t)):null==t?(n.local?H$:G$)(n):(n.local?z$:U$)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Fs(e);return this.tween(n,(r.local?Y$:W$)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?ip:F$;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=gl(this,e),a=(this.style.removeProperty(e),gl(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,eK(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=gl(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=gl(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,B$(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=R$(this,e),c=l.on,u=null==l.value[a]?o||(o=eK(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=gl(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(B$(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=N$(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?L$:j$)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?q$:K$)(t,e)):N$(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Q$:Z$)(t,e)):N$(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){R$(this,e).ease=t}}(t,e)):N$(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;R$(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each((function(){var n=R$(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:oK[Symbol.iterator]};var aK={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function sK(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Wl.prototype.interrupt=function(e){return this.each((function(){M$(this,e)}))},Wl.prototype.transition=function(e){var t,n;e instanceof nK?(t=e._id,e=e._name):(t=iK(),(n=aK).time=d$(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&P$(a,e,t,c,s,n||sK(a,t));return new nK(r,this._parents,e,t)};var lK=[null];const cK=Object.freeze(Object.defineProperty({__proto__:null,active:function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>A$&&n.name===t)return new nK([[e]],lK,t,+r);return null},interrupt:M$,transition:rK},Symbol.toStringTag,{value:"Module"})),uK=e=>()=>e;function hK(e,t){let{sourceEvent:n,target:r,transform:i,dispatch:o}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function pK(e,t,n){this.k=e,this.x=t,this.y=n}pK.prototype={constructor:pK,scale:function(e){return 1===e?this:new pK(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new pK(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fK=new pK(1,0,0);function dK(e){for(;!e.__zoom;)if(!(e=e.parentNode))return fK;return e.__zoom}function mK(e){e.stopImmediatePropagation()}function gK(e){e.preventDefault(),e.stopImmediatePropagation()}function yK(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function vK(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function bK(){return this.__zoom||fK}function _K(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function TK(){return navigator.maxTouchPoints||"ontouchstart"in this}function EK(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function SK(){var e,t,n,r=yK,i=vK,o=EK,a=_K,s=TK,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=sp,p=zb("start","zoom","end"),f=500,d=150,m=0,g=10;function y(e){e.property("__zoom",bK).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new pK(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new pK(e.k,r,i)}function _(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function T(e,t,n,r){e.on("start.zoom",(function(){E(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){E(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,a=E(e,o).event(r),s=i.apply(e,o),l=null==n?_(s):"function"==typeof n?n.apply(e,o):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,p="function"==typeof t?t.apply(e,o):t,f=h(u.invert(l).concat(c/u.k),p.invert(l).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=c/t[2];e=new pK(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function E(e,t,n){return!n&&e.__zooming||new S(e,t)}function S(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=E(this,n).event(e),u=this.__zoom,h=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,a.apply(this,arguments)))),p=Jl(e);if(s.wheel)(s.mouse[0][0]!==p[0]||s.mouse[0][1]!==p[1])&&(s.mouse[1]=u.invert(s.mouse[0]=p)),clearTimeout(s.wheel);else{if(u.k===h)return;s.mouse=[p,u.invert(p)],M$(this),s.start()}gK(e),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),d),s.zoom("mouse",o(b(v(u,h),s.mouse[0],s.mouse[1]),s.extent,c))}}function A(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=E(this,i,!0).event(e),u=ql(e.view).on("mousemove.zoom",(function(e){if(gK(e),!l.moved){var t=e.clientX-p,n=e.clientY-f;l.moved=t*t+n*n>m}l.event(e).zoom("mouse",o(b(l.that.__zoom,l.mouse[0]=Jl(e,s),l.mouse[1]),l.extent,c))}),!0).on("mouseup.zoom",(function(e){u.on("mousemove.zoom mouseup.zoom",null),Kb(e.view,l.moved),gK(e),l.event(e).end()}),!0),h=Jl(e,s),p=e.clientX,f=e.clientY;$b(e.view),mK(e),l.mouse=[h,this.__zoom.invert(h)],M$(this),l.start()}}function O(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,l=Jl(e.changedTouches?e.changedTouches[0]:e,this),h=s.invert(l),p=s.k*(e.shiftKey?.5:2),f=o(b(v(s,p),l,h),i.apply(this,n),c);gK(e),u>0?ql(this).transition().duration(u).call(T,f,l,e):ql(this).call(y.transform,f,l,e)}}function x(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(r.apply(this,arguments)){var s,l,c,u,h=n.touches,p=h.length,d=E(this,o,n.changedTouches.length===p).event(n);for(mK(n),l=0;l<p;++l)u=[u=Jl(c=h[l],this),this.__zoom.invert(u),c.identifier],d.touch0?!d.touch1&&d.touch0[2]!==u[2]&&(d.touch1=u,d.taps=0):(d.touch0=u,s=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),f)),M$(this),d.start())}}function k(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s,l,u=E(this,n).event(e),h=e.changedTouches,p=h.length;for(gK(e),i=0;i<p;++i)s=Jl(a=h[i],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],d=u.touch0[1],m=u.touch1[0],g=u.touch1[1],y=(y=m[0]-f[0])*y+(y=m[1]-f[1])*y,_=(_=g[0]-d[0])*_+(_=g[1]-d[1])*_;a=v(a,Math.sqrt(y/_)),s=[(f[0]+m[0])/2,(f[1]+m[1])/2],l=[(d[0]+g[0])/2,(d[1]+g[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",o(b(a,s,l),u.extent,c))}}function I(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var a,s,l=E(this,i).event(e),c=e.changedTouches,u=c.length;for(mK(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),a=0;a<u;++a)s=c[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=Jl(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<g)){var h=ql(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return y.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",bK),e!==i?T(e,t,n,r):i.interrupt().each((function(){E(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},y.scaleBy=function(e,t,n,r){y.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},y.scaleTo=function(e,t,n,r){y.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?_(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return o(b(v(r,l),a,s),e,c)}),n,r)},y.translateBy=function(e,t,n,r){y.transform(e,(function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},y.translateTo=function(e,t,n,r,a){y.transform(e,(function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?_(e):"function"==typeof r?r.apply(this,arguments):r;return o(fK.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,a)},S.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ql(this.that).datum();p.call(e,this.that,new hK(e,{sourceEvent:this.sourceEvent,target:y,type:e,transform:this.that.__zoom,dispatch:p}),t)}},y.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:uK(+e),y):a},y.filter=function(e){return arguments.length?(r="function"==typeof e?e:uK(!!e),y):r},y.touchable=function(e){return arguments.length?(s="function"==typeof e?e:uK(!!e),y):s},y.extent=function(e){return arguments.length?(i="function"==typeof e?e:uK([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),y):i},y.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],y):[l[0],l[1]]},y.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],y):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},y.constrain=function(e){return arguments.length?(o=e,y):o},y.duration=function(e){return arguments.length?(u=+e,y):u},y.interpolate=function(e){return arguments.length?(h=e,y):h},y.on=function(){var e=p.on.apply(p,arguments);return e===p?y:e},y.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,y):Math.sqrt(m)},y.tapDistance=function(e){return arguments.length?(g=+e,y):g},y}dK.prototype=pK.prototype;const wK=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:pK,zoom:SK,zoomIdentity:fK,zoomTransform:dK},Symbol.toStringTag,{value:"Module"}));function AK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OK(r.key),r)}}function OK(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let xK=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.pAxis=new nS.PIXI.Graphics,this.track=t,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10}return function(e,t,n){t&&AK(e.prototype,t),n&&AK(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"startAxis",value:function(e){const t=this.pAxis;t.clear(),t.lineStyle(1,this.track.getTheme()===eS?CS("#ffffff"):0,1),t.moveTo(0,0),t.lineTo(0,e)}},{key:"createAxisTexts",value:function(e,t){this.tickValues=this.calculateAxisTickValues(e,t);let n=0;const r=this.track.getTheme()===eS?"white":"black";for(this.track.options&&this.track.options.axisLabelFormatting&&"scientific"!==this.track.options.axisLabelFormatting?this.tickFormat=e=>e:this.tickFormat=xp(".2");n<this.tickValues.length;){const e=this.tickValues[n];for(;this.axisTexts.length<=n;){const t=new nS.PIXI.Text(e,{fontSize:`${this.axisTextFontSize}px`,fontFamily:this.axisTextFontFamily,fill:r});this.axisTexts.push(t),this.pAxis.addChild(t)}this.axisTexts[n].text=this.tickFormat(e),this.axisTexts[n].anchor.y=.5,this.axisTexts[n].anchor.x=.5,n++}for(;this.axisTexts.length>this.tickValues.length;){const e=this.axisTexts.pop();this.pAxis.removeChild(e),e.destroy(!0)}}},{key:"calculateAxisTickValues",value:function(e,t){const n=Math.max(Math.ceil(t/40),1);let r=e.ticks(n);return r.length<1&&(r=e.ticks(n+1),r.length>1&&(r=[r[0]])),r}},{key:"drawAxisLeft",value:function(e,t){this.startAxis(t),this.createAxisTexts(e,t);const n=this.pAxis;this.track.getTheme()===eS&&n.lineStyle(n.lineWidth||n._lineStyle.width,CS("#ffffff")),n.moveTo(0,0),n.lineTo(-5,0),n.moveTo(0,t),n.lineTo(-5,t);for(let r=0;r<this.axisTexts.length;r++){const t=this.tickValues[r];this.axisTexts[r].x=-(9+this.axisTexts[r].width/2),this.axisTexts[r].y=e(t),n.moveTo(-0,e(t)),n.lineTo(-5,e(t)),this.track&&this.track.flipText&&(this.axisTexts[r].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(e,t){this.startAxis(t),this.createAxisTexts(e,t);const n=this.pAxis;this.track.getTheme()===eS&&n.lineStyle(n.lineWidth||n._lineStyle.width,CS("#ffffff")),n.moveTo(0,0),n.lineTo(5,0),n.moveTo(0,t),n.lineTo(5,t);for(let r=0;r<this.axisTexts.length;r++){const t=this.tickValues[r];this.axisTexts[r].x=9+this.axisTexts[r].width/2,this.axisTexts[r].y=e(t),n.moveTo(0,e(t)),n.lineTo(5,e(t)),this.track&&this.track.flipText&&(this.axisTexts[r].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(let e=this.axisTexts.length-1;e>=0;e--)this.axisTexts[e].visible=!0;for(let e=this.axisTexts.length-1;e>=0;e--){if(!this.axisTexts[e].visible)continue;let t=e-1;for(;t>=0&&this.axisTexts[e].y+this.axisTexts[e].height/2>this.axisTexts[t].y-this.axisTexts[t].height/2;)this.axisTexts[t].visible=!1,t-=1}}},{key:"exportVerticalAxis",value:function(e){const t=document.createElement("g");t.setAttribute("class","axis-vertical");let n="black";this.track&&this.track.options.lineStrokeColor&&(n=this.track.options.lineStrokeColor),this.track.getTheme()===eS&&(n="#cccccc");const r=document.createElement("path");return r.setAttribute("fill","transparent"),r.setAttribute("stroke",n),r.setAttribute("id","axis-line"),r.setAttribute("d",`M0,0 L0,${e}`),t.appendChild(r),t}},{key:"createAxisSVGLine",value:function(){let e="black";this.track&&this.track.options.lineStrokeColor&&(e=this.track.options.lineStrokeColor),this.track.getTheme()===eS&&(e="#cccccc");const t=document.createElement("path");return t.setAttribute("id","tick-mark"),t.setAttribute("fill","transparent"),t.setAttribute("stroke",e),t}},{key:"createAxisSVGText",value:function(e){const t=document.createElement("text");return t.innerHTML=e,t.setAttribute("id","axis-text"),t.setAttribute("text-anchor","middle"),t.setAttribute("font-family",this.axisTextFontFamily),t.setAttribute("font-size",this.axisTextFontSize),t.setAttribute("dy",this.axisTextFontSize/2-2),t}},{key:"exportAxisLeftSVG",value:function(e,t){const n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L5,0");const i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${t} L5,${t}`);for(let o=0;o<this.axisTexts.length;o++){const t=this.tickValues[o],r=this.axisTexts[o],i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${e(t)} L5,${e(t)}`);const a=document.createElement("g");if(n.appendChild(a),r.visible){const e=this.createAxisSVGText(r.text);a.appendChild(e)}a.setAttribute("transform",`translate(${r.position.x},${r.position.y})\n             scale(${r.scale.x},${r.scale.y})`)}return n}},{key:"exportAxisRightSVG",value:function(e,t){const n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L-5,0");const i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${t} L-5,${t}`);for(let o=0;o<this.axisTexts.length;o++){const t=this.tickValues[o],r=this.axisTexts[o],i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${e(t)} L-5,${e(t)}`);const a=document.createElement("g");if(n.appendChild(a),r.visible){const e=this.createAxisSVGText(r.text);a.appendChild(e)}a.setAttribute("transform",`translate(${r.position.x},${r.position.y})\n             scale(${r.scale.x},${r.scale.y})`)}return n}},{key:"clearAxis",value:function(){const e=this.pAxis;for(;this.axisTexts.length;){const t=this.axisTexts.pop();e.removeChild(t)}e.clear()}}]),e}();const kK=(e,t)=>{const n=[];for(let r=e;r<t;r++)n.push(r);return n},IK=(e,t,n)=>{if(typeof n>"u"&&(n=Number.MAX_SAFE_INTEGER),e.resolutions)return((e,t)=>{const n=e.map((e=>+e)).sort(((e,t)=>t-e)),r=t.range()[1]-t.range()[0],i=n.map((e=>(t.domain()[1]-t.domain()[0])/e)).map((e=>e/r)),o=i.filter((e=>e<1));return 0===o.length?0:i.indexOf(o[o.length-1])})(e.resolutions,t,e.min_pos[0],e.max_pos[0]);const r=((e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,l=0;return r&&(l=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=l,s})(t,e.min_pos[0],e.max_pos[0],e.bins_per_dimension||e.tile_size),i=Math.min(r,n);return Math.max(i,0)};const CK={calculate1DVisibleTiles:(e,t)=>{if(!e)return[];const n=IK(e,t,e.max_zoom);if(e.resolutions){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE;const i=e*(arguments.length>4&&void 0!==arguments[4]?arguments[4]:256),o=Math.max(0,Math.floor((t.domain()[0]-n)/i)),a=Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/i);let s=kK(o,a);return s.length>20&&(console.warn(`Too many visible tiles: ${s.length} truncating to 20`),s=s.slice(0,20)),s}(e.resolutions.map((e=>+e)).sort(((e,t)=>t-e))[n],t,e.min_pos[0],e.max_pos[0]).map((e=>[n,e]))}return((e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return kK(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))})(n,t,e.min_pos[0],e.max_pos[0],e.max_zoom,e.max_width).map((e=>[n,e]))},calculate1DZoomLevel:IK,drawAxis:(e,t)=>{if(e.axis||(e.axis=new xK(e),e.pBase.addChild(e.axis.pAxis)),!e.options.axisPositionVertical&&!e.options.axisPositionHorizontal)return void e.axis.clearAxis();if(e.options.axisPositionVertical&&"hidden"===e.options.axisPositionVertical)return void e.axis.clearAxis();if(e.options.axisPositionHorizontal&&"hidden"===e.options.axisPositionHorizontal)return void e.axis.clearAxis();const n=e.options.axisMargin||0;"left"===e.options.axisPositionHorizontal||"top"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1])):"outsideLeft"===e.options.axisPositionHorizontal||"outsideTop"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):"right"===e.options.axisPositionHorizontal||"bottom"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):("outsideRight"===e.options.axisPositionHorizontal||"outsideBottom"===e.options.axisPositionVertical)&&(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1]))},movedY:(e,t)=>{const n=e.valueScaleTransform,{y:r,k:i}=n;r+t/i>-(i-1)*e.dimensions[1]&&r+t/i<0&&(e.valueScaleTransform=n.translate(0,t/i)),Object.values(e.fetchedTiles).forEach((t=>{t.graphics.position.y=e.valueScaleTransform.y})),e.animate()},getTilePosAndDimensions:(e,t)=>{const n=+t.split(".")[0],r=+t.split(".")[1],i=e.max_width/2**n;return{tileX:e.min_pos[0]+r*i,tileWidth:i}},stretchRects:function(e,t){Object.values(e.fetchedTiles).forEach((n=>{if(!n.drawnAtScale)return;const r=n.drawnAtScale.range(),i=e._xScale.range();if(r[0]!==i[0]||r[1]!==i[1])return void e.renderTile(n);const o=(n.drawnAtScale.domain()[1]-n.drawnAtScale.domain()[0])/(e._xScale.domain()[1]-e._xScale.domain()[0]);if(o>2||o<.5)e.renderTile(n);else{const r=e._xScale.domain().map(n.drawnAtScale)[0];for(const e of t)e(n).scale.x=o,e(n).x=-r*o}}))},zoomedY:(e,t,n,r)=>{const i=n.k,o=n.y,a=(e-o)/i,s=Math.max(i/t,1);let l=i*a+o-s*a;return l=Math.max(l,-(s-1)*r),l=Math.min(l,0),fK.translate(0,l).scale(s)}},PK=Object.freeze(Object.defineProperty({__proto__:null,DenseDataExtrema1D:ZA,DenseDataExtrema2D:tO,IS_TRACK_RANGE_SELECTABLE:iO,absToChr:FE,accessorTransposition:GE,addArrays:UE,addClass:(e,t)=>{if("http://www.w3.org/2000/svg"===e.namespaceURI){if(!zE(e,t)){const n=e.getAttribute("class")||"";e.setAttribute("class",`${n} ${t}`)}}else e.classList?e.classList.add(t):zE(e,t)||(e.className+=` ${t}`)},base64ToCanvas:(e,t,n)=>{const r=document.createElement("canvas");return new Promise(((i,o)=>{const a=new window.Image;a.onload=()=>{r.width=t||a.width,r.height=n||a.height;const e=r.getContext("2d");e?(e.drawImage(a,0,0),i(r)):o(new Error("Could not get canvas context"))},a.onerror=()=>{o(new Error("Could not convert base64 to canvas"))},a.src=`data:image/png;base64,${e}`}))},changeOptions:(e,t,n,r)=>{for(const{viewId:i,trackId:o,track:a}of e.instance().iterateOverTracks())i===t&&o===n&&(a.options={...a.options,...r});e.setState(e.instance().state)},chrToAbs:VE,chromInfoBisector:BE,cloneEvent:XE,colorDomainToRgbaArray:YE,colorToHex:CS,colorToRgba:PS,dataToGenomicLoci:DS,debounce:RS,decToHexStr:NS,dictFromTuples:MS,dictItems:LS,dictKeys:jS,dictValues:BS,download:FS,expandCombinedTracks:HA,fillInMinWidths:GS,flatten:US,forEach:e=>t=>Array.prototype.forEach.call(t,e),forwardEvent:zS,genomeLociToPixels:(e,t)=>[VE(e[0],e[1],t),VE(e[2],e[3],t)],genomicRangeToChromosomeChunks:function(e,t,n,r,i){const{chr:o,pos:a}=t,{chr:s,pos:l}=n,c=[];if(o===s){const e=o,t=Math.floor(a/r),n=Math.min(t+i,Math.ceil(l/r));c.push([e,t,n])}else{let t=i;const n=e.findIndex((e=>{let[t]=e;return t===o})),u=e.findIndex((e=>{let[t]=e;return t===s}));for(let i=n;i<=u;i++){let o,s;const[h,p]=e[i];i<u?(o=i===n?a:0,s=p):(o=0,s=l);const f=Math.floor(o/r),d=Math.min(f+t,Math.ceil(s/r));c.push([h,f,d]),t-=d-f}}return c},getAggregationFunction:nO,getDefaultTrackForDatatype:VS,getElementDim:Hw,getTiledPlot:(e,t)=>e.tiledPlots[t],getTrackByUid:Uw,getTrackConfFromHGC:(e,t,n)=>{const r=e.state.views[t];if(!r)return null;let i=null;const o=e=>(e.uid===n&&(i=e),"combined"===e.type.substr(0,8)&&e.contents.forEach(o),null),a=r.tracks;return Object.keys(a).map((e=>a[e])).filter((e=>e.filter)).reduce(((e,t)=>e.concat(t)),[]).forEach(o),i},getTrackObjById:zw,getTrackObjectFromHGC:oO,getTrackPositionByUid:qw,getTrackRenderer:aO,getXylofon:Kw,gradient:Qw,hasClass:zE,hasParent:Zw,hexStrToInt:Jw,intoTheVoid:eA,isTrackOrChildTrack:iA,isWithin:oA,latToY:(e,t)=>{let n=e*Math.PI/180;return n=(e=>Math.log(Math.tan((e+Math.PI/2)/2)))(n),2**t*(Math.PI-n)/(2*Math.PI)},lngToX:(e,t)=>2**t*(e+180)/360,loadChromInfos:e=>aA(e).map((e=>e.chromInfoPath)).forEach((e=>bw.get(e))),map:$w,max:sA,maxNonZero:lA,min:cA,minNonZero:uA,mod:(e,t)=>(e%t+t)%t,mountHGComponent:n$,mountHGComponentAsync:async function(e,t,n,r){let i;return await new Promise((o=>{i=n$(e,t,n,o,r)})),i},ndarrayAssign:hA,ndarrayFlatten:wA,ndarrayToList:SA,numericifyVersion:AA,objVals:aA,or:OA,parseChromsizesRows:xA,pixiTextToSvg:kA,q:e=>{try{const t=e.split(".");return e=>{let n=e;return t.forEach((e=>{n=n[e]})),n}}catch{return}},rangeQuery2d:function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8?arguments[8]:void 0;const c=o?i:r,u=o?r:i,h=o?s:a,p=o?a:s,f=Math.max(0,+c[0]||0),d=Math.max(0,+c[1]||0),m=Math.max(0,+u[0]||0),g=Math.max(0,+u[1]||0);let y=[];ArrayBuffer.isView(l)||console.warn("Not supported yet");try{const r=new l.constructor(l.length);let i=0+p;for(let o=m;o<g;o++)r.set(e.slice(o*t+f,o*t+d),h+i*n),i+=1;const a=o?GE(n,n):void 0;y=UE(l,r,a)}catch{}return y},reduce:HS,relToAbsChromPos:(e,t,n,r)=>[r.chrPositions[e].pos+ +t,r.chrPositions[e].pos+ +n],removeClass:(e,t)=>{const n=new RegExp(`(\\s|^)${t}(\\s|$)`);if("http://www.w3.org/2000/svg"===e.namespaceURI){const t=e.getAttribute("class")||"";e.setAttribute("class",t.replace(n," "))}else e.classList?e.classList.remove(t):zE(e,t)&&(e.className=e.className.replace(n," "))},removeHGComponent:e=>{e&&(o.unmountComponentAtNode(e),document.body.removeChild(e))},resetD3BrushStyle:IA,rgbToHex:(e,t,n)=>`#${CA(e)}${CA(t)}${CA(n)}`,scalesCenterAndK:PA,scalesToGenomeLoci:DA,segmentsToRows:$A,selectedItemsToSize:rO,showMousePosition:RA,some:e=>t=>Array.prototype.some.call(t,e),sum:NA,svgLine:MA,throttleAndDebounce:LA,tileToCanvas:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256;const r=document.createElement("canvas");r.width=t,r.height=n;const i=r.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.fillStyle="transparent",i.fillRect(0,0,r.width,r.height);const o=new ImageData(e,r.width,r.height);return i.putImageData(o,0,0),r},timeout:jA,toVoid:BA,totalTrackPixelHeight:e=>{if(!e.tracks)return 0;let t=0;return e.tracks.top&&(t+=e.tracks.top.map((e=>e.height)).reduce(((e,t)=>e+t),0)),e.tracks.center&&(t+=e.tracks.center.map((e=>e.height)).reduce(((e,t)=>e+t),0)),e.tracks.bottom&&(t+=e.tracks.bottom.map((e=>e.height)).reduce(((e,t)=>e+t),0)),t},trackUtils:CK,trimTrailingSlash:FA,valueToColor:GA,visitPositionedTracks:Ww,visitTracks:Yw,waitForJsonComplete:e$,waitForTilesLoaded:t$,waitForTransitionsFinished:Jq},Symbol.toStringTag,{value:"Module"}));function DK(){return DK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DK.apply(this,arguments)}const{Provider:RK,Consumer:NK}=i.createContext({close:BA,open:BA}),MK=e=>i.forwardRef(((t,n)=>i.createElement(NK,null,(r=>i.createElement(e,DK({ref:n},t,{theme:r})))))),LK="_track-control_w7hx2_1",jK="_track-control-vertical_w7hx2_2",BK="_track-control-dark_w7hx2_15",FK="_track-control-active_w7hx2_16 _track-control_w7hx2_1",GK="_track-control-left_w7hx2_24",HK="_track-control-padding-right_w7hx2_48",UK="_track-control-button_w7hx2_52",zK="_track-control-button-vertical_w7hx2_81",VK=e=>zg({[FK]:e.isVisible,[LK]:!e.isVisible,[GK]:e.isAlignLeft,[jK]:e.isVertical,[HK]:e.paddingRight,[BK]:e.theme===eS}),XK=e=>zg("no-zoom",UK,{[zK]:e.isVertical});let YK=null,WK=null;function qK(e){let t,n;return(!e||!YK||Object.keys(e).some((t=>YK[t]!==e[t])))&&(YK=e,WK=kE((()=>i.createElement("svg",{className:XK(e),style:{height:"20px",width:"20px",...e.imgStyleMove}},i.createElement("title",null,"Move track"),i.createElement("use",{xlinkHref:"#move"}))))),i.createElement("div",{className:VK(e)},e.isMoveable&&i.createElement(WK,null),i.createElement("svg",{ref:e=>{t=e},className:XK(e),onClick:()=>{e.onConfigTrackMenuOpened(e.uid,t.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleSettings}},i.createElement("title",null,"Configure track"),i.createElement("use",{xlinkHref:"#cog"})),e.onAddSeries&&i.createElement("svg",{className:XK(e),onClick:()=>e.onAddSeries(e.uid),style:{height:"20px",width:"20px",...e.imgStyleAdd}},i.createElement("title",null,"Add series"),i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{ref:e=>{n=e},className:XK(e),onClick:()=>{e.onCloseTrackMenuOpened(e.uid,n.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleClose}},i.createElement("title",null,"Close track"),i.createElement("use",{xlinkHref:"#cross"})))}qK.propTypes={imgStyleAdd:Ls.object,imgStyleClose:Ls.object,imgStyleMove:Ls.object,imgStyleSettings:Ls.object,isAlignLeft:Ls.bool,isMoveable:Ls.bool,isVertical:Ls.bool,isVisible:Ls.bool,onConfigTrackMenuOpened:Ls.func,onCloseTrackMenuOpened:Ls.func,onAddSeries:Ls.func,paddingRight:Ls.bool,theme:Ls.symbol.isRequired,uid:Ls.string};const $K=MK(qK),KK={"center-track":"_center-track_fiu64_1","center-track-container":"_center-track-container_fiu64_6"},QK={"track-range-selection":"_track-range-selection_5bcsr_1","track-range-selection-active":"_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-primary":"_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-secondary":"_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-group-inactive":"_track-range-selection-group-inactive_5bcsr_22","track-range-selection-group-brush-selection":"_track-range-selection-group-brush-selection_5bcsr_26"};function ZK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JK(r.key),r)}}function JK(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function eQ(e,t){return(eQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tQ(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=rQ(e);if(t){var i=rQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nQ(e)}(this,n)}}function nQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rQ(e){return(rQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const iQ={pointerEvents:"all"};function oQ(e){return e&&e.sourceEvent}let aQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eQ(e,t)}(n,e);var t=tQ(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={isVisible:!1},r.brushBehaviorX=RT().on("brush",r.brushedX.bind(nQ(r))).on("end",r.brushedXEnded.bind(nQ(r))),r.brushBehaviorY=NT().on("brush",r.brushedY.bind(nQ(r))).on("end",r.brushedYEnded.bind(nQ(r))),r.brushBehaviorXY=MT().on("start",r.brushStarted.bind(nQ(r))).on("brush",r.brushedXY.bind(nQ(r))).on("end",r.brushedXYEnded.bind(nQ(r))),r}return function(e,t,n){t&&ZK(e.prototype,t),n&&ZK(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggeredXY){if(this.rangeSelectionTriggeredXY=!1,this.rangeSelectionTriggeredXYEnd){const t=e.rangeSelection[0]||null;this.moveBrushXY([t,e.rangeSelection[1]],!0),this.rangeSelectionTriggeredXYEnd=!1}return this.state!==t}if(this.props.rangeSelection!==e.rangeSelection){const n=e.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(n,e.rangeSelectionEnd),this.rangeSelectionTriggeredXEnd&&this.moveBrushX(n,e.rangeSelectionEnd,!0),this.rangeSelectionTriggeredY||this.moveBrushY(n,e.rangeSelectionEnd),this.rangeSelectionTriggeredYEnd&&this.moveBrushY(n,e.rangeSelectionEnd,!0),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredXEnd=!1,this.rangeSelectionTriggeredY=!1,this.rangeSelectionTriggeredYEnd=!1):this.moveBrushXY([n,e.rangeSelection[1]],e.rangeSelectionEnd);const r=this.props.is1dRangeSelection&&!e.is1dRangeSelection&&null===n;return this.state!==t||r}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){!this.brushElX||!this.brushElY||this.brushElXOld===this.brushElX&&this.brushElYOld===this.brushElY||(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),IA(this.brushElX,QK["track-range-selection-group-brush-selection"]),IA(this.brushElY,QK["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){!this.brushElXY||this.brushElXYOld===this.brushElXY||(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,IA(this.brushElXY,QK["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,oQ(e)&&this.props.onRangeSelectionX&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(e.selection))}},{key:"brushedXEnded",value:function(e){const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,oQ(e)&&this.props.onRangeSelectionX&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredX=!0,this.rangeSelectionTriggeredXEnd=!0,this.props.onRangeSelectionXEnd(e.selection))}},{key:"brushedY",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,oQ(e)&&this.props.onRangeSelectionY&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(e.selection))}},{key:"brushedYEnded",value:function(e){const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,oQ(e)&&this.props.onRangeSelectionY&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredY=!0,this.rangeSelectionTriggeredYEnd=!0,this.props.onRangeSelectionYEnd(e.selection))}},{key:"brushedXY",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,oQ(e)&&this.props.onRangeSelectionXY&&!t&&!this.props.is1dRangeSelection&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[e.selection[0][0],e.selection[1][0]],[e.selection[0][1],e.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(e){if(this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelectionXY&&!t&&(this.rangeSelectionTriggeredXY=!0,this.rangeSelectionTriggeredXYEnd=!0,this.props.onRangeSelectionXYEnd([[e.selection[0][0],e.selection[1][0]],[e.selection[0][1],e.selection[1][1]]])),e.selection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionReset())}},{key:"brushStarted",value:function(e){oQ(e)&&this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const n=e?[this.props.scaleX(e[0]),this.props.scaleX(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElX.transition().call(this.brushBehaviorX.move,n):this.brushElX.call(this.brushBehaviorX.move,n)}},{key:"moveBrushY",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const n=e?[this.props.scaleY(e[0]),this.props.scaleY(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElY.transition().call(this.brushBehaviorY.move,n):this.brushElY.call(this.brushBehaviorY.move,n)}},{key:"moveBrushXY",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=[[this.props.scaleX(e[0][0]),this.props.scaleY(e[1][0])],[this.props.scaleX(e[0][1]),this.props.scaleY(e[1][1])]];this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElXY.transition().call(this.brushBehaviorXY.move,n):this.brushElXY.call(this.brushBehaviorXY.move,n)}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){this.brushIs1dBound&&(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){this.brushIs2dBound&&this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map((e=>iO(e))).reduce(OA,!1),t=this.props.tracks.some((e=>e.contents?e.contents.some((e=>"heatmap"===e.type&&"topRight"===e.options.colorbarPosition)):"heatmap"===e.type&&"topRight"===e.options.colorbarPosition));let n="track-range-selection";this.props.isRangeSelectionActive&&(n+=this.props.is1dRangeSelection?"-active-secondary":"-active-primary");const r=zg(!this.props.is1dRangeSelection&&QK["track-range-selection-group-inactive"]),o=zg(this.props.is1dRangeSelection&&QK["track-range-selection-group-inactive"]);return i.createElement("div",{className:zg(this.props.className,KK["center-track"]),onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},e&&i.createElement("svg",{className:QK[n],style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{ref:e=>{this.brushElX=ql(e)},className:r}),i.createElement("g",{ref:e=>{this.brushElY=ql(e)},className:r}),i.createElement("g",{ref:e=>{this.brushElXY=ql(e)},className:o})),this.props.editable&&i.createElement($K,{imgStyleAdd:iQ,imgStyleClose:iQ,imgStyleMove:iQ,imgStyleSettings:iQ,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:t,uid:this.props.uid}))}}]),n}(i.Component);function sQ(){return sQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sQ.apply(this,arguments)}aQ.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,rangeSelectionEnd:Ls.bool,isRangeSelectionActive:!1,scaleX:e=>e,scaleY:e=>e},aQ.propTypes={className:Ls.string,configTrackMenuId:Ls.string,editable:Ls.bool,height:Ls.number.isRequired,is1dRangeSelection:Ls.bool,isRangeSelectionActive:Ls.bool,onAddSeries:Ls.func.isRequired,onCloseTrackMenuOpened:Ls.func.isRequired,onConfigTrackMenuOpened:Ls.func.isRequired,onRangeSelectionX:Ls.func.isRequired,onRangeSelectionXEnd:Ls.func.isRequired,onRangeSelectionY:Ls.func.isRequired,onRangeSelectionYEnd:Ls.func.isRequired,onRangeSelectionXY:Ls.func.isRequired,onRangeSelectionXYEnd:Ls.func.isRequired,onRangeSelectionReset:Ls.func.isRequired,onRangeSelectionStart:Ls.func.isRequired,rangeSelection:Ls.array.isRequired,rangeSelectionEnd:Ls.bool,scaleX:Ls.func,scaleY:Ls.func,tracks:Ls.array.isRequired,uid:Ls.string.isRequired,width:Ls.number.isRequired};const lQ={__fake__:!0,publish:BA,subscribe:()=>({event:"fake",handler:BA}),unsubscribe:BA,clear:BA},{Provider:cQ,Consumer:uQ}=i.createContext(lQ),hQ=e=>i.forwardRef(((t,n)=>i.createElement(uQ,null,(r=>i.createElement(e,sQ({ref:n},t,{pubSub:r})))))),pQ="_drag-listening-div-active_19gkt_1";function fQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dQ(r.key),r)}}function dQ(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mQ(e,t){return(mQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gQ(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=yQ(e);if(t){var i=yQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yQ(e){return(yQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let vQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mQ(e,t)}(n,e);var t=gQ(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={dragOnTop:!1},r}return function(e,t,n){t&&fQ(e.prototype,t),n&&fQ(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){let e="red";return this.props.enabled&&this.state.dragOnTop?e="green":this.props.enabled&&(e="blue"),i.createElement("div",{className:zg("DragListeningDiv",{[pQ]:this.props.enabled}),onDragEnter:()=>{this.setState({dragOnTop:!0})},onDragLeave:()=>{this.setState({dragOnTop:!1})},onDragOver:e=>{e.preventDefault()},onDrop:()=>{if(!this.props.enabled)return;const e=this.props.draggingHappening,t={type:this.props.defaultTrackType,uid:ag.nice(),tilesetUid:e.tilesetUid,server:e.server};this.props.onTrackDropped(t),this.props.pubSub.publish("trackDropped",t)},style:{background:e,opacity:.6,...this.props.style}})}}]),n}(i.Component);vQ.defaultProps={enabled:!1,style:{},draggingHappening:{},onTrackDropped:()=>{}},vQ.propTypes={enabled:Ls.bool,style:Ls.object,defaultTrackType:Ls.object,draggingHappening:Ls.object,onTrackDropped:Ls.func,position:Ls.string.isRequired,pubSub:Ls.object.isRequired};const bQ=hQ(vQ),_Q="_gallery-tracks_fbxxi_1",TQ="_gallery-track_fbxxi_1",EQ="_gallery-sub-track_fbxxi_18",SQ="_gallery-invisible-track_fbxxi_19",wQ={"tiled-plot":"_tiled-plot_1y7td_1",horizontalList:"_horizontalList_1y7td_7",list:"_list_1y7td_14",stylizedList:"_stylizedList_1y7td_21",stylizedItem:"_stylizedItem_1y7td_28",stylizedHelper:"_stylizedHelper_1y7td_39",horizontalItem:"_horizontalItem_1y7td_44","resizable-track":"_resizable-track_1y7td_55",domain:"_domain_1y7td_60"};function AQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OQ(r.key),r)}}function OQ(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function xQ(e,t){return(xQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kQ(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=IQ(e);if(t){var i=IQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function IQ(e){return(IQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const CQ={pointerEvents:"all"};let PQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xQ(e,t)}(n,e);var t=kQ(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={hovering:!1},r}return function(e,t,n){t&&AQ(e.prototype,t),n&&AQ(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){return i.createElement("div",{className:zg("gallery-tracks",_Q)},this.props.tracks&&this.props.tracks.map(((e,t)=>i.createElement("div",{key:e.uid||t,className:TQ,onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:e.height*t,right:e.height*t,bottom:e.height*t,left:e.height*t}},i.createElement("div",{className:EQ,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,left:0,height:e.height}}),i.createElement("div",{className:EQ,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,bottom:0,width:e.height}}),i.createElement("div",{className:EQ,onMouseEnter:this.mouseEnterHandler.bind(this),style:{right:0,bottom:0,left:0,height:e.height}}),i.createElement("div",{className:EQ,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,bottom:0,left:0,width:e.height}}),i.createElement("div",{className:SQ,onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:e.height,right:e.height,bottom:e.height,left:e.height}}),this.props.editable&&i.createElement($K,{configMenuVisible:!0,imgStyleAdd:CQ,imgStyleClose:CQ,imgStyleMove:CQ,imgStyleSettings:CQ,isMoveable:!1,isVisible:this.state.hovering,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:e.uid||t})))))}}]),n}(i.Component);function DQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RQ(r.key),r)}}function RQ(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}PQ.propTypes={editable:Ls.bool,onCloseTrackMenuOpened:Ls.func.isRequired,onConfigTrackMenuOpened:Ls.func.isRequired,tracks:Ls.array};let NQ=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.context=t;const{id:r,pubSub:i,getTheme:o}=t;this.pubSub=i??lQ,this.id=r,this._xScale=Fp(),this._yScale=Fp(),this._refXScale=Fp(),this._refYScale=Fp(),this.position=[0,0],this.dimensions=[1,1],this.options=n,this.pubSubs=[],this.getTheme=o??(()=>{}),this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this))),this.isLeftModified=!1}return function(e,t,n){t&&DQ(e.prototype,t),n&&DQ(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"isWithin",value:function(e,t){let n=e,r=t,i=this.position[0],o=this.position[1];return this.isLeftModified&&(n=t,r=e,i=this.position[1],o=this.position[0]),oA(n,r,i,this.dimensions[0]+i,o,this.dimensions[1]+o)}},{key:"getProp",value:function(e){return()=>this[e]}},{key:"getData",value:function(){}},{key:"click",value:function(e,t,n){return{type:"generic",event:n,payload:null}}},{key:"clickOutside",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(e){return e?(this._refXScale=e,this):this._refXScale}},{key:"refYScale",value:function(e){return e?(this._refYScale=e,this):this._refYScale}},{key:"xScale",value:function(e){return e?(this._xScale=e,this):this._xScale}},{key:"yScale",value:function(e){return e?(this._yScale=e,this):this._yScale}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t)}},{key:"refScalesChanged",value:function(e,t){this._refXScale=e,this._refYScale=t}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"defaultMouseMoveHandler",value:function(e){}},{key:"remove",value:function(){this.pubSubs.forEach((e=>this.pubSub.unsubscribe(e))),this.pubSubs=[]}},{key:"rerender",value:function(e){}},{key:"respondsToPosition",value:function(e,t){return this.isWithin(e,t)}},{key:"zoomedY",value:function(e,t){}},{key:"movedY",value:function(e){}}]),e}();function MQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LQ(r.key),r)}}function LQ(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function jQ(){return jQ=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GQ(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jQ.apply(this,arguments)}function BQ(e,t){return(BQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FQ(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=GQ(e);if(t){var i=GQ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function GQ(e){return(GQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HQ(e,t){const n=e.map((e=>+e)).sort(((e,t)=>t-e));return function(e,t){const n=Np(t,e);return kp(`.${n}`,e)(e)}(n[t],n[n.length-1])}let UQ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BQ(e,t)}(n,e);var t=FQ(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{scene:o}=e;i.scene=o,i.delayDrawing=!1,i.pBase=new nS.PIXI.Graphics,i.pMasked=new nS.PIXI.Graphics,i.pMask=new nS.PIXI.Graphics,i.pMain=new nS.PIXI.Graphics,i.pBorder=new nS.PIXI.Graphics,i.pBackground=new nS.PIXI.Graphics,i.pForeground=new nS.PIXI.Graphics,i.pLabel=new nS.PIXI.Graphics,i.pMobile=new nS.PIXI.Graphics,i.pAxis=new nS.PIXI.Graphics,i.pMouseOver=new nS.PIXI.Graphics,i.scene.addChild(i.pBase),i.pBase.addChild(i.pMasked),i.pMasked.addChild(i.pBackground),i.pMasked.addChild(i.pMain),i.pMasked.addChild(i.pMask),i.pMasked.addChild(i.pMobile),i.pMasked.addChild(i.pBorder),i.pMasked.addChild(i.pLabel),i.pMasked.addChild(i.pForeground),i.pMasked.addChild(i.pMouseOver),i.pBase.addChild(i.pAxis),i.pMasked.mask=i.pMask,i.prevOptions="",i.options=Object.assign(i.options,r);const a=i.getName();return i.labelTextFontFamily="Arial",i.labelTextFontSize=12,i.labelXOffset=0,i.labelText=new nS.PIXI.Text(a,{fontSize:`${i.labelTextFontSize}px`,fontFamily:i.labelTextFontFamily,fill:"black"}),i.pLabel.addChild(i.labelText),i.errorText=new nS.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),i.errorText.anchor.x=.5,i.errorText.anchor.y=.5,i.pLabel.addChild(i.errorText),i.errorTextText="",i.flipText=!1,i.tilesetInfo=void 0,i}return function(e,t,n){t&&MQ(e.prototype,t),n&&MQ(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(e){this.position=e,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setDimensions",value:function(e){jQ(GQ(n.prototype),"setDimensions",this).call(this,e),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setMask",value:function(e,t){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(e[0],e[1],t[0],t[1]),this.pMask.endFill()}},{key:"setForeground",value:function(){this.pForeground.position.y=this.position[1],this.pForeground.position.x=this.position[0]}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){const e=this.pBorder;if(e.clear(),!this.options||!this.options.trackBorderWidth)return;const t=CS(this.options.trackBorderColor?this.options.trackBorderColor:"white");e.lineStyle(this.options.trackBorderWidth,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"drawError",value:function(){if(this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2,this.errorText.text=this.errorTextText,this.errorTextText&&this.errorTextText.length){const e=this.pBorder;e.clear(),e.lineStyle(1,CS("red")),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawBackground",value:function(){const e=this.pBackground;if(e.clear(),!this.options||!this.options.backgroundColor)return;let t=1,n=this.options.backgroundColor;"transparent"===this.options.backgroundColor&&(t=0,n="white");const r=CS(n);e.beginFill(r,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"getLabelColor",value:function(){return this.options.labelColor&&"[glyph-color]"!==this.options.labelColor?this.options.labelColor:this.options.lineStrokeColor||this.options.barFillColor||"black"}},{key:"getName",value:function(){return this.options.name?this.options.name:this.tilesetInfo&&this.tilesetInfo.name||""}},{key:"drawLabel",value:function(){if(!this.labelText)return;const e=this.pLabel;if(e.clear(),!this.options||!this.options.labelPosition||"hidden"===this.options.labelPosition)return void(this.labelText.alpha=0);const{labelBackgroundColor:t="white",labelBackgroundOpacity:n=.5}=this.options;e.beginFill(CS(t),+n);const r=CS(this.getLabelColor());if(this.dimensions[0]<0)return;let i=this.options.labelShowAssembly&&this.tilesetInfo&&this.tilesetInfo.coordSystem?`${this.tilesetInfo.coordSystem} | `:"";if(i+=this.getName(),this.options.labelShowResolution&&function(e){return Xw(e)&&"max_width"in e}(this.tilesetInfo)&&this.tilesetInfo.bins_per_dimension){const e=function(e,t,n,r){const i=t/(2**e*n);if(!Number.isNaN(i)){const e=Np(t/(2**r*n),i);return kp(`.${e}`,i)(i)}return console.warn("NaN resolution, screen is probably too small."),""}(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);i+=`\n[Current data resolution: ${e}]`}else if(this.options.labelShowResolution&&function(e){return Xw(e)&&"resolutions"in e}(this.tilesetInfo)){i+=`\n[Current data resolution: ${HQ(this.tilesetInfo.resolutions,this.calculateZoomLevel())}]`}if(this.options&&this.options.dataTransform){let e=null;if(this.tilesetInfo&&this.tilesetInfo.transforms)for(const t of this.tilesetInfo.transforms)t.value===this.options.dataTransform&&(e=t);e?i+=`\n[Transform: ${e.name}]`:"None"===this.options.dataTransform?i+="\n[Transform: None ]":i+="\n[Transform: Default ]"}this.labelText.text=i,this.labelText.style={fontSize:`${this.labelTextFontSize}px`,fontFamily:this.labelTextFontFamily,fill:r},this.labelText.alpha=typeof this.options.labelTextOpacity<"u"?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1);const{labelLeftMargin:o=0,labelRightMargin:a=0,labelTopMargin:s=0,labelBottomMargin:l=0}=this.options;"topLeft"===this.options.labelPosition?(this.labelText.x=this.position[0]+o+this.labelXOffset,this.labelText.y=this.position[1]+s,this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,e.drawRect(this.position[0]+o+this.labelXOffset,this.position[1]+s,this.labelText.width+2,this.labelText.height+2)):"bottomLeft"===this.options.labelPosition&&!this.flipText||"topRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+(o||s),this.labelText.y=this.position[1]+this.dimensions[1]-(l||a),this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2+this.labelXOffset,e.drawRect(this.position[0]+(o||s)+this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-2-(l||a),this.labelText.width+2,this.labelText.height+2)):"topRight"===this.options.labelPosition&&!this.flipText||"bottomLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]-(a||l),this.labelText.y=this.position[1]+(s||o),this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2+this.labelXOffset,e.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2-(a||l)-this.labelXOffset,this.position[1]+(s||o),this.labelText.width+2,this.labelText.height+2)):"bottomRight"===this.options.labelPosition?(this.labelText.x=this.position[0]+this.dimensions[0]-a,this.labelText.y=this.position[1]+this.dimensions[1]-l,this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2+this.labelXOffset,e.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2-a-this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-2-l,this.labelText.width+2,this.labelText.height+2)):"outerLeft"===this.options.labelPosition&&!this.flipText||"outerTop"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):"outerTop"===this.options.labelPosition&&!this.flipText||"outerLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):"outerBottom"===this.options.labelPosition&&!this.flipText||"outerRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):"outerRight"===this.options.labelPosition&&!this.flipText||"outerBottom"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,"outerLeft"===this.options.labelPosition||"outerRight"===this.options.labelPosition||"outerTop"===this.options.labelPosition||"outerBottom"===this.options.labelPosition?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}},{key:"rerender",value:function(e){this.options=e,this.draw(),this.drawBackground(),this.drawLabel(),this.drawError(),this.drawBorder()}},{key:"draw",value:function(){this.drawError()}},{key:"exportSVG",value:function(){const e=document.createElement("g"),t=document.createElement("rect");t.setAttribute("x",`${this.position[0]}`),t.setAttribute("y",`${this.position[1]}`),t.setAttribute("width",`${this.dimensions[0]}`),t.setAttribute("height",`${this.dimensions[1]}`),this.options&&this.options.backgroundColor?t.setAttribute("fill",this.options.backgroundColor):t.setAttribute("fill-opacity","0");const n=document.createElement("g");n.setAttribute("class","g-clipped"),e.appendChild(n),n.appendChild(t);const r=document.createElement("g");n.setAttribute("class","g-track"),n.appendChild(r);const i=document.createElement("g");n.setAttribute("class","g-labels"),n.appendChild(i);const o=document.createElementNS("http://www.w3.org/2000/svg","clipPath");e.appendChild(o);const a=document.createElementNS("http://www.w3.org/2000/svg","polygon");o.appendChild(a),a.setAttribute("points",`${this.position[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]+this.dimensions[1]} ${this.position[0]},${this.position[1]+this.dimensions[1]} `);const s=ag.nice();o.setAttribute("id",s),n.setAttribute("style",`clip-path:url(#${s});`);const l=this.labelText.text.split("\n");let c=0;const u=(this.labelTextFontSize+2)*l.length+3;.5===this.labelText.anchor.y?c=u/2:1===this.labelText.anchor.y&&(c=-u);for(let h=0;h<l.length;h++){const e=document.createElement("text");if(e.setAttribute("font-family",this.labelTextFontFamily),e.setAttribute("font-size",`${this.labelTextFontSize}px`),e.innerText=l[h],"topLeft"===this.options.labelPosition||"topRight"===this.options.labelPosition){const t=c+(h+1)*(this.labelTextFontSize+2);e.setAttribute("dy",String(t))}else("bottomLeft"===this.options.labelPosition||"bottomRight"===this.options.labelPosition)&&e.setAttribute("dy",String(c+h*(this.labelTextFontSize+2)));e.setAttribute("fill",this.options.labelColor??""),.5===this.labelText.anchor.x?e.setAttribute("text-anchor","middle"):1===this.labelText.anchor.x&&e.setAttribute("text-anchor","end"),i.appendChild(e)}return i.setAttribute("transform",`translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`),[e,r]}},{key:"calculateZoomLevel",value:function(){throw new Error("Must be implemented by subclass")}}]),n}(NQ);function zQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VQ(r.key),r)}}function VQ(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let XQ=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.tilesetInfoLoading=!0,t?(this.dataConfig=JSON.parse(JSON.stringify(t)),this.uuid=ag.nice(),this.pubSub=n,t.children&&(this.dataConfig.children=t.children.map((t=>new e(t,n))))):console.error("No dataconfig provided")}return function(e,t,n){t&&zQ(e.prototype,t),n&&zQ(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"registerFileUrl",value:async function(e){let{server:t,url:n,filetype:r,coordSystem:i}=e;const o=`${FA(t)}/register_url/`;return fetch(o,{method:"POST",body:JSON.stringify({fileurl:n,filetype:r,coordSystem:i}),headers:{"Content-Type":"application/json; charset=utf-8"}})}},{key:"tilesetInfo",value:function(e){const{server:t,url:n,filetype:r,coordSystem:i}=this.dataConfig;return t&&n&&r?this.registerFileUrl({server:t,url:n,filetype:r,coordSystem:i}).then((e=>e.json())).then((t=>{this.dataConfig.tilesetUid=t.uid,this.tilesetInfoAfterRegister(e)})).catch((e=>{console.error("Error registering url",e)})):new Promise((()=>{this.tilesetInfoAfterRegister(e)}))}},{key:"tilesetInfoAfterRegister",value:function(e){if(this.dataConfig.children){const t=this.dataConfig.children.map((e=>new Promise((t=>{e.tilesetInfo(t)}))));Promise.all(t).then((t=>{e(t[0])}))}else{const{server:t,tilesetUid:n}=this.dataConfig;t&&n?Fw.trackInfo(t,n,(t=>{this.dataConfig.tilesetInfo=t[n],e(t[n],n)}),(t=>{this.tilesetInfoLoading=!1,e({error:t})}),this.pubSub):(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),e(null))}}},{key:"fullTileId",value:function(e,t){return`${e}.${t}`}},{key:"fetchTilesDebounced",value:function(e,t){var n;if("horizontal-section"===this.dataConfig.type)return this.fetchHorizontalSection(e,t);if("vertical-section"===this.dataConfig.type)return this.fetchHorizontalSection(e,t,!0);if(!this.dataConfig.children&&this.dataConfig.tilesetUid)return new Promise((e=>{Fw.fetchTilesDebounced({id:ag.nice(),server:this.dataConfig.server,done:e,ids:t.map((e=>`${this.dataConfig.tilesetUid}.${e}`)),options:this.dataConfig.options},this.pubSub,!0)})).then((n=>{const r=BS(n)[0].tilesetUid,i={};for(let e=0;e<t.length;e++){const o=this.fullTileId(r,t[e]);n[o].tilePositionId=t[e],i[t[e]]=n[o]}return e(i),i}));const r=(null==(n=this.dataConfig.children)?void 0:n.map((e=>new Promise((n=>{e.fetchTilesDebounced(n,t)})))))??[];return Promise.all(r).then((n=>{if("divided"===this.dataConfig.type&&function(e){return 2===e.length}(n)){const r=this.makeDivided(n,t);return e(r),r}return console.warn("Unimplemented dataConfig type. Returning first data source.",this.dataConfig),e(n[0]),n[0]}))}},{key:"divideData",value:function(e,t){const n=new Float32Array(e.length);for(let r=0;r<n.length;r++)0===t[r]?n[r]=NaN:n[r]=e[r]/t[r];return n}},{key:"horizontalSlice",value:function(){return null}},{key:"extractDataSlice",value:function(e,t,n,r){if(!r)return e.slice(t[1]*n,t[1]*(n+1));const i=new Array(t[1]);for(let o=n;o<e.length;o+=t[0])i[Math.floor(o/t[0])]=e[o];return i}},{key:"fetchHorizontalSection",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[],i=[],{slicePos:o,tilesetInfo:a}=this.dataConfig;if(!o||!a)throw new Error("No slice position or tileset info");for(const s of t){const e=s.split("."),t=+e[0],l=+e[1],c=Fp().domain([o,o]);let u=[];if("resolutions"in a){const e=a.resolutions.map((e=>+e)).sort(((e,t)=>t-e));u=Fw.calculateTilesFromResolution(e[t],c,a.min_pos[n?1:0],a.max_pos[n?1:0])}else u=Fw.calculateTiles(t,c,a.min_pos[n?1:0],a.max_pos[n?1:0],a.max_zoom,a.max_width);const h=[l,u[0]].sort(((e,t)=>e-t));h[0]===l?i.push(!1):i.push(!0);const p=`${t}.${h[0]}.${h[1]}`;r.push(p)}return new Promise((e=>{Fw.fetchTilesDebounced({id:ag.nice(),server:this.dataConfig.server,done:e,ids:r.map((e=>`${this.dataConfig.tilesetUid}.${e}`))},this.pubSub,!0)})).then((n=>{const s=BS(n)[0].tilesetUid,l={};for(let e=0;e<r.length;e++){const c=r[e].split("."),u=+c[0],h=+c[1],p=+c[2],f=Fw.calculateTileAndPosInTile(a,a.max_width,a.min_pos[1],u,+o)[1],d=n[this.fullTileId(s,r[e])];let m=null;if(h===p){m=this.extractDataSlice(d.dense,[256,256],f);const e=this.extractDataSlice(d.dense,[256,256],f,1);for(let t=0;t<m.length;t++)m[t]+=e[t]}else m=i[e]?this.extractDataSlice(d.dense,[256,256],f,1):this.extractDataSlice(d.dense,[256,256],f);const g={min_value:Math.min.apply(null,m),max_value:Math.max.apply(null,m),denseDataExtrema:new ZA(m),minNonZero:uA(m),maxNonZero:lA(m),dense:m,dtype:d.dtype,server:d.server,tilePos:i[e]?[p]:[h],tilePositionId:t[e],tilesetUid:s,zoomLevel:d.zoomLevel};l[t[e]]=g}return e(l),l}))}},{key:"makeDivided",value:function(e,t){e.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);const n={};for(let r=0;r<t.length;r++){const i=e[0][t[r]].zoomLevel,o=e[0][t[r]].tilePos;let a={zoomLevel:i,tilePos:o,tilePositionId:t[r]};const s=e[0][t[r]].dense,l=e[1][t[r]].dense;if(s&&l){const e=this.divideData(s,l);a={dense:e,denseDataExtrema:2===o.length?new tO(e):new ZA(e),minNonZero:uA(e),maxNonZero:lA(e),zoomLevel:i,tilePos:o,tilePositionId:t[r]}}n[t[r]]=a}return n}}]),e}();var YQ={};!function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(YQ);var WQ={},qQ={},$Q={},KQ=YQ,QQ=0,ZQ=1;function JQ(e){for(var t=e.length;--t>=0;)e[t]=0}var eZ=0,tZ=29,nZ=256,rZ=nZ+1+tZ,iZ=30,oZ=19,aZ=2*rZ+1,sZ=15,lZ=16,cZ=7,uZ=256,hZ=16,pZ=17,fZ=18,dZ=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],mZ=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],gZ=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],yZ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],vZ=new Array(2*(rZ+2));JQ(vZ);var bZ=new Array(2*iZ);JQ(bZ);var _Z=new Array(512);JQ(_Z);var TZ=new Array(256);JQ(TZ);var EZ=new Array(tZ);JQ(EZ);var SZ,wZ,AZ,OZ=new Array(iZ);function xZ(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function kZ(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function IZ(e){return e<256?_Z[e]:_Z[256+(e>>>7)]}function CZ(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function PZ(e,t,n){e.bi_valid>lZ-n?(e.bi_buf|=t<<e.bi_valid&65535,CZ(e,e.bi_buf),e.bi_buf=t>>lZ-e.bi_valid,e.bi_valid+=n-lZ):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function DZ(e,t,n){PZ(e,n[2*t],n[2*t+1])}function RZ(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function NZ(e,t,n){var r,i,o=new Array(sZ+1),a=0;for(r=1;r<=sZ;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=RZ(o[s]++,s))}}function MZ(e){var t;for(t=0;t<rZ;t++)e.dyn_ltree[2*t]=0;for(t=0;t<iZ;t++)e.dyn_dtree[2*t]=0;for(t=0;t<oZ;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*uZ]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function LZ(e){e.bi_valid>8?CZ(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function jZ(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function BZ(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&jZ(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!jZ(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function FZ(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?DZ(e,i,t):(DZ(e,(o=TZ[i])+nZ+1,t),0!==(a=dZ[o])&&PZ(e,i-=EZ[o],a),DZ(e,o=IZ(--r),n),0!==(a=mZ[o])&&PZ(e,r-=OZ[o],a))}while(s<e.last_lit);DZ(e,uZ,t)}function GZ(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=aZ,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)BZ(e,o,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],BZ(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,BZ(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,d=t.stat_desc.max_length,m=0;for(o=0;o<=sZ;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<aZ;n++)(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)>d&&(o=d,m++),l[2*r+1]=o,!(r>c)&&(e.bl_count[o]++,a=0,r>=f&&(a=p[r-f]),s=l[2*r],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(u[2*r+1]+a)));if(0!==m){do{for(o=d-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(r=e.bl_count[o];0!==r;)!((i=e.heap[--n])>c)&&(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),NZ(o,c,e.bl_count)}function HZ(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)&&(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*hZ]++):s<=10?e.bl_tree[2*pZ]++:e.bl_tree[2*fZ]++,s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))}function UZ(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<c)do{DZ(e,i,e.bl_tree)}while(0!==--s);else 0!==i?(i!==o&&(DZ(e,i,e.bl_tree),s--),DZ(e,hZ,e.bl_tree),PZ(e,s-3,2)):s<=10?(DZ(e,pZ,e.bl_tree),PZ(e,s-3,3)):(DZ(e,fZ,e.bl_tree),PZ(e,s-11,7));s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}}JQ(OZ);var zZ=!1;function VZ(e,t,n,r){PZ(e,(eZ<<1)+(r?1:0),3),function(e,t,n,r){LZ(e),r&&(CZ(e,n),CZ(e,~n)),KQ.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}$Q._tr_init=function(e){zZ||(function(){var e,t,n,r,i,o=new Array(sZ+1);for(n=0,r=0;r<tZ-1;r++)for(EZ[r]=n,e=0;e<1<<dZ[r];e++)TZ[n++]=r;for(TZ[n-1]=r,i=0,r=0;r<16;r++)for(OZ[r]=i,e=0;e<1<<mZ[r];e++)_Z[i++]=r;for(i>>=7;r<iZ;r++)for(OZ[r]=i<<7,e=0;e<1<<mZ[r]-7;e++)_Z[256+i++]=r;for(t=0;t<=sZ;t++)o[t]=0;for(e=0;e<=143;)vZ[2*e+1]=8,e++,o[8]++;for(;e<=255;)vZ[2*e+1]=9,e++,o[9]++;for(;e<=279;)vZ[2*e+1]=7,e++,o[7]++;for(;e<=287;)vZ[2*e+1]=8,e++,o[8]++;for(NZ(vZ,rZ+1,o),e=0;e<iZ;e++)bZ[2*e+1]=5,bZ[2*e]=RZ(e,5);SZ=new xZ(vZ,dZ,nZ+1,rZ,sZ),wZ=new xZ(bZ,mZ,0,iZ,sZ),AZ=new xZ(new Array(0),gZ,0,oZ,cZ)}(),zZ=!0),e.l_desc=new kZ(e.dyn_ltree,SZ),e.d_desc=new kZ(e.dyn_dtree,wZ),e.bl_desc=new kZ(e.bl_tree,AZ),e.bi_buf=0,e.bi_valid=0,MZ(e)},$Q._tr_stored_block=VZ,$Q._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return QQ;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return ZQ;for(t=32;t<nZ;t++)if(0!==e.dyn_ltree[2*t])return ZQ;return QQ}(e)),GZ(e,e.l_desc),GZ(e,e.d_desc),a=function(e){var t;for(HZ(e,e.dyn_ltree,e.l_desc.max_code),HZ(e,e.dyn_dtree,e.d_desc.max_code),GZ(e,e.bl_desc),t=oZ-1;t>=3&&0===e.bl_tree[2*yZ[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?VZ(e,t,n,r):4===e.strategy||o===i?(PZ(e,2+(r?1:0),3),FZ(e,vZ,bZ)):(PZ(e,4+(r?1:0),3),function(e,t,n,r){var i;for(PZ(e,t-257,5),PZ(e,n-1,5),PZ(e,r-4,4),i=0;i<r;i++)PZ(e,e.bl_tree[2*yZ[i]+1],3);UZ(e,e.dyn_ltree,t-1),UZ(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),FZ(e,e.dyn_ltree,e.dyn_dtree)),MZ(e),r&&LZ(e)},$Q._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(TZ[n]+nZ+1)]++,e.dyn_dtree[2*IZ(t)]++),e.last_lit===e.lit_bufsize-1},$Q._tr_align=function(e){PZ(e,2,3),DZ(e,uZ,vZ),function(e){16===e.bi_valid?(CZ(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var XZ=function(e,t,n,r){for(var i=65535&e,o=e>>>16&65535,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16};var YZ=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var WZ,qZ=function(e,t,n,r){var i=YZ,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return~e},$Z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},KZ=YQ,QZ=$Q,ZZ=XZ,JZ=qZ,eJ=$Z,tJ=0,nJ=4,rJ=0,iJ=-2,oJ=-1,aJ=4,sJ=2,lJ=8,cJ=9,uJ=286,hJ=30,pJ=19,fJ=2*uJ+1,dJ=15,mJ=3,gJ=258,yJ=gJ+mJ+1,vJ=42,bJ=103,_J=113,TJ=666,EJ=1,SJ=2,wJ=3,AJ=4;function OJ(e,t){return e.msg=eJ[t],t}function xJ(e){return(e<<1)-(e>4?9:0)}function kJ(e){for(var t=e.length;--t>=0;)e[t]=0}function IJ(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(KZ.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function CJ(e,t){QZ._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,IJ(e.strm)}function PJ(e,t){e.pending_buf[e.pending++]=t}function DJ(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function RJ(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,KZ.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=ZZ(e.adler,t,i,n):2===e.state.wrap&&(e.adler=JZ(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function NJ(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-yJ?e.strstart-(e.w_size-yJ):0,c=e.window,u=e.w_mask,h=e.prev,p=e.strstart+gJ,f=c[o+a-1],d=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(n=t)+a]===d&&c[n+a-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(r=gJ-(p-o),o=p-gJ,r>a){if(e.match_start=t,a=r,r>=s)break;f=c[o+a-1],d=c[o+a]}}}while((t=h[t&u])>l&&0!==--i);return a<=e.lookahead?a:e.lookahead}function MJ(e){var t,n,r,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-yJ)){KZ.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);i+=a}if(0===e.strm.avail_in)break;if(n=RJ(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=mJ)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+mJ-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<mJ)););}while(e.lookahead<yJ&&0!==e.strm.avail_in)}function LJ(e,t){for(var n,r;;){if(e.lookahead<yJ){if(MJ(e),e.lookahead<yJ&&t===tJ)return EJ;if(0===e.lookahead)break}if(n=0,e.lookahead>=mJ&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+mJ-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-yJ&&(e.match_length=NJ(e,n)),e.match_length>=mJ)if(r=QZ._tr_tally(e,e.strstart-e.match_start,e.match_length-mJ),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=mJ){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+mJ-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=QZ._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(CJ(e,!1),0===e.strm.avail_out))return EJ}return e.insert=e.strstart<mJ-1?e.strstart:mJ-1,t===nJ?(CJ(e,!0),0===e.strm.avail_out?wJ:AJ):e.last_lit&&(CJ(e,!1),0===e.strm.avail_out)?EJ:SJ}function jJ(e,t){for(var n,r,i;;){if(e.lookahead<yJ){if(MJ(e),e.lookahead<yJ&&t===tJ)return EJ;if(0===e.lookahead)break}if(n=0,e.lookahead>=mJ&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+mJ-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=mJ-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-yJ&&(e.match_length=NJ(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===mJ&&e.strstart-e.match_start>4096)&&(e.match_length=mJ-1)),e.prev_length>=mJ&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-mJ,r=QZ._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-mJ),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+mJ-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=mJ-1,e.strstart++,r&&(CJ(e,!1),0===e.strm.avail_out))return EJ}else if(e.match_available){if((r=QZ._tr_tally(e,0,e.window[e.strstart-1]))&&CJ(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return EJ}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=QZ._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<mJ-1?e.strstart:mJ-1,t===nJ?(CJ(e,!0),0===e.strm.avail_out?wJ:AJ):e.last_lit&&(CJ(e,!1),0===e.strm.avail_out)?EJ:SJ}function BJ(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function FJ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lJ,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new KZ.Buf16(2*fJ),this.dyn_dtree=new KZ.Buf16(2*(2*hJ+1)),this.bl_tree=new KZ.Buf16(2*(2*pJ+1)),kJ(this.dyn_ltree),kJ(this.dyn_dtree),kJ(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new KZ.Buf16(dJ+1),this.heap=new KZ.Buf16(2*uJ+1),kJ(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new KZ.Buf16(2*uJ+1),kJ(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function GJ(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=sJ,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?vJ:_J,e.adler=2===t.wrap?0:1,t.last_flush=tJ,QZ._tr_init(t),rJ):OJ(e,iJ)}function HJ(e){var t=GJ(e);return t===rJ&&function(e){e.window_size=2*e.w_size,kJ(e.head),e.max_lazy_match=WZ[e.level].max_lazy,e.good_match=WZ[e.level].good_length,e.nice_match=WZ[e.level].nice_length,e.max_chain_length=WZ[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=mJ-1,e.match_available=0,e.ins_h=0}(e.state),t}function UJ(e,t,n,r,i,o){if(!e)return iJ;var a=1;if(t===oJ&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>cJ||n!==lJ||r<8||r>15||t<0||t>9||o<0||o>aJ)return OJ(e,iJ);8===r&&(r=9);var s=new FJ;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+mJ-1)/mJ),s.window=new KZ.Buf8(2*s.w_size),s.head=new KZ.Buf16(s.hash_size),s.prev=new KZ.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new KZ.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,HJ(e)}WZ=[new BJ(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(MJ(e),0===e.lookahead&&t===tJ)return EJ;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,CJ(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-yJ&&(CJ(e,!1),0===e.strm.avail_out))return EJ}return e.insert=0,t===nJ?(CJ(e,!0),0===e.strm.avail_out?wJ:AJ):(e.strstart>e.block_start&&(CJ(e,!1),e.strm.avail_out),EJ)})),new BJ(4,4,8,4,LJ),new BJ(4,5,16,8,LJ),new BJ(4,6,32,32,LJ),new BJ(4,4,16,16,jJ),new BJ(8,16,32,32,jJ),new BJ(8,16,128,128,jJ),new BJ(8,32,128,256,jJ),new BJ(32,128,258,1024,jJ),new BJ(32,258,258,4096,jJ)],qQ.deflateInit=function(e,t){return UJ(e,t,lJ,15,8,0)},qQ.deflateInit2=UJ,qQ.deflateReset=HJ,qQ.deflateResetKeep=GJ,qQ.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,rJ):iJ},qQ.deflate=function(e,t){var n,r,i,o;if(!e||!e.state||t>5||t<0)return e?OJ(e,iJ):iJ;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===TJ&&t!==nJ)return OJ(e,0===e.avail_out?-5:iJ);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===vJ)if(2===r.wrap)e.adler=0,PJ(r,31),PJ(r,139),PJ(r,8),r.gzhead?(PJ(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),PJ(r,255&r.gzhead.time),PJ(r,r.gzhead.time>>8&255),PJ(r,r.gzhead.time>>16&255),PJ(r,r.gzhead.time>>24&255),PJ(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),PJ(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(PJ(r,255&r.gzhead.extra.length),PJ(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=JZ(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(PJ(r,0),PJ(r,0),PJ(r,0),PJ(r,0),PJ(r,0),PJ(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),PJ(r,3),r.status=_J);else{var a=lJ+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=_J,DJ(r,a),0!==r.strstart&&(DJ(r,e.adler>>>16),DJ(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),IJ(e),i=r.pending,r.pending!==r.pending_buf_size));)PJ(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),IJ(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,PJ(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),IJ(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,PJ(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=JZ(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=bJ)}else r.status=bJ;if(r.status===bJ&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&IJ(e),r.pending+2<=r.pending_buf_size&&(PJ(r,255&e.adler),PJ(r,e.adler>>8&255),e.adler=0,r.status=_J)):r.status=_J),0!==r.pending){if(IJ(e),0===e.avail_out)return r.last_flush=-1,rJ}else if(0===e.avail_in&&xJ(t)<=xJ(n)&&t!==nJ)return OJ(e,-5);if(r.status===TJ&&0!==e.avail_in)return OJ(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==tJ&&r.status!==TJ){var s=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(MJ(e),0===e.lookahead)){if(t===tJ)return EJ;break}if(e.match_length=0,n=QZ._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(CJ(e,!1),0===e.strm.avail_out))return EJ}return e.insert=0,t===nJ?(CJ(e,!0),0===e.strm.avail_out?wJ:AJ):e.last_lit&&(CJ(e,!1),0===e.strm.avail_out)?EJ:SJ}(r,t):3===r.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=gJ){if(MJ(e),e.lookahead<=gJ&&t===tJ)return EJ;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=mJ&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+gJ;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=gJ-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=mJ?(n=QZ._tr_tally(e,1,e.match_length-mJ),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=QZ._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(CJ(e,!1),0===e.strm.avail_out))return EJ}return e.insert=0,t===nJ?(CJ(e,!0),0===e.strm.avail_out?wJ:AJ):e.last_lit&&(CJ(e,!1),0===e.strm.avail_out)?EJ:SJ}(r,t):WZ[r.level].func(r,t);if((s===wJ||s===AJ)&&(r.status=TJ),s===EJ||s===wJ)return 0===e.avail_out&&(r.last_flush=-1),rJ;if(s===SJ&&(1===t?QZ._tr_align(r):5!==t&&(QZ._tr_stored_block(r,0,0,!1),3===t&&(kJ(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),IJ(e),0===e.avail_out))return r.last_flush=-1,rJ}return t!==nJ?rJ:r.wrap<=0?1:(2===r.wrap?(PJ(r,255&e.adler),PJ(r,e.adler>>8&255),PJ(r,e.adler>>16&255),PJ(r,e.adler>>24&255),PJ(r,255&e.total_in),PJ(r,e.total_in>>8&255),PJ(r,e.total_in>>16&255),PJ(r,e.total_in>>24&255)):(DJ(r,e.adler>>>16),DJ(r,65535&e.adler)),IJ(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?rJ:1)},qQ.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==vJ&&69!==t&&73!==t&&91!==t&&t!==bJ&&t!==_J&&t!==TJ?OJ(e,iJ):(e.state=null,t===_J?OJ(e,-3):rJ):iJ},qQ.deflateSetDictionary=function(e,t){var n,r,i,o,a,s,l,c,u=t.length;if(!e||!e.state||(2===(o=(n=e.state).wrap)||1===o&&n.status!==vJ||n.lookahead))return iJ;for(1===o&&(e.adler=ZZ(e.adler,t,u,0)),n.wrap=0,u>=n.w_size&&(0===o&&(kJ(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new KZ.Buf8(n.w_size),KZ.arraySet(c,t,u-n.w_size,n.w_size,0),t=c,u=n.w_size),a=e.avail_in,s=e.next_in,l=e.input,e.avail_in=u,e.next_in=0,e.input=t,MJ(n);n.lookahead>=mJ;){r=n.strstart,i=n.lookahead-(mJ-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+mJ-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=mJ-1,MJ(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=mJ-1,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=a,n.wrap=o,rJ},qQ.deflateInfo="pako deflate (from Nodeca project)";var zJ={},VJ=YQ,XJ=!0,YJ=!0;try{String.fromCharCode.apply(null,[0])}catch{XJ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{YJ=!1}for(var WJ=new VJ.Buf8(256),qJ=0;qJ<256;qJ++)WJ[qJ]=qJ>=252?6:qJ>=248?5:qJ>=240?4:qJ>=224?3:qJ>=192?2:1;function $J(e,t){if(t<65534&&(e.subarray&&YJ||!e.subarray&&XJ))return String.fromCharCode.apply(null,VJ.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}WJ[254]=WJ[254]=1,zJ.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&(56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new VJ.Buf8(s),o=0,i=0;o<s;i++)55296===(64512&(n=e.charCodeAt(i)))&&i+1<a&&(56320===(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},zJ.buf2binstring=function(e){return $J(e,e.length)},zJ.binstring2buf=function(e){for(var t=new VJ.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},zJ.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=WJ[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return $J(s,r)},zJ.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+WJ[e[n]]>t?n:t};var KJ=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},QJ=qQ,ZJ=YQ,JJ=zJ,e0=$Z,t0=KJ,n0=Object.prototype.toString,r0=0,i0=-1,o0=0,a0=8;function s0(e){if(!(this instanceof s0))return new s0(e);this.options=ZJ.assign({level:i0,method:a0,chunkSize:16384,windowBits:15,memLevel:8,strategy:o0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t0,this.strm.avail_out=0;var n=QJ.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==r0)throw new Error(e0[n]);if(t.header&&QJ.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?JJ.string2buf(t.dictionary):"[object ArrayBuffer]"===n0.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=QJ.deflateSetDictionary(this.strm,r))!==r0)throw new Error(e0[n]);this._dict_set=!0}}function l0(e,t){var n=new s0(t);if(n.push(e,!0),n.err)throw n.msg||e0[n.err];return n.result}s0.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=JJ.string2buf(e):"[object ArrayBuffer]"===n0.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new ZJ.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=QJ.deflate(i,r))&&n!==r0)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(4===r||2===r))&&("string"===this.options.to?this.onData(JJ.buf2binstring(ZJ.shrinkBuf(i.output,i.next_out))):this.onData(ZJ.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=QJ.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===r0):(2===r&&(this.onEnd(r0),i.avail_out=0),!0)},s0.prototype.onData=function(e){this.chunks.push(e)},s0.prototype.onEnd=function(e){e===r0&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ZJ.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},WQ.Deflate=s0,WQ.deflate=l0,WQ.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l0(e,t)},WQ.gzip=function(e,t){return(t=t||{}).gzip=!0,l0(e,t)};var c0={},u0={},h0=YQ,p0=15,f0=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d0=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m0=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g0=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],y0=YQ,v0=XZ,b0=qZ,_0=function(e,t){var n,r,i,o,a,s,l,c,u,h,p,f,d,m,g,y,v,b,_,T,E,S,w,A,O;n=e.state,r=e.next_in,A=e.input,i=r+(e.avail_in-5),o=e.next_out,O=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,p=n.window,f=n.hold,d=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{d<15&&(f+=A[r++]<<d,d+=8,f+=A[r++]<<d,d+=8),b=m[f&y];t:for(;;){if(f>>>=_=b>>>24,d-=_,0===(_=b>>>16&255))O[o++]=65535&b;else{if(!(16&_)){if(64&_){if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=m[(65535&b)+(f&(1<<_)-1)];continue t}for(T=65535&b,(_&=15)&&(d<_&&(f+=A[r++]<<d,d+=8),T+=f&(1<<_)-1,f>>>=_,d-=_),d<15&&(f+=A[r++]<<d,d+=8,f+=A[r++]<<d,d+=8),b=g[f&v];;){if(f>>>=_=b>>>24,d-=_,16&(_=b>>>16&255)){if(E=65535&b,d<(_&=15)&&(f+=A[r++]<<d,(d+=8)<_&&(f+=A[r++]<<d,d+=8)),(E+=f&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=_,d-=_,E>(_=o-a)){if((_=E-_)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,w=p,0===h){if(S+=c-_,_<T){T-=_;do{O[o++]=p[S++]}while(--_);S=o-E,w=O}}else if(h<_){if(S+=c+h-_,(_-=h)<T){T-=_;do{O[o++]=p[S++]}while(--_);if(S=0,h<T){T-=_=h;do{O[o++]=p[S++]}while(--_);S=o-E,w=O}}}else if(S+=h-_,_<T){T-=_;do{O[o++]=p[S++]}while(--_);S=o-E,w=O}for(;T>2;)O[o++]=w[S++],O[o++]=w[S++],O[o++]=w[S++],T-=3;T&&(O[o++]=w[S++],T>1&&(O[o++]=w[S++]))}else{S=o-E;do{O[o++]=O[S++],O[o++]=O[S++],O[o++]=O[S++],T-=3}while(T>2);T&&(O[o++]=O[S++],T>1&&(O[o++]=O[S++]))}break}if(64&_){e.msg="invalid distance code",n.mode=30;break e}b=g[(65535&b)+(f&(1<<_)-1)]}}break}}while(r<i&&o<s);r-=T=d>>3,f&=(1<<(d-=T<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=d},T0=function(e,t,n,r,i,o,a,s){var l,c,u,h,p,f,d,m,g,y=s.bits,v=0,b=0,_=0,T=0,E=0,S=0,w=0,A=0,O=0,x=0,k=null,I=0,C=new h0.Buf16(16),P=new h0.Buf16(16),D=null,R=0;for(v=0;v<=p0;v++)C[v]=0;for(b=0;b<r;b++)C[t[n+b]]++;for(E=y,T=p0;T>=1&&0===C[T];T--);if(E>T&&(E=T),0===T)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(_=1;_<T&&0===C[_];_++);for(E<_&&(E=_),A=1,v=1;v<=p0;v++)if(A<<=1,(A-=C[v])<0)return-1;if(A>0&&(0===e||1!==T))return-1;for(P[1]=0,v=1;v<p0;v++)P[v+1]=P[v]+C[v];for(b=0;b<r;b++)0!==t[n+b]&&(a[P[t[n+b]]++]=b);if(0===e?(k=D=a,f=19):1===e?(k=f0,I-=257,D=d0,R-=257,f=256):(k=m0,D=g0,f=-1),x=0,b=0,v=_,p=o,S=E,w=0,u=-1,h=(O=1<<E)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){d=v-w,a[b]<f?(m=0,g=a[b]):a[b]>f?(m=D[R+a[b]],g=k[I+a[b]]):(m=96,g=0),l=1<<v-w,_=c=1<<S;do{i[p+(x>>w)+(c-=l)]=d<<24|m<<16|g}while(0!==c);for(l=1<<v-1;x&l;)l>>=1;if(0!==l?(x&=l-1,x+=l):x=0,b++,0===--C[v]){if(v===T)break;v=t[n+a[b]]}if(v>E&&(x&h)!==u){for(0===w&&(w=E),p+=_,A=1<<(S=v-w);S+w<T&&!((A-=C[S+w])<=0);)S++,A<<=1;if(O+=1<<S,1===e&&O>852||2===e&&O>592)return 1;i[u=x&h]=E<<24|S<<16|p-o}}return 0!==x&&(i[p+x]=v-w<<24|64<<16),s.bits=E,0},E0=1,S0=2,w0=0,A0=-2,O0=1,x0=12,k0=30,I0=852,C0=592;function P0(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function D0(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y0.Buf16(320),this.work=new y0.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R0(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O0,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y0.Buf32(I0),t.distcode=t.distdyn=new y0.Buf32(C0),t.sane=1,t.back=-1,w0):A0}function N0(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,R0(e)):A0}function M0(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15))?A0:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,N0(e))}function L0(e,t){var n,r;return e?(r=new D0,e.state=r,r.window=null,(n=M0(e,t))!==w0&&(e.state=null),n):A0}var j0,B0,F0=!0;function G0(e){if(F0){var t;for(j0=new y0.Buf32(512),B0=new y0.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(T0(E0,e.lens,0,288,j0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;T0(S0,e.lens,0,32,B0,0,e.work,{bits:5}),F0=!1}e.lencode=j0,e.lenbits=9,e.distcode=B0,e.distbits=5}function H0(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y0.Buf8(o.wsize)),r>=o.wsize?(y0.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),y0.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(y0.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}u0.inflateReset=N0,u0.inflateReset2=M0,u0.inflateResetKeep=R0,u0.inflateInit=function(e){return L0(e,15)},u0.inflateInit2=L0,u0.inflate=function(e,t){var n,r,i,o,a,s,l,c,u,h,p,f,d,m,g,y,v,b,_,T,E,S,w,A,O=0,x=new y0.Buf8(4),k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return A0;(n=e.state).mode===x0&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,h=s,p=l,S=w0;e:for(;;)switch(n.mode){case O0:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(2&n.wrap&&35615===c){n.check=0,x[0]=255&c,x[1]=c>>>8&255,n.check=b0(n.check,x,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=k0;break}if(8!==(15&c)){e.msg="unknown compression method",n.mode=k0;break}if(u-=4,E=8+(15&(c>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=k0;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=512&c?10:x0,c=0,u=0;break;case 2:for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(n.flags=c,8!==(255&n.flags)){e.msg="unknown compression method",n.mode=k0;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=k0;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=b0(n.check,x,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=b0(n.check,x,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=b0(n.check,x,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=b0(n.check,x,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y0.arraySet(n.head.extra,r,o,f,E)),512&n.flags&&(n.check=b0(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;f=0;do{E=r[o+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&(n.check=b0(n.check,r,f,o)),s-=f,o+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;f=0;do{E=r[o+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&(n.check=b0(n.check,r,f,o)),s-=f,o+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=k0;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=x0;break;case 10:for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}e.adler=n.check=P0(c),c=0,u=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=x0;case x0:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(G0(n),n.mode=20,6===t){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=k0}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=k0;break}if(n.length=65535&c,c=0,u=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(f=n.length){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;y0.arraySet(i,r,o,f,a),s-=f,o+=f,l-=f,a+=f,n.length-=f;break}n.mode=x0;break;case 17:for(;u<14;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=k0;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.lens[k[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[k[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,w={bits:n.lenbits},S=T0(0,n.lens,0,19,n.lencode,0,n.work,w),n.lenbits=w.bits,S){e.msg="invalid code lengths set",n.mode=k0;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;y=(O=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&O,!((g=O>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(v<16)c>>>=g,u-=g,n.lens[n.have++]=v;else{if(16===v){for(A=g+2;u<A;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=k0;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===v){for(A=g+3;u<A;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}u-=g,E=0,f=3+(7&(c>>>=g)),c>>>=3,u-=3}else{for(A=g+7;u<A;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}u-=g,E=0,f=11+(127&(c>>>=g)),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=k0;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===k0)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=k0;break}if(n.lenbits=9,w={bits:n.lenbits},S=T0(E0,n.lens,0,n.nlen,n.lencode,0,n.work,w),n.lenbits=w.bits,S){e.msg="invalid literal/lengths set",n.mode=k0;break}if(n.distbits=6,n.distcode=n.distdyn,w={bits:n.distbits},S=T0(S0,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,w),n.distbits=w.bits,S){e.msg="invalid distances set",n.mode=k0;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,_0(e,p),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===x0&&(n.back=-1);break}for(n.back=0;y=(O=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,v=65535&O,!((g=O>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(y&&!(240&y)){for(b=g,_=y,T=v;y=(O=n.lencode[T+((c&(1<<b+_)-1)>>b)])>>>16&255,v=65535&O,!(b+(g=O>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,n.length=v,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=x0;break}if(64&y){e.msg="invalid literal/length code",n.mode=k0;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(A=n.extra;u<A;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;y=(O=n.distcode[c&(1<<n.distbits)-1])>>>16&255,v=65535&O,!((g=O>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(!(240&y)){for(b=g,_=y,T=v;y=(O=n.distcode[T+((c&(1<<b+_)-1)>>b)])>>>16&255,v=65535&O,!(b+(g=O>>>24)<=u);){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=g,u-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=k0;break}n.offset=v,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(A=n.extra;u<A;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=k0;break}n.mode=25;case 25:if(0===l)break e;if(f=p-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=k0;break}f>n.wnext?(f-=n.wnext,d=n.wsize-f):d=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,d=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[a++]=m[d++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=r[o++]<<u,u+=8}if(p-=l,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?b0(n.check,i,p,a-p):v0(n.check,i,p,a-p)),p=l,(n.flags?c:P0(c))!==n.check){e.msg="incorrect data check",n.mode=k0;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=k0;break}c=0,u=0}n.mode=29;case 29:S=1;break e;case k0:S=-3;break e;case 31:return-4;default:return A0}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<k0&&(n.mode<27||4!==t))&&H0(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?b0(n.check,i,p,e.next_out-p):v0(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===x0?128:0)+(20===n.mode||15===n.mode?256:0),(0===h&&0===p||4===t)&&S===w0&&(S=-5),S},u0.inflateEnd=function(e){if(!e||!e.state)return A0;var t=e.state;return t.window&&(t.window=null),e.state=null,w0},u0.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?(n.head=t,t.done=!1,w0):A0},u0.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state&&(0===(n=e.state).wrap||11===n.mode)?11===n.mode&&v0(1,t,r,0)!==n.check?-3:H0(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,w0):A0},u0.inflateInfo="pako inflate (from Nodeca project)";var U0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var z0=u0,V0=YQ,X0=zJ,Y0=U0,W0=$Z,q0=KJ,$0=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},K0=Object.prototype.toString;function Q0(e){if(!(this instanceof Q0))return new Q0(e);this.options=V0.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new q0,this.strm.avail_out=0;var n=z0.inflateInit2(this.strm,t.windowBits);if(n!==Y0.Z_OK)throw new Error(W0[n]);if(this.header=new $0,z0.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=X0.string2buf(t.dictionary):"[object ArrayBuffer]"===K0.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=z0.inflateSetDictionary(this.strm,t.dictionary))!==Y0.Z_OK))throw new Error(W0[n])}function Z0(e,t){var n=new Q0(t);if(n.push(e,!0),n.err)throw n.msg||W0[n.err];return n.result}Q0.prototype.push=function(e,t){var n,r,i,o,a,s=this.strm,l=this.options.chunkSize,c=this.options.dictionary,u=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?Y0.Z_FINISH:Y0.Z_NO_FLUSH,"string"==typeof e?s.input=X0.binstring2buf(e):"[object ArrayBuffer]"===K0.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new V0.Buf8(l),s.next_out=0,s.avail_out=l),(n=z0.inflate(s,Y0.Z_NO_FLUSH))===Y0.Z_NEED_DICT&&c&&(n=z0.inflateSetDictionary(this.strm,c)),n===Y0.Z_BUF_ERROR&&!0===u&&(n=Y0.Z_OK,u=!1),n!==Y0.Z_STREAM_END&&n!==Y0.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0===s.avail_out||n===Y0.Z_STREAM_END||0===s.avail_in&&(r===Y0.Z_FINISH||r===Y0.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=X0.utf8border(s.output,s.next_out),o=s.next_out-i,a=X0.buf2string(s.output,i),s.next_out=o,s.avail_out=l-o,o&&V0.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(V0.shrinkBuf(s.output,s.next_out))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==Y0.Z_STREAM_END);return n===Y0.Z_STREAM_END&&(r=Y0.Z_FINISH),r===Y0.Z_FINISH?(n=z0.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Y0.Z_OK):(r===Y0.Z_SYNC_FLUSH&&(this.onEnd(Y0.Z_OK),s.avail_out=0),!0)},Q0.prototype.onData=function(e){this.chunks.push(e)},Q0.prototype.onEnd=function(e){e===Y0.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=V0.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},c0.Inflate=Q0,c0.inflate=Z0,c0.inflateRaw=function(e,t){return(t=t||{}).raw=!0,Z0(e,t)},c0.ungzip=Z0;var J0={};(0,YQ.assign)(J0,WQ,c0,U0);const e1=Cs(J0);const t1=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function n1(e){let t=/^\s*/.exec(e);return null!==t?t[0].length:0}var r1=function(e){if("string"!=typeof e)throw new TypeError("input must be a string");let t,n,r,i,o,a,s,l=[],c="LOCUS",u="DEFINITION",h="ACCESSION",p="VERSION",f="KEYWORDS",d="SOURCE",m="ORGANISM",g="REFERENCE",y="FEATURES",v="ORIGIN",b="//",_=e.split(/\r?\n/),T=!1;for(let L of _){if(null===L)break;let e=C(L),n=D(L),o=N(L),a=R(L);if(e===b||a?(r=e,i=null):o&&(i=e),""!==L.trim()&&";"!==e){if(!T&&r!==c)break;switch(r){case c:T=!0,A(L);break;case y:k(L,e,n);break;case v:w(L,e);break;case u:case h:case p:case f:P(r,L,r.toLowerCase());break;case d:i===m?P(i,L,"organism"):P(e,L,"source");break;case g:if(e===g){const e=t.references||[];t.references=e,e.push({})}x(L,i);break;case b:E()}}}return l[l.length-1]!==t&&E(),l;function E(){(function(){if(t&&t.features)for(let e=0;e<t.features.length;e++)t.features[e]=M(t.features[e])})(),l.push(t)}function S(){return t.features[t.features.length-1]}function w(e,n){if(n!==v){let n=e.replace(/[\s]*[0-9]*/g,"");t.sequence+=n}}function A(e){t={features:[],name:"Untitled sequence",sequence:"",references:[]};const n=(e=O(c,e)).match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);let r=n[1],i=+n[2],o=n[3],a="circular"===n[4];const s=t;let l="";n[6]?(s.genbankDivision=n[5],l=n[6]):l=n[5],s.circular=a,s.moleculeType=o;const u=l.match(/^(\d{2})-(.{3})-(\d{4})$/),h=new Date;h.setFullYear(+u[3]),h.setUTCMonth(t1.indexOf(u[2].toUpperCase())),h.setDate(+u[1]),h.setUTCHours(12),h.setMinutes(0),h.setSeconds(0),h.setMilliseconds(0),s.date=h.toISOString(),s.name=r,s.size=i}function O(e,t){return 0===(t=t.replace(/^\s*/,"")).indexOf(e)&&(t=t.replace(e,"")),t.trim()}function x(e,n){const r=t.references;let i=r[r.length-1];n?P(n,e,n.toLowerCase(),i):P(g,e,"description",i)}function k(e,r,i){let l;if(r!==y)if(a&&(o=n1(e),a=!1),function(e,t){let n=n1(e);return!(t===n||e.trim().charAt(0).match(/\//))}(e,o))s?(I(e.trim()),s=!0):(n&&(n[n.length-1]+=e.trim().replace(/"/g,"")),s=!1);else if(function(e){let t=!1;return(e.trim().charAt(0).match(/\//)||e.match(/^[\s]*\/[\w]+=[\S]+/))&&(t=!0),t}(e))S()&&(function(e){let t,r;t=e.trim(),t=t.replace(/^\/|"$/g,""),r=t.split(/="|=/);let i=r[1];i&&(i=i.replace(/\\/g," "),e.match(/="/g)?i=i.replace(/".*/g,""):i.match(/^\d+$/g)&&(i=+i));let o=r[0],a=S().notes;a[o]?a[o].push(i):a[o]=[i],n=a[o]}(e),s=!1);else{l=i.match(/complement/g)?-1:1,t.features.push({notes:{}});let e=S();e.type=r,e.strand=l,I(i),s=!0}else a=!0}function I(e){e=e.trim();let t=[];e.replace(/(\d+)/g,(function(e,n){t.push(n)}));let n=S();n.start=+t[0],n.end=void 0===t[1]?+t[0]:+t[1]}function C(e){let t;return t=(e=e.trim()).split(/[\s]+/),t[0]}function P(e,n,r,i){i=i||t;let o=O(e,n);i[r]=i[r]?`${i[r]} `:"",i[r]+=o}function D(e){let t;return e.indexOf("=")<0?e=(e=e.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,"")).trim():(t=e.split(/=/),t[1])}function R(e){let t=!1;return e.substr(0,10).match(/^[\S]+/)&&(t=!0),t}function N(e){let t=!1;return e.substr(0,10).match(/^[\s]+[\S]+/)&&(t=!0),t}function M(e){return e.notes.label?e.name=e.notes.label[0]:e.notes.gene?e.name=e.notes.gene[0]:e.notes.ApEinfo_label?e.name=e.notes.ApEinfo_label[0]:e.notes.name?e.name=e.notes.name[0]:e.notes.organism?e.name=e.notes.organism[0]:e.notes.locus_tag?e.name=e.notes.locus_tag[0]:e.notes.note?e.name=e.notes.note[0]:e.name="Untitled Feature",e.name="string"==typeof e.name?e.name:String(e.name),e}};const i1=Cs(r1);function o1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a1(r.key),r)}}function a1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function s1(e,t,n){const r=[];if(!e.length)return[];let i=e[0].start,o=e[0].end;for(let a=1;a<e.length;a++)e[a].start<o+5/t?o=Math.max(o,e[a].end):(r.push({type:"filler",start:i,end:o,strand:n}),i=e[a].start,o=e[a].end);return r.push({start:i,end:o,type:"filler",strand:n}),r}function l1(e){const t=e.end-e.start,n=1===e.strand?"+":"-",r=ag.nice();return function(e){return"filler"===e.type}(e)?{xStart:e.start,xEnd:e.end,strand:e.strand,fields:[],type:"filler",uid:r}:{xStart:e.start,xEnd:e.end,strand:n,chrOffset:0,importance:e.end-e.start,uid:r,type:e.type,fields:["chrom",e.start,e.end,e.name,t,n,"","",e.type,e.name,e.start.toString(),e.end.toString(),e.start.toString(),e.end.toString()]}}function c1(e){const t=i1(e),n=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(t[0].features.filter((e=>"source"!==e.type)).sort(((e,t)=>e.start-t.start)));return{json:t,features:n}}let u1=function(){function e(t){let n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataConfig=t,this.trackUid=ag.nice(),this.errorTxt="",t.url){const e=t.url.slice(t.url.length-3);n=fetch(t.url,{mode:"cors",redirect:"follow",method:"GET"}).then((t=>async function(e,t){let{gzipped:n}=t;if(!n)return e.text();const r=await e.arrayBuffer();return e1.inflate(r,{to:"string"})}(t,{gzipped:".gz"===e})))}else{if(!t.text)throw new Error("No data or URL specified");n=Promise.resolve(t.text)}this.gbDataPromise=n.then((e=>c1(e)))}return function(e,t,n){t&&o1(e.prototype,t),n&&o1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"tilesetInfo",value:function(e){return this.tilesetInfoLoading=!0,this.gbDataPromise.then((t=>{this.tilesetInfoLoading=!1;const n={name:`genbank-${this.trackUid}`,tile_size:1024,max_zoom:Math.ceil(Math.log(t.json[0].size/1024)/Math.log(2)),max_width:t.json[0].size,min_pos:[0],max_pos:[t.json[0].size]};return e&&e(n),n})).catch((t=>{this.tilesetInfoLoading=!1,e&&e({error:`Error parsing genbank: ${t}`})}))}},{key:"fetchTilesDebounced",value:async function(e,t){const n={},r=[],i=[];for(const a of t){const e=a.split("."),t=parseInt(e[0],10),n=parseInt(e[1],10);Number.isNaN(n)||Number.isNaN(t)?console.warn("Invalid tile zoom or position:",t,n):(r.push(a),i.push(this.tile(t,n)))}const o=await Promise.all(i);for(let a=0;a<o.length;a++){const e=r[a];n[e]=o[a],n[e].tilePositionId=e}return e(n),n}},{key:"tile",value:async function(e,t){const[n,r]=await Promise.all([this.tilesetInfo(),this.gbDataPromise]);if(!n)throw new Error("No tileset info");const i=+n.max_width/2**+e,o=n.min_pos[0]+t*i,a=n.min_pos[0]+(t+1)*i,s=r.features.filter((e=>e.end>o&&e.start<a)),l=1024/2**(n.max_zoom-e),c=s1(s.filter((e=>1===e.strand)),l,"+"),u=s1(s.filter((e=>1!==e.strand)),l,"-"),h=[];for(let p=0;p<r.features.length&&!(h.length>=20);p++)r.features[p].end>=o&&r.features[p].start<=a&&h.push(r.features[p]);return[h,c,u].flatMap((e=>e.map(l1)))}}]),e}();function h1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p1(r.key),r)}}function p1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let f1=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.dataConfig=t,this.tilesetInfoData=Object.values(this.dataConfig.tilesetInfo)[0],this.tilesData={},this.tilesetInfoLoading=!0}return function(e,t,n){t&&h1(e.prototype,t),n&&h1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"tilesetInfo",value:async function(e){return this.tilesetInfoLoading=!1,e(this.tilesetInfoData),this.tilesetInfoData}},{key:"fetchTilesDebounced",value:async function(e,t){this.tilesData={};for(const i of Object.keys(this.dataConfig.tiles)){const e=`localtile.${i.split(".").slice(1).join(".")}`;this.tilesData[e]=this.dataConfig.tiles[i]}const n={},r=t.map((e=>`localtile.${e}`));Cw(this.tilesData,"",r);for(const i of t)n[i]=this.tilesData[`localtile.${i}`];return e(n),n}},{key:"tile",value:function(e,t){}}]),e}();function d1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m1(r.key),r)}}function m1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function g1(e){return null===e.data}let y1=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.taskList=[],this.taskHandle=null,this.requestIdleCallbackTimeout=300}return function(e,t,n){t&&d1(e.prototype,t),n&&d1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"enqueueTask",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n?this.taskList.push({handler:e,data:t}):(this.taskList=this.taskList.filter((e=>e.trackId!==n)),this.taskList.push({handler:e,data:t,trackId:n})),this.taskHandle||(this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}))}},{key:"runTaskQueue",value:function(e){for(;(e.timeRemaining()>0||e.didTimeout)&&this.taskList.length;){const e=this.taskList.shift();e&&g1(e)?e.handler():e&&e.handler(e.data)}this.taskList.length?this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}):this.taskHandle=0}}]),e}();const v1=new y1;function b1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_1(r.key),r)}}function _1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function T1(){return T1=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A1(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},T1.apply(this,arguments)}function E1(e,t){return(E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=A1(e);if(t){var i=A1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w1(e)}(this,n)}}function w1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A1(e){return(A1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let O1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E1(e,t)}(n,e);var t=S1(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{pubSub:o,dataConfig:a,handleTilesetInfoReceived:s,animate:l,onValueScaleChanged:c}=e;return i.renderVersion=1,i.visibleTiles=new Set,i.visibleTileIds=new Set,i.renderingTiles=new Set,i.fetching=new Set,i.scale={},i.fetchedTiles={},i.tileGraphics={},i.maxZoom=0,i.medianVisibleValue=null,i.backgroundTaskScheduler=v1,i.continuousScaling="requestIdleCallback"in window,i.valueScaleMin=null,i.fixedValueScaleMin=null,i.valueScaleMax=null,i.fixedValueScaleMax=null,i.listeners={},i.pubSub=o,i.animate=l,i.onValueScaleChanged=c,i.prevValueScale=null,e.dataFetcher?i.dataFetcher=e.dataFetcher:i.dataFetcher=new XQ(a,i.pubSub),i.tilesetInfo=null,i.uuid=ag.nice(),i.trackNotFoundText=new nS.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),i.pLabel.addChild(i.trackNotFoundText),i.refreshTilesDebounced=LA(i.refreshTiles.bind(w1(i)),10,10),i.dataFetcher.tilesetInfo(((e,t)=>{if(e){if(i.tilesetInfo=e,i.dataFetcher.dataConfig.tilesetUid||(i.dataFetcher.dataConfig.tilesetUid=t),i.tilesetUid=i.dataFetcher.dataConfig.tilesetUid,i.server=i.dataFetcher.dataConfig.server||"unknown",i.tilesetInfo&&i.tilesetInfo.chromsizes&&(i.chromInfo=xA(i.tilesetInfo.chromsizes)),"error"in i.tilesetInfo)return console.warn("Error retrieving tilesetInfo:",a,i.tilesetInfo.error),i.tilesetInfo=null,void i.setError(i.tilesetInfo.error);i.tilesetInfo.resolutions?i.maxZoom=i.tilesetInfo.resolutions.length:i.maxZoom=+i.tilesetInfo.max_zoom,i.options&&i.options.maxZoom&&(i.options.maxZoom>=0?i.maxZoom=Math.min(i.options.maxZoom,i.maxZoom):console.error("Invalid maxZoom on track:",w1(i))),i.refreshTiles(),s&&s(e),i.options||(i.options={}),i.options.name=i.options.name||e.name,i.checkValueScaleLimits(),i.draw(),i.drawLabel(),i.animate()}})),i}return function(e,t,n){t&&b1(e.prototype,t),n&&b1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setError",value:function(e){this.errorTextText=e,this.draw(),this.animate()}},{key:"setFixedValueScaleMin",value:function(e){Number.isNaN(+e)?this.fixedValueScaleMin=null:this.fixedValueScaleMin=+e}},{key:"setFixedValueScaleMax",value:function(e){Number.isNaN(+e)?this.fixedValueScaleMax=null:this.fixedValueScaleMax=+e}},{key:"checkValueScaleLimits",value:function(){this.valueScaleMin=typeof this.options.valueScaleMin<"u"?+this.options.valueScaleMin:null,null!==this.fixedValueScaleMin&&(this.valueScaleMin=this.fixedValueScaleMin),this.valueScaleMax=typeof this.options.valueScaleMax<"u"?+this.options.valueScaleMax:null,null!==this.fixedValueScaleMax&&(this.valueScaleMax=this.fixedValueScaleMax)}},{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){const n=this.listeners[e].indexOf(t);-1===n||n>=this.listeners[e].length||this.listeners[e].splice(n,1)}},{key:"rerender",value:function(e){T1(A1(n.prototype),"rerender",this).call(this,e),this.renderVersion+=1,this.tilesetInfo&&(this.checkValueScaleLimits(),this.tilesetInfo.resolutions?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter((e=>this.visibleTileIds.has(e)))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map((e=>this.fetchedTiles[e]))}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e),mirrored:e.mirrored}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"removeOldTiles",value:function(){this.calculateVisibleTiles();const e=[...new Set(Object.keys(this.fetchedTiles))].filter((e=>!this.visibleTileIds.has(e)));this.removeTiles(e)}},{key:"refreshTiles",value:function(){if(!this.tilesetInfo)return;this.calculateVisibleTiles();const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTiles].filter((t=>!this.fetching.has(t.remoteId)&&!e.has(t.tileId)));for(let n=0;n<t.length;n++)this.fetching.add(t[n].remoteId);this.removeOldTiles(),this.fetchNewTiles(t)}},{key:"parentInFetched",value:function(e){const t=e.tileData.tilesetUid;let n=e.tileData.zoomLevel,r=e.tileData.tilePos;for(;n>0;)if(n-=1,r=r.map((e=>Math.floor(e/2))),`${t}.${n}.${r.join(".")}`in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(e){const t=e.tileData.zoomLevel-1,n=e.tileData.tilePos.map((e=>Math.floor(e/2)));return`${e.tileData.tilesetUid}.${t}.${n.join(".")}`}},{key:"removeTiles",value:function(e){!e.length||!this.areAllVisibleTilesLoaded()||this.renderingTiles.size||(e.forEach((e=>{const t=e;this.destroyTile(this.fetchedTiles[t]),t in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[t]),delete this.tileGraphics[t]),delete this.fetchedTiles[t]})),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.xScale(e),this.yScale(t),this.refreshTilesDebounced(),this.pMobile.position.x=r,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=n,this.pMobile.scale.y=1}},{key:"setPosition",value:function(e){T1(A1(n.prototype),"setPosition",this).call(this,e)}},{key:"setDimensions",value:function(e){T1(A1(n.prototype),"setDimensions",this).call(this,e)}},{key:"areAllVisibleTilesLoaded",value:function(){const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTileIds];for(let n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){return e?(this.scale.minValue=e,this):null!==this.valueScaleMin?this.valueScaleMin:this.scale.minValue}},{key:"maxValue",value:function(e){return e?(this.scale.maxValue=e,this):null!==this.valueScaleMax?this.valueScaleMax:this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(){this.scale.minRawValue=this.continuousScaling?this.minVisibleValue():this.minVisibleValueInTiles(),this.scale.maxRawValue=this.continuousScaling?this.maxVisibleValue():this.maxVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue}},{key:"updateTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"addMissingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);this.renderVersion+=1;for(let t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){const n=new nS.PIXI.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++){const n=this.fetchedTiles[e[t]];this.updateTile(n)}}},{key:"synchronizeTilesAndGraphics",value:function(){if(this.addMissingGraphics(),this.removeOldTiles(),this.updateExistingGraphics(),this.listeners.dataChanged)for(const e of this.listeners.dataChanged)e(this.visibleAndFetchedTiles().map((e=>e.tileData)))}},{key:"loadTileData",value:function(e,t){let n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"fetchNewTiles",value:function(e){if(e.length>0){const t=[...new Set(e.map((e=>e.remoteId)))];this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),t)}}},{key:"receivedTiles",value:function(e){for(let t=0;t<this.visibleTiles.length;t++){const{tileId:n}=this.visibleTiles[t];if(e[this.visibleTiles[t].remoteId]&&this.visibleTiles[t].remoteId in e){if(n in this.fetchedTiles||(this.fetchedTiles[n]=this.visibleTiles[t]),Array.isArray(e[this.visibleTiles[t].remoteId])){const r=e[this.visibleTiles[t].remoteId];this.fetchedTiles[n].tileData=[...r],Object.keys(r).filter((e=>Number.isNaN(+e))).forEach((e=>{this.fetchedTiles[n].tileData[e]=r[e]}))}else this.fetchedTiles[n].tileData={...e[this.visibleTiles[t].remoteId]};this.fetchedTiles[n].tileData.error&&console.warn("Error in loaded tile",n,this.fetchedTiles[n].tileData)}}for(const t in e)if(e[t]){const n=e[t].tilePositionId;this.fetching.has(n)&&this.fetching.delete(n)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(!this.prevValueScale||JSON.stringify(this.valueScale.domain())!==JSON.stringify(this.prevValueScale.domain()))&&(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged()),this.animate(),this.areAllVisibleTilesLoaded()&&this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid})}},{key:"draw",value:function(){if(this.delayDrawing)return;this.tilesetInfo?this.trackNotFoundText.visible=!1:(this.dataFetcher.tilesetInfoLoading?this.trackNotFoundText.text="Loading...":this.trackNotFoundText.text=`Tileset info not found. Server: [${this.server}] tilesetUid: [${this.tilesetUid}]`,[this.trackNotFoundText.x,this.trackNotFoundText.y]=this.position,this.flipText&&(this.trackNotFoundText.anchor.x=1,this.trackNotFoundText.scale.x=-1),this.trackNotFoundText.visible=!0),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid});const e=Object.values(this.fetchedTiles).map((e=>e.tileData&&e.tileData.error&&`${e.tileId}: ${e.tileData.error}`)).filter((e=>e));e.length?this.errorTextText=e.join("\n"):this.errorTextText="",T1(A1(n.prototype),"draw",this).call(this),Object.keys(this.fetchedTiles).forEach((e=>{this.drawTile(this.fetchedTiles[e])})),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid})}},{key:"drawTile",value:function(){}},{key:"calculateMedianVisibleValue",value:function(){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let e=this.visibleAndFetchedIds();0===e.length&&(e=Object.keys(this.fetchedTiles));const t=[].concat(...e.filter((e=>this.fetchedTiles[e].tileData.dense)).map((e=>Array.from(this.fetchedTiles[e].tileData.dense)))).filter((e=>e>0));return this.medianVisibleValue=uu(t),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){return[].concat(...this.visibleAndFetchedIds().map((e=>Array.from(this.fetchedTiles[e].tileData.dense))))}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.minVisibleValueInTiles(e)}},{key:"minVisibleValueInTiles",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.min(...t.map((e=>this.fetchedTiles[e].tileData.minNonZero)));return n===Number.MAX_SAFE_INTEGER&&(n=null),e?n:null!==this.valueScaleMin?this.valueScaleMin:n}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.maxVisibleValueInTiles(e)}},{key:"maxVisibleValueInTiles",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.max(...t.map((e=>this.fetchedTiles[e].tileData.maxNonZero)));return n===Number.MIN_SAFE_INTEGER&&(n=null),e?n:null!==this.valueScaleMax?this.valueScaleMax:n}},{key:"makeValueScale",value:function(e,t,n,r){let i=null,o=0,a=r;(null===a||typeof a>"u")&&(a=6);let s=Math.min(this.dimensions[1]-a,a),l=Math.max(this.dimensions[1]-a,a);if(this.dimensions[1]-a<a&&(s=this.dimensions[1]/2,l=this.dimensions[1]/2),"log"===this.options.valueScaling)o=t,o||(o=e),i=qp().domain([o,n+o]).range([s,l]);else{if("quantile"===this.options.valueScaling){const e=this.dimensions[1]-a,t=a,n=of().domain(this.allVisibleValues()).range(du(e,t,(t-e)/256));return n.ticks=n=>Kc(e,t,n),[n,0]}if("setquantile"===this.options.valueScaling){const e=this.dimensions[1]-a,t=a,n=new Set(this.allVisibleValues()),r=of().domain([...n]).range(du(e,t,(t-e)/256));return r.ticks=n=>Kc(e,t,n),[r,0]}i=Fp().domain([e,n]).range([l,s])}return[i,o]}}]),n}(UQ);function x1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k1(r.key),r)}}function k1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function I1(){return I1=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R1(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},I1.apply(this,arguments)}function C1(e,t){return(C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=R1(e);if(t){var i=R1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D1(e)}(this,n)}}function D1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R1(e){return(R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const N1=10,M1=10,L1=M1;let j1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C1(e,t)}(n,e);var t=P1(n);function n(e,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);const o={...e};o.onValueScaleChanged=()=>{e.onValueScaleChanged(),i.drawColorbar()},i=t.call(this,o,r);const{pubSub:a,animate:s,svgElement:l,onTrackOptionsChanged:c,onMouseMoveZoom:u,isShowGlobalMousePosition:h,isValueScaleLocked:p}=e;return i.pubSub=a,i.is2d=!0,i.animate=s,i.uid=ag.nice(),i.scaleBrush=NT(),i.onTrackOptionsChanged=c,i.isShowGlobalMousePosition=h,i.isValueScaleLocked=p,i.pColorbarArea=new nS.PIXI.Graphics,i.pMasked.addChild(i.pColorbarArea),i.pColorbar=new nS.PIXI.Graphics,i.pColorbarArea.addChild(i.pColorbar),i.axis=new xK(D1(i)),i.pColorbarArea.addChild(i.axis.pAxis),i.colorScale=wS,r&&r.colorRange&&(i.colorScale=YE(r.colorRange)),i.gBase=ql(l).append("g"),i.gMain=i.gBase.append("g"),i.gColorscaleBrush=i.gMain.append("g"),i.brushing=!1,i.prevOptions="",i.prevIndUpperLeftTile="",i.onMouseMoveZoom=u,i.setDataLensSize(11),i.dataLens=new Float32Array(i.dataLensSize**2),i.mouseMoveHandlerBound=i.mouseMoveHandler.bind(D1(i)),i.onMouseMoveZoom&&i.pubSubs.push(i.pubSub.subscribe("app.mouseMove",i.mouseMoveHandlerBound)),i.options&&i.options.showMousePosition&&!i.hideMousePosition&&(i.hideMousePosition=RA(D1(i),i.is2d,i.isShowGlobalMousePosition())),i.prevOptions=JSON.stringify(r),i}return function(e,t,n){t&&x1(e.prototype,t),n&&x1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"mouseMoveHandler",value:function(e){this.isWithin(e.x,e.y)&&(this.mouseX=e.x,this.mouseY=e.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mouseX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mouseY;if(typeof e>"u"||typeof t>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;const n=e-this.position[0],r=t-this.position[1];let i,o;try{o=this.getVisibleRectangleData(n-this.dataLensPadding,r-this.dataLensPadding,this.dataLensSize,this.dataLensSize),i=o.get(this.dataLensPadding,this.dataLensPadding)}catch{return}const a=this.dataLensSize;let s;try{s=GA(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch{return}if(!s)return;const l=Math.round(this._xScale.invert(n)),c=Math.round(this._yScale.invert(r));let u=[l,c],h=[Math.round(this._xScale.invert(n-this.dataLensPadding)),Math.round(this._xScale.invert(n+this.dataLensPadding))],p=[Math.round(this._yScale.invert(r-this.dataLensPadding)),Math.round(this._yScale.invert(r+this.dataLensPadding))];this.chromInfo&&(u=u.map((e=>FE(e,this.chromInfo).slice(0,2))),h=h.map((e=>FE(e,this.chromInfo).slice(0,2))),p=p.map((e=>FE(e,this.chromInfo).slice(0,2)))),this.onMouseMoveZoom({trackId:this.id,data:i,absX:e,absY:t,relX:n,relY:r,dataX:l,dataY:c,orientation:"2d",dataLens:o,dim:a,toRgb:s,center:u,xRange:h,yRange:p,isGenomicCoords:!!this.chromInfo})}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!0)}},{key:"getAbsTileDim",value:function(e,t,n){const{tileX:r,tileY:i,tileWidth:o,tileHeight:a}=this.getTilePosAndDimensions(e,t),s={};return s.width=this._refXScale(r+o)-this._refXScale(r),s.height=this._refYScale(i+a)-this._refYScale(i),n?(s.x=this._refXScale(i),s.y=this._refYScale(r)):(s.x=this._refXScale(r),s.y=this._refYScale(i)),s}},{key:"updateValueScale",value:function(){let e=this.minValue(),t=this.maxValue();const n=1e-6;null!=e&&void 0!==t&&null!==t&&Math.abs(e-t)<n&&(e=Math.max(n,e-.001),t+=.001);const[r,i]=function(e,t,n,r,i){return"log"===(e||i)&&t>0?["log",qp().range([254,0]).domain([t+0,r+0])]:["linear",Fp().range([254,0]).domain([t,r])]}(this.options&&this.options.heatmapValueScaling||"log",e,this.medianVisibleValue,t,"log");return this.valueScale=i,this.limitedValueScale=this.valueScale.copy(),this.options&&typeof this.options.scaleStartPercent<"u"&&typeof this.options.scaleEndPercent<"u"&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),[r,i]}},{key:"rerender",value:function(e,t){I1(R1(n.prototype),"rerender",this).call(this,e,t),this.updateValueScale();const r=JSON.stringify(e);this.drawColorbar(),(t||r!==this.prevOptions)&&(this.prevOptions=r,this.options=e,I1(R1(n.prototype),"rerender",this).call(this,e,t),this.calculateVisibleTiles(),e&&e.colorRange&&(this.colorScale=YE(e.colorRange)),this.visibleAndFetchedTiles().forEach((e=>this.renderTile(e))),this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),this.options&&this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=RA(this,this.is2d,this.isShowGlobalMousePosition())))}},{key:"drawLabel",value:function(){this.options.labelPosition===this.options.colorbarPosition?this.labelXOffset=75:this.labelXOffset=0,I1(R1(n.prototype),"drawLabel",this).call(this)}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");t.width=this.binsPerTile(),t.height=this.binsPerTile();const n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);const r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"exportData",value:function(){if(this.tilesetInfo){const e=this.getVisibleRectangleData(0,0,this.dimensions[0],this.dimensions[1]),t={bounds:[this._xScale.domain(),this._yScale.domain()],dimensions:e.shape,data:wA(e)};FS("data.json",JSON.stringify(t))}}},{key:"setSpriteProperties",value:function(e,t,n,r){const i=this.getAbsTileDim(t,n,r);e.width=i.width,e.height=i.height,e.x=i.x,e.y=i.y,r&&n[0]!==n[1]&&(e.rotation=-Math.PI/2,e.scale.x=-1*Math.abs(e.scale.x))}},{key:"refXScale",value:function(e){I1(R1(n.prototype),"refXScale",this).call(this,e),this.draw()}},{key:"refYScale",value:function(e){I1(R1(n.prototype),"refYScale",this).call(this,e),this.draw()}},{key:"draw",value:function(){I1(R1(n.prototype),"draw",this).call(this)}},{key:"newBrushOptions",value:function(e){const t=JSON.parse(JSON.stringify(this.options)),n=this.valueScale.copy().range([this.colorbarHeight,0]),r=n.invert(e[0]),i=(n.invert(e[1])-n.domain()[0])/(n.domain()[1]-n.domain()[0]),o=(r-n.domain()[0])/(n.domain()[1]-n.domain()[0]);return t.scaleStartPercent=i.toFixed(5),t.scaleEndPercent=o.toFixed(5),t}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(e){if(!e.selection)return;const t=this.newBrushOptions(e.selection),n=JSON.stringify(t);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",(t=>"n"===t.type?e.selection[0]:e.selection[1]-2)),n!==this.prevOptions&&(this.prevOptions=n,this.rerender(t,!0),this.onTrackOptionsChanged(t),this.isValueScaleLocked()&&this.onValueScaleChanged())}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"setPosition",value:function(e){I1(R1(n.prototype),"setPosition",this).call(this,e),this.drawColorbar()}},{key:"setDimensions",value:function(e){I1(R1(n.prototype),"setDimensions",this).call(this,e),this.drawColorbar()}},{key:"removeColorbar",value:function(){this.pColorbarArea.visible=!1,this.scaleBrush.on(".brush")&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.selectAll("rect").remove()}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options||!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition)return void this.removeColorbar();if(this.pColorbarArea.visible=!0,!this.valueScale||Number.isNaN(+this.valueScale.domain()[0])||Number.isNaN(+this.valueScale.domain()[1]))return;const e=Math.min(this.dimensions[1]/2,200);if(this.colorbarHeight=e-20,this.colorbarHeight<0)return void this.removeColorbar();if(this.valueScale.domain()[1]===this.valueScale.domain()[0])return void this.removeColorbar();const t=this.valueScale.copy().range([this.colorbarHeight,0]);"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.scaleBrush.extent([[4,0],[L1,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[6,this.colorbarHeight]]),"topLeft"===this.options.colorbarPosition&&([this.pColorbarArea.x,this.pColorbarArea.y]=this.position,this.pColorbar.y=M1,this.axis.pAxis.y=M1,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+4},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"topRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1],this.pColorbar.y=M1,this.axis.pAxis.y=M1,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+N1+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"bottomRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=M1,this.axis.pAxis.y=M1,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+N1+1},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"bottomLeft"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=M1,this.axis.pAxis.y=M1,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.pColorbarArea.clear(),this.pColorbarArea.beginFill(CS(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity>=0?+this.options.colorbarBackgroundOpacity:.6),this.pColorbarArea.drawRect(0,0,75,e),this.options?(this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1)):this.options={scaleStartPercent:0,scaleEndPercent:1};const n=t.domain()[1]-t.domain()[0],r=t(this.options.scaleStartPercent*n+t.domain()[0]),i=t(this.options.scaleEndPercent*n+t.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",L1).attr("height",4).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[i,r]));const o=Fp().domain([0,255]).range([0,this.colorbarHeight]);for(let a=0;a<this.colorbarHeight;a++){const e=this.limitedValueScale(t.invert(a)),n=Math.max(0,Math.min(254,Math.floor(e)));this.pColorbar.beginFill(CS(`rgb(${this.colorScale[n][0]},${this.colorScale[n][1]},${this.colorScale[n][2]})`)),this.pColorbar.drawRect(0,a,N1,1)}this.pAxis.position.x=N1,this.pAxis.position.y=o(0),"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.axis.drawAxisRight(t,this.colorbarHeight):("topRight"===this.options.colorbarPosition||"bottomRight"===this.options.colorbarPosition)&&this.axis.drawAxisLeft(t,this.colorbarHeight)}},{key:"exportColorBarSVG",value:function(){const e=document.createElement("g");if(e.setAttribute("class","color-bar"),!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition||!this.valueScale)return e;e.setAttribute("transform",`translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);const t=document.createElement("rect");e.appendChild(t);const n=document.createElement("g");e.appendChild(n),n.setAttribute("transform",`translate(${this.pColorbar.x}, ${this.pColorbar.y})`);const r=Math.min(this.dimensions[1]/2,200);this.colorbarHeight=r-20,t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",75),t.setAttribute("height",r),t.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");const i=Fp().domain([0,255]).range([0,this.colorbarHeight]),o=this.colorbarHeight/256;for(let c=0;c<256;c++){const e=document.createElement("rect");n.appendChild(e),e.setAttribute("x",0),e.setAttribute("y",i(c)),e.setAttribute("width",N1),e.setAttribute("height",o),e.setAttribute("class","color-rect");const t=Math.min(this.colorScale.length-1,Math.max(0,Math.floor(this.limitedValueScale(this.valueScale.invert(c))))),r=this.colorScale[t];r?e.setAttribute("style",`fill: rgb(${r[0]}, ${r[1]}, ${r[2]})`):e.setAttribute("style","fill: rgb(255,255,255,0)")}const a=document.createElement("g");e.appendChild(a),a.setAttribute("transform",`translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);let s=null;const l=this.valueScale.copy().range([this.colorbarHeight,0]);return"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?s=this.axis.exportAxisRightSVG(l,this.colorbarHeight):("topRight"===this.options.colorbarPosition||"bottomRight"===this.options.colorbarPosition)&&(s=this.axis.exportAxisLeftSVG(l,this.colorbarHeight)),a.appendChild(s),e}},{key:"setDataLensSize",value:function(e){this.dataLensPadding=Math.max(0,Math.floor((e-1)/2)),this.dataLensSize=2*this.dataLensPadding+1}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||256}},{key:"getVisibleRectangleData",value:function(e,t,n,r){let i=this.calculateZoomLevel();i=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,i):i;const o=Fw.calculateTileWidth(this.tilesetInfo,i,this.binsPerTile())/this.binsPerTile(),a=[this._xScale.invert(e),this._xScale.invert(e+n)],s=[this._yScale.invert(t),this._yScale.invert(t+r)],l=[Math.max(a[0],this.tilesetInfo.min_pos[0]),Math.min(a[1],this.tilesetInfo.max_pos[0])],c=[Math.max(s[0],this.tilesetInfo.min_pos[1]),Math.min(s[1],this.tilesetInfo.max_pos[1])],u=Math.floor(l[0]/o),h=Math.floor(c[0]/o),p=Math.max(0,Math.ceil((l[1]-l[0])/o)),f=Math.max(0,Math.ceil((c[1]-c[0])/o)),d=EA(new Array(f*p).fill(NaN),[f,p]);return this.visibleAndFetchedTiles().forEach((e=>{const t=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos,{tileX:n,tileY:r,tileWidth:i,tileHeight:a}=this.getTilePosAndDimensions(e.tileData.zoomLevel,t,this.binsPerTile()),s=Math.floor(n/o),l=Math.floor((n+i)/o),c=Math.floor(r/o),m=Math.floor((r+a)/o);let g=Math.max(u,s)-s,y=Math.max(h,c)-c;const v=Math.min(u+p,l)-s,b=Math.min(h+f,m)-c,_=Math.max(s-u,0),T=Math.max(c-h,0),E=v-g,S=b-y;if(!(E<0||S<0)){if(e.mirrored&&g>y){const e=g;g=y,y=e}hA(d.hi(T+S,_+E).lo(T,_),e.dataArray.hi(y+S,g+E).lo(y,g))}})),d}},{key:"initTile",value:function(e){I1(R1(n.prototype),"initTile",this).call(this,e),e.tileData.dense.length===this.binsPerTile()**2&&(e.dataArray=EA(Array.from(e.tileData.dense),[this.binsPerTile(),this.binsPerTile()]),this.continuousScaling&&e.tileData.tilePos[0]===e.tileData.tilePos[1]&&e.mirrored&&(e.tileData.denseDataExtrema.mirrorPrecomputedExtrema(),I1(R1(n.prototype),"initTile",this).call(this,e))),null!==this.scale.minValue&&null!==this.scale.maxValue&&this.renderTile(e)}},{key:"updateTile",value:function(e){e.scale&&this.scale&&this.scale.minValue===e.scale.minValue&&this.scale.maxValue===e.scale.maxValue||(this.renderTile(e),this.drawColorbar())}},{key:"destroyTile",value:function(e){e.sprite.destroy(!0),e.canvas=null,e.sprite=null,e.texture=null}},{key:"pixDataFunction",value:function(e,t){if(t){const{graphics:n}=e,r=this.tileDataToCanvas(t.pixData);e.sprite&&e.sprite.destroy(!0);const i="4"===nS.PIXI.VERSION[0]?nS.PIXI.Texture.fromCanvas(r,nS.PIXI.SCALE_MODES.NEAREST):nS.PIXI.Texture.from(r,{scaleMode:nS.PIXI.SCALE_MODES.NEAREST}),o=new nS.PIXI.Sprite(i);e.sprite=o,e.texture=i,e.canvas=r,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored),n.removeChildren(),n.addChild(e.sprite)}this.renderingTiles.delete(e.tileId)}},{key:"renderTile",value:function(e){const[t]=this.updateValueScale();if(this.renderingTiles.add(e.tileId),this.tilesetInfo.tile_size&&e.tileData.dense.length<this.tilesetInfo.tile_size){const t=new Float32Array(this.tilesetInfo.tile_size);t.fill(NaN),t.set(e.tileData.dense),e.tileData.dense=t}Fw.tileDataToPixData(e,t,this.limitedValueScale.domain(),0,this.colorScale,(t=>this.pixDataFunction(e,t)),this.mirrorTiles()&&!e.mirrored&&e.tileData.tilePos[0]===e.tileData.tilePos[1],"upper-right"===this.options.extent&&e.tileData.tilePos[0]===e.tileData.tilePos[1],this.options.zeroValueColor?PS(this.options.zeroValueColor):void 0,{selectedRows:this.options.selectRows,selectedRowsAggregationMode:this.options.selectRowsAggregationMode,selectedRowsAggregationWithRelativeHeight:this.options.selectRowsAggregationWithRelativeHeight,selectedRowsAggregationMethod:this.options.selectRowsAggregationMethod})}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null,I1(R1(n.prototype),"remove",this).call(this)}},{key:"refScalesChanged",value:function(e,t){I1(R1(n.prototype),"refScalesChanged",this).call(this,e,t),aA(this.fetchedTiles).filter((e=>e.sprite)).forEach((e=>this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored)))}},{key:"superSVG",value:function(){return I1(R1(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let e=null,t=null;I1(R1(n.prototype),"exportSVG",this)?[t,e]=I1(R1(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const n of this.visibleAndFetchedTiles()){const e=180*n.sprite.rotation/Math.PI,t=document.createElement("g");t.setAttribute("transform",`translate(${n.sprite.x},${n.sprite.y}) rotate(${e}) scale(${n.sprite.scale.x},${n.sprite.scale.y})`);const i=document.createElement("image");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.canvas.toDataURL()),i.setAttribute("width",n.canvas.width),i.setAttribute("height",n.canvas.height),i.setAttribute("style","image-rendering: pixelated"),t.appendChild(i),r.appendChild(t)}const i=this.exportColorBarSVG();return e.appendChild(i),[t,t]}},{key:"getVisiblePartOfUppLeftTile",value:function(){const e=this.visibleAndFetchedTiles().map((e=>{const t=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos;return[t[0],t[1],e.tileId]}));if(0===e.length)return null;let t=e[0];for(let u=0;u<e.length;u++){const n=e[u];(n[0]<t[0]||n[1]<t[1])&&(t=n)}const n=Math.min(8,this.binsPerTile()),r=this.binsPerTile()/n,i=this.visibleAndFetchedTiles().filter((e=>e.tileId===t[2]))[0],o=this.getIndicesOfVisibleDataInTile(i),a=o[0],s=o[1],l=a-a%r,c=s-s%r;return[i.tileId,l,c]}},{key:"getIndicesOfVisibleDataInTile",value:function(e){const t=this._xScale.range(),n=this._yScale.range(),r=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos,{tileX:i,tileY:o,tileWidth:a,tileHeight:s}=this.getTilePosAndDimensions(e.tileData.zoomLevel,r,this.binsPerTile()),l=Fp().domain([0,this.binsPerTile()]).range([i,i+a]),c=Math.max(0,Math.round(l.invert(this._xScale.invert(t[0])))-1),u=Math.min(this.binsPerTile(),Math.round(l.invert(this._xScale.invert(t[1])))),h=Fp().domain([0,this.binsPerTile()]).range([o,o+s]),p=Math.max(0,Math.round(h.invert(this._yScale.invert(n[0])))-1),f=Math.min(this.binsPerTile(),Math.round(h.invert(this._yScale.invert(n[1]))));return e.mirrored&&r[0]!==r[1]?[p,c,f,u]:[c,p,u,f]}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.visibleAndFetchedTiles().map((e=>{if(void 0===e.tileData.denseDataExtrema)return null;const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMinNonZeroInSubset(t)}));if(0===t.length&&null===this.valueScaleMax)return null;const r=Math.min.apply(null,t);return r===Number.MAX_SAFE_INTEGER?I1(R1(n.prototype),"minVisibleValue",this).call(this,e):e?r:null!==this.valueScaleMin?this.valueScaleMin:r}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.visibleAndFetchedTiles().map((e=>{if(void 0===e.tileData.denseDataExtrema)return null;const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMaxNonZeroInSubset(t)}));if(0===t.length&&null===this.valueScaleMax)return null;const r=Math.max.apply(null,t);return r===Number.MIN_SAFE_INTEGER?I1(R1(n.prototype),"maxVisibleValue",this).call(this,e):e?r:null!==this.valueScaleMax?this.valueScaleMax:r}},{key:"zoomed",value:function(e,t,r,i,o){if(this.brushing)return;I1(R1(n.prototype),"zoomed",this).call(this,e,t),this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=r,this.pMain.scale.y=r;const a=this.isValueScaleLocked();if(this.continuousScaling&&void 0!==this.minValue()&&void 0!==this.maxValue()){const e=JSON.stringify(this.getVisiblePartOfUppLeftTile());if(null===this.valueScaleMin&&null===this.valueScaleMax&&!a&&e!==this.prevIndUpperLeftTile){const t=this.minVisibleValue(),n=this.maxVisibleValue(),r=1e-6;null!==t&&null!==n&&(Math.abs(this.minValue()-t)>r||Math.abs(this.maxValue()-n)>r)&&(this.minValue(t),this.maxValue(n),this.scheduleRerender()),this.prevIndUpperLeftTile=e}a&&this.onValueScaleChanged()}this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=[t,n,r];a.mirrored=o,a.dataTransform=i,e.push(a)}},{key:"tilesToId",value:function(e,t,n){const r=e,i=t,o=this.options&&this.options.dataTransform||"default",a=[];for(let s=0;s<r.length;s++)for(let e=0;e<i.length;e++)this.mirrorTiles()?(r[s]>=i[e]?"lower-left"!==this.options.extent&&this.addTileId(a,n,i[e],r[s],o,!0):"upper-right"!==this.options.extent&&this.addTileId(a,n,r[s],i[e],o),r[s]===i[e]&&"lower-left"===this.options.extent&&this.addTileId(a,n,r[s],i[e],o)):this.addTileId(a,n,r[s],i[e],o);return a}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e));this.xTiles=Fw.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=Fw.calculateTilesFromResolution(e[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Fw.calculateTiles(this.zoomLevel,this._yScale,this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],this.options.reverseYAxis?-this.tilesetInfo.min_pos[1]:this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel))}}},{key:"mirrorTiles",value:function(){return!(this.tilesetInfo.mirror_tiles&&(!1===this.tilesetInfo.mirror_tiles||"false"===this.tilesetInfo.mirror_tiles))}},{key:"getMouseOverHtml",value:function(e,t){if(!this.options||!this.options.showTooltip||!this.tilesetInfo)return"";const n=Fw.calculateResolution(this.tilesetInfo,this.zoomLevel),r=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),i=Math.ceil(Math.log(r/n)/Math.log(10));this.setDataLensSize(1);const o=this._xScale.invert(e),a=this._yScale.invert(t);let s="<b>Position:</b> ";if(this.chromInfo){const e=FE(o,this.chromInfo),t=FE(a,this.chromInfo),n=e=>xp(`.${i}s`)(e);s+=`${e[0]}:${n(e[1])} & ${t[0]}:${n(t[1])}`,s+="<br/>"}let l=null;try{l=this.getVisibleRectangleData(e,t,1,1).get(0,0)}catch{return""}return this.options&&"log"===this.options.heatmapValueScaling?l>0?`${s}<b>Value:</b> 1e${xp(".3f")(Math.log(l)/Math.log(10))}`:0===l?`${s}<b>Value:</b> 0`:`${s}<b>Value:</b> N/A`:`${s}<b>Value:</b> ${xp(".3f")(l)}`}},{key:"getTilePosAndDimensions",value:function(e,t,n){const r=n||this.binsPerTile();if(this.tilesetInfo.resolutions){const n=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e))[e],i=n*r,o=i;return{tileX:n*r*t[0],tileY:n*r*t[1],tileWidth:i,tileHeight:o}}const i=t[0],o=t[1],a=this.tilesetInfo.min_pos[0],s=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],l=this.tilesetInfo.max_width/2**e,c=this.tilesetInfo.max_width/2**e;return{tileX:a+i*l,tileY:s+o*c,tileWidth:l,tileHeight:c}}},{key:"calculateZoomLevel",value:function(){const e=this.tilesetInfo.min_pos[0],t=this.tilesetInfo.max_pos[0],n=this.tilesetInfo.min_pos[1],r=this.tilesetInfo.max_pos[1];let i=null;if(this.tilesetInfo.resolutions){const o=Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,e,t),a=Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._yScale,n,r);i=Math.min(o,a)}else{const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.binsPerTile()),t=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.binsPerTile());i=Math.max(e,t),i=Math.min(i,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?i=Math.min(this.options.maxZoom,i):console.error("Invalid maxZoom on track:",this)),i}},{key:"tileToLocalId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?`${e.join(".")}.${e.mirrored}.${e.dataTransform}`:`${e.join(".")}.${e.mirrored}`}},{key:"tileToRemoteId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?`${e.join(".")}.${e.dataTransform}`:`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}}]),n}(O1);function B1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F1(r.key),r)}}function F1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function G1(e,t){return(G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=U1(e);if(t){var i=U1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function U1(e){return(U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z1(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileY:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos);e.drawnAtScale=this._xScale.copy();const o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))),a=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,e.text.scale.y=a;const s=this._xScale(i)-this._xScale(0);if(e.textGraphics.scale.x=s/256,e.textGraphics.scale.y=s/256,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){const o=this._refXScale(r+i)-this._refXScale(r),a=this._refYScale(n+i)-this._refYScale(n);e.textGraphics.position.x=this._refXScale(r)+o/2,e.textGraphics.position.y=this._refYScale(n)+a/2,t.drawRect(this._refXScale(r),this._refYScale(n),o,a)}else{const o=this._refXScale(n+i)-this._refXScale(n),a=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=this._refXScale(n)+o/2,e.textGraphics.position.y=this._refYScale(r)+a/2,t.drawRect(this._refXScale(n),this._refYScale(r),o,a)}}function V1(e){const t=e.graphics;e.textGraphics=new nS.PIXI.Graphics,e.mirrored?e.text=new nS.PIXI.Text(`${e.tileData.zoomLevel}/${[e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}):e.text=new nS.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics)}let X1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G1(e,t)}(n,e);var t=H1(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&B1(e.prototype,t),n&&B1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){V1.bind(this)(e),this.drawTile(e)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){z1.bind(this)(e)}},{key:"fetchNewTiles",value:function(e){e.forEach((e=>{const t=e.remoteId.split("."),n={zoomLevel:t[0],tilePos:t.slice(1,t.length).map((e=>+e))};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)})),this.synchronizeTilesAndGraphics()}}]),n}(j1);function Y1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W1(r.key),r)}}function W1(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function q1(){return q1=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z1(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},q1.apply(this,arguments)}function $1(e,t){return($1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K1(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Z1(e);if(t){var i=Z1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q1(e)}(this,n)}}function Q1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z1(e){return(Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let J1=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$1(e,t)}(n,e);var t=K1(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{onMouseMoveZoom:o,isValueScaleLocked:a,getLockGroupExtrema:s}=e;return i.onMouseMoveZoom=o,i.isValueScaleLocked=a,i.getLockGroupExtrema=s,i.onMouseMoveZoom&&i.pubSubs.push(i.pubSub.subscribe("app.mouseMove",i.mouseMoveHandler.bind(Q1(i)))),i}return function(e,t,n){t&&Y1(e.prototype,t),n&&Y1(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initTile",value:function(e){q1(Z1(n.prototype),"initTile",this).call(this,e)}},{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e)),t=Fw.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map((e=>[this.zoomLevel,e]));return void this.setVisibleTiles(t)}const e=Fw.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map((e=>[this.zoomLevel,e]));this.setVisibleTiles(e)}},{key:"getTilePosAndDimensions",value:function(e,t,n){const r=t[0],i=t[0];if(this.tilesetInfo.resolutions){const r=n||1024,i=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e))[e],o=i*r,a=o;return{tileX:i*r*t[0],tileY:i*r*t[1],tileWidth:o,tileHeight:a}}const o=this.tilesetInfo.max_width/2**e,a=this.tilesetInfo.max_width/2**e;return{tileX:this.tilesetInfo.min_pos[0]+r*o,tileY:this.tilesetInfo.min_pos[1]+i*a,tileWidth:o,tileHeight:a}}},{key:"updateTile",value:function(e){}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!1)}},{key:"getIndicesOfVisibleDataInTile",value:function(e){const t=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),i=Fp().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]);return[Math.max(0,Math.round(i.invert(this._xScale.invert(t[0])))),Math.min(e.tileData.dense.length,Math.round(i.invert(this._xScale.invert(t[1]))))]}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=t.map((e=>this.fetchedTiles[e])).map((e=>{const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMinNonZeroInSubset(t)})),r=Math.min(...n);return e?r:null!==this.valueScaleMin?this.valueScaleMin:r}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=t.map((e=>this.fetchedTiles[e])).map((e=>{const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMaxNonZeroInSubset(t)})),r=Math.max(...n);return e?r:null!==this.valueScaleMax?this.valueScaleMax:r}},{key:"getAggregatedVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"max";const t="min"===e?Math.min:Math.max,n="min"===e?1/0:-1/0;let r=this.visibleAndFetchedIds();0===r.length&&(r=Object.keys(this.fetchedTiles));const i=this._xScale.range();return r.map((e=>this.fetchedTiles[e])).map((t=>{if(!t.tileData.tilePos)return"min"===e?this.minVisibleValue():this.maxVisibleValue();const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(t.tileData.zoomLevel,t.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),o=Fp().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]),a=Math.max(0,Math.round(o.invert(this._xScale.invert(i[0])))),s=Math.min(t.tileData.dense.length,Math.round(o.invert(this._xScale.invert(i[1]))));return t.tileData.dense.slice(a,s)})).reduce(((e,n)=>t(e,...n)),n)}},{key:"getDataAtPos",value:function(e){let t;if(!this.tilesetInfo)return t;const n=this.calculateZoomLevel(),r=Fw.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r,o=this.tileToLocalId([n,Math.floor(i)]),a=this.fetchedTiles[o];if(!a)return t;const s=this.tilesetInfo.tile_size*(i-Math.floor(i));return a.tileData.dense?a.tileData.dense[Math.floor(s)]:null}},{key:"mouseMoveHandler",value:function(){let{x:e,y:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWithin(e,t)&&(this.mouseX=e,this.mouseY=t,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){}},{key:"zoomed",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];q1(Z1(n.prototype),"zoomed",this).call(this,...t),this.mouseMoveZoomHandler()}}]),n}(O1);function e2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t2(r.key),r)}}function t2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function n2(){return n2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a2(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},n2.apply(this,arguments)}function r2(e,t){return(r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i2(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=a2(e);if(t){var i=a2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o2(e)}(this,n)}}function o2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a2(e){return(a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let s2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}(n,e);var t=i2(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{animate:o,isShowGlobalMousePosition:a}=e;return i.constIndicator=new nS.PIXI.Graphics,i.pMain.addChild(i.constIndicator),i.axis=new xK(o2(i)),i.pBase.addChild(i.axis.pAxis),i.animate=o,i.options=r,i.isShowGlobalMousePosition=a,i.pubSubs=[],i.options.showMousePosition&&!i.hideMousePosition&&(i.hideMousePosition=RA(o2(i),i.is2d,i.isShowGlobalMousePosition())),i}return function(e,t,n){t&&e2(e.prototype,t),n&&e2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"rerender",value:function(e,t){const r=JSON.stringify(e);!t&&r===this.prevOptions||(n2(a2(n.prototype),"rerender",this).call(this,e,t),this.prevOptions=r,this.options=e,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=RA(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"relevantScale",value:function(){return this._xScale}},{key:"draw",value:function(){n2(a2(n.prototype),"draw",this).call(this),this.drawConstIndicator()}},{key:"drawAxis",value:function(e){if(!this.options.axisPositionVertical&&!this.options.axisPositionHorizontal)return void this.axis.clearAxis();if(this.options.axisPositionVertical&&"hidden"===this.options.axisPositionVertical)return void this.axis.clearAxis();if(this.options.axisPositionHorizontal&&"hidden"===this.options.axisPositionHorizontal)return void this.axis.clearAxis();const t=this.options.axisMargin||0;"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1])):"outsideLeft"===this.options.axisPositionHorizontal||"outsideTop"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):"right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):("outsideRight"===this.options.axisPositionHorizontal||"outsideBottom"===this.options.axisPositionVertical)&&(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1]))}},{key:"mouseMoveZoomHandler",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mouseX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mouseY;if(typeof e>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;let n=0,r=0,i="1d-horizontal";this.isLeftModified?(n=t-this.position[1],r=e-this.position[0],i="1d-vertical"):(n=e-this.position[0],r=t-this.position[1]);const o=e-this.position[0],a=t-this.position[1],s=this._xScale.invert(n),l=this._yScale.invert(r),c=this.getDataAtPos(n);c&&this.onMouseMoveZoom({trackId:this.id,data:c,absX:e,absY:t,relX:o,relY:a,dataX:s,dataY:l,orientation:i})}},{key:"drawConstIndicator",value:function(){var e=this;if(this.constIndicator){for(this.constIndicator.clear();this.constIndicator.children[0];)this.constIndicator.removeChild(this.constIndicator.children[0]);!this.options.constIndicators||!this.valueScale||this.options.constIndicators.forEach((function(){let{color:t="black",opacity:n=1,label:r=null,labelColor:i="black",labelOpacity:o=1,labelPosition:a="leftTop",labelSize:s=12,value:l=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=CS(t),u=CS(i);e.constIndicator.beginFill(c,n);const h=e.valueScale(l);let p=0,f=0;if(r){const t=new nS.PIXI.Text(r,{fontFamily:"Arial",fontSize:s,fill:u});switch(t.alpha=o,a){case"right":t.anchor.x=1,t.anchor.y=.5,t.x=e.position[0]+e.dimensions[0]-6,t.y=h,f=t.width+8;break;case"rightBottom":t.anchor.x=1,t.anchor.y=0,t.x=e.position[0]+e.dimensions[0]-6,t.y=h;break;case"rightTop":t.anchor.x=1,t.anchor.y=1,t.x=e.position[0]+e.dimensions[0]-6,t.y=h;break;case"left":t.anchor.x=0,t.anchor.y=.5,t.x=e.position[0]+2,t.y=h,p=t.width+4;break;case"leftBottom":t.anchor.x=0,t.anchor.y=0,t.x=e.position[0]+2,t.y=h;break;default:t.anchor.x=0,t.anchor.y=1,t.x=e.position[0]+2,t.y=h}e.constIndicator.addChild(t)}e.constIndicator.drawRect(e.position[0]+p,h,e.dimensions[0]-f,1)}))}}},{key:"exportSVG",value:function(){var e=this;let t=null,r=null;n2(a2(n.prototype),"exportSVG",this)?[r,t]=n2(a2(n.prototype),"exportSVG",this).call(this):(r=document.createElement("g"),t=r),r.setAttribute("class","horizontal-tiled-1d-track");const i=document.createElement("g");return t.appendChild(i),this.options.constIndicators&&this.options.constIndicators.forEach((function(){let{color:t="black",opacity:n=1,label:r=null,labelColor:o="black",labelOpacity:a=1,labelPosition:s="leftTop",labelSize:l=12,value:c=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=e.valueScale(c);if(r){const t=document.createElement("text");switch(t.textContent=r,t.setAttribute("x",e.position[0]),t.setAttribute("y",u),t.setAttribute("style",`font-family: 'Arial'; font-size: ${l}px; fill: ${o}; fill-opacity: ${a};`),s){case"rightBottom":t.setAttribute("x",e.position[0]+e.dimensions[0]-6),t.setAttribute("y",u+l+2),t.setAttribute("text-anchor","end");break;case"right":case"rightTop":t.setAttribute("x",e.position[0]+e.dimensions[0]-6),t.setAttribute("y",u-2),t.setAttribute("text-anchor","end");break;case"leftBottom":t.setAttribute("x",e.position[0]+2),t.setAttribute("y",u+l+2);break;default:t.setAttribute("x",e.position[0]+2),t.setAttribute("y",u-2)}i.appendChild(t)}const h=document.createElement("line");h.setAttribute("x1",e.position[0]),h.setAttribute("y1",u),h.setAttribute("x2",e.dimensions[0]),h.setAttribute("y2",u),h.setAttribute("stroke",t),h.setAttribute("stroke-opacity",n),i.appendChild(h)})),[r,t]}}]),n}(J1);function l2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c2(r.key),r)}}function c2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u2(){return u2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f2(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},u2.apply(this,arguments)}function h2(e,t){return(h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p2(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=f2(e);if(t){var i=f2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function f2(e){return(f2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let d2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h2(e,t)}(n,e);var t=p2(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).pMain=i.pMobile,i}return function(e,t,n){t&&l2(e.prototype,t),n&&l2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){const t=e.graphics;e.textGraphics=new nS.PIXI.Graphics,e.text=new nS.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics),this.drawTile(e)}},{key:"destroyTile",value:function(e){}},{key:"drawTile",value:function(e){if(u2(f2(n.prototype),"drawTile",this).call(this,e),!e.graphics)return;const t=e.graphics,{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)));e.text.scale.x=o,t.clear();const a=this.dimensions[1],s=this._refXScale(r+i)-this._refXScale(r);e.textGraphics.position.x=this._refXScale(r)+s/2,e.textGraphics.position.y=a/2;const l=this._refXScale(r);t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,t.moveTo(l,0),t.lineTo(l,a),t.moveTo(l+s,0),t.lineTo(l+s,a),t.lineStyle(0,255,1),t.drawRect(l,0,s,a)}}]),n}(s2);function m2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g2(r.key),r)}}function g2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function y2(){return y2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_2(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y2.apply(this,arguments)}function v2(e,t){return(v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b2(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=_2(e);if(t){var i=_2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _2(e){return(_2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let T2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}(n,e);var t=b2(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&m2(e.prototype,t),n&&m2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(e,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(e,t){y2(_2(n.prototype),"zoomed",this).call(this,e,t);const r=(t(1)-t(0))/(this._refYScale(1)-this._refYScale(0)),i=this.position[0],o=t(0)+this.position[1]-this._refYScale(1)*r;this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=1,this.pMain.scale.y=r}}]),n}(J1);function E2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S2(r.key),r)}}function S2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function w2(){return w2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x2(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},w2.apply(this,arguments)}function A2(e,t){return(A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O2(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=x2(e);if(t){var i=x2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function x2(e){return(x2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let k2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A2(e,t)}(n,e);var t=O2(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&E2(e.prototype,t),n&&E2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){const t=e.graphics;e.textGraphics=new nS.PIXI.Graphics,e.text=new nS.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,e.text.rotation=-Math.PI/2,t.addChild(e.textGraphics),this.drawTile(e,t)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){if(w2(x2(n.prototype),"drawTile",this).call(this,e),!e.graphics)return;const t=e.graphics,{tileY:r,tileHeight:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5;const a=this.dimensions[0],s=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=a/2,e.textGraphics.position.y=this._refYScale(r)+s/2,t.drawRect(0,this._refYScale(r),a,s)}},{key:"fetchNewTiles",value:function(e){e.forEach((e=>{const t=e.remoteId.split("."),n={zoomLevel:t[1],tilePos:t.slice(2,t.length).map((e=>+e))};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)})),this.synchronizeTilesAndGraphics()}}]),n}(T2);var I2=Array.prototype.slice;function C2(e){return e}var P2=1,D2=2,R2=3,N2=4,M2=1e-6;function L2(e){return"translate("+e+",0)"}function j2(e){return"translate(0,"+e+")"}function B2(e){return t=>+e(t)}function F2(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function G2(){return!this.__axis}function H2(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===P2||e===N2?-1:1,u=e===N2||e===D2?"x":"y",h=e===P2||e===R2?L2:j2;function p(p){var f=r??(t.ticks?t.ticks.apply(t,n):t.domain()),d=i??(t.tickFormat?t.tickFormat.apply(t,n):C2),m=Math.max(o,0)+s,g=t.range(),y=+g[0]+l,v=+g[g.length-1]+l,b=(t.bandwidth?F2:B2)(t.copy(),l),_=p.selection?p.selection():p,T=_.selectAll(".domain").data([null]),E=_.selectAll(".tick").data(f,t).order(),S=E.exit(),w=E.enter().append("g").attr("class","tick"),A=E.select("line"),O=E.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(w),A=A.merge(w.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),O=O.merge(w.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",e===P2?"0em":e===R2?"0.71em":"0.32em")),p!==_&&(T=T.transition(p),E=E.transition(p),A=A.transition(p),O=O.transition(p),S=S.transition(p).attr("opacity",M2).attr("transform",(function(e){return isFinite(e=b(e))?h(e+l):this.getAttribute("transform")})),w.attr("opacity",M2).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+l)}))),S.remove(),T.attr("d",e===N2||e===D2?a?"M"+c*a+","+y+"H"+l+"V"+v+"H"+c*a:"M"+l+","+y+"V"+v:a?"M"+y+","+c*a+"V"+l+"H"+v+"V"+c*a:"M"+y+","+l+"H"+v),E.attr("opacity",1).attr("transform",(function(e){return h(b(e)+l)})),A.attr(u+"2",c*o),O.attr(u,c*m).text(d),_.filter(G2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===D2?"start":e===N2?"end":"middle"),_.each((function(){this.__axis=b}))}return p.scale=function(e){return arguments.length?(t=e,p):t},p.ticks=function(){return n=I2.call(arguments),p},p.tickArguments=function(e){return arguments.length?(n=null==e?[]:I2.call(e),p):n.slice()},p.tickValues=function(e){return arguments.length?(r=null==e?null:I2.call(e),p):r&&r.slice()},p.tickFormat=function(e){return arguments.length?(i=e,p):i},p.tickSize=function(e){return arguments.length?(o=a=+e,p):o},p.tickSizeInner=function(e){return arguments.length?(o=+e,p):o},p.tickSizeOuter=function(e){return arguments.length?(a=+e,p):a},p.tickPadding=function(e){return arguments.length?(s=+e,p):s},p.offset=function(e){return arguments.length?(l=+e,p):l},p}function U2(e){return H2(P2,e)}function z2(e){return H2(N2,e)}const V2=Object.freeze(Object.defineProperty({__proto__:null,axisBottom:function(e){return H2(R2,e)},axisLeft:z2,axisRight:function(e){return H2(D2,e)},axisTop:U2},Symbol.toStringTag,{value:"Module"}));function X2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y2(r.key),r)}}function Y2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function W2(e,t){return(W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q2(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=$2(e);if(t){var i=$2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $2(e){return($2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let K2=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W2(e,t)}(n,e);var t=q2(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{svgElement:o}=e;return i.gMain=ql(o).append("g"),i.clipUid=ag.nice(),i.clipRect=i.gMain.append("clipPath").attr("id",`track-bounds-${i.clipUid}`).append("rect"),i.gMain.attr("clip-path",`url(#track-bounds-${i.clipUid})`),i}return function(e,t,n){t&&X2(e.prototype,t),n&&X2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setPosition",value:function(e){this.position=e,this.gMain.attr("transform",`translate(${this.position[0]},${this.position[1]})`),this.draw()}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),e[0]>=0&&e[1]>=0?(this.clipRect.attr("width",e[0]),this.clipRect.attr("height",e[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}]),n}(NQ);function Q2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z2(r.key),r)}}function Z2(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function J2(){return J2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n5(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},J2.apply(this,arguments)}function e5(e,t){return(e5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t5(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=n5(e);if(t){var i=n5(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function n5(e){return(n5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let r5=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e5(e,t)}(n,e);var t=t5(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).axis=U2(i._xScale),i.gAxis=i.gMain.append("g"),i.tilesetInfo=!0,i}return function(e,t,n){t&&Q2(e.prototype,t),n&&Q2(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setDimensions",value:function(e){J2(n5(n.prototype),"setDimensions",this).call(this,e),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform",`translate(0,${e[1]})`)}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,t){J2(n5(n.prototype),"zoomed",this).call(this,e,t),this.draw()}}]),n}(K2);function i5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o5(r.key),r)}}function o5(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function a5(){return a5=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c5(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a5.apply(this,arguments)}function s5(e,t){return(s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l5(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=c5(e);if(t){var i=c5(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c5(e){return(c5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let u5=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s5(e,t)}(n,e);var t=l5(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).axis=z2(i._yScale),i.gAxis=i.gMain.append("g"),i.tilesetInfo=!0,i}return function(e,t,n){t&&i5(e.prototype,t),n&&i5(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setDimensions",value:function(e){a5(c5(n.prototype),"setDimensions",this).call(this,e),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform",`translate(${e[0]},0)`)}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,t){a5(c5(n.prototype),"zoomed",this).call(this,e,t),this.draw()}}]),n}(K2);var h5={},p5={};function f5(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}p5.INT_BITS=32,p5.INT_MAX=2147483647,p5.INT_MIN=-1<<31,p5.sign=function(e){return(e>0)-(e<0)},p5.abs=function(e){var t=e>>31;return(e^t)-t},p5.min=function(e,t){return t^(e^t)&-(e<t)},p5.max=function(e,t){return e^(e^t)&-(e<t)},p5.isPow2=function(e){return!(e&e-1)&&!!e},p5.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},p5.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},p5.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},p5.countTrailingZeros=f5,p5.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},p5.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},p5.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var d5=new Array(256);function m5(e,t,n){var r=0|e[n];if(r<=0)return[];var i,o=new Array(r);if(n===e.length-1)for(i=0;i<r;++i)o[i]=t;else for(i=0;i<r;++i)o[i]=m5(e,t,n+1);return o}!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(d5),p5.reverse=function(e){return d5[255&e]<<24|d5[e>>>8&255]<<16|d5[e>>>16&255]<<8|d5[e>>>24&255]},p5.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},p5.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},p5.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},p5.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},p5.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>f5(e)+1};for(var g5=function(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return m5(e,t,0)}return[]},y5={},v5={byteLength:function(e){var t=w5(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=w5(e),i=r[0],o=r[1],a=new T5(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,l=o>0?i-4:i;for(n=0;n<l;n+=4)t=_5[e.charCodeAt(n)]<<18|_5[e.charCodeAt(n+1)]<<12|_5[e.charCodeAt(n+2)]<<6|_5[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=_5[e.charCodeAt(n)]<<2|_5[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=_5[e.charCodeAt(n)]<<10|_5[e.charCodeAt(n+1)]<<4|_5[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(O5(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(b5[t>>2]+b5[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(b5[t>>10]+b5[t>>4&63]+b5[t<<2&63]+"=")),i.join("")}},b5=[],_5=[],T5=typeof Uint8Array<"u"?Uint8Array:Array,E5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S5=0;S5<64;++S5)b5[S5]=E5[S5],_5[E5.charCodeAt(S5)]=S5;function w5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function A5(e){return b5[e>>18&63]+b5[e>>12&63]+b5[e>>6&63]+b5[63&e]}function O5(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(A5(r));return i.join("")}_5["-".charCodeAt(0)]=62,_5["_".charCodeAt(0)]=63;var x5={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=d,a/=256,c-=8);e[n+f-d]|=128*m}};!function(e){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}(this,n)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const s=v5,l=x5,c="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=p,e.SlowBuffer=function(e){return+e!=e&&(e=0),p.alloc(+e)},e.INSPECT_MAX_BYTES=50;const u=2147483647;function h(e){if(e>u)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,p.prototype),t}function p(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return f(e,t,n)}function f(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|b(e,t);let r=h(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return p.from(r,t,n);const i=function(e){if(p.isBuffer(e)){const t=0|v(e.length),n=h(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||ee(e.length)?h(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return d(e),h(e<0?0:0|v(e))}function g(e){const t=e.length<0?0:0|v(e.length),n=h(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,p.prototype),r}function v(e){if(e>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|e}function b(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(i)return r?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function T(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function E(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ee(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=p.from(t,r)),p.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,i){let o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(ee(r))return a;e[n+a]=r}return a}function A(e,t,n,r){return Z(K(t,e.length-n),e,n,r)}function O(e,t,n,r){return Z(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return Z(Q(t),e,n,r)}function k(e,t,n,r){return Z(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[i+1],r=e[i+2],128===(192&n)&&128===(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128===(192&n)&&128===(192&r)&&128===(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}e.kMaxLength=u,p.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(e,t,n){return f(e,t,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?h(e):void 0!==t?"string"==typeof n?h(e).fill(t,n):h(e).fill(t):h(e)}(e,t,n)},p.allocUnsafe=function(e){return m(e)},p.allocUnsafeSlow=function(e){return m(e)},p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(J(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=p.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))i+t.length>r.length?(p.isBuffer(t)||(t=p.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!p.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)T(this,t,t+1);return this},p.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},p.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},p.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function(e,t,n,r,i){if(J(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n);for(let u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return E(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return E(this,e,t,n,!1)},p.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return A(this,e,t,n);case"ascii":case"latin1":case"binary":return O(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function D(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=t;o<n;++o)i+=te[e[o]];return i}function M(e,t,n){const r=e.slice(t,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){Y(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function F(e,t,n,r,i){Y(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function G(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,i){return t=+t,n>>>=0,i||G(e,0,n,4),l.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return t=+t,n>>>=0,i||G(e,0,n,8),l.write(e,t,n,r,52,8),n+8}p.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readBigUInt64LE=ne((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),p.prototype.readBigUInt64BE=ne((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readBigInt64LE=ne((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),p.prototype.readBigInt64BE=ne((function(e){W(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),p.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),l.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),l.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),l.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),l.read(this,e,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){j(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){j(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigUInt64LE=ne((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},p.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigInt64LE=ne((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=ne((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,r){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},p.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=p.isBuffer(e)?e:p.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const z={};function V(e,n,a){z[e]=function(a){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(l,a);var s=i(l);function l(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=s.call(this),Object.defineProperty(o(t),"message",{value:n.apply(o(t),arguments),writable:!0,configurable:!0}),t.name=`${t.name} [${e}]`,t.stack,delete t.name,t}return function(e,n,r){n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(l,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${e}]: ${this.message}`}}]),l}(a)}function X(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Y(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new z.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){W(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&q(t,e.length-(n+1))}(r,i,o)}function W(e,t){if("number"!=typeof e)throw new z.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,n){throw Math.floor(e)!==e?(W(e,n),new z.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new z.ERR_BUFFER_OUT_OF_BOUNDS:new z.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=X(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=X(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function K(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ee(e){return e!==e}const te=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function ne(e){return typeof BigInt>"u"?re:e}function re(){throw new Error("BigInt not supported")}}(y5);var k5=p5,I5=g5,C5=y5.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:I5([32,0]),UINT16:I5([32,0]),UINT32:I5([32,0]),BIGUINT64:I5([32,0]),INT8:I5([32,0]),INT16:I5([32,0]),INT32:I5([32,0]),BIGINT64:I5([32,0]),FLOAT:I5([32,0]),DOUBLE:I5([32,0]),DATA:I5([32,0]),UINT8C:I5([32,0]),BUFFER:I5([32,0])});var P5=typeof Uint8ClampedArray<"u",D5=typeof BigUint64Array<"u",R5=typeof BigInt64Array<"u",N5=globalThis.__TYPEDARRAY_POOL;N5.UINT8C||(N5.UINT8C=I5([32,0])),N5.BIGUINT64||(N5.BIGUINT64=I5([32,0])),N5.BIGINT64||(N5.BIGINT64=I5([32,0])),N5.BUFFER||(N5.BUFFER=I5([32,0]));var M5=N5.DATA,L5=N5.BUFFER;function j5(e){if(e){var t=e.length||e.byteLength,n=k5.log2(t);M5[n].push(e)}}function B5(e){e=k5.nextPow2(e);var t=k5.log2(e),n=M5[t];return n.length>0?n.pop():new ArrayBuffer(e)}function F5(e){return new Uint8Array(B5(e),0,e)}function G5(e){return new Uint16Array(B5(2*e),0,e)}function H5(e){return new Uint32Array(B5(4*e),0,e)}function U5(e){return new Int8Array(B5(e),0,e)}function z5(e){return new Int16Array(B5(2*e),0,e)}function V5(e){return new Int32Array(B5(4*e),0,e)}function X5(e){return new Float32Array(B5(4*e),0,e)}function Y5(e){return new Float64Array(B5(8*e),0,e)}function W5(e){return P5?new Uint8ClampedArray(B5(e),0,e):F5(e)}function q5(e){return D5?new BigUint64Array(B5(8*e),0,e):null}function $5(e){return R5?new BigInt64Array(B5(8*e),0,e):null}function K5(e){return new DataView(B5(e),0,e)}function Q5(e){e=k5.nextPow2(e);var t=k5.log2(e),n=L5[t];return n.length>0?n.pop():new C5(e)}h5.free=function(e){if(C5.isBuffer(e))L5[k5.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|k5.log2(t);M5[n].push(e)}},h5.freeUint8=h5.freeUint16=h5.freeUint32=h5.freeBigUint64=h5.freeInt8=h5.freeInt16=h5.freeInt32=h5.freeBigInt64=h5.freeFloat32=h5.freeFloat=h5.freeFloat64=h5.freeDouble=h5.freeUint8Clamped=h5.freeDataView=function(e){j5(e.buffer)},h5.freeArrayBuffer=j5,h5.freeBuffer=function(e){L5[k5.log2(e.length)].push(e)},h5.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return B5(e);switch(t){case"uint8":return F5(e);case"uint16":return G5(e);case"uint32":return H5(e);case"int8":return U5(e);case"int16":return z5(e);case"int32":return V5(e);case"float":case"float32":return X5(e);case"double":case"float64":return Y5(e);case"uint8_clamped":return W5(e);case"bigint64":return $5(e);case"biguint64":return q5(e);case"buffer":return Q5(e);case"data":case"dataview":return K5(e);default:return null}return null},h5.mallocArrayBuffer=B5,h5.mallocUint8=F5,h5.mallocUint16=G5,h5.mallocUint32=H5,h5.mallocInt8=U5,h5.mallocInt16=z5,h5.mallocInt32=V5,h5.mallocFloat32=h5.mallocFloat=X5,h5.mallocFloat64=h5.mallocDouble=Y5,h5.mallocUint8Clamped=W5,h5.mallocBigUint64=q5,h5.mallocBigInt64=$5,h5.mallocDataView=K5,h5.mallocBuffer=Q5,h5.clearCache=function(){for(var e=0;e<32;++e)N5.UINT8[e].length=0,N5.UINT16[e].length=0,N5.UINT32[e].length=0,N5.INT8[e].length=0,N5.INT16[e].length=0,N5.INT32[e].length=0,N5.FLOAT[e].length=0,N5.DOUBLE[e].length=0,N5.BIGUINT64[e].length=0,N5.BIGINT64[e].length=0,N5.UINT8C[e].length=0,M5[e].length=0,L5[e].length=0};var Z5=function(e,t){t<=4*J5?e3(0,t-1,e):s3(0,t-1,e)},J5=32;function e3(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,l=r-2;s-- >e;){var c=n[l-2],u=n[l-1];if(c<o)break;if(c===o&&u<a)break;n[l]=c,n[l+1]=u,l-=2}n[l]=o,n[l+1]=a}}function t3(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function n3(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function r3(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function i3(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function o3(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function a3(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}function s3(e,t,n){var r=(t-e+1)/6|0,i=e+r,o=t-r,a=e+t>>1,s=a-r,l=a+r,c=i,u=s,h=a,p=l,f=o,d=e+1,m=t-1,g=0;o3(c,u,n)&&(g=c,c=u,u=g),o3(p,f,n)&&(g=p,p=f,f=g),o3(c,h,n)&&(g=c,c=h,h=g),o3(u,h,n)&&(g=u,u=h,h=g),o3(c,p,n)&&(g=c,c=p,p=g),o3(h,p,n)&&(g=h,h=p,p=g),o3(u,f,n)&&(g=u,u=f,f=g),o3(u,h,n)&&(g=u,u=h,h=g),o3(p,f,n)&&(g=p,p=f,f=g);for(var y=n[2*u],v=n[2*u+1],b=n[2*p],_=n[2*p+1],T=2*c,E=2*h,S=2*f,w=2*i,A=2*a,O=2*o,x=0;x<2;++x){var k=n[T+x],I=n[E+x],C=n[S+x];n[w+x]=k,n[A+x]=I,n[O+x]=C}n3(s,e,n),n3(l,t,n);for(var P=d;P<=m;++P)if(a3(P,y,v,n))P!==d&&t3(P,d,n),++d;else if(!a3(P,b,_,n))for(;;){if(a3(m,b,_,n)){a3(m,y,v,n)?(r3(P,d,m,n),++d,--m):(t3(P,m,n),--m);break}if(--m<P)break;continue}i3(e,d-1,y,v,n),i3(t,m+1,b,_,n),d-2-e<=J5?e3(e,d-2,n):s3(e,d-2,n),t-(m+2)<=J5?e3(m+2,t,n):s3(m+2,t,n),m-d<=J5?e3(d,m,n):s3(d,m,n)}var l3={init:function(e){var t=u3.nextPow2(e);d3.length<t&&(c3.free(d3),d3=c3.mallocInt32(t)),m3.length<t&&(c3.free(m3),m3=c3.mallocInt32(t)),g3.length<t&&(c3.free(g3),g3=c3.mallocInt32(t)),y3.length<t&&(c3.free(y3),y3=c3.mallocInt32(t)),v3.length<t&&(c3.free(v3),v3=c3.mallocInt32(t)),b3.length<t&&(c3.free(b3),b3=c3.mallocInt32(t));var n=8*t;_3.length<n&&(c3.free(_3),_3=c3.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,o,a,s,l,c){for(var u=0,h=2*e,p=e-1,f=h-1,d=n;d<r;++d){var m=o[d],g=h*d;_3[u++]=i[g+p],_3[u++]=-(m+1),_3[u++]=i[g+f],_3[u++]=m}for(d=a;d<s;++d){m=c[d]+p3;var y=h*d;_3[u++]=l[y+p],_3[u++]=-m,_3[u++]=l[y+f],_3[u++]=m}var v=u>>>1;h3(_3,v);var b=0,_=0;for(d=0;d<v;++d){var T=0|_3[2*d+1];if(T>=p3)T3(g3,y3,_--,T=T-p3|0);else if(T>=0)T3(d3,m3,b--,T);else if(T<=-p3){T=-T-p3|0;for(var E=0;E<b;++E){if(void 0!==(S=t(d3[E],T)))return S}E3(g3,y3,_++,T)}else{T=-T-1|0;for(E=0;E<_;++E){var S;if(void 0!==(S=t(T,g3[E])))return S}E3(d3,m3,b++,T)}}},sweepComplete:function(e,t,n,r,i,o,a,s,l,c){for(var u=0,h=2*e,p=e-1,f=h-1,d=n;d<r;++d){var m=o[d]+1<<1,g=h*d;_3[u++]=i[g+p],_3[u++]=-m,_3[u++]=i[g+f],_3[u++]=m}for(d=a;d<s;++d){m=c[d]+1<<1;var y=h*d;_3[u++]=l[y+p],_3[u++]=1|-m,_3[u++]=l[y+f],_3[u++]=1|m}var v=u>>>1;h3(_3,v);var b=0,_=0,T=0;for(d=0;d<v;++d){var E=0|_3[2*d+1],S=1&E;if(d<v-1&&E>>1===_3[2*d+3]>>1&&(S=2,d+=1),E<0){for(var w=-(E>>1)-1,A=0;A<T;++A){if(void 0!==(O=t(v3[A],w)))return O}if(0!==S)for(A=0;A<b;++A){if(void 0!==(O=t(d3[A],w)))return O}if(1!==S)for(A=0;A<_;++A){var O;if(void 0!==(O=t(g3[A],w)))return O}0===S?E3(d3,m3,b++,w):1===S?E3(g3,y3,_++,w):2===S&&E3(v3,b3,T++,w)}else{w=(E>>1)-1;0===S?T3(d3,m3,b--,w):1===S?T3(g3,y3,_--,w):2===S&&T3(v3,b3,T--,w)}}},scanBipartite:function(e,t,n,r,i,o,a,s,l,c,u,h){var p=0,f=2*e,d=t,m=t+e,g=1,y=1;r?y=p3:g=p3;for(var v=i;v<o;++v){var b=v+g,_=f*v;_3[p++]=a[_+d],_3[p++]=-b,_3[p++]=a[_+m],_3[p++]=b}for(v=l;v<c;++v){b=v+y;var T=f*v;_3[p++]=u[T+d],_3[p++]=-b}var E=p>>>1;h3(_3,E);var S=0;for(v=0;v<E;++v){var w=0|_3[2*v+1];if(w<0){var A=!1;if((b=-w)>=p3?(A=!r,b-=p3):(A=!!r,b-=1),A)E3(d3,m3,S++,b);else{var O=h[b],x=f*b,k=u[x+t+1],I=u[x+t+1+e];e:for(var C=0;C<S;++C){var P=d3[C],D=f*P;if(!(I<a[D+t+1]||a[D+t+1+e]<k)){for(var R=t+2;R<e;++R)if(u[x+R+e]<a[D+R]||a[D+R+e]<u[x+R])continue e;var N,M=s[P];if(void 0!==(N=r?n(O,M):n(M,O)))return N}}}}else T3(d3,m3,S--,w-g)}},scanComplete:function(e,t,n,r,i,o,a,s,l,c,u){for(var h=0,p=2*e,f=t,d=t+e,m=r;m<i;++m){var g=m+p3,y=p*m;_3[h++]=o[y+f],_3[h++]=-g,_3[h++]=o[y+d],_3[h++]=g}for(m=s;m<l;++m){g=m+1;var v=p*m;_3[h++]=c[v+f],_3[h++]=-g}var b=h>>>1;h3(_3,b);var _=0;for(m=0;m<b;++m){var T=0|_3[2*m+1];if(T<0){if((g=-T)>=p3)d3[_++]=g-p3;else{var E=u[g-=1],S=p*g,w=c[S+t+1],A=c[S+t+1+e];e:for(var O=0;O<_;++O){var x=d3[O],k=a[x];if(k===E)break;var I=p*x;if(!(A<o[I+t+1]||o[I+t+1+e]<w)){for(var C=t+2;C<e;++C)if(c[S+C+e]<o[I+C]||o[I+C+e]<c[S+C])continue e;var P=n(k,E);if(void 0!==P)return P}}}}else{for(g=T-p3,O=_-1;O>=0;--O)if(d3[O]===g){for(C=O+1;C<_;++C)d3[C-1]=d3[C];break}--_}}}},c3=h5,u3=p5,h3=Z5,p3=1<<28,f3=1024,d3=c3.mallocInt32(f3),m3=c3.mallocInt32(f3),g3=c3.mallocInt32(f3),y3=c3.mallocInt32(f3),v3=c3.mallocInt32(f3),b3=c3.mallocInt32(f3),_3=c3.mallocDouble(8192);function T3(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function E3(e,t,n,r){e[n]=r,t[r]=n}var S3={},w3="d",A3="ax",O3="vv",x3="fp",k3="es",I3="rs",C3="re",P3="rb",D3="ri",R3="rp",N3="bs",M3="be",L3="bb",j3="bi",B3="bp",F3="rv",G3="Q",H3=[w3,A3,O3,I3,C3,P3,D3,N3,M3,L3,j3];function U3(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],r=H3.slice();e||r.splice(3,0,x3);var i=["function "+t+"("+r.join()+"){"];function o(t,r){var o=function(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",H3.join(),"){","var ",k3,"=2*",w3,";"],o="for(var i="+I3+","+R3+"="+k3+"*"+I3+";i<"+C3+";++i,"+R3+"+="+k3+"){var x0="+P3+"["+A3+"+"+R3+"],x1="+P3+"["+A3+"+"+R3+"+"+w3+"],xi="+D3+"[i];",a="for(var j="+N3+","+B3+"="+k3+"*"+N3+";j<"+M3+";++j,"+B3+"+="+k3+"){var y0="+L3+"["+A3+"+"+B3+"],"+(n?"y1="+L3+"["+A3+"+"+B3+"+"+w3+"],":"")+"yi="+j3+"[j];";return e?i.push(o,G3,":",a):i.push(a,G3,":",o),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+A3+"+1;k<"+w3+";++k){var r0="+P3+"[k+"+R3+"],r1="+P3+"[k+"+w3+"+"+R3+"],b0="+L3+"[k+"+B3+"],b1="+L3+"[k+"+w3+"+"+B3+"];if(r1<b0||b1<r0)continue "+G3+";}var "+F3+"="+O3+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+F3+"!==void 0)return "+F3+";}}}"),{name:r,code:i.join("")}}(t,r,e);n.push(o.code),i.push("return "+o.name+"("+H3.join()+");")}i.push("if("+C3+"-"+I3+">"+M3+"-"+N3+"){"),e?(o(!0,!1),i.push("}else{"),o(!1,!1)):(i.push("if(fp){"),o(!0,!0),i.push("}else{"),o(!0,!1),i.push("}}else{if(fp){"),o(!1,!0),i.push("}else{"),o(!1,!1),i.push("}")),i.push("}}return "+t);var a=n.join("")+i.join("");return new Function(a)()}S3.partial=U3(!1),S3.full=U3(!0);var z3=function(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(V3.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)},V3="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";var X3=function(e,t,n,r,i,o){if(r<=n+1)return n;for(var a=n,s=r,l=r+n>>>1,c=2*e,u=l,h=i[c*l+t];a<s;){if(s-a<W3){q3(e,t,a,s,i,o),h=i[c*l+t];break}var p=s-a,f=Math.random()*p+a|0,d=i[c*f+t],m=Math.random()*p+a|0,g=i[c*m+t],y=Math.random()*p+a|0,v=i[c*y+t];d<=g?v>=g?(u=m,h=g):d>=v?(u=f,h=d):(u=y,h=v):g>=v?(u=m,h=g):v>=d?(u=f,h=d):(u=y,h=v);for(var b=c*(s-1),_=c*u,T=0;T<c;++T,++b,++_){var E=i[b];i[b]=i[_],i[_]=E}var S=o[s-1];o[s-1]=o[u],o[u]=S;for(b=c*(s-1),_=c*(u=Y3(e,t,a,s-1,i,o,h)),T=0;T<c;++T,++b,++_){E=i[b];i[b]=i[_],i[_]=E}S=o[s-1];if(o[s-1]=o[u],o[u]=S,l<u){for(s=u-1;a<s&&i[c*(s-1)+t]===h;)s-=1;s+=1}else{if(!(u<l))break;for(a=u+1;a<s&&i[c*a+t]===h;)a+=1}}return Y3(e,t,n,l,i,o,i[c*l+t])},Y3=z3("lo<p0",["p0"]),W3=8;function q3(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,l=n+1;l<r;++l,s+=a)for(var c=i[s],u=l,h=a*(l-1);u>n&&i[h+t]>c;--u,h-=a){for(var p=h,f=h+a,d=0;d<a;++d,++p,++f){var m=i[p];i[p]=i[f],i[f]=m}var g=o[u];o[u]=o[u-1],o[u-1]=g}}var $3=function(e,t,n,r,i,o,a,s,l){!function(e,t){var n=8*Q3.log2(t+1)*(e+1)|0,r=Q3.nextPow2(f4*n);m4.length<r&&(K3.free(m4),m4=K3.mallocInt32(r));var i=Q3.nextPow2(d4*n);g4.length<i&&(K3.free(g4),g4=K3.mallocDouble(i))}(e,r+a);var c,u=0,h=2*e;for(y4(u++,0,0,r,0,a,n?16:0,-1/0,1/0),n||y4(u++,0,0,a,0,r,1,-1/0,1/0);u>0;){var p=(u-=1)*f4,f=m4[p],d=m4[p+1],m=m4[p+2],g=m4[p+3],y=m4[p+4],v=m4[p+5],b=u*d4,_=g4[b],T=g4[b+1],E=1&v,S=!!(16&v),w=i,A=o,O=s,x=l;if(E&&(w=s,A=l,O=i,x=o),!(2&v&&(m=c4(e,f,d,m,w,A,T),d>=m))&&!(4&v&&(d=u4(e,f,d,m,w,A,_),d>=m))){var k=m-d,I=y-g;if(S){if(e*k*(k+I)<a4){if(void 0!==(c=t4.scanComplete(e,f,t,d,m,w,A,g,y,O,x)))return c;continue}}else{if(e*Math.min(k,I)<i4){if(void 0!==(c=J3(e,f,t,E,d,m,w,A,g,y,O,x)))return c;continue}if(e*k*I<o4){if(void 0!==(c=t4.scanBipartite(e,f,t,E,d,m,w,A,g,y,O,x)))return c;continue}}var C=s4(e,f,d,m,w,A,_,T);if(d<C)if(e*(C-d)<i4){if(void 0!==(c=e4(e,f+1,t,d,C,w,A,g,y,O,x)))return c}else if(f===e-2){if(void 0!==(c=E?t4.sweepBipartite(e,t,g,y,O,x,d,C,w,A):t4.sweepBipartite(e,t,d,C,w,A,g,y,O,x)))return c}else y4(u++,f+1,d,C,g,y,E,-1/0,1/0),y4(u++,f+1,g,y,d,C,1^E,-1/0,1/0);if(C<m){var P=n4(e,f,g,y,O,x),D=O[h*P+f],R=l4(e,f,P,y,O,x,D);if(R<y&&y4(u++,f,C,m,R,y,(4|E)+(S?16:0),D,T),g<P&&y4(u++,f,C,m,g,P,(2|E)+(S?16:0),_,D),P+1===R){if(void 0!==(c=S?b4(e,f,t,C,m,w,A,P,O,x[P]):v4(e,f,t,E,C,m,w,A,P,O,x[P])))return c}else if(P<R){var N;if(S){if(C<(N=h4(e,f,C,m,w,A,D))){var M=l4(e,f,C,N,w,A,D);if(f===e-2){if(C<M&&void 0!==(c=t4.sweepComplete(e,t,C,M,w,A,P,R,O,x))||M<N&&void 0!==(c=t4.sweepBipartite(e,t,M,N,w,A,P,R,O,x)))return c}else C<M&&y4(u++,f+1,C,M,P,R,16,-1/0,1/0),M<N&&(y4(u++,f+1,M,N,P,R,0,-1/0,1/0),y4(u++,f+1,P,R,M,N,1,-1/0,1/0))}}else C<(N=E?p4(e,f,C,m,w,A,D):h4(e,f,C,m,w,A,D))&&(f===e-2?c=E?t4.sweepBipartite(e,t,P,R,O,x,C,N,w,A):t4.sweepBipartite(e,t,C,N,w,A,P,R,O,x):(y4(u++,f+1,C,N,P,R,E,-1/0,1/0),y4(u++,f+1,P,R,C,N,1^E,-1/0,1/0)))}}}}},K3=h5,Q3=p5,Z3=S3,J3=Z3.partial,e4=Z3.full,t4=l3,n4=X3,r4=z3,i4=128,o4=1<<22,a4=1<<22,s4=r4("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),l4=r4("lo===p0",["p0"]),c4=r4("lo<p0",["p0"]),u4=r4("hi<=p0",["p0"]),h4=r4("lo<=p0&&p0<=hi",["p0"]),p4=r4("lo<p0&&p0<=hi",["p0"]),f4=6,d4=2,m4=K3.mallocInt32(1024),g4=K3.mallocDouble(1024);function y4(e,t,n,r,i,o,a,s,l){var c=f4*e;m4[c]=t,m4[c+1]=n,m4[c+2]=r,m4[c+3]=i,m4[c+4]=o,m4[c+5]=a;var u=d4*e;g4[u]=s,g4[u+1]=l}function v4(e,t,n,r,i,o,a,s,l,c,u){var h=2*e,p=l*h,f=c[p+t];e:for(var d=i,m=i*h;d<o;++d,m+=h){var g=a[m+t],y=a[m+t+e];if(!(f<g||y<f)&&(!r||f!==g)){for(var v=s[d],b=t+1;b<e;++b){g=a[m+b],y=a[m+b+e];var _=c[p+b],T=c[p+b+e];if(y<_||T<g)continue e}var E;if(void 0!==(E=r?n(u,v):n(v,u)))return E}}}function b4(e,t,n,r,i,o,a,s,l,c){var u=2*e,h=s*u,p=l[h+t];e:for(var f=r,d=r*u;f<i;++f,d+=u){var m=a[f];if(m!==c){var g=o[d+t],y=o[d+t+e];if(!(p<g||y<p)){for(var v=t+1;v<e;++v){g=o[d+v],y=o[d+v+e];var b=l[h+v],_=l[h+v+e];if(y<b||_<g)continue e}var T=n(m,c);if(void 0!==T)return T}}}}var _4,T4=function(e,t,n){switch(arguments.length){case 1:return function(e){return _4=[],x4(e,e,k4,!0),_4}(e);case 2:return"function"==typeof t?x4(e,e,t,!0):function(e,t){return _4=[],x4(e,t,k4,!1),_4}(e,t);case 3:return x4(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}},E4=h5,S4=l3,w4=$3;function A4(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function O4(e,t,n,r){for(var i=0,o=0,a=0,s=e.length;a<s;++a){var l=e[a];if(!A4(t,l)){for(var c=0;c<2*t;++c)n[i++]=l[c];r[o++]=a}}return o}function x4(e,t,n,r){var i=e.length,o=t.length;if(!(i<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,l=E4.mallocDouble(2*a*i),c=E4.mallocInt32(i);if((i=O4(e,a,l,c))>0){if(1===a&&r)S4.init(i),s=S4.sweepComplete(a,n,0,i,l,c,0,i,l,c);else{var u=E4.mallocDouble(2*a*o),h=E4.mallocInt32(o);(o=O4(t,a,u,h))>0&&(S4.init(i+o),s=1===a?S4.sweepBipartite(a,n,0,i,l,c,0,o,u,h):w4(a,n,r,i,l,c,o,u,h),E4.free(u),E4.free(h))}E4.free(l),E4.free(c)}return s}}}function k4(e,t){_4.push([e,t])}const I4=Cs(T4);var C4={exports:{}},P4=function(e,t,n){var r=e*t,i=D4*e,o=i-e,a=i-o,s=e-a,l=D4*t,c=l-(l-t),u=t-c,h=s*u-(r-a*c-s*c-a*u);return n?(n[0]=h,n[1]=r,n):[h,r]},D4=+(Math.pow(2,27)+1);var R4=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}(e[0],t[0]);var i,o,a=new Array(n+r),s=0,l=0,c=0,u=Math.abs,h=e[l],p=u(h),f=t[c],d=u(f);p<d?(o=h,(l+=1)<n&&(h=e[l],p=u(h))):(o=f,(c+=1)<r&&(f=t[c],d=u(f))),l<n&&p<d||c>=r?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=t[c],d=u(f)));for(var m,g,y=i+o,v=y-i,b=o-v,_=b,T=y;l<n&&c<r;)p<d?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=t[c],d=u(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m,(l+=1)<n&&(h=e[l]);for(;c<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m,(c+=1)<r&&(f=t[c]);return _&&(a[s++]=_),T&&(a[s++]=T),s||(a[s++]=0),a.length=s,a};var N4=function(e,t,n){var r=e+t,i=r-e,o=t-i,a=e-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]};var M4=P4,L4=N4,j4=function(e,t){var n=e.length;if(1===n){var r=M4(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;M4(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){M4(e[l],t,a);var c=o[1];L4(c,a[0],o),o[0]&&(i[s++]=o[0]);var u=a[1],h=o[1],p=u+h,f=h-(p-u);o[1]=p,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i};var B4=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}(e[0],-t[0]);var i,o,a=new Array(n+r),s=0,l=0,c=0,u=Math.abs,h=e[l],p=u(h),f=-t[c],d=u(f);p<d?(o=h,(l+=1)<n&&(h=e[l],p=u(h))):(o=f,(c+=1)<r&&(f=-t[c],d=u(f))),l<n&&p<d||c>=r?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=-t[c],d=u(f)));for(var m,g,y=i+o,v=y-i,b=o-v,_=b,T=y;l<n&&c<r;)p<d?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=-t[c],d=u(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m,(l+=1)<n&&(h=e[l]);for(;c<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=T-((m=T+y)-(g=m-T))+(y-g),T=m,(c+=1)<r&&(f=-t[c]);return _&&(a[s++]=_),T&&(a[s++]=T),s||(a[s++]=0),a.length=s,a};!function(e){var t=P4,n=R4,r=j4,i=B4,o=11102230246251565e-32,a=(3+16*o)*o,s=(7+56*o)*o;function l(e,t,n,r){return function(n,i,o){var a=e(e(t(i[1],o[0]),t(-o[1],i[0])),e(t(n[1],i[0]),t(-i[1],n[0]))),s=e(t(n[1],o[0]),t(-o[1],n[0])),l=r(a,s);return l[l.length-1]}}function c(e,t,n,r){return function(i,o,a,s){var l=e(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2])))),c=e(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2])))),u=r(l,c);return u[u.length-1]}}function u(e,t,n,r){return function(i,o,a,s,l){var c=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),o[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),-a[3]),n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),l[2]))),s[3]))),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),-l[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3])))),e(e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3]),n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),i[3]))),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-o[3]),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),a[3]),n(e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2]))),-s[3]))))),u=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-a[3])),e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),s[3]),n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-l[3]))),e(e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),l[2]))),i[3]),n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),-o[3])),e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),a[3]),n(e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2]))),-l[3])))),h=r(c,u);return h[h.length-1]}}function h(e){return(3===e?l:4===e?c:u)(n,t,r,i)}var p=h(3),f=h(4),d=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),o=(e[0]-n[0])*(t[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var l=a*r;return s>=l||s<=-l?s:p(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],l=e[1]-r[1],c=t[1]-r[1],u=n[1]-r[1],h=e[2]-r[2],p=t[2]-r[2],d=n[2]-r[2],m=o*u,g=a*c,y=a*l,v=i*u,b=i*c,_=o*l,T=h*(m-g)+p*(y-v)+d*(b-_),E=(Math.abs(m)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(v))*Math.abs(p)+(Math.abs(b)+Math.abs(_))*Math.abs(d),S=s*E;return T>S||-T>S?T:f(e,t,n,r)}];function m(e){var t=d[e.length];return t||(t=d[e.length]=h(e.length)),t.apply(void 0,e)}function g(e,t,n,r,i,o,a){return function(t,n,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return r(t,n);case 3:return i(t,n,s);case 4:return o(t,n,s,l);case 5:return a(t,n,s,l,c)}for(var u=new Array(arguments.length),h=0;h<arguments.length;++h)u[h]=arguments[h];return e(u)}}!function(){for(;d.length<=5;)d.push(h(d.length));e.exports=g.apply(void 0,[m].concat(d));for(var t=0;t<=5;++t)e.exports[t]=d[t]}()}(C4);var F4=function(e,t){for(var n=t[0],r=t[1],i=e.length,o=1,a=i,s=0,l=i-1;s<a;l=s++){var c=e[s],u=e[l],h=c[1],p=u[1];if(p<h){if(p<r&&r<h){if(0===(f=G4(c,u,t)))return 0;o^=0<f|0}else if(r===h){if(h<e[(s+1)%i][1]){if(0===(f=G4(c,u,t)))return 0;o^=0<f|0}}}else if(h<p){if(h<r&&r<p){if(0===(f=G4(c,u,t)))return 0;o^=f<0|0}else if(r===h){if(e[(s+1)%i][1]<h){var f;if(0===(f=G4(c,u,t)))return 0;o^=f<0|0}}}else if(r===h){var d=Math.min(c[0],u[0]),m=Math.max(c[0],u[0]);if(0===s){for(;l>0;){var g=(l+i-1)%i;if((b=e[g])[1]!==r)break;var y=b[0];d=Math.min(d,y),m=Math.max(m,y),l=g}if(0===l)return d<=n&&n<=m?0:1;a=l+1}for(var v=e[(l+i-1)%i][1];s+1<a;){var b;if((b=e[s+1])[1]!==r)break;y=b[0];d=Math.min(d,y),m=Math.max(m,y),s+=1}if(d<=n&&n<=m)return 0;var _=e[(s+1)%i][1];n<d&&v<r!=_<r&&(o^=1)}}return 2*o-1},G4=C4.exports;const H4=Cs(F4);function U4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z4(r.key),r)}}function z4(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function V4(){return V4=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W4(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},V4.apply(this,arguments)}function X4(e,t){return(X4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y4(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=W4(e);if(t){var i=W4(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function W4(e){return(W4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const q4=5e3,$4={fontSize:"14px",fontFamily:"Arial",stroke:"white",strokeThickness:2,fontWeight:400,dropShadow:!0,dropShadowColor:"white",dropShadowDistance:0,dropShadowBlur:2};let K4=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X4(e,t)}(n,e);var t=Y4(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).valueScaleTransform=fK,i}return function(e,t,n){t&&U4(e.prototype,t),n&&U4(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initialize",value:function(){this.initialized||([this.prevK,this.vertK,this.vertY]=[1,1,0],this.drawnRects||(this.drawnRects={}),this.colorScale||(this.options.colorRange?this.colorScale=YE(this.options.colorRange):this.colorScale=wS),this.initialized=!0)}},{key:"initTile",value:function(e){e.texts={},e.rectGraphics=new nS.PIXI.Graphics,e.textGraphics=new nS.PIXI.Graphics,e.graphics.addChild(e.rectGraphics),e.graphics.addChild(e.textGraphics);let t=[],n=[];if(e.tileData&&e.tileData.length){if(e.tileData.sort(((e,t)=>t.importance-e.importance)),this.options&&this.options.valueColumn)t=[e.tileData.map((e=>({value:e})))];else{const r=e.tileData.map((e=>{const t=+e.chrOffset;return{from:+e.fields[1]+t,to:+e.fields[2]+t,value:e,text:e.fields[3],strand:e.fields.length>=6&&"-"===e.fields[5]?"-":"+"}}));t=$A(r.filter((e=>"+"===e.strand))),n=$A(r.filter((e=>"-"===e.strand)))}e.plusStrandRows=t,e.minusStrandRows=n,this.options.showTexts&&e.tileData.forEach(((t,n)=>{const r=t.fields;if(t.importance||(t.importance=Math.random()),e.textWidths={},e.textHeights={},n>=(+this.options.maxTexts||50))return;const i=new nS.PIXI.Text(r[3],{...$4,fontSize:+this.options.fontSize||$4.fontSize});this.flipText&&(i.scale.x=-1),i.anchor.x=.5,i.anchor.y=.5,e.texts[t.uid]=i,e.textGraphics.addChild(i)}))}e.initialized=!0}},{key:"removeTileRects",value:function(e){const t=+e.tileId.split(".")[0];e.rectGraphics.clear(),e.rendered=!1,e.tileData&&e.tileData.length&&e.tileData.forEach(((n,r)=>{this.drawnRects[t]&&this.drawnRects[t][n.uid]&&this.drawnRects[t][n.uid][2]===e.tileId&&delete this.drawnRects[t][n.uid]}))}},{key:"destroyTile",value:function(e){this.removeTileRects(e),e.graphics.removeChild(e.textGraphics),e.graphics.removeChild(e.rectGraphics)}},{key:"removeTiles",value:function(e){V4(W4(n.prototype),"removeTiles",this).call(this,e)}},{key:"drawTile",value:function(e){this.options&&this.options.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"rerender",value:function(e,t){V4(W4(n.prototype),"rerender",this).call(this,e,t),this.valueScale=null,this.drawnRects={},this.options.colorRange?this.colorScale=YE(this.options.colorRange):this.colorScale=wS;for(const n of this.visibleAndFetchedTiles())this.destroyTile(n),this.initTile(n),this.renderTile(n)}},{key:"updateTile",value:function(e){this.areAllVisibleTilesLoaded()&&this.renderTile(e)}},{key:"allVisibleRects",value:function(){const e={};Object.values(this.fetchedTiles).forEach((t=>{if(t.plusStrandRows)for(const n of t.plusStrandRows[0])e[n.value.uid]||(e[n.value.uid]=n)}));const t=Object.values(e).sort(((e,t)=>e.from-t.from));let n=0,r=0;for(let i=0;i<t.length;i++)if(void 0!==t[i].staggeredStartPosition){n=i,r=t[i].staggeredStartPosition;break}for(let i=n;i<t.length;i++)t[i].staggeredStartPosition=(r+i-n)%2;for(let i=n;i>=0&&t.length;i--)t[i].staggeredStartPosition=(r+n-i)%2;return e}},{key:"drawSegmentStyle",value:function(e,t,n,r,i,o){const a=r+i/2,s=[t,r,t+.2,r,t+.2,a-.1,n-.2,a-.1,n-.2,r,n,r,n,r+i,n-.2,r+i,n-.2,a+.1,t+.2,a+.1,t+.2,r+i,t,r+i];return e.rectGraphics.drawPolygon(s),s}},{key:"drawPoly",value:function(e,t,n,r,i,o){let a=null;return"segment"===this.options.annotationStyle?this.drawSegmentStyle(e,t,n,r,i,o):(("+"===o||"-"===o)&&n-t<8?(a=[t,r,t+i/2,r+i/2,t,r+i],"+"===o||(a=[n,r,n-i/2,r+i/2,n,r+i]),e.rectGraphics.drawPolygon(a)):(a="+"===o?[t,r,n-i/2,r,n,r+i/2,n-i/2,r+i,t,r+i]:"-"===o?[t+i/2,r,n,r,n,r+i,t+i/2,r+i,t,r+i/2]:[t,r,n,r,n,r+i,t,r+i],e.rectGraphics.drawPolygon(a)),a)}},{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){const e=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),t=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);this.options.valueColumn&&([this.valueScale]=this.makeValueScale(e,this.calculateMedianVisibleValue(+this.options.valueColumn),t))}}},{key:"setColorValueScale",value:function(){if(this.colorValueScale=null,this.options&&this.options.colorEncoding&&"itemRgb"!==this.options.colorEncoding){const e=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.colorEncoding),t=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.colorEncoding);this.colorValueScale=Fp().domain([e,t]).range([0,255])}}},{key:"renderRows",value:function(e,t,n,r,i,o){const a=+e.tileId.split(".")[0];this.initialize();const s=ku().domain(du(n)).range([r,i]).paddingInner(.3);this.allVisibleRects();let l=null;this.options.staggered&&(l=this.allVisibleRects());for(let c=0;c<t.length;c++)for(let n=0;n<t[c].length;n++){const r=t[c][n].value,i=r.fields,u=+r.chrOffset,h=+i[1]+u,p=+i[2]+u,f=(h+p)/2;let d=s(c)+s.step()/2,m=this.options.annotationHeight||16;if("scaled"===m&&(m=s.bandwidth(),this.options.maxAnnotationHeight&&(m=Math.min(m,+this.options.maxAnnotationHeight))),this.options&&"itemRgb"===this.options.colorEncoding&&r.fields[8]?3===r.fields[8].split(",").length&&(o=`rgb(${r.fields[8]})`):this.colorValueScale&&(o=`rgba(${GA(this.colorValueScale,this.colorScale,0,-Number.MIN_VALUE)(+i[+this.options.colorEncoding-1]).join(",")})`),this.valueScale){const e=+i[+this.options.valueColumn-1];d=this.valueScale(e)}const g=this.options.fillOpacity||.3;e.rectGraphics.lineStyle(1,CS(o),g),e.rectGraphics.beginFill(CS(o),g);let y=d-m/2;const v=this._xScale(h),b=this._xScale(p);this.options.staggered&&(l[r.uid].staggeredStartPosition?y-=2.5:y+=2.5);let _=!0;if(!(a in this.drawnRects)||!(r.uid in this.drawnRects[a])){_=!1,this.drawnRects[a]||(this.drawnRects[a]={});const t=this.drawPoly(e,v,b,y*this.prevK,m*this.prevK,i[5]);this.drawnRects[a][r.uid]=[t,{start:h,end:p,value:r,tile:e,fill:o},e.tileId]}if(!this.options.showTexts)continue;if(!e.texts)return;if(n>=(+this.options.maxTexts||50)||!e.texts[r.uid])continue;const T=e.texts[r.uid];T.position.x=this._xScale(f),T.position.y=y+m/2,T.nominalY=y+m/2,_&&(T.alreadyDrawn=!0);const E=void 0!==this.options.fontColor?CS(this.options.fontColor):o;if(T.style={...$4,fill:E,fontSize:+this.options.fontSize||$4.fontSize},!(i[3]in e.textWidths)){T.updateTransform();const t=T.getBounds().width,n=T.getBounds().height,r=5;e.textWidths[i[3]]=t,e.textHeights[i[3]]=n-r}}}},{key:"renderTile",value:function(e){let t=e.plusStrandRows?e.plusStrandRows.length:1,n=e.minusStrandRows?e.minusStrandRows.length:1;for(const r of this.visibleAndFetchedTiles()){if(!r.initialized)return;!r.plusStrandRows&&!r.minusStrandRows||(t=Math.max(r.plusStrandRows.length,t),n=Math.max(r.minusStrandRows.length,n))}if(e.rendered&&this.removeTileRects(e),e.drawnAtScale=this._xScale.copy(),e.rendered=!0,this.setValueScale(),this.setColorValueScale(),e.tileData&&e.tileData.length){const r=this.options.plusStrandColor||this.options.fillColor||"blue",i=this.options.minusStrandColor||this.options.fillColor||"purple",o=0;let a=0;a=this.options.separatePlusMinusStrands?t*this.dimensions[1]/(t+n)-o/2:this.dimensions[1],this.renderRows(e,e.plusStrandRows,t,0,a,r),this.renderRows(e,e.minusStrandRows,n,this.options.separatePlusMinusStrands?a+o/2:0,this.dimensions[1],i)}CK.stretchRects(this,[e=>e.rectGraphics])}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"minVisibleValueInTiles",value:function(e){let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.min.apply(null,t.map((e=>this.fetchedTiles[e])).filter((e=>e.tileData&&e.tileData.length)).map((t=>Math.min.apply(null,t.tileData.sort(((e,t)=>t.importance-e.importance)).slice(0,q4).map((t=>+t.fields[e-1])).filter((e=>!Number.isNaN(e)))))));return n===Number.MAX_SAFE_INTEGER&&(n=null),n}},{key:"maxVisibleValueInTiles",value:function(e){let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.max.apply(null,t.map((e=>this.fetchedTiles[e])).filter((e=>e.tileData&&e.tileData.length)).map((t=>Math.max.apply(null,t.tileData.sort(((e,t)=>t.importance-e.importance)).slice(0,q4).map((t=>+t.fields[e-1])).filter((e=>!Number.isNaN(e)))))));return n===Number.MIN_SAFE_INTEGER&&(n=null),n}},{key:"calculateMedianVisibleValue",value:function(e){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=[].concat(...t.map((e=>this.fetchedTiles[e])).filter((e=>e.tileData&&e.tileData.length)).map((t=>t.tileData.sort(((e,t)=>t.importance-e.importance)).slice(0,q4).map((t=>+t.fields[e-1]))))).filter((e=>e>0));this.medianVisibleValue=uu(n)}},{key:"draw",value:function(){V4(W4(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];for(const e in this.fetchedTiles){const t=this.fetchedTiles[e];if(t.rectGraphics.scale.y=this.vertK,t.rectGraphics.position.y=this.vertY,!t.drawnAtScale)return;CK.stretchRects(this,[e=>e.rectGraphics]);const n=this.parentInFetched(t);t.initialized&&t.tileData&&t.tileData.length&&t.tileData.forEach((e=>{if(!t.texts)return;const r=e.fields,i=r[3],o=t.texts[e.uid];if(!o)return;const a=+e.chrOffset,s=(+r[1]+a+(+r[2]+a))/2;if(o.position.x=this._xScale(s),o.position.y=o.nominalY*(this.vertK*this.prevK)+this.vertY,n||o.alreadyDrawn)o.visible=!1;else{o.visible=!0;const n=3;this.allBoxes.push([o.position.x-n,o.position.y-t.textHeights[r[3]]/2,o.position.x+t.textWidths[r[3]]+n,o.position.y+t.textHeights[r[3]]/2]),this.allTexts.push({importance:e.importance,text:o,caption:i,strand:r[5]})}}))}this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(e,t){I4(e,((e,n)=>{t[e].importance>t[n].importance?t[e].text.visible&&(t[n].text.visible=!1):t[n].text.visible&&(t[e].text.visible=!1)}))}},{key:"setPosition",value:function(e){V4(W4(n.prototype),"setPosition",this).call(this,e),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(e){V4(W4(n.prototype),"setDimensions",this).call(this,e)}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){let e=null,t=null;V4(W4(n.prototype),"exportSVG",this)?[t,e]=V4(W4(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=document.createElement("g"),o=document.createElement("g");r.appendChild(i),r.appendChild(o);for(const n of this.visibleAndFetchedTiles())n.tileData.length&&n.tileData.forEach((e=>{const t=+n.tileId.split(".")[0],r=document.createElement("g");if(r.setAttribute("transform",`translate(${n.rectGraphics.position.x},${n.rectGraphics.position.y})scale(${n.rectGraphics.scale.x},${n.rectGraphics.scale.y})`),i.appendChild(r),this.drawnRects[t]&&e.uid in this.drawnRects[t]){const i=this.drawnRects[t][e.uid][0],a=document.createElement("path");let s=`M ${i[0]} ${i[1]}`;for(let e=2;e<i.length;e+=2)s+=` L ${i[e]} ${i[e+1]}`;const l=this.drawnRects[t][e.uid][1].fill,c=void 0!==this.options.fontColor?CS(this.options.fontColor):l;if(a.setAttribute("d",s),a.setAttribute("fill",l),a.setAttribute("opacity",.3),a.style.stroke=l,a.style.strokeWidth="1px",r.appendChild(a),n.texts[e.uid]){const t=n.texts[e.uid];if(!t.visible)return;const r=document.createElement("g"),i=document.createElement("text");o.appendChild(r),r.appendChild(i),r.setAttribute("transform",`translate(${t.x},${t.y})scale(${t.scale.x},1)`),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family",$4.fontFamily),i.setAttribute("font-size",+this.options.fontSize||$4.fontSize),i.setAttribute("font-weight","bold"),i.setAttribute("dy","5px"),i.setAttribute("fill",c),i.setAttribute("stroke",$4.stroke),i.setAttribute("stroke-width","0.4"),i.setAttribute("text-shadow","0px 0px 2px grey"),i.innerHTML=t.text}}}));return[t,t]}},{key:"movedY",value:function(e){Object.values(this.fetchedTiles).forEach((t=>{const n=this.valueScaleTransform,{y:r,k:i}=n,o=this.dimensions[1];r+e/i>-(i-1)*o&&r+e/i<0&&(this.valueScaleTransform=n.translate(0,e/i)),t.rectGraphics.position.y=this.valueScaleTransform.y,this.vertY=this.valueScaleTransform.y})),this.animate()}},{key:"zoomedY",value:function(e,t){const n=CK.zoomedY(e,t,this.valueScaleTransform,this.dimensions[1]);this.valueScaleTransform=n;let r=n.k;const i=n.y;let o=!1;r/=this.prevK,(r>1.5||r<1/1.5)&&(this.prevK*=r,r=1,o=!0),this.vertK=r,this.vertY=i,Object.values(this.fetchedTiles).forEach((e=>{o&&this.renderTile(e),e.rectGraphics.scale.y=r,e.rectGraphics.position.y=i})),this.draw(),this.animate()}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";const n=this.calculateZoomLevel(),r=[e,t];if(this.drawnRects[n]){const e=Object.values(this.drawnRects[n]);for(let t=0;t<e.length;t++){const n=e[t][0].slice(0),i=e[t][1].tile.rectGraphics.scale.x,o=e[t][1].tile.rectGraphics.position.x,a=e[t][1].tile.rectGraphics.scale.y,s=e[t][1].tile.rectGraphics.position.y,l=[];for(;n.length;){const[e,t]=n.splice(0,2);l.push([e*i+o,t*a+s])}if(-1===H4(l,r))return e[t][1].value.fields.join(" ")}}return""}}]),n}(s2);function Q4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z4(r.key),r)}}function Z4(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function J4(){return J4=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},J4.apply(this,arguments)}function e6(e,t){return(e6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function t6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=n6(e);if(t){var i=n6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function n6(e){return(n6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const r6=(e,t,n,r,i,o)=>{i instanceof HTMLElement?function(e,t,n,r,i){let{fill:o=0,fillOpacity:a=0,stroke:s=0,strokeWidth:l=0,strokeOpacity:c=0}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const u=document.createElement("rect");u.setAttribute("x",e),u.setAttribute("y",t),u.setAttribute("width",n),u.setAttribute("height",r),u.setAttribute("fill",`#${NS(o)}`),u.setAttribute("fill-opacity",a),u.setAttribute("stroke",`#${NS(s)}`),u.setAttribute("stroke-opacity",c),u.setAttribute("stroke-width",l),i.appendChild(u)}(e,t,n,r,i,o):((e,t,n,r,i)=>{i.drawRect(e,t,n,r)})(e,t,n,r,i)},i6=function(e,t,n,r,i,o,a,s){let{isVertical:l=!1,svg:c=null}=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},u=t,h=n,p=r,f=i;const d=2*s.width>r?r/2:s.width,m=2*s.width>i?i/2:s.width,g=c||e,y={fill:0,fillOpacity:0,stroke:0,strokeOpacity:0,strokeWidth:1};if(s.positions&&s.positions.length?(e.lineStyle(1,0,0),e.beginFill(s.color,s.opacity),y.fill=s.color,y.fillOpacity=s.opacity,y.stroke=0,y.strokeOpacity=0,y.strokeWidth=1,s.positions.forEach((e=>{"top"===e&&!l||"left"===e&&l?r6(t-d,n-m,r+2*d,m,g,y):"bottom"===e&&!l||"right"===e&&l?r6(t-d,n+i,r+2*d,m,g,y):"left"===e&&!l||"top"===e&&l?r6(t-d,n-m,d,i+2*m,g,y):("right"===e&&!l||"bottom"===e&&l)&&r6(t+r,n-m,d,i+2*m,g,y)}))):s.width>0&&s.opacity>0&&(e.lineStyle(s.width,s.color,s.opacity),e.beginFill(0,0),y.fill=0,y.fillOpacity=0,y.stroke=s.color,y.strokeOpacity=s.opacity,y.strokeWidth=s.width,r6(t-d,n-m,r+2*d,i+2*m,g,y)),a.positions&&a.positions.length){e.lineStyle(1,0,0),e.beginFill(a.color,a.opacity);const o=2*a.width>r?r/2:a.width,s=2*a.width>i?i/2:a.width;y.fill=a.color,y.fillOpacity=a.opacity,y.stroke=0,y.strokeOpacity=0,y.strokeWidth=1,a.positions.forEach((e=>{"top"===e&&!l||"left"===e&&l?(r6(t,n,r,s,g,y),h+=s,f-=s):"bottom"===e&&!l||"right"===e&&l?(r6(t,n+i-s,r,s,g,y),f-=s):"left"===e&&!l||"top"===e&&l?(r6(t,n,o,i,g,y),u+=o,p-=o):("right"===e&&!l||"bottom"===e&&l)&&(r6(t+r-o,n,o,i,g,y),p-=o)}))}else e.lineStyle(a.width,a.color,a.opacity),y.stroke=a.color,y.strokeOpacity=a.opacity,y.strokeWidth=a.width;e.beginFill(o.color,o.opacity),y.fill=o.color,y.fillOpacity=o.opacity,r6(u,h,p,f,g,y)};let o6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e6(e,t)}(n,e);var t=t6(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).options=r||{},i.drawnRects={},i}return function(e,t,n){t&&Q4(e.prototype,t),n&&Q4(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"drawHorizontalOverlay",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;if(!n||n.length<2)return;let l=this.position[0]+t.left+this._xScale(n[0]);const c=this.position[1]+t.top,u=t.height;let h=this._xScale(n[1])-this._xScale(n[0]);h<r&&(l-=(r-h)/2,h=r),i6(e,l,c,h,u,i,o,a,s)}},{key:"drawVerticalOverlay",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!n||n.length<2)return;const l=this.position[0]+t.left;let c=this.position[1]+t.top+this._yScale(n.length>=4?n[2]:n[0]);const u=this.position[1]+t.top,h=this.position[1]+t.top+t.height;if(c>h)return;c<u&&(c=u);const p=t.width;let f=this._yScale(n.length>=4?n[3]:n[1])-c+t.top+this.position[1];f<0||(c+f>h&&(f+=h-(c+f)),f<r&&(c-=(r-f)/2,f=r),s.isVertical=!0,i6(e,l,c,p,f,i,o,a,s))}},{key:"draw",value:function(e){J4(n6(n.prototype),"draw",this).call(this);const t=this.pMain,r={color:CS(this.options.fill||this.options.fillColor||"blue"),opacity:Number.isNaN(+this.options.fillOpacity)?.3:+this.options.fillOpacity},i={color:CS(this.options.stroke||"blue"),opacity:+this.options.strokeOpacity||1,width:+this.options.strokeWidth||0,positions:!this.options.strokePos||Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]},o={color:CS(this.options.outline||"white"),opacity:+this.options.outlineOpacity||1,width:+this.options.outlineWidth||0,positions:!this.options.outlinePos||Array.isArray(this.options.outlinePos)?this.options.outlinePos:[this.options.outlinePos]};(!e||!e.svg)&&t.clear(),t.lineStyle(i.width,i,+!i.positions*i.opacity),t.beginFill(r.color,r.opacity);const a=Math.max(0,+this.options.minWidth||0),s=Math.max(0,+this.options.minHeight||0);Array.isArray(this.options.extent)&&this.options.orientationsAndPositions.forEach((n=>{("1d-horizontal"===n.orientation||"2d"===n.orientation)&&this.options.extent.forEach((s=>this.drawHorizontalOverlay(t,n.position,s,a,r,i,o,e))),("1d-vertical"===n.orientation||"2d"===n.orientation)&&this.options.extent.forEach((a=>this.drawVerticalOverlay(t,n.position,a,s,r,i,o,e)))}))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){J4(n6(n.prototype),"setPosition",this).call(this,e),this.draw()}},{key:"setDimensions",value:function(e){J4(n6(n.prototype),"setDimensions",this).call(this,e),this.draw()}},{key:"exportSVG",value:function(){let e=null,t=null;J4(n6(n.prototype),"exportSVG",this)?[t,e]=J4(n6(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");return e.appendChild(r),this.draw({svg:r}),[t,e]}}]),n}(UQ);function a6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s6(r.key),r)}}function s6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l6(){return l6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},l6.apply(this,arguments)}function c6(e,t){return(c6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=h6(e);if(t){var i=h6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function h6(e){return(h6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let p6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c6(e,t)}(n,e);var t=u6(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&a6(e.prototype,t),n&&a6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(e){if(!this.tilesetInfo||!this.options.showTooltip||!this.valueScale)return"";const t=this.getDataAtPos(e);let n="";t&&(n=xp(".3f")(t));const r=this.pMouseOver,i=this.valueScale(t);r.clear(),r.beginFill(0,.5),r.lineStyle(1,0,1);return r.drawRect(e-2,i-2,4,4),this.animate(),`${n}`}},{key:"initTile",value:function(e){if(l6(h6(n.prototype),"initTile",this).call(this,e),e.tileData&&e.tileData.dense){if(e.xValues=new Array(e.tileData.dense.length),e.yValues=new Array(e.tileData.dense.length),this.isValueScaleLocked()){const e=this.getLockGroupExtrema();null!==e&&(this.minValue(e[0]),this.maxValue(e[1]))}this.drawTile(e)}else console.warn("emptyTile:",e)}},{key:"rerender",value:function(e,t){l6(h6(n.prototype),"rerender",this).call(this,e,t),this.options=e,l6(h6(n.prototype),"draw",this).call(this),this.visibleAndFetchedTiles().forEach((e=>{this.renderTile(e)}))}},{key:"renderTile",value:function(e){this.drawTile(e),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(e){if(l6(h6(n.prototype),"drawTile",this).call(this,e),!e.graphics||!e.tileData||!e.tileData.dense)return;const t=e.graphics,{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=e.tileData.dense;if(0===o.length)return;const[a,s]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(this.valueScale=a,t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const l=CS(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue");!this.tilesetInfo.tile_size&&!this.tilesetInfo.bins_per_dimension&&console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension",this.tilesetInfo);const c=this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension,u=Fp().domain([0,c]).range([r,r+i]),h=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;t.lineStyle(h,l,1),e.segments=[];let p=[];for(let n=0;n<o.length;n++){const t=this._xScale(u(n)),r=this.valueScale(o[n]+s);if("log"===this.options.valueScaling&&0===o[n]||Number.isNaN(r))p.length>1&&e.segments.push(p),p=[];else{if(u(n)>this.tilesetInfo.max_pos[0])break;p.push([t,r])}}p.length>1&&e.segments.push(p);for(const n of e.segments){const e=n[0],r=n.slice(1);t.moveTo(e[0],e[1]);for(const n of r)t.lineTo(n[0],n[1])}}},{key:"setPosition",value:function(e){l6(h6(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw();const n=this.isValueScaleLocked();if(this.continuousScaling&&void 0!==this.minValue()&&void 0!==this.maxValue()){if(null===this.valueScaleMin&&null===this.valueScaleMax&&!n){const e=this.minVisibleValue(),t=this.maxVisibleValue(),n=1e-6;null!==e&&null!==t&&(Math.abs(this.minValue()-e)>n||Math.abs(this.maxValue()-t)>n)&&(this.minValue(e),this.maxValue(t),this.scheduleRerender())}n&&this.onValueScaleChanged()}}},{key:"superSVG",value:function(){return l6(h6(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let e=null,t=null;l6(h6(n.prototype),"exportSVG",this)?[t,e]=l6(h6(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t),t.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);const i=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue";this.visibleAndFetchedTiles().forEach((e=>{const t=document.createElement("path");t.setAttribute("fill","transparent"),t.setAttribute("stroke",i);let n="";for(const r of e.segments){const e=r[0],t=r.slice(1);n+=`M${e[0]} ${e[1]}`;for(const r of t)n+=`L${r[0]} ${r[1]}`}t.setAttribute("d",n),r.appendChild(t)}));const o=document.createElement("g");if(o.setAttribute("id","axis"),t.appendChild(o),o.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);o.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);o.appendChild(e)}return[t,e]}},{key:"tileToLocalId",value:function(e){return this.options.aggregationMode&&"mean"!==this.options.aggregationMode?`${e.join(".")}.${this.options.aggregationMode}`:`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return this.tileToLocalId(e)}}]),n}(s2);function f6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d6(r.key),r)}}function d6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function m6(){return m6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m6.apply(this,arguments)}function g6(e,t){return(g6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=v6(e);if(t){var i=v6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function v6(e){return(v6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let b6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g6(e,t)}(n,e);var t=y6(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&f6(e.prototype,t),n&&f6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initTile",value:function(e){e.barXValues=new Array(e.tileData.dense.length),e.barYValues=new Array(e.tileData.dense.length),e.barWidths=new Array(e.tileData.dense.length),e.barHeights=new Array(e.tileData.dense.length),m6(v6(n.prototype),"initTile",this).call(this,e)}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),i=e.tileData.dense;if(0===i.length)return;let o=0;if(this.valueScale=null,"log"===this.options.valueScaling){let e=this.medianVisibleValue;this.medianVisibleValue||(e=this.minValue()),this.valueScale=qp().domain([e,this.maxValue()+e]).range([this.dimensions[1],0]),o=e}else this.valueScale=Fp().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const a=CS(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),s=Fp().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,a,1);const l=this.options.pointSize?this.options.pointSize:3,c=CS(this.options.pointColor?this.options.pointColor:"red");t.beginFill(c,1),e.drawnAtScale=this._xScale.copy();for(let u=0;u<i.length;u++){const n=this._xScale(s(u)),r=this.valueScale(i[u]+o);if(e.barXValues[u]=n-l/2/this.pMain.scale.x,e.barYValues[u]=r-l/2/this.pMain.scale.y,e.barWidths[u]=l/this.pMain.scale.x,e.barHeights[u]=l/this.pMain.scale.y,s(u)>this.tilesetInfo.max_pos[0])break;t.drawRect(n-l/2/this.pMain.scale.x,r-l/2/this.pMain.scale.y,l/this.pMain.scale.x,l/this.pMain.scale.y)}}},{key:"draw",value:function(){m6(v6(n.prototype),"draw",this).call(this);for(const e of BS(this.fetchedTiles)){const t=(e.drawnAtScale.domain()[1]-e.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),n=this._xScale.domain().map(e.drawnAtScale)[0];e.graphics.scale.x=t,e.graphics.position.x=-n*t}}},{key:"zoomed",value:function(e,t,r,i,o){m6(v6(n.prototype),"zoomed",this).call(this,e,t)}},{key:"exportSVG",value:function(){let e=null,t=null;[t,e]=m6(v6(n.prototype),"superSVG",this).call(this),t.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);for(const n of this.visibleAndFetchedTiles())for(let e=0;e<n.barXValues.length;e++){const t=document.createElement("rect"),i=this.options.lineStrokeColor||"blue",o=this.options.pointColor||"red";t.setAttribute("fill",o),t.setAttribute("stroke",i),t.setAttribute("stroke-width",0),t.setAttribute("x",n.barXValues[e]),t.setAttribute("y",n.barYValues[e]),t.setAttribute("height",n.barHeights[e]),t.setAttribute("width",n.barWidths[e]),r.appendChild(t)}const i=document.createElement("g");if(i.setAttribute("id","axis"),t.appendChild(i),i.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}return[t,e]}}]),n}(p6);const _6=(e,t)=>{const n=rO(e,t);return function(e){let t=0;const n=[];return e.forEach((e=>{t+=+e||0,n.push(t)})),Float64Array.from(n)}(e.map((e=>(Array.isArray(e)&&t?e.length:1)/n)))};function T6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E6(r.key),r)}}function E6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function S6(){return S6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},S6.apply(this,arguments)}function w6(e,t){return(w6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=O6(e);if(t){var i=O6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function O6(e){return(O6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let x6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w6(e,t)}(n,e);var t=A6(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).pMain=i.pMobile,i.continuousScaling=!1,i.updateDataFetcher(r),i}return function(e,t,n){t&&T6(e.prototype,t),n&&T6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"updateDataFetcher",value:function(e){if(e&&e.selectRows&&"server"===e.selectRowsAggregationMethod){const{pubSub:t,dataFetcher:n}=this,r=n.dataConfig.options,i={aggGroups:e.selectRows,aggFunc:e.selectRowsAggregationMode};if(JSON.stringify(r)!==JSON.stringify(i)){const e={...n.dataConfig,options:i};this.dataFetcher=new n.constructor(e,t),this.dataFetcher.dataConfig.tilesetUid&&this.fetchNewTiles(Object.keys(this.fetchedTiles).map((e=>({tileId:e,remoteId:e}))))}}}},{key:"rerender",value:function(e,t){this.updateDataFetcher(e),S6(O6(n.prototype),"rerender",this).call(this,e,t),e.selectRows&&(this.selectRowsCumWeights=_6(e.selectRows,e.selectRowsAggregationWithRelativeHeight))}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");this.options.selectRows&&this.tilesetInfo.shape?(t.width=this.tilesetInfo.shape[0],t.height=rO(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight)):this.tilesetInfo.shape?(t.width=this.tilesetInfo.shape[0],t.height=this.tilesetInfo.shape[1]):(t.width=this.tilesetInfo.tile_size,t.height=1);const n=t.getContext("2d");if(n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height),0!==e.length&&e.length===4*t.width*t.height){const r=new ImageData(e,t.width,t.height);n.putImageData(r,0,0)}else console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");return t}},{key:"setSpriteProperties",value:function(e,t,n){const{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(t,n,this.tilesetInfo.tile_size),o=r+i;e.width=this._refXScale(o)-this._refXScale(r),e.height=this.dimensions[1],e.x=this._refXScale(r),e.y=0}},{key:"leftTrackZoomed",value:function(e,t,n,r,i){const o=this._xScale(0)-n*this._refXScale(0);this.pMobile.position.x=o+this.position[0],this.pMobile.position.y=this.position[1],this.pMobile.scale.x=n,this.pMobile.scale.y=1}},{key:"zoomed",value:function(e,t,r,i){S6(O6(n.prototype),"zoomed",this).call(this,e,t),this.pMain.position.x=i,this.pMain.position.y=this.position[1],this.pMain.scale.x=r,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e));this.xTiles=Fw.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size)}else this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles.map((e=>[this.zoomLevel,e]));this.setVisibleTiles(e)}},{key:"calculateZoomLevel",value:function(){if(!this.tilesetInfo)return;const e=this.tilesetInfo.min_pos[0];let t=null;return t=this.tilesetInfo.resolutions?Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,e):Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t}},{key:"tileToLocalId",value:function(e){return e.join(".")}},{key:"tileToRemoteId",value:function(e){return e.join(".")}},{key:"getTilePosAtPosition",value:function(e,t){if(!this.tilesetInfo)return;const n=this.calculateZoomLevel(),r=Fw.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r;return[n,Math.floor(i)]}},{key:"getVisibleData",value:function(e,t){const n=this.calculateZoomLevel(),r=Fw.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r;let o=this.tilesetInfo.shape?this.tilesetInfo.shape[1]:1;this.options.selectRows&&(o=rO(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight));let a=this.tilesetInfo.tile_size*(i-Math.floor(i));const s=t/this.dimensions[1],l=s*o;let c,u=Math.floor(l);this.options.selectRows&&(this.options.selectRowsAggregationWithRelativeHeight&&(u=this.selectRowsCumWeights.findIndex(((e,t)=>s<=e&&(t===this.selectRowsCumWeights.length-1||this.selectRowsCumWeights[t+1]>=s)))),c=this.options.selectRows[u]);const h=this.tileToLocalId([n,Math.floor(i)]),p=this.fetchedTiles[h];let f="";if(p){this.tilesetInfo.shape||(a=p.tileData.dense.length*(i-Math.floor(i)));let e=null;if(e=this.tilesetInfo.shape?Array.isArray(c)&&"client"===this.options.selectRowsAggregationMethod?c.map((e=>this.tilesetInfo.shape[0]*e+Math.floor(a))):c&&"client"===this.options.selectRowsAggregationMethod?this.tilesetInfo.shape[0]*c+Math.floor(a):this.tilesetInfo.shape[0]*u+Math.floor(a):p.tileData.dense.length*u+Math.floor(a),Array.isArray(e)){const t=nO(this.options.selectRowsAggregationMode),n=e.map((e=>p.tileData.dense[e]));f=xp(".3f")(t(n)),f+="<br/>",f+=`${e.length}-item ${this.options.selectRowsAggregationMode}`}else f=xp(".3f")(p.tileData.dense[e]),Array.isArray(c)&&(f+="<br/>",f+=`${c.length}-item ${this.options.selectRowsAggregationMode}`)}if(this.tilesetInfo.row_infos){f+="<br/>";let e="";this.options.selectRows&&!Array.isArray(c)?e=this.tilesetInfo.row_infos[c]:u>=0&&u<this.tilesetInfo.row_infos.length&&(e=this.tilesetInfo.row_infos[u]),f+="object"==typeof e?Object.values(e).join("\t"):e}return`${f}`}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";const n=this.getTilePosAtPosition(e,t);let r="";if(this.options&&this.options.heatmapValueScaling&&"categorical"===this.options.heatmapValueScaling&&this.options.colorRange){const n=this.getVisibleData(e,t).split("<br/>"),i=this.options.colorRange[parseInt(n[0],10)-1],o=n[1];if(Number.isNaN(i)||"NaN"===i||typeof i>"u"||"undefined"===i)return"";r=`<svg width="10" height="10" style="position:relative;bottom:1px"><rect width="10" height="10" rx="2" ry="2"\n                 style="fill:${i};stroke:black;stroke-width:2;"></svg> ${o}`}else r+=`Data value: ${this.getVisibleData(e,t)}</br>`,r+=`Zoom level: ${n[0]} tile position: ${n[1]}`;return r}}]),n}(j1);function k6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I6(r.key),r)}}function I6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function C6(){return C6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},C6.apply(this,arguments)}function P6(e,t){return(P6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=R6(e);if(t){var i=R6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function R6(e){return(R6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const N6=CS("#FFFFFF");let M6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P6(e,t)}(n,e);var t=D6(n);function n(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this,...i)).zeroLine=new nS.PIXI.Graphics,e.pMain.addChild(e.zeroLine),e.valueScaleTransform=fK,e.options&&e.options.colorRange&&(e.options.colorRangeGradient?e.setColorGradient(e.options.colorRange):e.setColorScale(e.options.colorRange)),e.initialized=!0,e}return function(e,t,n){t&&k6(e.prototype,t),n&&k6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setColorScale",value:function(e){e&&(this.colorScale=YE(e),this.colorScale=this.colorScale.map((e=>e.map((e=>e/255)))))}},{key:"setColorGradient",value:function(e){if(!e)return;const t=e.length-1;this.colorGradientColors="bottom"===this.options.align?e.slice().reverse().map(((e,n)=>({from:n/t,color:e}))):e.map(((e,n)=>({from:n/t,color:e})))}},{key:"initTile",value:function(e){this.initialized&&C6(R6(n.prototype),"initTile",this).call(this,e)}},{key:"updateTile",value:function(e){(!e.valueScale||!this.scale||this.scale.minValue!==e.scale.minValue||this.scale.maxValue!==e.scale.maxValue)&&this.renderTile(e)}},{key:"renderTile",value:function(e){this.initialized&&C6(R6(n.prototype),"renderTile",this).call(this,e)}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const{graphics:t}=e;e.svgData=void 0;const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),i=e.tileData.dense;if(0===i.length)return;const[o,a]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue(),0);o.clamp(!0),this.valueScale=o;const s=o.copy();if(s.range([254,0]).clamp(!0),t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const l=CS(this.options.lineStrokeColor||"blue"),c=Fp().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]);t.lineStyle(0,l,1);const u=this.options.barFillColor||"grey",h=CS(u),p="barOpacity"in this.options?this.options.barOpacity:1;t.beginFill(h,p),e.drawnAtScale=this._xScale.copy();const f="top"===this.options.align;let d,m,g,y,v,b;if(this.colorGradientColors){v=new nS.PIXI.Graphics,v.beginFill(N6,1);const e=Qw(this.colorGradientColors,1,this.dimensions[1],0,0,0,this.dimensions[1]);b=new nS.PIXI.Sprite(nS.PIXI.Texture.fromCanvas(e,nS.PIXI.SCALE_MODES.NEAREST)),b.x=this._xScale(n),b.width=this._xScale(n+r)-b.x}for(let _=0;_<i.length;_++)if(d=this._xScale(c(_)),g=this.valueScale(i[_]+a),m=this._xScale(c(_+1))-d,y=this.dimensions[1]-g,f&&(g=0),!(Number.isNaN(y)||y<0||g<0)){if(this.addSVGInfo(e,d,g,m,y,u),c(_)>this.tilesetInfo.max_pos[0])break;if(this.colorScale&&!this.options.colorRangeGradient){const e=Math.round(s(i[_]+a)),n=this.colorScale[e],r=nS.PIXI.utils.rgb2hex(n);t.beginFill(r,p)}(v||t).drawRect(d,g,m,y)}this.colorGradientColors&&(b.mask=v,t.removeChildren(),t.addChild(b,v))}},{key:"rerender",value:function(e,t){e&&e.colorRange&&(e.colorRangeGradient?this.setColorGradient(e.colorRange):this.setColorScale(e.colorRange)),C6(R6(n.prototype),"rerender",this).call(this,e,t)}},{key:"drawZeroLine",value:function(){this.zeroLine.clear();const e=CS(this.options.barFillColor||"grey"),t=+this.options.barOpacity||1,n=this.options.zeroLineColor?CS(this.options.zeroLineColor):e,r=Number.isNaN(+this.options.zeroLineOpacity)?t:+this.options.zeroLineOpacity;this.zeroLine.beginFill(n,r),this.zeroLine.drawRect(0,this.dimensions[1]-1,this.dimensions[0],1)}},{key:"drawZeroLineSvg",value:function(e){const t=document.createElement("rect");t.setAttribute("id","zero-line"),t.setAttribute("x",0),t.setAttribute("y",this.dimensions[1]-1),t.setAttribute("height",1),t.setAttribute("width",this.dimensions[0]),t.setAttribute("fill",this.options.zeroLineColor||this.options.barFillColor),t.setAttribute("fill-opacity",this.options.zeroLineOpacity||this.options.barOpacity),e.appendChild(t)}},{key:"getXScaleAndOffset",value:function(e){const t=e.domain(),n=this._xScale.domain(),r=(t[1]-t[0])/(n[1]-n[0]);return[r,-this._xScale.domain().map(e)[0]*r]}},{key:"draw",value:function(){this.initialized&&(C6(R6(n.prototype),"draw",this).call(this),this.options.zeroLineVisible?this.drawZeroLine():this.zeroLine.clear(),Object.values(this.fetchedTiles).forEach((e=>{const[t,n]=this.getXScaleAndOffset(e.drawnAtScale);e.graphics.scale.x=t,e.graphics.position.x=n})))}},{key:"zoomed",value:function(e,t){C6(R6(n.prototype),"zoomed",this).call(this,e,t)}},{key:"movedY",value:function(e){}},{key:"zoomedY",value:function(e,t){}},{key:"addSVGInfo",value:function(e,t,n,r,i,o){e.svgData?(e.svgData.barXValues.push(t),e.svgData.barYValues.push(n),e.svgData.barWidths.push(r),e.svgData.barHeights.push(i),e.svgData.barColors.push(o)):e.svgData={barXValues:[t],barYValues:[n],barWidths:[r],barHeights:[i],barColors:[o]}}},{key:"exportSVG",value:function(){let e=null,t=null;[t,e]=C6(R6(n.prototype),"superSVG",this).call(this),t.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.options.zeroLine&&this.drawZeroLineSvg(r),this.visibleAndFetchedTiles().filter((e=>e.svgData&&e.svgData.barXValues)).forEach((e=>{const t=e.svgData;for(let n=0;n<t.barXValues.length;n++){const i=document.createElement("rect");i.setAttribute("fill",t.barColors[n]),i.setAttribute("stroke",t.barColors[n]),i.setAttribute("x",t.barXValues[n]),i.setAttribute("y",t.barYValues[n]),i.setAttribute("height",t.barHeights[n]),i.setAttribute("width",t.barWidths[n]),e.barBorders&&(i.setAttribute("stroke-width","0.1"),i.setAttribute("stroke","black")),r.appendChild(i)}}));const i=document.createElement("g");if(i.setAttribute("id","axis"),t.appendChild(i),i.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}return[t,e]}}]),n}(p6);function L6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j6(r.key),r)}}function j6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function B6(e,t){return(B6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=G6(e);if(t){var i=G6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function G6(e){return(G6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let H6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B6(e,t)}(n,e);var t=F6(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&L6(e.prototype,t),n&&L6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"drawTile",value:function(e){this.renderTile(e)}},{key:"renderTile",value:function(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),i=e.tileData.dense;if(0===i.length)return;let o=0;if(this.valueScale=null,"log"===this.options.valueScaling){let e=this.medianVisibleValue;this.medianVisibleValue||(e=this.minValue()),this.valueScale=qp().domain([e,this.maxValue()+e]).range([this.dimensions[1],0]),o=e}else this.valueScale=Fp().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const a=CS(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),s=Fp().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,a,1);const l=this.options.barFillColorTop?this.options.barFillColorTop:"green",c=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",u=CS(l),h=CS(c),p="barOpacity"in this.options?this.options.barOpacity:1;e.drawnAtScale=this._xScale.copy();let f=0;f="log"===this.options.valueScaling?this.valueScale(1):this.valueScale(0),delete e.svgData;for(let d=0;d<i.length;d++){const n=this._xScale(s(d)),r=this.valueScale(i[d]+o),a=this._xScale(s(d+1))-n;if(r>f?(t.beginFill(h,p),this.addSVGInfo(e,n,f,a,r-f,c)):(t.beginFill(u,p),this.addSVGInfo(e,n,r,a,f-r,l)),s(d)>this.tilesetInfo.max_pos[0])break;t.drawRect(n,e.svgData.barYValues[d],a,e.svgData.barHeights[d])}}}]),n}(M6);function U6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z6(r.key),r)}}function z6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function V6(){return V6=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W6(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},V6.apply(this,arguments)}function X6(e,t){return(X6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=W6(e);if(t){var i=W6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function W6(e){return(W6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let q6=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X6(e,t)}(n,e);var t=Y6(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).setColorScale(r.colorRange),i.opacity=r.opacity||1,i}return function(e,t,n){t&&U6(e.prototype,t),n&&U6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setColorScale",value:function(e){this.colorScale=e?YE(e):wS,this.colorScale=this.colorScale.map((e=>e.map((e=>e/255))))}},{key:"rerender",value:function(e){e&&e.colorRange&&this.setColorScale(e.colorRange),this.opacity=e.opacity||1,V6(W6(n.prototype),"rerender",this).call(this,e)}},{key:"drawAxis",value:function(){}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),i=e.tileData.dense;if(0===i.length)return;const[o,a]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(o.range([254,0]).clamp(!0),this.valueScale=o,t.clear(),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const s=Fp().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,0,0);for(let l=0;l<i.length;l++){if(Number.isNaN(i[l]))continue;const n=Math.round(this.valueScale(i[l]+a));if(Number.isNaN(+n))continue;const r=this._xScale(s(l)),o=this._xScale(s(l+1))-r,c=this.dimensions[1];e.xValues[l]=r,e.yValues[l]=n;const u=this.colorScale[n],h=nS.PIXI.utils.rgb2hex(u);if(t.beginFill(h,this.opacity),0!==l){if(s(l)>this.tilesetInfo.max_pos[0])break;0!==i[l]&&t.drawRect(r,0,o,c)}}}}]),n}(p6);function $6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K6(r.key),r)}}function K6(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Q6(e,t){return(Q6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z6(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=J6(e);if(t){var i=J6(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function J6(e){return(J6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let e8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q6(e,t)}(n,e);var t=Z6(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).seen=new Set,i.pMain=i.pMobile,i.rows=[],i}return function(e,t,n){t&&$6(e.prototype,t),n&&$6(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"uid",value:function(e){return e[e.length-2]}},{key:"segmentOverlap",value:function(e,t){}},{key:"drawAll",value:function(e){this.pMain.clear();const t=new Set,n=$A(e.map((e=>t.has(this.uid(e))?null:(t.add(this.uid(e)),{from:+e[1],to:+e[2],type:e[4],uid:this.uid(e)}))).filter((e=>e)));this.rows=n,this.draw()}},{key:"draw",value:function(){const e=this.rows;if(!e)return;const t=ku().range([0,this.dimensions[1]]).padding(.1).domain(du(0,this.maxRows())),n=this.pMain;n.clear(),n.lineStyle(1,255,0),n.beginFill(16740363,.8);for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++){const o=e[r][i],a=this._refXScale(o.from),s=this._refXScale(o.to),l=t(r),c=s-a,u=l+t.bandwidth()-l;n.drawRect(a,l,c,u)}}},{key:"allTilesLoaded",value:function(){const e=this.visibleAndFetchedIds().map((e=>this.fetchedTiles[e].tileData.discrete)),t=[].concat(...e);this.drawAll(t)}},{key:"initTile",value:function(e){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){e.tileData.discrete.forEach((e=>{const t=e[e.length-2];this.seen.has(t)&&this.seen.delete(t)}))}},{key:"drawTile",value:function(e){}}]),n}(s2);function t8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n8(r.key),r)}}function n8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let r8=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.scene=t.scene,this.originalTrack=t,this.pBase=new nS.PIXI.Graphics,this.scene.removeChild(t.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new nS.PIXI.Graphics,this.moveToOrigin.addChild(t.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,t.isLeftModified=!0,t.flipText=!0,this.svgOutput=null,t.gBase&&t.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                             rotate(90)\n                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}return function(e,t,n){t&&t8(e.prototype,t),n&&t8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(e){this.dimensions=e;const t=[e[1],e[0]];this.originalTrack.setDimensions(t)}},{key:"setPosition",value:function(e){this.position=e,this.originalTrack.setPosition(e),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                                 rotate(90)\n                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}},{key:"refXScale",value:function(e){return arguments.length?(this.originalTrack._refXScale=e,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(e){return arguments.length?(this.originalTrack._refYScale=e,this):this.originalTrack._refXScale}},{key:"xScale",value:function(e){return arguments.length?(this.originalTrack._yScale=e,this):this.originalTrack._xScale}},{key:"yScale",value:function(e){return arguments.length?(this.originalTrack._xScale=e,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(e,t){return this.originalTrack.getMouseOverHtml(t,e)}},{key:"clickOutside",value:function(){this.originalTrack.clickOutside()}},{key:"click",value:function(){this.originalTrack.click(...arguments)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.xScale(e),this.yScale(t),this.originalTrack.leftTrackZoomed)return this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackZoomed(e,t,n,r,i),void this.originalTrack.draw();const o=this.originalTrack._xScale(0)-n*this.originalTrack._refXScale(0);if(this.originalTrack.pMobile.position.x=o+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=n,this.originalTrack.pMobile.scale.y=n,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-n,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.leftTrackDraw)return this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),void this.originalTrack.leftTrackDraw();this.originalTrack.zoomed(this.xScale(),this.yScale())}},{key:"zoomedY",value:function(e,t){this.originalTrack.zoomedY(e,t)}},{key:"movedY",value:function(e){this.originalTrack.movedY(e)}},{key:"refScalesChanged",value:function(e,t){this.originalTrack.refScalesChanged(t,e)}},{key:"rerender",value:function(e){this.originalTrack.rerender(e)}},{key:"exportSVG",value:function(){const e=document.createElement("g");if(e.setAttribute("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                             rotate(90)\n                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.exportSVG){const t=document.createElement("g");t.setAttribute("transform",`translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`),t.appendChild(this.originalTrack.exportSVG()[0]),e.appendChild(t)}return[e,e]}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}}]),e}();function i8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o8(r.key),r)}}function o8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function a8(){return a8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a8.apply(this,arguments)}function s8(e,t){return(s8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l8(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=c8(e);if(t){var i=c8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function c8(e){return(c8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const u8="Arial",h8="outside",p8=CS("#ffffff"),f8=2,d8=2*(20/3)/3,m8="blue",g8="red",y8=(e,t,n)=>{"filler"!==n.type&&t.pubSub.publish("app.click",{type:"gene-annotation",event:e,payload:n})},v8=(e,t)=>{const n=e.concat(t),r=n.map((e=>[e.xStart,1,e.xEnd,1]));I4(r,((e,t)=>{let r=null,i=null;if("filler"===n[e].type?r=n[e]:i=n[e],"filler"===n[t].type){if(r)return;r=n[t]}else{if(!r)return;i=n[t]}r.xStart>=i.xStart&&r.xEnd<=i.xEnd&&(r.hide=!0)}))};function b8(e,t,n,r,i,o,a,s,l){const c=s-l/2;e.forEach((e=>{const r=new nS.PIXI.Graphics;n.rectGraphics.addChild(r),r.beginFill(o,.1),r.lineStyle(0,o);const a=[i(e.xStart)-0,c,i(e.xEnd)+0,c,i(e.xEnd)+0,c+l,i(e.xStart)-0,c+l,i(e.xStart)-0,c];r.interactive=!0,r.buttonMode=!0,r.mouseup=n=>y8(n,t,e),r.drawPolygon(a),n.allRects.push([a,e.strand,e])}))}function _8(e,t,n,r,i,o,a,s,l){e.forEach((e=>{const r=e.fields,i=+e.chrOffset,c=r[12],u=r[13],h=new nS.PIXI.Graphics;n.rectGraphics.addChild(h),h.beginFill(o,a),h.interactive=!0,h.buttonMode=!0,h.mouseup=n=>y8(n,t,e),n.allRects=n.allRects.concat(function(e,t,n,r,i,o,a,s,l,c){const u=s-l/2,h=i.split(",").map((e=>+e+a)),p=o.split(",").map((e=>+e+a)),f=e._xScale(n),d=e._xScale(r),m=d-f,g=s,y=[];let v=[f,g-f8/2,f+m,g-f8/2,f+m,g+f8/2,f,g+f8/2];t.drawPolygon(v),y.push(v);const b=2*l;for(let _=Math.max(e.position[0],f)+b;_<Math.min(e.position[0]+e.dimensions[0],f+m);_+=b)v="+"===c?[_,g-d8/2,_+d8/2,g,_,g+d8/2]:[_,g-d8/2,_-d8/2,g,_,g+d8/2],y.push(v),t.drawPolygon(v);for(let _=0;_<h.length;_++){const n=h[_],r=p[_],i=e._xScale(n),o=Math.max(1,e._xScale(r)-e._xScale(n));let a=f,s=d;const m=e.geneRectHeight/2;let g=null;"+"===c?(s=d-m,g=[Math.min(i,s),u,Math.min(i+o,s),u,Math.min(i+o,s),u+l,Math.min(i,s),u+l,Math.min(i,s),u]):(a=f+m,g=[Math.max(i,a),u,Math.max(i+o,a),u,Math.max(i+o,a),u+l,Math.max(i,a),u+l,Math.max(i,a),u]),y.push(g),t.drawPolygon(g)}return y}(t,h,e.xStart,e.xEnd,c,u,i,s,l,e.strand||e.fields[5]).map((t=>[t,e.strand,e])))}))}function T8(e,t,n,r,i,o,a,s,l){(function(e,t,n,r,i,o,a,s,l){const c=s-l/2;e.forEach((e=>{const r=t._xScale(e.xStart),i=t._xScale(e.xEnd),s=new nS.PIXI.Graphics;n.rectGraphics.addChild(s),s.beginFill(o,a),s.interactive=!0,s.buttonMode=!0,s.mouseup=n=>y8(n,t,e);const l=t.geneRectHeight/2;let u=[];if("+"===e.strand||"+"===e.fields[5]){const e=Math.max(r,i-l);u=[e,c,e+l,c+t.geneRectHeight/2,e,c+t.geneRectHeight]}else{const e=Math.min(i,r+l);u=[e,c,e-l,c+t.geneRectHeight/2,e,c+t.geneRectHeight]}s.drawPolygon(u),n.allRects.push([u,e.strand,e])}))})(e,t,n,0,0,o,a,s,l),_8(e,t,n,0,0,o,a,s,l)}let E8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s8(e,t)}(n,e);var t=l8(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{animate:o}=e;return i.animate=o,i.options=r,i.fontSize=+i.options.fontSize||11,i.geneLabelPos=i.options.geneLabelPosition||h8,i.geneRectHeight=+i.options.geneAnnotationHeight||10,i.geneRectHeight-=2,i.geneStrandSpacing=+i.options.geneStrandSpacing||4,i.geneStrandHSpacing=i.geneStrandSpacing/2,i.geneRectHHeight=i.geneRectHeight/2,i}return function(e,t,n){t&&i8(e.prototype,t),n&&i8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initTile",value:function(e){(function(e,t,n){const{flipText:r,fontSize:i,fontFamily:o,plusStrandColor:a,minusStrandColor:s,maxGeneEntries:l,maxFillerEntries:c,maxTexts:u}=n;if(t.texts={},t.rectGraphics=new nS.PIXI.Graphics,t.textBgGraphics=new nS.PIXI.Graphics,t.textGraphics=new nS.PIXI.Graphics,t.rectMaskGraphics=new nS.PIXI.Graphics,t.graphics.addChild(t.rectGraphics),t.graphics.addChild(t.textBgGraphics),t.graphics.addChild(t.textGraphics),t.graphics.addChild(t.rectMaskGraphics),t.rectGraphics.mask=t.rectMaskGraphics,!t.tileData.sort)return;t.tileData.sort(((e,t)=>t.importance-e.importance));const h=t.tileData.filter((e=>"filler"!==e.type)).slice(0,l),p=t.tileData.filter((e=>"filler"===e.type)).slice(0,c);t.tileData=h.concat(p),t.tileData.forEach(((n,l)=>{if("filler"===n.type)return;const c=n.fields,h=c[3],p=e.geneId(c,n.type),f=n.strand||c[5];n.strand=n.strand||f;let d=a||m8;if("-"===f&&(d=s||g8),t.textWidths={},t.textHeights={},l>=u)return;const m=new nS.PIXI.Text(h,{fontSize:`${i}px`,fontFamily:o,fill:CS(d)});m.interactive=!0,r&&(m.scale.x=-1),m.anchor.x=.5,m.anchor.y=1,t.texts[p]=m,t.texts[p].strand=f,t.textGraphics.addChild(m)})),t.initialized=!0})(this,e,{flipText:this.flipText,fontSize:this.fontSize,fontFamily:u8,plusStrandColor:this.options.plusStrandColor,minusStrandColor:this.options.minusStrandColor,maxGeneEntries:50,maxFillerEntries:5e3,maxTexts:20}),this.renderTile(e)}},{key:"destroyTile",value:function(e){e.rectGraphics.destroy(),e.rectMaskGraphics.destroy(),e.textGraphics.destroy(),e.textBgGraphics.destroy(),e.graphics.destroy()}},{key:"rerender",value:function(e,t){const r=JSON.stringify(e);!t&&r===this.prevOptions||(a8(c8(n.prototype),"rerender",this).call(this,e,t),this.fontSize=+this.options.fontSize||11,this.geneLabelPos=this.options.geneLabelPosition||h8,this.geneRectHeight=+this.options.geneAnnotationHeight||10,this.geneStrandHSpacing=this.geneStrandSpacing/2,this.geneRectHHeight=this.geneRectHeight/2,this.prevOptions=r,this.visibleAndFetchedTiles().forEach((e=>{this.renderTile(e)})))}},{key:"drawTile",value:function(){}},{key:"geneId",value:function(e,t){return`${t}_${e[0]}_${e[1]}_${e[2]}_${e[3]}`}},{key:"renderTile",value:function(e){if(!e.initialized)return;e.allRects=[],e.drawnAtScale=this._xScale.copy(),e.rectGraphics.removeChildren(),e.rectGraphics.clear(),e.textBgGraphics.clear();const t={};t["+"]=CS(this.options.plusStrandColor||m8),t["-"]=CS(this.options.minusStrandColor||g8);let n=e.tileData.filter((e=>"filler"===e.type&&"+"===e.strand)),r=e.tileData.filter((e=>"filler"===e.type&&"-"===e.strand));const i=e.tileData.filter((e=>"filler"!==e.type&&("+"===e.strand||"+"===e.fields[5]))),o=e.tileData.filter((e=>"filler"!==e.type&&("-"===e.strand||"-"===e.fields[5])));v8(i,n),v8(o,r),n=n.filter((e=>!e.hide)),r=r.filter((e=>!e.hide));const a=this.dimensions[1]/2,s=a-this.geneRectHeight/2-this.geneStrandSpacing/2,l=a+this.geneRectHeight/2+this.geneStrandSpacing/2,c=[this,e,e.rectGraphics,this._xScale,t["+"],.3,s,this.geneRectHeight],u=[this,e,e.rectGraphics,this._xScale,t["-"],.3,l,this.geneRectHeight];b8(n,...c),b8(r,...u),c[5]=.3,u[5]=.3,T8(i,...c),T8(o,...u),function(e,t){const{tileX:n,tileWidth:r}=CK.getTilePosAndDimensions(e.tilesetInfo,t.tileId);t.rectMaskGraphics.clear();const i=Math.floor(Math.random()*16**6);t.rectMaskGraphics.beginFill(i,.3);const o=e._xScale(n),a=e._xScale(n+r)-e._xScale(n),s=e.dimensions[1];t.rectMaskGraphics.drawRect(o,0,a,s)}(this,e),CK.stretchRects(this,[e=>e.rectGraphics,e=>e.rectMaskGraphics]);for(const h of Object.values(e.texts))h.style={fontSize:`${this.fontSize}px`,FONT_FAMILY:u8,fill:CS("-"===h.strand?this.options.minusStrandColor||g8:this.options.plusStrandColor||m8)}}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"draw",value:function(){a8(c8(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];const e=[];this.geneAreaHeight=this.geneRectHeight;const t=this.fontSize/2;CK.stretchRects(this,[e=>e.rectGraphics,e=>e.rectMaskGraphics]),Object.values(this.fetchedTiles).filter((e=>e.drawnAtScale)).forEach((n=>{n.textBgGraphics.clear(),n.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor<"u"?CS(this.options.labelBackgroundColor):p8);const r=this.parentInFetched(n);n.initialized&&n.tileData.forEach((i=>{if(!n.texts||"filler"===i.type)return;const o=i.fields,a=o[3],s=this.geneId(o,i.type),l=n.texts[s];if(!l)return;const c=+i.chrOffset,u=(+o[1]+c+(+o[2]+c))/2;let h=this.dimensions[1]/2;const p=(this.geneAreaHeight-this.fontSize)/2;if("+"===o[5]?h-="inside"===this.geneLabelPos?p+this.geneStrandSpacing-2:this.fontSize/2+this.geneAreaHeight-2:h+="inside"===this.geneLabelPos?this.fontSize+this.geneStrandSpacing/2+p+1:1.5*this.fontSize+this.geneAreaHeight+2,l.position.x=this._xScale(u),l.position.y=h,!n.textWidths[s]){const e=l.getBounds().width,t=l.getBounds().height;n.textHeights[s]=t,n.textWidths[s]=e}if(r)l.visible=!1;else{l.visible=!0;const r=2;this.flipText?this.allBoxes.push([l.position.x-n.textHeights[s]/2-r,h-t-1,l.position.x+n.textHeights[s]/2+r,h+t-1,a]):this.allBoxes.push([l.position.x-n.textWidths[s]/2-r,h-t-1,l.position.x+n.textWidths[s]/2+r,h+t-1,a]),this.allTexts.push({importance:+o[4],text:l,caption:a,strand:o[5]}),e.push(n.textBgGraphics)}}))})),this.hideOverlaps(this.allBoxes,this.allTexts),this.renderTextBg(this.allBoxes,this.allTexts,e)}},{key:"renderTextBg",value:function(e,t,n){t.forEach(((t,r)=>{if(t.text.visible&&e[r]&&n[r]){const[t,i,o,a]=e[r],s=o-t,l=a-i;n[r].drawRect(t-s/2,i-l/2,s,l)}}))}},{key:"hideOverlaps",value:function(e,t){I4(e,((e,n)=>{t[e].importance>t[n].importance?t[n].text.visible=!1:t[e].text.visible=!1}))}},{key:"setPosition",value:function(e){a8(c8(n.prototype),"setPosition",this).call(this,e),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(e){a8(c8(n.prototype),"setDimensions",this).call(this,e),this.halfRectHHeight=this.dimensions[1]/2,this.visibleAndFetchedTiles().forEach((e=>{this.renderTile(e)}))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";const n=[e,t];for(const r of this.visibleAndFetchedTiles())for(let e=0;e<r.allRects.length;e++){if("filler"===r.allRects[e][2].type)continue;const t=r.allRects[e][0].slice(0),i=[];for(;t.length;){const e=t.splice(0,2);e[0]=e[0]*r.rectGraphics.scale.x+r.rectGraphics.position.x,e[1]=e[1]*r.rectGraphics.scale.y+r.rectGraphics.position.y,i.push(e)}if(-1===H4(i,n)){const t=r.allRects[e][2];return`\n            <div>\n              <b>${t.fields[3]}</b><br>\n              <b>Position:</b> ${t.fields[0]}:${t.fields[1]}-${t.fields[2]}<br>\n              <b>Strand:</b> ${t.fields[5]}\n            </div>\n          `}}return""}},{key:"exportSVG",value:function(){let e=null,t=null;a8(c8(n.prototype),"exportSVG",this)?[t,e]=a8(c8(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");return r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r),this.visibleAndFetchedTiles().filter((e=>e.allRects)).forEach((e=>{const t=document.createElement("g");t.setAttribute("transform",`translate(${e.rectGraphics.position.x},\n          ${e.rectGraphics.position.y})\n          scale(${e.rectGraphics.scale.x},\n          ${e.rectGraphics.scale.y})`),e.allRects.forEach((e=>{const n=document.createElement("path"),r=e[0];let i=`M ${r[0]} ${r[1]}`;for(let t=2;t<r.length;t+=2)i+=` L ${r[t]} ${r[t+1]}`;n.setAttribute("d",i),"+"===e[1]?n.setAttribute("fill",this.options.plusStrandColor):n.setAttribute("fill",this.options.minusStrandColor),n.setAttribute("opacity","0.3"),t.appendChild(n)})),r.appendChild(t)})),this.allTexts.filter((e=>e.text.visible)).forEach((e=>{const t=document.createElement("g"),n=document.createElement("text");n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",u8),n.setAttribute("font-size",`${this.fontSize}px`),n.setAttribute("dy","-.2em"),t.setAttribute("transform",`scale(${e.text.scale.x},1)`),"+"===e.strand?n.setAttribute("fill",this.options.plusStrandColor):n.setAttribute("fill",this.options.minusStrandColor),n.innerHTML=e.text.text,t.appendChild(n),t.setAttribute("transform",`translate(${e.text.x},${e.text.y})scale(${e.text.scale.x},1)`),r.appendChild(t)})),[t,t]}}]),n}(s2);function S8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w8(r.key),r)}}function w8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function A8(){return A8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},A8.apply(this,arguments)}function O8(e,t){return(O8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x8(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=k8(e);if(t){var i=k8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function k8(e){return(k8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I8(e,t,n,r,i,o,a,s,l,c){const u=c?e._xScale(n.yStart):e._xScale(n.xStart),h=c?e._xScale(n.yEnd):e._xScale(n.xEnd),p=c?e._yScale(n.xStart):e._yScale(n.yStart),f=c?e._yScale(n.xEnd):e._yScale(n.yEnd),d=n.uid+c,m=h-u,g=f-p;let y={x:u,y:p,width:m,height:g};r&&(m<r||g<r)&&(y={x:u-r/2,y:p-r/2,width:r,height:r}),e.drawnRects[d]=y;const v=y.x+y.width,b=y.y+y.height;(y.x>i&&y.x<o||v>i&&v<o||y.y>a&&y.y<s||b>a&&b<s)&&(y.width>l||y.height>l)&&(t.drawRect(y.x,y.y,y.width,y.height),e.publish("annotationDrawn",{trackUuid:e.uuid,annotationUuid:d,viewPos:[y.x,y.y,y.width,y.height],dataPos:[n.xStart,n.xEnd,n.yStart,n.yEnd],importance:n.importance,info:{patternType:e.options.patternType}}))}let C8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O8(e,t)}(n,e);var t=x8(n);function n(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),(e=t.call(this,...i)).drawnRects={};const{publish:a,subscribe:s,unsubscribe:l}=jb();return e.publish=a,e.subscribe=s,e.unsubscribe=l,e}return function(e,t,n){t&&S8(e.prototype,t),n&&S8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let n=Math.max(e,t);return n=Math.min(n,this.maxZoom),n}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.remoteId)))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Fw.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},A8(k8(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){const t=e.graphics;if(!t)return;t.clear();const n=CS(this.options.rectangleDomainStrokeColor||"black"),r=CS(this.options.rectangleDomainFillColor||"grey");t.lineStyle(typeof this.options.rectangleDomainStrokeWidth<"u"?this.options.rectangleDomainStrokeWidth:1,n,typeof this.options.rectangleDomainStrokeOpacity<"u"?this.options.rectangleDomainStrokeOpacity:1),t.beginFill(r,typeof this.options.rectangleDomainFillOpacity<"u"?this.options.rectangleDomainFillOpacity:.4),t.alpha=this.options.rectangleDomainOpacity||.5;const i=this.options.minSquareSize&&"none"!==this.options.minSquareSize?+this.options.minSquareSize:0,o=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,a=this._xScale.range()[0],s=this._xScale.range()[1],l=this._yScale.range()[0],c=this._yScale.range()[1];e.tileData.length&&e.tileData.filter((e=>!(e.uid in this.drawnRects))).forEach((e=>{I8(this,t,e,i,a,s,l,c,o,"yes"===this.options.flipDiagonal),this.options.flipDiagonal&&"copy"===this.options.flipDiagonal&&I8(this,t,e,i,a,s,l,c,o,!0)}))}},{key:"exportSVG",value:function(){let e=null,t=null;A8(k8(n.prototype),"exportSVG",this)?[t,e]=A8(k8(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);for(const n of[!0,!1])for(const e of this.visibleAndFetchedTiles())!e.tileData||!e.tileData.length||e.tileData.forEach((t=>{const i=t.uid+n,o=document.createElement("g");if(o.setAttribute("transform",`translate(${e.graphics.position.x},${e.graphics.position.y})scale(${e.graphics.scale.x},${e.graphics.scale.y})`),r.appendChild(o),i in this.drawnRects){const e=this.drawnRects[i],t=document.createElement("rect");t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("fill",this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey"),t.setAttribute("opacity",.3),t.style.stroke="black",t.style.strokeWidth="1px",o.appendChild(t)}}));return[t,t]}},{key:"setPosition",value:function(e){A8(k8(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale().domain()[0]===e.domain()[0]&&this.xScale().domain()[1]===e.domain()[1]&&this.yScale().domain()[0]===t.domain()[0]&&this.yScale().domain()[1]===t.domain()[1]||(this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw())}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(O1);function P8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D8(r.key),r)}}function D8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function R8(){return R8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},R8.apply(this,arguments)}function N8(e,t){return(N8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M8(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=j8(e);if(t){var i=j8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L8(e)}(this,n)}}function L8(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j8(e){return(j8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let B8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N8(e,t)}(n,e);var t=M8(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{pubSub:o}=e;i.drawnAnnotations={},i.drawnAnnoGfx={},i.selectedAnno=null,i.options.minSquareSize=+i.options.minSquareSize;const{publish:a,subscribe:s,unsubscribe:l}=jb();return i.publish=a,i.subscribe=s,i.unsubscribe=l,i.sT=0,i.annoSelectedBound=i.annoSelected.bind(L8(i)),i.pubSubs.push(o.subscribe("annoSelected",i.annoSelectedBound)),i}return function(e,t,n){t&&P8(e.prototype,t),n&&P8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"minX",get:function(){return this.tilesetInfo&&this.tilesetInfo.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){return this.tilesetInfo&&this.tilesetInfo.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){return this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1])||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}},{key:"projection",value:function(e){let[t,n]=e;return[this._xScale(t),this._yScale(n)]}},{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=Fw.calculateZoomLevel(this._yScale,this.minY,this.maxY);return cA(sA(e,t),this.maxZoom)}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=Fw.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);const e=this.zoomLevel,t=[];for(let n=0;n<this.xTiles.length;n++)for(let r=0;r<this.yTiles.length;r++)t.push([e,this.xTiles[n],this.yTiles[r]]);this.setVisibleTiles(t)}},{key:"draw",value:function(){this.drawnAnnotations={},R8(j8(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.graphics)return;e.graphics.__tile__=e;const r=e.graphics;r.clear(),this.setBorderStyle(r),this.setFill(r),r.alpha=+this.options.rectangleDomainOpacity,e.tileData.length&&e.tileData.filter((e=>!(e.uid in this.drawnAnnotations)||t)).forEach((e=>{const[t,i]=this.projection([e.xStart,e.yStart]),[o,a]=this.projection([e.xEnd,e.yEnd]);this.options.exclude&&this.options.exclude.indexOf(e.uid)>=0||this.drawAnnotation(this.prepAnnotation(r,e.uid,t,i,o-t,a-i,e),n)}))}},{key:"prepAnnotation",value:function(e,t,n,r,i,o,a){let s;try{s=JSON.parse(a.fields)}catch{}return{graphics:e,id:a.id,uid:t,annotation:{x:n,y:r,width:i,height:o},dataPos:[a.xStart,a.xEnd,a.yStart,a.yEnd],importance:a.importance,info:s}}},{key:"drawAnnotation",value:function(e,t){let{graphics:n,id:r,uid:i,annotation:o,dataPos:a,importance:s,info:l}=e;this.options.minSquareSize&&(o.width<this.options.minSquareSize||o.height<this.options.minSquareSize)&&(o.x=(o.x+o.width)/2,o.y=(o.y+o.height)/2,o.width=this.options.minSquareSize,o.height=this.options.minSquareSize),this.drawnAnnotations[i]=o;const c=[o.x,o.y,o.width,o.height];let u=this.drawnAnnoGfx[i];u||(u=new nS.PIXI.Graphics,this.drawnAnnoGfx[i]=u),-1===n.children.indexOf(u)&&n.addChild(u),this._drawRect(u,c,i),n.interactive=!0,u.interactive=!0,u.buttonMode=!0;const h={id:r,uid:i,dataPos:a,importance:s,info:l,viewPos:[o.x,o.y,o.x+o.width,o.y+o.height]};u.mouseover=()=>this.hover(u,c,i),u.mouseout=()=>this.blur(u,c,i),u.mousedown=()=>this.mouseDown(),u.mouseup=e=>this.mouseUp(u,c,i,e,h),t||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:i,annotationId:r,viewPos:c,dataPos:a,importance:s,info:l})}},{key:"_drawRect",value:function(e,t,n){let r=this.options.rectangleDomainStrokeColor,i=this.options.rectangleDomainStrokeWidth,o=this.options.rectangleDomainStrokeOpacity,a=this.options.rectangleDomainFillColor,s=this.options.rectangleDomainFillOpacity;this.hoveredAnno===n&&(r=this.options.hoverColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.hoverColor,s=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===n&&(r=this.options.selectColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.selectColor,s=sA(.33,this.options.rectangleDomainFillOpacity)),e.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(e,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(e,a,0),e.drawRect(...t)),this.setBorderStyle(e,r,i,o),this.setFill(e,a,s),e.drawRect(...t),e.__viewPos__=t}},{key:"context",value:function(e,t,n){return r=>r(e,t,n)}},{key:"click",value:function(e,t,n,r,i){this.select(e,t,n),this.pubSub.publish("app.click",{type:"annotation",event:r,payload:i})}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(e,t,n,r,i){performance.now()-this.sT<=250&&this.click(e,t,n,r,i)}},{key:"hover",value:function(e,t,n){this.hoveredAnno=n,this._drawRect(e,t,n),this.animate()}},{key:"focus",value:function(e,t,n){this._drawRect(e,t,n),this.animate()}},{key:"blur",value:function(e,t,n){this.hoveredAnno=null,this._drawRect(e,t,n),this.animate()}},{key:"select",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null,o=null;this.selectedAnno&&(i=this.selectedAnno.graphics,o=this.selectedAnno.uid),this.selectedAnno={graphics:e,uid:n},this.focus(e,t,n),this.options.onSelect&&!r&&(window[this.options.onSelect](n),this.pubSub.publish("annoSelected",n)),i&&o&&this.blur(i,i.__viewPos__,o)}},{key:"unselect",value:function(){const e=this.selectedAnno.graphics,t=this.selectedAnno.uid;this.selectedAnno=null,this.blur(e,e.__viewPos__,t)}},{key:"annoSelected",value:function(e){if(!this.selectedAnno||this.selectedAnno.uid!==e){this.selectedAnno&&this.unselect();const t=this.drawnAnnoGfx[e];t&&this.select(t,t.__viewPos__,e,!0)}}},{key:"exportSVG",value:function(){let e=null,t=null;R8(j8(n.prototype),"exportSVG",this)?[t,e]=R8(j8(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");return r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r),this.visibleAndFetchedTiles().filter((e=>e.tileData&&e.tileData.length)).map((e=>({graphics:e.graphics,td:e.tileData}))).forEach((e=>{let{td:t,graphics:n}=e;const i=document.createElement("g");if(i.setAttribute("transform",`translate(${n.position.x},${n.position.y})scale(${n.scale.x},${n.scale.y})`),r.appendChild(i),t.uid in this.drawnAnnotations){const e=this.drawnAnnotations[t.uid],n=document.createElement("rect");n.setAttribute("x",e.x),n.setAttribute("y",e.y),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttribute("fill",this.options.fillColor||"grey"),n.setAttribute("opacity",.3),n.style.stroke=this.options.fillColor||"grey",n.style.strokeWidth="1px",i.appendChild(n)}})),[t,t]}},{key:"setBorderStyle",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainStrokeColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainStrokeWidth,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.rectangleDomainStrokeOpacity;e.lineStyle(typeof n<"u"?n:1,CS(t||"black"),typeof r<"u"?r:1)}},{key:"setFill",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainFillColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainFillOpacity;e.beginFill(CS(t||"grey"),typeof n<"u"?n:.4)}},{key:"setPosition",value:function(e){R8(j8(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}}]),n}(O1);function F8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G8(r.key),r)}}function G8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function H8(){return H8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},H8.apply(this,arguments)}function U8(e,t){return(U8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z8(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=V8(e);if(t){var i=V8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function V8(e){return(V8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let X8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U8(e,t)}(n,e);var t=z8(n);function n(e,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,e,r)).pubSub=e.pubSub,o.options=r,o.isVertical=i,o.rects={},o.defaultColor=qu("red"),o}return function(e,t,n){t&&F8(e.prototype,t),n&&F8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"draw",value:function(){const e=typeof this.options.minRectWidth<"u"?this.options.minRectWidth:10,t=typeof this.options.fill<"u"?qu(this.options.fill):this.defaultColor,r=typeof this.options.fillOpacity<"u"?+this.options.fillOpacity:.2,i=typeof this.options.stroke<"u"?qu(this.options.stroke):this.defaultColor,o=typeof this.options.strokeWidth<"u"?+this.options.strokeWidth:1,a=typeof this.options.strokeOpacity<"u"?+this.options.strokeOpacity:0;let s;this.options.strokePos&&this.options.strokePos.length&&(s=Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]),H8(V8(n.prototype),"draw",this).call(this);const l=this.pMain;l.clear();const c=performance.now();this.options.regions.forEach((n=>{const u=`${n[0]}-${n[1]}`;this.rects[u]||(this.rects[u]={graphics:new nS.PIXI.Graphics},l.addChild(this.rects[u].graphics)),this.rects[u].timeStamp=c;const h=qu(n[2])||t;let p=qu(n[3])||i;p||(p=h);const f=nS.PIXI.utils.rgb2hex([h.r/255,h.g/255,h.b/255]),d=nS.PIXI.utils.rgb2hex([p.r/255,p.g/255,p.b/255]);s?(l.lineStyle(1,d,0),l.beginFill(d,+n[5]||a)):(l.lineStyle(o,d,+n[5]||a),l.beginFill(f,+n[4]||r));const m=this.isVertical?this._yScale:this._xScale;let g=m(+n[0]);const y=m(+n[1]);let v=y-g;const b=typeof n[6]<"u"?n[6]:e;v<b&&(g=(g+y)/2-b/2,v=b),s?(l.lineStyle(1,d,0),l.beginFill(d,+n[5]||a),s.forEach((e=>{("top"===e||"around"===e)&&(this.isVertical?l.drawRect(0,g,o,v):l.drawRect(g,0,v,o)),("right"===e||"around"===e)&&(this.isVertical?l.drawRect(0,g,this.dimensions[0],o):l.drawRect(g,0,o,this.dimensions[1])),("bottom"===e||"around"===e)&&(this.isVertical?l.drawRect(this.dimensions[0]-o,g,o,v):l.drawRect(g,this.dimensions[1]-o,v,o)),("left"===e||"around"===e)&&(this.isVertical?l.drawRect(0,g+v-o,this.dimensions[0],o):l.drawRect(g+v-o,0,o,this.dimensions[1]))}))):l.lineStyle(o,d,+n[5]||a),this.rects[u].graphics.clear(),this.rects[u].graphics.interactive=!0,this.rects[u].graphics.buttonMode=!0,l.beginFill(f,+n[4]||r),this.isVertical?(l.drawRect(0,g,this.dimensions[0],v),this.rects[u].graphics.hitArea=new nS.PIXI.Rectangle(0,g,this.dimensions[0],v)):(l.drawRect(g,0,v,this.dimensions[1]),this.rects[u].graphics.hitArea=new nS.PIXI.Rectangle(g,0,v,this.dimensions[1])),this.rects[u].graphics.mousedown=()=>{this.rects[u].mouseDownTime=performance.now()},this.rects[u].graphics.mouseup=e=>{performance.now()-this.rects[u].mouseDownTime<300&&this.pubSub.publish("app.click",{type:"annotation",event:e,payload:n})}})),Object.values(this.rects).filter((e=>e.timeStamp!==c)).forEach((e=>l.removeChild(e.graphics)))}},{key:"setPosition",value:function(e){H8(V8(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}]),n}(UQ);function Y8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W8(r.key),r)}}function W8(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function q8(){return q8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},q8.apply(this,arguments)}function $8(e,t){return($8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K8(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Q8(e);if(t){var i=Q8(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Q8(e){return(Q8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Z8=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$8(e,t)}(n,e);var t=K8(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).drawnRects=new Set,i.pMain=i.pMobile,i}return function(e,t,n){t&&Y8(e.prototype,t),n&&Y8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let n=Math.max(e,t);return n=Math.min(n,this.maxZoom),this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const e=this._xScale.copy();e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=Fw.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Fw.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const t=this.xTiles,n=this.yTiles,r=this.zoomLevel,i=this.tilesetInfo.max_width/2**r,o=[];for(let a=0;a<t.length;a++)for(let e=a;e<n.length;e++){if((e-a-2)*(this._xScale(i)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const s=[r,t[a],n[e]];s.mirrored=!1,o.push(s)}this.setVisibleTiles(o)}},{key:"initTile",value:function(e){q8(Q8(n.prototype),"initTile",this).call(this,e),this.drawTile(e)}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),q8(Q8(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear();const n=CS(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),r=CS(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(t.lineStyle(1/this.pMain.scale.x,n,1),t.beginFill(r,.4),t.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,e.tileData.sort)for(const i of e.tileData){const e=this._refXScale(i.xStart),n=this._refXScale(i.xEnd),r=this._refYScale(i.yStart),o=this._refYScale(i.yEnd),a=i.uid;this.drawnRects.has(a)||(this.drawnRects.add(a),t.drawRect(e,r,n-e,o-r),t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0)}}},{key:"setPosition",value:function(e){q8(Q8(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(e,t){q8(Q8(n.prototype),"refScalesChanged",this).call(this,e,t);for(const n in this.fetchedTiles){const e=this.fetchedTiles[n];if(e.sprite){const t=e.graphics;t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0}}}},{key:"zoomed",value:function(e,t,r,i,o){q8(Q8(n.prototype),"zoomed",this).call(this,e,t,r,i,o),this.pMain.position.x=i,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=r,this.pMain.scale.y=r,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-r,this.pMain.position.y=this.position[1]),this.draw()}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(O1);function J8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e9(r.key),r)}}function e9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function t9(){return t9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},t9.apply(this,arguments)}function n9(e,t){return(n9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=i9(e);if(t){var i=i9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function i9(e){return(i9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let o9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n9(e,t)}(n,e);var t=r9(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).drawnRects=new Set,i}return function(e,t,n){t&&J8(e.prototype,t),n&&J8(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let n=Math.max(e,t);return n=Math.min(n,this.maxZoom),n}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Fw.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"initTile",value:function(e){}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.drawnRects.clear(),t9(i9(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear();const n=CS("green");t.lineStyle(1,255,1),t.beginFill(n,.8),t.alpha=.5;for(const r of e.tileData){const e=this._xScale(r.xStart),n=this._xScale(r.xEnd),i=this._yScale(r.yStart),o=this._yScale(r.yEnd),a=r.uid;if(this.drawnRects.has(a))continue;this.drawnRects.add(a);const s=6,l=6;let c=o-i,u=n-e;const h=(e+n)/2,p=(i+o)/2;c<s&&(c=s),u<l&&(u=l),t.drawRect(h-c/2,p-u/2,c,u)}}},{key:"setPosition",value:function(e){t9(i9(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}}]),n}(O1);function a9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lQ;const r={absToChr:e=>r.chrPositions?FE(e,r):null,chrToAbs:function(){let[e,t]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.chrPositions?VE(e,t,r):null}};return Fw.text(e,((e,n)=>{if(e)t&&t(null);else{const e=xA(lw(n));Object.keys(e).forEach((t=>{r[t]=e[t]})),t&&t(r)}}),n).then((()=>r))}function s9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l9(r.key),r)}}function l9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let c9=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.chromInfo=t,this.chromInfoBisector=nc((e=>e.pos)).left}return function(e,t,n){t&&s9(e.prototype,t),n&&s9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"scalesToPositionText",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===this.chromInfo||!e||!t)return"";const r=FE(e.domain()[0],this.chromInfo),i=FE(e.domain()[1],this.chromInfo),o=FE(t.domain()[0],this.chromInfo),a=FE(t.domain()[1],this.chromInfo);let s=null;const l=xp(",d");return s=r[0]!==i[0]?`${r[0]}:${l(Math.floor(r[1]))}-${i[0]}:${l(Math.ceil(i[1]))}`:`${r[0]}:${l(Math.floor(r[1]))}-${l(Math.ceil(i[1]))}`,n&&(o[0]!==a[0]?s+=` & ${o[0]}:${l(Math.floor(o[1]))}-${a[0]}:${l(Math.ceil(a[1]))}`:s+=` & ${o[0]}:${l(Math.floor(o[1]))}-${l(Math.ceil(a[1]))}`),(r[2]<=0||i[2]>0||n&&(o[2]<=0||a[2]>0))&&(s+=` [offset ${r[2]},${i[2]}`,n&&(s+=`:${o[2]},${a[2]}`),s+="]"),s}},{key:"convertNumberNotation",value:function(e){let t=e;if(!t.includes("M",t.length-1)&&!t.includes("K",t.length-1))return t;let n=0,r=0;if(t.includes("M",t.length-1)?(n=6,t=t.replace("M","")):(n=3,t=t.replace("K","")),Number.isNaN(+t))return e;t=(+t).toString(),t.includes(".")&&(r=t.length-1-t.indexOf("."),t=(+t.replace(".","")).toString());const i=n-r;return i<0?e:(t+="0".repeat(i),t)}},{key:"parsePosition",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.split(":");let r=null,i=0;n.length>1?(r=n[0],i=+this.convertNumberNotation(n[1].replace(/,/g,""))):n[0]in this.chromInfo.chrPositions?(r=n[0],i=0,null!==t&&(i=+this.chromInfo.chromLengths[r])):(i=+this.convertNumberNotation(n[0].replace(/,/g,"")),r=null,t&&(r=t));let o=null;return null===r?(r=t,o=i):r in this.chromInfo.chrPositions&&(o=this.chromInfo.chrPositions[r].pos+i),[r,i,o]}},{key:"matchRangesToLarger",value:function(e,t){if(e[1]-e[0]<t[1]-t[0]){const n=t[1]-t[0]-(e[1]-e[0]);return[[e[0]-n/2,e[1]+n/2],t]}const n=e[1]-e[0]-(t[1]-t[0]);return[e,[t[0]-n/2,t[1]+n/2]]}},{key:"getSearchRange",value:function(e){if(0===e.length)return null;let t=e.split("-");t=t.filter((e=>e.length>0));let n=null;if(0===t[0].indexOf("-")&&(t[0]=t[0].slice(3,t[0].length)),t.length>1){let[e,n,r]=this.parsePosition(t[0]),[i,o,a]=this.parsePosition(t[1],e);const s=[r,a];[e,n,r]=this.parsePosition(t[1]),[i,o,a]=this.parsePosition(t[0],e),null===e&&null!==i&&([e,n,r]=this.parsePosition(t[1],i));const l=[r,a];return l[1]-l[0]>s[1]-s[0]?l:s}if(t[0]in this.chromInfo.chrPositions){const e=+this.chromInfo.chrPositions[t[0]].pos;n=[e,e+ +this.chromInfo.chromLengths[t[0]]]}else{const[e,r,i]=this.parsePosition(t[0]);n=[i-8e6,i+8e6]}return n[0]>n[1]?[n[1],n[0]]:n}},{key:"parseOffset",value:function(e){const t=e.split(":");if(0===t.length)return[[0,0],[0,0]];if(1===t.length){const e=t[0].split(",");return[[+e[0],+e[1]],[0,0]]}const n=t[0].split(","),r=t[1].split(",");return[[+n[0],+n[1]],[+r[0],+r[1]]]}},{key:"searchPosition",value:function(e){let t=null,n=null;e=e.trim();const r=/\[offset (.+?)\]/.exec(e);let i=[[0,0],[0,0]];r&&(e=e.replace(r[0],""),i=this.parseOffset(r[1]));const o=e.split(" & ");return o.length>1?(t=this.getSearchRange(o[0].split(" ")[0]),n=this.getSearchRange(o[1].split(" ")[0])):t=this.getSearchRange(o[0]),null!==t&&null!==n&&([t,n]=this.matchRangesToLarger(t,n)),t&&(t[0]+=i[0][0],t[1]+=i[0][1]),n&&(n[0]+=i[1][0],n[1]+=i[1][1]),[t,n]}}]),e}();function u9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h9(r.key),r)}}function h9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function p9(){return p9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},p9.apply(this,arguments)}function f9(e,t){return(f9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=m9(e);if(t){var i=m9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function m9(e){return(m9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let g9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f9(e,t)}(n,e);var t=d9(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{dataConfig:o,animate:a,pubSub:s}=e;i.searchField=null,i.chromInfo=null,i.animate=a;return a9(`${o.server}/chrom-sizes/?id=${o.tilesetUid}`,(e=>{i.chromInfo=e,i.searchField=new c9(i.chromInfo),i.draw(),i.texts=[];for(let t=0;t<i.chromInfo.cumPositions.length;t++){const e=[];for(let n=0;n<i.chromInfo.cumPositions.length;n++){const r=`${i.chromInfo.cumPositions[t].chr}/${i.chromInfo.cumPositions[n].chr}`,o=new nS.PIXI.Text(r,{fontSize:"14px",fontFamily:"Arial",fill:"red"});o.anchor.x=.5,o.anchor.y=.5,o.visible=!1,o.hashValue=Math.random(),e.push(o),i.pMain.addChild(o)}i.texts.push(e)}i.draw(),i.animate()}),s),i}return function(e,t,n){t&&u9(e.prototype,t),n&&u9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"draw",value:function(){const e=[];if(!this.texts||!this.searchField)return;const t=FE(this._xScale.domain()[0],this.chromInfo),n=FE(this._xScale.domain()[1],this.chromInfo),r=FE(this._yScale.domain()[0],this.chromInfo),i=FE(this._yScale.domain()[1],this.chromInfo);for(let o=0;o<this.texts.length;o++)for(let e=0;e<this.texts.length;e++)this.texts[o][e].visible=!1;for(let o=t[3];o<=n[3];o++)for(let t=r[3];t<=i[3];t++){const n=this.chromInfo.cumPositions[o],r=this.chromInfo.cumPositions[t],i=n.pos+this.chromInfo.chromLengths[n.chr]/2,a=r.pos+this.chromInfo.chromLengths[r.chr]/2,s=this._xScale(i),l=this._yScale(a),c=this.texts[o][t];c.x=s,c.y=l,c.updateTransform();const u=c.getBounds(),h=u.width/2,p=u.height/2;s+h>this.dimensions[0]?c.x-=s+h-this.dimensions[0]:s-h<0&&(c.x-=s-h),l+p>this.dimensions[1]?c.y-=l+p-this.dimensions[1]:l-p<0&&(c.y-=l-p),c.visible=!0,e.push({importance:this.texts[o][t].hashValue,text:this.texts[o][t],caption:null})}this.hideOverlaps(e)}},{key:"hideOverlaps",value:function(e){let t=[];t=e.map((e=>{const t=e.text;t.updateTransform();const n=t.getBounds();return[n.x,n.y,n.x+n.width,n.y+n.height]})),I4(t,((t,n)=>{e[t].importance>e[n].importance?e[n].text.visible=0:e[t].text.visible=0}))}},{key:"setPosition",value:function(e){p9(m9(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}]),n}(UQ);function y9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v9(r.key),r)}}function v9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b9(){return b9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},b9.apply(this,arguments)}function _9(e,t){return(_9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=E9(e);if(t){var i=E9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function E9(e){return(E9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let S9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_9(e,t)}(n,e);var t=T9(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{chromInfoPath:o,dataConfig:a,animate:s,pubSub:l,orientation:c="2d",isOverlay:u=!1}=e;i.searchField=null,i.chromInfo=null,i.animate=s,i.orientation=c,i.isOverlay=u;let h=o;return h||(h=`${a.server}/chrom-sizes/?id=${a.tilesetUid}`),a9(h,(e=>{i.chromInfo=e,i.searchField=new c9(i.chromInfo),i.texts=[],i.lineGraphics=new nS.PIXI.Graphics,i.lineGraphics1dH=new nS.PIXI.Graphics,i.lineGraphics1dV=new nS.PIXI.Graphics,i.lineGraphics2d=new nS.PIXI.Graphics,i.mask1dH=new nS.PIXI.Graphics,i.mask1dV=new nS.PIXI.Graphics,i.mask2d=new nS.PIXI.Graphics,i.lineGraphics.addChild(i.lineGraphics1dH),i.lineGraphics1dH.addChild(i.mask1dH),i.lineGraphics.addChild(i.lineGraphics1dV),i.lineGraphics1dV.addChild(i.mask1dV),i.lineGraphics.addChild(i.lineGraphics2d),i.lineGraphics2d.addChild(i.mask2d),i.pMain.addChild(i.lineGraphics),i.draw(),i.animate()}),l),i}return function(e,t,n){t&&y9(e.prototype,t),n&&y9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"drawLines",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.orientation,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.lineGraphics;this.isOverlay&&"1d-horizontal"===e&&(r=this.lineGraphics1dH),this.isOverlay&&"1d-vertical"===e&&(r=this.lineGraphics1dV),this.isOverlay&&"2d"===e&&(r=this.lineGraphics2d);const i=CS(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),o=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;r.lineStyle(o,i,1),("2d"===e||"1d-horizontal"===e)&&(r.moveTo(this._xScale(0)+t,n),r.lineTo(this._xScale(0)+t,this.dimensions[1]+n)),("2d"===e||"1d-vertical"===e)&&(r.moveTo(t,this._yScale(0)+n),r.lineTo(this.dimensions[0]+t,this._yScale(0)+n));for(let a=0;a<this.chromInfo.cumPositions.length;a++){const i=this.chromInfo.cumPositions[a],o=i.pos+ +this.chromInfo.chromLengths[i.chr]+1;("2d"===e||"1d-horizontal"===e)&&(r.moveTo(this._xScale(o)+t,n),r.lineTo(this._xScale(o)+t,this.dimensions[1]+n)),("2d"===e||"1d-vertical"===e)&&(r.moveTo(t,this._yScale(o)+n),r.lineTo(this.dimensions[0]+t,this._yScale(o)+n))}}},{key:"draw",value:function(){if(this.texts&&this.searchField)if(this.lineGraphics.clear(),this.isOverlay){this.lineGraphics1dH.clear(),this.lineGraphics1dV.clear(),this.lineGraphics2d.clear(),this.mask1dH.clear(),this.mask1dV.clear(),this.mask2d.clear(),this.mask1dH.beginFill(16777215),this.mask1dV.beginFill(16777215),this.mask2d.beginFill(16711680);for(let e=0;e<this.options.orientationsAndPositions.length;e++){const t=this.options.orientationsAndPositions[e].orientation,{left:n,top:r,width:i,height:o}=this.options.orientationsAndPositions[e].position;"1d-horizontal"===t&&this.mask1dH.drawRect(n,r,i,o),"1d-vertical"===t&&this.mask1dV.drawRect(n,r,i,o),"2d"===t&&this.mask2d.drawRect(n,r,i,o),this.drawLines(t,n,r)}this.lineGraphics1dH.mask=this.mask1dH,this.lineGraphics1dV.mask=this.mask1dV,this.lineGraphics2d.mask=this.mask2d}else this.drawLines()}},{key:"setPosition",value:function(e){b9(E9(n.prototype),"setPosition",this).call(this,e),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"createSvgLine",value:function(e,t,n,r,i,o){const a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",t),a.setAttribute("y1",n),a.setAttribute("y2",r),a.setAttribute("stroke",i),a.setAttribute("stroke-width",o),a}},{key:"drawLinesSvg",value:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",s=this.options.lineStrokeWidth;if("2d"===t||"1d-vertical"===t){const t=this._yScale(0);t>0&&t<o+r&&e.appendChild(this.createSvgLine(i,n+i,t+o,t+o,a,s))}if("2d"===t||"1d-horizontal"===t){const t=this._xScale(0);t>0&&t<i+n&&e.appendChild(this.createSvgLine(t+i,t+i,o,r+o,a,s))}for(let l=0;l<this.chromInfo.cumPositions.length;l++){const c=this.chromInfo.cumPositions[l],u=c.pos+ +this.chromInfo.chromLengths[c.chr]+1;if("2d"===t||"1d-vertical"===t){const t=this._yScale(u);t>0&&t<o+r&&e.appendChild(this.createSvgLine(i,n+i,t+o,t+o,a,s))}if("2d"===t||"1d-horizontal"===t){const t=this._xScale(u);t>0&&t<i+n&&e.appendChild(this.createSvgLine(t+i,t+i,o,r+o,a,s))}}}},{key:"exportSVG",value:function(){let e=null,t=null;b9(E9(n.prototype),"exportSVG",this)?[t,e]=b9(E9(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");if(e.appendChild(r),t.setAttribute("id","ChromosomeGrid"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),!this.chromInfo)return[t,e];if(this.isOverlay)for(let n=0;n<this.options.orientationsAndPositions.length;n++){const e=this.options.orientationsAndPositions[n].orientation,{left:t,top:i,width:o,height:a}=this.options.orientationsAndPositions[n].position;this.drawLinesSvg(r,e,o,a,t,i)}else this.drawLinesSvg(r,this.orientation,...this.dimensions);return[t,e]}}]),n}(UQ);function w9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A9(r.key),r)}}function A9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function O9(){return O9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},O9.apply(this,arguments)}function x9(e,t){return(x9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=I9(e);if(t){var i=I9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function I9(e){return(I9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let C9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x9(e,t)}(n,e);var t=k9(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{chromInfoPath:o,pubSub:a}=e;return i.pubSub=a,i.rects={},a9(o,(e=>{i.chromInfo=e,i.draw()}),i.pubSub),i}return function(e,t,n){t&&w9(e.prototype,t),n&&w9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"draw",value:function(){if(!this.chromInfo)return;const e=this.options.minRectWidth?this.options.minRectWidth:10,t=this.options.minRectWidth?this.options.minRectHeight:10;O9(I9(n.prototype),"draw",this).call(this);const r=this.pMain;r.clear();const i=performance.now();this.options.regions.forEach((n=>{const o=n.slice(0,6).join("-");this.rects[o]||(this.rects[o]={graphics:new nS.PIXI.Graphics},r.addChild(this.rects[o].graphics)),this.rects[o].timeStamp=i;const a=qu(n[6]);let s=qu(n[7]);s||(s=a);const l=nS.PIXI.utils.rgb2hex([a.r/255,a.g/255,a.b/255]),c=nS.PIXI.utils.rgb2hex([s.r/255,s.g/255,s.b/255]);r.lineStyle(1,c,s.opacity),r.beginFill(l,a.opacity);let u=this._xScale(this.chromInfo.chrPositions[n[0]].pos+ +n[1]);const h=this._xScale(this.chromInfo.chrPositions[n[0]].pos+ +n[2]);let p=this._yScale(this.chromInfo.chrPositions[n[3]].pos+ +n[4]);const f=this._yScale(this.chromInfo.chrPositions[n[3]].pos+ +n[5]);let d=h-u,m=f-p;const g=typeof n[8]<"u"?n[8]:e,y=typeof n[9]<"u"?n[9]:t;d<g&&(u=(u+h)/2-g/2,d=g),m<y&&(p=(p+f)/2-y/2,m=y),r.drawRect(u,p,d,m),this.rects[o].graphics.clear(),this.rects[o].graphics.interactive=!0,this.rects[o].graphics.buttonMode=!0,this.rects[o].graphics.hitArea=new nS.PIXI.Rectangle(u,p,d,m),this.rects[o].graphics.mousedown=()=>{this.rects[o].mouseDownTime=performance.now()},this.rects[o].graphics.mouseup=e=>{performance.now()-this.rects[o].mouseDownTime<300&&this.pubSub.publish("app.click",{type:"annotation",event:e,payload:n})}}))}},{key:"setPosition",value:function(e){O9(I9(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}]),n}(UQ);function P9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D9(r.key),r)}}function D9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function R9(){return R9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},R9.apply(this,arguments)}function N9(e,t){return(N9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=j9(e);if(t){var i=j9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L9(e)}(this,n)}}function L9(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j9(e){return(j9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const B9=7829367;let F9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N9(e,t)}(n,e);var t=M9(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{dataConfig:o,animate:a,chromInfoPath:s,isShowGlobalMousePosition:l}=e;i.searchField=null,i.chromInfo=null,i.dataConfig=o,i.pTicks=new nS.PIXI.Graphics,i.pMain.addChild(i.pTicks),i.gTicks={},i.tickTexts={},i.options=r,i.isShowGlobalMousePosition=l,i.textFontSize=12,i.textFontFamily="Arial",i.textFontColor="#808080",i.textStrokeColor=i.getTheme()===eS?"#000000":"#ffffff",i.pixiTextConfig={fontSize:+i.options.fontSize?+i.options.fontSize+"px":`${i.textFontSize}px`,fontFamily:i.textFontFamily,fill:i.options.color||i.textFontColor,lineJoin:"round",stroke:i.options.stroke||i.textStrokeColor,strokeThickness:2},i.stroke=CS(i.pixiTextConfig.stroke),i.tickWidth=200,i.tickHeight=6,i.tickTextSeparation=2,i.tickColor=i.options.tickColor?CS(i.options.tickColor):B9,i.animate=a,i.pubSubs=[],i.options.showMousePosition&&!i.hideMousePosition&&(i.hideMousePosition=RA(L9(i),i.is2d,i.isShowGlobalMousePosition()));let c=s;return c||(c=`${o.server}/chrom-sizes/?id=${o.tilesetUid}`),a9(c,(e=>{i.chromInfo=e,i.searchField=new c9(i.chromInfo),i.rerender(i.options,!0),i.draw(),i.animate()}),i.pubSub),i}return function(e,t,n){t&&P9(e.prototype,t),n&&P9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initBoundsTicks",value:function(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new nS.PIXI.Graphics,this.leftBoundTick=new nS.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new nS.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}},{key:"initChromLabels",value:function(){if(this.chromInfo){this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new nS.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren();for(let e=0;e<this.chromInfo.cumPositions.length;e++){const t=this.chromInfo.cumPositions[e].chr;this.gTicks[t]=new nS.PIXI.Graphics,this.tickTexts[t]||(this.tickTexts[t]=[]);const n=new nS.PIXI.Text(t,this.pixiTextConfig);n.hashValue=Math.random(),this.pTicks.addChild(n),this.pTicks.addChild(this.gTicks[t]),this.texts.push(n)}}}},{key:"rerender",value:function(e,t){const r=JSON.stringify(e);!t&&r===this.prevOptions||(this.prevOptions=r,this.options=e,this.tickTexts={},this.pixiTextConfig.fontSize=+this.options.fontSize?+this.options.fontSize+"px":this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=CS(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?CS(this.options.tickColor):B9,"ends"===this.options.tickPositions?this.initBoundsTicks():this.initChromLabels(),R9(j9(n.prototype),"rerender",this).call(this,e,t),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=RA(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"formatTick",value:function(e){const t=this._xScale.domain(),n=t[1]-t[0],r=Np(e,n),i=xp(","),o=kp(`,.${r}`,n);let a=i;return"si"===this.options.tickFormat?a=o:"plain"===this.options.tickFormat?a=i:"ends"===this.options.tickPositions&&(a=o),a(e)}},{key:"drawBoundsTicks",value:function(e,t){const n=this.gBoundTicks;n.clear(),n.lineStyle(1,0);const r=this.options.reverseOrientation?0:this.dimensions[1],i=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;n.moveTo(1,r),n.lineTo(1,i),n.moveTo(this.dimensions[0]-1,r),n.lineTo(this.dimensions[0]-1,i),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?i+this.tickTextSeparation:i-this.tickTextSeparation,this.leftBoundTick.text=`${e[0]}: ${this.formatTick(e[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text=`${t[0]}: ${this.formatTick(t[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?i+this.tickTextSeparation:i-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}},{key:"drawTicks",value:function(e){const t=this.gTicks[e.chr];t.visible=!0,t.clear();const n=+this.chromInfo.chromLengths[e.chr],r=Math.max(this._xScale(e.pos),0),i=Math.min(this._xScale(e.pos+n),this.dimensions[0]),o=(i-r)/this.tickWidth,a=Fp().domain([Math.max(1,this._xScale.invert(0)-e.pos),Math.min(n,this._xScale.invert(this.dimensions[0])-e.pos)]).range(r,i).ticks(o).filter((e=>Number.isInteger(e))),s=this.tickTexts[e.chr],l=this.options.fontIsLeftAligned?(+this.options.fontSize||this.textFontSize)/2:this.tickHeight,c=this.flipText?-1:1,u=this.options.fontIsLeftAligned?4*c:0;let h=this.options.fontIsLeftAligned?0:l+this.tickTextSeparation;for(this.options.reverseOrientation&&(h=this.dimensions[1]-h);s.length<a.length;){const t=new nS.PIXI.Text("",this.pixiTextConfig);s.push(t),this.gTicks[e.chr].addChild(t)}for(;s.length>a.length;){const t=s.pop();this.gTicks[e.chr].removeChild(t)}let p=0;for(;p<a.length;){s[p].visible=!0,s[p].anchor.x=this.options.fontIsLeftAligned?0:.5,s[p].anchor.y=this.options.reverseOrientation?0:1,this.flipText&&(s[p].scale.x=-1),s[p].x=this._xScale(e.pos+a[p])+u,s[p].y=this.dimensions[1]-h,s[p].text=0===a[p]?`${e.chr}: 1`:`${e.chr}: ${this.formatTick(a[p])}`;const n=this._xScale(e.pos+a[p]);s[p].tickLine=[n-1,this.dimensions[1],n-1,this.dimensions[1]-l-1];const r=this.options.reverseOrientation?0:this.dimensions[1],i=this.options.reverseOrientation?l:this.dimensions[1]-l;t.lineStyle(1,this.stroke),t.moveTo(n-1,r),t.lineTo(n-1,i-1),this.options.fontIsLeftAligned?(t.lineTo(n+2*c+1*c,i-1),t.lineTo(n+2*c+1*c,i+1),t.lineTo(n+1,i+1)):t.lineTo(n+1,i-1),t.lineTo(n+1,r),t.lineStyle(1,this.tickColor),t.moveTo(n,r),t.lineTo(n,i),this.options.fontIsLeftAligned&&t.lineTo(n+2*c,i),p+=1}for(;p<s.length;)s[p].visible=!1,p+=1;return a.length}},{key:"draw",value:function(){if(this.allTexts=[],!this.texts||!this.searchField)return;const e=FE(this._xScale.domain()[0],this.chromInfo),t=FE(this._xScale.domain()[1],this.chromInfo);if(!e||!t)return void console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);if("ends"===this.options.tickPositions){if(!this.gBoundTicks)return;return this.gBoundTicks.visible=!0,void this.drawBoundsTicks(e,t)}if(!this.pTicks)return;for(let r=0;r<this.texts.length;r++)this.texts[r].visible=!1,this.gTicks[this.chromInfo.cumPositions[r].chr].visible=!1;let n=this.options.fontIsLeftAligned?0:this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(n=this.dimensions[1]-n),Object.keys(this.chromInfo.chrPositions).forEach((e=>{if(this.tickTexts[e])for(let t=0;t<this.tickTexts[e].length;t++)this.tickTexts[e][t].visible=!1}));for(let r=e[3];r<=t[3];r++){const e=this.chromInfo.cumPositions[r],t=e.pos+this.chromInfo.chromLengths[e.chr]/2,i=this._xScale(t),o=this.texts[r];o.anchor.x=this.options.fontIsLeftAligned?0:.5,o.anchor.y=this.options.reverseOrientation?0:1,o.x=i,o.y=this.dimensions[1]-n,o.updateTransform(),this.flipText&&(o.scale.x=-1);const a=this.drawTicks(e);o.visible=a<=0,this.allTexts.push({importance:o.hashValue,text:o,caption:null})}this.hideOverlaps(this.allTexts)}},{key:"hideOverlaps",value:function(e){let t=[];t=e.map(((e,t)=>{let{text:n}=e;n.updateTransform();const r=n.getBounds();return[r.x,r.y,r.x+r.width,r.y+r.height]})),I4(t,((t,n)=>{e[t].importance>e[n].importance?e[n].text.visible=!1:e[t].text.visible=!1}))}},{key:"setPosition",value:function(e){R9(j9(n.prototype),"setPosition",this).call(this,e),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"exportSVG",value:function(){let e=null,t=null;R9(j9(n.prototype),"exportSVG",this)?[t,e]=R9(j9(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t),t.setAttribute("class","chromosome-labels");const r=document.createElement("g");return e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter((e=>e.text.visible)).forEach((e=>{const t=kA(e.text);r.appendChild(t)})),Object.values(this.tickTexts).forEach((e=>{e.filter((e=>e.visible)).forEach((e=>{let t=kA(e);r.appendChild(t),t=MA(e.x,this.options.reverseOrientation?0:this.dimensions[1],e.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const n=document.createElement("line");n.setAttribute("x1",e.tickLine[0]),n.setAttribute("y1",e.tickLine[1]),n.setAttribute("x2",e.tickLine[2]),n.setAttribute("y2",e.tickLine[3]),n.setAttribute("style","stroke: grey"),r.appendChild(t),r.appendChild(n)}))})),[t,e]}}]),n}(UQ);function G9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H9(r.key),r)}}function H9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function U9(){return U9=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X9(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},U9.apply(this,arguments)}function z9(e,t){return(z9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=X9(e);if(t){var i=X9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function X9(e){return(X9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Y9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z9(e,t)}(n,e);var t=V9(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{animate:o}=e;return i.pMain=i.pMobile,i.colorScale=wS,i.continuousScaling=!1,r&&r.colorRange&&(i.colorScale=YE(r.colorRange)),i.animate=o,i.options=r,i.pubSubs=[],i}return function(e,t,n){t&&G9(e.prototype,t),n&&G9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"rerender",value:function(e,t){U9(X9(n.prototype),"rerender",this).call(this,e,t),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){let e=null;if(this.tilesetInfo.resolutions){const t=Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),n=Fw.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);e=Math.min(t,n)}else{const t=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),n=Fw.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);e=Math.max(t,n),e=Math.min(e,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?e=Math.min(this.options.maxZoom,e):console.error("Invalid maxZoom on track:",this)),e}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const e=this._xScale.copy();if(e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){const t=this.tilesetInfo.resolutions.map((e=>+e)).sort(((e,t)=>t-e));this.xTiles=Fw.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=Fw.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=Fw.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Fw.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const t=this.xTiles,n=this.yTiles,r=this.zoomLevel,i=this.tilesetInfo.max_width/2**r,o=[];for(let a=0;a<t.length;a++)for(let e=a;e<n.length;e++){if((e-a-2)*(this._xScale(i)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const s=[r,t[a],n[e]];s.mirrored=!1,s.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",o.push(s)}this.setVisibleTiles(o)}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");t.width=256,t.height=256;const n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);const r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"setSpriteProperties",value:function(e,t,n,r){const{tileX:i,tileY:o,tileWidth:a,tileHeight:s}=this.getTilePosAndDimensions(t,n),l=i+a,c=o+s;e.width=this._refXScale(l)-this._refXScale(i),e.height=this._refYScale(c)-this._refYScale(o),e.x=this._refXScale(i),e.y=this._refYScale(o)}},{key:"pixDataFunction",value:function(e,t){if(t){const n=e.graphics,r=this.tileDataToCanvas(t.pixData),i="4"===nS.PIXI.VERSION[0]?nS.PIXI.Texture.fromCanvas(r,nS.PIXI.SCALE_MODES.NEAREST):nS.PIXI.Texture.from(r,{scaleMode:nS.PIXI.SCALE_MODES.NEAREST});e.sprite=new nS.PIXI.Sprite(i),e.canvas=r,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored),n.pivot.x=this._refXScale(0),n.pivot.y=this._refYScale(0),n.scale.x=-1/Math.sqrt(2),n.rotation=-3*Math.PI/4,n.scale.y=1/Math.sqrt(2),n.position.x=this._refXScale(0),n.position.y=0,n.removeChildren(),n.addChild(e.sprite)}this.renderingTiles.delete(e.tileId)}},{key:"refScalesChanged",value:function(e,t){U9(X9(n.prototype),"refScalesChanged",this).call(this,e,t);for(const n in this.fetchedTiles){const e=this.fetchedTiles[n];if(e.sprite){this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored);const t=e.graphics;t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0}}}},{key:"zoomed",value:function(e,t,r,i,o){U9(X9(n.prototype),"zoomed",this).call(this,e,t,r,i,o),U9(X9(n.prototype),"draw",this).call(this),this.pMain.position.x=i,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=r,this.pMain.scale.y=r,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-r,this.pMain.position.y=this.position[1])}},{key:"leftTrackDraw",value:function(){this.draw()}},{key:"exportSVG",value:function(){let e=null,t=null;[t,e]=U9(X9(n.prototype),"superSVG",this).call(this);const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const n of this.visibleAndFetchedTiles()){const e=document.createElement("g"),t=n.graphics,i=180*t.rotation/Math.PI,o=`translate(${t.position.x},${t.position.y}) rotate(${i}) scale(${t.scale.x},${t.scale.y}) translate(${-t.pivot.x},${-t.pivot.y})`;e.setAttribute("transform",o);const a=180*n.sprite.rotation/Math.PI,s=document.createElement("g");s.setAttribute("transform",`translate(${n.sprite.x},${n.sprite.y}) rotate(${a}) scale(${n.sprite.scale.x},${n.sprite.scale.y})`);const l=document.createElement("image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n.canvas.toDataURL()),l.setAttribute("width",256),l.setAttribute("height",256),s.appendChild(l),e.appendChild(s),r.appendChild(e)}const i=this.exportColorBarSVG();return e.appendChild(i),[t,t]}}]),n}(j1);function W9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q9(r.key),r)}}function q9(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function $9(e,t){return($9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K9(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Q9(e);if(t){var i=Q9(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Q9(e){return(Q9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Z9=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$9(e,t)}(n,e);var t=K9(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).tilesetInfo={},i.errorTextText=`Unknown track type: ${r.type}`,i}return function(e,t,n){t&&W9(e.prototype,t),n&&W9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"zoomed",value:function(){this.draw()}}]),n}(UQ);function J9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e7(r.key),r)}}function e7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function t7(e,t){return(t7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n7(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=i7(e);if(t){var i=i7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r7(e)}(this,n)}}function r7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i7(e){return(i7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let o7=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t7(e,t)}(n,e);var t=n7(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).axis=new xK(r7(i)),i.pBase.addChild(i.axis.pAxis),i}return function(e,t,n){t&&J9(e.prototype,t),n&&J9(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initTile",value:function(e){this.scale.minRawValue=this.minVisibleValueInTiles(),this.scale.maxRawValue=this.minVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(e)}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear(),this.valueScale=qp().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-3,3]);const n=CS("black");t.lineStyle(1,n,.3),t.beginFill(n,.3),this.drawAxis(this.valueScale),e.tileData.forEach((e=>{const n=e.fields,r=+e.chrOffset,i=+n[1]+r,o=+n[2]+r,a=+n[3],s=this._xScale(i),l=this._xScale(o),c=Math.max(l-s,4),u=this.valueScale(a),h=(l+s)/2;t.drawRect(h-c/2,u-3,c,6)}))}},{key:"minVisibleValueInTiles",value:function(){let e=this.visibleAndFetchedIds();return 0===e.length&&(e=Object.keys(this.fetchedTiles)),Math.min.apply(null,e.map((e=>+Math.min(...this.fetchedTiles[e].tileData.filter((e=>!Number.isNaN(e.fields[3]))).map((e=>+e.fields[3]))))))}},{key:"maxVisibleValueInTiles",value:function(){let e=this.visibleAndFetchedIds();return 0===e.length&&(e=Object.keys(this.fetchedTiles)),Math.max.apply(null,e.map((e=>+Math.max(...this.fetchedTiles[e].tileData.filter((e=>!Number.isNaN(e.fields[3]))).map((e=>+e.fields[3]))))))}}]),n}(p6);function a7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s7(r.key),r)}}function s7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l7(){return l7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p7(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},l7.apply(this,arguments)}function c7(e,t){return(c7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u7(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=p7(e);if(t){var i=p7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h7(e)}(this,n)}}function h7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p7(e){return(p7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let f7=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c7(e,t)}(n,e);var t=u7(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{registerViewportChanged:o,removeViewportChanged:a,setDomainsCallback:s}=e,l=ag.nice();return i.uid=l,i.options=r,i.hasFromView=!e.projectionXDomain||!e.projectionYDomain,i.removeViewportChanged=a,i.setDomainsCallback=s,i.viewportXDomain=i.hasFromView?null:e.projectionXDomain,i.viewportYDomain=i.hasFromView?null:e.projectionYDomain,i.brush=MT().on("brush",i.brushed.bind(h7(i))),i.gBrush=i.gMain.append("g").attr("id",`brush-${i.uid}`).call(i.brush),i.gBrush.selectAll(".overlay").style("pointer-events","none"),i.gBrush.selectAll(".handle--n").style("pointer-events","none"),i.gBrush.selectAll(".handle--s").style("pointer-events","none"),i.gBrush.selectAll(".handle--w").style("pointer-events","none"),i.gBrush.selectAll(".handle--e").style("pointer-events","none"),o(l,i.viewportChanged.bind(h7(i))),i.rerender(),i.draw(),i}return function(e,t,n){t&&a7(e.prototype,t),n&&a7(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=[this._xScale.invert(t[0][0]),this._xScale.invert(t[1][0])],r=[this._yScale.invert(t[0][1]),this._yScale.invert(t[1][1])];this.hasFromView||(this.viewportXDomain=n,this.viewportYDomain=r),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),l7(p7(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[[this._xScale(this.viewportXDomain[0]),this._yScale(this.viewportYDomain[0])],[this._xScale(this.viewportXDomain[1]),this._yScale(this.viewportYDomain[1])]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){l7(p7(n.prototype),"setPosition",this).call(this,e),this.draw()}},{key:"setDimensions",value:function(e){l7(p7(n.prototype),"setDimensions",this).call(this,e);const t=this._xScale.range(),r=this._yScale.range(),i=t[1]-t[0],o=r[1]-r[0];this.brush.extent([[t[0]-i,r[0]-o],[t[1]+i,r[1]+o]]),this.gBrush.call(this.brush),this.draw()}}]),n}(K2);function d7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m7(r.key),r)}}function m7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function g7(){return g7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_7(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},g7.apply(this,arguments)}function y7(e,t){return(y7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v7(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=_7(e);if(t){var i=_7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b7(e)}(this,n)}}function b7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _7(e){return(_7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let T7=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y7(e,t)}(n,e);var t=v7(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{registerViewportChanged:o,removeViewportChanged:a,setDomainsCallback:s}=e,l=ag.nice();return i.uid=l,i.options=r,i.hasFromView=!e.projectionXDomain,i.removeViewportChanged=a,i.setDomainsCallback=s,i.viewportXDomain=i.hasFromView?null:e.projectionXDomain,i.viewportYDomain=i.hasFromView?null:[0,0],i.brush=RT().on("brush",i.brushed.bind(b7(i))),i.gBrush=i.gMain.append("g").attr("id",`brush-${i.uid}`).call(i.brush),i.gBrush.selectAll(".overlay").style("pointer-events","none"),i.gBrush.selectAll(".handle--ne").style("pointer-events","none"),i.gBrush.selectAll(".handle--nw").style("pointer-events","none"),i.gBrush.selectAll(".handle--sw").style("pointer-events","none"),i.gBrush.selectAll(".handle--se").style("pointer-events","none"),i.gBrush.selectAll(".handle--n").style("pointer-events","none"),i.gBrush.selectAll(".handle--s").style("pointer-events","none"),o(l,i.viewportChanged.bind(b7(i))),i.rerender(),i.draw(),i}return function(e,t,n){t&&d7(e.prototype,t),n&&d7(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=[this._xScale.invert(t[0]),this._xScale.invert(t[1])],r=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=n),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),g7(_7(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[this._xScale(this.viewportXDomain[0]),this._xScale(this.viewportXDomain[1])];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){g7(_7(n.prototype),"setPosition",this).call(this,e),this.draw()}},{key:"setDimensions",value:function(e){g7(_7(n.prototype),"setDimensions",this).call(this,e);const t=this._xScale.range(),r=this._yScale.range(),i=t[1]-t[0];this.brush.extent([[t[0]-i,r[0]],[t[1]+i,r[1]]]),this.gBrush.call(this.brush),this.draw()}}]),n}(K2);function E7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S7(r.key),r)}}function S7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function w7(){return w7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k7(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},w7.apply(this,arguments)}function A7(e,t){return(A7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O7(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=k7(e);if(t){var i=k7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x7(e)}(this,n)}}function x7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k7(e){return(k7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let I7=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A7(e,t)}(n,e);var t=O7(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{registerViewportChanged:o,removeViewportChanged:a,setDomainsCallback:s}=e,l=ag.nice();return i.uid=l,i.options=r,i.hasFromView=!e.projectionYDomain,i.removeViewportChanged=a,i.setDomainsCallback=s,i.viewportXDomain=i.hasFromView?null:[0,0],i.viewportYDomain=i.hasFromView?null:e.projectionYDomain,i.brush=NT().on("brush",i.brushed.bind(x7(i))),i.gBrush=i.gMain.append("g").attr("id",`brush-${i.uid}`).call(i.brush),i.gBrush.selectAll(".overlay").style("pointer-events","none"),i.gBrush.selectAll(".handle--ne").style("pointer-events","none"),i.gBrush.selectAll(".handle--nw").style("pointer-events","none"),i.gBrush.selectAll(".handle--sw").style("pointer-events","none"),i.gBrush.selectAll(".handle--se").style("pointer-events","none"),i.gBrush.selectAll(".handle--e").style("pointer-events","none"),i.gBrush.selectAll(".handle--w").style("pointer-events","none"),o(l,i.viewportChanged.bind(x7(i))),i.rerender(),i.draw(),i}return function(e,t,n){t&&E7(e.prototype,t),n&&E7(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=this.viewportXDomain,r=[this._yScale.invert(t[0]),this._yScale.invert(t[1])];this.hasFromView||(this.viewportYDomain=r),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),w7(k7(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[this._yScale(this.viewportYDomain[0]),this._yScale(this.viewportYDomain[1])];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){w7(k7(n.prototype),"setPosition",this).call(this,e),this.draw()}},{key:"setDimensions",value:function(e){w7(k7(n.prototype),"setDimensions",this).call(this,e);const t=this._xScale.range(),r=this._yScale.range(),i=r[1]-r[0];this.brush.extent([[t[0],r[0]-i],[t[1],r[1]+i]]),this.gBrush.call(this.brush),this.draw()}}]),n}(K2);function C7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R7(r.key),r)}}function D7(e,t,n){return t&&P7(e.prototype,t),n&&P7(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const N7="__mixwith_appliedMixin",M7="__mixwith_wrappedMixin",L7=e=>e[M7]||e,j7=(e,t)=>e.hasOwnProperty(N7)&&e[N7]===L7(t),B7=(e,t)=>(Object.setPrototypeOf(t,e),e[M7]||(e[M7]=e),t),F7="__mixwith_cachedApplications",G7=e=>B7(e,(t=>((e,t)=>{for(;null!==e;){if(j7(e,t))return!0;e=Object.getPrototypeOf(e)}return!1})(t.prototype,e)?t:e(t))),H7=e=>B7(e,(t=>((e,t)=>{const n=t(e);return n.prototype[N7]=L7(t),n})(t,e))),U7=e=>G7((e=>B7(e,(t=>{let n=t[F7];n||(t[F7]=new Map,n=t[F7]);let r=n.get(e);return r||(r=e(t),n.set(e,r)),r})))(H7(e)));let z7=function(){function e(t){C7(this,e),this.superclass=t||function(){return D7((function e(){C7(this,e)}))}()}return D7(e,[{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>t(e)),this.superclass)}}]),e}();const V7=e=>new z7(e);function X7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y7(r.key),r)}}function Y7(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function W7(){return W7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q7(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},W7.apply(this,arguments)}function q7(e,t){return(q7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $7(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Q7(e);if(t){var i=Q7(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K7(e)}(this,n)}}function K7(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q7(e){return(Q7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Z7=U7((e=>function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q7(e,t)}(n,e);var t=$7(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{animate:o}=e;return i.highlighted=!1,i.animate=o,i.MOUSEOVER_RADIUS=4,i.pubSub=e.pubSub,i.pubSubs.push(i.pubSub.subscribe("app.mouseMove",i.mouseMoveHandler.bind(K7(i)))),i}return function(e,t,n){t&&X7(e.prototype,t),n&&X7(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setPosition",value:function(e){W7(Q7(n.prototype),"setPosition",this).call(this,e),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(e,t){W7(Q7(n.prototype),"zoomed",this).call(this,e,t),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}]),n}(e)));function J7(){return J7=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=see(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},J7.apply(this,arguments)}function eee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ree(r.key),r)}}function nee(e,t,n){return t&&tee(e.prototype,t),n&&tee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ree(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function iee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oee(e,t)}function oee(e,t){return(oee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=see(e);if(t){var i=see(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function see(e){return(see=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const lee=U7((e=>function(e){iee(n,e);var t=aee(n);function n(){return eee(this,n),t.apply(this,arguments)}return nee(n,[{key:"drawHorizontalRule",value:function(e){let t=CS(this.options.color||"black");this.highlighted&&(t=CS("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[0];)e.moveTo(n,this._yScale(this.yPosition)),e.lineTo(n+this.dashLength,this._yScale(this.yPosition)),n+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(e){return Math.abs(e.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}]),n}(e)));let cee=function(e){iee(n,e);var t=aee(n);function n(e,r){var i;return eee(this,n),(i=t.call(this,e,r)).yPosition=e.yPosition,i.strokeWidth=2,i.strokeOpacity=1,i.dashLength=5,i.dashGap=3,i}return nee(n,[{key:"mouseMoveHandler",value:function(e){if(this.isWithin(e.x,e.y)&&this.isMouseOverHorizontalLine(e))return this.highlighted=!0,void this.draw();this.highlighted=!1,this.draw()}},{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.animate()}},{key:"exportSVG",value:function(){let e=null,t=null;J7(see(n.prototype),"exportSVG",this)?[t,e]=J7(see(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");r.setAttribute("class","horizontal-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");return o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",0),o.setAttribute("y1",this._yScale(this.yPosition)),o.setAttribute("x2",this.dimensions[0]),o.setAttribute("y2",this._yScale(this.yPosition)),r.appendChild(o),[t,e]}}]),n}(V7(UQ).with(Z7,lee));function uee(){return uee=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vee(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},uee.apply(this,arguments)}function hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dee(r.key),r)}}function fee(e,t,n){return t&&pee(e.prototype,t),n&&pee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gee(e,t)}function gee(e,t){return(gee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=vee(e);if(t){var i=vee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vee(e){return(vee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const bee=U7((e=>function(e){mee(n,e);var t=yee(n);function n(){return hee(this,n),t.apply(this,arguments)}return fee(n,[{key:"drawVerticalRule",value:function(e){let t=CS(this.options.color||"black");this.highlighted&&(t=CS("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[1];)e.moveTo(this._xScale(this.xPosition),n),e.lineTo(this._xScale(this.xPosition),n+this.dashLength),n+=this.dashLength+this.dashGap}},{key:"isMouseOverVerticalLine",value:function(e){return Math.abs(e.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}]),n}(e)));let _ee=function(e){mee(n,e);var t=yee(n);function n(e,r){var i;return hee(this,n),(i=t.call(this,e,r)).xPosition=e.xPosition,i.strokeWidth=2,i.strokeOpacity=1,i.dashLength=5,i.dashGap=3,i}return fee(n,[{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawVerticalRule(e),this.animate()}},{key:"exportSVG",value:function(){let e=null,t=null;uee(vee(n.prototype),"exportSVG",this)?[t,e]=uee(vee(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");r.setAttribute("class","vertical-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");return o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",this._xScale(this.xPosition)),o.setAttribute("y1",0),o.setAttribute("x2",this._xScale(this.xPosition)),o.setAttribute("y2",this.dimensions[1]),r.appendChild(o),[t,e]}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&this.isMouseOverVerticalLine(e),this.draw()}}]),n}(V7(UQ).with(Z7,bee));function Tee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eee(r.key),r)}}function Eee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function See(){return See=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oee(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},See.apply(this,arguments)}function wee(e,t){return(wee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Oee(e);if(t){var i=Oee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Oee(e){return(Oee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let xee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wee(e,t)}(n,e);var t=Aee(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{x:o,y:a}=e;return i.xPosition=o,i.yPosition=a,i.strokeWidth=2,i.strokeOpacity=1,i.dashLength=5,i.dashGap=3,i}return function(e,t,n){t&&Tee(e.prototype,t),n&&Tee(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.drawVerticalRule(e)}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&(this.isMouseOverHorizontalLine(e)||this.isMouseOverVerticalLine(e)),this.draw()}},{key:"drawHorizontalRule",value:function(e){let t=CS(this.options.color||"black");this.highlighted&&(t=CS("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[0];)e.moveTo(n,this._yScale(this.yPosition)),e.lineTo(n+this.dashLength,this._yScale(this.yPosition)),n+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(e){return Math.abs(e.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}},{key:"exportSVG",value:function(){let e=null,t=null;See(Oee(n.prototype),"exportSVG",this)?[t,e]=See(Oee(n.prototype),"exportSVG",this).call(this):(t=document.createElement("g"),e=t);const r=document.createElement("g");r.setAttribute("class","cross-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",this._xScale(this.xPosition)),o.setAttribute("y1",0),o.setAttribute("x2",this._xScale(this.xPosition)),o.setAttribute("y2",this.dimensions[1]);const a=document.createElement("line");return a.setAttribute("stroke",i),a.setAttribute("stroke-width",this.strokeWidth),a.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),a.setAttribute("x1",0),a.setAttribute("y1",this._yScale(this.yPosition)),a.setAttribute("x2",this.dimensions[0]),a.setAttribute("y2",this._yScale(this.yPosition)),r.appendChild(o),r.appendChild(a),[t,e]}}]),n}(V7(UQ).with(Z7,bee));function kee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Iee(r.key),r)}}function Iee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Cee(){return Cee=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nee(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Cee.apply(this,arguments)}function Pee(e,t){return(Pee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Nee(e);if(t){var i=Nee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ree(e)}(this,n)}}function Ree(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nee(e){return(Nee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Mee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pee(e,t)}(n,e);var t=Dee(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{animate:o}=e;return i.visibleTiles=new Set,i.visibleTileIds=new Set,i.fetching=new Set,i.fetchedTiles={},i.tileGraphics={},i.minX=typeof i.options.minPos<"u"&&!Number.isNaN(+i.options.minPos)?+i.options.minPos:-180,i.maxX=+i.options.maxPos||180,i.maxX=typeof i.options.maxPos<"u"&&!Number.isNaN(+i.options.maxPos)?+i.options.maxPos:180,i.minY=i.options.minY||i.minX,i.maxY=i.options.maxY||i.maxX,i.maxZoom=19,i.maxWidth=i.maxX-i.minX,i.animate=o,i.uuid=ag.nice(),i.refreshTilesDebounced=RS(i.refreshTiles.bind(Ree(i)),10),i}return function(e,t,n){t&&kee(e.prototype,t),n&&kee(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter((e=>this.visibleTileIds.has(e)))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map((e=>this.fetchedTiles[e]))}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map((e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e),mirrored:e.mirrored}))),this.visibleTileIds=new Set(this.visibleTiles.map((e=>e.tileId)))}},{key:"removeAllTiles",value:function(){const e=new Set(Object.keys(this.fetchedTiles));this.removeTiles([...e])}},{key:"refreshTiles",value:function(){this.calculateVisibleTiles();const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTiles].filter((t=>!this.fetching.has(t.remoteId)&&!e.has(t.tileId)));for(let r=0;r<t.length;r++)this.fetching.add(t[r].remoteId);const n=[...e].filter((e=>!this.visibleTileIds.has(e)));this.removeTiles(n),this.fetchNewTiles(t)}},{key:"removeTiles",value:function(e){e.length&&this.areAllVisibleTilesLoaded()&&(e.forEach((e=>{const t=e;this.destroyTile(this.fetchedTiles[t]),t in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[t]),delete this.tileGraphics[t]),delete this.fetchedTiles[t]})),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(e){return e.join(".")}},{key:"tileToRemoteId",value:function(e){return e.join(".")}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=Fw.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=Fw.calculateZoomLevel(this._xScale,this.minY,this.maxY);let n=Math.min(Math.max(e,t),this.maxZoom);return this.options.maxZoom&&(this.options.maxZoom>=0?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Fw.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=Fw.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.maxZoom,this.maxWidth);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"zoomed",value:function(e,t,r,i,o){Cee(Nee(n.prototype),"zoomed",this).call(this,e,t),this.xScale(e),this.yScale(t),this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=r,this.pMain.scale.y=r,this.refreshTilesDebounced(),this.draw()}},{key:"setPosition",value:function(e){Cee(Nee(n.prototype),"setPosition",this).call(this,e)}},{key:"setDimensions",value:function(e){Cee(Nee(n.prototype),"setDimensions",this).call(this,e)}},{key:"areAllVisibleTilesLoaded",value:function(){const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTileIds];for(let n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){return e&&(this.scale.minValue=e),this.scale.minValue}},{key:"maxValue",value:function(e){return e&&(this.scale.maxValue=e),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(e,t){const n=this.maxWidth/2**e,r=n;return{tileX:this.minX+t[0]*n,tileY:this.minY+t[1]*r,tileWidth:n,tileHeight:r}}},{key:"setSpriteProperties",value:function(e,t,n){const{tileX:r,tileY:i,tileWidth:o,tileHeight:a}=this.getTilePosAndDimensions(t,n);e.x=this._refXScale(r),e.y=this._refYScale(i);const s=r+o,l=i+a;e.width=this._refXScale(s)-this._refXScale(r),e.height=this._refYScale(l)-this._refYScale(i)}},{key:"initTile",value:function(e){const t=new nS.PIXI.Texture(new nS.PIXI.BaseTexture(e.tileData.img)),n=new nS.PIXI.Sprite(t),r=e.graphics;e.sprite=n,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos),r.removeChildren(),r.addChild(e.sprite)}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"addMissingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){const n=new nS.PIXI.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++)this.updateTile(this.fetchedTiles[e[t]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(e,t){let n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"getTileUrl",value:function(e){const t=["a","b","c"];return`https://${t[Math.floor(Math.random()*t.length)]}.tile.openstreetmap.org/${e[0]}/${e[1]}/${e[2]}.png`}},{key:"fetchNewTiles",value:function(e){if(e.length>0){const t=[...new Set(e.map((e=>e.remoteId)))];for(const e of t){const t=e.split("."),n=this.getTileUrl(t),r=new Image;r.crossOrigin="Anonymous",r.src=n,r.onload=()=>{const i={};i[e]={tileId:e,img:r,zoomLevel:+t[0],tilePos:[+t[1],+t[2]],tileSrc:n},this.receivedTiles(i)}}}}},{key:"receivedTiles",value:function(e){for(let t=0;t<this.visibleTiles.length;t++){const n=this.visibleTiles[t].tileId;e[this.visibleTiles[t].remoteId]&&this.visibleTiles[t].remoteId in e&&(n in this.fetchedTiles||(this.fetchedTiles[n]=this.visibleTiles[t]),this.fetchedTiles[n].tileData=e[this.visibleTiles[t].remoteId])}for(const t in e)e[t]&&this.fetching.has(t)&&this.fetching.delete(t);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||Cee(Nee(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(e,t){Cee(Nee(n.prototype),"refScalesChanged",this).call(this,e,t);for(const n in this.fetchedTiles){const e=this.fetchedTiles[n];e.sprite&&this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos)}}}]),n}(UQ);function Lee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jee(r.key),r)}}function jee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Bee(){return Bee=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hee(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Bee.apply(this,arguments)}function Fee(e,t){return(Fee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Hee(e);if(t){var i=Hee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Hee(e){return(Hee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Uee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fee(e,t)}(n,e);var t=Gee(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Lee(e.prototype,t),n&&Lee(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"initTile",value:function(e){V1.bind(this)(e),this.drawTile(e)}},{key:"drawTile",value:function(e){z1.bind(this)(e)}},{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"fetchNewTiles",value:function(e){e.forEach((e=>{const t=e.remoteId.split("."),n={zoomLevel:t[0],tilePos:t.slice(1,t.length).map((e=>+e))};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)})),this.synchronizeTilesAndGraphics(),this.draw(),this.animate()}},{key:"draw",value:function(){Bee(Hee(n.prototype),"draw",this).call(this)}}]),n}(Mee);function zee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vee(r.key),r)}}function Vee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Xee(){return Xee=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qee(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xee.apply(this,arguments)}function Yee(e,t){return(Yee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=qee(e);if(t){var i=qee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function qee(e){return(qee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let $ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yee(e,t)}(n,e);var t=Wee(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).style=r.style,i.options.accessToken||(i.errorTextText="No access token provided in the viewconf's track options ('accessToken' option).",i.drawError()),i}return function(e,t,n){t&&zee(e.prototype,t),n&&zee(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"rerender",value:function(e){Xee(qee(n.prototype),"rerender",this).call(this,e),e.style!==this.style&&(this.style=e.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(e){return`https://api.mapbox.com/styles/v1/mapbox/${this.options&&this.options.style?this.options.style:"streets-v10"}/tiles/${this.options&&+this.options.tileSize?+this.options.tileSize:256}/${e[0]}/${e[1]}/${e[2]}?access_token=${this.options.accessToken}`}}]),n}(Mee);function Kee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qee(r.key),r)}}function Qee(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Zee(e,t){return(Zee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jee(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=ete(e);if(t){var i=ete(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ete(e){return(ete=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let tte=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zee(e,t)}(n,e);var t=Jee(n);function n(e,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this,e,r)).style=r.style,i.options.tileSource||(i.errorTextText="No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}",i.drawError()),i}return function(e,t,n){t&&Kee(e.prototype,t),n&&Kee(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getTileUrl",value:function(e){let t=this.options.tileSource.replace("{z}",e[0]);return t=t.replace("{x}",e[1]),t=t.replace("{y}",e[2]),t}}]),n}(Mee);var nte=1e-6,rte=1e-12,ite=Math.PI,ote=ite/2,ate=ite/4,ste=2*ite,lte=180/ite,cte=ite/180,ute=Math.abs,hte=Math.atan,pte=Math.atan2,fte=Math.cos,dte=Math.ceil,mte=Math.exp,gte=Math.hypot,yte=Math.log,vte=Math.pow,bte=Math.sin,_te=Math.sign||function(e){return e>0?1:e<0?-1:0},Tte=Math.sqrt,Ete=Math.tan;function Ste(e){return e>1?0:e<-1?ite:Math.acos(e)}function wte(e){return e>1?ote:e<-1?-ote:Math.asin(e)}function Ate(e){return(e=bte(e/2))*e}function Ote(){}function xte(e,t){e&&Ite.hasOwnProperty(e.type)&&Ite[e.type](e,t)}var kte={Feature:function(e,t){xte(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xte(n[r].geometry,t)}},Ite={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cte(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cte(n[r],t,0)},Polygon:function(e,t){Pte(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Pte(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xte(n[r],t)}};function Cte(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Pte(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Cte(e[n],t,1);t.polygonEnd()}function Dte(e,t){e&&kte.hasOwnProperty(e.type)?kte[e.type](e,t):xte(e,t)}var Rte,Nte,Mte,Lte,jte,Bte=new vc,Fte=new vc,Gte={point:Ote,lineStart:Ote,lineEnd:Ote,polygonStart:function(){Bte=new vc,Gte.lineStart=Hte,Gte.lineEnd=Ute},polygonEnd:function(){var e=+Bte;Fte.add(e<0?ste+e:e),this.lineStart=this.lineEnd=this.point=Ote},sphere:function(){Fte.add(ste)}};function Hte(){Gte.point=zte}function Ute(){Vte(Rte,Nte)}function zte(e,t){Gte.point=Vte,Rte=e,Nte=t,Mte=e*=cte,Lte=fte(t=(t*=cte)/2+ate),jte=bte(t)}function Vte(e,t){var n=(e*=cte)-Mte,r=n>=0?1:-1,i=r*n,o=fte(t=(t*=cte)/2+ate),a=bte(t),s=jte*a,l=Lte*o+s*fte(i),c=s*r*bte(i);Bte.add(pte(c,l)),Mte=e,Lte=o,jte=a}function Xte(e){return[pte(e[1],e[0]),wte(e[2])]}function Yte(e){var t=e[0],n=e[1],r=fte(n);return[r*fte(t),r*bte(t),bte(n)]}function Wte(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qte(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function $te(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Kte(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Qte(e){var t=Tte(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Zte,Jte,ene,tne,nne,rne,ine,one,ane,sne,lne,cne={point:une,lineStart:pne,lineEnd:fne,polygonStart:function(){cne.point=dne,cne.lineStart=mne,cne.lineEnd=gne,ane=new vc,Gte.polygonStart()},polygonEnd:function(){Gte.polygonEnd(),cne.point=une,cne.lineStart=pne,cne.lineEnd=fne,Bte<0?(Zte=-(ene=180),Jte=-(tne=90)):ane>nte?tne=90:ane<-nte&&(Jte=-90),lne[0]=Zte,lne[1]=ene},sphere:function(){Zte=-(ene=180),Jte=-(tne=90)}};function une(e,t){sne.push(lne=[Zte=e,ene=e]),t<Jte&&(Jte=t),t>tne&&(tne=t)}function hne(e,t){var n=Yte([e*cte,t*cte]);if(one){var r=qte(one,n),i=qte([r[1],-r[0],0],r);Qte(i),i=Xte(i);var o,a=e-nne,s=a>0?1:-1,l=i[0]*lte*s,c=ute(a)>180;c^(s*nne<l&&l<s*e)?(o=i[1]*lte)>tne&&(tne=o):c^(s*nne<(l=(l+360)%360-180)&&l<s*e)?(o=-i[1]*lte)<Jte&&(Jte=o):(t<Jte&&(Jte=t),t>tne&&(tne=t)),c?e<nne?yne(Zte,e)>yne(Zte,ene)&&(ene=e):yne(e,ene)>yne(Zte,ene)&&(Zte=e):ene>=Zte?(e<Zte&&(Zte=e),e>ene&&(ene=e)):e>nne?yne(Zte,e)>yne(Zte,ene)&&(ene=e):yne(e,ene)>yne(Zte,ene)&&(Zte=e)}else sne.push(lne=[Zte=e,ene=e]);t<Jte&&(Jte=t),t>tne&&(tne=t),one=n,nne=e}function pne(){cne.point=hne}function fne(){lne[0]=Zte,lne[1]=ene,cne.point=une,one=null}function dne(e,t){if(one){var n=e-nne;ane.add(ute(n)>180?n+(n>0?360:-360):n)}else rne=e,ine=t;Gte.point(e,t),hne(e,t)}function mne(){Gte.lineStart()}function gne(){dne(rne,ine),Gte.lineEnd(),ute(ane)>nte&&(Zte=-(ene=180)),lne[0]=Zte,lne[1]=ene,one=null}function yne(e,t){return(t-=e)<0?t+360:t}function vne(e,t){return e[0]-t[0]}function bne(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var _ne,Tne,Ene,Sne,wne,Ane,One,xne,kne,Ine,Cne,Pne,Dne,Rne,Nne,Mne,Lne={sphere:Ote,point:jne,lineStart:Fne,lineEnd:Une,polygonStart:function(){Lne.lineStart=zne,Lne.lineEnd=Vne},polygonEnd:function(){Lne.lineStart=Fne,Lne.lineEnd=Une}};function jne(e,t){e*=cte;var n=fte(t*=cte);Bne(n*fte(e),n*bte(e),bte(t))}function Bne(e,t,n){++_ne,Ene+=(e-Ene)/_ne,Sne+=(t-Sne)/_ne,wne+=(n-wne)/_ne}function Fne(){Lne.point=Gne}function Gne(e,t){e*=cte;var n=fte(t*=cte);Rne=n*fte(e),Nne=n*bte(e),Mne=bte(t),Lne.point=Hne,Bne(Rne,Nne,Mne)}function Hne(e,t){e*=cte;var n=fte(t*=cte),r=n*fte(e),i=n*bte(e),o=bte(t),a=pte(Tte((a=Nne*o-Mne*i)*a+(a=Mne*r-Rne*o)*a+(a=Rne*i-Nne*r)*a),Rne*r+Nne*i+Mne*o);Tne+=a,Ane+=a*(Rne+(Rne=r)),One+=a*(Nne+(Nne=i)),xne+=a*(Mne+(Mne=o)),Bne(Rne,Nne,Mne)}function Une(){Lne.point=jne}function zne(){Lne.point=Xne}function Vne(){Yne(Pne,Dne),Lne.point=jne}function Xne(e,t){Pne=e,Dne=t,e*=cte,t*=cte,Lne.point=Yne;var n=fte(t);Rne=n*fte(e),Nne=n*bte(e),Mne=bte(t),Bne(Rne,Nne,Mne)}function Yne(e,t){e*=cte;var n=fte(t*=cte),r=n*fte(e),i=n*bte(e),o=bte(t),a=Nne*o-Mne*i,s=Mne*r-Rne*o,l=Rne*i-Nne*r,c=gte(a,s,l),u=wte(c),h=c&&-u/c;kne.add(h*a),Ine.add(h*s),Cne.add(h*l),Tne+=u,Ane+=u*(Rne+(Rne=r)),One+=u*(Nne+(Nne=i)),xne+=u*(Mne+(Mne=o)),Bne(Rne,Nne,Mne)}function Wne(e){return function(){return e}}function qne(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function $ne(e,t){return[ute(e)>ite?e+Math.round(-e/ste)*ste:e,t]}function Kne(e,t,n){return(e%=ste)?t||n?qne(Zne(e),Jne(t,n)):Zne(e):t||n?Jne(t,n):$ne}function Qne(e){return function(t,n){return[(t+=e)>ite?t-ste:t<-ite?t+ste:t,n]}}function Zne(e){var t=Qne(e);return t.invert=Qne(-e),t}function Jne(e,t){var n=fte(e),r=bte(e),i=fte(t),o=bte(t);function a(e,t){var a=fte(t),s=fte(e)*a,l=bte(e)*a,c=bte(t),u=c*n+s*r;return[pte(l*i-u*o,s*n-c*r),wte(u*i+l*o)]}return a.invert=function(e,t){var a=fte(t),s=fte(e)*a,l=bte(e)*a,c=bte(t),u=c*i-l*o;return[pte(l*i+c*o,s*n+u*r),wte(u*n-s*r)]},a}function ere(e){function t(t){return(t=e(t[0]*cte,t[1]*cte))[0]*=lte,t[1]*=lte,t}return e=Kne(e[0]*cte,e[1]*cte,e.length>2?e[2]*cte:0),t.invert=function(t){return(t=e.invert(t[0]*cte,t[1]*cte))[0]*=lte,t[1]*=lte,t},t}function tre(e,t,n,r,i,o){if(n){var a=fte(t),s=bte(t),l=r*n;null==i?(i=t+r*ste,o=t-l/2):(i=nre(a,i),o=nre(a,o),(r>0?i<o:i>o)&&(i+=r*ste));for(var c,u=i;r>0?u>o:u<o;u-=l)c=Xte([a,-s*fte(u),-s*bte(u)]),e.point(c[0],c[1])}}function nre(e,t){(t=Yte(t))[0]-=e,Qte(t);var n=Ste(-t[1]);return((-t[2]<0?-n:n)+ste-nte)%ste}function rre(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Ote,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ire(e,t){return ute(e[0]-t[0])<nte&&ute(e[1]-t[1])<nte}function ore(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function are(e,t,n,r,i){var o,a,s=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(ire(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*nte}s.push(n=new ore(r,e,null,!0)),l.push(n.o=new ore(r,null,n,!1)),s.push(n=new ore(a,e,null,!1)),l.push(n.o=new ore(a,null,n,!0))}})),s.length){for(l.sort(t),sre(s),sre(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function sre(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function lre(e){return ute(e[0])<=ite?e[0]:_te(e[0])*((ute(e[0])+ite)%ste-ite)}function cre(e,t){var n=lre(t),r=t[1],i=bte(r),o=[bte(n),-fte(n),0],a=0,s=0,l=new vc;1===i?r=ote+nte:-1===i&&(r=-ote-nte);for(var c=0,u=e.length;c<u;++c)if(p=(h=e[c]).length)for(var h,p,f=h[p-1],d=lre(f),m=f[1]/2+ate,g=bte(m),y=fte(m),v=0;v<p;++v,d=_,g=E,y=S,f=b){var b=h[v],_=lre(b),T=b[1]/2+ate,E=bte(T),S=fte(T),w=_-d,A=w>=0?1:-1,O=A*w,x=O>ite,k=g*E;if(l.add(pte(k*A*bte(O),y*S+k*fte(O))),a+=x?w+A*ste:w,x^d>=n^_>=n){var I=qte(Yte(f),Yte(b));Qte(I);var C=qte(o,I);Qte(C);var P=(x^w>=0?-1:1)*wte(C[2]);(r>P||r===P&&(I[0]||I[1]))&&(s+=x^w>=0?1:-1)}}return(a<-nte||a<nte&&l<-rte)^1&s}function ure(e,t,n,r){return function(i){var o,a,s,l=t(i),c=rre(),u=t(c),h=!1,p={point:f,lineStart:m,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=v,p.lineEnd=b,a=[],o=[]},polygonEnd:function(){p.point=f,p.lineStart=m,p.lineEnd=g,a=hu(a);var e=cre(o,r);a.length?(h||(i.polygonStart(),h=!0),are(a,pre,e,n,i)):e&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(t,n){e(t,n)&&i.point(t,n)}function d(e,t){l.point(e,t)}function m(){p.point=d,l.lineStart()}function g(){p.point=f,l.lineEnd()}function y(e,t){s.push([e,t]),u.point(e,t)}function v(){u.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),u.lineEnd();var e,t,n,r,l=u.clean(),p=c.result(),f=p.length;if(s.pop(),o.push(s),s=null,f){if(1&l){if((t=(n=p[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}return}f>1&&2&l&&p.push(p.pop().concat(p.shift())),a.push(p.filter(hre))}}return p}}function hre(e){return e.length>1}function pre(e,t){return((e=e.x)[0]<0?e[1]-ote-nte:ote-e[1])-((t=t.x)[0]<0?t[1]-ote-nte:ote-t[1])}$ne.invert=$ne;const fre=ure((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?ite:-ite,l=ute(o-n);ute(l-ite)<nte?(e.point(n,r=(r+a)/2>0?ote:-ote),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=ite&&(ute(n-i)<nte&&(n-=i*nte),ute(o-s)<nte&&(o-=s*nte),r=function(e,t,n,r){var i,o,a=bte(e-n);return ute(a)>nte?hte((bte(t)*(o=fte(r))*bte(n)-bte(r)*(i=fte(t))*bte(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*ote,r.point(-ite,i),r.point(0,i),r.point(ite,i),r.point(ite,0),r.point(ite,-i),r.point(0,-i),r.point(-ite,-i),r.point(-ite,0),r.point(-ite,i);else if(ute(e[0]-t[0])>nte){var o=e[0]<t[0]?ite:-ite;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-ite,-ote]);function dre(e){var t=fte(e),n=6*cte,r=t>0,i=ute(t)>nte;function o(e,n){return fte(e)*fte(n)>t}function a(e,n,r){var i=[1,0,0],o=qte(Yte(e),Yte(n)),a=Wte(o,o),s=o[0],l=a-s*s;if(!l)return!r&&e;var c=t*a/l,u=-t*s/l,h=qte(i,o),p=Kte(i,c);$te(p,Kte(o,u));var f=h,d=Wte(p,f),m=Wte(f,f),g=d*d-m*(Wte(p,p)-1);if(!(g<0)){var y=Tte(g),v=Kte(f,(-d-y)/m);if($te(v,p),v=Xte(v),!r)return v;var b,_=e[0],T=n[0],E=e[1],S=n[1];T<_&&(b=_,_=T,T=b);var w=T-_,A=ute(w-ite)<nte;if(!A&&S<E&&(b=E,E=S,S=b),A||w<nte?A?E+S>0^v[1]<(ute(v[0]-_)<nte?E:S):E<=v[1]&&v[1]<=S:w>ite^(_<=v[0]&&v[0]<=T)){var O=Kte(f,(-d+y)/m);return $te(O,p),[v,Xte(O)]}}}function s(t,n){var i=r?e:ite-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ure(o,(function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,p){var f,d=[h,p],m=o(h,p),g=r?m?0:s(h,p):m?s(h+(h<0?ite:-ite),p):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&((!(f=a(t,d))||ire(t,f)||ire(d,f))&&(d[2]=1)),m!==l)u=0,m?(e.lineStart(),f=a(d,t),e.point(f[0],f[1])):(f=a(t,d),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(i&&t&&r^m){var y;!(g&n)&&(y=a(d,t,!0))&&(u=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}m&&(!t||!ire(t,d))&&e.point(d[0],d[1]),t=d,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}}),(function(t,r,i,o){tre(o,e,n,i,t,r)}),r?[0,-e]:[-ite,e-ite])}var mre=1e9,gre=-mre;function yre(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,c){var u=0,h=0;if(null==i||(u=a(i,s))!==(h=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?r:t)}while((u=(u+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return ute(r[0]-e)<nte?i>0?0:3:ute(r[0]-n)<nte?i>0?2:1:ute(r[1]-t)<nte?i>0?1:0:i>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,h,p,f,d,m,g,y,v,b=a,_=rre(),T={point:E,lineStart:function(){T.point=S,c&&c.push(u=[]),y=!0,g=!1,d=m=NaN},lineEnd:function(){l&&(S(h,p),f&&g&&_.rejoin(),l.push(_.result())),T.point=E,g&&b.lineEnd()},polygonStart:function(){b=_,l=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,h=s[0],p=h[0],f=h[1];l<u;++l)o=p,a=f,h=s[l],p=h[0],f=h[1],a<=r?f>r&&(p-o)*(r-a)>(f-a)*(e-o)&&++t:f<=r&&(p-o)*(r-a)<(f-a)*(e-o)&&--t;return t}(),n=v&&t,i=(l=hu(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&are(l,s,t,o,a),a.polygonEnd()),b=a,l=c=u=null}};function E(e,t){i(e,t)&&b.point(e,t)}function S(o,a){var s=i(o,a);if(c&&u.push([o,a]),y)h=o,p=a,f=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[d=Math.max(gre,Math.min(mre,d)),m=Math.max(gre,Math.min(mre,m))],_=[o=Math.max(gre,Math.min(mre,o)),a=Math.max(gre,Math.min(mre,a))];!function(e,t,n,r,i,o){var a,s=e[0],l=e[1],c=0,u=1,h=t[0]-s,p=t[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<u&&(u=a)}else if(p>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,p||!(a<0)){if(a/=p,p<0){if(a>u)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<u&&(u=a)}return c>0&&(e[0]=s+c*h,e[1]=l+c*p),u<1&&(t[0]=s+u*h,t[1]=l+u*p),!0}}}}}(l,_,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}d=o,m=a,g=s}return T}}var vre,bre,_re,Tre,Ere={sphere:Ote,point:Ote,lineStart:function(){Ere.point=wre,Ere.lineEnd=Sre},lineEnd:Ote,polygonStart:Ote,polygonEnd:Ote};function Sre(){Ere.point=Ere.lineEnd=Ote}function wre(e,t){bre=e*=cte,_re=bte(t*=cte),Tre=fte(t),Ere.point=Are}function Are(e,t){e*=cte;var n=bte(t*=cte),r=fte(t),i=ute(e-bre),o=fte(i),a=r*bte(i),s=Tre*n-_re*r*o,l=_re*n+Tre*r*o;vre.add(pte(Tte(a*a+s*s),l)),bre=e,_re=n,Tre=r}function Ore(e){return vre=new vc,Dte(e,Ere),+vre}var xre=[null,null],kre={type:"LineString",coordinates:xre};function Ire(e,t){return xre[0]=e,xre[1]=t,Ore(kre)}var Cre={Feature:function(e,t){return Dre(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(Dre(n[r].geometry,t))return!0;return!1}},Pre={Sphere:function(){return!0},Point:function(e,t){return Rre(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Rre(n[r],t))return!0;return!1},LineString:function(e,t){return Nre(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Nre(n[r],t))return!0;return!1},Polygon:function(e,t){return Mre(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Mre(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(Dre(n[r],t))return!0;return!1}};function Dre(e,t){return!(!e||!Pre.hasOwnProperty(e.type))&&Pre[e.type](e,t)}function Rre(e,t){return 0===Ire(e,t)}function Nre(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(0===(r=Ire(e[o],t))||o>0&&((i=Ire(e[o],e[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<rte*i))return!0;n=r}return!1}function Mre(e,t){return!!cre(e.map(Lre),jre(t))}function Lre(e){return(e=e.map(jre)).pop(),e}function jre(e){return[e[0]*cte,e[1]*cte]}function Bre(e,t,n){var r=du(e,t-nte,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Fre(e,t,n){var r=du(e,t-nte,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Gre(){var e,t,n,r,i,o,a,s,l,c,u,h,p=10,f=p,d=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return du(dte(r/d)*d,n,d).map(u).concat(du(dte(s/m)*m,a,m).map(h)).concat(du(dte(t/p)*p,e,p).filter((function(e){return ute(e%d)>nte})).map(l)).concat(du(dte(o/f)*f,i,f).filter((function(e){return ute(e%m)>nte})).map(c))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(h(a).slice(1),u(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(d=+e[0],m=+e[1],y):[d,m]},y.stepMinor=function(e){return arguments.length?(p=+e[0],f=+e[1],y):[p,f]},y.precision=function(p){return arguments.length?(g=+p,l=Bre(o,i,90),c=Fre(t,e,g),u=Bre(s,a,90),h=Fre(r,n,g),y):g},y.extentMajor([[-180,-90+nte],[180,90-nte]]).extentMinor([[-180,-80-nte],[180,80+nte]])}const Hre=e=>e;var Ure,zre,Vre,Xre,Yre=new vc,Wre=new vc,qre={point:Ote,lineStart:Ote,lineEnd:Ote,polygonStart:function(){qre.lineStart=$re,qre.lineEnd=Zre},polygonEnd:function(){qre.lineStart=qre.lineEnd=qre.point=Ote,Yre.add(ute(Wre)),Wre=new vc},result:function(){var e=Yre/2;return Yre=new vc,e}};function $re(){qre.point=Kre}function Kre(e,t){qre.point=Qre,Ure=Vre=e,zre=Xre=t}function Qre(e,t){Wre.add(Xre*e-Vre*t),Vre=e,Xre=t}function Zre(){Qre(Ure,zre)}const Jre=qre;var eie=1/0,tie=eie,nie=-eie,rie=nie,iie={point:function(e,t){e<eie&&(eie=e),e>nie&&(nie=e),t<tie&&(tie=t),t>rie&&(rie=t)},lineStart:Ote,lineEnd:Ote,polygonStart:Ote,polygonEnd:Ote,result:function(){var e=[[eie,tie],[nie,rie]];return nie=rie=-(tie=eie=1/0),e}};const oie=iie;var aie,sie,lie,cie,uie=0,hie=0,pie=0,fie=0,die=0,mie=0,gie=0,yie=0,vie=0,bie={point:_ie,lineStart:Tie,lineEnd:wie,polygonStart:function(){bie.lineStart=Aie,bie.lineEnd=Oie},polygonEnd:function(){bie.point=_ie,bie.lineStart=Tie,bie.lineEnd=wie},result:function(){var e=vie?[gie/vie,yie/vie]:mie?[fie/mie,die/mie]:pie?[uie/pie,hie/pie]:[NaN,NaN];return uie=hie=pie=fie=die=mie=gie=yie=vie=0,e}};function _ie(e,t){uie+=e,hie+=t,++pie}function Tie(){bie.point=Eie}function Eie(e,t){bie.point=Sie,_ie(lie=e,cie=t)}function Sie(e,t){var n=e-lie,r=t-cie,i=Tte(n*n+r*r);fie+=i*(lie+e)/2,die+=i*(cie+t)/2,mie+=i,_ie(lie=e,cie=t)}function wie(){bie.point=_ie}function Aie(){bie.point=xie}function Oie(){kie(aie,sie)}function xie(e,t){bie.point=kie,_ie(aie=lie=e,sie=cie=t)}function kie(e,t){var n=e-lie,r=t-cie,i=Tte(n*n+r*r);fie+=i*(lie+e)/2,die+=i*(cie+t)/2,mie+=i,gie+=(i=cie*e-lie*t)*(lie+e),yie+=i*(cie+t),vie+=3*i,_ie(lie=e,cie=t)}const Iie=bie;function Cie(e){this._context=e}Cie.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ste)}},result:Ote};var Pie,Die,Rie,Nie,Mie,Lie=new vc,jie={point:Ote,lineStart:function(){jie.point=Bie},lineEnd:function(){Pie&&Fie(Die,Rie),jie.point=Ote},polygonStart:function(){Pie=!0},polygonEnd:function(){Pie=null},result:function(){var e=+Lie;return Lie=new vc,e}};function Bie(e,t){jie.point=Fie,Die=Nie=e,Rie=Mie=t}function Fie(e,t){Nie-=e,Mie-=t,Lie.add(Tte(Nie*Nie+Mie*Mie)),Nie=e,Mie=t}const Gie=jie;function Hie(){this._string=[]}function Uie(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function zie(e){return function(t){var n=new Vie;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Vie(){}function Xie(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Dte(n,e.stream(oie)),t(oie.result()),null!=r&&e.clipExtent(r),e}function Yie(e,t,n){return Xie(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function Wie(e,t,n){return Yie(e,[[0,0],t],n)}function qie(e,t,n){return Xie(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function $ie(e,t,n){return Xie(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}Hie.prototype={_radius:4.5,_circle:Uie(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Uie(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Vie.prototype={constructor:Vie,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Kie=16,Qie=fte(30*cte);function Zie(e,t){return+t?function(e,t){function n(r,i,o,a,s,l,c,u,h,p,f,d,m,g){var y=c-r,v=u-i,b=y*y+v*v;if(b>4*t&&m--){var _=a+p,T=s+f,E=l+d,S=Tte(_*_+T*T+E*E),w=wte(E/=S),A=ute(ute(E)-1)<nte||ute(o-h)<nte?(o+h)/2:pte(T,_),O=e(A,w),x=O[0],k=O[1],I=x-r,C=k-i,P=v*I-y*C;(P*P/b>t||ute((y*I+v*C)/b-.5)>.3||a*p+s*f+l*d<Qie)&&(n(r,i,o,a,s,l,x,k,A,_/=S,T/=S,E,m,g),g.point(x,k),n(x,k,A,_,T,E,c,u,h,p,f,d,m,g))}}return function(t){var r,i,o,a,s,l,c,u,h,p,f,d,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=_},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){u=NaN,m.point=v,t.lineStart()}function v(r,i){var o=Yte([r,i]),a=e(r,i);n(u,h,c,p,f,d,u=a[0],h=a[1],c=r,p=o[0],f=o[1],d=o[2],Kie,t),t.point(u,h)}function b(){m.point=g,t.lineEnd()}function _(){y(),m.point=T,m.lineEnd=E}function T(e,t){v(r=e,t),i=u,o=h,a=p,s=f,l=d,m.point=v}function E(){n(u,h,c,p,f,d,i,o,r,a,s,l,Kie,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return zie({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var Jie=zie({point:function(e,t){this.stream.point(e*cte,t*cte)}});function eoe(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=fte(o),s=bte(o),l=a*e,c=s*e,u=a/e,h=s/e,p=(s*n-a*t)/e,f=(s*t+a*n)/e;function d(e,o){return[l*(e*=r)-c*(o*=i)+t,n-c*e-l*o]}return d.invert=function(e,t){return[r*(u*e-h*t+p),i*(f-h*e-u*t)]},d}function toe(e){return noe((function(){return e}))()}function noe(e){var t,n,r,i,o,a,s,l,c,u,h=150,p=480,f=250,d=0,m=0,g=0,y=0,v=0,b=0,_=1,T=1,E=null,S=fre,w=null,A=Hre,O=.5;function x(e){return l(e[0]*cte,e[1]*cte)}function k(e){return(e=l.invert(e[0],e[1]))&&[e[0]*lte,e[1]*lte]}function I(){var e=eoe(h,0,0,_,T,b).apply(null,t(d,m)),r=eoe(h,p-e[0],f-e[1],_,T,b);return n=Kne(g,y,v),s=qne(t,r),l=qne(n,s),a=Zie(s,O),C()}function C(){return c=u=null,x}return x.stream=function(e){return c&&u===e?c:c=Jie(function(e){return zie({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(S(a(A(u=e)))))},x.preclip=function(e){return arguments.length?(S=e,E=void 0,C()):S},x.postclip=function(e){return arguments.length?(A=e,w=r=i=o=null,C()):A},x.clipAngle=function(e){return arguments.length?(S=+e?dre(E=e*cte):(E=null,fre),C()):E*lte},x.clipExtent=function(e){return arguments.length?(A=null==e?(w=r=i=o=null,Hre):yre(w=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),C()):null==w?null:[[w,r],[i,o]]},x.scale=function(e){return arguments.length?(h=+e,I()):h},x.translate=function(e){return arguments.length?(p=+e[0],f=+e[1],I()):[p,f]},x.center=function(e){return arguments.length?(d=e[0]%360*cte,m=e[1]%360*cte,I()):[d*lte,m*lte]},x.rotate=function(e){return arguments.length?(g=e[0]%360*cte,y=e[1]%360*cte,v=e.length>2?e[2]%360*cte:0,I()):[g*lte,y*lte,v*lte]},x.angle=function(e){return arguments.length?(b=e%360*cte,I()):b*lte},x.reflectX=function(e){return arguments.length?(_=e?-1:1,I()):_<0},x.reflectY=function(e){return arguments.length?(T=e?-1:1,I()):T<0},x.precision=function(e){return arguments.length?(a=Zie(s,O=e*e),C()):Tte(O)},x.fitExtent=function(e,t){return Yie(x,e,t)},x.fitSize=function(e,t){return Wie(x,e,t)},x.fitWidth=function(e,t){return qie(x,e,t)},x.fitHeight=function(e,t){return $ie(x,e,t)},function(){return t=e.apply(this,arguments),x.invert=t.invert&&k,I()}}function roe(e){var t=0,n=ite/3,r=noe(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*cte,n=e[1]*cte):[t*lte,n*lte]},i}function ioe(e,t){var n=bte(e),r=(n+bte(t))/2;if(ute(r)<nte)return function(e){var t=fte(e);function n(e,n){return[e*t,bte(n)/t]}return n.invert=function(e,n){return[e/t,wte(n*t)]},n}(e);var i=1+n*(2*r-n),o=Tte(i)/r;function a(e,t){var n=Tte(i-2*r*bte(t))/r;return[n*bte(e*=r),o-n*fte(e)]}return a.invert=function(e,t){var n=o-t,a=pte(e,ute(n))*_te(n);return n*r<0&&(a-=ite*_te(e)*_te(n)),[a/r,wte((i-(e*e+n*n)*r*r)/(2*r))]},a}function ooe(){return roe(ioe).scale(155.424).center([0,33.6442])}function aoe(){return ooe().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function soe(e){return function(t,n){var r=fte(t),i=fte(n),o=e(r*i);return o===1/0?[2,0]:[o*i*bte(t),o*bte(n)]}}function loe(e){return function(t,n){var r=Tte(t*t+n*n),i=e(r),o=bte(i),a=fte(i);return[pte(t*o,r*a),wte(r&&n*o/r)]}}var coe=soe((function(e){return Tte(2/(1+e))}));coe.invert=loe((function(e){return 2*wte(e/2)}));var uoe=soe((function(e){return(e=Ste(e))&&e/bte(e)}));function hoe(e,t){return[e,yte(Ete((ote+t)/2))]}function poe(e){var t,n,r,i=toe(e),o=i.center,a=i.scale,s=i.translate,l=i.clipExtent,c=null;function u(){var o=ite*a(),s=i(ere(i.rotate()).invert([0,0]));return l(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===hoe?[[Math.max(s[0]-o,c),t],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),u()):a()},i.translate=function(e){return arguments.length?(s(e),u()):s()},i.center=function(e){return arguments.length?(o(e),u()):o()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),u()):null==c?null:[[c,t],[n,r]]},u()}function foe(e){return Ete((ote+e)/2)}function doe(e,t){var n=fte(e),r=e===t?bte(e):yte(n/fte(t))/yte(foe(t)/foe(e)),i=n*vte(foe(e),r)/r;if(!r)return hoe;function o(e,t){i>0?t<-ote+nte&&(t=-ote+nte):t>ote-nte&&(t=ote-nte);var n=i/vte(foe(t),r);return[n*bte(r*e),i-n*fte(r*e)]}return o.invert=function(e,t){var n=i-t,o=_te(r)*Tte(e*e+n*n),a=pte(e,ute(n))*_te(n);return n*r<0&&(a-=ite*_te(e)*_te(n)),[a/r,2*hte(vte(i/o,1/r))-ote]},o}function moe(e,t){return[e,t]}function goe(e,t){var n=fte(e),r=e===t?bte(e):(n-fte(t))/(t-e),i=n/r+e;if(ute(r)<nte)return moe;function o(e,t){var n=i-t,o=r*e;return[n*bte(o),i-n*fte(o)]}return o.invert=function(e,t){var n=i-t,o=pte(e,ute(n))*_te(n);return n*r<0&&(o-=ite*_te(e)*_te(n)),[o/r,i-_te(r)*Tte(e*e+n*n)]},o}uoe.invert=loe((function(e){return e})),hoe.invert=function(e,t){return[e,2*hte(mte(t))-ote]},moe.invert=moe;var yoe=1.340264,voe=-.081106,boe=893e-6,_oe=.003796,Toe=Tte(3)/2;function Eoe(e,t){var n=wte(Toe*bte(t)),r=n*n,i=r*r*r;return[e*fte(n)/(Toe*(yoe+3*voe*r+i*(7*boe+9*_oe*r))),n*(yoe+voe*r+i*(boe+_oe*r))]}function Soe(e,t){var n=fte(t),r=fte(e)*n;return[n*bte(e)/r,bte(t)/r]}function woe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Aoe(e,t){return[fte(t)*bte(e),bte(t)]}function Ooe(e,t){var n=fte(t),r=1+fte(e)*n;return[n*bte(e)/r,bte(t)/r]}function xoe(e,t){return[yte(Ete((ote+t)/2)),-e]}Eoe.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(yoe+voe*i+o*(boe+_oe*i))-t)/(yoe+3*voe*i+o*(7*boe+9*_oe*i)))*r)*i*i,!(ute(n)<rte));++a);return[Toe*e*(yoe+3*voe*i+o*(7*boe+9*_oe*i))/fte(r),wte(bte(r)/Toe)]},Soe.invert=loe(hte),woe.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(ute(n)>nte&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Aoe.invert=loe(wte),Ooe.invert=loe((function(e){return 2*hte(e)})),xoe.invert=function(e,t){return[-t,2*hte(mte(e))-ote]};const koe=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:aoe,geoAlbersUsa:function(){var e,t,n,r,i,o,a=aoe(),s=ooe().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=ooe().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function h(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(e)},u.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([a.stream(t=n),s.stream(n),l.stream(n)])},u.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),l.precision(e),h()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),l.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),r=s.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+nte,u+.12*t+nte],[o-.214*t-nte,u+.234*t-nte]]).stream(c),i=l.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+nte,u+.166*t+nte],[o-.115*t-nte,u+.234*t-nte]]).stream(c),h()},u.fitExtent=function(e,t){return Yie(u,e,t)},u.fitSize=function(e,t){return Wie(u,e,t)},u.fitWidth=function(e,t){return qie(u,e,t)},u.fitHeight=function(e,t){return $ie(u,e,t)},u.scale(1070)},geoArea:function(e){return Fte=new vc,Dte(e,Gte),2*Fte},geoAzimuthalEqualArea:function(){return toe(coe).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:coe,geoAzimuthalEquidistant:function(){return toe(uoe).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:uoe,geoBounds:function(e){var t,n,r,i,o,a,s;if(tne=ene=-(Zte=Jte=1/0),sne=[],Dte(e,cne),n=sne.length){for(sne.sort(vne),t=1,o=[r=sne[0]];t<n;++t)bne(r,(i=sne[t])[0])||bne(r,i[1])?(yne(r[0],i[1])>yne(r[0],r[1])&&(r[1]=i[1]),yne(i[0],r[1])>yne(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=yne(r[1],i[0]))>a&&(a=s,Zte=i[0],ene=r[1])}return sne=lne=null,Zte===1/0||Jte===1/0?[[NaN,NaN],[NaN,NaN]]:[[Zte,Jte],[ene,tne]]},geoCentroid:function(e){_ne=Tne=Ene=Sne=wne=Ane=One=xne=0,kne=new vc,Ine=new vc,Cne=new vc,Dte(e,Lne);var t=+kne,n=+Ine,r=+Cne,i=gte(t,n,r);return i<rte&&(t=Ane,n=One,r=xne,Tne<nte&&(t=Ene,n=Sne,r=wne),(i=gte(t,n,r))<rte)?[NaN,NaN]:[pte(n,t)*lte,wte(r/i)*lte]},geoCircle:function(){var e,t,n=Wne([0,0]),r=Wne(90),i=Wne(6),o={point:function(n,r){e.push(n=t(n,r)),n[0]*=lte,n[1]*=lte}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*cte,l=i.apply(this,arguments)*cte;return e=[],t=Kne(-a[0]*cte,-a[1]*cte,0).invert,tre(o,s,l,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return a.center=function(e){return arguments.length?(n="function"==typeof e?e:Wne([+e[0],+e[1]]),a):n},a.radius=function(e){return arguments.length?(r="function"==typeof e?e:Wne(+e),a):r},a.precision=function(e){return arguments.length?(i="function"==typeof e?e:Wne(+e),a):i},a},geoClipAntimeridian:fre,geoClipCircle:dre,geoClipExtent:function(){var e,t,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=yre(r,i,o,a)(t=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],e=t=null,n):[[r,i],[o,a]]}}},geoClipRectangle:yre,geoConicConformal:function(){return roe(doe).scale(109.5).parallels([30,30])},geoConicConformalRaw:doe,geoConicEqualArea:ooe,geoConicEqualAreaRaw:ioe,geoConicEquidistant:function(){return roe(goe).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:goe,geoContains:function(e,t){return(e&&Cre.hasOwnProperty(e.type)?Cre[e.type]:Dre)(e,t)},geoDistance:Ire,geoEqualEarth:function(){return toe(Eoe).scale(177.158)},geoEqualEarthRaw:Eoe,geoEquirectangular:function(){return toe(moe).scale(152.63)},geoEquirectangularRaw:moe,geoGnomonic:function(){return toe(Soe).scale(144.049).clipAngle(60)},geoGnomonicRaw:Soe,geoGraticule:Gre,geoGraticule10:function(){return Gre()()},geoIdentity:function(){var e,t,n,r,i,o,a,s=1,l=0,c=0,u=1,h=1,p=0,f=null,d=1,m=1,g=zie({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=Hre;function v(){return d=s*u,m=s*h,o=a=null,b}function b(n){var r=n[0]*d,i=n[1]*m;if(p){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+l,i+c]}return b.invert=function(n){var r=n[0]-l,i=n[1]-c;if(p){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/d,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,f=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(f=n=r=i=null,Hre):yre(f=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==f?null:[[f,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],v()):[l,c]},b.angle=function(n){return arguments.length?(t=bte(p=n%360*cte),e=fte(p),v()):p*lte},b.reflectX=function(e){return arguments.length?(u=e?-1:1,v()):u<0},b.reflectY=function(e){return arguments.length?(h=e?-1:1,v()):h<0},b.fitExtent=function(e,t){return Yie(b,e,t)},b.fitSize=function(e,t){return Wie(b,e,t)},b.fitWidth=function(e,t){return qie(b,e,t)},b.fitHeight=function(e,t){return $ie(b,e,t)},b},geoInterpolate:function(e,t){var n=e[0]*cte,r=e[1]*cte,i=t[0]*cte,o=t[1]*cte,a=fte(r),s=bte(r),l=fte(o),c=bte(o),u=a*fte(n),h=a*bte(n),p=l*fte(i),f=l*bte(i),d=2*wte(Tte(Ate(o-r)+a*l*Ate(i-n))),m=bte(d),g=d?function(e){var t=bte(e*=d)/m,n=bte(d-e)/m,r=n*u+t*p,i=n*h+t*f,o=n*s+t*c;return[pte(i,r)*lte,pte(o,Tte(r*r+i*i))*lte]}:function(){return[n*lte,r*lte]};return g.distance=d,g},geoLength:Ore,geoMercator:function(){return poe(hoe).scale(961/ste)},geoMercatorRaw:hoe,geoNaturalEarth1:function(){return toe(woe).scale(175.295)},geoNaturalEarth1Raw:woe,geoOrthographic:function(){return toe(Aoe).scale(249.5).clipAngle(90+nte)},geoOrthographicRaw:Aoe,geoPath:function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Dte(e,n(r))),r.result()}return o.area=function(e){return Dte(e,n(Jre)),Jre.result()},o.measure=function(e){return Dte(e,n(Gie)),Gie.result()},o.bounds=function(e){return Dte(e,n(oie)),oie.result()},o.centroid=function(e){return Dte(e,n(Iie)),Iie.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,Hre):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new Hie):new Cie(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},geoProjection:toe,geoProjectionMutator:noe,geoRotation:ere,geoStereographic:function(){return toe(Ooe).scale(250).clipAngle(142)},geoStereographicRaw:Ooe,geoStream:Dte,geoTransform:function(e){return{stream:zie(e)}},geoTransverseMercator:function(){var e=poe(xoe),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:xoe},Symbol.toStringTag,{value:"Module"}));var Ioe=[].slice,Coe={};function Poe(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Doe(e){if(!e._start)try{!function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=Roe(e,t),--e._waiting,++e._active,n=i.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||Coe)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])Noe(e,t);else if(!e._data)throw t}}function Roe(e,t){return function(n,r){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,null==e._error&&(null!=n?Noe(e,n):(e._data[t]=r,e._waiting?Doe(e):Moe(e))))}}function Noe(e,t){var n,r=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;--r>=0;)if((n=e._tasks[r])&&(e._tasks[r]=null,n.abort))try{n.abort()}catch{}e._active=NaN,Moe(e)}function Moe(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function Loe(e){if(null==e)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new Poe(e)}Poe.prototype=Loe.prototype={constructor:Poe,defer:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=Ioe.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),Doe(this),this},abort:function(){return null==this._error&&Noe(this,new Error("abort")),this},await:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,n){e.apply(null,[t].concat(n))},Moe(this),this},awaitAll:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,Moe(this),this}};const joe=Object.freeze(Object.defineProperty({__proto__:null,queue:Loe},Symbol.toStringTag,{value:"Module"}));var Boe="$";function Foe(){}function Goe(e,t){var n=new Foe;if(e instanceof Foe)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Hoe(){}Foe.prototype=Goe.prototype={constructor:Foe,has:function(e){return Boe+e in this},get:function(e){return this[Boe+e]},set:function(e,t){return this[Boe+e]=t,this},remove:function(e){var t=Boe+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Boe&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Boe&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Boe&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Boe&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Boe&&++e;return e},empty:function(){for(var e in this)if(e[0]===Boe)return!1;return!0},each:function(e){for(var t in this)t[0]===Boe&&e(this[t],t.slice(1),this)}};var Uoe=Goe.prototype;Hoe.prototype={constructor:Hoe,has:Uoe.has,add:function(e){return this[Boe+(e+="")]=e,this},remove:Uoe.remove,clear:Uoe.clear,values:Uoe.keys,size:Uoe.size,empty:Uoe.empty,each:Uoe.each};var zoe={value:function(){}};function Voe(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Xoe(r)}function Xoe(e){this._=e}function Yoe(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Woe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zoe,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function qoe(e,t){var n,r,i,o,a=Voe("beforesend","progress","load","error"),s=Goe(),l=new XMLHttpRequest,c=null,u=null,h=0;function p(e){var t,r=l.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||r>=200&&r<300||304===r){if(i)try{t=i.call(n,l)}catch(o){return void a.call("error",n,o)}else t=l;a.call("load",n,t)}else a.call("error",n,e)}if(typeof XDomainRequest<"u"&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=p:l.onreadystatechange=function(e){l.readyState>3&&p(e)},l.onprogress=function(e){a.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(null==t?s.remove(e):s.set(e,t+""),n)},mimeType:function(e){return arguments.length?(r=null==e?null:e+"",n):r},responseType:function(e){return arguments.length?(o=e,n):o},timeout:function(e){return arguments.length?(h=+e,n):h},user:function(e){return arguments.length<1?c:(c=null==e?null:e+"",n)},password:function(e){return arguments.length<1?u:(u=null==e?null:e+"",n)},response:function(e){return i=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,i,p){return l.open(t,e,!0,c,u),null!=r&&!s.has("accept")&&s.set("accept",r+",*/*"),l.setRequestHeader&&s.each((function(e,t){l.setRequestHeader(t,e)})),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=o&&(l.responseType=o),h>0&&(l.timeout=h),null==p&&"function"==typeof i&&(p=i,i=null),null!=p&&1===p.length&&(p=function(e){return function(t,n){e(null==t?n:null)}}(p)),null!=p&&n.on("error",p).on("load",(function(e){p(null,e)})),a.call("beforesend",n,l),l.send(i??null),n},abort:function(){return l.abort(),n},on:function(){var e=a.on.apply(a,arguments);return e===a?n:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}function $oe(e,t){return function(n,r){var i=qoe(n).mimeType(e).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}Xoe.prototype=Voe.prototype={constructor:Xoe,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Woe(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Woe(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Yoe(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Xoe(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Koe=$oe("text/html",(function(e){return document.createRange().createContextualFragment(e.responseText)})),Qoe=$oe("application/json",(function(e){return JSON.parse(e.responseText)})),Zoe=$oe("text/plain",(function(e){return e.responseText})),Joe=$oe("application/xml",(function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}));var eae={},tae={};function nae(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function rae(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function iae(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function oae(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+iae(-e,6):e>9999?"+"+iae(e,6):iae(e,4)}(e.getUTCFullYear())+"-"+iae(e.getUTCMonth()+1,2)+"-"+iae(e.getUTCDate(),2)+(i?"T"+iae(t,2)+":"+iae(n,2)+":"+iae(r,2)+"."+iae(i,3)+"Z":r?"T"+iae(t,2)+":"+iae(n,2)+":"+iae(r,2)+"Z":n||t?"T"+iae(t,2)+":"+iae(n,2)+"Z":"")}function aae(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return tae;if(c)return c=!1,eae;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==tae;){for(var h=[];r!==eae&&r!==tae;)h.push(r),r=u();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?oae(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=nae(e);return function(r,i){return t(n(r),i,e)}}(e,t):nae(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=rae(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=rae(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var sae=aae(",").parse,lae=aae("\t").parse;function cae(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=qoe(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(function(e,t){return function(n){return e(n.responseText,t)}}(t,r=e)):r},o.row(r),i?o.get(i):o}}const uae=cae("text/csv",sae),hae=cae("text/tab-separated-values",lae),pae=Object.freeze(Object.defineProperty({__proto__:null,csv:uae,html:Koe,json:Qoe,request:qoe,text:Zoe,tsv:hae,xml:Joe},Symbol.toStringTag,{value:"Module"}));function fae(){return fae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fae.apply(this,arguments)}function dae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mae(r.key),r)}}function mae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function gae(e,t){return(gae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yae(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=vae(e);if(t){var i=vae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vae(e){return(vae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let bae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gae(e,t)}(n,e);var t=yae(n);function n(e){let{items:r}=e;var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(i=t.call(this)).state={items:r,isSorting:!1},i}return function(e,t,n){t&&dae(e.prototype,t),n&&dae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"onSortStart",value:function(e,t){let{node:n,index:r,collection:i}=e;t.stopImmediatePropagation();const{onSortStart:o}=this.props;this.setState({isSorting:!0}),o&&o(this.ref),this.sortingIndex=r,this.sortStartTop=t.offsetTop,this.sortStartLeft=t.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function(e){let{oldIndex:t,newIndex:n}=e;const{onSortEnd:r}=this.props,{items:i}=this.state;this.setState({items:oE(i,t,n),isSorting:!1}),r&&r(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){const e=this.props.component,{items:t,isSorting:n}=this.state,r={isSorting:n,items:t,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return i.createElement(e,fae({},this.props,r,{ref:e=>{this.ref=e}}))}}]),n}(i.Component);bae.propTypes={axis:Ls.string,className:Ls.string,component:Ls.func,editable:Ls.bool,handleConfigTrack:Ls.func,handleResizeTrack:Ls.func,height:Ls.number,helperClass:Ls.string,itemClass:Ls.string,itemControlAlignLeft:Ls.bool,itemReactClass:Ls.func,items:Ls.array,onAddSeries:Ls.func,onCloseTrack:Ls.func,onCloseTrackMenuOpened:Ls.func,onConfigTrackMenuOpened:Ls.func,onSortEnd:Ls.func,onSortStart:Ls.func,referenceAncestor:Ls.string,resizeHandles:Ls.object,useDragHandle:Ls.bool,width:Ls.number},bae.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600};const _ae={"top-right-handle":"_top-right-handle_cizw2_1","bottom-right-handle":"_bottom-right-handle_cizw2_2","top-left-handle":"_top-left-handle_cizw2_7","bottom-left-handle":"_bottom-left-handle_cizw2_8","top-draggable-handle":"_top-draggable-handle_cizw2_13","bottom-draggable-handle":"_bottom-draggable-handle_cizw2_14","left-draggable-handle":"_left-draggable-handle_cizw2_15","right-draggable-handle":"_right-draggable-handle_cizw2_16","draggable-div":"_draggable-div_cizw2_22","top-draggable-handle-grabber":"_top-draggable-handle-grabber_cizw2_27","bottom-draggable-handle-grabber":"_bottom-draggable-handle-grabber_cizw2_28","left-draggable-handle-grabber":"_left-draggable-handle-grabber_cizw2_43","right-draggable-handle-grabber":"_right-draggable-handle-grabber_cizw2_44"};function Tae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eae(r.key),r)}}function Eae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Sae(e,t){return(Sae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wae(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Oae(e);if(t){var i=Oae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Aae(e)}(this,n)}}function Aae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oae(e){return(Oae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let xae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sae(e,t)}(n,e);var t=wae(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).dragTopRight=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragTopRightFunc.bind(Aae(r))),r.dragTopLeft=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragTopLeftFunc.bind(Aae(r))),r.dragBottomRight=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragBottomRightFunc.bind(Aae(r))),r.dragBottomLeft=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragBottomLeftFunc.bind(Aae(r))),r.dragBottom=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragBottomFunc.bind(Aae(r))),r.dragTop=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragTopFunc.bind(Aae(r))),r.dragLeft=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragLeftFunc.bind(Aae(r))),r.dragRight=r_().on("start",r.dragStart.bind(Aae(r))).on("drag",r.dragRightFunc.bind(Aae(r))),r.minWidth=10,r.minHeight=10,r.bottomHandleWidth=20,r.state={uid:r.props.uid,width:r.props.width,height:r.props.height,top:r.props.top,left:r.props.left},r.domBody=ql("body").node(),r}return function(e,t,n){t&&Tae(e.prototype,t),n&&Tae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){ql(this.bottomHandle).call(this.dragBottom),ql(this.topHandle).call(this.dragTop),ql(this.leftHandle).call(this.dragLeft),ql(this.rightHandle).call(this.dragRight)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){"width"in e&&this.setState({width:e.width}),"height"in e&&this.setState({height:e.height})}},{key:"dragBottomFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight,this.setState({height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartLeft+t[0]-this.dragStartMousePos[0];r=n>this.minWidth?r:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:r,width:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartTop+t[1]-this.dragStartMousePos[1];r=n>this.minHeight?r:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:r,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth,this.setState({width:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);r=r>this.minWidth?r:this.minWidth;let i=this.dragStartLeft+t[0]-this.dragStartMousePos[0];i=r>this.minWidth?i:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:i,width:r,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);r=r>this.minHeight?r:this.minHeight,this.setState({width:n,height:r}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartTop+t[1]-this.dragStartMousePos[1];r=n>this.minHeight?r:this.dragStartTop+this.dragStartHeight-this.minHeight;let i=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);i=i>this.minWidth?i:this.minWidth,this.setState({top:r,width:i,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(e){const t=Jl(e,this.domBody);let n=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartLeft+t[0]-this.dragStartMousePos[0];r=n>this.minWidth?r:this.dragStartLeft+this.dragStartWidth-this.minWidth;let i=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);i=i>this.minHeight?i:this.minHeight;let o=this.dragStartTop+t[1]-this.dragStartMousePos[1];o=i>this.minHeight?o:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:o,left:r,width:n,height:i}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(e){this.dragStartMousePos=Jl(e,this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,e.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){this.props.sizeChanged&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){const e=this.props.theme===eS?"white":"black",t={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,opacity:this.props.opacity},n={left:this.state.width/2-12,width:24},r={top:this.state.height/2-12,height:24},o={bottom:{...n,bottom:1},top:{...n,top:1},left:{...r,left:1},right:{...r,right:1}},a=[...this.props.resizeHandles].map((t=>i.createElement("div",{key:t,ref:e=>{this[`${t}Handle`]=e},className:_ae[`${t}-draggable-handle`],style:o[t],title:"Resize track"},i.createElement("div",{className:_ae[`${t}-draggable-handle-grabber`],style:{borderColor:e}}))));return i.createElement("div",{ref:e=>{this.divContainer=e},className:zg(this.props.className,_ae["draggable-div"]),style:t},a)}}]),n}(i.Component);xae.propTypes={className:Ls.string,height:Ls.number,left:Ls.number,opacity:Ls.number,resizeHandles:Ls.object,sizeChanged:Ls.func,top:Ls.number,trackClosed:Ls.func,trackRotated:Ls.func,uid:Ls.string,width:Ls.number,theme:Ls.symbol};const kae=MK(xae);function Iae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cae(r.key),r)}}function Cae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Pae(e,t){return(Pae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dae(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Rae(e);if(t){var i=Rae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rae(e){return(Rae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Nae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pae(e,t)}(n,e);var t=Dae(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={controlsVisible:!1},r}return function(e,t,n){t&&Iae(e.prototype,t),n&&Iae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){let e=null;return e=this.moveable?kE((()=>i.createElement("svg",{className:"no-zoom",height:"10px",onClick:()=>{},style:this.getMoveImgStyle(),width:"10px"},i.createElement("use",{xlinkHref:"#move"})))):kE((()=>i.createElement("div",null))),i.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},i.createElement(e,null),i.createElement("svg",{ref:e=>{this.imgConfig=e},className:"no-zoom",height:"10px",onClick:()=>{const e=o.findDOMNode(this.imgConfig).getBoundingClientRect();this.props.onConfigTrackMenuOpened(this.props.uid,e)},style:this.getSettingsImgStyle(),width:"10px"},i.createElement("use",{xlinkHref:"#cog"})),i.createElement("svg",{ref:e=>{this.imgAdd=e},className:"no-zoom",height:"10px",onClick:()=>this.props.onAddSeries(this.props.uid),style:this.getAddImgStyle(),width:"10px"},i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{ref:e=>{this.imgClose=e},className:"no-zoom",height:"10px",onClick:()=>{const e=o.findDOMNode(this.imgClose).getBoundingClientRect();this.props.onCloseTrackMenuOpened(this.props.uid,e)},style:this.getCloseImgStyle(),width:"10px"},i.createElement("use",{xlinkHref:"#cross"})))}}]),n}(i.Component);function Mae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lae(r.key),r)}}function Lae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function jae(e,t){return(jae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bae(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Fae(e);if(t){var i=Fae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fae(e){return(Fae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Nae.propTypes={configMenuOpen:Ls.bool,onConfigTrackMenuOpened:Ls.func,onCloseTrackMenuOpened:Ls.func,onAddSeries:Ls.func,uid:Ls.string};let Gae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jae(e,t)}(n,e);var t=Bae(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).moveable=!0,r}return function(e,t,n){t&&Mae(e.prototype,t),n&&Mae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.el=e},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:()=>{this.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},i.createElement(kae,{key:this.props.uid,height:this.props.height,resizeHandles:this.props.editable?this.props.resizeHandles:new Set,sizeChanged:e=>this.props.handleResizeTrack(this.props.uid,e.width,e.height),style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}]),n}(Nae);function Hae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uae(r.key),r)}}function Uae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function zae(e,t){return(zae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vae(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Xae(e);if(t){var i=Xae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xae(e){return(Xae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gae.propTypes={className:Ls.string,uid:Ls.string,item:Ls.object,height:Ls.number,width:Ls.number};const Yae={pointerEvents:"all"};let Wae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zae(e,t)}(n,e);var t=Vae(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Hae(e.prototype,t),n&&Hae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getControls",value:function(e){return i.createElement($K,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:Yae,imgStyleClose:Yae,imgStyleMove:Yae,imgStyleSettings:Yae,isMoveable:this.moveable,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(Gae);const qae=jE((e=>i.createElement(Wae,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})));function $ae(){return $ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$ae.apply(this,arguments)}const Kae=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return YT(this,n),VT($T($T(t=KT(this,QT(n).call(this,e)))),"state",{}),VT($T($T(t)),"handleStart",(function(e){var n=t.props,r=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=yE(e);var o=pE(e.target,(function(e){return null!=e.sortableInfo}));if(o&&o.sortableInfo&&t.nodeIsChild(o)&&!t.state.sorting){var a=t.props.useDragHandle,s=o.sortableInfo,l=s.index,c=s.collection;if(s.disabled||a&&!pE(e.target,IE))return;t.manager.active={collection:c,index:l},!function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)&&e.target.tagName===xE.Anchor&&e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),VT($T($T(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),VT($T($T(t)),"handleMove",(function(e){var n=t.props,r=n.distance,i=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var o=yE(e),a={x:t.position.x-o.x,y:t.position.y-o.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||i&&!(s>=i)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),VT($T($T(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),VT($T($T(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),VT($T($T(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),i=function(){if(n){var i=function(){var n=f.sortableInfo.index,r=function(e){var t=window.getComputedStyle(e);return{bottom:dE(t.marginBottom),left:dE(t.marginLeft),right:dE(t.marginRight),top:dE(t.marginTop)}}(f),i=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:dE(t.gridColumnGap),y:dE(t.gridRowGap)}:{x:0,y:0}}(t.container),o=t.scrollContainer.getBoundingClientRect(),u=s({index:n,node:f,collection:d});if(t.node=f,t.margin=r,t.gridGap=i,t.width=u.width,t.height=u.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=o,t.index=n,t.newIndex=n,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=vE(f,t.container),t.initialOffset=yE(m?XT({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(function(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return nE(r.querySelectorAll(t)).forEach((function(e,t){"file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===xE.Canvas&&n[t].width>0&&n[t].height>0&&e.getContext("2d").drawImage(n[t],0,0)})),r}(f)),cE(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-r.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-r.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),c&&(t.sortableGhost=f,cE(f,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var g=p?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,y=g.top,v=g.left,b=g.width,_=y+g.height,T=v+b;t.axis.x&&(t.minTranslate.x=v-t.boundingClientRect.left,t.maxTranslate.x=T-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=y-t.boundingClientRect.top,t.maxTranslate.y=_-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(p?0:o.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(p?t.contentWindow.innerWidth:o.left+o.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(p?0:o.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(p?t.contentWindow.innerHeight:o.top+o.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?f:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(sE.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),sE.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:n}),h&&h({node:f,index:n,collection:d,isKeySorting:m,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),m&&t.keyMove(0)},o=t.props,a=o.axis,s=o.getHelperDimensions,l=o.helperClass,c=o.hideSortableGhost,u=o.updateBeforeSortStart,h=o.onSortStart,p=o.useWindowAsScrollContainer,f=n.node,d=n.collection,m=t.manager.isKeySorting,g=function(){if("function"==typeof u){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(r){return t(!0,r)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}((function(){var t=f.sortableInfo.index;return Promise.resolve(u({collection:d,index:t,node:f,isKeySorting:m},e)).then((function(){}))}),(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(i):i()}}();return Promise.resolve(i&&i.then?i.then((function(){})):void 0)}catch(o){return Promise.reject(o)}})),VT($T($T(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),VT($T($T(t)),"handleSortEnd",(function(e){var n=t.props,r=n.hideSortableGhost,i=n.onSortEnd,o=t.manager,a=o.active.collection,s=o.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(sE.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),sE.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&cE(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=l.length;c<u;c++){var h=l[c],p=h.node;h.edgeOffset=null,h.boundingClientRect=null,uE(p,null),hE(p,null),h.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof i&&i({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1})),VT($T($T(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=XT({},t.translate),i=0,o=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),o=t.translate.y-r.y),t.translate=r,uE(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=o)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),VT($T($T(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),VT($T($T(t)),"handleKeyDown",(function(e){var n=e.keyCode,r=t.props,i=r.shouldCancelStart,o=r.keyCodes,a=XT({},DE,void 0===o?{}:o);t.manager.active&&!t.manager.isKeySorting||!t.manager.active&&(!a.lift.includes(n)||i(e)||!t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(n)&&!t.manager.active?t.keyLift(e):a.drop.includes(n)&&t.manager.active?t.keyDrop(e):a.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(n)?t.keyMove(-1):a.down.includes(n)&&t.keyMove(1))})),VT($T($T(t)),"keyLift",(function(e){var n=e.target,r=pE(n,(function(e){return null!=e.sortableInfo})).sortableInfo,i=r.index,o=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:o},t.handlePress(e)})),VT($T($T(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,o=t.newIndex;if(!(i<0||i>r)){t.prevIndex=o,t.newIndex=i;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find((function(e){return e.node.sortableInfo.index===a})),l=s.node,c=t.containerScrollDelta,u=s.boundingClientRect||gE(l,c),h=s.translate||{x:0,y:0},p={top:u.top+h.y-c.top,left:u.left+h.x-c.left},f=o<i,d={x:f&&t.axis.x?l.offsetWidth-t.width:0,y:f&&t.axis.y?l.offsetHeight-t.height:0};t.handleSortMove({pageX:p.left+d.x,pageY:p.top+d.y,ignoreTransition:0===e})}})),VT($T($T(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),VT($T($T(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),VT($T($T(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,r=e.target,i=pE(r,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?IE(r):r.sortableInfo)})),function(e){tE(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new rE,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return JT(n,t),qT(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:_E(e.container)||e.container,e.autoScroller=new CE(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return sE[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return sE[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,i=t.lockToContainerEdges,o=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?o:a,l=this.manager.isKeySorting,c=e.ignoreTransition,u=yE(e),h={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,i){var p=function(e){var t=e.height,n=e.width,r=e.lockOffset,i=Array.isArray(r)?r:[r,r];tE(2===i.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var o=HT(i,2),a=o[0],s=o[1];return[bE({height:t,lockOffset:a,width:n}),bE({height:t,lockOffset:s,width:n})]}({height:this.height,lockOffset:r,width:this.width}),f=HT(p,2),d=f[0],m=f[1],g={x:this.width/2-d.x,y:this.height/2-d.y},y={x:this.width/2-m.x,y:this.height/2-m.y};h.x=fE(this.minTranslate.x+g.x,this.maxTranslate.x-y.x,h.x),h.y=fE(this.minTranslate.y+g.y,this.maxTranslate.y-y.y,h.y)}"x"===n?h.y=0:"y"===n&&(h.x=0),l&&s&&!c&&hE(this.helper,s),uE(this.helper,h)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,o=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var h=0,p=a.length;h<p;h++){var f=a[h].node,d=f.sortableInfo.index,m=f.offsetWidth,g=f.offsetHeight,y={height:this.height>g?g/2:this.height/2,width:this.width>m?m/2:this.width/2},v=c&&d>this.index&&d<=u,b=c&&d<this.index&&d>=u,_={x:0,y:0},T=a[h].edgeOffset;T||(T=vE(f,this.container),a[h].edgeOffset=T,c&&(a[h].boundingClientRect=gE(f,i)));var E=h<a.length-1&&a[h+1],S=h>0&&a[h-1];(E&&!E.edgeOffset&&(E.edgeOffset=vE(E.node,this.container),c&&(E.boundingClientRect=gE(E.node,i))),d!==this.index)?(t&&hE(f,t),this.axis.x?this.axis.y?b||d<this.index&&(s+o.left-y.width<=T.left&&l+o.top<=T.top+y.height||l+o.top+y.height<=T.top)?(_.x=this.width+this.marginOffset.x,T.left+_.x>this.containerBoundingRect.width-y.width&&E&&(_.x=E.edgeOffset.left-T.left,_.y=E.edgeOffset.top-T.top),null===this.newIndex&&(this.newIndex=d)):(v||d>this.index&&(s+o.left+y.width>=T.left&&l+o.top+y.height>=T.top||l+o.top+y.height>=T.top+g))&&(_.x=-(this.width+this.marginOffset.x),T.left+_.x<this.containerBoundingRect.left+y.width&&S&&(_.x=S.edgeOffset.left-T.left,_.y=S.edgeOffset.top-T.top),this.newIndex=d):v||d>this.index&&s+o.left+y.width>=T.left?(_.x=-(this.width+this.marginOffset.x),this.newIndex=d):(b||d<this.index&&s+o.left<=T.left+y.width)&&(_.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=d)):this.axis.y&&(v||d>this.index&&l+o.top+y.height>=T.top?(_.y=-(this.height+this.marginOffset.y),this.newIndex=d):(b||d<this.index&&l+o.top<=T.top+y.height)&&(_.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=d))),uE(f,_),a[h].translate=_):n&&(this.sortableGhost=f,cE(f,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var w=c?this.prevIndex:u;r&&this.newIndex!==w&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:w,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return tE(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,o.findDOMNode)(this):e(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=r.withRef?"wrappedInstance":null;return(0,i.createElement)(e,BT({ref:t},aE(this.props,NE)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(i.Component),VT(t,"displayName",mE("sortableList",e)),VT(t,"defaultProps",RE),VT(t,"propTypes",PE),VT(t,"childContextTypes",{manager:Ls.object.isRequired}),n}((e=>{let{className:t,items:n,itemClass:r,itemControlAlignLeft:o,sortingIndex:a,useDragHandle:s,sortableHandlers:l,height:c,width:u,onCloseTrack:h,onCloseTrackMenuOpened:p,onConfigTrackMenuOpened:f,onAddSeries:d,handleConfigTrack:m,editable:g,itemReactClass:y,handleResizeTrack:v,resizeHandles:b}=e;const _=n.map(((e,t)=>i.createElement(y,{key:`sci-${e.uid}`,className:r,controlAlignLeft:o,sortingIndex:a,index:t,uid:e.uid,height:e.height,width:e.width,item:e,useDragHandle:s,onCloseTrack:h,onCloseTrackMenuOpened:p,onConfigTrackMenuOpened:f,onAddSeries:d,handleConfigTrack:m,editable:g,handleResizeTrack:v,resizeHandles:b})));return i.createElement("div",$ae({className:t,style:{height:c,width:u,background:"transparent"}},l),_)})),Qae="_horizontal-tiled-plot_1bqkg_1";function Zae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jae(r.key),r)}}function Jae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ese(e,t){return(ese=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tse(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=rse(e);if(t){var i=rse(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nse(e)}(this,n)}}function nse(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rse(e){return(rse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ise(e){return e&&e.sourceEvent}let ose=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ese(e,t)}(n,e);var t=tse(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).brushBehavior=RT().on("start",r.brushStarted.bind(nse(r))).on("brush",r.brushed.bind(nse(r))).on("end",r.brushedEnded.bind(nse(r))),r}return function(e,t,n){t&&Zae(e.prototype,t),n&&Zae(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==e.rangeSelection&&this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==t):this.props.rangeSelection===e.rangeSelection||(this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,e.rangeSelectionEnd),this.state!==t)}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,IA(this.brushEl,QK["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,ise(e)&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(e.selection))}},{key:"brushStarted",value:function(e){!ise(e)||!e.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(e){if(!this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(e.selection)),e.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushEl.transition().call(this.brushBehavior.move,n):this.brushEl.call(this.brushBehavior.move,n)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map((e=>e.height)).reduce(NA,0),t=this.props.tracks.map((e=>iO(e))).reduce(OA,!1),n=this.props.isRangeSelectionActive?QK["track-range-selection-active"]:QK["track-range-selection"];return i.createElement("div",{className:zg("horizontal-tiled-plot",Qae)},t&&i.createElement("svg",{ref:e=>{this.brushEl=ql(e)},className:n,style:{height:e,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"}),i.createElement(bae,{className:zg(wQ.list,wQ.stylizedList),component:Kae,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:e,helperClass:wQ.stylizedHelper,itemClass:wQ.stylizedItem,itemReactClass:qae,items:this.props.tracks.map((e=>({configMenuVisible:e.uid===this.props.configTrackMenuId,uid:e.uid||ag.nice(),width:this.props.width,height:e.height,value:e.value}))),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}}]),n}(i.Component);function ase(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sse(r.key),r)}}function sse(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function lse(e,t){return(lse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cse(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=use(e);if(t){var i=use(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function use(e){return(use=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ose.propTypes={configTrackMenuId:Ls.string,editable:Ls.bool,handleConfigTrack:Ls.func,handleResizeTrack:Ls.func,handleSortEnd:Ls.func,is1dRangeSelection:Ls.bool,isRangeSelectionActive:Ls.bool,onAddSeries:Ls.func,onCloseTrack:Ls.func,onCloseTrackMenuOpened:Ls.func,onConfigTrackMenuOpened:Ls.func,onRangeSelection:Ls.func,onRangeSelectionEnd:Ls.func,onRangeSelectionReset:Ls.func,onRangeSelectionStart:Ls.func,rangeSelection:Ls.array,rangeSelectionEnd:Ls.bool,referenceAncestor:Ls.func,resizeHandles:Ls.object,scale:Ls.func,tracks:Ls.array,width:Ls.number};const hse={pointerEvents:"all"};let pse=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lse(e,t)}(n,e);var t=cse(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&ase(e.prototype,t),n&&ase(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getControls",value:function(e){return i.createElement($K,{imgStyleAdd:hse,imgStyleClose:hse,imgStyleMove:hse,imgStyleSettings:hse,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(Gae);function fse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dse(r.key),r)}}function dse(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mse(){return mse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mse.apply(this,arguments)}function gse(e,t){return(gse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yse(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=bse(e);if(t){var i=bse(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vse(e)}(this,n)}}function vse(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bse(e){return(bse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let _se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gse(e,t)}(n,e);var t=yse(n);function n(e,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=t.call(this,e,r);const{registerViewportChanged:o,removeViewportChanged:a}=e,s=ag.nice();return i.uid=s,i.removeViewportChanged=a,i.viewportXDomain=null,i.viewportYDomain=null,o(s,i.viewportChanged.bind(vse(i))),i}return function(e,t,n){t&&fse(e.prototype,t),n&&fse(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"draw",value:function(){const e=this.pMain;if(!this.viewportXDomain||!this.viewportYDomain)return;e.clear(),e.lineStyle(1,255,1),e.beginFill(16740363,1);const t=this._xScale(this.viewportXDomain[0]),n=this._yScale(this.viewportYDomain[0]),r=this._xScale(this.viewportXDomain[1])-this._xScale(this.viewportXDomain[0]),i=this._yScale(this.viewportYDomain[1])-this._yScale(this.viewportYDomain[0]);this.pMain.drawRect(t,n,r,i)}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){mse(bse(n.prototype),"setPosition",this).call(this,e),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.draw()}}]),n}(UQ);function Tse(e){this.size=0,this.limit=e,this._keymap={}}Object.assign(Tse.prototype,{put:function(e,t){const n={key:e,value:t};if(this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size+=1},get:function(e,t){const n=this._keymap[e];if(void 0!==n)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),t?n:n.value},find:function(e){return this._keymap[e]},keys:function(){return Object.keys(this._keymap)},set:function(e,t){const n=this.get(e,!0);let r;return n?(r=n.value,n.value=t):(r=this.put(e,t),r&&(r=r.value)),r},shift:function(){const e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e},remove:function(e){const t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value},removeAll:function(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}},forEach:function(e,t,n){let r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.tail;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.head;r;)e.call(t,r.key,r.value,this),r=r.newer},toJSON:function(){const e=[];let t=this.head;for(;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},toString:function(){let e="",t=this.head;for(;t;)e+=`${String(t.key)}:${t.value}`,t=t.newer,t&&(e+=" < ");return e}});const Ese="1.13.4",Sse={button:"_button_1wnjn_1","button-shortcut":"_button-shortcut_1wnjn_35"},wse=i.forwardRef(((e,t)=>i.createElement("button",{ref:t,className:Sse[e.styleName]??Sse.button,disabled:e.disable,onBlur:e.onBlur,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseOut:e.onMouseOut,onMouseUp:e.onMouseUp,type:"button"},e.children,e.shortcut&&i.createElement("span",{className:Sse["button-shortcut"]},e.shortcut))));wse.defaultProps={onClick:()=>{},styleName:"",type:"button"},wse.propTypes={children:Ls.any,disable:Ls.bool,onBlur:Ls.func,onClick:Ls.func,onMouseDown:Ls.func,onMouseOut:Ls.func,onMouseUp:Ls.func,shortcut:Ls.string,type:Ls.string,styleName:Ls.string};const Ase={cross:"_cross_2ke8w_1"};function Ose(){return i.createElement("div",{className:Ase.cross})}function xse(){return xse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xse.apply(this,arguments)}const{Provider:kse,Consumer:Ise}=i.createContext({close:BA,open:BA}),Cse=e=>i.forwardRef(((t,n)=>i.createElement(Ise,null,(r=>i.createElement(e,xse({ref:n},t,{modal:r})))))),Pse="_modal-background_zzhoe_1",Dse="_modal-hide_zzhoe_13",Rse="_modal-wrap_zzhoe_17",Nse="_modal-window_zzhoe_25",Mse="_modal-window-max-height_zzhoe_38",Lse="_modal-content_zzhoe_42";function jse(e){return i.createElement("div",{className:zg(Pse,{[Dse]:e.hide})},i.createElement("div",{className:Rse},i.createElement("div",{className:zg(Nse,{[Mse]:e.maxHeight})},e.closeButton&&i.createElement(wse,{onClick:()=>{e.modal.close(),e.onClose&&e.onClose()}},i.createElement(Ose,null)),i.createElement("div",{className:Lse},e.children))))}jse.defaultProps={closeButton:!0,hide:!1,maxHeight:!1},jse.propTypes={children:Ls.element.isRequired,closeButton:Ls.bool,hide:Ls.bool,maxHeight:Ls.bool,modal:Ls.object.isRequired,onClose:Ls.func};const Bse=Cse(jse),Fse={"dialog-header":"_dialog-header_wp50s_1","dialog-main-max-height":"_dialog-main-max-height_wp50s_20","dialog-footer":"_dialog-footer_wp50s_31","dialog-footer-max-height":"_dialog-footer-max-height_wp50s_31"};function Gse(e){const t=()=>{e.modal.close(),e.onCancel&&e.onCancel()};return i.createElement(Bse,{closeButton:!1,hide:e.hide,maxHeight:e.maxHeight},i.createElement(i.Fragment,null,i.createElement("header",{className:Fse["dialog-header"]},i.createElement("h3",null,e.title),i.createElement(wse,{onClick:t},i.createElement(Ose,null))),e.maxHeight?i.createElement("main",{className:zg(e.maxHeight&&Fse["dialog-main-max-height"])},e.children):i.createElement("main",null,e.children),i.createElement("footer",{className:Fse[e.maxHeight?"dialog-footer-max-height":"dialog-footer"]},e.okayOnly?i.createElement("div",null):i.createElement(wse,{onClick:t,shortcut:e.cancelShortcut},e.cancelTitle),i.createElement(wse,{onClick:()=>{e.modal.close(),e.onOkay&&e.onOkay()},shortcut:e.okayShortcut},e.okayTitle))))}Gse.defaultProps={cancelTitle:"Cancel",hide:!1,maxHeight:!1,okayOnly:!1,okayTitle:"Ok"},Gse.propTypes={cancelShortcut:Ls.string,cancelTitle:Ls.string,children:Ls.object,hide:Ls.bool,maxHeight:Ls.bool,modal:Ls.object.isRequired,okayShortcut:Ls.string,okayTitle:Ls.string,okayOnly:Ls.bool,onCancel:Ls.func.isRequired,onOkay:Ls.func.isRequired,title:Ls.string.isRequired};const Hse=Cse(Gse);var Use={},zse={};const Vse="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis;var Xse="object"==typeof self&&self&&self.Object===Object&&self;const Yse=Vse||Xse||Function("return this")();const Wse=Yse.Symbol;var qse=Object.prototype,$se=qse.hasOwnProperty,Kse=qse.toString,Qse=Wse?Wse.toStringTag:void 0;var Zse=Object.prototype.toString;var Jse="[object Null]",ele="[object Undefined]",tle=Wse?Wse.toStringTag:void 0;function nle(e){return null==e?void 0===e?ele:Jse:tle&&tle in Object(e)?function(e){var t=$se.call(e,Qse),n=e[Qse];try{e[Qse]=void 0;var r=!0}catch{}var i=Kse.call(e);return r&&(t?e[Qse]=n:delete e[Qse]),i}(e):function(e){return Zse.call(e)}(e)}const rle=Array.isArray;function ile(e){return null!=e&&"object"==typeof e}const ole=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){return"string"==typeof e||!rle(e)&&ile(e)&&"[object String]"==nle(e)}},Symbol.toStringTag,{value:"Module"})),ale=Ps(ole);var sle=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}();const lle=sle;function cle(e){return ile(e)&&"[object Arguments]"==nle(e)}var ule=Object.prototype,hle=ule.hasOwnProperty,ple=ule.propertyIsEnumerable,fle=cle(function(){return arguments}())?cle:function(e){return ile(e)&&hle.call(e,"callee")&&!ple.call(e,"callee")};const dle=fle;var mle="object"==typeof exports&&exports&&!exports.nodeType&&exports,gle=mle&&"object"==typeof module&&module&&!module.nodeType&&module,yle=gle&&gle.exports===mle?Yse.Buffer:void 0;const vle=(yle?yle.isBuffer:void 0)||function(){return!1};var ble=9007199254740991,_le=/^(?:0|[1-9]\d*)$/;function Tle(e,t){var n=typeof e;return!!(t=t??ble)&&("number"==n||"symbol"!=n&&_le.test(e))&&e>-1&&e%1==0&&e<t}var Ele=9007199254740991;function Sle(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ele}var wle={};function Ale(e){return function(t){return e(t)}}wle["[object Float32Array]"]=wle["[object Float64Array]"]=wle["[object Int8Array]"]=wle["[object Int16Array]"]=wle["[object Int32Array]"]=wle["[object Uint8Array]"]=wle["[object Uint8ClampedArray]"]=wle["[object Uint16Array]"]=wle["[object Uint32Array]"]=!0,wle["[object Arguments]"]=wle["[object Array]"]=wle["[object ArrayBuffer]"]=wle["[object Boolean]"]=wle["[object DataView]"]=wle["[object Date]"]=wle["[object Error]"]=wle["[object Function]"]=wle["[object Map]"]=wle["[object Number]"]=wle["[object Object]"]=wle["[object RegExp]"]=wle["[object Set]"]=wle["[object String]"]=wle["[object WeakMap]"]=!1;var Ole="object"==typeof exports&&exports&&!exports.nodeType&&exports,xle=Ole&&"object"==typeof module&&module&&!module.nodeType&&module,kle=xle&&xle.exports===Ole&&Vse.process;const Ile=function(){try{return xle&&xle.require&&xle.require("util").types||kle&&kle.binding&&kle.binding("util")}catch{}}();var Cle=Ile&&Ile.isTypedArray,Ple=Cle?Ale(Cle):function(e){return ile(e)&&Sle(e.length)&&!!wle[nle(e)]};const Dle=Ple;var Rle=Object.prototype.hasOwnProperty;function Nle(e,t){var n=rle(e),r=!n&&dle(e),i=!n&&!r&&vle(e),o=!n&&!r&&!i&&Dle(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)(t||Rle.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Tle(c,l)))&&s.push(c);return s}var Mle=Object.prototype;function Lle(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Mle)}function jle(e,t){return function(n){return e(t(n))}}const Ble=jle(Object.keys,Object);var Fle=Object.prototype.hasOwnProperty;function Gle(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Hle="[object AsyncFunction]",Ule="[object Function]",zle="[object GeneratorFunction]",Vle="[object Proxy]";function Xle(e){if(!Gle(e))return!1;var t=nle(e);return t==Ule||t==zle||t==Hle||t==Vle}function Yle(e){return null!=e&&Sle(e.length)&&!Xle(e)}function Wle(e){return Yle(e)?Nle(e):function(e){if(!Lle(e))return Ble(e);var t=[];for(var n in Object(e))Fle.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function qle(e,t){return e&&lle(e,t,Wle)}function $le(e){return e}function Kle(e){return"function"==typeof e?e:$le}const Qle=Object.freeze(Object.defineProperty({__proto__:null,default:function(e,t){return e&&qle(e,Kle(t))}},Symbol.toStringTag,{value:"Module"})),Zle=Ps(Qle);const Jle=jle(Object.getPrototypeOf,Object);var ece="[object Object]",tce=Function.prototype,nce=Object.prototype,rce=tce.toString,ice=nce.hasOwnProperty,oce=rce.call(Object);function ace(e){if(!ile(e)||nle(e)!=ece)return!1;var t=Jle(e);if(null===t)return!0;var n=ice.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&rce.call(n)==oce}const sce=Ps(Object.freeze(Object.defineProperty({__proto__:null,default:ace},Symbol.toStringTag,{value:"Module"})));function lce(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function cce(e,t){return e===t||e!==e&&t!==t}function uce(e,t){for(var n=e.length;n--;)if(cce(e[n][0],t))return n;return-1}var hce=Array.prototype.splice;function pce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pce.prototype.clear=function(){this.__data__=[],this.size=0},pce.prototype.delete=function(e){var t=this.__data__,n=uce(t,e);return!(n<0)&&(n==t.length-1?t.pop():hce.call(t,n,1),--this.size,!0)},pce.prototype.get=function(e){var t=this.__data__,n=uce(t,e);return n<0?void 0:t[n][1]},pce.prototype.has=function(e){return uce(this.__data__,e)>-1},pce.prototype.set=function(e,t){var n=this.__data__,r=uce(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const fce=Yse["__core-js_shared__"];var dce=function(){var e=/[^.]+$/.exec(fce&&fce.keys&&fce.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var mce=Function.prototype.toString;function gce(e){if(null!=e){try{return mce.call(e)}catch{}try{return e+""}catch{}}return""}var yce=/^\[object .+?Constructor\]$/,vce=Function.prototype,bce=Object.prototype,_ce=vce.toString,Tce=bce.hasOwnProperty,Ece=RegExp("^"+_ce.call(Tce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sce(e){return!(!Gle(e)||function(e){return!!dce&&dce in e}(e))&&(Xle(e)?Ece:yce).test(gce(e))}function wce(e,t){var n=function(e,t){return e?.[t]}(e,t);return Sce(n)?n:void 0}const Ace=wce(Yse,"Map");const Oce=wce(Object,"create");var xce=Object.prototype.hasOwnProperty;var kce=Object.prototype.hasOwnProperty;function Ice(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Cce(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Pce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ice.prototype.clear=function(){this.__data__=Oce?Oce(null):{},this.size=0},Ice.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ice.prototype.get=function(e){var t=this.__data__;if(Oce){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return xce.call(t,e)?t[e]:void 0},Ice.prototype.has=function(e){var t=this.__data__;return Oce?void 0!==t[e]:kce.call(t,e)},Ice.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Oce&&void 0===t?"__lodash_hash_undefined__":t,this},Pce.prototype.clear=function(){this.size=0,this.__data__={hash:new Ice,map:new(Ace||pce),string:new Ice}},Pce.prototype.delete=function(e){var t=Cce(this,e).delete(e);return this.size-=t?1:0,t},Pce.prototype.get=function(e){return Cce(this,e).get(e)},Pce.prototype.has=function(e){return Cce(this,e).has(e)},Pce.prototype.set=function(e,t){var n=Cce(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Dce(e){var t=this.__data__=new pce(e);this.size=t.size}Dce.prototype.clear=function(){this.__data__=new pce,this.size=0},Dce.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Dce.prototype.get=function(e){return this.__data__.get(e)},Dce.prototype.has=function(e){return this.__data__.has(e)},Dce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof pce){var r=n.__data__;if(!Ace||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pce(r)}return n.set(e,t),this.size=n.size,this};function Rce(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pce;++t<n;)this.add(e[t])}function Nce(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Mce(e,t){return e.has(t)}Rce.prototype.add=Rce.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Rce.prototype.has=function(e){return this.__data__.has(e)};var Lce=1,jce=2;function Bce(e,t,n,r,i,o){var a=n&Lce,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,f=n&jce?new Rce:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var d=e[h],m=t[h];if(r)var g=a?r(m,d,h,t,e,o):r(d,m,h,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!Nce(t,(function(e,t){if(!Mce(f,t)&&(d===e||i(d,e,n,r,o)))return f.push(t)}))){p=!1;break}}else if(d!==m&&!i(d,m,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}const Fce=Yse.Uint8Array;function Gce(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Hce(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Uce=1,zce=2,Vce="[object Boolean]",Xce="[object Date]",Yce="[object Error]",Wce="[object Map]",qce="[object Number]",$ce="[object RegExp]",Kce="[object Set]",Qce="[object String]",Zce="[object Symbol]",Jce="[object ArrayBuffer]",eue="[object DataView]",tue=Wse?Wse.prototype:void 0,nue=tue?tue.valueOf:void 0;function rue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function iue(e,t,n){var r=t(e);return rle(e)?r:rue(r,n(e))}function oue(){return[]}var aue=Object.prototype.propertyIsEnumerable,sue=Object.getOwnPropertySymbols,lue=sue?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(sue(e),(function(t){return aue.call(e,t)})))}:oue;const cue=lue;function uue(e){return iue(e,Wle,cue)}var hue=1,pue=Object.prototype.hasOwnProperty;const fue=wce(Yse,"DataView");const due=wce(Yse,"Promise");const mue=wce(Yse,"Set");const gue=wce(Yse,"WeakMap");var yue="[object Map]",vue="[object Promise]",bue="[object Set]",_ue="[object WeakMap]",Tue="[object DataView]",Eue=gce(fue),Sue=gce(Ace),wue=gce(due),Aue=gce(mue),Oue=gce(gue),xue=nle;(fue&&xue(new fue(new ArrayBuffer(1)))!=Tue||Ace&&xue(new Ace)!=yue||due&&xue(due.resolve())!=vue||mue&&xue(new mue)!=bue||gue&&xue(new gue)!=_ue)&&(xue=function(e){var t=nle(e),n="[object Object]"==t?e.constructor:void 0,r=n?gce(n):"";if(r)switch(r){case Eue:return Tue;case Sue:return yue;case wue:return vue;case Aue:return bue;case Oue:return _ue}return t});const kue=xue;var Iue=1,Cue="[object Arguments]",Pue="[object Array]",Due="[object Object]",Rue=Object.prototype.hasOwnProperty;function Nue(e,t,n,r,i,o){var a=rle(e),s=rle(t),l=a?Pue:kue(e),c=s?Pue:kue(t),u=(l=l==Cue?Due:l)==Due,h=(c=c==Cue?Due:c)==Due,p=l==c;if(p&&vle(e)){if(!vle(t))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new Dce),a||Dle(e)?Bce(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case eue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jce:return!(e.byteLength!=t.byteLength||!o(new Fce(e),new Fce(t)));case Vce:case Xce:case qce:return cce(+e,+t);case Yce:return e.name==t.name&&e.message==t.message;case $ce:case Qce:return e==t+"";case Wce:var s=Gce;case Kce:var l=r&Uce;if(s||(s=Hce),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=zce,a.set(e,t);var u=Bce(s(e),s(t),r,i,o,a);return a.delete(e),u;case Zce:if(nue)return nue.call(e)==nue.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&Iue)){var f=u&&Rue.call(e,"__wrapped__"),d=h&&Rue.call(t,"__wrapped__");if(f||d){var m=f?e.value():e,g=d?t.value():t;return o||(o=new Dce),i(m,g,n,r,o)}}return!!p&&(o||(o=new Dce),function(e,t,n,r,i,o){var a=n&hue,s=uue(e),l=s.length;if(l!=uue(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:pue.call(t,u)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);for(var d=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var y=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===y?m===g||i(m,g,n,r,o):y)){f=!1;break}d||(d="constructor"==u)}if(f&&!d){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}function Mue(e,t,n,r,i){return e===t||(null==e||null==t||!ile(e)&&!ile(t)?e!==e&&t!==t:Nue(e,t,n,r,Mue,i))}var Lue=1,jue=2;function Bue(e){return e===e&&!Gle(e)}function Fue(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Gue(e){var t=function(e){for(var t=Wle(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bue(i)]}return t}(e);return 1==t.length&&t[0][2]?Fue(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Dce;if(r)var p=r(c,u,l,e,t,h);if(!(void 0===p?Mue(u,c,Lue|jue,r,h):p))return!1}}return!0}(n,e,t)}}var Hue="[object Symbol]";function Uue(e){return"symbol"==typeof e||ile(e)&&nle(e)==Hue}var zue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vue=/^\w*$/;function Xue(e,t){if(rle(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Uue(e))||(Vue.test(e)||!zue.test(e)||null!=t&&e in Object(t))}var Yue="Expected a function";function Wue(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Yue);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wue.Cache||Pce),n}Wue.Cache=Pce;var que=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$ue=/\\(\\)?/g,Kue=function(e){var t=Wue(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(que,(function(e,n,r,i){t.push(r?i.replace($ue,"$1"):n||e)})),t}));const Que=Kue;var Zue=1/0,Jue=Wse?Wse.prototype:void 0,ehe=Jue?Jue.toString:void 0;function the(e){if("string"==typeof e)return e;if(rle(e))return lce(e,the)+"";if(Uue(e))return ehe?ehe.call(e):"";var t=e+"";return"0"==t&&1/e==-Zue?"-0":t}function nhe(e,t){return rle(e)?e:Xue(e,t)?[e]:Que(function(e){return null==e?"":the(e)}(e))}var rhe=1/0;function ihe(e){if("string"==typeof e||Uue(e))return e;var t=e+"";return"0"==t&&1/e==-rhe?"-0":t}function ohe(e,t){for(var n=0,r=(t=nhe(t,e)).length;null!=e&&n<r;)e=e[ihe(t[n++])];return n&&n==r?e:void 0}function ahe(e,t){return null!=e&&t in Object(e)}function she(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=nhe(t,e)).length,o=!1;++r<i;){var a=ihe(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Sle(i)&&Tle(a,i)&&(rle(e)||dle(e))}(e,t,ahe)}var lhe=1,che=2;function uhe(e,t){return Xue(e)&&Bue(t)?Fue(ihe(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:ohe(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?she(n,e):Mue(t,r,lhe|che)}}function hhe(e){return Xue(e)?function(e){return function(t){return t?.[e]}}(ihe(e)):function(e){return function(t){return ohe(t,e)}}(e)}var phe=function(e,t){return function(n,r){if(null==n)return n;if(!Yle(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(qle);const fhe=phe;function dhe(e,t){var n=-1,r=Yle(e)?Array(e.length):[];return fhe(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function mhe(e,t){return(rle(e)?lce:dhe)(e,function(e){return"function"==typeof e?e:null==e?$le:"object"==typeof e?rle(e)?uhe(e[0],e[1]):Gue(e):hhe(e)}(t))}const ghe=Ps(Object.freeze(Object.defineProperty({__proto__:null,default:mhe},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(zse,"__esModule",{value:!0}),zse.flattenNames=void 0;var yhe=The(ale),vhe=The(Zle),bhe=The(sce),_he=The(ghe);function The(e){return e&&e.__esModule?e:{default:e}}var Ehe=zse.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,_he.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,bhe.default)(t)?(0,vhe.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,yhe.default)(t)&&n.push(t)})),n};zse.default=Ehe;var She={};function whe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Ahe=function(){try{var e=wce(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Ohe=Ahe;function xhe(e,t,n){"__proto__"==t&&Ohe?Ohe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var khe=Object.prototype.hasOwnProperty;function Ihe(e,t,n){var r=e[t];(!khe.call(e,t)||!cce(r,n)||void 0===n&&!(t in e))&&xhe(e,t,n)}function Che(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?xhe(n,s,l):Ihe(n,s,l)}return n}var Phe=Object.prototype.hasOwnProperty;function Dhe(e){if(!Gle(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Lle(e),n=[];for(var r in e)"constructor"==r&&(t||!Phe.call(e,r))||n.push(r);return n}function Rhe(e){return Yle(e)?Nle(e,!0):Dhe(e)}var Nhe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Mhe=Nhe&&"object"==typeof module&&module&&!module.nodeType&&module,Lhe=Mhe&&Mhe.exports===Nhe?Yse.Buffer:void 0,jhe=Lhe?Lhe.allocUnsafe:void 0;function Bhe(e,t){if(t)return e.slice();var n=e.length,r=jhe?jhe(n):new e.constructor(n);return e.copy(r),r}function Fhe(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Ghe=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)rue(t,cue(e)),e=Jle(e);return t}:oue;const Hhe=Ghe;function Uhe(e){return iue(e,Rhe,Hhe)}var zhe=Object.prototype.hasOwnProperty;function Vhe(e){var t=new e.constructor(e.byteLength);return new Fce(t).set(new Fce(e)),t}var Xhe=/\w*$/;var Yhe=Wse?Wse.prototype:void 0,Whe=Yhe?Yhe.valueOf:void 0;function qhe(e,t){var n=t?Vhe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var $he="[object Boolean]",Khe="[object Date]",Qhe="[object Map]",Zhe="[object Number]",Jhe="[object RegExp]",epe="[object Set]",tpe="[object String]",npe="[object Symbol]",rpe="[object ArrayBuffer]",ipe="[object DataView]",ope="[object Float32Array]",ape="[object Float64Array]",spe="[object Int8Array]",lpe="[object Int16Array]",cpe="[object Int32Array]",upe="[object Uint8Array]",hpe="[object Uint8ClampedArray]",ppe="[object Uint16Array]",fpe="[object Uint32Array]";function dpe(e,t,n){var r=e.constructor;switch(t){case rpe:return Vhe(e);case $he:case Khe:return new r(+e);case ipe:return function(e,t){var n=t?Vhe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ope:case ape:case spe:case lpe:case cpe:case upe:case hpe:case ppe:case fpe:return qhe(e,n);case Qhe:return new r;case Zhe:case tpe:return new r(e);case Jhe:return function(e){var t=new e.constructor(e.source,Xhe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case epe:return new r;case npe:return function(e){return Whe?Object(Whe.call(e)):{}}(e)}}var mpe=Object.create,gpe=function(){function e(){}return function(t){if(!Gle(t))return{};if(mpe)return mpe(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const ype=gpe;function vpe(e){return"function"!=typeof e.constructor||Lle(e)?{}:ype(Jle(e))}var bpe=Ile&&Ile.isMap,_pe=bpe?Ale(bpe):function(e){return ile(e)&&"[object Map]"==kue(e)};const Tpe=_pe;var Epe=Ile&&Ile.isSet,Spe=Epe?Ale(Epe):function(e){return ile(e)&&"[object Set]"==kue(e)};const wpe=Spe;var Ape=1,Ope=2,xpe=4,kpe="[object Arguments]",Ipe="[object Function]",Cpe="[object GeneratorFunction]",Ppe="[object Object]",Dpe={};function Rpe(e,t,n,r,i,o){var a,s=t&Ape,l=t&Ope,c=t&xpe;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Gle(e))return e;var u=rle(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&zhe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!s)return Fhe(e,a)}else{var h=kue(e),p=h==Ipe||h==Cpe;if(vle(e))return Bhe(e,s);if(h==Ppe||h==kpe||p&&!i){if(a=l||p?{}:vpe(e),!s)return l?function(e,t){return Che(e,Hhe(e),t)}(e,function(e,t){return e&&Che(t,Rhe(t),e)}(a,e)):function(e,t){return Che(e,cue(e),t)}(e,function(e,t){return e&&Che(t,Wle(t),e)}(a,e))}else{if(!Dpe[h])return i?e:{};a=dpe(e,h,s)}}o||(o=new Dce);var f=o.get(e);if(f)return f;o.set(e,a),wpe(e)?e.forEach((function(r){a.add(Rpe(r,t,n,r,e,o))})):Tpe(e)&&e.forEach((function(r,i){a.set(i,Rpe(r,t,n,i,e,o))}));var d=u?void 0:(c?l?Uhe:uue:l?Rhe:Wle)(e);return whe(d||e,(function(r,i){d&&(r=e[i=r]),Ihe(a,i,Rpe(r,t,n,i,e,o))})),a}Dpe[kpe]=Dpe["[object Array]"]=Dpe["[object ArrayBuffer]"]=Dpe["[object DataView]"]=Dpe["[object Boolean]"]=Dpe["[object Date]"]=Dpe["[object Float32Array]"]=Dpe["[object Float64Array]"]=Dpe["[object Int8Array]"]=Dpe["[object Int16Array]"]=Dpe["[object Int32Array]"]=Dpe["[object Map]"]=Dpe["[object Number]"]=Dpe[Ppe]=Dpe["[object RegExp]"]=Dpe["[object Set]"]=Dpe["[object String]"]=Dpe["[object Symbol]"]=Dpe["[object Uint8Array]"]=Dpe["[object Uint8ClampedArray]"]=Dpe["[object Uint16Array]"]=Dpe["[object Uint32Array]"]=!0,Dpe["[object Error]"]=Dpe[Ipe]=Dpe["[object WeakMap]"]=!1;const Npe=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){return Rpe(e,5)}},Symbol.toStringTag,{value:"Module"})),Mpe=Ps(Npe);Object.defineProperty(She,"__esModule",{value:!0}),She.mergeClasses=void 0;var Lpe=Fpe(Zle),jpe=Fpe(Mpe),Bpe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Fpe(e){return e&&e.__esModule?e:{default:e}}var Gpe=She.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,jpe.default)(e.default)||{};return t.map((function(t){var r=e[t];return r&&(0,Lpe.default)(r,(function(e,t){n[t]||(n[t]={}),n[t]=Bpe({},n[t],r[t])})),t})),n};She.default=Gpe;var Hpe={};Object.defineProperty(Hpe,"__esModule",{value:!0}),Hpe.autoprefix=void 0;var Upe=function(e){return e&&e.__esModule?e:{default:e}}(Zle),zpe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var Vpe={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},Xpe=Hpe.autoprefix=function(e){var t={};return(0,Upe.default)(e,(function(e,n){var r={};(0,Upe.default)(e,(function(e,t){var n=Vpe[t];n?r=zpe({},r,n(e)):r[t]=e})),t[n]=r})),t};Hpe.default=Xpe;var Ype={};Object.defineProperty(Ype,"__esModule",{value:!0}),Ype.hover=void 0;var Wpe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qpe=function(e){return e&&e.__esModule?e:{default:e}}(i);function $pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Kpe=Ype.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=o=$pe(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return qpe.default.createElement(t,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},qpe.default.createElement(e,Wpe({},o.props,o.state)))},$pe(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(qpe.default.Component)};Ype.default=Kpe;var Qpe={};Object.defineProperty(Qpe,"__esModule",{value:!0}),Qpe.active=void 0;var Zpe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jpe=function(e){return e&&e.__esModule?e:{default:e}}(i);function efe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var tfe=Qpe.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=o=efe(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return Jpe.default.createElement(t,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},Jpe.default.createElement(e,Zpe({},o.props,o.state)))},efe(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(Jpe.default.Component)};Qpe.default=tfe;var nfe={};Object.defineProperty(nfe,"__esModule",{value:!0});nfe.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(Use,"__esModule",{value:!0}),Use.ReactCSS=Use.loop=Use.handleActive=ufe=Use.handleHover=Use.hover=void 0;var rfe=cfe(zse),ife=cfe(She),ofe=cfe(Hpe),afe=cfe(Ype),sfe=cfe(Qpe),lfe=cfe(nfe);function cfe(e){return e&&e.__esModule?e:{default:e}}Use.hover=afe.default;var ufe=Use.handleHover=afe.default;Use.handleActive=sfe.default,Use.loop=lfe.default;var hfe=Use.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,rfe.default)(n),o=(0,ife.default)(e,i);return(0,ofe.default)(o)},pfe=Use.default=hfe,ffe={},dfe=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(ffe[i])return ffe[i];var o=function(e,t,n,r){if(typeof document>"u"&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return ffe[i]=o,o},mfe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gfe=function(e){var t=e.white,n=e.grey,r=e.size,o=e.renderers,a=e.borderRadius,s=e.boxShadow,l=e.children,c=pfe({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+dfe(t,n,r,o.canvas)+") center left"}}});return(0,i.isValidElement)(l)?i.cloneElement(l,mfe({},l.props,{style:mfe({},l.props.style,c.grid)})):i.createElement("div",{style:c.grid})};gfe.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var yfe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vfe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function bfe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _fe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=bfe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>o?1:Math.round(100*c/o)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},bfe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),vfe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=pfe({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:yfe({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.createElement("div",{style:n.alpha},i.createElement("div",{style:n.checkboard},i.createElement(gfe,{renderers:this.props.renderers})),i.createElement("div",{style:n.gradient}),i.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("div",{style:n.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:n.slider}))))}}]),t}(i.PureComponent||i.Component),Tfe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Efe=[38,40],Sfe=1,wfe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(t)&&function(e){return Efe.indexOf(e)>-1}(e.keyCode)){var r=n.getArrowOffset(),i=38===e.keyCode?t+r:t-r;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+Sfe++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Tfe(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value!==this.state.value&&(e.value!==this.props.value||t.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=pfe({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return i.createElement("div",{style:t.wrap},i.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?i.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(i.PureComponent||i.Component),Afe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ofe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var xfe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Ofe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(u=c<0?359:c>o?0:360*(-100*c/o+100)/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(h=l<0?0:l>i?359:100*l/i*360/100,n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Ofe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Afe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=pfe({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return i.createElement("div",{style:r.hue},i.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),i.createElement("div",{style:r.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:r.slider}))))}}]),t}(i.PureComponent||i.Component);function kfe(e,t,n){(void 0!==n&&!cce(e[t],n)||void 0===n&&!(t in e))&&xhe(e,t,n)}function Ife(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Cfe(e,t,n,r,i,o,a){var s=Ife(e,n),l=Ife(t,n),c=a.get(l);if(c)kfe(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var p=rle(l),f=!p&&vle(l),d=!p&&!f&&Dle(l);u=l,p||f||d?rle(s)?u=s:function(e){return ile(e)&&Yle(e)}(s)?u=Fhe(s):f?(h=!1,u=Bhe(l,!0)):d?(h=!1,u=qhe(l,!0)):u=[]:ace(l)||dle(l)?(u=s,dle(s)?u=function(e){return Che(e,Rhe(e))}(s):(!Gle(s)||Xle(s))&&(u=vpe(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),kfe(e,n,u)}}function Pfe(e,t,n,r,i){e!==t&&lle(t,(function(o,a){if(i||(i=new Dce),Gle(o))Cfe(e,t,a,n,Pfe,r,i);else{var s=r?r(Ife(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),kfe(e,a,s)}}),Rhe)}var Dfe=Math.max;function Rfe(e){return function(){return e}}var Nfe=Ohe?function(e,t){return Ohe(e,"toString",{configurable:!0,enumerable:!1,value:Rfe(t),writable:!0})}:$le;const Mfe=Nfe;var Lfe=Date.now;var jfe=function(e){var t=0,n=0;return function(){var r=Lfe(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Mfe);const Bfe=jfe;function Ffe(e,t){return Bfe(function(e,t,n){return t=Dfe(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Dfe(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,$le),e+"")}var Gfe=function(e){return Ffe((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(e,t,n){if(!Gle(n))return!1;var r=typeof t;return!!("number"==r?Yle(n)&&Tle(t,n.length):"string"==r&&t in n)&&cce(n[t],e)}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}((function(e,t,n){Pfe(e,t,n)}));const Hfe=Gfe;var Ufe=function(e){var t=e.zDepth,n=e.radius,r=e.background,o=e.children,a=e.styles,s=pfe(Hfe({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===a?{}:a),{"zDepth-1":1===t});return i.createElement("div",{style:s.wrap},i.createElement("div",{style:s.bg}),i.createElement("div",{style:s.content},o))};Ufe.propTypes={background:Ls.string,zDepth:Ls.oneOf([0,1,2,3,4,5]),radius:Ls.number,styles:Ls.object},Ufe.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const zfe=function(){return Yse.Date.now()};var Vfe=/\s/;var Xfe=/^\s+/;function Yfe(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&Vfe.test(e.charAt(t)););return t}(e)+1).replace(Xfe,"")}var Wfe=NaN,qfe=/^[-+]0x[0-9a-f]+$/i,$fe=/^0b[01]+$/i,Kfe=/^0o[0-7]+$/i,Qfe=parseInt;function Zfe(e){if("number"==typeof e)return e;if(Uue(e))return Wfe;if(Gle(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Gle(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yfe(e);var n=$fe.test(e);return n||Kfe.test(e)?Qfe(e.slice(2),n?2:8):qfe.test(e)?Wfe:+e}var Jfe="Expected a function",ede=Math.max,tde=Math.min;function nde(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError(Jfe);function f(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function d(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=zfe();if(d(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return h?tde(n,o-(e-c)):n}(e))}function g(e){return s=void 0,p&&r?f(e):(r=i=void 0,a)}function y(){var e=zfe(),n=d(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?f(e):a}(l);if(h)return clearTimeout(s),s=setTimeout(m,t),f(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=Zfe(t)||0,Gle(n)&&(u=!!n.leading,o=(h="maxWait"in n)?ede(Zfe(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:g(zfe())},y}var rde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ide=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>o&&(c=o);var u=l/i,h=1-c/o;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Gle(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),nde(e,t,{leading:r,maxWait:t,trailing:i})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rde(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,a=t.pointer,s=t.circle,l=pfe({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:a,circle:s}},{custom:!!this.props.style});return i.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),i.createElement("div",{style:l.white,className:"saturation-white"},i.createElement("div",{style:l.black,className:"saturation-black"}),i.createElement("div",{style:l.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:l.circle}))))}}]),t}(i.PureComponent||i.Component);function ode(e){return(ode="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ade=/^\s+/,sde=/\s+$/;function lde(e,t){if(t=t||{},(e=e||"")instanceof lde)return e;if(!(this instanceof lde))return new lde(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(ade,"").replace(sde,"").toLowerCase();var t,n=!1;if(Ade[e])e=Ade[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Mde.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Mde.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Mde.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Mde.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Mde.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Mde.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Mde.hex8.exec(e))?{r:Cde(t[1]),g:Cde(t[2]),b:Cde(t[3]),a:Nde(t[4]),format:n?"name":"hex8"}:(t=Mde.hex6.exec(e))?{r:Cde(t[1]),g:Cde(t[2]),b:Cde(t[3]),format:n?"name":"hex"}:(t=Mde.hex4.exec(e))?{r:Cde(t[1]+""+t[1]),g:Cde(t[2]+""+t[2]),b:Cde(t[3]+""+t[3]),a:Nde(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=Mde.hex3.exec(e))&&{r:Cde(t[1]+""+t[1]),g:Cde(t[2]+""+t[2]),b:Cde(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==ode(e)&&(Lde(e.r)&&Lde(e.g)&&Lde(e.b)?(t=function(e,t,n){return{r:255*kde(e,255),g:255*kde(t,255),b:255*kde(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):Lde(e.h)&&Lde(e.s)&&Lde(e.v)?(r=Dde(e.s),i=Dde(e.v),t=function(e,t,n){e=6*kde(e,360),t=kde(t,100),n=kde(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*c,g:255*u,b:255*h}}(e.h,r,i),a=!0,s="hsv"):Lde(e.h)&&Lde(e.s)&&Lde(e.l)&&(r=Dde(e.s),o=Dde(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=kde(e,360),t=kde(t,100),n=kde(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=xde(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function cde(e,t,n){e=kde(e,255),t=kde(t,255),n=kde(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function ude(e,t,n){e=kde(e,255),t=kde(t,255),n=kde(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function hde(e,t,n,r){var i=[Pde(Math.round(e).toString(16)),Pde(Math.round(t).toString(16)),Pde(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function pde(e,t,n,r){return[Pde(Rde(r)),Pde(Math.round(e).toString(16)),Pde(Math.round(t).toString(16)),Pde(Math.round(n).toString(16))].join("")}function fde(e,t){t=0===t?0:t||10;var n=lde(e).toHsl();return n.s-=t/100,n.s=Ide(n.s),lde(n)}function dde(e,t){t=0===t?0:t||10;var n=lde(e).toHsl();return n.s+=t/100,n.s=Ide(n.s),lde(n)}function mde(e){return lde(e).desaturate(100)}function gde(e,t){t=0===t?0:t||10;var n=lde(e).toHsl();return n.l+=t/100,n.l=Ide(n.l),lde(n)}function yde(e,t){t=0===t?0:t||10;var n=lde(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),lde(n)}function vde(e,t){t=0===t?0:t||10;var n=lde(e).toHsl();return n.l-=t/100,n.l=Ide(n.l),lde(n)}function bde(e,t){var n=lde(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,lde(n)}function _de(e){var t=lde(e).toHsl();return t.h=(t.h+180)%360,lde(t)}function Tde(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=lde(e).toHsl(),r=[lde(e)],i=360/t,o=1;o<t;o++)r.push(lde({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Ede(e){var t=lde(e).toHsl(),n=t.h;return[lde(e),lde({h:(n+72)%360,s:t.s,l:t.l}),lde({h:(n+216)%360,s:t.s,l:t.l})]}function Sde(e,t,n){t=t||6,n=n||30;var r=lde(e).toHsl(),i=360/n,o=[lde(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(lde(r));return o}function wde(e,t){t=t||6;for(var n=lde(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(lde({h:r,s:i,v:o})),o=(o+s)%1;return a}lde.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=xde(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=ude(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=ude(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=cde(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=cde(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return hde(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[Pde(Math.round(e).toString(16)),Pde(Math.round(t).toString(16)),Pde(Math.round(n).toString(16)),Pde(Rde(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*kde(this._r,255))+"%",g:Math.round(100*kde(this._g,255))+"%",b:Math.round(100*kde(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*kde(this._r,255))+"%, "+Math.round(100*kde(this._g,255))+"%, "+Math.round(100*kde(this._b,255))+"%)":"rgba("+Math.round(100*kde(this._r,255))+"%, "+Math.round(100*kde(this._g,255))+"%, "+Math.round(100*kde(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Ode[hde(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+pde(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=lde(e);n="#"+pde(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return lde(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(gde,arguments)},brighten:function(){return this._applyModification(yde,arguments)},darken:function(){return this._applyModification(vde,arguments)},desaturate:function(){return this._applyModification(fde,arguments)},saturate:function(){return this._applyModification(dde,arguments)},greyscale:function(){return this._applyModification(mde,arguments)},spin:function(){return this._applyModification(bde,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Sde,arguments)},complement:function(){return this._applyCombination(_de,arguments)},monochromatic:function(){return this._applyCombination(wde,arguments)},splitcomplement:function(){return this._applyCombination(Ede,arguments)},triad:function(){return this._applyCombination(Tde,[3])},tetrad:function(){return this._applyCombination(Tde,[4])}},lde.fromRatio=function(e,t){if("object"==ode(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Dde(e[r]));e=n}return lde(e,t)},lde.equals=function(e,t){return!(!e||!t)&&lde(e).toRgbString()==lde(t).toRgbString()},lde.random=function(){return lde.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},lde.mix=function(e,t,n){n=0===n?0:n||50;var r=lde(e).toRgb(),i=lde(t).toRgb(),o=n/100;return lde({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},lde.readability=function(e,t){var n=lde(e),r=lde(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},lde.isReadable=function(e,t,n){var r,i,o=lde.readability(e,t);switch(i=!1,r=function(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},lde.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=lde.readability(e,t[c]))>l&&(l=r,s=lde(t[c]));return lde.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,lde.mostReadable(e,["#fff","#000"],n))};var Ade=lde.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ode=lde.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Ade);function xde(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function kde(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Ide(e){return Math.min(1,Math.max(0,e))}function Cde(e){return parseInt(e,16)}function Pde(e){return 1==e.length?"0"+e:""+e}function Dde(e){return e<=1&&(e=100*e+"%"),e}function Rde(e){return Math.round(255*parseFloat(e)).toString(16)}function Nde(e){return Cde(e)/255}var Mde=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Lde(e){return!!Mde.CSS_UNIT.exec(e)}var jde=function(e){var t=0,n=0;return function(e,t){(rle(e)?whe:fhe)(e,Kle(t))}(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},Bde=function(e,t){var n=e.hex?lde(e.hex):lde(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},Fde=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&lde(e).isValid()},Gde=function(e){if(!e)return"#fff";var t=Bde(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Hde=function(e,t){return lde(t+" ("+e.replace("\xb0","")+")")._ok},Ude=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Vde=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(jde(e)){var r=Bde(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(jde(e)){var r=Bde(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=Ude({},Bde(e.color,0)),t.debounce=nde((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),zde(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.createElement(e,Ude({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Ude({},Bde(e.color,t.oldHue))}}]),n}(i.PureComponent||i.Component);return t.propTypes=Ude({},e.propTypes),t.defaultProps=Ude({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},Xde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yde=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Wde(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var qde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const $de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n=Wde(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},Wde(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),Yde(r,[{key:"render",value:function(){return i.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.createElement(e,Xde({},this.props,this.state)))}}]),r}(i.Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,o=void 0===r?function(){}:r,a=e.onHover,s=e.title,l=void 0===s?t:s,c=e.children,u=e.focus,h=e.focusStyle,p="transparent"===t,f=pfe({default:{swatch:qde({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?void 0===h?{}:h:{})}}),d={};return a&&(d.onMouseOver=function(e){return a(t,e)}),i.createElement("div",qde({style:f.swatch,onClick:function(e){return o(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},d),c,p&&i.createElement(gfe,{borderRadius:f.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var Kde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qde=function(e){var t=e.rgb,n=e.hsl,r=e.width,o=e.height,a=e.onChange,s=e.direction,l=e.style,c=e.renderers,u=e.pointer,h=e.className,p=void 0===h?"":h,f=pfe({default:{picker:{position:"relative",width:r,height:o},alpha:{radius:"2px",style:l}}});return i.createElement("div",{style:f.picker,className:"alpha-picker "+p},i.createElement(_fe,Kde({},f.alpha,{rgb:t,hsl:n,pointer:u,renderers:c,onChange:a,direction:s})))};Qde.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=pfe({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return i.createElement("div",{style:n.picker})}},Vde(Qde);var Zde=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,o=pfe({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return i.createElement("div",{style:o.swatches},mhe(t,(function(e){return i.createElement($de,{key:e,color:e,style:o.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),i.createElement("div",{style:o.clear}))},Jde=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p="transparent"===r,f=function(e,n){Fde(e)&&t({hex:e,source:"hex"},n)},d=pfe(Hfe({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Gde(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===s});return i.createElement("div",{style:d.card,className:"block-picker "+h},i.createElement("div",{style:d.triangle}),i.createElement("div",{style:d.head},p&&i.createElement(gfe,{borderRadius:"6px 6px 0 0"}),i.createElement("div",{style:d.label},r)),i.createElement("div",{style:d.body},i.createElement(Zde,{colors:o,onClick:f,onSwatchHover:n}),i.createElement(wfe,{style:{input:d.input},value:r,onChange:f})))};Jde.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),colors:Ls.arrayOf(Ls.string),triangle:Ls.oneOf(["top","hide"]),styles:Ls.object},Jde.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},Vde(Jde);var eme="#ffcdd2",tme="#e57373",nme="#f44336",rme="#d32f2f",ime="#b71c1c",ome="#f8bbd0",ame="#f06292",sme="#e91e63",lme="#c2185b",cme="#880e4f",ume="#e1bee7",hme="#ba68c8",pme="#9c27b0",fme="#7b1fa2",dme="#4a148c",mme="#d1c4e9",gme="#9575cd",yme="#673ab7",vme="#512da8",bme="#311b92",_me="#c5cae9",Tme="#7986cb",Eme="#3f51b5",Sme="#303f9f",wme="#1a237e",Ame="#bbdefb",Ome="#64b5f6",xme="#2196f3",kme="#1976d2",Ime="#0d47a1",Cme="#b3e5fc",Pme="#4fc3f7",Dme="#03a9f4",Rme="#0288d1",Nme="#01579b",Mme="#b2ebf2",Lme="#4dd0e1",jme="#00bcd4",Bme="#0097a7",Fme="#006064",Gme="#b2dfdb",Hme="#4db6ac",Ume="#009688",zme="#00796b",Vme="#004d40",Xme="#c8e6c9",Yme="#81c784",Wme="#4caf50",qme="#388e3c",$me="#dcedc8",Kme="#aed581",Qme="#8bc34a",Zme="#689f38",Jme="#33691e",ege="#f0f4c3",tge="#dce775",nge="#cddc39",rge="#afb42b",ige="#827717",oge="#fff9c4",age="#fff176",sge="#ffeb3b",lge="#fbc02d",cge="#f57f17",uge="#ffecb3",hge="#ffd54f",pge="#ffc107",fge="#ffa000",dge="#ff6f00",mge="#ffe0b2",gge="#ffb74d",yge="#ff9800",vge="#f57c00",bge="#e65100",_ge="#ffccbc",Tge="#ff8a65",Ege="#ff5722",Sge="#e64a19",wge="#bf360c",Age="#d7ccc8",Oge="#a1887f",xge="#795548",kge="#5d4037",Ige="#3e2723",Cge="#cfd8dc",Pge="#90a4ae",Dge="#607d8b",Rge="#455a64",Nge="#263238",Mge=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,o=e.hover,a=e.active,s=e.circleSize,l=e.circleSpacing,c=pfe({default:{swatch:{width:s,height:s,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:a});return i.createElement("div",{style:c.swatch},i.createElement($de,{style:c.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};Mge.defaultProps={circleSize:28,circleSpacing:14};const Lge=ufe(Mge);var jge=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,o=e.colors,a=e.hex,s=e.circleSize,l=e.styles,c=void 0===l?{}:l,u=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=pfe(Hfe({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),d=function(e,t){return n({hex:e,source:"hex"},t)};return i.createElement("div",{style:f.card,className:"circle-picker "+p},mhe(o,(function(e){return i.createElement(Lge,{key:e,color:e,onClick:d,onSwatchHover:r,active:a===e.toLowerCase(),circleSize:s,circleSpacing:u})})))};function Bge(e){return void 0===e}jge.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),circleSize:Ls.number,circleSpacing:Ls.number,styles:Ls.object},jge.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[nme,sme,pme,yme,Eme,xme,Dme,jme,Ume,Wme,Qme,nge,sge,pge,yge,Ege,xge,Dge],styles:{}},Vde(jge);var Fge={};Object.defineProperty(Fge,"__esModule",{value:!0});var Gge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hge=function(e){return e&&e.__esModule?e:{default:e}}(i);var Uge=Fge.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,o=e.height,a=void 0===o?24:o,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return Hge.default.createElement("svg",Gge({viewBox:"0 0 24 24",style:Gge({fill:n,width:i,height:a},l)},c),Hge.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},zge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Vge=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?Fde(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(Bge(e.s)?n.props.hsl.s:e.s),l:Number(Bge(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),zge(t,[{key:"render",value:function(){var e=this,t=pfe({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),i.createElement("div",{style:t.alpha},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),i.createElement("div",{style:t.alpha},i.createElement(wfe,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),i.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,i.createElement("div",{style:t.toggle},i.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},i.createElement(Uge,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(i.Component);Vge.defaultProps={view:"hex"};var Xge=function(){var e=pfe({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.createElement("div",{style:e.picker})},Yge=function(){var e=pfe({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return i.createElement("div",{style:e.picker})},Wge=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,o=e.rgb,a=e.hsl,s=e.hsv,l=e.hex,c=e.renderers,u=e.styles,h=void 0===u?{}:u,p=e.className,f=void 0===p?"":p,d=e.defaultView,m=pfe(Hfe({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:r});return i.createElement("div",{style:m.picker,className:"chrome-picker "+f},i.createElement("div",{style:m.saturation},i.createElement(ide,{style:m.Saturation,hsl:a,hsv:s,pointer:Yge,onChange:n})),i.createElement("div",{style:m.body},i.createElement("div",{style:m.controls,className:"flexbox-fix"},i.createElement("div",{style:m.color},i.createElement("div",{style:m.swatch},i.createElement("div",{style:m.active}),i.createElement(gfe,{renderers:c}))),i.createElement("div",{style:m.toggles},i.createElement("div",{style:m.hue},i.createElement(xfe,{style:m.Hue,hsl:a,pointer:Xge,onChange:n})),i.createElement("div",{style:m.alpha},i.createElement(_fe,{style:m.Alpha,rgb:o,hsl:a,pointer:Xge,renderers:c,onChange:n})))),i.createElement(Vge,{rgb:o,hsl:a,hex:l,view:d,onChange:n,disableAlpha:r})))};Wge.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),disableAlpha:Ls.bool,styles:Ls.object,defaultView:Ls.oneOf(["hex","rgb","hsl"])},Wge.defaultProps={width:225,disableAlpha:!1,styles:{}},Vde(Wge);var qge=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=e.active,s=pfe({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Gde(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return i.createElement($de,{style:s.color,color:t,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},i.createElement("div",{style:s.dot}))},$ge=function(e){var t=e.hex,n=e.rgb,r=e.onChange,o=pfe({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return i.createElement("div",{style:o.fields,className:"flexbox-fix"},i.createElement("div",{style:o.active}),i.createElement(wfe,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:a}),i.createElement(wfe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:a}),i.createElement(wfe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:a}),i.createElement(wfe,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:a}))},Kge=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,o=e.hex,a=e.rgb,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=pfe(Hfe({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),p=function(e,n){e.hex?Fde(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return i.createElement(Ufe,{style:h.Compact,styles:l},i.createElement("div",{style:h.compact,className:"compact-picker "+u},i.createElement("div",null,mhe(r,(function(e){return i.createElement(qge,{key:e,color:e,active:e.toLowerCase()===o,onClick:p,onSwatchHover:n})})),i.createElement("div",{style:h.clear})),i.createElement($ge,{hex:o,rgb:a,onChange:p})))};Kge.propTypes={colors:Ls.arrayOf(Ls.string),styles:Ls.object},Kge.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},Vde(Kge);const Qge=ufe((function(e){var t=e.hover,n=e.color,r=e.onClick,o=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=pfe({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return i.createElement("div",{style:s.swatch},i.createElement($de,{color:n,onClick:r,onHover:o,focusStyle:a}))}));var Zge=function(e){var t=e.width,n=e.colors,r=e.onChange,o=e.onSwatchHover,a=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=pfe(Hfe({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),p=function(e,t){return r({hex:e,source:"hex"},t)};return i.createElement("div",{style:h.card,className:"github-picker "+u},i.createElement("div",{style:h.triangleShadow}),i.createElement("div",{style:h.triangle}),mhe(n,(function(e){return i.createElement(Qge,{color:e,key:e,onClick:p,onSwatchHover:o})})))};Zge.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),colors:Ls.arrayOf(Ls.string),triangle:Ls.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Ls.object},Zge.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},Vde(Zge);var Jge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eye=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.hsl,a=e.direction,s=e.pointer,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=pfe(Hfe({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},c));return i.createElement("div",{style:p.picker,className:"hue-picker "+h},i.createElement(xfe,Jge({},p.hue,{hsl:o,pointer:s,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:a})))};eye.propTypes={styles:Ls.object},eye.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=pfe({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return i.createElement("div",{style:n.picker})},styles:{}},Vde(eye);Vde((function(e){var t=e.onChange,n=e.hex,r=e.rgb,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=pfe(Hfe({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(e,n){e.hex?Fde(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return i.createElement(Ufe,{styles:a},i.createElement("div",{style:c.material,className:"material-picker "+l},i.createElement(wfe,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:u}),i.createElement("div",{style:c.split,className:"flexbox-fix"},i.createElement("div",{style:c.third},i.createElement(wfe,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:u})),i.createElement("div",{style:c.third},i.createElement(wfe,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:u})),i.createElement("div",{style:c.third},i.createElement(wfe,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:u})))))}));var tye=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,o=e.hex,a=pfe({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,i){e["#"]?Fde(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return i.createElement("div",{style:a.fields},i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),i.createElement("div",{style:a.divider}),i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:s}),i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:s}),i.createElement(wfe,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:s}),i.createElement("div",{style:a.divider}),i.createElement(wfe,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),i.createElement("div",{style:a.fieldSymbols},i.createElement("div",{style:a.symbol},"\xb0"),i.createElement("div",{style:a.symbol},"%"),i.createElement("div",{style:a.symbol},"%")))},nye=function(e){var t=e.hsl,n=pfe({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return i.createElement("div",{style:n.picker})},rye=function(){var e=pfe({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return i.createElement("div",{style:e.pointer},i.createElement("div",{style:e.left},i.createElement("div",{style:e.leftInside})),i.createElement("div",{style:e.right},i.createElement("div",{style:e.rightInside})))},iye=function(e){var t=e.onClick,n=e.label,r=e.children,o=e.active,a=pfe({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return i.createElement("div",{style:a.button,onClick:t},n||r)},oye=function(e){var t=e.rgb,n=e.currentColor,r=pfe({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return i.createElement("div",null,i.createElement("div",{style:r.label},"new"),i.createElement("div",{style:r.swatches},i.createElement("div",{style:r.new}),i.createElement("div",{style:r.current})),i.createElement("div",{style:r.label},"current"))},aye=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var sye=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),aye(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,a=pfe(Hfe({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return i.createElement("div",{style:a.picker,className:"photoshop-picker "+o},i.createElement("div",{style:a.head},this.props.header),i.createElement("div",{style:a.body,className:"flexbox-fix"},i.createElement("div",{style:a.saturation},i.createElement(ide,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:nye,onChange:this.props.onChange})),i.createElement("div",{style:a.hue},i.createElement(xfe,{direction:"vertical",hsl:this.props.hsl,pointer:rye,onChange:this.props.onChange})),i.createElement("div",{style:a.controls},i.createElement("div",{style:a.top,className:"flexbox-fix"},i.createElement("div",{style:a.previews},i.createElement(oye,{rgb:this.props.rgb,currentColor:this.state.currentColor})),i.createElement("div",{style:a.actions},i.createElement(iye,{label:"OK",onClick:this.props.onAccept,active:!0}),i.createElement(iye,{label:"Cancel",onClick:this.props.onCancel}),i.createElement(tye,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(i.Component);sye.propTypes={header:Ls.string,styles:Ls.object},sye.defaultProps={header:"Color Picker",styles:{}},Vde(sye);var lye=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.disableAlpha,s=pfe({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(e,i){e.hex?Fde(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return i.createElement("div",{style:s.fields,className:"flexbox-fix"},i.createElement("div",{style:s.double},i.createElement(wfe,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:l})),i.createElement("div",{style:s.single},i.createElement(wfe,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.single},i.createElement(wfe,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.single},i.createElement(wfe,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.alpha},i.createElement(wfe,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))},cye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uye=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=pfe({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){r({hex:e,source:"hex"},t)};return i.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return i.createElement("div",{key:n,style:a.swatchWrap},i.createElement($de,cye({},t,{style:a.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};uye.propTypes={colors:Ls.arrayOf(Ls.oneOfType([Ls.string,Ls.shape({color:Ls.string,title:Ls.string})])).isRequired};var hye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pye=function(e){var t=e.width,n=e.rgb,r=e.hex,o=e.hsv,a=e.hsl,s=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,h=e.renderers,p=e.styles,f=void 0===p?{}:p,d=e.className,m=void 0===d?"":d,g=pfe(Hfe({default:hye({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:c});return i.createElement("div",{style:g.picker,className:"sketch-picker "+m},i.createElement("div",{style:g.saturation},i.createElement(ide,{style:g.Saturation,hsl:a,hsv:o,onChange:s})),i.createElement("div",{style:g.controls,className:"flexbox-fix"},i.createElement("div",{style:g.sliders},i.createElement("div",{style:g.hue},i.createElement(xfe,{style:g.Hue,hsl:a,onChange:s})),i.createElement("div",{style:g.alpha},i.createElement(_fe,{style:g.Alpha,rgb:n,hsl:a,renderers:h,onChange:s}))),i.createElement("div",{style:g.color},i.createElement(gfe,null),i.createElement("div",{style:g.activeColor}))),i.createElement(lye,{rgb:n,hsl:a,hex:r,onChange:s,disableAlpha:c}),i.createElement(uye,{colors:u,onClick:s,onSwatchHover:l}))};pye.propTypes={disableAlpha:Ls.bool,width:Ls.oneOfType([Ls.string,Ls.number]),styles:Ls.object},pye.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const fye=Vde(pye);var dye=function(e){var t=e.hsl,n=e.offset,r=e.onClick,o=void 0===r?function(){}:r,a=e.active,s=e.first,l=e.last,c=pfe({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:l});return i.createElement("div",{style:c.swatch,onClick:function(e){return o({h:t.h,s:.5,l:n,source:"hsl"},e)}})},mye=function(e){var t=e.onClick,n=e.hsl,r=pfe({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return i.createElement("div",{style:r.swatches},i.createElement("div",{style:r.swatch},i.createElement(dye,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:t,first:!0})),i.createElement("div",{style:r.swatch},i.createElement(dye,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(dye,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(dye,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(dye,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:t,last:!0})),i.createElement("div",{style:r.clear}))},gye=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=pfe(Hfe({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return i.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},i.createElement("div",{style:c.hue},i.createElement(xfe,{style:c.Hue,hsl:t,pointer:r,onChange:n})),i.createElement("div",{style:c.swatches},i.createElement(mye,{hsl:t,onClick:n})))};gye.propTypes={styles:Ls.object},gye.defaultProps={pointer:function(){var e=pfe({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.createElement("div",{style:e.picker})},styles:{}},Vde(gye);var yye={};Object.defineProperty(yye,"__esModule",{value:!0});var vye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bye=function(e){return e&&e.__esModule?e:{default:e}}(i);var _ye=yye.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,o=e.height,a=void 0===o?24:o,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return bye.default.createElement("svg",vye({viewBox:"0 0 24 24",style:vye({fill:n,width:i,height:a},l)},c),bye.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Tye=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=e.first,s=e.last,l=e.active,c=pfe({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Gde(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return i.createElement($de,{color:t,style:c.color,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},i.createElement("div",{style:c.check},i.createElement(_ye,null)))},Eye=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,o=e.active,a=pfe({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return i.createElement("div",{style:a.group},mhe(r,(function(e,a){return i.createElement(Tye,{key:e,color:e,active:e.toLowerCase()===o,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})})))},Sye=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.onSwatchHover,a=e.colors,s=e.hex,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=pfe(Hfe({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),f=function(e,t){return r({hex:e,source:"hex"},t)};return i.createElement("div",{style:p.picker,className:"swatches-picker "+h},i.createElement(Ufe,null,i.createElement("div",{style:p.overflow},i.createElement("div",{style:p.body},mhe(a,(function(e){return i.createElement(Eye,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:o})})),i.createElement("div",{style:p.clear})))))};Sye.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),height:Ls.oneOfType([Ls.string,Ls.number]),colors:Ls.arrayOf(Ls.arrayOf(Ls.string)),styles:Ls.object},Sye.defaultProps={width:320,height:240,colors:[[ime,rme,nme,tme,eme],[cme,lme,sme,ame,ome],[dme,fme,pme,hme,ume],[bme,vme,yme,gme,mme],[wme,Sme,Eme,Tme,_me],[Ime,kme,xme,Ome,Ame],[Nme,Rme,Dme,Pme,Cme],[Fme,Bme,jme,Lme,Mme],[Vme,zme,Ume,Hme,Gme],["#194D33",qme,Wme,Yme,Xme],[Jme,Zme,Qme,Kme,$me],[ige,rge,nge,tge,ege],[cge,lge,sge,age,oge],[dge,fge,pge,hge,uge],[bge,vge,yge,gge,mge],[wge,Sge,Ege,Tge,_ge],[Ige,kge,xge,Oge,Age],[Nge,Rge,Dge,Pge,Cge],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},Vde(Sye);var wye=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=pfe(Hfe({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){Fde(e)&&t({hex:e,source:"hex"},n)};return i.createElement("div",{style:p.card,className:"twitter-picker "+h},i.createElement("div",{style:p.triangleShadow}),i.createElement("div",{style:p.triangle}),i.createElement("div",{style:p.body},mhe(o,(function(e,t){return i.createElement($de,{key:t,color:e,hex:e,style:p.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),i.createElement("div",{style:p.hash},"#"),i.createElement(wfe,{label:null,style:{input:p.input},value:r.replace("#",""),onChange:f}),i.createElement("div",{style:p.clear})))};wye.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),triangle:Ls.oneOf(["hide","top-left","top-right"]),colors:Ls.arrayOf(Ls.string),styles:Ls.object},wye.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},Vde(wye);var Aye=function(e){var t=pfe({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return i.createElement("div",{style:t.picker})};Aye.propTypes={hsl:Ls.shape({h:Ls.number,s:Ls.number,l:Ls.number,a:Ls.number})},Aye.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Oye=function(e){var t=pfe({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return i.createElement("div",{style:t.picker})};Oye.propTypes={hsl:Ls.shape({h:Ls.number,s:Ls.number,l:Ls.number,a:Ls.number})},Oye.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var xye=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.hsv,s=function(e,n){if(e.hex)Fde(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");Hde(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");Hde(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var o=e.hsl.split(",");Hde(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("\xb0",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},n))}},l=pfe({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(a.h)+"\xb0, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return i.createElement("div",{style:l.wrap,className:"flexbox-fix"},i.createElement("div",{style:l.fields},i.createElement("div",{style:l.double},i.createElement(wfe,{style:{input:l.input,label:l.label},label:"hex",value:o,onChange:s})),i.createElement("div",{style:l.column},i.createElement("div",{style:l.single},i.createElement(wfe,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:s})),i.createElement("div",{style:l.single},i.createElement(wfe,{style:{input:l.input2,label:l.label2},label:"hsv",value:h,onChange:s})),i.createElement("div",{style:l.single},i.createElement(wfe,{style:{input:l.input2,label:l.label2},label:"hsl",value:u,onChange:s})))))},kye=function(e){var t=e.width,n=e.onChange,r=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,l=e.header,c=e.styles,u=void 0===c?{}:c,h=e.className,p=void 0===h?"":h,f=pfe(Hfe({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return i.createElement("div",{style:f.picker,className:"google-picker "+p},i.createElement("div",{style:f.head},l),i.createElement("div",{style:f.swatch}),i.createElement("div",{style:f.saturation},i.createElement(ide,{hsl:o,hsv:a,pointer:Aye,onChange:n})),i.createElement("div",{style:f.body},i.createElement("div",{style:f.controls,className:"flexbox-fix"},i.createElement("div",{style:f.hue},i.createElement(xfe,{style:f.Hue,hsl:o,radius:"4px",pointer:Oye,onChange:n}))),i.createElement(xye,{rgb:r,hsl:o,hex:s,hsv:a,onChange:n})))};function Iye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Cye(r.key),r)}}function Cye(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Pye(e,t){return(Pye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dye(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Rye(e);if(t){var i=Rye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Rye(e){return(Rye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}kye.propTypes={width:Ls.oneOfType([Ls.string,Ls.number]),styles:Ls.object,header:Ls.string},kye.defaultProps={width:652,styles:{},header:"Color picker"},Vde(kye);let Nye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pye(e,t)}(n,e);var t=Dye(n);function n(e){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),r=t.call(this,e);const i=Zu(e.color);return r.state={displayColorPicker:!1,color:{r:i.r,g:i.g,b:i.b,a:i.opacity}},r}return function(e,t,n){t&&Iye(e.prototype,t),n&&Iye(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"handleClick",value:function(){this.setState((e=>({displayColorPicker:!e.displayColorPicker})))}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e){const t=e.rgb,n=`rgba(${t.r},${t.g},${t.b},${t.a})`;this.props.onChange(n),this.setState({color:e.rgb})}},{key:"render",value:function(){const e=pfe({default:{color:{width:"32px",height:"14px",borderRadius:"2px",background:`rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",cursor:"pointer",borderRadius:"1px"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return i.createElement("div",null,i.createElement("div",{onClick:this.handleClick.bind(this),style:e.swatch},i.createElement("div",{style:e.color})),this.state.displayColorPicker?i.createElement("div",{style:e.popover},i.createElement("div",{onClick:this.handleClose.bind(this),style:e.cover}),i.createElement(fye,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}]),n}(i.Component);function Mye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lye(r.key),r)}}function Lye(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function jye(e,t){return(jye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bye(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Fye(e);if(t){var i=Fye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fye(e){return(Fye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Nye.propTypes={color:Ls.string,onChange:Ls.func};let Gye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jye(e,t)}(n,e);var t=Bye(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={colors:e.track.options.colorRange.slice()},r}return function(e,t,n){t&&Mye(e.prototype,t),n&&Mye(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"handleColorsChanged",value:function(e){this.setState({colors:e})}},{key:"handleSubmit",value:function(){this.props.track.options.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState((e=>({colors:e.colors.concat(e.colors[e.colors.length-1])})))}},{key:"handleRemoveColor",value:function(e){this.setState((t=>({colors:t.colors.slice(0,e).concat(t.colors.slice(e+1))})))}},{key:"render",value:function(){const e=JSON.parse(JSON.stringify(this.props.track)),t=Object.assign(e,{options:{colorRange:this.state.colors}}),n={editable:!1,zoomFixed:!0,views:[{uid:`hmo-${this.props.track.uid}`,initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[t]},layout:{x:0,y:0,h:12,w:12,i:`hmo-${this.props.track.id}`}}]},r=this.state.colors.map(((e,t)=>{const n=this.state.colors.length>2&&t===this.state.colors.length-1?i.createElement("div",{onClick:()=>this.handleRemoveColor(t),style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2,cursor:"pointer"}},i.createElement("svg",{height:"10px",style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10}},i.createElement("use",{xlinkHref:"#cross"}))):null;return i.createElement("div",{key:`l${t}`,style:{borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",position:"relative",outline:"none"}},n,i.createElement(Nye,{key:t,color:this.state.colors[t],onChange:e=>{this.setState((n=>{const r=n.colors.slice();return r[t]=e,{colors:r}}),(()=>{this.handleColorsChanged(this.state.colors)}))}}))})).reverse(),o=this.state.colors.length<10?i.createElement("div",{onClick:this.handleAddColor.bind(this),style:{position:"relative",outline:"none",height:"25px",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",cursor:"pointer"}},i.createElement("div",{style:{textAlign:"center",width:"32px",height:"14px"}},i.createElement("svg",{height:"100%",style:{opacity:.5,margin:"auto",display:"block"},width:"10px"},i.createElement("use",{xlinkHref:"#plus"})))):null;return i.createElement(Hse,{okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmit.bind(this),title:"Custom Color Map"},i.createElement("table",{className:"table-track-options"},i.createElement("thead",null),i.createElement("tbody",{style:{verticalAlign:"top"}},i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},"Preview")),i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},i.createElement("div",{style:{width:200}},i.createElement(Mwe,{options:{bounded:!1},viewConfig:n}))))))),i.createElement("td",{className:"td-track-options"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},"Colors")),i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},o,i.createElement("div",{style:{position:"relative"}},r))))))))))}}]),n}(i.Component);Gye.propTypes={handleCancel:Ls.func,onCancel:Ls.func,onSubmit:Ls.func,track:Ls.object,xScale:Ls.object,yScale:Ls.object};const Hye=e=>{if(!e.header)return[];const t=e.header.split("\t"),n=[];for(let r=0;r<t.length;r++)n.push({name:t[r],value:r+1});return n},Uye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.reduce(((e,r)=>(e[r]={name:`${r*n}${t}`,value:r},e)),{})},zye={yes:{name:"Yes",value:!0},no:{name:"No",value:!1}},Vye={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},Xye=Uye([1,2,3,5,8,13,21]),Yye=Object.assign(Xye,{none:{name:"none",value:"none"}}),Wye=Uye([0,2,4,8,16,32,64,128,256]),qye=Uye([0,.2,.4,.6,.8,1],"%",100),$ye={axisLabelFormatting:{name:"Axis Label Formatting",inlineOptions:{normal:{name:"normal",value:"normal"},scientific:{name:"scientific",value:"scientific"}}},flipDiagonal:{name:"Flip Across Diagonal",inlineOptions:{none:{name:"No",value:"none"},yes:{name:"Yes",value:"yes"},copy:{name:"Copy",value:"copy"}}},heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},extent:{name:"Extent",inlineOptions:{full:{name:"Full",value:"full"},upperRight:{name:"Upper Right",value:"upper-right"},lowerLeft:{name:"Lower Left",value:"lower-left"}}},labelLeftMargin:{name:"Label Left Margin",inlineOptions:Wye},labelRightMargin:{name:"Label Right Margin",inlineOptions:Wye},labelTopMargin:{name:"Label Top Margin",inlineOptions:Wye},labelBottomMargin:{name:"Label Bottom Margin",inlineOptions:Wye},labelShowResolution:{name:"Label Show Resolution",inlineOptions:zye},labelShowAssembly:{name:"Label Show Assembly",inlineOptions:zye},lineStrokeWidth:{name:"Stroke Width",inlineOptions:Xye},strokeWidth:{name:"Stroke Width",inlineOptions:Xye},trackBorderWidth:{name:"Track Border Width",inlineOptions:Xye},separatePlusMinusStrands:{name:"Separate +/- strands",inlineOptions:zye},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:zye},showTexts:{name:"Show texts",inlineOptions:zye},staggered:{name:"Staggered",inlineOptions:zye},minSquareSize:{name:"Minimum size",inlineOptions:Yye},pointSize:{name:"Point Size",inlineOptions:Xye},pointColor:{name:"Point Color",inlineOptions:Vye},trackBorderColor:{name:"Track Border Color",inlineOptions:Vye},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:Vye},plusStrandColor:{name:"+ Strand Color",inlineOptions:Vye},lineStrokeColor:{name:"Stroke color",inlineOptions:Vye},projectionStrokeColor:{name:"Stroke color",inlineOptions:Vye},projectionFillColor:{name:"Fill color",inlineOptions:Vye},stroke:{name:"Stroke Color",inlineOptions:Vye},strokeColor:{name:"Stroke color",inlineOptions:Vye},fill:{name:"Fill Color",inlineOptions:Vye},color:{name:"Color",inlineOptions:Vye},fontColor:{name:"Font color",inlineOptions:Vye},fillColor:{name:"Fill color",inlineOptions:Vye},barFillColor:{name:"Fill color",inlineOptions:Vye},barFillColorTop:{name:"Top Fill color",inlineOptions:Vye},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:Vye},barOpacity:{name:"Bar opacity",inlineOptions:qye},zeroLineVisible:{name:"Zero line visible",inlineOptions:zye},zeroLineColor:{name:"Zero line color",inlineOptions:Vye},zeroLineOpacity:{name:"Zero line opacity",inlineOptions:Uye([.2,.4,.6,.8,1],"%",100)},fillOpacity:{name:"Fill Opacity",inlineOptions:qye},strokeOpacity:{name:"Stroke Opacity",inlineOptions:qye},strokePos:{name:"Stroke Position",inlineOptions:{aroundInner:{name:"Around Inner",value:"around"},aroundCenter:{name:"Around Center",value:null},hidden:{name:"Hidden",value:"hidden"},top:{name:"Top",value:"top"},right:{name:"Right",value:"right"},bottom:{name:"Bottom",value:"bottom"},left:{name:"Left",value:"left"}}},barBorder:{name:"Bar border",inlineOptions:zye},scaledHeight:{name:"Scaled height",inlineOptions:zye},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:Vye},rectangleDomainFillColor:{name:"Fill color",inlineOptions:Vye},rectangleDomainFillOpacity:{name:"Fill opacity",inlineOptions:qye},rectangleDomainOpacity:{name:"Opacity",inlineOptions:qye},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:zye},showTooltip:{name:"Show Tooltip",inlineOptions:zye},fontSize:{name:"Font Size",inlineOptions:Uye([8,9,10,11,12,14,16,18,24],"px")},tickPositions:{name:"Tick Positions",inlineOptions:{even:{name:"Even",value:"even"},ends:{name:"Ends",value:"ends"}}},tickFormat:{name:"Tick Format",inlineOptions:{plain:{name:"Plain",value:"plain"},si:{name:"SI",value:"si"}}},colorEncoding:{name:"Color Encode Annotations",inlineOptions:{none:{name:"None",value:null},itemRgb:{name:"itemRgb",value:"itemRgb"}},generateOptions:Hye},fontIsAligned:{name:"Left-Align Font",inlineOptions:zye},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},axisMargin:{name:"Axis Margin",inlineOptions:Uye([0,10,20,30,40,50,100,200,400],"px")},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:Vye},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:qye},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:{...Vye,use_stroke:{name:"Glyph color",value:"[glyph-color]"}}},labelPosition:{name:"Label Position",inlineOptions:{ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:qye},geneAnnotationHeight:{name:"Gene Annotation Height",inlineOptions:{8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16}}},annotationHeight:{name:"Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},scaled:{name:"scaled",value:"scaled"}}},maxAnnotationHeight:{name:"Max Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},none:{name:"none",value:null}}},annotationStyle:{name:"Annotation Style",inlineOptions:{box:{name:"Box",value:"box"},segment:{name:"Segment",value:"segment"}}},geneLabelPosition:{name:"Gene Label Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},geneStrandSpacing:{name:"Gene Strand Spacing",inlineOptions:{2:{name:"2px",value:2},4:{name:"4px",value:4},8:{name:"8px",value:8}}},labelBackgroundColor:{name:"Label Background Color",inlineOptions:Vye},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:qye},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},magma:{name:"magma",value:["rgba(0,0,3,1)","rgba(0,0,4,1)","rgba(0,0,6,1)","rgba(1,0,7,1)","rgba(1,1,9,1)","rgba(1,1,11,1)","rgba(2,2,13,1)","rgba(2,2,15,1)","rgba(3,3,17,1)","rgba(4,3,19,1)","rgba(4,4,21,1)","rgba(5,4,23,1)","rgba(6,5,25,1)","rgba(7,5,27,1)","rgba(8,6,29,1)","rgba(9,7,32,1)","rgba(10,7,34,1)","rgba(11,8,36,1)","rgba(12,9,38,1)","rgba(13,10,40,1)","rgba(14,10,42,1)","rgba(15,11,45,1)","rgba(16,12,47,1)","rgba(17,12,49,1)","rgba(19,13,51,1)","rgba(20,13,54,1)","rgba(21,14,56,1)","rgba(22,14,58,1)","rgba(23,15,61,1)","rgba(25,15,63,1)","rgba(26,16,66,1)","rgba(27,16,68,1)","rgba(28,16,70,1)","rgba(30,17,73,1)","rgba(31,17,75,1)","rgba(33,17,78,1)","rgba(34,17,80,1)","rgba(36,17,83,1)","rgba(37,17,85,1)","rgba(39,17,87,1)","rgba(40,17,90,1)","rgba(42,17,92,1)","rgba(43,17,94,1)","rgba(45,17,97,1)","rgba(47,16,99,1)","rgba(49,16,101,1)","rgba(50,16,103,1)","rgba(52,16,105,1)","rgba(54,15,107,1)","rgba(55,15,108,1)","rgba(57,15,110,1)","rgba(59,15,112,1)","rgba(61,15,113,1)","rgba(62,15,114,1)","rgba(64,15,116,1)","rgba(66,15,117,1)","rgba(67,15,118,1)","rgba(69,15,119,1)","rgba(71,15,120,1)","rgba(72,16,120,1)","rgba(74,16,121,1)","rgba(76,16,122,1)","rgba(77,17,123,1)","rgba(79,17,123,1)","rgba(81,18,124,1)","rgba(82,18,124,1)","rgba(84,19,125,1)","rgba(85,20,125,1)","rgba(87,20,126,1)","rgba(88,21,126,1)","rgba(90,21,126,1)","rgba(92,22,127,1)","rgba(93,23,127,1)","rgba(95,23,127,1)","rgba(96,24,128,1)","rgba(98,25,128,1)","rgba(99,25,128,1)","rgba(101,26,128,1)","rgba(103,26,128,1)","rgba(104,27,129,1)","rgba(106,28,129,1)","rgba(107,28,129,1)","rgba(109,29,129,1)","rgba(110,30,129,1)","rgba(112,30,129,1)","rgba(113,31,129,1)","rgba(115,32,129,1)","rgba(117,32,129,1)","rgba(118,33,129,1)","rgba(120,33,129,1)","rgba(121,34,130,1)","rgba(123,35,130,1)","rgba(124,35,130,1)","rgba(126,36,130,1)","rgba(128,36,130,1)","rgba(129,37,129,1)","rgba(131,37,129,1)","rgba(132,38,129,1)","rgba(134,39,129,1)","rgba(136,39,129,1)","rgba(137,40,129,1)","rgba(139,40,129,1)","rgba(140,41,129,1)","rgba(142,41,129,1)","rgba(144,42,129,1)","rgba(145,42,129,1)","rgba(147,43,128,1)","rgba(148,43,128,1)","rgba(150,44,128,1)","rgba(152,44,128,1)","rgba(153,45,128,1)","rgba(155,46,127,1)","rgba(157,46,127,1)","rgba(158,47,127,1)","rgba(160,47,127,1)","rgba(161,48,126,1)","rgba(163,48,126,1)","rgba(165,49,126,1)","rgba(166,49,125,1)","rgba(168,50,125,1)","rgba(170,50,125,1)","rgba(171,51,124,1)","rgba(173,51,124,1)","rgba(175,52,123,1)","rgba(176,52,123,1)","rgba(178,53,123,1)","rgba(180,53,122,1)","rgba(181,54,122,1)","rgba(183,55,121,1)","rgba(185,55,121,1)","rgba(186,56,120,1)","rgba(188,56,120,1)","rgba(189,57,119,1)","rgba(191,57,118,1)","rgba(193,58,118,1)","rgba(194,59,117,1)","rgba(196,59,117,1)","rgba(198,60,116,1)","rgba(199,61,115,1)","rgba(201,61,115,1)","rgba(202,62,114,1)","rgba(204,63,113,1)","rgba(206,63,113,1)","rgba(207,64,112,1)","rgba(209,65,111,1)","rgba(210,66,110,1)","rgba(212,67,110,1)","rgba(213,67,109,1)","rgba(215,68,108,1)","rgba(216,69,107,1)","rgba(218,70,107,1)","rgba(219,71,106,1)","rgba(221,72,105,1)","rgba(222,73,104,1)","rgba(223,74,103,1)","rgba(225,75,103,1)","rgba(226,76,102,1)","rgba(227,78,101,1)","rgba(229,79,100,1)","rgba(230,80,100,1)","rgba(231,81,99,1)","rgba(232,83,98,1)","rgba(233,84,97,1)","rgba(234,85,97,1)","rgba(236,87,96,1)","rgba(237,88,95,1)","rgba(238,90,95,1)","rgba(239,91,94,1)","rgba(239,93,94,1)","rgba(240,95,93,1)","rgba(241,96,93,1)","rgba(242,98,93,1)","rgba(243,100,92,1)","rgba(243,101,92,1)","rgba(244,103,92,1)","rgba(245,105,92,1)","rgba(246,107,92,1)","rgba(246,108,92,1)","rgba(247,110,92,1)","rgba(247,112,92,1)","rgba(248,114,92,1)","rgba(248,116,92,1)","rgba(249,118,92,1)","rgba(249,120,92,1)","rgba(250,121,93,1)","rgba(250,123,93,1)","rgba(250,125,94,1)","rgba(251,127,94,1)","rgba(251,129,95,1)","rgba(251,131,95,1)","rgba(252,133,96,1)","rgba(252,135,97,1)","rgba(252,137,97,1)","rgba(252,139,98,1)","rgba(253,140,99,1)","rgba(253,142,100,1)","rgba(253,144,101,1)","rgba(253,146,102,1)","rgba(253,148,103,1)","rgba(254,150,104,1)","rgba(254,152,105,1)","rgba(254,154,106,1)","rgba(254,156,107,1)","rgba(254,157,108,1)","rgba(254,159,109,1)","rgba(254,161,110,1)","rgba(254,163,111,1)","rgba(254,165,112,1)","rgba(255,167,114,1)","rgba(255,169,115,1)","rgba(255,171,116,1)","rgba(255,172,118,1)","rgba(255,174,119,1)","rgba(255,176,120,1)","rgba(255,178,122,1)","rgba(255,180,123,1)","rgba(255,182,124,1)","rgba(255,184,126,1)","rgba(255,185,127,1)","rgba(255,187,129,1)","rgba(255,189,130,1)","rgba(255,191,132,1)","rgba(255,193,133,1)","rgba(255,195,135,1)","rgba(255,197,136,1)","rgba(255,198,138,1)","rgba(255,200,140,1)","rgba(255,202,141,1)","rgba(255,204,143,1)","rgba(254,206,144,1)","rgba(254,208,146,1)","rgba(254,209,148,1)","rgba(254,211,149,1)","rgba(254,213,151,1)","rgba(254,215,153,1)","rgba(254,217,155,1)","rgba(254,219,156,1)","rgba(254,220,158,1)","rgba(254,222,160,1)","rgba(254,224,162,1)","rgba(254,226,163,1)","rgba(253,228,165,1)","rgba(253,230,167,1)","rgba(253,231,169,1)","rgba(253,233,171,1)","rgba(253,235,172,1)","rgba(253,237,174,1)","rgba(253,239,176,1)","rgba(253,241,178,1)","rgba(253,242,180,1)","rgba(253,244,182,1)","rgba(253,246,184,1)","rgba(252,248,186,1)","rgba(252,250,188,1)","rgba(252,251,189,1)","rgba(252,253,191,1)"]},viridis:{name:"viridis",value:["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:Gye,"horizontal-heatmap":Gye}}}},align:{name:"Align",inlineOptions:{white:{name:"Top",value:"top"},lightGrey:{name:"Bottom",value:"bottom"}}},colorRangeGradient:{name:"Color Gradient",inlineOptions:zye},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:e=>{const t=[];if(e.transforms)for(const n of e.transforms)t.push({name:n.name,value:n.value});return t}},aggregationMode:{name:"Aggregation Mode",inlineOptions:{},generateOptions:e=>{const t=[];return e.aggregationModes?Object.values(e.aggregationModes).forEach((e=>{let{name:n,value:r}=e;t.push({name:n,value:r})})):t.push({name:"Default",value:"default"}),t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:e=>{if(e.maxZoom){const t=[];for(let n=0;n<=e.maxZoom;n++){const{maxWidth:r,binsPerDimension:i,maxZoom:o}=e;let a=1,s=1;if(e.resolutions){const t=e.resolutions.map((e=>+e)).sort(((e,t)=>t-e));[a]=t,s=t[n]}else s=e.maxWidth/(2**n*e.binsPerDimension),a=r/(2**o*i);const l=Np(a,s),c=kp(`.${l}`,s)(s);t.push({name:c,value:n.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:Hye},zeroValueColor:{name:"Zero Value Color",inlineOptions:Vye}},Kye={...IS,IS_TRACK_RANGE_SELECTABLE:iO,OPTIONS_INFO:$ye},Qye={d3Array:Su,d3Axis:V2,d3Brush:jT,d3Color:Bh,d3Drag:i_,d3Dsv:mw,d3Format:Lp,d3Geo:koe,d3Queue:joe,d3Request:pae,d3Scale:xm,d3Selection:ec,d3Transition:cK,d3Zoom:wK,PIXI:Kye.GLOBALS.PIXI,mix:V7,slugid:ag},Zye={DataFetcher:XQ,GBKDataFetcher:u1,LocalDataFetcher:f1,getDataFetcher:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jye;const i=n[e.type];return i?new i.dataFetcher(r,e,t):"genbank"===e.type?new u1(e,t):"local-tiles"===e.type?new f1(e,t):new XQ(e,t)}},Jye={chromosomes:{ChromosomeInfo:a9,SearchField:c9},libraries:Qye,tracks:{Annotations1dTrack:X8,Annotations2dTrack:B8,ArrowheadDomainsTrack:C8,BarTrack:M6,BedLikeTrack:K4,CNVIntervalTrack:e8,Chromosome2DAnnotations:C9,Chromosome2DLabels:g9,ChromosomeGrid:S9,CombinedTrack:rA,CrossRule:xee,DivergentBarTrack:H6,HeatmapTiledPixiTrack:j1,Horizontal1dHeatmapTrack:q6,Horizontal2DDomainsTrack:Z8,HorizontalChromosomeLabels:F9,HorizontalGeneAnnotationsTrack:E8,HorizontalHeatmapTrack:Y9,HorizontalLine1DPixiTrack:p6,HorizontalMultivecTrack:x6,HorizontalPoint1DPixiTrack:b6,HorizontalRule:cee,HorizontalTiled1DPixiTrack:s2,HorizontalTiledPlot:ose,HorizontalTrack:Wae,Id2DTiledPixiTrack:X1,IdHorizontal1DTiledPixiTrack:d2,IdVertical1DTiledPixiTrack:k2,LeftAxisTrack:u5,MapboxTilesTrack:$ee,MoveableTrack:Gae,OSMTileIdsTrack:Uee,OSMTilesTrack:Mee,OverlayTrack:o6,PixiTrack:UQ,RasterTilesTrack:tte,SVGTrack:K2,SquareMarkersTrack:o9,Tiled1DPixiTrack:J1,TiledPixiTrack:O1,TopAxisTrack:r5,Track:NQ,ValueIntervalTrack:o7,VerticalRule:_ee,VerticalTiled1DPixiTrack:T2,VerticalTrack:pse,ViewportTracker2D:f7,ViewportTracker2DPixi:_se,ViewportTrackerHorizontal:T7,ViewportTrackerVertical:I7},dataFetchers:Zye,factories:{ContextMenuItem:Hb,DataFetcher:XQ,LruCache:Tse},services:Gw,utils:PK,configs:Kye,VERSION:Ese},eve="_track-renderer_11dwb_1",tve="_track-renderer-element_11dwb_5",nve="_track-renderer-events_11dwb_6";function rve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ive(r.key),r)}}function ive(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ove(e,t){return(ove=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ave(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=lve(e);if(t){var i=lve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sve(e)}(this,n)}}function sve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lve(e){return(lve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const{getDataFetcher:cve}=Jye.dataFetchers;let uve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ove(e,t)}(n,e);var t=ave(n);function n(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).dragging=!1,r.element=null,r.eventTracker=null,r.eventTrackerOld=null,r.closing=!1,r.yPositionOffset=0,r.xPositionOffset=0,r.scrollTop=0,r.scrollTimeout=null,r.activeTransitions=0,r.zoomTransform=fK,r.windowScrolledBound=r.windowScrolled.bind(sve(r)),r.zoomStartedBound=r.zoomStarted.bind(sve(r)),r.zoomedBound=r.zoomed.bind(sve(r)),r.zoomEndedBound=r.zoomEnded.bind(sve(r)),r.uid=ag.nice(),r.viewUid=r.props.uid,r.availableForPlugins={...Jye,services:{...Jye.services,pubSub:r.props.pubSub,pixiRenderer:r.props.pixiRenderer}},r.mounted=!1,r.emptyZoomBehavior=SK(),r.currentProps=e,r.prevPropsStr="",r.zoomBehavior=SK().filter((e=>!(e.target.classList.contains("no-zoom")||e.target.classList.contains("react-resizable-handle")))).on("start",r.zoomStartedBound).on("zoom",r.zoomedBound).on("end",r.zoomEndedBound),r.zoomTransform=fK,r.prevZoomTransform=fK,r.initialXDomain=[0,1],r.initialYDomain=[0,1],r.xDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r.yDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r.zoomLimits=[0,Number.MAX_SAFE_INTEGER],r.prevCenterX=r.currentProps.paddingLeft+r.currentProps.leftWidth+r.currentProps.centerWidth/2,r.prevCenterY=r.currentProps.paddingTop+r.currentProps.topHeight+r.currentProps.centerHeight/2,r.cumCenterXOffset=0,r.cumCenterYOffset=0,r.setUpInitialScales(r.currentProps.initialXDomain,r.currentProps.initialYDomain,r.currentProps.xDomainLimits,r.currentProps.yDomainLimits,r.currentProps.zoomLimits),r.setUpScales(),r.trackDefObjects={},r.metaTracks={},r.pubSubs=[],window.higlassTracksByType)for(const t in window.higlassTracksByType)AS[t]=window.higlassTracksByType[t].config;return r.boundForwardEvent=r.forwardEvent.bind(sve(r)),r.boundScrollEvent=r.scrollEvent.bind(sve(r)),r.boundForwardContextMenu=r.forwardContextMenu.bind(sve(r)),r.dispatchEventBound=r.dispatchEvent.bind(sve(r)),r.zoomToDataPosHandlerBound=r.zoomToDataPosHandler.bind(sve(r)),r.onScrollHandlerBound=r.onScrollHandler.bind(sve(r)),r.elementPos={height:0,width:0,left:0,top:0},r.elementSelection=null,r}return function(e,t,n){t&&rve(e.prototype,t),n&&rve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"xScale",get:function(){if(!this._xScale)throw new Error("xScale is not defined");return this._xScale}},{key:"yScale",get:function(){if(!this._yScale)throw new Error("yScale is not defined");return this._yScale}},{key:"UNSAFE_componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.event",this.dispatchEventBound)),this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandlerBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.scroll",this.onScrollHandlerBound))}},{key:"componentDidMount",value:function(){if(!this.element)throw new Error("Component did not mount, this.element is not defined.");if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=ql(this.element),this.pStage=new nS.PIXI.Graphics,this.pMask=new nS.PIXI.Graphics,this.pOutline=new nS.PIXI.Graphics,this.pBackground=new nS.PIXI.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pOutline),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),!this.currentProps.svgElement||!this.currentProps.canvasElement)return;this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();const e=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],t=this.svgElement.getBoundingClientRect(),n=[[Math.max(e[0][0],0),Math.max(e[0][1],0)],[Math.min(e[1][0],t.width),Math.min(e[1][1],t.height)]];this.zoomBehavior.extent(n).translateExtent(e).scaleExtent(this.zoomLimits)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(!e.svgElement||!e.canvasElement)return;const t=this.updatablePropsToString(e);if(this.currentProps=e,this.prevPropsStr===t)return;this.setBackground();for(const o in this.trackDefObjects){this.trackDefObjects[o].trackObject.delayDrawing=!0}this.prevPropsStr=t,this.setUpInitialScales(e.initialXDomain,e.initialYDomain,e.xDomainLimits,e.yDomainLimits,e.zoomLimits),this.setUpScales(e.width!==this.props.width||e.height!==this.props.height),this.svgElement=e.svgElement;const n=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],r=this.svgElement.getBoundingClientRect(),i=[[Math.max(n[0][0],0),Math.max(n[0][1],0)],[Math.min(n[1][0],r.width),Math.min(n[1][1],r.height)]];this.zoomBehavior.extent(i).translateExtent(n).scaleExtent(this.zoomLimits),this.syncTrackObjects(e.positionedTracks),this.syncMetaTracks(e.metaTracks);for(const o of e.positionedTracks){const e=o.track.options,t=this.trackDefObjects[o.track.uid].trackObject;if(t.rerender(e),Vw(o.track)){const e={};for(const t of o.track.contents)e[t.uid]=t;for(const n in t.createdTracks)t.createdTracks[n].rerender(e[n].options)}}this.props.onNewTilesLoaded();for(const o in this.trackDefObjects){const e=this.trackDefObjects[o].trackObject;e.delayDrawing=!1,e.draw()}}},{key:"componentDidUpdate",value:function(e){(this.props.initialXDomain[0]!==e.initialXDomain[0]||this.props.initialXDomain[1]!==e.initialXDomain[1]||this.props.initialYDomain[0]!==e.initialYDomain[0]||this.props.initialYDomain[1]!==e.initialYDomain[1])&&this.element&&(this.element.__zoom=fK),e.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),e.zoomable!==this.props.zoomable&&(this.props.zoomable?this.addZoom():this.removeZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){var e,t;this.mounted=!1,this.removeTracks(Object.keys(this.trackDefObjects)),this.removeMetaTracks(Object.keys(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.pStage&&this.currentProps.pixiStage.removeChild(this.pStage),null==(e=this.pMask)||e.destroy(!0),null==(t=this.pStage)||t.destroy(!0),this.pubSubs.forEach((e=>this.props.pubSub.unsubscribe(e))),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(e){e.sourceUid===this.uid&&"contextmenu"!==e.type&&this.element&&zS(e,this.element)}},{key:"isWithin",value:function(e,t){const n=e>=this.elementPos.left&&e<=this.elementPos.width+this.elementPos.left,r=t>=this.elementPos.top&&t<=this.elementPos.height+this.elementPos.top;return n&&r}},{key:"zoomToDataPosHandler",value:function(e){let{pos:t,animateTime:n}=e;this.zoomToDataPos(...t,n)}},{key:"addZoom",value:function(){!this.elementSelection||!this.currentProps.zoomable||(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){var e,t,n,r;null==(e=this.pMask)||e.clear(),null==(t=this.pMask)||t.beginFill(),null==(n=this.pMask)||n.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),null==(r=this.pMask)||r.endFill()}},{key:"setBackground",value:function(){var e,t,n,r,i;const o=this.props.theme===eS?"black":"white",a=CS((null==(e=this.currentProps.viewOptions)?void 0:e.backgroundColor)??o);null==(t=this.pBackground)||t.clear(),null==(n=this.pBackground)||n.beginFill(a),null==(r=this.pBackground)||r.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),null==(i=this.pBackground)||i.endFill()}},{key:"windowScrolled",value:function(){this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((()=>{this.addZoom()}),100)}},{key:"setUpInitialScales",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,1],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,Number.MAX_SAFE_INTEGER];i[0]=null===i[0]?0:i[0],i[1]=null===i[1]?1/0:i[1];const o=e[1]-e[0],a=(t[0]+t[1])/2;if(t[0]=a-o/2,t[1]=a+o/2,e[0]===this.initialXDomain[0]&&e[1]===this.initialXDomain[1]&&t[0]===this.initialYDomain[0]&&t[1]===this.initialYDomain[1]&&n[0]===this.xDomainLimits[0]&&n[1]===this.xDomainLimits[1]&&r[0]===this.yDomainLimits[0]&&r[1]===this.yDomainLimits[1]&&i[0]===this.zoomLimits[0]&&i[1]===this.zoomLimits[1])return;let s,l;this.initialXDomain=e,this.initialYDomain=t,this.xDomainLimits=n,this.yDomainLimits=r,this.zoomLimits=i,this.zoomTransform=fK,this.prevZoomTransform=fK,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=Fp().domain([this.currentProps.paddingLeft+this.currentProps.leftWidth,this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([e[0],e[1]]),0===this.currentProps.centerWidth?(s=this.currentProps.paddingTop+this.currentProps.topHeight,l=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight):(s=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,l=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2),this.drawableToDomainY=Fp().domain([s,l]).range([t[0],t[1]]),this.prevCenterX=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2}},{key:"updatablePropsToString",value:function(e){return JSON.stringify({positionedTracks:e.positionedTracks,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,width:e.width,height:e.height,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,leftWidth:e.leftWidth,topHeight:e.topHeight,dragging:e.dragging,viewOptions:e.viewOptions})}},{key:"draggingChanged",value:function(e){this.dragging=e,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,n=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2;if(!this.drawableToDomainX||!this.drawableToDomainY)return;const r=(this.drawableToDomainX(t)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,i=(this.drawableToDomainY(n)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=i,this.cumCenterXOffset+=r,this.prevCenterY=n,this.prevCenterX=t;const o=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],a=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];this._xScale=Fp().domain(o).range([0,this.currentProps.width]),this._yScale=Fp().domain(a).range([0,this.currentProps.height]);for(const s in this.trackDefObjects)this.trackDefObjects[s].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(e)}},{key:"getTrackDef",value:function(e){const t=LS(this.trackDefObjects);for(const[,{trackDef:n,trackObject:r}]of t){if(r===e)return n.track;if(Vw(n.track))for(const t of n.track.contents)if(r.createdTracks[t.uid]===e)return t}return null}},{key:"getTrackObject",value:function(e){const t=LS(this.trackDefObjects);for(let n=0;n<t.length;n++){const r=t[n][0],i=t[n][1].trackObject;if(r===e)return i;if(i.createdTracks){const t=LS(i.createdTracks);for(let n=0;n<t.length;n++){const r=t[n][0],i=t[n][1];if(r===e)return i}}}}},{key:"timedUpdatePositionAndDimensions",value:function(){this.closing||!this.element||(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top+this.scrollTop,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(e){const t=Object.keys(this.metaTracks),n=new Set(e.map((e=>e.uid)));this.addMetaTracks(e.filter((e=>!this.metaTracks[e.uid]))),this.updateMetaTracks(e.filter((e=>this.metaTracks[e.uid]))),this.removeMetaTracks(t.filter((e=>!n.has(e))))}},{key:"syncTrackObjects",value:function(e){this.prevTrackDefinitions=JSON.stringify(e);const t={};for(let s=0;s<e.length;s++)t[e[s].track.uid]=e[s];const n=new Set(Object.keys(this.trackDefObjects)),r=new Set(Object.keys(t)),i=new Set([...r].filter((e=>!n.has(e)))),o=new Set([...n].filter((e=>!r.has(e)))),a=new Set([...r].filter((e=>n.has(e))));this.updateExistingTrackDefs([...a].map((e=>t[e]))),this.addNewTracks([...i].map((e=>t[e]))),this.updateExistingTrackDefs([...i].map((e=>t[e]))),this.removeTracks([...o])}},{key:"addMetaTracks",value:function(e){e.filter((e=>!this.metaTracks[e.uid])).forEach((e=>{this.metaTracks[e.uid]={trackDef:e,trackObject:this.createMetaTrack(e)}}))}},{key:"addNewTracks",value:function(e){if(this.currentProps.pixiStage){for(let t=0;t<e.length;t++){const n=e[t],r=this.createTrackObject(n.track);r.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[n.track.uid]={trackDef:n,trackObject:r};const i=this.zoomTransform.rescaleX(this.xScale),o=this.zoomTransform.rescaleY(this.yScale);r.setDimensions([n.width,n.height]),r.zoomed(i,o)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(e){}},{key:"updateExistingTrackDefs",value:function(e){for(const t of e){const e=this.trackDefObjects[t.track.uid];e.trackDef=t,Vw(t.track)&&e.trackObject.updateContents(t.track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale)}this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){let e=!1;for(const t in this.trackDefObjects){const n=this.trackDefObjects[t].trackDef,r=this.trackDefObjects[t].trackObject,i=r.position,o=r.dimensions,a=[this.xPositionOffset+n.left,this.yPositionOffset+n.top],s=[n.width,n.height];(!i||a[0]!==i[0]||a[1]!==i[1])&&(r.setPosition(a),e=!0),(!o||s[0]!==o[0]||s[1]!==o[1])&&(r.setDimensions(s),e=!0)}return e}},{key:"removeMetaTracks",value:function(e){e.forEach((e=>{this.metaTracks[e].trackObject.remove(),this.metaTracks[e]=void 0,delete this.metaTracks[e]}))}},{key:"removeTracks",value:function(e){for(let t=0;t<e.length;t++)this.trackDefObjects[e[t]].trackObject.remove(),delete this.trackDefObjects[e[t]]}},{key:"setCenter",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.xScale,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.yScale;const s=(this.xScale.invert(1)-this.xScale.invert(0))/n,l=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,c=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,u=l-o(e)*s,h=c-a(t)*s;let p;const f=()=>{const e=fK.translate(u,h).scale(s);this.zoomTransform=e,this.elementSelection&&this.emptyZoomBehavior.transform(this.elementSelection,e),p=this.applyZoomTransform(r)};if(i&&this.elementSelection){let e=this.elementSelection;this.activeTransitions+=1,document.hidden||(e=e.transition().duration(i)),e.call(this.zoomBehavior.transform,fK.translate(u,h).scale(s)).on("end",(()=>{f(),this.activeTransitions-=1}))}else f();return p}},{key:"valueScaleMove",value:function(e){if(this.zoomStartPos){for(const t of this.getTracksAtPosition(...this.zoomStartPos))t.movedY(e);this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}}},{key:"valueScaleZoom",value:function(e,t){if(!function(e){return"deltaY"in e&&"deltaMode"in e}(e.sourceEvent))return;const n=e.sourceEvent.deltaY,r=e.sourceEvent.deltaMode,i=n*(r?120:1)/500,o=Jl(e.sourceEvent,this.props.canvasElement);for(const a of this.getTracksAtPosition(...o)){const e="1d-horizontal"===t?o[1]-a.position[1]:o[0]-a.position[0];a.zoomedY(e,2**i)}this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}},{key:"zoomed",value:function(e){var t;let n=null;if(this.zoomStartPos){const e=this.getTracksAtPosition(...this.zoomStartPos);if(e.length){const r=e[0],i=this.getTrackDef(r);if(!i)return;null!=(t=AS[i.type])&&t.orientation&&(n=AS[i.type].orientation),r instanceof r8&&(n="1d-vertical")}}if(n&&e.sourceEvent){if(e.shiftKey||this.valueScaleZooming){if(void 0!==e.sourceEvent.deltaY)return void this.valueScaleZoom(e,n);"1d-horizontal"===n?this.valueScaleMove(e.sourceEvent.movementY):"1d-vertical"===n&&this.valueScaleMove(e.sourceEvent.movementX)}"1d-horizontal"===n&&e.sourceEvent.movementY?this.valueScaleMove(e.sourceEvent.movementY):"1d-vertical"===n&&e.sourceEvent.movementX&&this.valueScaleMove(e.sourceEvent.movementX)}this.zoomTransform=this.currentProps.zoomable?e.transform:fK,this.prevZoomTransform.k!==this.zoomTransform.k||("1d-horizontal"===n?this.zoomTransform=fK.translate(this.zoomTransform.x,this.prevZoomTransform.y).scale(this.zoomTransform.k):"1d-vertical"===n&&(this.zoomTransform=fK.translate(this.prevZoomTransform.x,this.zoomTransform.y).scale(this.zoomTransform.k)),this.element&&(this.element.__zoom=this.zoomTransform)),this.applyZoomTransform(!0),this.prevZoomTransform=this.zoomTransform,this.props.pubSub.publish("app.zoom",e),e.sourceEvent&&(e.sourceEvent.stopPropagation(),e.sourceEvent.preventDefault())}},{key:"getTracksAtPosition",value:function(e,t){const n=[];let r=[];for(const i in this.trackDefObjects){const e=this.trackDefObjects[i].trackObject;e.childTracks?r=r.concat(e.childTracks):r.push(e)}for(const i of r){const r=i.position[0]<=e&&e<=i.position[0]+i.dimensions[0],o=i.position[1]<=t&&t<=i.position[1]+i.dimensions[1];r&&o&&n.push(i)}return n}},{key:"zoomStarted",value:function(e){this.zooming=!0,e&&e.sourceEvent&&(this.zoomStartPos=Jl(e.sourceEvent,this.props.canvasElement),e.sourceEvent.shiftKey&&(this.valueScaleZooming=!0)),this.zoomStartTransform=this.zoomTransform,this.props.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,this.zoomStartPos=null,this.valueScaleZooming&&(this.valueScaleZooming=!1,this.element&&(this.element.__zoom=this.zoomStartTransform)),this.props.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.currentProps,n=t.paddingLeft+t.leftWidth,r=t.paddingTop+t.topHeight;if(!this.xScale||!this.yScale)return;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);const i=Fp().domain([n,n+t.centerWidth].map(this.zoomedXScale.invert)).range([0,t.centerWidth]),o=Fp().domain([r,r+t.centerHeight].map(this.zoomedYScale.invert)).range([0,t.centerHeight]);for(const a in this.trackDefObjects){const e=this.trackDefObjects[a].trackObject,n=this.trackDefObjects[a].trackDef;let r="unknown";if(AS[n.track.type]&&(r=AS[n.track.type].orientation),"whole"!==r)if("gallery"!==this.trackDefObjects[a].trackDef.track.position)e.zoomed(i.copy(),o.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,t.paddingLeft+t.leftWidth,t.paddingTop+t.topHeight);else{const n=Fp().domain([t.paddingLeft+t.leftWidthNoGallery,t.paddingLeft+t.leftWidth+t.centerWidth+t.galleryDim].map(this.zoomedXScale.invert)).range([0,t.centerWidth+2*t.galleryDim]),r=Fp().domain([t.paddingTop+t.topHeightNoGallery,t.paddingTop+t.topHeight+t.centerHeight+t.galleryDim].map(this.zoomedYScale.invert)).range([0,t.centerHeight-2*t.galleryDim]);e.zoomed(n.copy(),r.copy(),this.zoomTransform.k)}else{const n=Fp().domain([t.paddingLeft,t.width-t.paddingLeft].map(this.zoomedXScale.invert)).range([0,t.width-2*t.paddingLeft]),r=Fp().domain([t.paddingTop,t.height-t.paddingTop].map(this.zoomedYScale.invert)).range([0,t.height-2*t.paddingTop]);e.zoomed(n,r)}}return this.currentXScale=i,this.currentYScale=o,e&&this.currentProps.onScalesChanged(i,o),[i,o]}},{key:"createMetaTrack",value:function(e){e.type;{const n=this.props.pluginTracks[e.type];if(n?.isMetaTrack){const r={getTrackObject:this.getTrackObject.bind(this),onNewTilesLoaded:()=>{this.currentProps.onNewTilesLoaded(e.uid)},definition:e};try{return new n.track(this.availableForPlugins,r,e.options)}catch(t){console.error("Plugin meta track",e.type,"failed to instantiate.",t)}}return console.warn(`Unknown meta track of type: ${e.type}`),new Z9(this.pStage,{name:"Unknown Track Type",type:e.type})}}},{key:"createTrackObject",value:function(e){const t=this.createLocationAgnosticTrackObject(e);return"left"!==e.position&&"right"!==e.position||"1d-horizontal"!==AS[e.type].orientation?t:new r8(t)}},{key:"createLocationAgnosticTrackObject",value:function(e){let t=e.data;t||(t={server:FA(e.server),tilesetUid:e.tilesetUid}),e.coordSystem&&(t.coordSystem=e.coordSystem);const n=cve(t,this.props.pubSub,this.props.pluginDataFetchers,this.availableForPlugins);if(!this.pStage||!this.svgElement)throw new Error("No PIXI stage or svg element");const r={id:e.uid,trackUid:e.uid,trackType:e.type,viewUid:this.viewUid,pubSub:this.props.pubSub,scene:this.pStage,dataConfig:t,dataFetcher:n,getLockGroupExtrema:()=>this.currentProps.getLockGroupExtrema(e.uid),handleTilesetInfoReceived:t=>{this.currentProps.onTilesetInfoReceived(e.uid,t)},animate:()=>{this.currentProps.onNewTilesLoaded(e.uid)},svgElement:this.svgElement,isValueScaleLocked:()=>this.currentProps.isValueScaleLocked(e.uid),onValueScaleChanged:()=>{this.currentProps.onValueScaleChanged(e.uid)},onTrackOptionsChanged:t=>{this.currentProps.onTrackOptionsChanged(e.uid,t)},onMouseMoveZoom:this.props.onMouseMoveZoom,chromInfoPath:e.chromInfoPath,isShowGlobalMousePosition:()=>this.props.isShowGlobalMousePosition,getTheme:()=>this.props.theme};switch(e.y&&(r.yPosition=e.y),e.x&&(r.xPosition=e.x),e.projectionXDomain&&(r.projectionXDomain=e.projectionXDomain),e.projectionYDomain&&(r.projectionYDomain=e.projectionYDomain),e.type){case"left-axis":return new u5(r,e.options);case"top-axis":return new r5(r,e.options);case"heatmap":return new j1(r,e.options);case"multivec":case"vector-heatmap":case"horizontal-multivec":case"horizontal-vector-heatmap":case"vertical-multivec":case"vertical-vector-heatmap":return new x6(r,e.options);case"1d-heatmap":case"horizontal-1d-heatmap":case"vertical-1d-heatmap":return new q6(r,e.options);case"line":case"horizontal-line":case"vertical-line":return new p6(r,e.options);case"point":case"horizontal-point":case"vertical-point":return new b6(r,e.options);case"bar":case"horizontal-bar":case"vertical-bar":return new M6(r,e.options);case"divergent-bar":case"horizontal-divergent-bar":case"vertical-divergent-bar":return new H6(r,e.options);case"horizontal-1d-tiles":return new d2(r,e.options);case"vertical-1d-tiles":return new k2(r,e.options);case"2d-tiles":return new X1(r,e.options);case"stacked-interval":case"top-stacked-interval":case"left-stacked-interval":return new e8(r,e.options);case"viewport-projection-center":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new f7(r,e.options)):new NQ(r,{});case"viewport-projection-horizontal":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new T7(r,e.options)):new NQ(r,{});case"viewport-projection-vertical":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new I7(r,e.options)):new NQ(r,{});case"gene-annotations":case"horizontal-gene-annotations":case"vertical-gene-annotations":return new E8(r,e.options);case"2d-rectangle-domains":case"arrowhead-domains":return new C8(r,e.options);case"horizontal-1d-annotations":return new X8(r,e.options);case"vertical-1d-annotations":return new X8(r,e.options,!0);case"2d-annotations":return new B8(r,e.options);case"linear-2d-rectangle-domains":case"horizontal-2d-rectangle-domains":case"vertical-2d-rectangle-domains":return new Z8(r,e.options);case"square-markers":return new o9(r,e.options);case"combined":return r.tracks=e.contents,r.createTrackObject=this.createTrackObject.bind(this),new rA(r);case"2d-chromosome-labels":return new g9(r,e.options);case"horizontal-chromosome-grid":return r.orientation="1d-horizontal",new S9(r,e.options);case"vertical-chromosome-grid":return r.orientation="1d-vertical",new S9(r,e.options);case"2d-chromosome-grid":return new S9(r,e.options);case"chromosome-labels":case"horizontal-chromosome-labels":case"vertical-chromosome-labels":return new F9(r,e.options);case"linear-heatmap":case"horizontal-heatmap":case"vertical-heatmap":return new Y9(r,e.options);case"2d-chromosome-annotations":return new C9(r,e.options);case"1d-value-interval":case"horizontal-1d-value-interval":case"vertical-1d-value-interval":return new o7(r,e.options);case"osm":case"osm-tiles":return new Mee(r,e.options);case"osm-2d-tile-ids":return new Uee(r,e.options);case"mapbox":case"mapbox-tiles":return new $ee(r,e.options);case"raster-tiles":return new tte(r,e.options);case"bedlike":case"vertical-bedlike":return new K4(r,e.options);case"overlay-track":return new o6(r,e.options);case"overlay-chromosome-grid-track":return r.isOverlay=!0,new S9(r,e.options);case"horizontal-rule":return new cee(r,e.options);case"vertical-rule":return new _ee(r,e.options);case"cross-rule":return r.x=e.x,r.y=e.y,new xee(r,e.options);case"simple-svg":return new K2(r,e.options);case"empty":{const t=e.options;return new UQ(r,t)}default:{const t=this.props.pluginTracks[e.type];if(t&&!t.isMetaTrack){r.AVAILABLE_FOR_PLUGINS=this.availableForPlugins,r.baseEl=this.baseEl,r.definition=e,e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback&&(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback);try{return new t.track(this.availableForPlugins,r,e.options)}catch(i){console.error("Plugin track",e.type,"failed to instantiate.",i)}}return console.warn("Unknown track type:",e.type),new Z9(r,{name:"Unknown Track Type",type:e.type})}}}},{key:"zoomToDataPos",value:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const[a,s,l]=PA(this.xScale.copy().domain([e,t]),this.yScale.copy().domain([n,r])),c=o?o(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(a,s,l,!1,i,c[0],c[1])}},{key:"forwardContextMenu",value:function(e){this.props.disableTrackMenu||e.altKey||(e.preventDefault(),setTimeout((()=>{this.props.pubSub.publish("contextmenu",e)}),0))}},{key:"addEventTracker",value:function(){!this.eventTracker||this.eventTracker===this.eventTrackerOld||(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){this.eventTracker&&(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(){this.element&&(this.elementPos=this.element.getBoundingClientRect())}},{key:"forwardEvent",value:function(e){e.sourceUid=this.uid,e.forwarded=!0,this.props.pubSub.publish("app.event",e)}},{key:"onScrollHandler",value:function(e){this.scrollTop=e}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.baseEl=e},className:zg("track-renderer-div",eve),style:{height:this.currentProps.height,width:this.currentProps.width}},i.createElement("div",{ref:e=>{this.element=e},className:zg("track-renderer-element",tve)}),i.createElement("div",{ref:e=>{this.eventTracker=e},className:zg("track-renderer-events",nve)},this.currentProps.children))}}]),n}(i.Component);uve.defaultProps={pluginDataFetchers:{},pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isShowGlobalMousePosition:!1,isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,paddingLeft:0,paddingTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]},uve.propTypes={canvasElement:Ls.object,centerHeight:Ls.number,centerWidth:Ls.number,children:Ls.array,disableTrackMenu:Ls.bool,galleryDim:Ls.number,height:Ls.number,initialXDomain:Ls.array,initialYDomain:Ls.array,isShowGlobalMousePosition:Ls.bool,isRangeSelection:Ls.bool,leftWidth:Ls.number,leftWidthNoGallery:Ls.number,paddingLeft:Ls.number,paddingTop:Ls.number,metaTracks:Ls.array,onMouseMoveZoom:Ls.func,onNewTilesLoaded:Ls.func.isRequired,onScalesChanged:Ls.func.isRequired,pixiRenderer:Ls.object.isRequired,pixiStage:Ls.object.isRequired,pluginDataFetchers:Ls.object,pluginTracks:Ls.object,positionedTracks:Ls.array,pubSub:Ls.object.isRequired,setCentersFunction:Ls.func,svgElement:Ls.object.isRequired,theme:Ls.symbol.isRequired,topHeight:Ls.number,topHeightNoGallery:Ls.number,viewOptions:Ls.object,width:Ls.number,xDomainLimits:Ls.array,yDomainLimits:Ls.array,valueScaleZoom:Ls.bool,zoomable:Ls.bool.isRequired,zoomDomain:Ls.array,uid:Ls.string,zoomLimits:Ls.array};const hve=hQ(MK(uve));var pve={exports:{}};!function(e){var t;self,t=e=>(()=>{var t={4184:(e,t)=>{var n;!function(){var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),i=n(401),o=n(7667),a=n(1327),s=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},8407:(e,t,n)=>{var r=n(7040),i=n(4125),o=n(2117),a=n(7518),s=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),i=n(1285),o=n(6e3),a=n(9916),s=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),i=n(619),o=n(2385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},6384:(e,t,n)=>{var r=n(8407),i=n(7465),o=n(3779),a=n(7599),s=n(4758),l=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},4636:(e,t,n)=>{var r=n(2545),i=n(5694),o=n(1469),a=n(4144),s=n(5776),l=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),p=!n&&!u&&!h&&l(e),f=n||u||h||p,d=f?r(e.length,String):[],m=d.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||d.push(g);return d}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:(e,t,n)=>{var r=n(2488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},4239:(e,t,n)=>{var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),i=n(7005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(6384),i=n(7114),o=n(8351),a=n(6096),s=n(4160),l=n(1469),c=n(4144),u=n(6719),h="[object Arguments]",p="[object Array]",f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),_=v?p:s(e),T=b?p:s(t),E=(_=_==h?f:_)==f,S=(T=T==h?f:T)==f,w=_==T;if(w&&c(e)){if(!c(t))return!1;v=!0,E=!1}if(w&&!E)return y||(y=new r),v||u(e)?i(e,t,n,m,g,y):o(e,t,_,n,m,g,y);if(!(1&n)){var A=E&&d.call(e,"__wrapped__"),O=S&&d.call(t,"__wrapped__");if(A||O){var x=A?e.value():e,k=O?t.value():t;return y||(y=new r),g(x,k,n,m,y)}}return!!w&&(y||(y=new r),a(e,t,n,m,g,y))}},8458:(e,t,n)=>{var r=n(3560),i=n(5346),o=n(3218),a=n(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,p=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:s).test(a(e))}},8749:(e,t,n)=>{var r=n(4239),i=n(1780),o=n(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},280:(e,t,n)=>{var r=n(5726),i=n(6916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},7114:(e,t,n)=>{var r=n(8668),i=n(2908),o=n(4757);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var p=l.get(e),f=l.get(t);if(p&&f)return p==t&&f==e;var d=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++d<u;){var y=e[d],v=t[d];if(a)var b=c?a(v,y,d,t,e,l):a(y,v,d,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||s(y,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},8351:(e,t,n)=>{var r=n(2705),i=n(1149),o=n(7813),a=n(7114),s=n(8776),l=n(1814),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var d=1&r;if(f||(f=l),e.size!=t.size&&!d)return!1;var m=p.get(e);if(m)return m==t;r|=2,p.set(e,t);var g=a(f(e),f(t),r,c,h,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var p=c[h];if(!(l?p in t:i.call(t,p)))return!1}var f=s.get(e),d=s.get(t);if(f&&d)return f==t&&d==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var y=e[p=c[h]],v=t[p];if(o)var b=l?o(v,y,p,t,e,s):o(y,v,p,e,t,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=e.constructor,T=t.constructor;_==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof T&&T instanceof T||(m=!1)}return s.delete(e),s.delete(t),m}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),i=n(9551),o=n(3674);e.exports=function(e){return r(e,o,i)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch{}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9551:(e,t,n)=>{var r=n(4963),i=n(479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},4160:(e,t,n)=>{var r=n(8552),i=n(7071),o=n(3818),a=n(8525),s=n(577),l=n(4239),c=n(346),u="[object Map]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",d="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(a),b=c(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=d||i&&_(new i)!=u||o&&_(o.resolve())!=h||a&&_(new a)!=p||s&&_(new s)!=f)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return d;case g:return u;case y:return h;case v:return p;case b:return f}return t}),e.exports=_},7801:e=>{e.exports=function(e,t){return e?.[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=n??9007199254740991)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),i=n(8407),o=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),i=n(7071),o=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch{}try{return e+""}catch{}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,n)=>{var r=n(9454),i=n(7005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),i=n(5062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:(e,t,n)=>{var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6719:(e,t,n)=>{var r=n(8749),i=n(1717),o=n(1167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(4636),i=n(280),o=n(8612);e.exports=function(e){return o(e)?r(e):i(e)}},8306:(e,t,n)=>{var r=n(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},2703:(e,t,n)=>{var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9787:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e](o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{r.r(i),r.d(i,{default:()=>ce,expandNodesToLevel:()=>le});var e=r(4184),t=r.n(e),n=r(8446),o=r.n(n),a=r(8306),s=r.n(a);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")};var c=r(5697),u=r.n(c),h=r(9787),p=r.n(h);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["children","title"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}(),function(){var e,t=y(r);if(i){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,d);return p().createElement("button",m({"aria-label":n,title:n,type:"button"},r),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().PureComponent);v(b,"propTypes",{children:u().node.isRequired,title:u().string}),v(b,"defaultProps",{title:null});const _=b,T={ALL:"all",PARENT:"parent",LEAF:"leaf"};function E(e){this.message=e,this.stack=Error().stack}E.prototype=Object.create(Error.prototype),E.prototype.name="CheckboxTreeError";const S=E;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=T;const x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.props=t,this.flatNodes=n}var t,n;return t=e,n=[{key:"setProps",value:function(e){this.props=e}},{key:"clone",value:function(){var t=this,n={};return Object.keys(this.flatNodes).forEach((function(e){var r=t.flatNodes[e];n[e]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r)})),new e(this.props,n)}},{key:"getNode",value:function(e){return this.flatNodes[e]}},{key:"reset",value:function(){this.flatNodes={}}},{key:"flattenNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(e)&&0!==e.length){var i=this.props,o=i.disabled,a=i.noCascade;e.forEach((function(e,i){var s=t.nodeHasChildren(e);if(void 0!==t.flatNodes[e.value])throw new S("Duplicate value '".concat(e.value,"' detected. All node values must be unique."));t.flatNodes[e.value]={label:e.label,value:e.value,children:e.children,parent:n,isChild:void 0!==n.value,isParent:s,isLeaf:!s,showCheckbox:void 0===e.showCheckbox||e.showCheckbox,disabled:t.getDisabledState(e,n,o,a),treeDepth:r,index:i},t.flattenNodes(e.children,e,r+1)}))}}},{key:"nodeHasChildren",value:function(e){return Array.isArray(e.children)}},{key:"getDisabledState",value:function(e,t,n,r){return!!n||!(r||!t.disabled)||!!e.disabled}},{key:"deserializeLists",value:function(e){var t=this,n=["checked","expanded"];Object.keys(this.flatNodes).forEach((function(e){n.forEach((function(n){t.flatNodes[e][n]=!1}))})),n.forEach((function(n){e[n].forEach((function(e){void 0!==t.flatNodes[e]&&(t.flatNodes[e][n]=!0)}))}))}},{key:"serializeList",value:function(e){var t=this,n=[];return Object.keys(this.flatNodes).forEach((function(r){t.flatNodes[r][e]&&n.push(r)})),n}},{key:"expandAllNodes",value:function(e){var t=this;return Object.keys(this.flatNodes).forEach((function(n){t.flatNodes[n].isParent&&(t.flatNodes[n].expanded=e)})),this}},{key:"toggleChecked",value:function(e,t,n,r){var i=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.flatNodes[e.value],s=[O.PARENT,O.ALL].indexOf(n)>-1,l=[O.LEAF,O.ALL].indexOf(n)>-1;if(a.isLeaf||r){if(e.disabled)return this;this.toggleNode(e.value,"checked",t)}else(s||0===a.children.length)&&this.toggleNode(e.value,"checked",t),l&&a.children.forEach((function(e){i.toggleChecked(e,t,n,r,!1)}));return o&&!r&&a.isChild&&s&&this.toggleParentStatus(a.parent,n),this}},{key:"toggleParentStatus",value:function(e,t){var n=this.flatNodes[e.value];n.isChild?(t===O.ALL&&this.toggleNode(e.value,"checked",this.isEveryChildChecked(n)),this.toggleParentStatus(n.parent,t)):this.toggleNode(e.value,"checked",this.isEveryChildChecked(n))}},{key:"isEveryChildChecked",value:function(e){var t=this;return e.children.every((function(e){return t.getNode(e.value).checked}))}},{key:"toggleNode",value:function(e,t,n){return this.flatNodes[e][t]=n,this}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}(),function(){var e,t=D(r);if(i){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.apply(this,arguments)}return t=a,n=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var e=this.props.indeterminate;this.checkbox.indeterminate=e}},{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props);return delete t.indeterminate,p().createElement("input",I({},t,{ref:function(t){e.checkbox=t},type:"checkbox"}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().PureComponent);R(N,"propTypes",{indeterminate:u().bool}),R(N,"defaultProps",{indeterminate:!1});const M=N,L=u().shape({check:u().node,uncheck:u().node,halfCheck:u().node,expandClose:u().node,expandOpen:u().node,expandAll:u().node,collapseAll:u().node,parentClose:u().node,parentOpen:u().node,leaf:u().node}),j=u().shape({collapseAll:u().string.isRequired,expandAll:u().string.isRequired,toggle:u().string.isRequired});function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(s,e);var n,r,i,o,a=(i=s,o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}(),function(){var e,t=H(i);if(o){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).onCheck=t.onCheck.bind(G(t)),t.onCheckboxKeyPress=t.onCheckboxKeyPress.bind(G(t)),t.onCheckboxKeyUp=t.onCheckboxKeyUp.bind(G(t)),t.onClick=t.onClick.bind(G(t)),t.onExpand=t.onExpand.bind(G(t)),t}return n=s,(r=[{key:"onCheck",value:function(){var e=this.props,t=e.value;(0,e.onCheck)({value:t,checked:this.getCheckState({toggle:!0})})}},{key:"onCheckboxKeyPress",value:function(e){32===e.which&&e.preventDefault()}},{key:"onCheckboxKeyUp",value:function(e){var t=e.keyCode;[13,32].includes(t)&&this.onCheck()}},{key:"onClick",value:function(){var e=this.props,t=e.expandOnClick,n=e.isParent,r=e.value,i=e.onClick;n&&t&&this.onExpand(),i({value:r,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var e=this.props,t=e.expanded,n=e.value;(0,e.onExpand)({value:n,expanded:!t})}},{key:"getCheckState",value:function(e){var t=e.toggle,n=this.props,r=n.checked,i=n.optimisticToggle;return!(0!==r||!t)||1===r&&!t||2===r&&i}},{key:"renderCollapseButton",value:function(){var e=this.props,t=e.expandDisabled,n=e.isLeaf,r=e.lang;return n?p().createElement("span",{className:"rct-collapse"},p().createElement("span",{className:"rct-icon"})):p().createElement(_,{className:"rct-collapse rct-collapse-btn",disabled:t,title:r.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var e=this.props,t=e.expanded,n=e.icons,r=n.expandClose,i=n.expandOpen;return t?i:r}},{key:"renderCheckboxIcon",value:function(){var e=this.props,t=e.checked,n=e.icons,r=n.uncheck,i=n.check,o=n.halfCheck;return 0===t?r:1===t?i:o}},{key:"renderNodeIcon",value:function(){var e=this.props,t=e.expanded,n=e.icon,r=e.icons,i=r.leaf,o=r.parentClose,a=r.parentOpen,s=e.isLeaf;return null!==n?n:s?i:t?a:o}},{key:"renderBareLabel",value:function(e){var t=this.props,n=t.onClick,r=t.title,i=null!==n;return p().createElement("span",{className:"rct-bare-label",title:r},i?p().createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},e):e)}},{key:"renderCheckboxLabel",value:function(e){var t=this.props,n=t.checked,r=t.disabled,i=t.title,o=t.treeId,a=t.value,s=null!==t.onClick,l="".concat(o,"-").concat(String(a).split(" ").join("_")),c=[p().createElement("label",{key:0,htmlFor:l,title:i},p().createElement(M,{checked:1===n,disabled:r,id:l,indeterminate:2===n,onClick:this.onCheck,onChange:function(){}}),p().createElement("span",{"aria-checked":1===n,"aria-disabled":r,className:"rct-checkbox",role:"checkbox",tabIndex:0,onKeyPress:this.onCheckboxKeyPress,onKeyUp:this.onCheckboxKeyUp},this.renderCheckboxIcon()),s?null:e)];return s&&c.push(p().createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},e)),c}},{key:"renderLabel",value:function(){var e=this.props,t=e.label,n=e.showCheckbox,r=[e.showNodeIcon?p().createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,p().createElement("span",{key:1,className:"rct-title"},t)];return n?this.renderCheckboxLabel(r):this.renderBareLabel(r)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.disabled,i=e.expanded,o=e.isLeaf,a=t()({"rct-node":!0,"rct-node-leaf":o,"rct-node-parent":!o,"rct-node-expanded":!o&&i,"rct-node-collapsed":!o&&!i,"rct-disabled":r},n);return p().createElement("li",{className:a},p().createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),s}(p().PureComponent);U(z,"propTypes",{checked:u().number.isRequired,disabled:u().bool.isRequired,expandDisabled:u().bool.isRequired,expanded:u().bool.isRequired,icons:L.isRequired,isLeaf:u().bool.isRequired,isParent:u().bool.isRequired,label:u().node.isRequired,lang:j.isRequired,optimisticToggle:u().bool.isRequired,showNodeIcon:u().bool.isRequired,treeId:u().string.isRequired,value:u().oneOfType([u().string,u().number]).isRequired,onCheck:u().func.isRequired,onExpand:u().func.isRequired,children:u().node,className:u().string,expandOnClick:u().bool,icon:u().node,showCheckbox:u().bool,title:u().string,onClick:u().func}),U(z,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});const V=z,X=u().oneOfType([u().arrayOf(u().string),u().arrayOf(u().number)]);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={label:u().node.isRequired,value:u().oneOfType([u().string,u().number]).isRequired,disabled:u().bool,icon:u().node,showCheckbox:u().bool,title:u().string};const K=u().oneOfType([u().shape($),u().shape(W(W({},$),{},{children:u().arrayOf($).isRequired}))]);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(h,e);var n,r,i,a,c,u=(a=h,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}(),function(){var e,t=re(a);if(c){var n=re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,e)});function h(e){var t;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),t=u.call(this,e);var n=new x(e);return n.flattenNodes(e.nodes),n.deserializeLists({checked:e.checked,expanded:e.expanded}),t.state={id:e.id||"rct-".concat(l()),model:n,prevProps:e},t.onCheck=t.onCheck.bind(ne(t)),t.onExpand=t.onExpand.bind(ne(t)),t.onNodeClick=t.onNodeClick.bind(ne(t)),t.onExpandAll=t.onExpandAll.bind(ne(t)),t.onCollapseAll=t.onCollapseAll.bind(ne(t)),t.combineMemorized=s()((function(e,t){return J(J({},e),t)})).bind(ne(t)),t}return n=h,r=[{key:"onCheck",value:function(e){var t=this.props,n=t.checkModel,r=t.noCascade,i=t.onCheck,o=this.state.model.clone(),a=o.getNode(e.value);o.toggleChecked(e,e.checked,n,r),i(o.serializeList("checked"),J(J({},a),e))}},{key:"onExpand",value:function(e){var t=this.props.onExpand,n=this.state.model.clone(),r=n.getNode(e.value);n.toggleNode(e.value,"expanded",e.expanded),t(n.serializeList("expanded"),J(J({},r),e))}},{key:"onNodeClick",value:function(e){(0,this.props.onClick)(J(J({},this.state.model.getNode(e.value)),e))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,this.props.onExpand)(this.state.model.clone().expandAllNodes(e).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(e,t){var n=this.state.model.getNode(e.value);return n.isLeaf||t||0===e.children.length?n.checked?1:0:this.isEveryChildChecked(e)?1:this.isSomeChildChecked(e)?2:0}},{key:"isEveryChildChecked",value:function(e){var t=this;return e.children.every((function(e){return 1===t.state.model.getNode(e.value).checkState}))}},{key:"isSomeChildChecked",value:function(e){var t=this;return e.children.some((function(e){return t.state.model.getNode(e.value).checkState>0}))}},{key:"renderTreeNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props,i=r.expandDisabled,o=r.expandOnClick,a=r.icons,s=r.lang,l=r.noCascade,c=r.onClick,u=r.onlyLeafCheckboxes,f=r.optimisticToggle,d=r.showNodeTitle,m=r.showNodeIcon,g=this.state,y=g.id,v=g.model,b=h.defaultProps.icons,_=e.map((function(e){var r=e.value,h=v.getNode(e.value),g=h.isParent?t.renderTreeNodes(e.children,e):null;h.checkState=t.determineShallowCheckState(e,l);var _=u?h.isLeaf:h.showCheckbox;return!n.value||v.getNode(n.value).expanded?p().createElement(V,{key:r,checked:h.checkState,className:e.className,disabled:h.disabled,expandDisabled:i,expandOnClick:o,expanded:h.expanded,icon:e.icon,icons:t.combineMemorized(b,a),label:e.label,lang:s,optimisticToggle:f,isLeaf:h.isLeaf,isParent:h.isParent,showCheckbox:_,showNodeIcon:m,title:d?e.title||e.label:e.title,treeId:y,value:e.value,onCheck:t.onCheck,onClick:c&&t.onNodeClick,onExpand:t.onExpand},g):null}));return p().createElement("ol",null,_)}},{key:"renderExpandAll",value:function(){var e=this.props,t=e.icons,n=t.expandAll,r=t.collapseAll,i=e.lang;return e.showExpandAll?p().createElement("div",{className:"rct-options"},p().createElement(_,{className:"rct-option rct-option-expand-all",title:i.expandAll,onClick:this.onExpandAll},n),p().createElement(_,{className:"rct-option rct-option-collapse-all",title:i.collapseAll,onClick:this.onCollapseAll},r)):null}},{key:"renderHiddenInput",value:function(){var e=this.props,t=e.name,n=e.nameAsArray;return void 0===t?null:n?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name;return t.map((function(e){var t="".concat(n,"[]");return p().createElement("input",{key:e,name:t,type:"hidden",value:e})}))}},{key:"renderJoinedHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name,r=t.join(",");return p().createElement("input",{name:n,type:"hidden",value:r})}},{key:"render",value:function(){var e,n=this.props,r=n.direction,i=n.disabled,o=n.iconsClass,a=n.nodes,s=n.nativeCheckboxes,l=this.state.id,c=this.renderTreeNodes(a),u=t()((ie(e={"react-checkbox-tree":!0,"rct-disabled":i},"rct-icons-".concat(o),!0),ie(e,"rct-native-display",s),ie(e,"rct-direction-rtl","rtl"===r),e));return p().createElement("div",{className:u,id:l},this.renderExpandAll(),this.renderHiddenInput(),c)}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.model,r=t.prevProps,i=e.disabled,a=e.id,s=e.nodes,l=J(J({},t),{},{prevProps:e});return n.setProps(e),o()(r.nodes,s)&&r.disabled===i||(n.reset(),n.flattenNodes(s)),null!==a&&(l=J(J({},l),{},{id:a})),n.deserializeLists({checked:e.checked,expanded:e.expanded}),l}}],r&&ee(n.prototype,r),i&&ee(n,i),Object.defineProperty(n,"prototype",{writable:!1}),h}(p().Component);function ae(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>t)return[];var r=[];return e.forEach((function(e){e.children&&(r=[].concat(ae(r),[e.value],ae(le(e.children,t,n+1))))})),r}ie(oe,"propTypes",{nodes:u().arrayOf(K).isRequired,checkModel:u().oneOf([T.LEAF,T.ALL]),checked:X,direction:u().string,disabled:u().bool,expandDisabled:u().bool,expandOnClick:u().bool,expanded:X,icons:L,iconsClass:u().string,id:u().string,lang:j,name:u().string,nameAsArray:u().bool,nativeCheckboxes:u().bool,noCascade:u().bool,onlyLeafCheckboxes:u().bool,optimisticToggle:u().bool,showExpandAll:u().bool,showNodeIcon:u().bool,showNodeTitle:u().bool,onCheck:u().func,onClick:u().func,onExpand:u().func}),ie(oe,"defaultProps",{checkModel:T.LEAF,checked:[],direction:"ltr",disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:p().createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:p().createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:p().createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:p().createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:p().createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:p().createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:p().createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:p().createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:p().createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:p().createElement("span",{className:"rct-icon rct-icon-leaf"})},iconsClass:"fa4",id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});const ce=oe})(),i})(),e.exports=t(i)}(pve);const fve=Cs(pve.exports);function dve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mve(r.key),r)}}function mve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function gve(e,t){return(gve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=vve(e);if(t){var i=vve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vve(e){return(vve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let bve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gve(e,t)}(n,e);var t=yve(n);function n(e){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),(r=t.call(this,e)).localTracks=ES.filter((e=>e.local&&!e.hidden)).map((e=>{const t={...e};return t.datatype=e.datatype[0],t})),r.augmentedTracksInfo=ES,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach((e=>{r.augmentedTracksInfo.push(window.higlassTracksByType[e].config)})),e.datatype?r.localTracks=r.localTracks.filter((t=>t.datatype[0]===e.datatype)):r.localTracks=r.localTracks.filter((e=>e.orientation===r.props.orientation)),r.localTracks.forEach((e=>{e.uuid=ag.nice()}));const i=r.prepareNewEntries("",r.localTracks,{}),o=Object.keys(i),a=o.length?[o[0]]:null;return r.mounted=!1,r.state={selectedUuid:a,options:i,filter:"",checked:[],expanded:[]},r.requestTilesetLists(),r}return function(e,t,n){t&&dve(e.prototype,t),n&&dve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.requestTilesetLists(),this.searchBox.focus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"prepareNewEntries",value:function(e,t,n){const r=n;return t.map((t=>({...t,server:e,tilesetUid:t.uuid,serverUidKey:this.serverUidKey(e,t.uuid),datatype:t.datatype,name:t.name,uid:ag.nice()}))).forEach((e=>{r[e.serverUidKey]=e})),r}},{key:"serverUidKey",value:function(e,t){return`${e}/${t}`}},{key:"requestTilesetLists",value:function(){let e=null;e=this.props.datatype?`dt=${this.props.datatype}`:[...new Set([].concat(...this.augmentedTracksInfo.filter((e=>e.datatype)).filter((e=>e.orientation===this.props.orientation||"1d-vertical"===this.props.orientation&&"1d-horizontal"===e.orientation)).map((e=>e.datatype))))].map((e=>`dt=${e}`)).join("&"),this.props.trackSourceServers?this.props.trackSourceServers.forEach((t=>{Fw.json(`${t}/tilesets/?limit=10000&${e}`,((e,n)=>{if(e)console.error("ERROR:",e);else{const e=this.prepareNewEntries(t,n.results,this.state.options),r=Object.keys(e);let{selectedUuid:i}=this.state;if(!i){i=r.length?[r[0]]:null;const e=this.state.options[i[0]];this.props.selectedTilesetChanged([e])}this.mounted&&this.setState({selectedUuid:i,options:e})}}),this.props.pubSub)})):console.warn("No track source servers specified in the viewconf")}},{key:"handleOptionDoubleClick",value:function(e){const t=this.state.options[e.target.value];this.props.onDoubleClick(t)}},{key:"handleSelectedOptions",value:function(e){const t=[],n=[];for(let r=0;r<e.length;r++)t.push(e[r]),n.push(this.state.options[e[r]]);this.props.selectedTilesetChanged(n),this.setState({selectedUuid:t})}},{key:"handleSelect",value:function(){const{selectedOptions:e}=this.multiSelect,t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r.value)}this.handleSelectedOptions(t)}},{key:"handleSearchChange",value:function(){const e=this.searchBox;this.setState({filter:e.value})}},{key:"partitionByGroup",value:function(e,t){const n={"":{name:"",value:"",children:[]}};for(const i of Object.keys(e)){const r=e[i];if(r.name.toLowerCase().includes(t))if("project_name"in r){const e=r.project_name;e in n||(n[e]={value:e,label:e,children:[]}),n[e].children.push({label:r.name,value:i})}else n[""].children.push({label:r.name,value:i})}const r=n[""].children;for(const i of Object.keys(n))""!==i&&(n[i].children.sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase(),"en"))),r.push(n[i]));return r.sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase(),"en"))),r}},{key:"handleChecked",value:function(e){this.handleSelectedOptions(e),this.setState({checked:e})}},{key:"handleExpanded",value:function(e){this.setState({expanded:e})}},{key:"render",value:function(){const e=[];for(const i in this.state.options)e.push(this.state.options[i]);const t=this.partitionByGroup(this.state.options,this.state.filter),n={width:15,height:15,top:2,right:2,position:"relative"},r=JSON.parse(JSON.stringify(n));r.opacity=.5;const o=i.createElement("form",{onSubmit:e=>{e.preventDefault()}},i.createElement("div",{className:"tileset-finder-search-bar"},i.createElement("span",{className:"tileset-finder-label"},"Select tileset:"),i.createElement("input",{ref:e=>{this.searchBox=e},className:"tileset-finder-search-box",onChange:this.handleSearchChange.bind(this),placeholder:"Search Term",type:"text"})),i.createElement("div",{className:"tileset-finder-checkbox-tree"},i.createElement(fve,{checked:this.state.checked,expanded:this.state.expanded,icons:{uncheck:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#square_o"})),check:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#check_square_o"})),halfCheck:i.createElement("svg",{style:r},i.createElement("use",{xlinkHref:"#check_square_o"})),leaf:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#file_o"})),expandClose:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#chevron_right"})),expandOpen:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#chevron_down"})),parentClose:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#folder_o"})),parentOpen:i.createElement("svg",{style:n},i.createElement("use",{xlinkHref:"#folder_open_o"}))},nodes:t,onCheck:this.handleChecked.bind(this),onExpand:this.handleExpanded.bind(this)})));return i.createElement("div",null,o)}}]),n}(i.Component);bve.propTypes={datatype:Ls.string,orientation:Ls.string,onDoubleClick:Ls.func,pubSub:Ls.object.isRequired,selectedTilesetChanged:Ls.func,trackSourceServers:Ls.array};const _ve=hQ(bve);function Tve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Eve(r.key),r)}}function Eve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Sve(e,t){return(Sve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Ave(e);if(t){var i=Ave(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ave(e){return(Ave=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let Ove=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sve(e,t)}(n,e);var t=wve(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).DATATYPE_TO_TRACK_TYPE=SS(r.props.orientation),r.AVAILABLE_TRACK_TYPES=kS(r.props.datatypes,r.props.orientation),r.state={selectedPlotType:r.AVAILABLE_TRACK_TYPES[0]},r}return function(e,t,n){t&&Tve(e.prototype,t),n&&Tve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.AVAILABLE_TRACK_TYPES=kS(e.datatypes,this.props.orientation),this.AVAILABLE_TRACK_TYPES&&e.allTracksSameDatatype&&this.AVAILABLE_TRACK_TYPES.length>0&&!this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)){const t=VS(e.datatypes[0][0],this.props.position,this.AVAILABLE_TRACK_TYPES);this.handlePlotTypeSelected(t)}}},{key:"handlePlotTypeSelected",value:function(e){this.setState({selectedPlotType:e}),this.props.onPlotTypeSelected(e.type)}},{key:"render",value:function(){let e="No plot types available for track";const t={};return ES.forEach((e=>{t[e.type]=e})),this.AVAILABLE_TRACK_TYPES&&(e=this.AVAILABLE_TRACK_TYPES.sort(((e,t)=>e.type<t.type)).map((e=>{const n=t[e.type].thumbnail,r=this.state.selectedPlotType.type===e.type?"plot-type-item plot-type-selected":"plot-type-item",o=t[e.type].thumbnail?i.createElement("div",{className:"track-thumbnail",dangerouslySetInnerHTML:{__html:n.outerHTML}}):i.createElement("div",{className:"track-thumbnail"},i.createElement("svg",{height:20,width:30}));return i.createElement("li",{key:e.type,className:r,onClick:t=>{this.setState({selectedPlotType:e}),this.props.onPlotTypeSelected(e.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},o,i.createElement("span",{style:{verticalAlign:"middle"}},e.type))}))),i.createElement("div",null,e.length>0&&this.props.allTracksSameDatatype&&i.createElement("div",{className:"plot-type-container"},e),!this.props.allTracksSameDatatype&&i.createElement("div",{className:"plot-type-container-empty"},"Datasets with multiple datatypes chosen. They will be added with their default track types."))}}]),n}(i.Component);function xve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kve(r.key),r)}}function kve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Ive(e,t){return(Ive=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Dve(e);if(t){var i=Dve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pve(e)}(this,n)}}function Pve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dve(e){return(Dve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Ove.propTypes={allTracksSameDatatype:Ls.bool,datatypes:Ls.array,orientation:Ls.string,onPlotTypeSelected:Ls.func,position:Ls.string};let Rve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ive(e,t)}(n,e);var t=Cve(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).options={},r.state={selectedTilesets:[{datatype:"none"}],allTracksSameDatatype:!0},r.handleSubmitBound=r.handleSubmit.bind(Pve(r)),r.handleTilesetPickerDoubleClickBound=r.handleTilesetPickerDoubleClick.bind(Pve(r)),r.selectedTilesetsChangedBound=r.selectedTilesetsChanged.bind(Pve(r)),r}return function(e,t,n){t&&xve(e.prototype,t),n&&xve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getOrientation",value:function(e){let t=null;return t="top"===e||"bottom"===e?"1d-horizontal":"left"===e||"right"===e?"1d-vertical":"2d",t}},{key:"handleSubmit",value:function(e){e&&e.preventDefault(),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleTilesetPickerDoubleClick",value:function(e){this.selectedTilesetsChanged([e]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleOptionsChanged",value:function(e){this.options=e}},{key:"handlePlotTypeSelected",value:function(e){const{selectedTilesets:t}=this.state;for(const n of t)n.type=e;this.selectedPlotType=e,this.setState({selectedTilesets:t})}},{key:"selectedTilesetsChanged",value:function(e){let t=null;t=0===e.length?[{datatype:"none"}]:e;let n=!0;const r=t[0].datatype;for(const i of t)i.datatype!==r&&(n=!1);if(n)for(const i of t)i.type=this.selectedPlotType;else for(const i of t){let e=[i.datatype];const t=this.getOrientation(this.props.position);"cooler"===i.filetype&&(e=[i.datatype,"chromsizes"]);const n=kS([e],t),r=VS(e[0],this.props.position,n);i.type=r.type}this.setState({selectedTilesets:t,allTracksSameDatatype:n})}},{key:"render",value:function(){const e=this.getOrientation(this.props.position),t=i.createElement("div",null,i.createElement(_ve,{ref:e=>{this.tilesetFinder=e},datatype:this.props.datatype,onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:e=>this.props.onTracksChosen(e,this.props.position),orientation:e,selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return i.createElement(Hse,{maxHeight:!0,okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Add Track"},i.createElement(i.Fragment,null,t,i.createElement(Ove,{ref:e=>{this.plotTypeChooser=e},allTracksSameDatatype:this.state.allTracksSameDatatype,datatypes:this.state.selectedTilesets.map((e=>"cooler"===e.filetype?[e.datatype,"chromsizes"]:[e.datatype])),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:e,position:this.props.position})))}}]),n}(i.Component);function Nve(){return Nve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nve.apply(this,arguments)}function Mve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lve(r.key),r)}}function Lve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function jve(e,t){return(jve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Fve(e);if(t){var i=Fve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Fve(e){return(Fve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Rve.defaultProps={position:"top"},Rve.propTypes={datatype:Ls.string,host:Ls.string,onCancel:Ls.func.isRequired,onTracksChosen:Ls.func.isRequired,position:Ls.string,trackSourceServers:Ls.array.isRequired};let Gve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jve(e,t)}(n,e);var t=Bve(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Mve(e.prototype,t),n&&Mve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){const e=[];return this.props.children.forEach(((t,n)=>{const r=`customTrackDialog_${n}`;e.push(i.createElement(t,Nve({key:r},this.props.bodyProps[n])))})),i.createElement(Hse,{maxHeight:!0,okayOnly:!0,okayTitle:"Close",onCancel:this.props.onCancel,onOkay:this.props.onCancel,title:this.props.title},e)}}]),n}(i.PureComponent);function Hve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uve(r.key),r)}}function Uve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function zve(e,t){return(zve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Xve(e);if(t){var i=Xve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Xve(e){return(Xve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gve.defaultProps={},Gve.propTypes={onCancel:Ls.func.isRequired,title:Ls.string,bodyProps:Ls.array,children:Ls.array};let Yve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zve(e,t)}(n,e);var t=Vve(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).adjusted=!1,r.state={orientation:r.props.orientation?r.props.orientation:"right",left:r.props.position.left,top:r.props.position.top,submenuShown:null},r}return function(e,t,n){t&&Hve(e.prototype,t),n&&Hve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.adjusted=!1,this.setState({left:e.position.left,top:e.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(e,t){this.setState({submenuShown:t,submenuSourceBbox:e})}},{key:"handleItemMouseEnter",value:function(e,t){this.handleItemMouseEnterWithRect(e.currentTarget.getBoundingClientRect(),t)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(this.adjusted)return;this.adjusted=!0,this.divDom=o.findDOMNode(this.div);const e=this.divDom.getBoundingClientRect(),t=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0,height:0};let n=this.state.orientation,r=t.top;if(t.top+e.height>window.innerHeight&&(t.top-e.height>0?r=t.top-e.height+20:(r=t.top-e.height+20,r-=r+e.height-window.innerHeight)),"left"===this.state.orientation){let i=t.left-e.width;i<0&&(t.left+t.width+e.width>window.innerWidth?i=0:(i=t.left+t.width,n="right")),this.setState({left:i,top:r,orientation:n})}else{let i=t.left+t.width;t.left+t.width+e.width>window.innerWidth&&(t.left-e.width<0?(i=0,n="right"):(i=t.left-e.width,n="left")),this.setState({left:i,top:r,orientation:n})}}},{key:"render",value:function(){const e=this.state.left?{left:this.state.left}:{right:this.state.right},t={top:this.state.top},n=Object.assign(e,t);return i.createElement("div",{ref:e=>{this.div=e},className:zg("context-menu-item",Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),style:n},this.props.children)}}]),n}(i.Component);function Wve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qve(r.key),r)}}function qve(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function $ve(e,t){return($ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kve(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Qve(e);if(t){var i=Qve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Qve(e){return(Qve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Yve.propTypes={children:Ls.node,orientation:Ls.string,parentBbox:Ls.object,position:Ls.object,theme:Ls.symbol.isRequired};let Zve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$ve(e,t)}(n,e);var t=Kve(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Wve(e.prototype,t),n&&Wve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},r=this.state.submenuShown;return i.createElement(n,{menuItems:r.children,orientation:this.state.orientation,parentBbox:e,position:t,theme:this.props.theme})}return i.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){const e=[];for(const t in this.props.menuItems){const n=this.props.menuItems[t];e.push(i.createElement(Hb,{key:t,onClick:n.handler?n.handler:()=>null,onMouseEnter:n.children?e=>this.handleItemMouseEnter(e,n):this.handleOtherMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave},n.name,n.children&&i.createElement("svg",{className:Gb["play-icon"]},i.createElement("use",{xlinkHref:"#play"}))))}return i.createElement("div",{ref:e=>{this.div=e},className:zg(Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),style:{left:this.state.left,top:this.state.top}},e,this.getSubmenu())}}]),n}(Yve);function Jve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ebe(r.key),r)}}function ebe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function tbe(e,t){return(tbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nbe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=rbe(e);if(t){var i=rbe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function rbe(e){return(rbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let ibe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tbe(e,t)}(n,e);var t=nbe(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Jve(e.prototype,t),n&&Jve(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getConfigureSeriesMenu",value:function(e,t,n){const r={},o=window.higlassTracksByType&&window.higlassTracksByType[n.type]&&window.higlassTracksByType[n.type].config&&window.higlassTracksByType[n.type].config.optionsInfo;if(o)for(const i of Object.keys(o))$ye[i]=o[i];if(!AS[n.type]||!AS[n.type].availableOptions)return null;for(const i of AS[n.type].availableOptions)if(i in $ye){if(r[i]={name:$ye[i].name},$ye[i].generateOptions){const e=$ye[i].generateOptions(n);r[i].children||(r[i].children={});for(const t of e){const e={name:t.name,value:t.value,handler:()=>{n.options[i]=t.value,this.props.onTrackOptionsChanged(n.uid,n.options),this.props.closeMenu()}};r[i].children[t.value]=e}}if($ye[i].inlineOptions)for(const e in $ye[i].inlineOptions){const t=$ye[i].inlineOptions[e];r[i].children||(r[i].children={});const o={name:t.name,value:t.value};t.componentPickers&&t.componentPickers[n.type]?o.handler=()=>{this.props.onConfigureTrack(n,t.componentPickers[n.type]),this.props.closeMenu()}:o.handler=()=>{n.options[i]=t.value,this.props.onTrackOptionsChanged(n.uid,n.options),this.props.closeMenu()},r[i].children[e]=o}else $ye[i].componentPickers&&$ye[i].componentPickers[n.type]&&(r[i].handler=()=>{this.props.onConfigureTrack(n,$ye[i].componentPickers[n.type]),this.props.closeMenu()})}return i.createElement(Zve,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:r,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getTrackTypeItems",value:function(e,t,n){window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach((e=>{AS[e]=window.higlassTracksByType[e].config}));let{datatype:r}=n,o=null;n.type in AS&&(r||(r=AS[n.type].datatype[0]),({orientation:o}=AS[n.type]));const a=Object.values(AS).filter((e=>e.datatype)).filter((e=>e.orientation)).filter((e=>e.datatype.includes(r))).filter((e=>e.orientation===o)).map((e=>e.type)),s={};for(let i=0;i<a.length;i++)s[a[i]]={value:a[i],name:a[i],handler:()=>{this.props.onChangeTrackType(n.uid,a[i])}};return i.createElement(Zve,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},n=this.state.submenuShown,r=n.value;return"track-type"===n.option?this.getTrackTypeItems(t,e,r):this.getConfigureSeriesMenu(t,e,r)}return i.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){if(this.props.series.data&&"divided"===this.props.series.data.type){const e={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return i.createElement(Hb,{className:Gb["context-menu-item"],onClick:()=>this.props.onChangeTrackData(this.props.series.uid,e),onMouseEnter:e=>this.handleOtherMouseEnter(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Remove divisor"))}return i.createElement(Hb,{className:Gb["context-menu-item"],onClick:()=>this.props.onAddDivisor(this.props.series),onMouseEnter:e=>this.handleOtherMouseEnter(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){let e=null;AS[this.props.series.type]&&AS[this.props.series.type].exportable&&(e=i.createElement(Hb,{className:Gb["context-menu-item"],onClick:()=>this.props.onExportData(this.props.hostTrack.uid,this.props.track.uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Export Data")));const t=this.props.onAddSeries?i.createElement(Hb,{className:Gb["context-menu-item"],onClick:()=>{this.props.onCloseTrack(this.props.series.uid),this.props.onAddSeries(this.props.hostTrack.uid)},onMouseEnter:e=>this.handleOtherMouseEnter(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Replace Series")):null;return i.createElement("div",{ref:e=>{this.div=e},className:zg(Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),"data-menu-type":"SeriesListMenu",onMouseLeave:this.props.handleMouseLeave,style:{left:this.state.left,top:this.state.top}},i.createElement(Hb,{onClick:()=>{},onMouseEnter:e=>this.handleItemMouseEnter(e,{option:"configure-series",value:this.props.track}),onMouseLeave:e=>this.handleMouseLeave(e)},"Configure Series",i.createElement("svg",{className:Gb["play-icon"]},i.createElement("use",{xlinkHref:"#play"}))),i.createElement(Hb,{className:Gb["context-menu-item"],onClick:()=>{},onMouseEnter:e=>this.handleItemMouseEnter(e,{option:"track-type",value:this.props.track}),onMouseLeave:e=>this.handleMouseLeave(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Track Type",i.createElement("svg",{className:Gb["play-icon"]},i.createElement("use",{xlinkHref:"#play"})))),e,this.getDivideByMenuItem(),i.createElement(Hb,{className:Gb["context-menu-item"],onClick:this.props.onCloseTrack,onMouseEnter:e=>this.handleOtherMouseEnter(e)},i.createElement("span",{className:Gb["context-menu-span"]},"Close Series")),t,this.getSubmenu())}}]),n}(Yve);const obe=e=>{let t=[];for(const n of e)n.contents?t=t.concat(n.contents):t.push(n);return t},abe=(e,t,n,r)=>e?(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach((e=>{AS[e]=window.higlassTracksByType[e].config})),obe(e).map((e=>{const o=AS[e.type]?AS[e.type].thumbnail:null,a=o?i.createElement("div",{className:Gb["context-menu-icon"],dangerouslySetInnerHTML:{__html:o.outerHTML}}):i.createElement("div",{className:Gb["context-menu-icon"]},i.createElement("svg",null));return i.createElement(Hb,{key:e.uid,className:Gb["context-menu-item"],onClick:()=>{r&&r(e.uid)},onMouseEnter:n=>{t&&t(n,e)},onMouseLeave:e=>{n&&n(e)}},a,i.createElement("span",{className:Gb["context-menu-span"]},e.options&&e.options.name&&e.options.name.length?e.options.name:e.type,t&&n?i.createElement("svg",{className:Gb["play-icon"]},i.createElement("use",{xlinkHref:"#play"})):null))}))):null;function sbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lbe(r.key),r)}}function lbe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function cbe(e,t){return(cbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ube(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=hbe(e);if(t){var i=hbe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function hbe(e){return(hbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const pbe=U7((e=>function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cbe(e,t)}(n,e);var t=ube(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&sbe(e.prototype,t),n&&sbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox;let t=null;t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top};const n=obe(this.props.tracks).filter((e=>e.uid===this.state.submenuShown.uid))[0],r=n&&"whole"!==n.position;return i.createElement(ibe,{key:`series-list-menu-${n.uid}`,ref:e=>{this.seriesListMenu=e},closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:r?this.props.onAddSeries:null,onChangeTrackData:this.props.onChangeTrackData,onChangeTrackType:this.props.onChangeTrackType,onCloseTrack:()=>this.props.onCloseTrack(this.state.submenuShown.uid),onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:e,position:t,series:this.state.submenuShown,theme:this.props.theme,track:n,trackOrientation:this.props.trackOrientation,trackSourceServers:this.props.trackSourceServers})}return i.createElement("div",null)}}]),n}(e)));function fbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dbe(r.key),r)}}function dbe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mbe(){return mbe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vbe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mbe.apply(this,arguments)}function gbe(e,t){return(gbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ybe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=vbe(e);if(t){var i=vbe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function vbe(e){return(vbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let bbe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gbe(e,t)}(n,e);var t=ybe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).seriesRefs={},r.seriesListMenu=null,r}return function(e,t,n){t&&fbe(e.prototype,t),n&&fbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){mbe(vbe(n.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.div=e},className:zg(Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top}},abe(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{contextMenu:this,onClick:()=>this.props.onLockValueScale(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Lock Value Scale With"),i.createElement(Hb,{contextMenu:this,onClick:()=>this.props.onUnlockValueScale(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Unlock Value Scale"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{contextMenu:this,onClick:()=>this.props.onAddSeries(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Series"),i.createElement(Hb,{onClick:()=>this.props.onCloseTrack(this.props.tracks[0].uid)},"Close Track"),i.createElement(Hb,{onClick:()=>{this.props.onReplaceTrack(this.props.tracks[0].uid,this.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}]),n}(V7(Yve).with(pbe));function _be(e){return i.createElement("div",null,abe(e.tracks,null,null,e.onCloseTrack),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:()=>e.onCloseTrack(e.tracks[0].uid)},"Close all series"))}function Tbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ebe(r.key),r)}}function Ebe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Sbe(e,t){return(Sbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wbe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Obe(e);if(t){var i=Obe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Abe(e)}(this,n)}}function Abe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Obe(e){return(Obe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_be.propTypes={onCloseTrack:Ls.func.isRequired,tracks:Ls.array.isRequired};let xbe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sbe(e,t)}(n,e);var t=wbe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).clickHandlerBound=r.clickHandler.bind(Abe(r)),r.contextMenuHandlerBound=r.contextMenuHandler.bind(Abe(r)),r.resizeHandlerBound=r.resizeHandler.bind(Abe(r)),r}return function(e,t,n){t&&Tbe(e.prototype,t),n&&Tbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),o.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){o.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(e){this.popup.contains(e.target)||this.props.onMenuClosed&&this.props.onMenuClosed(e)}},{key:"contextMenuHandler",value:function(e){e.altKey||(e.preventDefault(),this.clickHandler(e))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return i.createElement("div",null)}}]),n}(i.Component);xbe.defaultProps={onMenuClosed:eA},xbe.propTypes={children:Ls.node.isRequired,onMenuClosed:Ls.func};const kbe=jE((e=>i.createElement(pse,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width}))),Ibe="_vertical-tiled-plot_f3ho8_1";function Cbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pbe(r.key),r)}}function Pbe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Dbe(e,t){return(Dbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rbe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Mbe(e);if(t){var i=Mbe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nbe(e)}(this,n)}}function Nbe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mbe(e){return(Mbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lbe(e){return e&&e.sourceEvent}let jbe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dbe(e,t)}(n,e);var t=Rbe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).brushBehavior=NT().on("start",r.brushStarted.bind(Nbe(r))).on("brush",r.brushed.bind(Nbe(r))).on("end",r.brushedEnded.bind(Nbe(r))),r}return function(e,t,n){t&&Cbe(e.prototype,t),n&&Cbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==e.rangeSelection&&this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==t;if(this.props.rangeSelection!==e.rangeSelection){const n=this.props.is1dRangeSelection?0:1;return this.moveBrush(e.rangeSelection[n]?e.rangeSelection[n]:null,e.rangeSelectionEnd),this.state!==t}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,IA(this.brushEl,QK["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,Lbe(e)&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(e.selection))}},{key:"brushStarted",value:function(e){!Lbe(e)||!e.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(e){if(!this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(e.selection)),e.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushEl.transition().call(this.brushBehavior.move,n):this.brushEl.call(this.brushBehavior.move,n)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map((e=>e.width)).reduce(NA,0),t=this.props.tracks.map((e=>iO(e))).reduce(OA,!1),n=QK[this.props.isRangeSelectionActive?"track-range-selection-active":"track-range-selection"];return i.createElement("div",{className:Ibe},t&&i.createElement("svg",{ref:e=>{this.brushEl=ql(e)},className:n,style:{height:this.props.height,width:e},xmlns:"http://www.w3.org/2000/svg"}),i.createElement(bae,{axis:"x",className:zg(wQ.list,wQ.stylizedList,wQ.horizontalList),component:Kae,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:wQ.stylizedHelper,itemClass:zg(wQ.stylizedItem,wQ.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:kbe,items:this.props.tracks.map((e=>({configMenuVisible:e.uid===this.props.configTrackMenuId,uid:e.uid||ag.nice(),height:this.props.height,width:e.width,value:e.value}))),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:e}))}}]),n}(i.Component);function Bbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fbe(r.key),r)}}function Fbe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Gbe(e,t){return(Gbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hbe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Ube(e);if(t){var i=Ube(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ube(e){return(Ube=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}jbe.propTypes={configTrackMenuId:Ls.string,editable:Ls.bool,handleConfigTrack:Ls.func,handleResizeTrack:Ls.func,handleSortEnd:Ls.func,is1dRangeSelection:Ls.bool,isRangeSelectionActive:Ls.bool,height:Ls.number,onAddSeries:Ls.func,onCloseTrack:Ls.func,onCloseTrackMenuOpened:Ls.func,onConfigTrackMenuOpened:Ls.func,onRangeSelection:Ls.func,onRangeSelectionEnd:Ls.func,onRangeSelectionReset:Ls.func,onRangeSelectionStart:Ls.func,rangeSelection:Ls.array,rangeSelectionEnd:Ls.bool,referenceAncestor:Ls.func,resizeHandles:Ls.object,scale:Ls.func,tracks:Ls.array,tracksControlAlignLeft:Ls.bool};let zbe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gbe(e,t)}(n,e);var t=Hbe(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Bbe(e.prototype,t),n&&Bbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){const e=abe(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),t=this.props.customItems?i.Children.map(this.props.customItems,(e=>i.cloneElement(e,{onMouseEnter:e=>{this.handleOtherMouseEnter(e)}}))):null;return i.createElement("div",{ref:e=>{this.div=e},className:zg(Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top}},t,t&&i.createElement("hr",{className:Gb["context-menu-hr"]}),e,e&&i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:()=>this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Horizontal Rule"),i.createElement(Hb,{onClick:()=>this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Vertical Rule"),i.createElement(Hb,{onClick:()=>this.props.onAddTrack({type:"cross-rule",x:this.props.coords[0],y:this.props.coords[1],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Cross Rule"),i.createElement("hr",{className:Gb["context-menu-hr"]}),this.hasMatrixTrack(this.props.tracks)&&i.createElement(Hb,{onClick:this.handleAddHorizontalSection.bind(this),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&i.createElement(Hb,{onClick:this.handleAddVerticalSection.bind(this),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(e){return HA(this.props.tracks).filter((e=>"heatmap"===e.type)).length>0}},{key:"handleAddHorizontalSection",value:function(){const e=HA(this.props.tracks).filter((e=>"heatmap"===e.type))[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"handleAddVerticalSection",value:function(){const e=HA(this.props.tracks).filter((e=>"heatmap"===e.type))[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}]),n}(V7(Yve).with(pbe));function Vbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xbe(r.key),r)}}function Xbe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Ybe(e,t){return(Ybe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wbe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=$be(e);if(t){var i=$be(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qbe(e)}(this,n)}}function qbe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $be(e){return($be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}zbe.propTypes={coords:Ls.array,customItems:Ls.array};let Kbe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ybe(e,t)}(n,e);var t=Wbe(n);function n(e){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),(r=t.call(this,e)).closing=!1;const{tracks:i}=r.props;return r.canvasElement=null,r.tracksByUidInit={},[...r.props.tracks.top||[],...r.props.tracks.right||[],...r.props.tracks.bottom||[],...r.props.tracks.left||[],...r.props.tracks.gallery||[],...r.props.tracks.center||[]].forEach((e=>{"combined"===e.type?e.contents.forEach((e=>{r.tracksByUidInit[e.uid]=!1})):r.tracksByUidInit[e.uid]=!1})),r.xScale=null,r.yScale=null,r.addUidsToTracks(i),r.trackToReplace=null,r.trackRenderer=null,r.configTrackMenu=null,r.state={sizeMeasured:!1,height:10,width:10,tracks:i,init:!1,addTrackPosition:null,customDialog:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],rangeSelectionEnd:!1,chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},r.reset=!0,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach((e=>{AS[e]=window.higlassTracksByType[e].config})),r.topHeight=0,r.bottomHeight=0,r.leftWidth=0,r.rightWidth=0,r.centerHeight=0,r.centerWidth=0,r.dragTimeout=null,r.previousPropsStr="",r.contextMenuHandlerBound=r.contextMenuHandler.bind(qbe(r)),r.handleNoTrackAddedBound=r.handleNoTrackAdded.bind(qbe(r)),r.handleTracksAddedBound=r.handleTracksAdded.bind(qbe(r)),r.closeMenusBound=r.closeMenus.bind(qbe(r)),r.handleAddDivisorBound=r.handleAddDivisor.bind(qbe(r)),r.handleAddSeriesBound=r.handleAddSeries.bind(qbe(r)),r.handleChangeTrackDataBound=r.handleChangeTrackData.bind(qbe(r)),r.handleChangeTrackTypeBound=r.handleChangeTrackType.bind(qbe(r)),r.handleCloseTrackBound=r.handleCloseTrack.bind(qbe(r)),r.handleConfigureTrackBound=r.handleConfigureTrack.bind(qbe(r)),r.handleExportTrackDataBound=r.handleExportTrackData.bind(qbe(r)),r.handleLockValueScaleBound=r.handleLockValueScale.bind(qbe(r)),r.handleReplaceTrackBound=r.handleReplaceTrack.bind(qbe(r)),r.handleTrackOptionsChangedBound=r.handleTrackOptionsChanged.bind(qbe(r)),r.handleUnlockValueScaleBound=r.handleUnlockValueScale.bind(qbe(r)),r.onAddTrack=r.handleAddTrack.bind(qbe(r)),r}return function(e,t,n){t&&Vbe(e.prototype,t),n&&Vbe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"waitForDOMAttachment",value:function(e){if(!this.mounted)return;const t=o.findDOMNode(this);document.body.contains(t)?e():requestAnimationFrame((()=>this.waitForDOMAttachment(e)))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=o.findDOMNode(this),this.canvasElement=o.findDOMNode(this.props.canvasElement),this.waitForDOMAttachment((()=>{ib.ElementQueries.listen(),this.resizeSensor=new ib.ResizeSensor(this.element.parentNode,this.measureSize.bind(this)),this.measureSize()})),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.addUidsToTracks(e.tracks),this.setState({tracks:e.tracks})}},{key:"shouldComponentUpdate",value:function(e,t){const n=this.previousPropsStr,r=this.updatablePropsToString(e),i=JSON.stringify(this.state),o=JSON.stringify(t),a=n!==r||i!==o||this.props.chooseTrackHandler!==e.chooseTrackHandler||this.props.customDialog!==e.customDialog;a&&(this.previousPropsStr=r);const s=this.numTracks;return this.numTracks=0,Ww(this.props.tracks,(()=>this.numTracks++)),this.reset=this.reset||0===s&&this.numTracks>0,this.numTracks||(this.tracksByUidInit={}),a}},{key:"UNSAFE_componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(e,t){if(t.rangeSelection!==this.state.rangeSelection){let e=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every((e=>e&&e.length))&&(e=this.state.rangeSelection.map((e=>DS(...e,this.state.defaultChromSizes)))),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:e})}if(this.state.customDialog||this.props.customDialog){const e=this.state.customDialog||this.props.customDialog;if(e.length>0){const t=[],n=[];e.forEach((e=>{t.push(e.bodyComponent),n.push(e.bodyProps)})),this.props.modal.open(i.createElement(Gve,{children:t,bodyProps:n,onCancel:this.props.closeCustomDialog,title:e[0].title}))}}if(e.tracks.center,this.props.tracks.center,(this.state.addTrackPosition||this.props.addTrackPosition)&&this.props.modal.open(i.createElement(Rve,{host:this.state.addTrackHost,onCancel:this.handleNoTrackAddedBound,onTracksChosen:this.handleTracksAddedBound,position:this.state.addTrackPosition||this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),this.state.addDivisorDialog){const e=this.state.addDivisorDialog;this.props.modal.open(i.createElement(Rve,{datatype:AS[e.type].datatype[0],host:this.state.addTrackHost,onCancel:()=>{this.setState({addDivisorDialog:null})},onTracksChosen:t=>{this.handleDivisorChosen(e,t)},trackSourceServers:this.props.trackSourceServers}))}}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach((e=>this.props.pubSub.unsubscribe(e)))}},{key:"addUidsToTracks",value:function(e){Object.keys(e).forEach((t=>{e[t].forEach((e=>{e.uid=e.uid||ag.nice()}))}))}},{key:"contextMenuHandler",value:function(e){if(!this.divTiledPlot)return;const t=this.divTiledPlot.getBoundingClientRect();if(!oA(e.clientX,e.clientY,t.left,t.left+t.width,t.top,t.top+t.height))return;const n=[e.clientX,e.clientY],r=Jl(e,this.divTiledPlot),o=this.trackRenderer.zoomedXScale.invert(r[0]),a=this.trackRenderer.zoomedYScale.invert(r[1]);let s=null;e.hgCustomItems&&(s=e.hgCustomItems.map((e=>i.createElement(Hb,{key:e.key,onClick:e.onClick},e.text)))),this.setState({contextMenuCustomItems:s,contextMenuPosition:{left:n[0],top:n[1],canvasLeft:r[0]+this.trackRenderer.xPositionOffset,canvasTop:r[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:o,contextMenuDataY:a})}},{key:"measureSize",value:function(){this.element.clientWidth>0&&this.element.clientHeight>0&&this.setState({sizeMeasured:!0,width:this.element.clientWidth,height:this.element.clientHeight})}},{key:"handleTrackOptionsChanged",value:function(e,t){return this.props.onTrackOptionsChanged(e,t)}},{key:"handleScalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.props.onScalesChanged(e,t)}},{key:"handleTilesetInfoReceived",value:function(e,t){const n=Uw(this.props.tracks,e);n?(this.tracksByUidInit[n.uid]=!0,this.checkAllTilesetInfoReceived(),n.options||(n.options={}),n.name=t.name,n.maxWidth=t.max_width,n.transforms=t.transforms,n.aggregationModes=t.aggregation_modes,n.header=t.header,n.binsPerDimension=t.bins_per_dimension,t.resolutions?(n.maxZoom=t.resolutions.length-1,n.resolutions=t.resolutions):n.maxZoom=t.max_zoom,n.coordSystem=t.coordSystem,n.datatype=t.datatype):console.warn("Strange, track not found:",e)}},{key:"checkAllTilesetInfoReceived",value:function(){if(this.state.init&&!this.reset||!this.trackRenderer||!this.props.zoomToDataExtentOnInit())return;const e=Object.keys(this.trackRenderer.trackDefObjects).map((e=>{const t=this.trackRenderer.trackDefObjects[e].trackObject;return t.childTracks?t.childTracks:t})).reduce(((e,t)=>e.concat(t)),[]).filter((e=>{let{tilesetInfo:t}=e;return typeof t<"u"&&!0!==t})),t=Object.values(this.tracksByUidInit).filter((e=>e)).length;e.length===t&&(this.setState({init:!0}),this.reset=!1,this.handleZoomToData())}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e})}},{key:"handleOverlayMouseLeave",value:function(e){e===this.state.mouseOverOverlayUid&&this.setState({mouseOverOverlayUid:null})}},{key:"handleTrackPositionChosen",value:function(e){this.setState({mouseOverOverlayUid:null}),this.props.chooseTrackHandler(e.track.uid)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(e){this.setState({addDivisorDialog:e})}},{key:"handleDivisorChosen",value:function(e,t){this.setState({addDivisorDialog:null});const n=e.data?{server:e.data.server,tilesetUid:e.data.tilesetUid}:{server:e.server,tilesetUid:e.tilesetUid},r={server:t[0].server,tilesetUid:t[0].uuid};this.handleChangeTrackData(e.uid,{type:"divided",children:[n,r]})}},{key:"handleDivideSeries",value:function(e){}},{key:"handleAddSeries",value:function(e){const t=qw(this.props.tracks,e),n=Uw(this.props.tracks,e);this.setState({addTrackPosition:t,addTrackHost:n})}},{key:"handleReplaceTrack",value:function(e,t){this.trackToReplace=e,this.handleAddTrack(t)}},{key:"handleAddTrack",value:function(e){this.setState({addTrackPosition:e,addTrackHost:null})}},{key:"handleResizeTrack",value:function(e,t,n){const{tracks:r}=this.state;for(const i in r){const o=r[i].filter((t=>t.uid===e));o.length>0&&(o[0].width=t,o[0].height=n)}this.setState({tracks:r,forceUpdate:Math.random()}),this.props.onResizeTrack()}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(e){this.closeMenus(),this.props.onLockValueScale(e)}},{key:"handleUnlockValueScale",value:function(e){this.closeMenus(),this.props.onUnlockValueScale(e)}},{key:"handleCloseTrack",value:function(e){this.closeMenus(),this.props.onCloseTrack(e)}},{key:"handleChangeTrackType",value:function(e,t){this.closeMenus(),this.props.onChangeTrackType(e,t)}},{key:"handleChangeTrackData",value:function(e,t){this.closeMenus(),this.props.onChangeTrackData(e,t)}},{key:"handleTracksAdded",value:function(e,t,n){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(e,t,n),this.setState({addTrackPosition:null,addTrackHost:null}),e}},{key:"handleCloseTrackMenuOpened",value:function(e,t){this.setState({closeTrackMenuId:e,closeTrackMenuLocation:t})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(e,t){this.closeMenus(),this.setState({configTrackMenuId:e,configTrackMenuLocation:t})}},{key:"handleConfigureTrack",value:function(e,t){this.setState({configTrackMenuId:null,trackOptions:{track:e,configComponent:t}}),this.closeMenus()}},{key:"handleSortEnd",value:function(e){this.setState((t=>{const n=t.tracks,r={};for(let i=0;i<e.length;i++)r[e[i].uid]=i;for(const e in n){const t=n[e];if(t.length&&t[0].uid in r){const i=new Array(t.length);for(let e=0;e<t.length;e++)i[r[t[e].uid]]=t[e];n[e]=i}}return{tracks:n,forceUpdate:Math.random()}}))}},{key:"createTracksAndLocations",value:function(){const e=[],{tracks:t}=this.state;return ZE.forEach((n=>{t[n]&&t[n].forEach((t=>{t.contents&&t.contents.forEach((e=>{e.position=n})),t.position=n,e.push({track:t,location:n})}))})),e}},{key:"calculateTrackPosition",value:function(e,t){let n=this.props.paddingTop,r=this.props.paddingBottom,i=this.props.paddingLeft,o=this.props.paddingRight,a=this.centerWidth,s=e.height,l=0,c=0;switch(t){case"top":i+=this.leftWidth;for(let t=0;t<this.state.tracks.top.length&&this.state.tracks.top[t].uid!==e.uid;t++)n+=this.state.tracks.top[t].height;break;case"bottom":i+=this.leftWidth,n+=this.topHeight+this.centerHeight+this.galleryDim;for(let t=0;t<this.state.tracks.bottom.length&&this.state.tracks.bottom[t].uid!==e.uid;t++)n+=this.state.tracks.bottom[t].height;break;case"left":n+=this.topHeight,a=e.width,s=this.centerHeight;for(let t=0;t<this.state.tracks.left.length&&this.state.tracks.left[t].uid!==e.uid;t++)i+=this.state.tracks.left[t].width;break;case"right":i+=this.leftWidth+this.centerWidth+this.galleryDim,n+=this.topHeight,a=e.width,s=this.centerHeight;for(let t=0;t<this.state.tracks.right.length&&this.state.tracks.right[t].uid!==e.uid;t++)i+=this.state.tracks.right[t].width;break;case"center":i+=this.leftWidth,n+=this.topHeight,s=this.centerHeight;break;case"gallery":i+=this.leftWidthNoGallery,n+=this.topHeightNoGallery,a=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-this.props.paddingLeft,s=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-this.props.paddingTop,l=this.galleryDim,c=this.galleryDim;for(let t=0;t<this.state.tracks.gallery.length&&this.state.tracks.gallery[t].uid!==e.uid;t++)a-=2*this.state.tracks.gallery[t].height,s-=2*this.state.tracks.gallery[t].height,i+=this.state.tracks.gallery[t].height,n+=this.state.tracks.gallery[t].height,l-=this.state.tracks.gallery[t].height,c-=this.state.tracks.gallery[t].height;for(let e=0;e<this.state.tracks.right.length;e++)o+=this.state.tracks.right[e].width;for(let e=0;e<this.state.tracks.bottom.length;e++)r+=this.state.tracks.bottom[e].height;e.offsetX=l,e.offsetY=c,e.offsetTop=n,e.offsetRight=o,e.offsetBottom=r,e.offsetLeft=i;break;default:a=this.leftWidth+this.centerWidth+this.rightWidth,s=this.topHeight+this.centerHeight+this.bottomHeight}return-1===ZE.indexOf(t)&&console.warn("Track with unknown position present:",t,e),{left:i,top:n,width:a,height:s,track:e}}},{key:"findCentralHeatmapTrack",value:function(e){for(let t=0;t<e.length;t++){if("combined"===e[t].type)return this.findCentralHeatmapTrack(e[t].contents);if("heatmap"===e[t].type)return e[t]}}},{key:"trackUuidToOrientation",value:function(e){}},{key:"overlayTracks",value:function(e){return this.props.overlays?this.props.overlays.filter((e=>e.includes&&e.includes.length)).map((t=>{const n=t.type?`overlay-${t.type}-track`:"overlay-track",r={...t,uid:t.uid||ag.nice(),includes:t.includes,type:n,options:Object.assign(t.options,{orientationsAndPositions:t.includes.map((t=>{const n=Uw(this.props.tracks,t);if(!n)return console.warn(`OverlayTrack included uid (${t}) not found in the track list`),null;const r=qw(this.props.tracks,n.uid);let i;if(("top"===r||"bottom"===r)&&(i="1d-horizontal"),("left"===r||"right"===r)&&(i="1d-vertical"),"center"===r&&(i="2d"),!i)return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"),null;const o=e.filter((e=>e.track.uid===t));if(!o.length)return null;return{orientation:i,position:{left:o[0].left-this.props.paddingLeft,top:o[0].top-this.props.paddingTop,width:o[0].width,height:o[0].height}}})).filter((e=>e))})};return{top:this.props.paddingTop,left:this.props.paddingLeft,width:this.leftWidth+this.centerWidth+this.rightWidth,height:this.topHeight+this.centerHeight+this.bottomHeight+this.props.marginTop+this.props.marginBottom,track:r}})):[]}},{key:"positionedTracks",value:function(){return this.createTracksAndLocations().map((e=>{let{track:t,location:n}=e;return this.calculateTrackPosition(t,n)}))}},{key:"createTrackPositionTexts",value:function(){const e=this.positionedTracks();return this.createTracksAndLocations(),e.map((e=>{const{track:t}=e;return i.createElement("div",{key:t.uid,style:{left:e.left,top:e.top,width:e.width,height:e.height,position:"absolute"}},t.uid.slice(0,2))}))}},{key:"handleExportTrackData",value:function(e,t){const n=Uw(this.props.tracks,t);let r=null;e!==t?r=this.trackRenderer.trackDefObjects[e].trackObject.createdTracks[n.uid]:({trackObject:r}=this.trackRenderer.trackDefObjects[e]),r.exportData(),this.closeMenus()}},{key:"listTracksAtPosition",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];if(!this.trackRenderer)return[];for(const i in this.trackRenderer.trackDefObjects){const o=this.trackRenderer.trackDefObjects[i].trackObject;if(o.respondsToPosition(e,t))if(n){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(let e=0;e<this.props.tracks.center.contents.length;e++)this.props.tracks.center.contents[e].uid===i&&(o.is2d=!0);else this.props.tracks.center&&this.props.tracks.center.length&&this.props.tracks.center[0].uid===i&&(o.is2d=!0);r.push(o)}else r.push(this.trackRenderer.trackDefObjects[i].trackDef.track)}return r}},{key:"listAllTrackObjects",value:function(){const e=[];for(const t in this.trackRenderer.trackDefObjects){const n=this.trackRenderer.trackDefObjects[t];if(n.trackObject.createdTracks)for(const t in n.trackObject.createdTracks){const r=n.trackObject.createdTracks[t];e.push(r)}else e.push(n.trackObject)}return e}},{key:"handleZoomToData",value:function(){const e=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER,n=[e,e],r=[t,t],i=this.listAllTrackObjects();for(const c of i)if(c.tilesetInfo&&c.tilesetInfo.min_pos)for(let e=0;e<c.tilesetInfo.min_pos.length;e++)c.tilesetInfo.min_pos[e]<n[e]&&(n[e]=c.tilesetInfo.min_pos[e]),c.tilesetInfo.max_pos[e]>r[e]&&(r[e]=c.tilesetInfo.max_pos[e]);const o=this.trackRenderer.currentProps.paddingLeft+this.trackRenderer.currentProps.leftWidth;let a=[o,o+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);const s=this.trackRenderer.currentProps.paddingTop+this.trackRenderer.currentProps.topHeight;let l=[s,s+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),n[0]<Number.MAX_SAFE_INTEGER&&r[0]>Number.MIN_SAFE_INTEGER&&(a=[n[0],r[0]]),n[1]<Number.MAX_SAFE_INTEGER&&r[1]>Number.MIN_SAFE_INTEGER&&(l=[n[1],r[1]]),this.props.onDataDomainChanged(a,l)}},{key:"resetViewport",value:function(){this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),this.props.onDataDomainChanged(this.props.initialXDomain,this.props.initialYDomain)}},{key:"updatablePropsToString",value:function(e){return JSON.stringify({tracks:e.tracks,overlays:e.overlays,viewOptions:e.viewOptions,uid:e.uid,addTrackPosition:e.addTrackPosition,editable:e.editable,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingLeft:e.paddingLeft,paddingRight:e.paddingRight,mouseTool:e.mouseTool,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,trackSourceServers:e.trackSourceServers,zoomable:e.zoomable,draggingHappening:e.draggingHappening})}},{key:"getXYScales",value:function(){this.trackRenderer&&(this.xScale=this.trackRenderer.currentXScale,this.yScale=this.trackRenderer.currentYScale)}},{key:"rangeViewToDataLoci",value:function(e,t){return t?[parseInt(t.invert(e[0]),10),parseInt(t.invert(e[1]),10)]:[null,null]}},{key:"rangeSelectionResetHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null,rangeSelectionEnd:!1})}},{key:"rangeSelection1dEndHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t="x"===e?this.xScale:this.yScale;return n=>{this.setState((r=>{const i=r.is1dRangeSelection?[null,null]:r.rangeSelection.slice(),o=this.state.is1dRangeSelection||"y"!==e?0:1;let a=this.rangeViewToDataLoci(n,t);const s=a[1]-a[0];if(this.props.rangeSelection1dSize[0]>s){const e=a[0]+s/2;a=[e-this.props.rangeSelection1dSize[0]/2,e+this.props.rangeSelection1dSize[0]/2]}else if(this.props.rangeSelection1dSize[1]<s){const e=a[0]+s/2;a=[e-this.props.rangeSelection1dSize[1]/2,e+this.props.rangeSelection1dSize[1]/2]}return i[o]=a,this.props.rangeSelectionToInt&&(i[o]=i[o].map((e=>Math.round(e)))),{rangeSelection:i,rangeSelectionEnd:!0}}))}}},{key:"rangeSelection1dHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t="x"===e?this.xScale:this.yScale;return n=>{this.setState((r=>{const i=r.is1dRangeSelection?[null,null]:r.rangeSelection.slice();return i[r.is1dRangeSelection||"y"!==e?0:1]=this.rangeViewToDataLoci(n,t),{rangeSelection:i,rangeSelectionEnd:!1}}))}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales(),this.setState({rangeSelection:[this.rangeViewToDataLoci(e[0],this.xScale),this.rangeViewToDataLoci(e[1],this.yScale)],rangeSelectionEnd:!1})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dEndHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t=this.rangeViewToDataLoci(e[0],this.xScale),n=this.rangeViewToDataLoci(e[1],this.yScale);let r=[t,n];const i=[t[1]-t[0],n[1]-n[0]];r.forEach(((e,t)=>{if(this.props.rangeSelection1dSize[0]>i[t]){const n=e[0]+Math.round(i[t]/2);e[0]=n-this.props.rangeSelection1dSize[0]/2,e[1]=n+this.props.rangeSelection1dSize[0]/2}else if(this.props.rangeSelection1dSize[1]<i[t]){const n=e[0]+Math.round(i[t]/2);e[0]=n-this.props.rangeSelection1dSize[1]/2,e[1]=n+this.props.rangeSelection1dSize[1]/2}})),this.props.rangeSelectionToInt&&(r=r.map((e=>e.map((e=>Math.round(e)))))),this.setState({rangeSelection:r,rangeSelectionEnd:!0})}},{key:"getContextMenu",value:function(){if(this.state.contextMenuPosition){const e=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return i.createElement(xbe,{onMenuClosed:this.closeMenusBound},i.createElement(zbe,{closeMenu:this.closeMenusBound,coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:e=>{this.props.onTracksAdded([e],e.position,null),this.handleCloseContextMenu()},onChangeTrackData:this.handleChangeTrackDataBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,orientation:"right",position:this.state.contextMenuPosition,theme:this.props.theme,tracks:e,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){const e=this.props.draggingHappening;if("boolean"==typeof e)return;const t=e.datatype;if(!(t in xS)&&!e.defaultTracks)return void console.warn("unknown data type:",e.higlassTrack);const n={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},r=xS[t]||{};if(e.defaultTracks)for(const i of e.defaultTracks)if(AS[i])for(const e of n[AS[i].orientation])r[e]=i;else console.warn("unknown track type",i);const o=new Set(["top","left","right","center","bottom"].filter((e=>e in this.state.tracks&&this.state.tracks[e].length))),a="top"in r,s="left"in r,l="right"in r,c="bottom"in r,u="center"in r,h="center"in r||o.has("left")||o.has("right")||o.has("center"),p="top"in r,f="bottom"in r&&h,d="left"in r&&h,m="right"in r&&h,g=Object.keys(r).length&&("center"in r||h),y=i.createElement("div",{style:{flexGrow:1}}),v=i.cloneElement(y),b=i.createElement("div",{style:{display:"flex",flexGrow:1}},p&&(g||d)?y:null,i.createElement(bQ,{defaultTrackType:r.top,draggingHappening:this.props.draggingHappening,enabled:a,onTrackDropped:e=>this.handleTracksAdded([e],"top"),style:{border:"1px solid black",flexGrow:1}}),p&&(g||d)?v:null),_=i.createElement("div",{style:{display:"flex",flexGrow:1}},p&&(g||d)?y:null,i.createElement(bQ,{defaultTrackType:r.bottom,draggingHappening:this.props.draggingHappening,enabled:c,onTrackDropped:e=>this.handleTracksAdded([e],"bottom"),style:{border:"1px solid black",flexGrow:1}}),p&&(g||d)?v:null),T=i.createElement(bQ,{defaultTrackType:r.left,draggingHappening:this.props.draggingHappening,enabled:s,onTrackDropped:e=>this.handleTracksAdded([e],"left"),style:{border:"1px solid black",flexGrow:1}}),E=i.createElement(bQ,{defaultTrackType:r.center,draggingHappening:this.props.draggingHappening,enabled:u,onTrackDropped:e=>this.handleTracksAdded([e],"center"),position:"center",style:{border:"1px solid black",flexGrow:1}}),S=i.cloneElement(T,{defaultTrackType:r.right,enabled:l,onTrackDropped:e=>this.handleTracksAdded([e],"right")});return i.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},i.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),i.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},p?b:null,h&&i.createElement("div",{style:{display:"flex",height:p||f?"40%":"100%",width:"100%"}},d?T:null,g?E:null,m?S:null),f?_:null))}},{key:"render",value:function(){this.galleryDim=this.props.tracks.gallery?this.props.tracks.gallery.map((e=>e.height)).reduce(NA,0):0,this.topHeightNoGallery=this.props.tracks.top.map((e=>e.height)).reduce(NA,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map((e=>e.height)).reduce(NA,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map((e=>e.width)).reduce(NA,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map((e=>e.width)).reduce(NA,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim;const e=this.props.paddingTop+this.props.paddingBottom,t=this.props.paddingLeft+this.props.paddingRight;this.centerHeight=Math.max(0,this.state.height-this.topHeight-this.bottomHeight-e),this.centerWidth=Math.max(0,this.state.width-this.leftWidth-this.rightWidth-t);const n="none",r=i.createElement("div",{className:"top-track-container",style:{left:this.leftWidth+this.props.paddingLeft,top:this.props.paddingTop,width:this.centerWidth,height:this.topHeightNoGallery,outline:n,position:"absolute"}},i.createElement(ose,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qE,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),o=i.createElement("div",{className:"left-track-container",style:{left:this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.leftWidthNoGallery,height:this.centerHeight,outline:n,position:"absolute"}},i.createElement(jbe,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qE,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),a=i.createElement("div",{className:"right-track-container",style:{right:this.props.paddingRight,top:this.topHeight+this.props.paddingTop,width:this.rightWidthNoGallery,height:this.centerHeight,outline:n,position:"absolute"}},i.createElement(jbe,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qE,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),s=i.createElement("div",{className:"bottom-track-container",style:{left:this.leftWidth+this.props.paddingLeft,bottom:this.props.paddingBottom,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:n,position:"absolute"}},i.createElement(ose,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qE,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),l=i.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.paddingLeft,top:this.topHeightNoGallery+this.props.paddingTop,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:n,position:"absolute"}},i.createElement(PQ,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim}));let c=i.createElement("div",{className:["center-track-container",KK["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.bottomHeight,outline:n}});this.props.tracks.center.length&&(c=i.createElement("div",{className:["center-track-container",KK["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.centerHeight,outline:n}},i.createElement(aQ,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===qE,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionXYEnd:this.rangeSelection2dEndHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionYEnd:this.rangeSelection1dEndHandler("y").bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();let u=this.positionedTracks();u=u.concat(this.overlayTracks(u));let h=null;this.state.sizeMeasured&&(h=i.createElement(hve,{ref:e=>{this.trackRenderer=e,this.checkAllTilesetInfoReceived()},canvasElement:this.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,disableTrackMenu:this.props.disableTrackMenu,dragging:this.props.dragging,galleryDim:this.galleryDim,getLockGroupExtrema:this.props.getLockGroupExtrema,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===qE,isShowGlobalMousePosition:this.props.isShowGlobalMousePosition,isValueScaleLocked:this.props.isValueScaleLocked,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,paddingLeft:this.props.paddingLeft,paddingTop:this.props.paddingTop,pixiRenderer:this.props.pixiRenderer,pixiStage:this.props.pixiStage,pluginDataFetchers:this.props.pluginDataFetchers,pluginTracks:this.props.pluginTracks,positionedTracks:u,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,viewOptions:this.props.viewOptions,width:this.state.width,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},r,o,a,s,l,c));let p=null,f=null;this.state.configTrackMenuId&&(p=i.createElement(xbe,{onMenuClosed:this.closeMenusBound},i.createElement(bbe,{ref:e=>{this.configTrackMenu=e},closeMenu:this.closeMenusBound,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:this.handleAddTrackBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,position:this.state.configTrackMenuLocation,theme:this.props.theme,trackOrientation:qw(this.props.tracks,this.state.configTrackMenuId),tracks:[Uw(this.props.tracks,this.state.configTrackMenuId)]}))),this.state.closeTrackMenuId&&(f=i.createElement(xbe,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},i.createElement(Yve,{position:this.state.closeTrackMenuLocation,theme:this.props.theme},i.createElement(_be,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[Uw(this.props.tracks,this.state.closeTrackMenuId)]}))));let d=null;this.props.chooseTrackHandler&&(d=u.filter((e=>"whole"!==e.track.position)).map((e=>{let t="transparent",n="none";return this.state.mouseOverOverlayUid===e.track.uid&&(t="yellow",n="1px solid black"),i.createElement("div",{key:e.track.uid,className:"tiled-plot-track-overlay",onClick:()=>this.handleTrackPositionChosen(e),onDragEnter:t=>{this.handleOverlayMouseEnter(e.track.uid),t.preventDefault()},onDragLeave:()=>this.handleOverlayMouseLeave(e.track.uid),onDragOver:e=>e.preventDefault(),onDrop:()=>this.handleTrackPositionChosen(e),onMouseEnter:()=>this.handleOverlayMouseEnter(e.track.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(e.track.uid),style:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,background:t,opacity:.4,border:n,zIndex:1}})})));let m=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){const e=this.state.trackOptions.configComponent,t=this.state.trackOptions.track;m=i.createElement(e,{track:t,xScale:this.xScale,yScale:this.yScale,onCancel:()=>{this.setState({trackOptions:null})},onTrackOptionsChanged:e=>e,onSubmit:e=>{this.handleTrackOptionsChanged(this.state.trackOptions.track.uid,e),this.setState({trackOptions:null})}})}return i.createElement("div",{ref:e=>{this.divTiledPlot=e},className:["tiled-plot-div",wQ["tiled-plot"]].join(" "),style:{marginBottom:this.props.marginBottom,marginLeft:this.props.marginLeft,marginRight:this.props.marginRight,marginTop:this.props.marginTop}},h,d,p,f,m,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach((e=>document.addEventListener(e.name,e.callback,!1)))}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach((e=>document.removeEventListener(e.name,e.callback)))}}]),n}(i.Component);Kbe.defaultProps={isShowGlobalMousePosition:!1,pluginDataFetchers:{},pluginTracks:{},metaTracks:[],zoomable:!0},Kbe.propTypes={addTrackPosition:Ls.string,canvasElement:Ls.object,chooseTrackHandler:Ls.func,chromInfoPath:Ls.string,customDialog:Ls.array,closeCustomDialog:Ls.func,disableTrackMenu:Ls.bool,dragging:Ls.bool,draggingHappening:Ls.bool,editable:Ls.bool,getLockGroupExtrema:Ls.func,initialXDomain:Ls.array,initialYDomain:Ls.array,isShowGlobalMousePosition:Ls.bool,isValueScaleLocked:Ls.func,marginBottom:Ls.number.isRequired,marginLeft:Ls.number.isRequired,marginRight:Ls.number.isRequired,marginTop:Ls.number.isRequired,paddingBottom:Ls.number.isRequired,paddingLeft:Ls.number.isRequired,paddingRight:Ls.number.isRequired,paddingTop:Ls.number.isRequired,metaTracks:Ls.array,modal:Ls.object,mouseTool:Ls.string,onCloseTrack:Ls.func,onChangeTrackData:Ls.func,onChangeTrackType:Ls.func,onDataDomainChanged:Ls.func,onLockValueScale:Ls.func,onMouseMoveZoom:Ls.func,onNewTilesLoaded:Ls.func,onNoTrackAdded:Ls.func,onRangeSelection:Ls.func.isRequired,onScalesChanged:Ls.func,onTrackOptionsChanged:Ls.func,onTrackPositionChosen:Ls.func,onTracksAdded:Ls.func,onUnlockValueScale:Ls.func,onValueScaleChanged:Ls.func,onResizeTrack:Ls.func,overlays:Ls.array,openModal:Ls.func,pixiRenderer:Ls.object,pixiStage:Ls.object,pluginDataFetchers:Ls.object,pluginTracks:Ls.object,pubSub:Ls.object.isRequired,rangeSelection1dSize:Ls.array,rangeSelectionToInt:Ls.bool,registerDraggingChangedListener:Ls.func,removeDraggingChangedListener:Ls.func,setCentersFunction:Ls.func,svgElement:Ls.object,theme:Ls.symbol.isRequired,tracks:Ls.object,trackSourceServers:Ls.array,uid:Ls.string,viewOptions:Ls.object,xDomainLimits:Ls.array,yDomainLimits:Ls.array,zoomable:Ls.bool,zoomLimits:Ls.array,zoomToDataExtentOnInit:Ls.func};const Qbe=hQ(Cse(MK(Kbe)));var Zbe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jbe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function e_e(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var i=e.document;"number"!=typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function t_e(e){return e_e(e)}function n_e(e){return e_e(e,!0)}function r_e(e){var t=function(e){var t,n=void 0,r=void 0,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return n=(t=e.getBoundingClientRect()).left,r=t.top,{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=t_e(r),t.top+=n_e(r),t}var i_e=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),o_e=/^(top|right|bottom|left)$/,a_e="currentStyle",s_e="runtimeStyle",l_e="left";var c_e=void 0;function u_e(e,t){for(var n=0;n<e.length;n++)t(e[n])}function h_e(e){return"border-box"===c_e(e,"boxSizing")}typeof window<"u"&&(c_e=window.getComputedStyle?function(e,t,n){var r="",i=e.ownerDocument,o=n||i.defaultView.getComputedStyle(e,null);return o&&(r=o.getPropertyValue(t)||o[t]),r}:function(e,t){var n=e[a_e]&&e[a_e][t];if(i_e.test(n)&&!o_e.test(t)){var r=e.style,i=r[l_e],o=e[s_e][l_e];e[s_e][l_e]=e[a_e][l_e],r[l_e]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[l_e]=i,e[s_e][l_e]=o}return""===n?"auto":n});var p_e=["margin","border","padding"],f_e=-1,d_e=2,m_e=1;function g_e(e,t,n){var r=0,i=void 0,o=void 0,a=void 0;for(o=0;o<t.length;o++)if(i=t[o])for(a=0;a<n.length;a++){var s=void 0;s="border"===i?i+n[a]+"Width":i+n[a],r+=parseFloat(c_e(e,s))||0}return r}function y_e(e){return null!=e&&e==e.window}var v_e={};function b_e(e,t,n){if(y_e(e))return"width"===t?v_e.viewportWidth(e):v_e.viewportHeight(e);if(9===e.nodeType)return"width"===t?v_e.docWidth(e):v_e.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.offsetWidth:e.offsetHeight;c_e(e);var o=h_e(e),a=0;(null==i||i<=0)&&(i=void 0,(null==(a=c_e(e,t))||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),void 0===n&&(n=o?m_e:f_e);var s=void 0!==i||o,l=i||a;if(n===f_e)return s?l-g_e(e,["border","padding"],r):a;if(s){var c=n===d_e?-g_e(e,["border"],r):g_e(e,["margin"],r);return l+(n===m_e?0:c)}return a+g_e(e,p_e.slice(n),r)}u_e(["Width","Height"],(function(e){v_e["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],v_e["viewport"+e](n))},v_e["viewport"+e]=function(t){var n="client"+e,r=t.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var __e={position:"absolute",visibility:"hidden",display:"block"};function T_e(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=b_e.apply(void 0,n):function(e,t,n){var r={},i=e.style,o=void 0;for(o in t)t.hasOwnProperty(o)&&(r[o]=i[o],i[o]=t[o]);for(o in n.call(e),t)t.hasOwnProperty(o)&&(i[o]=r[o])}(e,__e,(function(){t=b_e.apply(void 0,n)})),t}function E_e(e,t,n){var r=n;if("object"!==(typeof t>"u"?"undefined":Jbe(t)))return typeof r<"u"?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):c_e(e,t);for(var i in t)t.hasOwnProperty(i)&&E_e(e,i,t[i])}u_e(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);v_e["outer"+t]=function(t,n){return t&&T_e(t,e,n?0:m_e)};var n="width"===e?["Left","Right"]:["Top","Bottom"];v_e[e]=function(t,r){return void 0!==r?t?(c_e(t),h_e(t)&&(r+=g_e(t,["padding","border"],n)),E_e(t,e,r)):void 0:t&&T_e(t,e,f_e)}}));var S_e=Zbe({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(!(typeof t<"u"))return r_e(e);!function(e,t){"static"===E_e(e,"position")&&(e.style.position="relative");var n=r_e(e),r={},i=void 0,o=void 0;for(o in t)t.hasOwnProperty(o)&&(i=parseFloat(E_e(e,o))||0,r[o]=i+t[o]-n[o]);E_e(e,r)}(e,t)},isWindow:y_e,each:u_e,css:E_e,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(y_e(e)){if(void 0===t)return t_e(e);window.scrollTo(t,n_e(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(y_e(e)){if(void 0===t)return n_e(e);window.scrollTo(t_e(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},v_e),w_e=S_e;var A_e=function(e,t,n){n=n||{},9===t.nodeType&&(t=w_e.getWindow(t));var r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,o=n.alignWithTop,a=n.alignWithLeft,s=n.offsetTop||0,l=n.offsetLeft||0,c=n.offsetBottom||0,u=n.offsetRight||0;r=void 0===r||r;var h=w_e.isWindow(t),p=w_e.offset(e),f=w_e.outerHeight(e),d=w_e.outerWidth(e),m=void 0,g=void 0,y=void 0,v=void 0,b=void 0,_=void 0,T=void 0,E=void 0,S=void 0,w=void 0;h?(T=t,w=w_e.height(T),S=w_e.width(T),E={left:w_e.scrollLeft(T),top:w_e.scrollTop(T)},b={left:p.left-E.left-l,top:p.top-E.top-s},_={left:p.left+d-(E.left+S)+u,top:p.top+f-(E.top+w)+c},v=E):(m=w_e.offset(t),g=t.clientHeight,y=t.clientWidth,v={left:t.scrollLeft,top:t.scrollTop},b={left:p.left-(m.left+(parseFloat(w_e.css(t,"borderLeftWidth"))||0))-l,top:p.top-(m.top+(parseFloat(w_e.css(t,"borderTopWidth"))||0))-s},_={left:p.left+d-(m.left+y+(parseFloat(w_e.css(t,"borderRightWidth"))||0))+u,top:p.top+f-(m.top+g+(parseFloat(w_e.css(t,"borderBottomWidth"))||0))+c}),b.top<0||_.top>0?!0===o?w_e.scrollTop(t,v.top+b.top):!1===o?w_e.scrollTop(t,v.top+_.top):b.top<0?w_e.scrollTop(t,v.top+b.top):w_e.scrollTop(t,v.top+_.top):i||((o=void 0===o||!!o)?w_e.scrollTop(t,v.top+b.top):w_e.scrollTop(t,v.top+_.top)),r&&(b.left<0||_.left>0?!0===a?w_e.scrollLeft(t,v.left+b.left):!1===a?w_e.scrollLeft(t,v.left+_.left):b.left<0?w_e.scrollLeft(t,v.left+b.left):w_e.scrollLeft(t,v.left+_.left):i||((a=void 0===a||!!a)?w_e.scrollLeft(t,v.left+b.left):w_e.scrollLeft(t,v.left+_.left)))};const O_e=Cs(A_e);function x_e(){return x_e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_e.apply(this,arguments)}function k_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I_e(r.key),r)}}function I_e(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function C_e(e,t){return(C_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P_e(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=D_e(e);if(t){var i=D_e(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function D_e(e){return(D_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const R_e=[];let N_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C_e(e,t)}(n,e);var t=P_e(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},r.keyDownHandlers={ArrowDown(e){e.preventDefault();const t=this.getFilteredItems().length;if(!t)return;const{highlightedIndex:n}=this.state,r=null===n||n===t-1?0:n+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})},ArrowUp(e){e.preventDefault();const t=this.getFilteredItems().length;if(!t)return;const{highlightedIndex:n}=this.state,r=0===n||null===n?t-1:n-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})},Enter(e){if(!1!==this.state.isOpen)if(null===this.state.highlightedIndex)this.setState({isOpen:!1},(()=>{this.inputEl.select()}));else{e.preventDefault();const t=this.getFilteredItems()[this.state.highlightedIndex],n=this.props.getItemValue(t);this.setState({isOpen:!1,highlightedIndex:null},(()=>{this.inputEl.setSelectionRange(n.length,n.length),this.props.onSelect(n,t)}))}},Escape(){this.setState({highlightedIndex:null,isOpen:!1})}},r}return function(e,t,n){t&&k_e(e.prototype,t),n&&k_e(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"UNSAFE_componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._performAutoCompleteOnUpdate=!0,(this.props.items!==e.items||this.state.highlightedIndex>=e.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.isOpen&&!1===t.isOpen&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),t.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(!0===this.state.isOpen&&null!==this.state.highlightedIndex){const e=this.refs[`item-${this.state.highlightedIndex}`],t=this.refs.menu;e&&O_e((0,o.findDOMNode)(e),(0,o.findDOMNode)(t),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(e){this.keyDownHandlers[e.key]?this.keyDownHandlers[e.key].call(this,e):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(e){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(e,e.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){let e=this.props.items;return this.props.shouldItemRender&&(e=e.filter((e=>this.props.shouldItemRender(e,this.props.value)))),this.props.sortItems&&e.sort(((e,t)=>this.props.sortItems(e,t,this.props.value))),e}},{key:"maybeAutoCompleteText",value:function(){if(!this.props.autoHighlight||""===this.props.value)return;const{highlightedIndex:e}=this.state,t=this.getFilteredItems();if(0===t.length)return;const n=null!==e?t[e]:t[0];0===this.props.getItemValue(n).toLowerCase().indexOf(this.props.value.toLowerCase())&&null===e&&this.setState({highlightedIndex:0})}},{key:"setMenuPositions",value:function(){const e=this.inputEl,t=e.getBoundingClientRect(),n=globalThis.window.getComputedStyle(e),r=parseInt(n.marginBottom,10)||0,i=parseInt(n.marginLeft,10)||0,o=parseInt(n.marginRight,10)||0;this.setState({menuTop:t.bottom+r,menuLeft:t.left+i,menuWidth:t.width+i+o})}},{key:"highlightItemFromMouse",value:function(e){this.setState({highlightedIndex:e})}},{key:"selectItemFromMouse",value:function(e){const t=this.props.getItemValue(e);this.setState({isOpen:!1,highlightedIndex:null},(()=>{this.props.onSelect(t,e),this.inputEl.focus()}))}},{key:"setIgnoreBlur",value:function(e){this._ignoreBlur=e}},{key:"renderMenu",value:function(){const e=this.getFilteredItems().map(((e,t)=>{const n=this.props.renderItem(e,this.state.highlightedIndex===t,{cursor:"default"});return i.cloneElement(n,{onMouseDown:()=>this.setIgnoreBlur(!0),onMouseEnter:()=>this.highlightItemFromMouse(t),onClick:()=>this.selectItemFromMouse(e),ref:`item-${t}`})})),t={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!e.length)return null;const n=this.props.renderMenu(e,this.props.value,t);return i.cloneElement(n,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),!this._ignoreBlur&&this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur?this.setIgnoreBlur(!1):(this._ignoreClick=!0,this.setState({isOpen:!0}))}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!1===this.state.isOpen?this.setState({isOpen:!0}):null!==this.state.highlightedIndex&&!this._ignoreClick&&this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(e,t){return t?n=>{e(n),t(n)}:e}},{key:"render",value:function(){this.props.debug&&R_e.push({id:R_e.length,state:this.state});const{inputProps:e}=this.props;return i.createElement("div",x_e({style:{...this.props.wrapperStyle}},this.props.wrapperProps),i.createElement("input",x_e({},e,{ref:e=>{this.inputEl=e},"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),e.onBlur&&e.onBlur.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),e.onClick&&e.onClick.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),e.onFocus&&e.onFocus.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),e.onKeyDown&&e.onKeyDown.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),e.onKeyUp&&e.onKeyUp.bind(this)),role:"combobox",value:this.props.value})),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&i.createElement("pre",{style:{marginLeft:300}},JSON.stringify(R_e.slice(R_e.length-5,R_e.length),null,2)))}}]),n}(i.Component);N_e.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange(){},onSelect(){},renderMenu(e,t,n){return i.createElement("div",{style:{...n,...this.menuStyle}},e)},shouldItemRender:()=>!0,menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange(){}},N_e.propTypes={autoHighlight:Ls.bool,debug:Ls.bool,getItemValue:Ls.func.isRequired,inputProps:Ls.object,items:Ls.array,menuStyle:Ls.object,onChange:Ls.func,onFocus:Ls.func,onMenuVisibilityChange:Ls.func,onSelect:Ls.func,open:Ls.bool,renderItem:Ls.func.isRequired,renderMenu:Ls.func,shouldItemRender:Ls.func,sortItems:Ls.func,value:Ls.any,wrapperProps:Ls.object,wrapperStyle:Ls.object};const M_e="_genome-position-search_1l2sx_1",L_e="_genome-position-search-focus_1l2sx_2",j_e="_genome-position-search-bar_1l2sx_16",B_e="_genome-position-search-dark_1l2sx_34",F_e="_genome-position-search-bar-button_1l2sx_38",G_e="_genome-position-search-bar-suggestions_1l2sx_83";function H_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U_e(r.key),r)}}function U_e(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function z_e(e,t){return(z_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V_e(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Y_e(e);if(t){var i=Y_e(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X_e(e)}(this,n)}}function X_e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y_e(e){return(Y_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let W_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z_e(e,t)}(n,e);var t=V_e(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).mounted=!1,r.uid=ag.nice(),r.chromInfo=null,r.searchField=null,r.autocompleteMenu=null,r.xScale=null,r.yScale=null,r.prevParts=[],r.props.registerViewportChangedListener(r.scalesChanged.bind(X_e(r))),r.menuPosition={left:0,top:0},r.positionText="chr4:190,998,876-191,000,255",r.state={genes:[],isFocused:!1,autocompleteServer:r.props.autocompleteServer,autocompleteId:r.props.autocompleteId,availableAssemblies:[],selectedAssembly:null},r.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},r.availableAutocompletes={},r.props.autocompleteId&&(r.availableAutocompletes[r.props.chromInfoId]=new Set([{server:r.props.autocompleteServer,acId:r.props.autocompleteId}])),r.availableChromSizes={},r}return function(e,t,n){t&&H_e(e.prototype,t),n&&H_e(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.mounted=!0,ql(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.findAvailableAutocompleteSources(),this.findAvailableChromSizes(),this.props.chromInfoPath&&(this.searchPosition=!0,a9(this.props.chromInfoPath,(e=>{e?(this.chromInfo=e,this.searchField=new c9(this.chromInfo),this.setPositionText()):this.searchPosition=null}))),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"onAutocompleteChange",value:function(e,t){this.positionText=t,this.setState({value:t,loading:!0}),this.changedPart=null;const n=t.split(/ /);let r=0;const i=[];let o=!1;for(let a=0;a<n.length;a++){const e=n[a].split(/-/);for(let t=0;t<e.length;t++){if(r+=1,i.push(e[t]),o=0===t,t===this.prevParts.length){this.changedPart=r-1;break}if(e[t]!==this.prevParts[t]){this.changedPart=r-1;break}}}if(this.prevParts=i,this.state.autocompleteServer&&this.state.autocompleteId&&null!==this.changedPart){this.setState({loading:!0});let e=`${this.state.autocompleteServer}/suggest/`;e+=`?d=${this.state.autocompleteId}&ac=${i[this.changedPart].toLowerCase()}`,Fw.json(e,((e,t)=>{if(e)this.setState({loading:!1,genes:[]});else if(this.changedPart>0&&!o){const e=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${i[this.changedPart-1].toLowerCase()}-${i[this.changedPart].toLowerCase()}`;Fw.json(e,((e,n)=>{e?this.setState({loading:!1,genes:t}):this.setState({loading:!1,genes:n.concat(t)})}),this.props.pubSub)}else this.setState({loading:!1,genes:t})}),this.props.pubSub)}}},{key:"setAvailableAssemblies",value:function(){const e=new Set(jS(this.availableChromSizes)),t=new Set([...e]);this.gpsbForm&&this.setState({availableAssemblies:[...t]})}},{key:"setSelectedAssembly",value:function(e){if(!this.mounted||!this.availableChromSizes[e])return;const t=[...this.availableChromSizes[e]][0];this.setState({autocompleteServer:t.server});const{server:n}=t;if(this.availableAutocompletes[e]){const t=[...this.availableAutocompletes[e]][0].acId;this.props.onSelectedAssemblyChanged(e,t,n),this.gpsbForm&&this.setState({autocompleteId:t})}else this.props.onSelectedAssemblyChanged(e,null,n),this.gpsbForm&&this.setState({autocompleteId:null});this.fetchChromInfo(t.uuid,t.server)}},{key:"setPositionText",value:function(){if(!this.mounted||!this.searchField)return;const e=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=e.split(/[ -]/),this.gpsbForm&&(this.positionText=e,this.origPositionText=e,this.autocompleteMenu.inputEl.value=e)}},{key:"scalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.setPositionText()}},{key:"findAvailableChromSizes",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach((e=>{Fw.json(`${e}/available-chrom-sizes/`,((t,n)=>{t?console.error(t):(n.results.forEach((t=>{t.coordSystem in this.availableChromSizes||(this.availableChromSizes[t.coordSystem]=new Set),this.availableChromSizes[t.coordSystem].add({server:e,uuid:t.uuid}),this.setAvailableAssemblies()})),this.searchField||this.fetchChromInfo(this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].uuid:this.props.chromInfoId,this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].server:this.props.chromInfoServer))}),this.props.pubSub)}))}},{key:"findAvailableAutocompleteSources",value:function(){this.props.trackSourceServers&&this.props.trackSourceServers.forEach((e=>{Fw.json(`${e}/tilesets/?limit=100&dt=gene-annotation`,((t,n)=>{t?console.error(t):(n.results.forEach((t=>{t.coordSystem in this.availableAutocompletes||(this.availableAutocompletes[t.coordSystem]=new Set),this.availableAutocompletes[t.coordSystem].add({server:e,acId:t.uuid}),this.setAvailableAssemblies()})),this.state.autocompleteId||this.gpsbForm&&this.availableAutocompletes[this.props.chromInfoId]&&this.setState({autocompleteId:[...this.availableAutocompletes[this.props.chromInfoId]][0].acId}))}),this.props.pubSub)}))}},{key:"fetchChromInfo",value:function(e,t){a9(`${t}/chrom-sizes/?id=${e}`,(n=>{n&&(Fw.json(`${t}/tileset_info/?d=${e}`,((t,n)=>{t||this.gpsbForm&&this.setState({selectedAssembly:n[e].coordSystem})}),this.props.pubSub),this.chromInfo=n,this.searchField=new c9(this.chromInfo),this.setPositionText())}),this.props.pubSub)}},{key:"autocompleteKeyPress",value:function(e){13===e.keyCode&&this.buttonClick()}},{key:"genePositionToSearchBarText",value:function(e){}},{key:"replaceGenesWithLoadedPositions",value:function(e){const t=this.positionText,n=t.split(" ");let r=!1;for(let o=0;o<n.length;o++){const t=n[o].split("-");let i=0,a=0,s="";for(;i<t.length;){for(a=t.length;a>i;){const n=t.slice(i,a).join("-");if(e[n.toLowerCase()]){const o=e[n.toLowerCase()],l=Math.floor((o.txEnd-o.txStart)/4);0===i&&a<t.length?s=`${o.chr}:${o.txStart-l}`:0===i&&a===t.length?s=`${o.chr}:${o.txStart-l}-${o.txEnd+l}`:s+=`- ${o.chr}:${o.txEnd+l}`,r=!0;break}a===i+1&&(s.length&&(s+="-"),s+=n),a-=1}i=a+1}n[o]=s}const i=n.join(" ");return this.prevParts=i.split(/[ -]/),this.positionText=i,this.setState({value:i}),r?t:null}},{key:"replaceGenesWithPositions",value:function(e){const t=this.positionText.split(/[ -]/),n=[];for(let r=0;r<t.length;r++){if(0===t[r].length)continue;const e=this.searchField.parsePosition(t[r])[2];if(null===e||Number.isNaN(+e)){const e=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${t[r].toLowerCase()}`;n.push(Fw.json(e,BA,this.props.pubSub))}}Promise.all(n).then((t=>{if(t){const n={};for(let e=0;e<t.length;e++)if(t[e][0])for(let r=0;r<t[e].length;r++)n[t[e][r].geneName.toLowerCase()]=t[e][r];const r=this.replaceGenesWithLoadedPositions(n);e(r)}})).catch((e=>console.error(e)))}},{key:"buttonClick",value:function(){this.setState({genes:[]}),this.replaceGenesWithPositions((e=>{const t=this.positionText;if(null!==this.searchField){const n=this.searchField.searchPosition(t),r=n[0];let i=n[1];if(!r)return void this.setPositionText();if(r&&(Number.isNaN(+r[0])||Number.isNaN(+r[1]))||i&&(Number.isNaN(+i[0])||Number.isNaN(+i[1])))return;i||(i=r);const o=this.xScale.copy().domain(r),a=this.yScale.copy().domain(i),[s,l,c]=PA(o,a);e&&this.props.onGeneSearch({geneSymbol:e,range:r,centerX:s,centerY:l}),this.props.setCenters(s,l,c,1e3)}}))}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(e,t){const n=t||"/",r=new RegExp(`${n}{1,}`,"g");return e.join(n).replace(r,n)}},{key:"geneSelected",value:function(e,t){const n=this.positionText.split(" ");let r=this.changedPart;for(let i=0;i<n.length;i++){const e=n[i].split("-"),o=t.geneName.split("-");if(!(r>e.length-1)){if(e[r]=t.geneName,2===o.length&&r>0&&e[r-1].toLowerCase()===o[0].toLowerCase()){const t=e.slice(0,r-1);t.push(o.join("-")),r<e.length-1&&t.push(e.slice(r+1)),n[i]=t.join("-")}else n[i]=e.join("-");break}r-=e.length}this.prevParts=n.join(" ").split(/[ -]/),this.positionText=n.join(" "),this.setState({value:n.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(e,t){const n=t.getBoundingClientRect();this.menuPosition={left:n.left,top:n.top+n.height},this.setState({menuOpened:e})}},{key:"handleRenderMenu",value:function(e){return i.createElement(xbe,null,i.createElement("div",{className:G_e,style:{left:this.menuPosition.left,top:this.menuPosition.top}},e))}},{key:"handleAssemblySelectEvt",value:function(e){this.handleAssemblySelect(e.target.value)}},{key:"handleAssemblySelect",value:function(e){this.setSelectedAssembly(e),this.setState({selectedAssembly:e})}},{key:"focusHandler",value:function(e){this.setState({isFocused:e})}},{key:"render",value:function(){const e=this.state.availableAssemblies.map((e=>i.createElement("option",{key:e,value:e},e)));return i.createElement("div",{ref:e=>{this.gpsbForm=e},className:zg({[L_e]:this.state.isFocused,[M_e]:!this.state.isFocused,[B_e]:this.props.theme===eS})},!this.props.hideAvailableAssemblies&&i.createElement("select",{ref:e=>{this.assemblyPickButton=e},className:F_e,id:this.uid,onChange:this.handleAssemblySelectEvt.bind(this),value:this.state.selectedAssembly||void 0},e),i.createElement(N_e,{ref:e=>{this.autocompleteMenu=e},getItemValue:e=>e.geneName,inputProps:{className:j_e,title:"Current location: enter a symbol or location to change the position of the current view"},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:(e,t)=>this.geneSelected(e,t),onSubmit:this.searchFieldSubmit.bind(this),renderItem:(e,t)=>i.createElement("div",{key:e.refseqid,id:e.refseqid,style:t?this.styles.highlightedItem:this.styles.item},e.geneName),renderMenu:this.handleRenderMenu.bind(this),value:this.state.selectedAssembly?this.positionText:"No valid assembly selected",wrapperStyle:{width:"100%"}}),i.createElement(bS,{onClick:this.buttonClick.bind(this),theStyle:"multitrack-header-icon"}))}}]),n}(i.Component);W_e.propTypes={autocompleteId:Ls.string,autocompleteServer:Ls.string,chromInfoId:Ls.string,chromInfoServer:Ls.string,chromInfoPath:Ls.string,hideAvailableAssemblies:Ls.bool,isFocused:Ls.bool,pubSub:Ls.object,onFocus:Ls.func,onGeneSearch:Ls.func,onSelectedAssemblyChanged:Ls.func,registerViewportChangedListener:Ls.func,removeViewportChangedListener:Ls.func,setCenters:Ls.func,theme:Ls.symbol.isRequired,trackSourceServers:Ls.array,twoD:Ls.bool};const q_e=hQ(MK(W_e)),$_e="_export-link-dialog-wrapper_p9gxw_1";function K_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q_e(r.key),r)}}function Q_e(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Z_e(e,t){return(Z_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function J_e(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=eTe(e);if(t){var i=eTe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function eTe(e){return(eTe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let tTe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_e(e,t)}(n,e);var t=J_e(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&K_e(e.prototype,t),n&&K_e(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return i.createElement(Hse,{okayOnly:!0,okayTitle:"Done",onOkay:this.props.onDone,title:"Share view link"},i.createElement("div",{className:$_e},i.createElement("input",{ref:e=>{e&&(this.input=e,e.focus(),e.select())},onClick:e=>{e.target.select()},placeholder:"Generating the link...",readOnly:!0,value:this.props.url}),i.createElement(wse,{onClick:e=>{this.input.select(),document.execCommand("copy")}},"Copy")))}}]),n}(i.Component);function nTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rTe(r.key),r)}}function rTe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function iTe(e,t){return(iTe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oTe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=aTe(e);if(t){var i=aTe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function aTe(e){return(aTe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}tTe.defaultProps={onDone:()=>{},url:""},tTe.propTypes={onDone:Ls.func,url:Ls.string};let sTe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iTe(e,t)}(n,e);var t=oTe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={submenuShown:!1},r}return function(e,t,n){t&&nTe(e.prototype,t),n&&nTe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getConfigureViewMenu",value:function(e,t){const n=["backgroundColor"],r={},o={};for(const i of n)if(i in Object.keys($ye)&&(r[i]={name:$ye[i].name},$ye[i].inlineOptions))for(const e in $ye[i].inlineOptions){const t=$ye[i].inlineOptions[e];r[i].children||(r[i].children={});const n={name:t.name,value:t.value};n.handler=()=>{o[i]=t.value,this.props.onOptionsChanged(o)},r[i].children[e]=n}return i.createElement(Zve,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:r,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top};return"options"===this.state.submenuShown.option?this.getConfigureViewMenu(t,e):i.createElement("div",null)}return i.createElement("div",null)}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.div=e},className:zg(Gb["context-menu"],{[Gb["context-menu-dark"]]:this.props.theme===eS}),"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top}},i.createElement(Hb,{onClick:e=>this.props.onTogglePositionSearchBox(e)},"Toggle position search box"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:e=>this.props.onZoomToData(e)},"Zoom to data extent"),i.createElement(Hb,{onClick:e=>this.props.onClearView(e)},"Clear View"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:e=>this.props.onYankZoom(e)},"Take zoom from"),i.createElement(Hb,{onClick:e=>this.props.onYankLocation(e)},"Take location from"),i.createElement(Hb,{onClick:e=>this.props.onYankZoomAndLocation(e)},"Take zoom and location from"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:this.props.onLockZoom},"Lock zoom with"),i.createElement(Hb,{onClick:this.props.onLockLocation},"Lock location with"),i.createElement(Hb,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:e=>this.props.onUnlockZoom(e)},"Unlock zoom"),i.createElement(Hb,{onClick:e=>this.props.onUnlockLocation(e)},"Unlock location"),i.createElement(Hb,{onClick:e=>this.props.onUnlockZoomAndLocation(e)},"Unlock zoom and location"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:e=>this.props.onProjectViewport(e)},"Show this viewport on"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:e=>this.props.onEditViewConfig(e)},"Edit view config"),i.createElement("hr",{className:Gb["context-menu-hr"]}),i.createElement(Hb,{onClick:()=>this.props.onExportSVG()},"Export views as SVG"),i.createElement(Hb,{onClick:()=>this.props.onExportPNG()},"Export views as PNG"),i.createElement(Hb,{onClick:()=>this.props.onExportViewAsJSON()},"Export views as JSON"),i.createElement(Hb,{onClick:()=>this.props.onExportViewAsLink()},"Export views as Link"),this.getSubmenu())}}]),n}(Yve);sTe.propTypes={onEditViewConfig:Ls.func.isRequired,onExportSVG:Ls.func,onExportPNG:Ls.func,onExportViewAsJSON:Ls.func,onExportViewAsLink:Ls.func,onLockLocation:Ls.func,onLockZoom:Ls.func,onLockZoomAndLocation:Ls.func,onProjectViewport:Ls.func,onTakeAndLockZoomAndLocation:Ls.func,onTogglePositionSearchBox:Ls.func,onUnlockLocation:Ls.func,onUnlockZoom:Ls.func,onUnlockZoomAndLocation:Ls.func,onYankLocation:Ls.func,onYankZoom:Ls.func,onYankZoomAndLocation:Ls.func,onZoomToData:Ls.func,theme:Ls.symbol};const lTe="_add-track-position-table_wdy5w_1",cTe="_add-track-position-table-dark_wdy5w_7",uTe="_add-track-position-other_wdy5w_11",hTe="_add-track-position-top-center_wdy5w_15",pTe="_add-track-position-middle-left_wdy5w_30",fTe="_add-track-position-middle-right_wdy5w_45",dTe="_add-track-position-middle-middle_wdy5w_60",mTe="_add-track-position-bottom-middle_wdy5w_71",gTe="_add-track-position-span_wdy5w_86";function yTe(e){return i.createElement("div",null,i.createElement("div",{className:gTe},"Add Track..."),i.createElement("table",{className:zg(lTe,{[cTe]:e.theme===eS})},i.createElement("tbody",null,i.createElement("tr",{style:{height:"30px"}},i.createElement("td",{"aria-hidden":"true",className:uTe}),i.createElement("td",{className:hTe,onClick:()=>e.onTrackPositionChosen("top")},"top"),i.createElement("td",{"aria-hidden":"true",className:uTe})),i.createElement("tr",{style:{height:"80px"}},i.createElement("td",{className:pTe,onClick:()=>e.onTrackPositionChosen("left")},"left"),i.createElement("td",{className:dTe,onClick:()=>e.onTrackPositionChosen("center")},"center"),i.createElement("td",{className:fTe,onClick:()=>e.onTrackPositionChosen("right")},"right")),i.createElement("tr",{style:{height:"30px"}},i.createElement("td",{"aria-hidden":"true",className:uTe}),i.createElement("td",{className:mTe,onClick:()=>e.onTrackPositionChosen("bottom")},"bottom"),i.createElement("td",{"aria-hidden":"true",className:uTe})))))}yTe.propTypes={onTrackPositionChosen:Ls.func.isRequired,theme:Ls.symbol.isRequired};const vTe=MK(yTe);function bTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_Te(r.key),r)}}function _Te(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function TTe(e,t){return(TTe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ETe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=wTe(e);if(t){var i=wTe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return STe(e)}(this,n)}}function STe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wTe(e){return(wTe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let ATe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TTe(e,t)}(n,e);var t=ETe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).configImg=null,r.plusImg=null,r.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},r.handleTrackPositionChosenBound=r.handleTrackPositionChosen.bind(STe(r)),r}return function(e,t,n){t&&bTe(e.prototype,t),n&&bTe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){const e=this.el.clientWidth;e!==this.state.width&&this.setState({width:e})}},{key:"handleConfigMenuOpened",value:function(e){this.setState({configMenuUid:e,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(e){this.setState({addTrackPositionMenuUid:e,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(e){this.props.onTrackPositionChosen(e),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){let e=null,t=null;this.state.addTrackPositionMenuPosition&&(t=i.createElement(xbe,{onMenuClosed:()=>{this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},i.createElement(Yve,{orientation:"left",position:this.state.addTrackPositionMenuPosition,theme:this.props.theme},i.createElement(vTe,{onTrackPositionChosen:this.handleTrackPositionChosenBound})))),this.state.configMenuUid&&(e=i.createElement(xbe,{onMenuClosed:()=>this.setState({configMenuUid:null})},i.createElement(sTe,{onClearView:()=>{this.setState({configMenuUid:null}),this.props.onClearView()},onEditViewConfig:()=>{this.setState({configMenuUid:null}),this.props.onEditViewConfig(this.state.configMenuUid)},onExportPNG:()=>{this.setState({configMenuUid:null}),this.props.onExportPNG()},onExportSVG:()=>{this.setState({configMenuUid:null}),this.props.onExportSVG()},onExportViewAsJSON:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsJSON()},onExportViewAsLink:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsLink()},onLockLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockLocation(this.state.configMenuUid)},onLockZoom:()=>{this.setState({configMenuUid:null}),this.props.onLockZoom(this.state.configMenuUid)},onLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockZoomAndLocation(this.state.configMenuUid)},onOptionsChanged:e=>{this.props.onViewOptionsChanged(e),this.setState({configMenuUid:null})},onProjectViewport:()=>{this.setState({configMenuUid:null}),this.props.onProjectViewport(this.state.configMenuUid)},onTakeAndLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid)},onTogglePositionSearchBox:()=>{this.setState({configMenuUid:null}),this.props.onTogglePositionSearchBox(this.state.configMenuUid)},onUnlockLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockLocation(this.state.configMenuUid)},onUnlockZoom:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoom(this.state.configMenuUid)},onUnlockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoomAndLocation(this.state.configMenuUid)},onYankLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankLocation(this.state.configMenuUid)},onYankZoom:()=>{this.setState({configMenuUid:null}),this.props.onYankZoom(this.state.configMenuUid)},onYankZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankZoomAndLocation(this.state.configMenuUid)},onZoomToData:()=>{this.setState({configMenuUid:null}),this.props.onZoomToData(this.state.configMenuUid)},orientation:"left",position:this.state.configMenuPosition,theme:this.props.theme})));const n=this.props.getGenomePositionSearchBox(this.state.isFocused,(e=>{this.setState({isFocused:e})})),r=zg(this.state.isFocused?rS["multitrack-header-focus"]:rS["multitrack-header"],{[rS["multitrack-header-dark"]]:this.props.theme===eS}),o=this.state.width<=400?rS["multitrack-header-icon-squeazed"]:rS["multitrack-header-icon"];return i.createElement("div",{ref:e=>{this.el=e},className:r},i.createElement("div",{className:rS["multitrack-header-left"]},this.props.mouseTool===qE&&i.createElement("svg",{className:zg(rS["mouse-tool-selection"],o),title:"Selection tool active"},i.createElement("use",{xlinkHref:"#select"})),i.createElement("div",{className:rS["multitrack-header-grabber"],title:"Drag to move the view"},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null)),this.state.width>300&&i.createElement("div",{className:rS["multitrack-header-search"]},this.props.isGenomePositionSearchBoxVisible&&n)),i.createElement("nav",{className:rS["multitrack-header-nav-list"]},i.createElement("svg",{className:o,onClick:this.props.onAddView},i.createElement("title",null,"Add new view (clone this view)"),i.createElement("use",{xlinkHref:"#copy"})),i.createElement("svg",{ref:e=>{this.configImg=e},className:o,onClick:()=>this.handleConfigMenuOpened(this.props.viewUid)},i.createElement("title",null,"Configure this view"),i.createElement("use",{xlinkHref:"#cog"})),i.createElement("svg",{ref:e=>{this.plusImg=e},className:o,onClick:()=>this.handleAddTrackPositionMenuOpened(this.props.viewUid)},i.createElement("title",null,"Add Track"),i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{className:o,onClick:this.props.onCloseView},i.createElement("title",null,"Close View"),i.createElement("use",{xlinkHref:"#cross"}))),e,t)}}]),n}(i.Component);ATe.defaultProps={isGenomePositionSearchBoxVisible:!1},ATe.propTypes={getGenomePositionSearchBox:Ls.func.isRequired,isGenomePositionSearchBoxVisible:Ls.bool,mouseTool:Ls.string.isRequired,onAddView:Ls.func.isRequired,onClearView:Ls.func.isRequired,onCloseView:Ls.func.isRequired,onEditViewConfig:Ls.func.isRequired,onExportSVG:Ls.func.isRequired,onExportPNG:Ls.func.isRequired,onExportViewsAsJSON:Ls.func.isRequired,onExportViewsAsLink:Ls.func.isRequired,onLockLocation:Ls.func.isRequired,onLockZoom:Ls.func.isRequired,onLockZoomAndLocation:Ls.func.isRequired,onProjectViewport:Ls.func.isRequired,onTakeAndLockZoomAndLocation:Ls.func.isRequired,onTogglePositionSearchBox:Ls.func.isRequired,onTrackPositionChosen:Ls.func.isRequired,onUnlockLocation:Ls.func.isRequired,onUnlockZoom:Ls.func.isRequired,onUnlockZoomAndLocation:Ls.func.isRequired,onViewOptionsChanged:Ls.func.isRequired,onYankLocation:Ls.func.isRequired,onYankZoom:Ls.func.isRequired,onYankZoomAndLocation:Ls.func.isRequired,onZoomToData:Ls.func.isRequired,theme:Ls.symbol.isRequired,viewUid:Ls.string.isRequired};const OTe=MK(ATe);var xTe={};Object.defineProperty(xTe,"__esModule",{value:!0});var kTe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ITe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),CTe=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);function PTe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var DTe="navigator"in globalThis&&/Win/i.test(navigator.platform),RTe="navigator"in globalThis&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),NTe="npm__react-simple-code-editor__textarea",MTe="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n."+NTe+":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  ."+NTe+" {\n    color: transparent !important;\n  }\n\n  ."+NTe+"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n",LTe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=PTe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={capture:!0},r._recordCurrentState=function(){var e=r._input;if(e){var t=e.value,n=e.selectionStart,i=e.selectionEnd;r._recordChange({value:t,selectionStart:n,selectionEnd:i})}},r._getLines=function(e,t){return e.substring(0,t).split("\n")},r._recordChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r._history,i=n.stack,o=n.offset;if(i.length&&o>-1){r._history.stack=i.slice(0,o+1);var a=r._history.stack.length;if(a>100){var s=a-100;r._history.stack=i.slice(s,a),r._history.offset=Math.max(r._history.offset-s,0)}}var l=Date.now();if(t){var c=r._history.stack[r._history.offset];if(c&&l-c.timestamp<3e3){var u=/[^a-z0-9]([a-z0-9]+)$/i,h=r._getLines(c.value,c.selectionStart).pop().match(u),p=r._getLines(e.value,e.selectionStart).pop().match(u);if(h&&p&&p[1].startsWith(h[1]))return void(r._history.stack[r._history.offset]=kTe({},e,{timestamp:l}))}}r._history.stack.push(kTe({},e,{timestamp:l})),r._history.offset++},r._updateInput=function(e){var t=r._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,r.props.onValueChange(e.value))},r._applyEdits=function(e){var t=r._input,n=r._history.stack[r._history.offset];n&&t&&(r._history.stack[r._history.offset]=kTe({},n,{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),r._recordChange(e),r._updateInput(e)},r._undoEdit=function(){var e=r._history,t=e.stack,n=e.offset,i=t[n-1];i&&(r._updateInput(i),r._history.offset=Math.max(n-1,0))},r._redoEdit=function(){var e=r._history,t=e.stack,n=e.offset,i=t[n+1];i&&(r._updateInput(i),r._history.offset=Math.min(n+1,t.length-1))},r._handleKeyDown=function(e){var t=r.props,n=t.tabSize,i=t.insertSpaces,o=t.ignoreTabKey,a=t.onKeyDown;if(!a||(a(e),!e.defaultPrevented)){27===e.keyCode&&e.target.blur();var s=e.target,l=s.value,c=s.selectionStart,u=s.selectionEnd,h=(i?" ":"\t").repeat(n);if(9===e.keyCode&&!o&&r.state.capture)if(e.preventDefault(),e.shiftKey){var p=r._getLines(l,c),f=p.length-1,d=r._getLines(l,u).length-1,m=l.split("\n").map((function(e,t){return t>=f&&t<=d&&e.startsWith(h)?e.substring(h.length):e})).join("\n");if(l!==m){var g=p[f];r._applyEdits({value:m,selectionStart:g.startsWith(h)?c-h.length:c,selectionEnd:u-(l.length-m.length)})}}else if(c!==u){var y=r._getLines(l,c),v=y.length-1,b=r._getLines(l,u).length-1,_=y[v];r._applyEdits({value:l.split("\n").map((function(e,t){return t>=v&&t<=b?h+e:e})).join("\n"),selectionStart:/\S/.test(_)?c+h.length:c,selectionEnd:u+h.length*(b-v+1)})}else{var T=c+h.length;r._applyEdits({value:l.substring(0,c)+h+l.substring(u),selectionStart:T,selectionEnd:T})}else if(8===e.keyCode){var E=c!==u;if(l.substring(0,c).endsWith(h)&&!E){e.preventDefault();var S=c-h.length;r._applyEdits({value:l.substring(0,c-h.length)+l.substring(u),selectionStart:S,selectionEnd:S})}}else if(13===e.keyCode){if(c===u){var w=r._getLines(l,c).pop().match(/^\s+/);if(w&&w[0]){e.preventDefault();var A="\n"+w[0],O=c+A.length;r._applyEdits({value:l.substring(0,c)+A+l.substring(u),selectionStart:O,selectionEnd:O})}}}else if(57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode){var x=void 0;57===e.keyCode&&e.shiftKey?x=["(",")"]:219===e.keyCode?x=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?x=e.shiftKey?['"','"']:["'","'"]:192===e.keyCode&&!e.shiftKey&&(x=["`","`"]),c!==u&&x&&(e.preventDefault(),r._applyEdits({value:l.substring(0,c)+x[0]+l.substring(c,u)+x[1]+l.substring(u),selectionStart:c,selectionEnd:u+2}))}else!(RTe?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)||e.shiftKey||e.altKey?(RTe?e.metaKey&&90===e.keyCode&&e.shiftKey:DTe?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),r._redoEdit()):77===e.keyCode&&e.ctrlKey&&(!RTe||e.shiftKey)&&(e.preventDefault(),r.setState((function(e){return{capture:!e.capture}}))):(e.preventDefault(),r._undoEdit())}},r._handleChange=function(e){var t=e.target,n=t.value,i=t.selectionStart,o=t.selectionEnd;r._recordChange({value:n,selectionStart:i,selectionEnd:o},!0),r.props.onValueChange(n)},r._history={stack:[],offset:-1},PTe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ITe(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.style,i=t.padding,o=t.highlight,a=t.textareaId,s=t.autoFocus,l=t.disabled,c=t.form,u=t.maxLength,h=t.minLength,p=t.name,f=t.placeholder,d=t.readOnly,m=t.required,g=t.onClick,y=t.onFocus,v=t.onBlur,b=t.onKeyUp;t.onKeyDown,t.onValueChange,t.tabSize,t.insertSpaces,t.ignoreTabKey;var _=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"]),T={paddingTop:i,paddingRight:i,paddingBottom:i,paddingLeft:i},E=o(n);return CTe.createElement("div",kTe({},_,{style:kTe({},BTe.container,r)}),CTe.createElement("textarea",{ref:function(t){return e._input=t},style:kTe({},BTe.editor,BTe.textarea,T),className:NTe,id:a,value:n,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:g,onKeyUp:b,onFocus:y,onBlur:v,disabled:l,form:c,maxLength:u,minLength:h,name:p,placeholder:f,readOnly:d,required:m,autoFocus:s,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),CTe.createElement("pre",kTe({"aria-hidden":"true",style:kTe({},BTe.editor,BTe.highlight,T)},"string"==typeof E?{dangerouslySetInnerHTML:{__html:E+"<br />"}}:{children:E})),CTe.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:MTe}}))}},{key:"session",get:function(){return{history:this._history}},set:function(e){this._history=e.history}}]),t}(CTe.Component);LTe.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var jTe=xTe.default=LTe,BTe={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},FTe={exports:{}};!function(e){var t=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var a in r={},n[o]=r,t)t.hasOwnProperty(a)&&(r[a]=e(t[a],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=r[e];return r[e]=a,i.languages.DFS(i.languages,(function(t,n){n===c&&t!=e&&(this[t]=a)})),a},DFS:function e(t,n,r,o){o=o||{};var a=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],c=i.util.type(l);"Object"!==c||o[a(l)]?"Array"===c&&!o[a(l)]&&(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,a=0;o=r.elements[a++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),a=i.languages[o];i.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,o);var l={element:t,language:o,grammar:a,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),s(e,i,t,i.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function a(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(e,t,n,r,l,h){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var f=n[p];f=Array.isArray(f)?f:[f];for(var d=0;d<f.length;++d){if(h&&h.cause==p+","+d)return;var m=f[d],g=m.inside,y=!!m.lookbehind,v=!!m.greedy,b=m.alias;if(v&&!m.pattern.global){var _=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,_+"g")}for(var T=m.pattern||m,E=r.next,S=l;E!==t.tail&&!(h&&S>=h.reach);S+=E.value.length,E=E.next){var w=E.value;if(t.length>e.length)return;if(!(w instanceof o)){var A,O=1;if(v){if(!(A=a(T,S,e,y))||A.index>=e.length)break;var x=A.index,k=A.index+A[0].length,I=S;for(I+=E.value.length;x>=I;)I+=(E=E.next).value.length;if(S=I-=E.value.length,E.value instanceof o)continue;for(var C=E;C!==t.tail&&(I<k||"string"==typeof C.value);C=C.next)O++,I+=C.value.length;O--,w=e.slice(S,I),A.index-=S}else if(!(A=a(T,0,w,y)))continue;x=A.index;var P=A[0],D=w.slice(0,x),R=w.slice(x+P.length),N=S+w.length;h&&N>h.reach&&(h.reach=N);var M=E.prev;if(D&&(M=c(t,M,D),S+=D.length),u(t,M,O),E=c(t,M,new o(p,g?i.tokenize(P,g):P,b,P)),R&&c(t,E,R),O>1){var L={cause:p+","+d,reach:N};s(e,t,n,E.prev,S,L),h&&L.reach>h.reach&&(h.reach=L.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach((function(t){r+=e(t,n)})),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),i.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,a=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),a&&e.close()}),!1)),i;var h=i.util.currentScript();function p(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var f=document.readyState;"loading"===f||"interactive"===f&&h&&h.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}(typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=t),typeof globalThis<"u"&&(globalThis.Prism=t)}(FTe);var GTe=FTe.exports;Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;var HTe={exports:{}};(function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function a(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function s(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,i,"[\\+\\-\\.]")+"*"),n(n(a+"|"+t(u,s,"[\\:]"))+"*");var h=n(n("25[0-5]")+"|"+n("2[0-4]"+i)+"|"+n("1"+i+i)+"|"+n("0?[1-9]"+i)+"|0?0?"+i),p=n(h+"\\."+h+"\\."+h+"\\."+h),f=n(o+"{1,4}"),d=n(n(f+"\\:"+f)+"|"+p),m=n(n(f+"\\:")+"{6}"+d),g=n("\\:\\:"+n(f+"\\:")+"{5}"+d),y=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+d),v=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+d),b=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+d),_=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+d),T=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+d),E=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),S=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),w=n([m,g,y,v,b,_,T,E,S].join("|")),A=n(n(u+"|"+a)+"+");n("[vV]"+o+"+\\."+t(u,s,"[\\:]")+"+"),n(n(a+"|"+t(u,s))+"*");var O=n(a+"|"+t(u,s,"[\\:\\@]"));return n(n(a+"|"+t(u,s,"[\\@]"))+"+"),n(n(O+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,s),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+A+")")+"?\\]?$")}}var l=s(!1),c=s(!0),u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},p=2147483647,f=36,d=1,m=26,g=38,y=700,v=72,b=128,_="-",T=/^xn--/,E=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=f-d,O=Math.floor,x=String.fromCharCode;function k(e){throw new RangeError(w[e])}function I(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function C(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+I((e=e.replace(S,".")).split("."),t).join(".")}function P(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var D=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:f},R=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},N=function(e,t,n){var r=0;for(e=n?O(e/y):e>>1,e+=O(e/t);e>A*m>>1;r+=f)e=O(e/A);return O(r+(A+1)*e/(e+g))},M=function(e){var t=[],n=e.length,r=0,i=b,o=v,a=e.lastIndexOf(_);a<0&&(a=0);for(var s=0;s<a;++s)e.charCodeAt(s)>=128&&k("not-basic"),t.push(e.charCodeAt(s));for(var l=a>0?a+1:0;l<n;){for(var c=r,u=1,h=f;;h+=f){l>=n&&k("invalid-input");var g=D(e.charCodeAt(l++));(g>=f||g>O((p-r)/u))&&k("overflow"),r+=g*u;var y=h<=o?d:h>=o+m?m:h-o;if(g<y)break;var T=f-y;u>O(p/T)&&k("overflow"),u*=T}var E=t.length+1;o=N(r-c,E,0==c),O(r/E)>p-i&&k("overflow"),i+=O(r/E),r%=E,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},L=function(e){var t=[],n=(e=P(e)).length,r=b,i=0,o=v,a=!0,s=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;h<128&&t.push(x(h))}}catch(Y){s=!0,l=Y}finally{try{!a&&u.return&&u.return()}finally{if(s)throw l}}var g=t.length,y=g;for(g&&t.push(_);y<n;){var T=p,E=!0,S=!1,w=void 0;try{for(var A,I=e[Symbol.iterator]();!(E=(A=I.next()).done);E=!0){var C=A.value;C>=r&&C<T&&(T=C)}}catch(Y){S=!0,w=Y}finally{try{!E&&I.return&&I.return()}finally{if(S)throw w}}var D=y+1;T-r>O((p-i)/D)&&k("overflow"),i+=(T-r)*D,r=T;var M=!0,L=!1,j=void 0;try{for(var B,F=e[Symbol.iterator]();!(M=(B=F.next()).done);M=!0){var G=B.value;if(G<r&&++i>p&&k("overflow"),G==r){for(var H=i,U=f;;U+=f){var z=U<=o?d:U>=o+m?m:U-o;if(H<z)break;var V=H-z,X=f-z;t.push(x(R(z+V%X,0))),H=O(V/X)}t.push(x(R(H,0))),o=N(i,D,y==g),i=0,++y}}}catch(Y){L=!0,j=Y}finally{try{!M&&F.return&&F.return()}finally{if(L)throw j}}++i,++r}return t.join("")},j=function(e){return C(e,(function(e){return T.test(e)?M(e.slice(4).toLowerCase()):e}))},B=function(e){return C(e,(function(e){return E.test(e)?"xn--"+L(e):e}))},F={version:"2.1.0",ucs2:{decode:P,encode:function(e){return String.fromCodePoint.apply(String,h(e))}},decode:M,encode:L,toASCII:B,toUnicode:j},G={};function H(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function U(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function z(e,t){function n(e){var n=U(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,H).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,H).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,H).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,H).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,H).replace(t.PCT_ENCODED,i)),e}function V(e){return e.replace(/^0*(.*)/,"$1")||"0"}function X(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(V).join("."):e}function Y(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=u(a,2),l=s[0],c=s[1],h=c?c.split(":").map(V):[],p=l.split(":").map(V),f=t.IPV4ADDRESS.test(p[p.length-1]),d=f?7:8,m=p.length-d,g=Array(d),y=0;y<d;++y)g[y]=h[y]||p[m+y]||"";f&&(g[d-1]=X(g[d-1],t));var v=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var _=g.slice(0,v.index),T=g.slice(v.index+v.length);b=_.join(":")+"::"+T.join(":")}else b=g.join(":");return o&&(b+="%"+o),b}return e}var W=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,q=void 0==="".match(/(){0}/)[1];function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(W);if(i){q?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=Y(X(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=G[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)z(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(r.PCT_ENCODED,U).toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+a}z(n,l)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function K(e,t){var n=!1!==t.iri?c:l,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(Y(X(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),("number"==typeof e.port||"string"==typeof e.port)&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var Q=/^\.\.?\//,Z=/^\/\.(\/|$)/,J=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Q))e=e.replace(Q,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(J))e=e.replace(J,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,r=[],i=G[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host&&!n.IPV6ADDRESS.test(e.host)&&(t.domainHost||i&&i.domainHost))try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,U).toLowerCase())}catch(s){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+s}z(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=K(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;!t.absolutePath&&(!i||!i.absolutePath)&&(a=te(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=$(ne(e,n),n),t=$(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function ie(e,t,n){var r=a({scheme:"null"},n);return ne(re($(e,r),$(t,r),r,!0),r)}function oe(e,t){return"string"==typeof e?e=ne($(e,t),t):"object"===r(e)&&(e=$(ne(e,t),t)),e}function ae(e,t,n){return"string"==typeof e?e=ne($(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"==typeof t?t=ne($(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function se(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,H)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,U)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return(e.port===(n?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function he(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var pe={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=he(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if((e.port===(he(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=u(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},fe={scheme:"wss",domainHost:pe.domainHost,parse:pe.parse,serialize:pe.serialize},de={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ye=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ve="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),_e="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Te=new RegExp(me,"g"),Ee=new RegExp(ye,"g"),Se=new RegExp(t("[^]",ve,"[\\.]",'[\\"]',be),"g"),we=new RegExp(t("[^]",me,_e),"g"),Ae=we;function Oe(e){var t=U(e);return t.match(Te)?t:e}var xe={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,l=a.length;s<l;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,p=u.length;h<p;++h)r.push(u[h]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:i=!0,o[le(c[0],t)]=le(c[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var f=0,d=r.length;f<d;++f){var m=r[f].split("@");if(m[0]=le(m[0]),t.unicodeSupport)m[1]=le(m[1],t).toLowerCase();else try{m[1]=F.toASCII(le(m[1],t).toLowerCase())}catch(g){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}r[f]=m.join("@")}return n},serialize:function(e,t){var n=e,r=o(e.to);if(r){for(var a=0,s=r.length;a<s;++a){var l=String(r[a]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(Ee,Oe).replace(Ee,i).replace(Se,H),h=l.slice(c+1);try{h=t.iri?F.toUnicode(h):F.toASCII(le(h,t).toLowerCase())}catch(m){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+m}r[a]=u+"@"+h}n.path=r.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var f=[];for(var d in p)p[d]!==de[d]&&f.push(d.replace(Ee,Oe).replace(Ee,i).replace(we,H)+"="+p[d].replace(Ee,Oe).replace(Ee,i).replace(Ae,H));return f.length&&(n.query=f.join("&")),n}},ke=/^([^\:]+)\:(.*)/,Ie={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ke),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),l=G[s];r.nid=o,r.nss=a,r.path=void 0,l&&(r=l.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=G[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},Ce=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Pe={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!n.uuid.match(Ce))&&(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};G[ce.scheme]=ce,G[ue.scheme]=ue,G[pe.scheme]=pe,G[fe.scheme]=fe,G[xe.scheme]=xe,G[Ie.scheme]=Ie,G[Pe.scheme]=Pe,e.SCHEMES=G,e.pctEncChar=H,e.pctDecChars=U,e.parse=$,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=ie,e.normalize=oe,e.equal=ae,e.escapeComponent=se,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})})(HTe.exports);var UTe=HTe.exports,zTe=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},VTe={copy:function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},checkDataType:XTe,checkDataTypes:function(e,t,n){if(1===e.length)return XTe(e[0],t,n,!0);var r="",i=WTe(e);for(var o in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+XTe(o,t,n,!0);return r},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++){var i=t[r];(YTe[i]||"array"===e&&"array"===i)&&(n[n.length]=i)}if(n.length)return n}else{if(YTe[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:WTe,getProperty:KTe,escapeQuotes:QTe,equal:zTe,ucs2length:function(e){for(var t,n=0,r=e.length,i=0;i<r;)n++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r&&(56320==(64512&(t=e.charCodeAt(i)))&&i++);return n},varOccurences:function(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0},varReplace:function(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0},schemaHasRulesExcept:function(e,t,n){if("boolean"==typeof e)return!e&&"not"!=n;for(var r in e)if(r!=n&&t[r])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var n in e)if(!t[n])return n},toQuotedString:ZTe,getPathExpr:function(e,t,n,r){var i=n?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return tEe(e,i)},getPath:function(e,t,n){var r=ZTe(n?"/"+nEe(t):KTe(t));return tEe(e,r)},getData:function(e,t,n){var r,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!JTe.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(eEe)))throw new Error("Invalid JSON-pointer: "+e);if(r=+a[1],"#"==(i=a[2])){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return n[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(o="data"+(t-r||""),!i)return o}for(var s=o,l=i.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(s+=" && "+(o+=KTe(rEe(u))))}return s},unescapeFragment:function(e){return rEe(decodeURIComponent(e))},unescapeJsonPointer:rEe,escapeFragment:function(e){return encodeURIComponent(nEe(e))},escapeJsonPointer:nEe};function XTe(e,t,n,r){var i=r?" !== ":" === ",o=r?" || ":" && ",a=r?"!":"",s=r?"":"!";switch(e){case"null":return t+i+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+i+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+s+"("+t+" % 1)"+o+t+i+t+(n?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(n?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var YTe=WTe(["string","number","integer","boolean","null"]);function WTe(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var qTe=/^[a-z$_][a-z$_0-9]*$/i,$Te=/'|\\/g;function KTe(e){return"number"==typeof e?"["+e+"]":qTe.test(e)?"."+e:"['"+QTe(e)+"']"}function QTe(e){return e.replace($Te,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function ZTe(e){return"'"+QTe(e)+"'"}var JTe=/^\/(?:[^~]|~0|~1)*$/,eEe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function tEe(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function nEe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function rEe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var iEe=VTe,oEe=function(e){iEe.copy(e,this)};var aEe={exports:{}},sEe=aEe.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),lEe(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function lEe(e,t,n,r,i,o,a,s,l,c){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var u in t(r,i,o,a,s,l,c),r){var h=r[u];if(Array.isArray(h)){if(u in sEe.arrayKeywords)for(var p=0;p<h.length;p++)lEe(e,t,n,h[p],i+"/"+u+"/"+p,o,i,u,r,p)}else if(u in sEe.propsKeywords){if(h&&"object"==typeof h)for(var f in h)lEe(e,t,n,h[f],i+"/"+u+"/"+cEe(f),o,i,u,r,f)}else(u in sEe.keywords||e.allKeys&&!(u in sEe.skipKeywords))&&lEe(e,t,n,h,i+"/"+u,o,i,u,r)}n(r,i,o,a,s,l,c)}}function cEe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}sEe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},sEe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},sEe.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},sEe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var uEe=aEe.exports,hEe=UTe,pEe=zTe,fEe=VTe,dEe=oEe,mEe=uEe,gEe=yEe;function yEe(e,t,n){var r=this._refs[n];if("string"==typeof r){if(!this._refs[r])return yEe.call(this,e,t,r);r=this._refs[r]}if((r=r||this._schemas[n])instanceof dEe)return SEe(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i,o,a,s=vEe.call(this,t,n);return s&&(i=s.schema,t=s.root,a=s.baseId),i instanceof dEe?o=i.validate||e.call(this,i.schema,t,void 0,a):void 0!==i&&(o=SEe(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,a)),o}function vEe(e,t){var n=hEe.parse(t),r=xEe(n),i=OEe(this._getId(e.schema));if(0===Object.keys(e.schema).length||r!==i){var o=IEe(r),a=this._refs[o];if("string"==typeof a)return bEe.call(this,e,a,n);if(a instanceof dEe)a.validate||this._compile(a),e=a;else{if(!((a=this._schemas[o])instanceof dEe))return;if(a.validate||this._compile(a),o==IEe(t))return{schema:a,root:e,baseId:i};e=a}if(!e.schema)return;i=OEe(this._getId(e.schema))}return TEe.call(this,n,i,e.schema,e)}function bEe(e,t,n){var r=vEe.call(this,e,t);if(r){var i=r.schema,o=r.baseId;e=r.root;var a=this._getId(i);return a&&(o=CEe(o,a)),TEe.call(this,n,o,i,e)}}yEe.normalizeId=IEe,yEe.fullPath=OEe,yEe.url=CEe,yEe.ids=function(e){var t=IEe(this._getId(e)),n={"":t},r={"":OEe(t,!1)},i={},o=this;return mEe(e,{allKeys:!0},(function(e,t,a,s,l,c,u){if(""!==t){var h=o._getId(e),p=n[s],f=r[s]+"/"+l;if(void 0!==u&&(f+="/"+("number"==typeof u?u:fEe.escapeFragment(u))),"string"==typeof h){h=p=IEe(p?hEe.resolve(p,h):h);var d=o._refs[h];if("string"==typeof d&&(d=o._refs[d]),d&&d.schema){if(!pEe(e,d.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=IEe(f))if("#"==h[0]){if(i[h]&&!pEe(e,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=e}else o._refs[h]=f}n[t]=p,r[t]=f}})),i},yEe.inlineRef=SEe,yEe.schema=vEe;var _Ee=fEe.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function TEe(e,t,n,r){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(void 0===(n=n[a=fEe.unescapeFragment(a)]))break;var s;if(!_Ee[a]&&((s=this._getId(n))&&(t=CEe(t,s)),n.$ref)){var l=CEe(t,n.$ref),c=vEe.call(this,r,l);c&&(n=c.schema,r=c.root,t=c.baseId)}}}if(void 0!==n&&n!==r.schema)return{schema:n,root:r,baseId:t}}}var EEe=fEe.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function SEe(e,t){return!1!==t&&(void 0===t||!0===t?wEe(e):t?AEe(e)<=t:void 0)}function wEe(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&!wEe(t))return!1}else for(var r in e)if("$ref"==r||"object"==typeof(t=e[r])&&!wEe(t))return!1;return!0}function AEe(e){var t,n=0;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&(n+=AEe(t)),n==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(EEe[i])n++;else if("object"==typeof(t=e[i])&&(n+=AEe(t)+1),n==1/0)return 1/0}return n}function OEe(e,t){return!1!==t&&(e=IEe(e)),xEe(hEe.parse(e))}function xEe(e){return hEe.serialize(e).split("#")[0]+"#"}var kEe=/#\/?$/;function IEe(e){return e?e.replace(kEe,""):""}function CEe(e,t){return t=IEe(t),hEe.resolve(e,t)}var PEe=gEe,DEe={Validation:NEe((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:NEe(REe)};function REe(e,t,n){this.message=n||REe.message(e,t),this.missingRef=PEe.url(e,t),this.missingSchema=PEe.normalizeId(PEe.fullPath(this.missingRef))}function NEe(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}REe.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var MEe=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},o={key:r,value:t[r]};return e(i,o)}}}(t.cmp),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var o,a;if(Array.isArray(t)){for(a="[",o=0;o<t.length;o++)o&&(a+=","),a+=e(t[o])||"null";return a+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(a="",o=0;o<l.length;o++){var c=l[o],u=e(t[c]);u&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u)}return i.splice(s,1),"{"+a+"}"}}(e)},LEe=function(e,t,n){var r="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,h=e.schema[t],p=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,m="data"+(u||""),g="valid"+c;if(!1===e.schema){e.isTop?d=!0:r+=" var "+g+" = false; ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?r+=i?" return data; ":" validate.errors = null; return true; ":r+=" var "+g+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var v=e.isTop;c=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{c=e.level,m="data"+((u=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+c+" = errors;"}g="valid"+c,d=!e.opts.allErrors;var _="",T="",E=e.schema.type,S=Array.isArray(E);if(E&&e.opts.nullable&&!0===e.schema.nullable&&(S?-1==E.indexOf("null")&&(E=E.concat("null")):"null"!=E&&(E=[E,"null"],S=!0)),S&&1==E.length&&(E=E[0],S=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),E){if(e.opts.coerceTypes)var w=e.util.coerceToTypes(e.opts.coerceTypes,E);var A=e.RULES.types[E];if(w||S||!0===A||A&&!Q(A)){p=e.schemaPath+".type",f=e.errSchemaPath+"/type",p=e.schemaPath+".type",f=e.errSchemaPath+"/type";var O=S?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[O](E,m,e.opts.strictNumbers,!0)+") { ",w){var x="dataType"+c,k="coerced"+c;r+=" var "+x+" = typeof "+m+"; var "+k+" = undefined; ","array"==e.opts.coerceTypes&&(r+=" if ("+x+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+x+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+k+" = "+m+"; } "),r+=" if ("+k+" !== undefined) ; ";var I=w;if(I)for(var C,P=-1,D=I.length-1;P<D;)"string"==(C=I[P+=1])?r+=" else if ("+x+" == 'number' || "+x+" == 'boolean') "+k+" = '' + "+m+"; else if ("+m+" === null) "+k+" = ''; ":"number"==C||"integer"==C?(r+=" else if ("+x+" == 'boolean' || "+m+" === null || ("+x+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==C&&(r+=" && !("+m+" % 1)"),r+=")) "+k+" = +"+m+"; "):"boolean"==C?r+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+k+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+k+" = true; ":"null"==C?r+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+k+" = null; ":"array"==e.opts.coerceTypes&&"array"==C&&(r+=" else if ("+x+" == 'string' || "+x+" == 'number' || "+x+" == 'boolean' || "+m+" == null) "+k+" = ["+m+"]; ");r+=" else {   ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=S?""+E.join(","):""+E,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=S?""+E.join(","):""+E,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+k+" !== undefined) {  ";var R=u?"data"+(u-1||""):"parentData";r+=" "+m+" = "+k+"; ",u||(r+="if ("+R+" !== undefined)"),r+=" "+R+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+k+"; } "}else{(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=S?""+E.join(","):""+E,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=S?""+E.join(","):""+E,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(r+=" } if (errors === ",r+=v?"0":"errs_"+c,r+=") { ",T+="}");else{var N=e.RULES;if(N)for(var M=-1,L=N.length-1;M<L;)if(Q(A=N[M+=1])){if(A.type&&(r+=" if ("+e.util.checkDataType(A.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==A.type&&e.schema.properties){h=e.schema.properties;var j=Object.keys(h);if(j)for(var B,F=-1,G=j.length-1;F<G;){if(void 0!==(z=h[B=j[F+=1]]).default){var H=m+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(z.default)+" ":r+=" "+JSON.stringify(z.default)+" ",r+="; "}}}else if("array"==A.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){P=-1;for(var z,V=U.length-1;P<V;)if(void 0!==(z=U[P+=1]).default){H=m+"["+P+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(z.default)+" ":r+=" "+JSON.stringify(z.default)+" ",r+="; "}}}var X=A.rules;if(X)for(var Y,W=-1,q=X.length-1;W<q;)if(Z(Y=X[W+=1])){var $=Y.code(e,Y.keyword,A.type);$&&(r+=" "+$+" ",d&&(_+="}"))}if(d&&(r+=" "+_+" ",_=""),A.type&&(r+=" } ",E&&E===A.type&&!w)){r+=" else { ";var K;p=e.schemaPath+".type",f=e.errSchemaPath+"/type";(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=S?""+E.join(","):""+E,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=S?""+E.join(","):""+E,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}d&&(r+=" if (errors === ",r+=v?"0":"errs_"+c,r+=") { ",T+="}")}}function Q(e){for(var t=e.rules,n=0;n<t.length;n++)if(Z(t[n]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var n=t.implements,r=0;r<n.length;r++)if(void 0!==e.schema[n[r]])return!0}(t)}return d&&(r+=" "+T+" "),v?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+g+" = errors === errs_"+c+";",r},jEe=gEe,BEe=VTe,FEe=DEe,GEe=MEe,HEe=LEe,UEe=BEe.ucs2length,zEe=zTe,VEe=FEe.Validation,XEe=function e(t,n,r,i){var o=this,a=this._opts,s=[void 0],l={},c=[],u={},h=[],p={},f=[];n=n||{schema:t,refVal:s,refs:l};var d=YEe.call(this,t,n,i),m=this._compilations[d.index];if(d.compiling)return m.callValidate=function e(){var t=m.validate,n=t.apply(this,arguments);return e.errors=t.errors,n};var g=this._formats,y=this.RULES;try{var v=_(t,n,r,i);m.validate=v;var b=m.callValidate;return b&&(b.schema=v.schema,b.errors=null,b.refs=v.refs,b.refVal=v.refVal,b.root=v.root,b.$async=v.$async,a.sourceCode&&(b.source=v.source)),v}finally{WEe.call(this,t,n,i)}function _(t,r,i,u){var p=!r||r&&r.schema==t;if(r.schema!=n.schema)return e.call(o,t,r,i,u);var d,m=!0===t.$async,v=HEe({isTop:!0,schema:t,isRoot:p,baseId:u,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:FEe.MissingRef,RULES:y,validate:HEe,util:BEe,resolve:jEe,resolveRef:T,usePattern:w,useDefault:A,useCustomRule:O,opts:a,formats:g,logger:o.logger,self:o});v=JEe(s,QEe)+JEe(c,$Ee)+JEe(h,KEe)+JEe(f,ZEe)+v,a.processCode&&(v=a.processCode(v,t));try{d=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",v)(o,y,g,n,s,h,f,zEe,UEe,VEe),s[0]=d}catch(b){throw o.logger.error("Error compiling schema, function code:",v),b}return d.schema=t,d.errors=null,d.refs=l,d.refVal=s,d.root=p?d:r,m&&(d.$async=!0),!0===a.sourceCode&&(d.source={code:v,patterns:c,defaults:h}),d}function T(t,i,c){i=jEe.url(t,i);var u,h,p=l[i];if(void 0!==p)return S(u=s[p],h="refVal["+p+"]");if(!c&&n.refs){var f=n.refs[i];if(void 0!==f)return S(u=n.refVal[f],h=E(i,u))}h=E(i);var d=jEe.call(o,_,n,i);if(void 0===d){var m=r&&r[i];m&&(d=jEe.inlineRef(m,a.inlineRefs)?m:e.call(o,m,n,r,t))}if(void 0!==d)return function(e,t){var n=l[e];s[n]=t}(i,d),S(d,h);!function(e){delete l[e]}(i)}function E(e,t){var n=s.length;return s[n]=t,l[e]=n,"refVal"+n}function S(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function w(e){var t=u[e];return void 0===t&&(t=u[e]=c.length,c[t]=e),"pattern"+t}function A(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return BEe.toQuotedString(e);case"object":if(null===e)return"null";var t=GEe(e),n=p[t];return void 0===n&&(n=p[t]=h.length,h[n]=e),"default"+n}}function O(e,t,n,r){if(!1!==o._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(n,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var s=e.definition.validateSchema;if(s)if(!s(t)){var l="keyword schema is invalid: "+o.errorsText(s.errors);if("log"!=o._opts.validateSchema)throw new Error(l);o.logger.error(l)}}var c,u=e.definition.compile,h=e.definition.inline,p=e.definition.macro;if(u)c=u.call(o,t,n,r);else if(p)c=p.call(o,t,n,r),!1!==a.validateSchema&&o.validateSchema(c,!0);else if(h)c=h.call(o,r,e.keyword,t,n);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=f.length;return f[d]=c,{code:"customRule"+d,validate:c}}};function YEe(e,t,n){var r=qEe.call(this,e,t,n);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:n},{index:r,compiling:!1})}function WEe(e,t,n){var r=qEe.call(this,e,t,n);r>=0&&this._compilations.splice(r,1)}function qEe(e,t,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==e&&i.root==t&&i.baseId==n)return r}return-1}function $Ee(e,t){return"var pattern"+e+" = new RegExp("+BEe.toQuotedString(t[e])+");"}function KEe(e){return"var default"+e+" = defaults["+e+"];"}function QEe(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function ZEe(e){return"var customRule"+e+" = customRules["+e+"];"}function JEe(e,t){if(!e.length)return"";for(var n="",r=0;r<e.length;r++)n+=t(r,e);return n}var eSe={exports:{}},tSe=eSe.exports=function(){this._cache={}};tSe.prototype.put=function(e,t){this._cache[e]=t},tSe.prototype.get=function(e){return this._cache[e]},tSe.prototype.del=function(e){delete this._cache[e]},tSe.prototype.clear=function(){this._cache={}};var nSe=eSe.exports,rSe=VTe,iSe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,oSe=[0,31,28,31,30,31,30,31,31,30,31,30,31],aSe=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,sSe=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,lSe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,cSe=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,uSe=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,hSe=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,pSe=/^(?:\/(?:[^~/]|~0|~1)*)*$/,fSe=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,dSe=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,mSe=gSe;function gSe(e){return e="full"==e?"full":"fast",rSe.copy(gSe[e])}function ySe(e){var t=e.match(iSe);if(!t)return!1;var n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(2==r&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:oSe[r])}function vSe(e,t){var n=e.match(aSe);if(!n)return!1;var r=n[1],i=n[2],o=n[3],a=n[5];return(r<=23&&i<=59&&o<=59||23==r&&59==i&&60==o)&&(!t||a)}gSe.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":cSe,url:uSe,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:sSe,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ESe,uuid:hSe,"json-pointer":pSe,"json-pointer-uri-fragment":fSe,"relative-json-pointer":dSe},gSe.full={date:ySe,time:vSe,"date-time":function(e){var t=e.split(bSe);return 2==t.length&&ySe(t[0])&&vSe(t[1],!0)},uri:function(e){return _Se.test(e)&&lSe.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":cSe,url:uSe,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:sSe,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ESe,uuid:hSe,"json-pointer":pSe,"json-pointer-uri-fragment":fSe,"relative-json-pointer":dSe};var bSe=/t|\s/i;var _Se=/\/|:/;var TSe=/[^\\]\\Z/;function ESe(e){if(TSe.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var SSe=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s;var f="maximum"==t,d=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[d],g=e.opts.$data&&m&&m.$data,y=f?"<":">",v=f?">":"<",b=void 0;if(!p&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(d+" must be number or boolean");if(g){var _=e.util.getData(m.$data,a,e.dataPathArr),T="exclusive"+o,E="exclType"+o,S="exclIsNumber"+o,w="' + "+(x="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+_+"; ",i+=" var "+T+"; var "+E+" = typeof "+(_="schemaExcl"+o)+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var A;b=d;(A=A||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+d+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var O=i;i=A.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+E+" == 'number' ? ( ("+T+" = "+r+" === undefined || "+_+" "+y+"= "+r+") ? "+h+" "+v+"= "+_+" : "+h+" "+v+" "+r+" ) : ( ("+T+" = "+_+" === true) ? "+h+" "+v+"= "+r+" : "+h+" "+v+" "+r+" ) || "+h+" !== "+h+") { var op"+o+" = "+T+" ? '"+y+"' : '"+y+"='; ",void 0===s&&(b=d,c=e.errSchemaPath+"/"+d,r=_,p=g)}else{w=y;if((S="number"==typeof m)&&p){var x="'"+w+"'";i+=" if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" ( "+r+" === undefined || "+m+" "+y+"= "+r+" ? "+h+" "+v+"= "+m+" : "+h+" "+v+" "+r+" ) || "+h+" !== "+h+") { "}else{S&&void 0===s?(T=!0,b=d,c=e.errSchemaPath+"/"+d,r=m,v+="="):(S&&(r=Math[f?"min":"max"](m,s)),m===(!S||r)?(T=!0,b=d,c=e.errSchemaPath+"/"+d,v+="="):(T=!1,w+="="));x="'"+w+"'";i+=" if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+" "+v+" "+r+" || "+h+" !== "+h+") { "}}b=b||t,(A=A||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+x+", limit: "+r+", exclusive: "+T+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+w+" ",i+=p?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";O=i;return i=A.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+O+"]); ":i+=" validate.errors = ["+O+"]; return false; ":i+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i},wSe=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var f=t,d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=d.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},ASe=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");var f="maxLength"==t?">":"<";i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+f+" "+r+") { ";var d=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},OSe=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var f=t,d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=d.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},xSe={$ref:function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),p="valid"+a;if("#"==l||"#/"==l)e.isRoot?(r=e.async,i="validate"):(r=!0===e.root.schema.$async,i="root.refVal[0]");else{var f=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===f){var d=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(d),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var m=o;o=v.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,d);e.logger.warn(d),u&&(o+=" if (true) { ")}}else if(f.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=f.schema,g.schemaPath="",g.errSchemaPath=l,o+=" "+e.validate(g).replace(/validate\.schema/g,f.code)+" ",u&&(o+=" if ("+y+") { ")}else r=!0===f.$async||e.async&&!1!==f.$async,i=f.code}if(i){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+h+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+p+"; "),o+=" try { await "+b+"; ",u&&(o+=" "+p+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+p+" = false; "),o+=" } ",u&&(o+=" if ("+p+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o},allOf:function(e,t,n){var r=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,h=l.baseId,p=!0,f=i;if(f)for(var d,m=-1,g=f.length-1;m<g;)d=f[m+=1],(e.opts.strictKeywords?"object"==typeof d&&Object.keys(d).length>0||!1===d:e.util.schemaHasRules(d,e.RULES.all))&&(p=!1,l.schema=d,l.schemaPath=o+"["+m+"]",l.errSchemaPath=a+"/"+m,r+="  "+e.validate(l)+" ",l.baseId=h,s&&(r+=" if ("+u+") { ",c+="}"));return s&&(r+=p?" if (true) { ":" "+c.slice(0,-1)+" "),r},anyOf:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level;if(a.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=f.baseId;r+=" var "+p+" = errors; var "+h+" = false;  ";var y=e.compositeRule;e.compositeRule=f.compositeRule=!0;var v=a;if(v)for(var b,_=-1,T=v.length-1;_<T;)b=v[_+=1],f.schema=b,f.schemaPath=s+"["+_+"]",f.errSchemaPath=l+"/"+_,r+="  "+e.validate(f)+" ",f.baseId=g,r+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",d+="}";e.compositeRule=f.compositeRule=y,r+=" "+d+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else c&&(r+=" if (true) { ");return r},$comment:function(e,t,n){var r=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t;e.opts.allErrors;var a=e.util.toQuotedString(i);return!0===e.opts.$comment?r+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(r+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r},const:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),p||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+h+" = equal("+u+", schema"+i+"); if (!"+h+") {   ";var f=f||[];f.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var d=r;return r=f.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},contains:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level,m="i"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all);if(r+="var "+p+" = errors;var "+h+";",b){var _=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+=" var "+d+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var T=u+"["+m+"]";f.dataPathArr[g]=m;var E=e.validate(f);f.baseId=v,e.util.varOccurences(E,y)<2?r+=" "+e.util.varReplace(E,y,T)+" ":r+=" var "+y+" = "+T+"; "+E+" ",r+=" if ("+d+") break; }  ",e.compositeRule=f.compositeRule=_,r+="  if (!"+d+") {"}else r+=" if ("+u+".length == 0) {";var S=S||[];S.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var w=r;return r=S.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",b&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},dependencies:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e),f="";p.level++;var d="valid"+p.level,m={},g={},y=e.opts.ownProperties;for(T in a)if("__proto__"!=T){var v=a[T],b=Array.isArray(v)?g:m;b[T]=v}r+="var "+h+" = errors;";var _=e.errorPath;for(var T in r+="var missing"+i+";",g)if((b=g[T]).length){if(r+=" if ( "+u+e.util.getProperty(T)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),c){r+=" && ( ";var E=b;if(E)for(var S=-1,w=E.length-1;S<w;){C=E[S+=1],S&&(r+=" || "),r+=" ( ( "+(N=u+(R=e.util.getProperty(C)))+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?C:R)+") ) "}r+=")) {  ";var A="missing"+i,O="' + "+A+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,A,!0):_+" + "+A);var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(T)+"', missingProperty: '"+O+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(T)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var k=r;r=x.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var I=b;if(I)for(var C,P=-1,D=I.length-1;P<D;){C=I[P+=1];var R=e.util.getProperty(C),N=(O=e.util.escapeQuotes(C),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,C,e.opts.jsonPointers)),r+=" if ( "+N+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(C)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(T)+"', missingProperty: '"+O+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(T)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",c&&(f+="}",r+=" else { ")}e.errorPath=_;var M=p.baseId;for(var T in m){v=m[T];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(r+=" "+d+" = true; if ( "+u+e.util.getProperty(T)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),r+=") { ",p.schema=v,p.schemaPath=s+e.util.getProperty(T),p.errSchemaPath=l+"/"+e.util.escapeFragment(T),r+="  "+e.validate(p)+" ",p.baseId=M,r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}"))}return c&&(r+="   "+f+" if ("+h+" == errors) {"),r},enum:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="i"+i,d="schema"+i;p||(r+=" var "+d+" = validate.schema"+s+";"),r+="var "+h+";",p&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=h+" = false;for (var "+f+"=0; "+f+"<"+d+".length; "+f+"++) if (equal("+u+", "+d+"["+f+"])) { "+h+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+h+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},format:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(r+=" if (true) { "),r;var h,p=e.opts.$data&&a&&a.$data;p?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var f=e.opts.unknownFormats,d=Array.isArray(f);if(p){r+=" var "+(m="format"+i)+" = formats["+h+"]; var "+(g="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(r+=" var async"+i+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",p&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" (","ignore"!=f&&(r+=" ("+h+" && !"+m+" ",d&&(r+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),r+=") || "),r+=" ("+m+" && "+y+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":r+=" "+m+"("+u+") ",r+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[a])){if("ignore"==f)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(r+=" if (true) { "),r;if(d&&f.indexOf(a)>=0)return c&&(r+=" if (true) { "),r;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=n)return c&&(r+=" if (true) { "),r;if(v){if(!e.async)throw new Error("async format in sync schema");r+=" if (!(await "+(b="formats"+e.util.getProperty(a)+".validate")+"("+u+"))) { "}else{r+=" if (! ";var b="formats"+e.util.getProperty(a);g&&(b+=".validate"),r+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",r+=") { "}}var _=_||[];_.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",r+=p?""+h:""+e.util.toQuotedString(a),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=p?"' + "+h+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=p?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var T=r;return r=_.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c&&(r+=" else { "),r},if:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=f.baseId;if(y||v){var _;f.createErrors=!1,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+=" var "+p+" = errors; var "+h+" = true;  ";var T=e.compositeRule;e.compositeRule=f.compositeRule=!0,r+="  "+e.validate(f)+" ",f.baseId=b,f.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=T,y?(r+=" if ("+d+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(f)+" ",f.baseId=b,r+=" "+h+" = "+d+"; ",y&&v?r+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",r+=" } ",v&&(r+=" else { ")):r+=" if (!"+d+") { ",v&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(f)+" ",f.baseId=b,r+=" "+h+" = "+d+"; ",y&&v?r+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",c&&(r+=" else { ")}else c&&(r+=" if (true) { ");return r},items:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level,g="i"+i,y=f.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(r+="var "+p+" = errors;var "+h+";",Array.isArray(a)){var _=e.schema.additionalItems;if(!1===_){r+=" "+h+" = "+u+".length <= "+a.length+"; ";var T=l;l=e.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var E=E||[];E.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var S=r;r=E.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l=T,c&&(d+="}",r+=" else { ")}var w=a;if(w)for(var A,O=-1,x=w.length-1;O<x;)if(A=w[O+=1],e.opts.strictKeywords?"object"==typeof A&&Object.keys(A).length>0||!1===A:e.util.schemaHasRules(A,e.RULES.all)){r+=" "+m+" = true; if ("+u+".length > "+O+") { ";var k=u+"["+O+"]";f.schema=A,f.schemaPath=s+"["+O+"]",f.errSchemaPath=l+"/"+O,f.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),f.dataPathArr[y]=O;var I=e.validate(f);f.baseId=b,e.util.varOccurences(I,v)<2?r+=" "+e.util.varReplace(I,v,k)+" ":r+=" var "+v+" = "+k+"; "+I+" ",r+=" }  ",c&&(r+=" if ("+m+") { ",d+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))){f.schema=_,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+u+".length > "+a.length+") {  for (var "+g+" = "+a.length+"; "+g+" < "+u+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);k=u+"["+g+"]";f.dataPathArr[y]=g;I=e.validate(f);f.baseId=b,e.util.varOccurences(I,v)<2?r+=" "+e.util.varReplace(I,v,k)+" ":r+=" var "+v+" = "+k+"; "+I+" ",c&&(r+=" if (!"+m+") break; "),r+=" } }  ",c&&(r+=" if ("+m+") { ",d+="}")}}else if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);k=u+"["+g+"]";f.dataPathArr[y]=g;I=e.validate(f);f.baseId=b,e.util.varOccurences(I,v)<2?r+=" "+e.util.varReplace(I,v,k)+" ":r+=" var "+v+" = "+k+"; "+I+" ",c&&(r+=" if (!"+m+") break; "),r+=" }"}return c&&(r+=" "+d+" if ("+p+" == errors) {"),r},maximum:SSe,minimum:SSe,maxItems:wSe,minItems:wSe,maxLength:ASe,minLength:ASe,maxProperties:OSe,minProperties:OSe,multipleOf:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="var division"+o+";if (",p&&(i+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+r+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",p&&(i+="  )  "),i+=" ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=p?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var d=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+d+"]); ":i+=" validate.errors = ["+d+"]; return false; ":i+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},not:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=l,r+=" var "+h+" = errors;  ";var d,m=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(d=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,d&&(p.opts.allErrors=d),e.compositeRule=p.compositeRule=m,r+=" if ("+f+") {   ";var g=g||[];g.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var y=r;r=g.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ");return r},oneOf:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level,g=f.baseId,y="prevValid"+i,v="passingSchemas"+i;r+="var "+p+" = errors , "+y+" = false , "+h+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=f.compositeRule=!0;var _=a;if(_)for(var T,E=-1,S=_.length-1;E<S;)T=_[E+=1],(e.opts.strictKeywords?"object"==typeof T&&Object.keys(T).length>0||!1===T:e.util.schemaHasRules(T,e.RULES.all))?(f.schema=T,f.schemaPath=s+"["+E+"]",f.errSchemaPath=l+"/"+E,r+="  "+e.validate(f)+" ",f.baseId=g):r+=" var "+m+" = true; ",E&&(r+=" if ("+m+" && "+y+") { "+h+" = false; "+v+" = ["+v+", "+E+"]; } else { ",d+="}"),r+=" if ("+m+") { "+h+" = "+y+" = true; "+v+" = "+E+"; }";return e.compositeRule=f.compositeRule=b,r+=d+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},pattern:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),i+=" !"+(p?"(new RegExp("+r+"))":e.usePattern(s))+".test("+h+") ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=p?""+r:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=p?"' + "+r+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var d=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+d+"]); ":i+=" validate.errors = ["+d+"]; return false; ":i+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},properties:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e),f="";p.level++;var d="valid"+p.level,m="key"+i,g="idx"+i,y=p.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+i,_=Object.keys(a||{}).filter(R),T=e.schema.patternProperties||{},E=Object.keys(T).filter(R),S=e.schema.additionalProperties,w=_.length||E.length,A=!1===S,O="object"==typeof S&&Object.keys(S).length,x=e.opts.removeAdditional,k=A||O||x,I=e.opts.ownProperties,C=e.baseId,P=e.schema.required;if(P&&(!e.opts.$data||!P.$data)&&P.length<e.opts.loopRequired)var D=e.util.toHash(P);function R(e){return"__proto__"!==e}if(r+="var "+h+" = errors;var "+d+" = true;",I&&(r+=" var "+b+" = undefined;"),k){if(r+=I?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",w){if(r+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var N=_;if(N)for(var M=-1,L=N.length-1;M<L;)$=N[M+=1],r+=" || "+m+" == "+e.util.toQuotedString($)+" "}if(E.length){var j=E;if(j)for(var B=-1,F=j.length-1;B<F;)oe=j[B+=1],r+=" || "+e.usePattern(oe)+".test("+m+") "}r+=" ); if (isAdditional"+i+") { "}if("all"==x)r+=" delete "+u+"["+m+"]; ";else{var G=e.errorPath,H="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),A)if(x)r+=" delete "+u+"["+m+"]; ";else{r+=" "+d+" = false; ";var U=l;l=e.errSchemaPath+"/additionalProperties",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var z=r;r=ne.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,c&&(r+=" break; ")}else if(O)if("failing"==x){r+=" var "+h+" = errors;  ";var V=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=S,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var X=u+"["+m+"]";p.dataPathArr[y]=m;var Y=e.validate(p);p.baseId=C,e.util.varOccurences(Y,v)<2?r+=" "+e.util.varReplace(Y,v,X)+" ":r+=" var "+v+" = "+X+"; "+Y+" ",r+=" if (!"+d+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=p.compositeRule=V}else{p.schema=S,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);X=u+"["+m+"]";p.dataPathArr[y]=m;Y=e.validate(p);p.baseId=C,e.util.varOccurences(Y,v)<2?r+=" "+e.util.varReplace(Y,v,X)+" ":r+=" var "+v+" = "+X+"; "+Y+" ",c&&(r+=" if (!"+d+") break; ")}e.errorPath=G}w&&(r+=" } "),r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(_.length){var q=_;if(q)for(var $,K=-1,Q=q.length-1;K<Q;){var Z=a[$=q[K+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){var J=e.util.getProperty($),ee=(X=u+J,W&&void 0!==Z.default);p.schema=Z,p.schemaPath=s+J,p.errSchemaPath=l+"/"+e.util.escapeFragment($),p.errorPath=e.util.getPath(e.errorPath,$,e.opts.jsonPointers),p.dataPathArr[y]=e.util.toQuotedString($);Y=e.validate(p);if(p.baseId=C,e.util.varOccurences(Y,v)<2){Y=e.util.varReplace(Y,v,X);var te=X}else{te=v;r+=" var "+v+" = "+X+"; "}if(ee)r+=" "+Y+" ";else{if(D&&D[$]){r+=" if ( "+te+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=") { "+d+" = false; ";G=e.errorPath,U=l;var ne,re=e.util.escapeQuotes($);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(G,$,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+re+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";z=r;r=ne.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,e.errorPath=G,r+=" } else { "}else c?(r+=" if ( "+te+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=") { "+d+" = true; } else { "):(r+=" if ("+te+" !== undefined ",I&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=" ) { ");r+=" "+Y+" } "}}c&&(r+=" if ("+d+") { ",f+="}")}}if(E.length){var ie=E;if(ie)for(var oe,ae=-1,se=ie.length-1;ae<se;){Z=T[oe=ie[ae+=1]];if(e.opts.strictKeywords?"object"==typeof Z&&Object.keys(Z).length>0||!1===Z:e.util.schemaHasRules(Z,e.RULES.all)){p.schema=Z,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),r+=I?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",r+=" if ("+e.usePattern(oe)+".test("+m+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);X=u+"["+m+"]";p.dataPathArr[y]=m;Y=e.validate(p);p.baseId=C,e.util.varOccurences(Y,v)<2?r+=" "+e.util.varReplace(Y,v,X)+" ":r+=" var "+v+" = "+X+"; "+Y+" ",c&&(r+=" if (!"+d+") break; "),r+=" } ",c&&(r+=" else "+d+" = true; "),r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}")}}}return c&&(r+=" "+f+" if ("+h+" == errors) {"),r},propertyNames:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(r+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=l;var d="key"+i,m="idx"+i,g="i"+i,y="' + "+d+" + '",v="data"+(p.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,T=e.baseId;_&&(r+=" var "+b+" = undefined; "),r+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+d+" = "+b+"["+m+"]; ":" for (var "+d+" in "+u+") { ",r+=" var startErrs"+i+" = errors; ";var E=d,S=e.compositeRule;e.compositeRule=p.compositeRule=!0;var w=e.validate(p);p.baseId=T,e.util.varOccurences(w,v)<2?r+=" "+e.util.varReplace(w,v,E)+" ":r+=" var "+v+" = "+E+"; "+w+" ",e.compositeRule=p.compositeRule=S,r+=" if (!"+f+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+d+"; }   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),c&&(r+=" break; "),r+=" } }"}return c&&(r+="  if ("+h+" == errors) {"),r},required:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="schema"+i;if(!p)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var d=[],m=a;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(d[d.length]=g)}}else d=a;if(p||d.length){var _=e.errorPath,T=p||d.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(c)if(r+=" var missing"+i+"; ",T){p||(r+=" var "+f+" = validate.schema"+s+"; ");var S="' + "+(I="schema"+i+"["+(O="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),r+=" var "+h+" = true; ",p&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=" for (var "+O+" = 0; "+O+" < "+f+".length; "+O+"++) { "+h+" = "+u+"["+f+"["+O+"]] !== undefined ",E&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+f+"["+O+"]) "),r+="; if (!"+h+") break; } ",p&&(r+="  }  "),r+="  if (!"+h+") {   ",(k=k||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+S+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var w=r;r=k.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var A=d;if(A)for(var O=-1,x=A.length-1;O<x;){P=A[O+=1],O&&(r+=" || "),r+=" ( ( "+(M=u+(N=e.util.getProperty(P)))+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(P)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?P:N)+") ) "}r+=") {  ";var k;S="' + "+(I="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,I,!0):_+" + "+I),(k=k||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+S+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";w=r;r=k.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(T){p||(r+=" var "+f+" = validate.schema"+s+"; ");var I;S="' + "+(I="schema"+i+"["+(O="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),p&&(r+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+S+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),r+=" for (var "+O+" = 0; "+O+" < "+f+".length; "+O+"++) { if ("+u+"["+f+"["+O+"]] === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+f+"["+O+"]) "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+S+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var C=d;if(C)for(var P,D=-1,R=C.length-1;D<R;){P=C[D+=1];var N=e.util.getProperty(P),M=(S=e.util.escapeQuotes(P),u+N);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,P,e.opts.jsonPointers)),r+=" if ( "+M+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(P)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+S+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else c&&(r+=" if (true) {");return r},uniqueItems:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p="valid"+o,f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,(s||f)&&!1!==e.opts.uniqueItems){f&&(i+=" var "+p+"; if ("+r+" === false || "+r+" === undefined) "+p+" = true; else if (typeof "+r+" != 'boolean') "+p+" = false; else { "),i+=" var i = "+h+".length , "+p+" = true , j; if (i > 1) { ";var d=e.schema.items&&e.schema.items.type,m=Array.isArray(d);if(!d||"object"==d||"array"==d||m&&(d.indexOf("object")>=0||d.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+p+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var g="checkDataType"+(m?"s":"");i+=" if ("+e.util[g](d,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",f&&(i+="  }  "),i+=" if (!"+p+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i},validate:LEe},kSe=xSe,ISe=VTe.toHash,CSe=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],PSe=DEe.MissingRef,DSe=function e(t,n,r){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(r=n,n=void 0);var o=a(t).then((function(){var e=i._addSchema(t,void 0,n);return e.validate||s(e)}));return r&&o.then((function(e){r(null,e)}),r),o;function a(t){var n=t.$schema;return n&&!i.getSchema(n)?e.call(i,{$ref:n},!0):Promise.resolve()}function s(e){try{return i._compile(e)}catch(t){if(t instanceof PSe)return function(t){var r=t.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+t.missingRef+" cannot be resolved");var o=i._loadingSchemas[r];return o||(o=i._loadingSchemas[r]=i._opts.loadSchema(r)).then(l,l),o.then((function(e){if(!c(r))return a(e).then((function(){c(r)||i.addSchema(e,r,void 0,n)}))})).then((function(){return s(e)}));function l(){delete i._loadingSchemas[r]}function c(e){return i._refs[e]||i._schemas[e]}}(t);throw t}}};const RSe={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var NSe=RSe,MSe={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:NSe.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:NSe.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},LSe=/^[a-z_$][a-z0-9_$-]*$/i,jSe=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,p="data"+(s||""),f="valid"+a,d="errs__"+a,m=e.opts.$data&&l&&l.$data;m?(o+=" var schema"+a+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=l;var g,y,v,b,_,T=this,E="definition"+a,S=T.definition,w="";if(m&&S.$data){_="keywordValidate"+a;var A=S.validateSchema;o+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+_+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(T,l,e.schema,e)))return;i="validate.schema"+c,_=b.code,g=S.compile,y=S.inline,v=S.macro}var O=_+".errors",x="i"+a,k="ruleErr"+a,I=S.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(o+=O+" = null;"),o+="var "+d+" = errors;var "+f+";",m&&S.$data&&(w+="}",o+=" if ("+i+" === undefined) { "+f+" = true; } else { ",A&&(w+="}",o+=" "+f+" = "+E+".validateSchema("+i+"); if ("+f+") { ")),y)S.statements?o+=" "+b.validate+" ":o+=" "+f+" = "+b.validate+"; ";else if(v){var C=e.util.copy(e);w="";C.level++;var P="valid"+C.level;C.schema=b.validate,C.schemaPath="";var D=e.compositeRule;e.compositeRule=C.compositeRule=!0;var R=e.validate(C).replace(/validate\.schema/g,_);e.compositeRule=C.compositeRule=D,o+=" "+R}else{(j=j||[]).push(o),o="",o+="  "+_+".call( ",e.opts.passContext?o+="this":o+="self",g||!1===S.schema?o+=" , "+p+" ":o+=" , "+i+" , "+p+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var N=s?"data"+(s-1||""):"parentData",M=s?e.dataPathArr[s]:"parentDataProperty",L=o+=" , "+N+" , "+M+" , rootData )  ";o=j.pop(),!1===S.errors?(o+=" "+f+" = ",I&&(o+="await "),o+=L+"; "):I?o+=" var "+(O="customErrors"+a)+" = null; try { "+f+" = await "+L+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+O+" = e.errors; else throw e; } ":o+=" "+O+" = null; "+f+" = "+L+"; "}if(S.modifying&&(o+=" if ("+N+") "+p+" = "+N+"["+M+"];"),o+=""+w,S.valid)h&&(o+=" if (true) { ");else{var j;o+=" if ( ",void 0===S.valid?(o+=" !",o+=v?""+P:""+f):o+=" "+!S.valid+" ",o+=") { ",r=T.keyword,(j=j||[]).push(o),o="",(j=j||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+T.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+T.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var B=o;o=j.pop(),!e.compositeRule&&h?e.async?o+=" throw new ValidationError(["+B+"]); ":o+=" validate.errors = ["+B+"]; return false; ":o+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var F=o;o=j.pop(),y?S.errors?"full"!=S.errors&&(o+="  for (var "+x+"="+d+"; "+x+"<errors; "+x+"++) { var "+k+" = vErrors["+x+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+k+".schema = "+i+"; "+k+".data = "+p+"; "),o+=" } "):!1===S.errors?o+=" "+F+" ":(o+=" if ("+d+" == errors) { "+F+" } else {  for (var "+x+"="+d+"; "+x+"<errors; "+x+"++) { var "+k+" = vErrors["+x+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+k+".schema = "+i+"; "+k+".data = "+p+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+T.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+T.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===S.errors?o+=" "+F+" ":(o+=" if (Array.isArray("+O+")) { if (vErrors === null) vErrors = "+O+"; else vErrors = vErrors.concat("+O+"); errors = vErrors.length;  for (var "+x+"="+d+"; "+x+"<errors; "+x+"++) { var "+k+" = vErrors["+x+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+";  "+k+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+k+".schema = "+i+"; "+k+".data = "+p+"; "),o+=" } } else { "+F+" } "),o+=" } ",h&&(o+=" else { ")}return o},BSe=MSe,FSe={add:function(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!LSe.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var r=t.type;if(Array.isArray(r))for(var i=0;i<r.length;i++)a(e,r[i],t);else a(e,r,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function a(e,t,r){for(var i,o=0;o<n.length;o++){var a=n[o];if(a.type==t){i=a;break}}i||(i={type:t,rules:[]},n.push(i));var s={keyword:e,definition:r,custom:!0,code:jSe,implements:r.implements};i.rules.push(s),n.custom[e]=s}return n.keywords[e]=n.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)if(r[i].keyword==e){r.splice(i,1);break}return this},validate:function e(t,n){e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(BSe,!0);if(r(t))return!0;if(e.errors=r.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}};const GSe={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var HSe=XEe,USe=gEe,zSe=nSe,VSe=oEe,XSe=MEe,YSe=mSe,WSe=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=ISe(t),e.types=ISe(["number","integer","string","array","object","boolean","null"]),e.forEach((function(n){n.rules=n.rules.map((function(n){var r;if("object"==typeof n){var i=Object.keys(n)[0];r=n[i],n=i,r.forEach((function(n){t.push(n),e.all[n]=!0}))}return t.push(n),e.all[n]={keyword:n,code:kSe[n],implements:r}})),e.all.$comment={keyword:"$comment",code:kSe.$comment},n.type&&(e.types[n.type]=n)})),e.keywords=ISe(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e},qSe=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var r,i=t[n].split("/"),o=e;for(r=1;r<i.length;r++)o=o[i[r]];for(r=0;r<CSe.length;r++){var a=CSe[r],s=o[a];s&&(o[a]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},$Se=VTe,KSe=nwe;nwe.prototype.validate=function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);n=r.validate||this._compile(r)}var i=n(t);return!0!==n.$async&&(this.errors=n.errors),i},nwe.prototype.compile=function(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)},nwe.prototype.addSchema=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,n,r);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return t=USe.normalizeId(t||o),lwe(this,t),this._schemas[t]=this._addSchema(e,n,r,!0),this},nwe.prototype.addMetaSchema=function(e,t,n){return this.addSchema(e,t,n,!0),this},nwe.prototype.validateSchema=function(e,t){var n=e.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(JSe)?JSe:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return r},nwe.prototype.getSchema=function(e){var t=rwe(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var n=USe.schema.call(e,{schema:{}},t);if(n){var r=n.schema,i=n.root,o=n.baseId,a=HSe.call(e,r,i,void 0,o);return e._fragments[t]=new VSe({ref:t,fragment:!0,schema:r,root:i,baseId:o,validate:a}),a}}(this,e)}},nwe.prototype.removeSchema=function(e){if(e instanceof RegExp)return iwe(this,this._schemas,e),iwe(this,this._refs,e),this;switch(typeof e){case"undefined":return iwe(this,this._schemas),iwe(this,this._refs),this._cache.clear(),this;case"string":var t=rwe(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,r=n?n(e):e;this._cache.del(r);var i=this._getId(e);i&&(i=USe.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},nwe.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},nwe.prototype.errorsText=function(e,t){if(e=e||this.errors,!e)return"No errors";for(var n=void 0===(t=t||{}).separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=r+a.dataPath+" "+a.message+n)}return i.slice(0,-n.length)},nwe.prototype._addSchema=function(e,t,n,r){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(e):e,a=this._cache.get(o);if(a)return a;r=r||!1!==this._opts.addUsedSchema;var s=USe.normalizeId(this._getId(e));s&&r&&lwe(this,s);var l,c=!1!==this._opts.validateSchema&&!t;c&&!(l=s&&s==USe.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=USe.ids.call(this,e),h=new VSe({id:s,schema:e,localRefs:u,cacheKey:o,meta:n});return"#"!=s[0]&&r&&(this._refs[s]=h),this._cache.put(o,h),c&&l&&this.validateSchema(e,!0),h},nwe.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var n,r;e.compiling=!0,e.meta&&(n=this._opts,this._opts=this._metaOpts);try{r=HSe.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=r,e.refs=r.refs,e.refVal=r.refVal,e.root=r.root,r;function i(){var t=e.validate,n=t.apply(this,arguments);return i.errors=t.errors,n}},nwe.prototype.compileAsync=DSe;var QSe=FSe;nwe.prototype.addKeyword=QSe.add,nwe.prototype.getKeyword=QSe.get,nwe.prototype.removeKeyword=QSe.remove,nwe.prototype.validateKeyword=QSe.validate;var ZSe=DEe;nwe.ValidationError=ZSe.Validation,nwe.MissingRefError=ZSe.MissingRef,nwe.$dataMetaSchema=qSe;var JSe="http://json-schema.org/draft-07/schema",ewe=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],twe=["/properties"];function nwe(e){if(!(this instanceof nwe))return new nwe(e);e=this._opts=$Se.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:cwe,warn:cwe,error:cwe};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=YSe(e.format),this._cache=e.cache||new zSe,this._loadingSchemas={},this._compilations=[],this.RULES=WSe(),this._getId=function(e){switch(e.schemaId){case"auto":return swe;case"id":return owe;default:return awe}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=XSe),this._metaOpts=function(e){for(var t=$Se.copy(e._opts),n=0;n<ewe.length;n++)delete t[ewe[n]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}(this),function(e){var t;if(e._opts.$data&&(t=GSe,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=RSe;e._opts.$data&&(n=qSe(n,twe)),e.addMetaSchema(n,JSe,!0),e._refs["http://json-schema.org/schema"]=JSe}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}(this)}function rwe(e,t){return t=USe.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function iwe(e,t,n){for(var r in t){var i=t[r];!i.meta&&(!n||n.test(r))&&(e._cache.del(i.cacheKey),delete t[r])}}function owe(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function awe(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function swe(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function lwe(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function cwe(){}const uwe=Cs(KSe),hwe={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://higlass.io/#viewconf",title:"HiGlass viewconf",type:"object",additionalProperties:!1,required:[],properties:{editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/zoomLocks"},locationLocks:{$ref:"#/definitions/locks/locationLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},definitions:{data:{type:"object",properties:{url:{type:"string"},server:{type:"string"},filetype:{type:"string"},type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},axisSpecificLocks:{additionalProperties:!1,properties:{axis:{enum:["x","y"],type:"string"},lock:{type:"string"}},required:["lock","axis"],type:"object"},locationLocksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{anyOf:[{type:"string"},{additionalProperties:!1,properties:{x:{$ref:"#/definitions/locks/axisSpecificLocks"},y:{$ref:"#/definitions/locks/axisSpecificLocks"}},type:"object"}]}}},zoomLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},locationLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locationLocksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2,default:[1,null]}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"integer",title:"The X Position",default:0},y:{type:"integer",title:"The Y Position",default:0},w:{type:"integer",title:"Width",default:12},h:{type:"integer",title:"Height",default:12},moved:{type:"boolean"},static:{type:"boolean"}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"},transforms:{type:"array"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["multivec","1d-heatmap","line","point","bar","divergent-bar","stacked-interval","gene-annotations","linear-2d-rectangle-domains","chromosome-labels","linear-heatmap","1d-value-interval","2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}}},pwe={"view-config-editor-header":"_view-config-editor-header_1hlm6_1","view-config-editor":"_view-config-editor_1hlm6_1","view-config-log":"_view-config-log_1hlm6_34","view-config-log-header":"_view-config-log-header_1hlm6_46","view-config-log-msg":"_view-config-log-msg_1hlm6_60",title:"_title_1hlm6_70",Warning:"_Warning_1hlm6_76",Success:"_Success_1hlm6_79",Error:"_Error_1hlm6_82"};function fwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dwe(r.key),r)}}function dwe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function mwe(e,t){return(mwe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gwe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=vwe(e);if(t){var i=vwe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ywe(e)}(this,n)}}function ywe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vwe(e){return(vwe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let bwe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mwe(e,t)}(n,e);var t=gwe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={code:e.viewConfig,hide:!1,showLog:!1,logMsgs:r.getLogMsgs(e.viewConfig)},r.handleChangeBound=r.handleChange.bind(ywe(r)),r.handleKeyDownBound=r.handleKeyDown.bind(ywe(r)),r.handleKeyUpBound=r.handleKeyUp.bind(ywe(r)),r.handleSubmitBound=r.handleSubmit.bind(ywe(r)),r.hideBound=r.hide.bind(ywe(r)),r.showBound=r.show.bind(ywe(r)),r.toggleLogBound=r.toggleLog.bind(ywe(r)),r.pubSubs=[],r.pubSubs.push(r.props.pubSub.subscribe("keydown",r.handleKeyDownBound)),r.pubSubs.push(r.props.pubSub.subscribe("keyup",r.handleKeyUpBound)),r}return function(e,t,n){t&&fwe(e.prototype,t),n&&fwe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:async function(){this.editor&&(this.editor._input.focus(),this.editor._input.setSelectionRange(0,0),await jA(0),this.editorWrap&&(this.editorWrap.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.pubSubs.forEach((e=>this.props.pubSub.unsubscribe(e))),this.pubSubs=[]}},{key:"handleChange",value:function(e){const t=this.getLogMsgs(e);this.setState({code:e,logMsgs:t})}},{key:"handleKeyDown",value:function(e){"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.props.onChange(this.state.code)),"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.props.onChange(this.state.code),this.props.modal.close())}},{key:"handleKeyUp",value:function(e){this.setState({hide:!1}),"Escape"===e.key&&(e.preventDefault(),this.props.modal.close(),this.props.onCancel())}},{key:"handleSubmit",value:function(e){e&&e.preventDefault(),this.props.onSave(this.state.code)}},{key:"getLogMsgs",value:function(e){const t=[];let n;try{n=JSON.parse(e)}catch(i){return console.warn(i),t.push({type:"Error",msg:i.toString()}),t}const r=(new uwe).compile(hwe);return r(n)||(console.warn("Invalid viewconf"),t.push({type:"Warning",msg:"Invalid viewconf"})),r.errors&&(console.warn(JSON.stringify(r.errors,null,2)),r.errors.forEach((e=>{t.push({type:"Warning",msg:JSON.stringify(e,null,2)})}))),0===t.length&&t.push({type:"Success",msg:"No error or warnings"}),t}},{key:"hide",value:function(){this.setState({hide:!0})}},{key:"show",value:function(){this.setState({hide:!1})}},{key:"hideLog",value:function(){this.setState({showLog:!1})}},{key:"showLog",value:function(){this.setState({showLog:!0})}},{key:"toggleLog",value:function(){this.state.showLog?this.hideLog():this.showLog()}},{key:"render",value:function(){const e=this.state.logMsgs.map(((e,t)=>{const n=`${t}-${e.msg}`;return i.createElement("tr",{key:n},i.createElement("td",{className:zg(pwe.title,pwe[e.type])},`[${t}] ${e.type}`),i.createElement("td",null,i.createElement("pre",null,e.msg)))}));return i.createElement(Hse,{cancelShortcut:"ESC",cancelTitle:"Discard Changes",hide:this.state.hide,maxHeight:!0,okayShortcut:"\u2318+Enter",okayTitle:"Save and Close",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Edit View Config"},i.createElement(i.Fragment,null,i.createElement("header",{className:pwe["view-config-editor-header"]},i.createElement(wse,{onBlur:this.showBound,onMouseDown:this.hideBound,onMouseOut:this.showBound,onMouseUp:this.showBound},"Hide While Mousedown"),i.createElement(wse,{onClick:()=>{this.props.onChange(this.state.code)},shortcut:"\u2318+S"},"Save")),i.createElement("div",{ref:e=>{this.editorWrap=e},className:pwe["view-config-editor"]},i.createElement(jTe,{ref:e=>{this.editor=e},highlight:e=>GTe.highlight(e,GTe.languages.json),onValueChange:this.handleChangeBound,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:"inherit"},value:this.state.code})),i.createElement("div",{className:pwe["view-config-log"],style:{height:this.state.showLog?"50%":"30px"}},i.createElement("div",{className:pwe["view-config-log-header"],onClick:()=>this.toggleLogBound()},`Log Messages (${this.state.logMsgs.filter((e=>"Success"!==e.type)).length})`),i.createElement("div",{className:pwe["view-config-log-msg"],style:{padding:this.state.showLog?"10px":0}},i.createElement("table",null,i.createElement("tbody",null,e))))))}}]),n}(i.Component);bwe.propTypes={modal:Ls.object.isRequired,onCancel:Ls.func.isRequired,onChange:Ls.func.isRequired,onSave:Ls.func.isRequired,pubSub:Ls.object.isRequired,viewConfig:Ls.string.isRequired};const _we=hQ(Cse(bwe));const Twe="_higlass-canvas_1uoq8_28",Ewe="_higlass-drawing-surface_1uoq8_34",Swe="_higlass-svg_1uoq8_38",wwe="_tiled-area_1uoq8_47",Awe="_track-mouseover-menu_1uoq8_52";function Owe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xwe(r.key),r)}}function xwe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function kwe(e,t){return(kwe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Iwe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Pwe(e);if(t){var i=Pwe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cwe(e)}(this,n)}}function Cwe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pwe(e){return(Pwe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Dwe="bounded",Rwe="overflow",Nwe="scroll";let Mwe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kwe(e,t)}(n,e);var t=Iwe(n);function n(e){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),r=t.call(this,e),AA(i.version)<15.6&&console.warn("HiGlass requires React v15.6 or higher. Current version: ",i.version),r.pubSub=jb(),r.domEvent=Sw(r.pubSub),r.pubSubs=[],r.minHorizontalHeight=20,r.minVerticalWidth=20,r.resizeSensor=null,r.uid=ag.nice(),r.tiledPlots={},r.genomePositionSearchBoxes={},r.xScales={},r.yScales={},r.projectionXDomains={},r.projectionYDomains={},r.topDiv=null,r.zoomToDataExtentOnInit=new Set,r.viewTrackUidsToCombinedUid={},r.combinedUidToViewTrack={},r.scalesChangedListeners={},r.draggingChangedListeners={},r.valueScalesChangedListeners={},r.zoomLocks={},r.locationLocks={},r.locationLocksAxisWise={x:{},y:{}},r.valueScaleLocks={},r.prevAuthToken=e.options.authToken,r.setCenters={},r.plusImg={},r.configImg={},nS.PIXI=e.options&&e.options.PIXI||ks,r.viewMarginTop=+e.options.viewMarginTop>=0?+e.options.viewMarginTop:0,r.viewMarginBottom=+e.options.viewMarginBottom>=0?+e.options.viewMarginBottom:0,r.viewMarginLeft=+e.options.viewMarginLeft>=0?+e.options.viewMarginLeft:0,r.viewMarginRight=+e.options.viewMarginRight>=0?+e.options.viewMarginRight:0,r.viewPaddingTop=+e.options.viewPaddingTop>=0?+e.options.viewPaddingTop:5,r.viewPaddingBottom=+e.options.viewPaddingBottom>=0?+e.options.viewPaddingBottom:5,r.viewPaddingLeft=+e.options.viewPaddingLeft>=0?+e.options.viewPaddingLeft:5,r.viewPaddingRight=+e.options.viewPaddingRight>=0?+e.options.viewPaddingRight:5,r.genomePositionSearchBox=null,r.viewHeaders={},r.boundRefreshView=()=>{r.refreshView($E)},r.unsetOnLocationChange=[],r.setTheme(e.options.theme,e.options.isDarkTheme),r.viewconfLoaded=!1;const{viewConfig:a}=r.props,s=r.loadIfRemoteViewConfig(r.props.viewConfig);e.options.authToken&&Mw(e.options.authToken),r.pixiRoot=new nS.PIXI.Container,r.pixiRoot.interactive=!0,r.pixiStage=new nS.PIXI.Container,r.pixiStage.interactive=!0,r.pixiRoot.addChild(r.pixiStage),r.pixiMask=new nS.PIXI.Graphics,r.pixiRoot.addChild(r.pixiMask),r.pixiStage.mask=r.pixiMask,r.element=null,r.scrollTop=0;let l=WE;if(r.props.options&&r.props.options.mouseTool===qE)l=qE;r.props.options.pluginTracks&&(window.higlassTracksByType=Object.assign(window.higlassTracksByType||{},r.props.options.pluginTracks));const c={};try{window.higlassTracksByType&&Object.entries(window.higlassTracksByType).forEach((e=>{let[t,n]=e;c[t]=n}))}catch{console.warn("Broken config of a plugin track")}r.props.options.pluginDataFetchers&&(window.higlassDataFetchersByType=Object.assign(window.higlassDataFetchersByType||{},r.props.options.pluginDataFetchers));const u=window.higlassDataFetchersByType,h=r.props.options.pixelPreciseMarginPadding?1:30;r.mounted=!1,r.pluginTracks=c,r.pluginDataFetchers=u,r.state={currentBreakpoint:"lg",width:0,height:0,rowHeight:h,svgElement:null,canvasElement:null,customDialog:null,views:s,viewConfig:a,addTrackPositionMenuPosition:null,typedEditable:void 0,mouseOverOverlayUid:null,mouseTool:l,isDarkTheme:!1,rangeSelection1dSize:[0,1/0],rangeSelectionToInt:!1,modal:null},r.attachedToDOM=!1;const{public:p,destroy:f,publish:d,stack:m}=function(e,t){const n=e;let r=[];const i=jb(),a=()=>{r.forEach((e=>t.unsubscribe(e))),r=[]};return{destroy:a,publish:i.publish,stack:i.stack,public:{get version(){return Ese},setBroadcastMousePositionGlobally(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setBroadcastMousePositionGlobally(e)},setShowGlobalMousePosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setShowGlobalMousePosition(e)},setGlobalMousePosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setBroadcastMousePositionGlobally(e),n.setShowGlobalMousePosition(e)},setAuthHeader(e){Mw(e),n.reload()},getAuthHeader:()=>Mw(),getComponent:()=>n,reload(e){let t;t=e?e.flatMap((e=>"string"==typeof e?n.iterateOverTracksInView(e):e)):n.iterateOverTracks();for(const{viewId:r,trackId:i}of t){const e=n.getTrackObject(r,i);for(const t of e.childTracks||[e])t.fetchedTiles&&(t.removeTiles(Object.keys(t.fetchedTiles)),t.fetching.clear(),t.refreshTiles()),t.rerender(t.options,!0)}},destroy(){a(),o.unmountComponentAtNode(n.topDiv.parentNode)},setRangeSelectionToInt(){n.setState({rangeSelectionToInt:!0})},setRangeSelectionToFloat(){n.setState({rangeSelectionToInt:!1})},setRangeSelection1dSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;n.setState({rangeSelection1dSize:[e,t]})},setViewConfig(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=n.processViewConfig(e);return new Promise((a=>{this.requestsInFlight=0,r.push(t.subscribe("requestSent",(()=>{this.requestsInFlight+=1}))),r.push(t.subscribe("requestReceived",(()=>{this.requestsInFlight-=1,0===this.requestsInFlight&&a()}))),n.setState({viewConfig:e,views:o},(()=>{i&&a()}))}))},getViewConfig:()=>n.getViewsAsJson(),validateViewConfig(e){let{verbose:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new uwe).compile(hwe),r=n(e);return t&&n.errors&&console.warn(JSON.stringify(n.errors,null,2)),r},getMinMaxValue(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.getMinMaxValue(e,t,r,i)},shareViewConfigAsLink:e=>n.handleExportViewsAsLink(e,!0),showAvailableTrackPositions(e){n.setState({draggingHappening:e})},hideAvailableTrackPositions(){n.setState({draggingHappening:null})},showTrackChooser(e){n.setState({chooseTrackHandler:function(){n.setState({chooseTrackHandler:null}),e(...arguments)}})},hideTrackChooser(){this.setState({chooseTrackHandler:null})},setTrackValueScaleLimits(e,t,r,i){n.setTrackValueScaleLimits(e,t,r,i)},setDarkTheme(e){console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');const t=e?"dark":"light";n.setTheme(t)},setTheme(e){console.warn("Please note that theming is still in beta!"),n.setTheme(e)},zoomTo(e,t,r,i,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n.zoomTo(e,t,r,i,o,a)},zoomToGene(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n.zoomToGene(e,t,r,i)},suggestGene:(e,t,r)=>n.suggestGene(e,t,r),zoomToDataExtent(e){n.handleZoomToData(e)},resetViewport(e){n.resetViewport(e)},activateTool(e){"select"===e?n.setMouseTool(qE):n.setMouseTool(WE)},exportAsPngBlobPromise:()=>n.createPNGBlobPromise(),exportAsSvg:()=>n.createSVGString(),exportAsViewConfString:()=>n.getViewsAsString(),getRangeSelection:()=>n.rangeSelection,getLocation(e){const t=e?n.xScales[e]&&n.yScales[e]&&e:Object.values(n.tiledPlots)[0]&&Object.values(n.tiledPlots)[0].props.uid;return t?{xDomain:n.xScales[t].domain(),yDomain:n.yScales[t].domain(),xRange:n.xScales[t].range(),yRange:n.yScales[t].range()}:"Please provide a valid view UUID sweetheart \ud83d\ude19"},getTrackObject(e,t){let r=e,i=t;return t||(r=Object.values(n.state.views)[0].uid,i=e),oO(n,r,i)},option(e,t){if(typeof t>"u")return n.props.options[e];"sizeMode"===e?(n.props.options[e]=t,(e=>{e.setState(e.state)})(n)):console.warn(`This option "${e}" is either unknown or not settable.`)},off(e,t,r){const o="object"==typeof t?t.callback:t;switch(e){case"click":i.unsubscribe("click",o);break;case"cursorLocation":i.unsubscribe("cursorLocation",o);break;case"location":n.offLocationChange(r,t);break;case"mouseMoveZoom":i.unsubscribe("mouseMoveZoom",o);break;case"wheel":i.unsubscribe("wheel",o);break;case"rangeSelection":i.unsubscribe("rangeSelection",o);break;case"viewConfig":n.offViewChange(t);break;case"createSVG":n.offPostCreateSVG();break;case"geneSearch":i.unsubscribe("geneSearch",o)}},on(e,t,r,o){switch(e){case"click":return i.subscribe("click",t);case"cursorLocation":return i.subscribe("cursorLocation",t);case"location":return n.onLocationChange(r,t,o);case"mouseMoveZoom":return i.subscribe("mouseMoveZoom",t);case"wheel":return i.subscribe("wheel",t);case"rangeSelection":return i.subscribe("rangeSelection",t);case"viewConfig":return n.onViewChange(t);case"createSVG":return n.onPostCreateSVG(t);case"geneSearch":return i.subscribe("geneSearch",t);default:return}}}}}(Cwe(r),r.pubSub);return r.api=p,r.apiDestroy=f,r.apiPublish=d,r.apiStack=m,r.viewChangeListener=[],r.triggerViewChangeDb=RS(r.triggerViewChange.bind(Cwe(r)),250),r.pubSubs=[],r.rangeSelection=[null,null],r.prevMouseHoverTrack=null,r.zooming=!1,r.appClickHandlerBound=r.appClickHandler.bind(Cwe(r)),r.canvasClickHandlerBound=r.canvasClickHandler.bind(Cwe(r)),r.keyDownHandlerBound=r.keyDownHandler.bind(Cwe(r)),r.keyUpHandlerBound=r.keyUpHandler.bind(Cwe(r)),r.resizeHandlerBound=r.resizeHandler.bind(Cwe(r)),r.resizeHandlerBound=r.resizeHandler.bind(Cwe(r)),r.dispatchEventBound=r.dispatchEvent.bind(Cwe(r)),r.animateOnMouseMoveHandlerBound=r.animateOnMouseMoveHandler.bind(Cwe(r)),r.zoomStartHandlerBound=r.zoomStartHandler.bind(Cwe(r)),r.zoomEndHandlerBound=r.zoomEndHandler.bind(Cwe(r)),r.zoomHandlerBound=r.zoomHandler.bind(Cwe(r)),r.trackDroppedHandlerBound=r.trackDroppedHandler.bind(Cwe(r)),r.trackDimensionsModifiedHandlerBound=r.trackDimensionsModifiedHandler.bind(Cwe(r)),r.animateBound=r.animate.bind(Cwe(r)),r.animateOnGlobalEventBound=r.animateOnGlobalEvent.bind(Cwe(r)),r.requestReceivedHandlerBound=r.requestReceivedHandler.bind(Cwe(r)),r.wheelHandlerBound=r.wheelHandler.bind(Cwe(r)),r.mouseMoveHandlerBound=r.mouseMoveHandler.bind(Cwe(r)),r.onMouseLeaveHandlerBound=r.onMouseLeaveHandler.bind(Cwe(r)),r.onBlurHandlerBound=r.onBlurHandler.bind(Cwe(r)),r.openModalBound=r.openModal.bind(Cwe(r)),r.closeModalBound=r.closeModal.bind(Cwe(r)),r.handleEditViewConfigBound=r.handleEditViewConfig.bind(Cwe(r)),r.onScrollHandlerBound=r.onScrollHandler.bind(Cwe(r)),r.typedText="",r.typedTextTimeout=null,r.modal={open:r.openModalBound,close:r.closeModalBound},r.setBroadcastMousePositionGlobally(r.props.options.broadcastMousePositionGlobally||r.props.options.globalMousePosition),r.setShowGlobalMousePosition(r.props.options.showGlobalMousePosition||r.props.options.globalMousePosition),r}return function(e,t,n){t&&Owe(e.prototype,t),n&&Owe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillMount",value:function(){this.domEvent.register("keydown",document),this.domEvent.register("keyup",document),this.domEvent.register("scroll",document),this.domEvent.register("resize",window),this.domEvent.register("orientationchange",window),this.domEvent.register("wheel",window),this.domEvent.register("mousedown",window,!0),this.domEvent.register("mouseup",window,!0),this.domEvent.register("click",window,!0),this.domEvent.register("mousemove",window),this.domEvent.register("touchmove",window),this.domEvent.register("touchstart",window),this.domEvent.register("touchend",window),this.domEvent.register("touchcancel",window),this.domEvent.register("blur",window),this.pubSubs.push(this.pubSub.subscribe("app.click",this.appClickHandlerBound),this.pubSub.subscribe("blur",this.onBlurHandlerBound),this.pubSub.subscribe("keydown",this.keyDownHandlerBound),this.pubSub.subscribe("keyup",this.keyUpHandlerBound),this.pubSub.subscribe("resize",this.resizeHandlerBound),this.pubSub.subscribe("wheel",this.wheelHandlerBound),this.pubSub.subscribe("orientationchange",this.resizeHandlerBound),this.pubSub.subscribe("app.event",this.dispatchEventBound),this.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandlerBound),this.pubSub.subscribe("trackDropped",this.trackDroppedHandlerBound),this.pubSub.subscribe("trackDimensionsModified",this.trackDimensionsModifiedHandlerBound),this.pubSub.subscribe("app.zoomStart",this.zoomStartHandlerBound),this.pubSub.subscribe("app.zoomEnd",this.zoomEndHandlerBound),this.pubSub.subscribe("app.zoom",this.zoomHandlerBound),this.pubSub.subscribe("requestReceived",this.requestReceivedHandlerBound)),this.props.getApi&&this.props.getApi(this.api)}},{key:"sizeMode",get:function(){return typeof this.props.options.sizeMode>"u"?this.props.options.bounded?"bounded":"default":this.props.options.sizeMode}},{key:"setBroadcastMousePositionGlobally",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isBroadcastMousePositionGlobally=e}},{key:"setShowGlobalMousePosition",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isShowGlobalMousePosition=e,this.isShowGlobalMousePosition&&!this.globalMousePositionListener&&(this.globalMousePositionListener=Fb.subscribe("higlass.mouseMove",this.animateOnGlobalEventBound),this.pubSubs.push(this.globalMousePositionListener)),this.isShowGlobalMousePosition&&!this.globalMousePositionListener){const e=this.pubSubs.findIndex((e=>e===this.globalMousePositionListener));Fb.unsubscribe(this.globalMousePositionListener),e>=0&&this.pubSubs.splice(e,1),this.globalMousePositionListener=void 0}}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(e){e.sourceEvent&&this.mouseMoveHandler(e.sourceEvent)}},{key:"waitForDOMAttachment",value:function(e){if(!this.mounted)return;const t=o.findDOMNode(this);document.body.contains(t)?e():requestAnimationFrame((()=>this.waitForDOMAttachment(e)))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=o.findDOMNode(this),window.addEventListener("focus",this.boundRefreshView),Object.values(this.state.views).forEach((e=>{this.adjustLayoutToTrackSizes(e),e.layout?e.layout.i=e.uid:e.layout=this.generateViewLayout(e)}));const e={width:this.state.width,height:this.state.height,view:this.canvasElement,antialias:!0,transparent:!0,resolution:2,autoResize:!0},t=parseInt(Os[0],10);4===t?(console.warn("Deprecation warning: please update Pixi.js to version 5 or above!"),"canvas"===this.props.options.renderer?this.pixiRenderer=new nS.PIXI.CanvasRenderer(e):this.pixiRenderer=new nS.PIXI.WebGLRenderer(e)):(t<4&&console.warn("Deprecation warning: please update Pixi.js to version 5 or above! This version of Pixi.js is unsupported. Good luck \ud83e\udd1e"),"canvas"===this.props.options.renderer?this.pixiRenderer=new nS.PIXI.CanvasRenderer(e):this.pixiRenderer=new nS.PIXI.Renderer(e)),this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment((()=>{ib.ElementQueries.listen(),this.resizeSensor=new ib.ResizeSensor(this.element.parentNode,this.updateAfterResize.bind(this)),this.updateAfterResize()})),this.handleDragStart(),this.handleDragStop(),this.animate();const n=ql(this.element).append("svg").style("display","none");iS.forEach((e=>function(e,t,n,r){const i=e.append("symbol").attr("id",t).attr("viewBox",r);n.forEach((e=>i.append("path").attr("d",e).attr("fill","currentColor")))}(n,e.id,e.paths,e.viewBox)))}},{key:"getTrackObject",value:function(e,t){return this.tiledPlots[e].trackRenderer.getTrackObject(t)}},{key:"getTrackRenderer",value:function(e){return this.tiledPlots[e].trackRenderer}},{key:"loadIfRemoteViewConfig",value:function(e){let t={};return"string"==typeof e?Fw.json(e,((t,n)=>{e=n,this.setState({views:this.processViewConfig(JSON.parse(JSON.stringify(n))),viewConfig:n}),this.unsetOnLocationChange.forEach((e=>{let{viewId:t,callback:n,callbackId:r}=e;this.onLocationChange(t,n,r)}))}),this.pubSub):(t=this.processViewConfig(JSON.parse(JSON.stringify(e))),this.mounted&&this.setState({viewConfig:e})),t}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){const t=this.loadIfRemoteViewConfig(e.viewConfig);if(e.options.authToken!==this.prevAuthToken){Mw(e.options.authToken);for(const e of this.iterateOverViews()){const t=this.getTrackRenderer(e),n=JSON.parse(t.prevTrackDefinitions);t.syncTrackObjects([]),t.syncTrackObjects(n)}this.prevAuthToken=e.options.authToken}for(const n of BS(t))this.adjustLayoutToTrackSizes(n);this.setState({views:t})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.pixiRenderer.render(this.pixiRoot)}},{key:"componentDidUpdate",value:function(){this.setTheme(this.props.options.theme,this.props.options.isDarkTheme),this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),this.domEvent.unregister("keydown",document),this.domEvent.unregister("keyup",document),this.domEvent.unregister("scroll",document),this.domEvent.unregister("wheel",window),this.domEvent.unregister("mousedown",window),this.domEvent.unregister("mouseup",window),this.domEvent.unregister("click",window),this.domEvent.unregister("mousemove",window),this.domEvent.unregister("touchmove",window),this.domEvent.unregister("touchstart",window),this.domEvent.unregister("touchend",window),this.domEvent.unregister("touchcancel",window),this.pubSubs.forEach((e=>this.pubSub.unsubscribe(e))),this.pubSubs=[],this.apiDestroy()}},{key:"setTheme",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.options.theme,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.options.isDarkTheme;if(typeof t<"u")console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."),this.theme=t?"dark":"light";else switch(e){case"dark":this.theme=eS;break;case"light":case void 0:this.theme=JE;break;default:console.warn(`Unknown theme "${e}". Using light theme.`),this.theme=JE}}},{key:"dispatchEvent",value:function(e){this.canvasElement&&zS(e,this.canvasElement)}},{key:"trackDroppedHandler",value:function(){this.setState({draggingHappening:null})}},{key:"requestReceivedHandler",value:function(){!this.viewconfLoaded&&0===Rw&&(this.viewconfLoaded=!0,this.props.options.onViewConfLoaded&&this.props.options.onViewConfLoaded())}},{key:"animateOnMouseMoveHandler",value:function(e){e&&!this.animateOnMouseMove&&this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.animateBound)),this.animateOnMouseMove=e}},{key:"fitPixiToParentContainer",value:function(){if(!this.element||!this.element.parentNode)return void console.warn("No parentNode:",this.element);const e=this.element.parentNode.clientWidth,t=this.element.parentNode.clientHeight;this.pixiMask.beginFill(16777215).drawRect(0,0,e,t).endFill(),this.pixiRenderer.resize(e,t),this.pixiRenderer.view.style.width=`${e}px`,this.pixiRenderer.view.style.height=`${t}px`,this.pixiRenderer.render(this.pixiRoot)}},{key:"addDefaultTrackOptions",value:function(e){const t=this.getTrackInfo(e.type);if(!t)return;typeof e.options>"u"&&(e.options={});const n=e.options?e.options:{};if(this.props.options.defaultTrackOptions){if(this.props.options.defaultTrackOptions.trackSpecific&&this.props.options.defaultTrackOptions.trackSpecific[e.type]){const t=this.props.options.defaultTrackOptions.trackSpecific[e.type];for(const n in t)e.options[n]=typeof e.options[n]<"u"?e.options[n]:JSON.parse(JSON.stringify(t[n]))}if(this.props.options.defaultTrackOptions.all){const t=this.props.options.defaultTrackOptions.all;for(const n in t)e.options[n]=typeof e.options[n]<"u"?e.options[n]:JSON.parse(JSON.stringify(t[n]))}}if(t.defaultOptions){const n=t.defaultOptionsByTheme&&t.defaultOptionsByTheme[this.theme]?t.defaultOptionsByTheme[this.theme]:{},r={...t.defaultOptions,...n};if(e.options)for(const t in r)e.options[t]=typeof e.options[t]<"u"?e.options[t]:JSON.parse(JSON.stringify(r[t]));else e.options=JSON.parse(JSON.stringify(r))}else e.options=n}},{key:"toggleTypedEditable",value:function(){this.setState({typedEditable:!this.isEditable()})}},{key:"typedTextHandler",value:function(e){if(!this.props.options.cheatCodesEnabled)return;this.typedText=this.typedText.concat(e.key),this.typedText.endsWith("hgedit")&&(this.toggleTypedEditable(),this.typedText="");this.typedTextTimeout&&clearTimeout(this.typedTextTimeout),this.typedTextTimeout=setTimeout((()=>{this.typedText=""}),750)}},{key:"keyDownHandler",value:function(e){this.typedTextHandler(e),this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:qE})}},{key:"keyUpHandler",value:function(e){this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:WE})}},{key:"openModal",value:function(e){this.setState({modal:i.cloneElement(e,{ref:e=>{this.modalRef=e}})})}},{key:"closeModal",value:function(){this.modalRef=null,this.setState({modal:null})}},{key:"handleEditViewConfig",value:function(){const{viewConfig:e}=this.state;this.setState({viewConfigTmp:e}),this.openModal(i.createElement(_we,{onCancel:()=>{const{viewConfigTmp:e}=this.state,t=this.processViewConfig(e);for(const n of BS(t))this.adjustLayoutToTrackSizes(n);this.setState({views:t,viewConfig:e,viewConfigTmp:null})},onChange:e=>{const t=JSON.parse(e),n=this.processViewConfig(t);for(const r of BS(n))this.adjustLayoutToTrackSizes(r);this.setState({views:n,viewConfig:t})},onSave:e=>{const t=JSON.parse(e),n=this.processViewConfig(t);for(const r of BS(n))this.adjustLayoutToTrackSizes(r);this.setState({views:n,viewConfig:t,viewConfigTmp:null})},viewConfig:this.getViewsAsString()}))}},{key:"animate",value:function(){this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame((()=>{this.pixiRenderer&&(this.pixiRenderer.render(this.pixiRoot),this.isRequestingAnimationFrame=!1)})))}},{key:"animateOnGlobalEvent",value:function(){let{sourceUid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==this.uid&&this.animateOnMouseMove&&this.animate()}},{key:"measureSize",value:function(){const[e,t]=Hw(this.element);e>0&&t>0&&this.setState({sizeMeasured:!0,width:e,height:t})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView($E),this.resizeHandler()}},{key:"onBreakpointChange",value:function(e){this.setState({currentBreakpoint:e})}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(e){this.setState({chooseViewHandler:t=>this.handleLocationLockChosen(e,t),mouseOverOverlayUid:e})}},{key:"isEditable",value:function(){return void 0!==this.state.typedEditable?this.state.typedEditable:this.props.options&&"editable"in this.props.options?this.props.options.editable&&this.state.viewConfig.editable:this.state.viewConfig.editable}},{key:"isTrackMenuDisabled",value:function(){return!(!this.props.options||!1!==this.props.options.editable&&!1!==this.props.options.tracksEditable)||this.state.viewConfig&&(!1===this.state.viewConfig.tracksEditable||!1===this.state.viewConfig.editable)}},{key:"isViewHeaderDisabled",value:function(){return!(!this.props.options||!1!==this.props.options.editable&&!1!==this.props.options.viewEditable)||this.state.viewConfig&&(!1===this.state.viewConfig.viewEditable||!1===this.state.viewConfig.editable)}},{key:"iterateOverViews",value:function(){const e=[];for(const t in Object.keys(this.state.views))e.push(t);return e}},{key:"iterateOverTracksInView",value:function(e){const t=[],{tracks:n}=this.state.views[e];for(const r in n)for(const i of n[r])if("combined"===i.type&&i.contents)for(const n of i.contents)t.push({viewId:e,trackId:n.uid,track:n});else t.push({viewId:e,trackId:i.uid,track:i});return t}},{key:"iterateOverTracks",value:function(){const e=[];for(const t in this.state.views){const{tracks:n}=this.state.views[t];for(const r in n)for(const i of n[r])if("combined"===i.type&&i.contents)for(const n of i.contents)e.push({viewId:t,trackId:n.uid,track:n});else e.push({viewId:t,trackId:i.uid,track:i})}return e}},{key:"setMouseTool",value:function(e){this.setState({mouseTool:e})}},{key:"isValueScaleLocked",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);return!!this.state.views[e]&&!!this.valueScaleLocks[n]}},{key:"getLockGroupExtrema",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);if(!this.state.views[e]||!this.valueScaleLocks[n])return null;const r=this.valueScaleLocks[n],i=Object.values(r).filter((e=>this.tiledPlots[e.view])).map((e=>this.tiledPlots[e.view].trackRenderer.getTrackObject(e.track))).filter((e=>e)).map((e=>void 0===e.originalTrack?e:e.originalTrack)),o=i.filter((e=>e.minRawValue&&e.maxRawValue)).map((e=>r.ignoreOffScreenValues?e.minVisibleValue(!0):e.minVisibleValueInTiles(!0))),a=i.filter((e=>e.minRawValue&&e.maxRawValue)).map((e=>r.ignoreOffScreenValues?e.maxVisibleValue(!0):e.maxVisibleValueInTiles(!0)));if(0===o.length||o.filter((e=>null===e||e===1/0)).length>0||0===a.length||a.filter((e=>null===e||e===-1/0)).length>0)return null;return[Math.min(...o),Math.max(...a)]}},{key:"syncValueScales",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);if(!this.state.views[e])return;const r=Uw(this.state.views[e].tracks,t);if(this.valueScaleLocks[n]){const i=this.valueScaleLocks[n],o=Object.values(i).filter((e=>this.tiledPlots[e.view])).map((e=>this.tiledPlots[e.view].trackRenderer.getTrackObject(e.track))).filter((e=>e)).map((e=>void 0===e.originalTrack?e:e.originalTrack)),a=this.getLockGroupExtrema(e,t);if(null===a)return;const s=a[0],l=a[1],c=1e-6;for(const e of o){if(e.minValue&&e.minValue(s),e.maxValue&&e.maxValue(l),!e.valueScale)continue;const t=Math.abs(e.minValue()-e.valueScale.domain()[0])>c||Math.abs(e.maxValue()-e.valueScale.domain()[1])>c,n=r.options&&e.options&&typeof r.options.scaleStartPercent<"u"&&typeof r.options.scaleEndPercent<"u"&&(Math.abs(e.options.scaleStartPercent-r.options.scaleStartPercent)>c||Math.abs(e.options.scaleEndPercent-r.options.scaleEndPercent)>c);e.continuousScaling&&!t&&!n||(e.valueScale.domain([s,l]),e.prevValueScale=e.valueScale.copy(),n&&(e.options.scaleStartPercent=r.options.scaleStartPercent,e.options.scaleEndPercent=r.options.scaleEndPercent),e.rerender(e.options,!0))}}}},{key:"handleNewTilesLoaded",value:function(e,t){this.animate()}},{key:"notifyDragChangedListeners",value:function(e){BS(this.draggingChangedListeners).forEach((t=>{BS(t).forEach((t=>t(e)))}))}},{key:"addDraggingChangedListener",value:function(e,t,n){this.draggingChangedListeners.hasOwnProperty(e)||(this.draggingChangedListeners[e]={}),this.draggingChangedListeners[e][t]=n,n(!0),n(!1)}},{key:"removeDraggingChangedListener",value:function(e,t){if(this.draggingChangedListeners.hasOwnProperty(e)){const n=this.draggingChangedListeners[e];n.hasOwnProperty(t)&&(n[t](!1),delete n[t])}}},{key:"addScalesChangedListener",value:function(e,t,n){this.scalesChangedListeners[e]||(this.scalesChangedListeners[e]={}),this.scalesChangedListeners[e][t]=n,this.xScales[e]&&this.yScales[e]&&n(this.xScales[e],this.yScales[e])}},{key:"removeScalesChangedListener",value:function(e,t){if(this.scalesChangedListeners[e]){const n=this.scalesChangedListeners[e];n[t]&&delete n[t]}}},{key:"createSVG",value:function(){const e=document.createElement("svg");e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("version","1.1");for(const t of BS(this.tiledPlots))if(t)for(const n of BS(t.trackRenderer.trackDefObjects))if(n.trackObject.exportSVG){const t=n.trackObject.exportSVG();t&&e.appendChild(t[0])}return e.setAttribute("width",this.canvasElement.style.width),e.setAttribute("height",this.canvasElement.style.height),this.postCreateSVGCallback?this.postCreateSVGCallback(e):e}},{key:"createSVGString",value:function(){const e=this.createSVG();let t=cb.xml((new window.XMLSerializer).serializeToString(e));return t=t.replace(/<a0:/g,"<"),t=t.replace(/<\/a0:/g,"</"),t=t.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm,"$1"),t=t.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm,"$1"),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n${t}`}},{key:"handleExportSVG",value:function(){FS("export.svg",new Blob([this.createSVGString()],{type:"image/svg+xml"}))}},{key:"offPostCreateSVG",value:function(){this.postCreateSVGCallback=null}},{key:"onPostCreateSVG",value:function(e){this.postCreateSVGCallback=e}},{key:"createPNGBlobPromise",value:function(){return new Promise((e=>{const t=this.createSVGString(),n=new Image(this.canvasElement.width,this.canvasElement.height);n.src=`data:image/svg+xml;base64,${btoa(t)}`,n.onload=()=>{const t=document.createElement("canvas");t.width=this.canvasElement.width/2,t.height=this.canvasElement.height/2,t.getContext("2d").drawImage(n,0,0),t.toBlob((t=>{e(t)}))}}))}},{key:"handleExportPNG",value:function(){this.createPNGBlobPromise().then((e=>{FS("export.png",e)}))}},{key:"handleScalesChanged",value:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.xScales[e]=t,this.yScales[e]=n,r&&e in this.scalesChangedListeners&&BS(this.scalesChangedListeners[e]).forEach((e=>{e(t,n)})),this.zoomLocks[e]){const t=this.zoomLocks[e],n=LS(t),[r,i,o]=PA(this.xScales[e],this.yScales[e]);for(let a=0;a<n.length;a++){const r=n[a][0],i=n[a][1];if(!this.xScales[r]||!this.yScales[r]||r===e)continue;const[s,l,c]=PA(this.xScales[r],this.yScales[r]),u=o*(i[2]/t[e][2]);if(!this.setCenters[r])continue;const[h,p]=this.setCenters[r](s,l,u,!1);this.xScales[r]=h,this.yScales[r]=p,this.scalesChangedListeners.hasOwnProperty(r)&&BS(this.scalesChangedListeners[r]).forEach((e=>{e(h,p)}))}}if(this.locationLocks[e]){const t=this.locationLocks[e],n=LS(t),[r,i,o]=PA(this.xScales[e],this.yScales[e]);for(let a=0;a<n.length;a++){const o=n[a][0],s=n[a][1];if(!this.xScales[o]||!this.yScales[o])continue;const[l,c,u]=PA(this.xScales[o],this.yScales[o]);if(o===e)continue;const h=r+(s[0]-t[e][0]),p=i+(s[1]-t[e][1]);if(!this.setCenters[o])continue;const[f,d]=this.setCenters[o](h,p,u,!1);this.xScales[o]=f,this.yScales[o]=d,this.scalesChangedListeners.hasOwnProperty(o)&&BS(this.scalesChangedListeners[o]).forEach((e=>{e(f,d)}))}}if(this.locationLocksAxisWise.x[e]){const t=this.locationLocksAxisWise.x[e].lock,n=LS(t),r="x"!==this.locationLocksAxisWise.x[e].axis,[i,o,a]=PA(this.xScales[e],this.yScales[e]);for(let s=0;s<n.length;s++){const o=n[s][0],a=n[s][1];if(!this.xScales[o]||!this.yScales[o])continue;const[l,c,u]=PA(this.xScales[o],this.yScales[o]);if(o===e)continue;const h=i+(a[0]-t[e][0]);if(!this.setCenters[o])continue;const[p,f]=this.setCenters[o](r?l:h,r?h:c,u,!1);this.xScales[o]=p,this.yScales[o]=f,this.scalesChangedListeners.hasOwnProperty(o)&&BS(this.scalesChangedListeners[o]).forEach((e=>{e(p,f)}))}}if(this.locationLocksAxisWise.y[e]){const t=this.locationLocksAxisWise.y[e].lock,n=LS(t),r="y"!==this.locationLocksAxisWise.y[e].axis,[i,o,a]=PA(this.xScales[e],this.yScales[e]);for(let s=0;s<n.length;s++){const i=n[s][0],a=n[s][1];if(!this.xScales[i]||!this.yScales[i])continue;const[l,c,u]=PA(this.xScales[i],this.yScales[i]);if(i===e)continue;const h=o+(a[1]-t[e][1]);if(!this.setCenters[i])continue;const[p,f]=this.setCenters[i](r?h:l,r?c:h,u,!1);this.xScales[i]=p,this.yScales[i]=f,this.scalesChangedListeners.hasOwnProperty(i)&&BS(this.scalesChangedListeners[i]).forEach((e=>{e(p,f)}))}}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(e){this.setState({chooseTrackHandler:(t,n)=>this.handleViewportProjected(e,t,n)})}},{key:"handleZoomToData",value:function(e){if(e&&!this.tiledPlots[e])throw new Error(`View uid ${e} does not exist in the current viewConfig`);e?this.tiledPlots[e].handleZoomToData():Object.values(this.tiledPlots).forEach((e=>e.handleZoomToData()))}},{key:"resetViewport",value:function(e){if(e&&!this.tiledPlots[e])throw new Error(`View uid ${e} does not exist in the current viewConfig`);e?this.tiledPlots[e].resetViewport():Object.values(this.tiledPlots).forEach((e=>e.resetViewport()))}},{key:"handleYankFunction",value:function(e,t){this.setState({chooseViewHandler:n=>t(e,n),mouseOverOverlayUid:e})}},{key:"handleUnlock",value:function(e,t){const n=jS(t[e]);if(2===n.length)return delete t[n[0]],void delete t[n[1]];t[e]&&t[e][e]&&delete t[e][e],t[e]&&delete t[e]}},{key:"viewScalesLockData",value:function(e){return this.xScales[e]&&this.yScales[e]?PA(this.xScales[e],this.yScales[e]):(console.warn("View scale lock doesn't correspond to existing uid: ",e),null)}},{key:"addLock",value:function(e,t,n,r){let i=[],o=[];i=n[e]?LS(n[e]).filter((e=>r(e[0]))).map((e=>[e[0],r(e[0])])):[[e,r.bind(this)(e)]],o=n[t]?LS(n[t]).filter((e=>r.bind(this)(e[0]))).map((e=>[e[0],r.bind(this)(e[0])])):[[t,r.bind(this)(t)]];const a=i.concat(o),s=MS(a);a.forEach((e=>{n[e[0]]=s}))}},{key:"handleLocationLockChosen",value:function(e,t){e!==t?(this.addLock(e,t,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})):this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(e,t){e!==t?(this.addLock(e,t,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})):this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(e,t,n){let r=null;if(e===t)console.warn("A view can not show its own viewport.");else{const i=Uw(this.state.views[t].tracks,n),o=qw(this.state.views[t].tracks,n);r=ag.nice();const a={uid:r,type:`viewport-projection-${{top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[o]}`,fromViewUid:e};this.addCallbacks(t,a),this.handleTrackAdded(t,a,o,i)}return this.setState({chooseTrackHandler:null}),r}},{key:"handleLocationYanked",value:function(e,t){const n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],[a,s,l]=PA(i,o),[c,u,h]=PA(n,r);this.setCenters[e](c,u,l,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(e,t){const n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],[a,s,l]=PA(i,o),[c,u,h]=PA(n,r);this.setCenters[e](a,s,h,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(e,t){this.setState({addTrackPosition:t,addTrackPositionView:e})}},{key:"updateRowHeight",value:function(){if(!this.props.options||this.sizeMode!==Dwe||this.props.options.pixelPreciseMarginPadding)return;const e=this.element.parentNode.clientHeight;let t=0;for(const i of BS(this.state.views))t=Math.max(t,i.layout.y+i.layout.h);this.handleDragStart(),this.handleDragStop();const n=(e-((this.isEditable()?10:0)*t-1))/t,r=Math.floor(n);this.setState({rowHeight:r})}},{key:"handleLayoutChange",value:function(e){this.element&&(e.forEach((e=>{const t=this.state.views[e.i];t&&(t.layout.x=e.x,t.layout.y=e.y,t.layout.w=e.w,t.layout.h=e.h,t.layout.i=e.i)})),this.updateRowHeight(),this.refreshView($E))}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(e){return AS[e]?AS[e]:this.pluginTracks&&this.pluginTracks[e]?this.pluginTracks[e].config:window.higlassTracksByType&&window.higlassTracksByType[e]?window.higlassTracksByType[e].config:void console.warn("Track type not found:",e,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:110;this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout((()=>{this.notifyDragChangedListeners(!1)}),e)}},{key:"handleDragStart",value:function(){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){this.clearDragTimeout(),this.dragTimeout=setTimeout((()=>{this.notifyDragChangedListeners(!1)}),$E)}},{key:"resizeHandler",value:function(){aA(this.viewHeaders).filter((e=>e)).forEach((e=>e.checkWidth()))}},{key:"calculateViewDimensions",value:function(e){let t=this.viewMarginTop+this.viewMarginBottom+this.viewPaddingTop+this.viewPaddingBottom,n=this.viewMarginLeft+this.viewMarginRight+this.viewPaddingLeft+this.viewPaddingRight,r=0;r+=10;if(e.tracks.top)for(let f=0;f<e.tracks.top.length;f++){const n=e.tracks.top[f];t+=n.height?n.height:20,r+=n.height?n.height:20}if(e.tracks.bottom)for(let f=0;f<e.tracks.bottom.length;f++){const n=e.tracks.bottom[f];t+=n.height?n.height:20,r+=n.height?n.height:20}(e.tracks.left&&e.tracks.left.length>0||e.tracks.right&&e.tracks.right.length>0||e.tracks.center&&e.tracks.center.length>0)&&(r+=20);let i=0;if(e.tracks.left)for(let f=0;f<e.tracks.left.length;f++){const t=e.tracks.left[f],r=t.height?t.height:100;n+=t.width?t.width:0,i=Math.max(i,r)}let o=0;if(e.tracks.right)for(let f=0;f<e.tracks.right.length;f++){const t=e.tracks.right[f],r=t.height?t.height:100;n+=t.width?t.width:0,o=Math.max(o,r)}const a=Math.max(i,o);let s=0,l=0;if(e.tracks.center&&BS(e.tracks.center).length>0){if(!e.tracks.center[0].contents||e.tracks.center[0].contents.length>0){let r=null,i=null;if(e.tracks.center[0].contents)for(const t of e.tracks.center[0].contents)r=Math.max(r,t.height?t.height:100),i=Math.max(i,t.width?t.width:100);else r=e.tracks.center[0].height?e.tracks.center[0].height:100,i=e.tracks.center[0].width?e.tracks.center[0].width:100;t+=r,n+=i}}else(e.tracks.top&&BS(e.tracks.top).length>1||e.tracks.bottom&&BS(e.tracks.bottom).length>1)&&(e.tracks.left&&BS(e.tracks.left).length||e.tracks.right&&BS(e.tracks.right).length)&&(l=100,s=100);t+=a>s?a:s;let c=0,u=0,h=0,p=0;return"top"in e.tracks&&(c=e.tracks.top.map((e=>e.height?e.height:20)).reduce(((e,t)=>e+t),0)),"bottom"in e.tracks&&(u=e.tracks.bottom.map((e=>e.height?e.height:20)).reduce(((e,t)=>e+t),0)),"left"in e.tracks&&(h=e.tracks.left.map((e=>e.width?e.width:0)).reduce(((e,t)=>e+t),0)),"right"in e.tracks&&(p=e.tracks.right.map((e=>e.width?e.width:0)).reduce(((e,t)=>e+t),0)),{totalWidth:n,totalHeight:t,topHeight:c,bottomHeight:u,leftWidth:h,rightWidth:p,centerWidth:l,centerHeight:s,minNecessaryHeight:r}}},{key:"calculateZoomLimits",value:function(e,t){const n=[0,1/0],r=e.zoomLimits||[1,null],i=t[1]-t[0];if(2!==r.length)return n;if(null!==r[0]&&r[0]>0){const e=i/r[0];n[1]=Math.max(e,1),e<1&&console.warn(`Invalid zoom limits. Lower limit set to ${i}`)}if(null!==r[1]&&r[1]>r[0]){const e=i/r[1];n[0]=Math.min(e,1),e>1&&console.warn(`Invalid zoom limits. Upper limit set to ${i}`)}return n}},{key:"generateViewLayout",value:function(e){let t=null;return"layout"in e?({layout:t}=e.layout):t={x:0,y:0,w:12,h:12},t}},{key:"handleClearView",value:function(e){const{views:t}=this.state;t[e].tracks.top=[],t[e].tracks.bottom=[],t[e].tracks.center=[],t[e].tracks.left=[],t[e].tracks.right=[],t[e].tracks.whole=[],this.setState({views:t})}},{key:"handleCloseView",value:function(e){1!==BS(this.state.views).length&&(this.handleUnlock(e,this.zoomLocks),this.setState((t=>(delete t.views[e],{views:this.removeInvalidTracks(t.views)}))))}},{key:"handleSeriesAdded",value:function(e,t,n,r){const{tracks:i}=this.state.views[e];if("combined"===r.type)r.contents.push(t),"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,r);else{const e={type:"combined",uid:ag.nice(),height:r.height,width:r.width,contents:[r,t]},o=i[n];for(let t=0;t<o.length;t++)o[t].uid===r.uid&&(o[t]=e)}this.setState((e=>({views:e.views})))}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null})}},{key:"handleTracksAdded",value:function(e,t,n,r){this.storeTrackSizes(e);for(const i of t)this.handleTrackAdded(e,i,n,r)}},{key:"handleChangeTrackType",value:function(e,t,n){const r=this.state.views[e],i=Uw(r.tracks,t),o=i.uid;i.uid=ag.nice(),i.type=n;const a=i.uid;this.updateTrackLocks(e,o,a),this.setState((e=>({views:e.views})))}},{key:"handleChangeTrackData",value:function(e,t,n){const r=this.state.views[e],i=Uw(r.tracks,t);i.uid=ag.nice(),i.data=n,this.setState((e=>({views:e.views})))}},{key:"handleTrackAdded",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.addDefaultTrackOptions(t),t.uid||(t.uid=ag.nice()),t.contents)for(const s of t.contents)this.addDefaultTrackOptions(s);if(this.state.addTrackPosition&&this.setState({addTrackPosition:null}),r)return this.handleSeriesAdded(e,t,n,r),null;t.position=n;const i=this.getTrackInfo(t.type);t.width=i.defaultWidth||i.defaultOptions&&i.defaultOptions.minWidth||this.minVerticalWidth,t.height=i.defaultHeight||i.defaultOptions&&i.defaultOptions.minHeight||this.minHorizontalHeight;const{tracks:o}=this.state.views[e];let a=0;if(Ww(o,(()=>a++)),"left"===n||"top"===n)o[n].unshift(t);else if("center"===n)if(0===o.center.length){const e={uid:ag.nice(),type:"combined",contents:[t]};o.center=[e]}else if("combined"===o.center[0].type)o.center[0].contents.push(t),"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,o.center[0]);else{const e={uid:ag.nice(),type:"combined",contents:[o.center[0],t]};o.center=[e],"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,e)}else o[n]||(o[n]=[]),o[n].push(t);return this.adjustLayoutToTrackSizes(this.state.views[e]),1===Object.keys(this.state.views).length&&0===a&&(this.handleZoomToData(e),this.zoomToDataExtentOnInit.add(e)),t}},{key:"compatibilityfyStackedHeatmaps",value:function(e,t){let n;t.contents.some((e=>(n=e,"heatmap"===e.type)))&&(e.options.backgroundColor="transparent",e.options.showTooltip=n.options.showTooltip,e.options.showMousePosition=n.options.showMousePosition,e.options.mousePositionColor=n.options.mousePositionColor)}},{key:"storeTrackSizes",value:function(e){Ww(this.state.views[e].tracks,(t=>{const n=this.tiledPlots[e].trackRenderer.getTrackObject(t.uid);n&&([t.width,t.height]=n.dimensions)}))}},{key:"adjustLayoutToTrackSizes",value:function(e){if(!e.layout)return;let t=0;this.isEditable()&&(t+=20);const{totalHeight:n}=this.calculateViewDimensions(e);t+=n;const r=this.isEditable()?10:0;t+=r;const i=this.state.rowHeight+r;this.sizeMode!==Dwe&&(e.layout.h=Math.ceil(t/i))}},{key:"handleCloseTrack",value:function(e,t){const{tracks:n}=this.state.views[e];this.handleUnlockValueScale(e,t);for(const r in n){const e=n[r],i=e.filter((e=>e.uid!==t));i.length===e.length?i.filter((e=>"combined"===e.type)).forEach((e=>{e.contents=e.contents.filter((e=>e.uid!==t))})):n[r]=i}return this.storeTrackSizes(e),this.adjustLayoutToTrackSizes(this.state.views[e]),this.setState((e=>({views:e.views}))),this.state.views}},{key:"handleLockValueScale",value:function(e,t){this.setState({chooseTrackHandler:(n,r)=>this.handleValueScaleLocked(e,t,n,r)})}},{key:"combineViewAndTrackUid",value:function(e,t){const n=`${e}.${t}`;if(this.combinedUidToViewTrack[n]={view:e,track:t},this.viewTrackUidsToCombinedUid[e]){if(this.viewTrackUidsToCombinedUid[t])return this.viewTrackUidsToCombinedUid[e][t];this.viewTrackUidsToCombinedUid[e][t]=n}else this.viewTrackUidsToCombinedUid[e]={},this.viewTrackUidsToCombinedUid[e][t]=n;return n}},{key:"updateTrackLocks",value:function(e,t,n){const r=this.combineViewAndTrackUid(e,t),i=this.combineViewAndTrackUid(e,n);if(this.valueScaleLocks[r]){const e=this.valueScaleLocks[r];this.valueScaleLocks[i]=e,delete this.valueScaleLocks[r]}for(const o in this.valueScaleLocks)if(this.valueScaleLocks[o][r]){const e=this.valueScaleLocks[o][r];this.valueScaleLocks[o][i]=e,e.track=n,delete this.valueScaleLocks[o][r]}}},{key:"handleUnlockValueScale",value:function(e,t){if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){const n=jS(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks);for(const t of n)this.handleUnlock(this.combineViewAndTrackUid(e,t),this.valueScaleLocks)}else this.handleUnlock(this.combineViewAndTrackUid(e,t),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(e,t,n,r){if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){const i=jS(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks);for(const t of i)this.handleValueScaleLocked(e,t,n,r);return}if(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks){const i=jS(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks);for(const r of i)this.handleValueScaleLocked(e,t,n,r);return}const i=this.combineViewAndTrackUid(e,t),o=this.combineViewAndTrackUid(n,r);this.addLock(i,o,this.valueScaleLocks,(e=>this.combinedUidToViewTrack[e])),this.syncValueScales(e,t),this.setState({chooseTrackHandler:null})}},{key:"addCallbacks",value:function(e,t){const n=this.getTrackInfo(t.type);if("viewport-projection-center"===t.type||"viewport-projection-horizontal"===t.type||"viewport-projection-vertical"===t.type||n&&n.projection){const n=t.fromViewUid;t.registerViewportChanged=(e,t)=>this.addScalesChangedListener(n,e,t),t.removeViewportChanged=e=>this.removeScalesChangedListener(n,e),t.setDomainsCallback=(r,i)=>{if(!n)return this.projectionXDomains[e]||(this.projectionXDomains[e]={}),this.projectionYDomains[e]||(this.projectionYDomains[e]={}),("viewport-projection-horizontal"===t.type||"viewport-projection-center"===t.type)&&(this.projectionXDomains[e][t.uid]=r),("viewport-projection-vertical"===t.type||"viewport-projection-center"===t.type)&&(this.projectionYDomains[e][t.uid]=i),void this.triggerViewChangeDb();const o=Fp().domain(r).range(this.xScales[n].range()),a=Fp().domain(i).range(this.yScales[n].range()),[s,l,c]=PA(o,a);this.setCenters[n](s,l,c,!1);let u=!1,h=!1;e in this.zoomLocks&&(u=n in this.zoomLocks[e]),u&&this.handleUnlock(e,this.zoomLocks),e in this.locationLocks&&(h=n in this.locationLocks[e]),h&&this.handleUnlock(e,this.locationLocks),this.handleScalesChanged(n,o,a,!0),u&&this.addLock(e,n,this.zoomLocks,this.viewScalesLockData),h&&this.addLock(e,n,this.locationLocks,this.viewScalesLockData)}}}},{key:"validateLocks",value:function(e){const t=[];for(const n of jS(e))(!e[n]||!e[n][n])&&t.push(n);for(const n of t)e[n]&&(console.warn(`View ${n} not present in lock group. Removing...`),this.handleUnlock(n,e),delete e[n])}},{key:"deserializeLocationLocks",value:function(e){if(this.locationLocks={},e.locationLocks)for(const t of jS(e.locationLocks.locksByViewUid))if("object"!=typeof e.locationLocks.locksByViewUid[t])this.locationLocks[t]=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t]];else{if("x"in e.locationLocks.locksByViewUid[t]){const n=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t].x.lock];this.locationLocksAxisWise.x[t]={lock:n,axis:e.locationLocks.locksByViewUid[t].x.axis}}if("y"in e.locationLocks.locksByViewUid[t]){const n=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t].y.lock];this.locationLocksAxisWise.y[t]={lock:n,axis:e.locationLocks.locksByViewUid[t].y.axis}}}this.validateLocks(this.locationLocks)}},{key:"deserializeZoomLocks",value:function(e){if(this.zoomLocks={},e.zoomLocks)for(const t of jS(e.zoomLocks.locksByViewUid))this.zoomLocks[t]=e.zoomLocks.locksDict[e.zoomLocks.locksByViewUid[t]];this.validateLocks(this.zoomLocks)}},{key:"deserializeValueScaleLocks",value:function(e){if(this.valueScaleLocks={},e.valueScaleLocks)for(const t of jS(e.valueScaleLocks.locksByViewUid))this.valueScaleLocks[t]=e.valueScaleLocks.locksDict[e.valueScaleLocks.locksByViewUid[t]]}},{key:"serializeLocks",value:function(e){const t={},n={};for(const r of jS(e)){let i=e[r]&&e[r].uid;i||(i=ag.nice()),e[r].uid=i,t[i]=e[r],n[r]=e[r].uid}return{locksByViewUid:n,locksDict:t}}},{key:"getViewsAsJson",value:function(){const e=JSON.parse(JSON.stringify(this.state.viewConfig));return e.views=Object.values(this.state.views).map((e=>{const t=JSON.parse(JSON.stringify(e));return Ww(t.tracks,(t=>{if(t.server){const e=Ib(t.server,{});if(!e.hostname.length){const n=window.location.host,{protocol:r}=window.location,i=`${r}//${n}${e.pathname}`;t.server=i}}("viewport-projection-center"===t.type||"viewport-projection-horizontal"===t.type)&&this.projectionXDomains[e.uid]&&this.projectionXDomains[e.uid][t.uid]&&(t.projectionXDomain=this.projectionXDomains[e.uid][t.uid]),("viewport-projection-center"===t.type||"viewport-projection-vertical"===t.type)&&this.projectionYDomains[e.uid]&&this.projectionYDomains[e.uid][t.uid]&&(t.projectionYDomain=this.projectionYDomains[e.uid][t.uid]),delete t.name,delete t.position,delete t.header,delete t.description,delete t.created,delete t.project,delete t.project_name,delete t.serverUidKey,delete t.uuid,delete t.private,delete t.maxZoom,delete t.coordSystem,delete t.coordSystem2,delete t.datatype,delete t.maxWidth,delete t.datafile,delete t.binsPerDimension,delete t.resolutions,delete t.aggregationModes})),t.uid=e.uid,t.initialXDomain=this.xScales[e.uid].domain(),t.initialYDomain=this.yScales[e.uid].domain(),delete t.layout.i,t})),e.zoomLocks=this.serializeLocks(this.zoomLocks),e.locationLocks=this.serializeLocks(this.locationLocks),e.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),e}},{key:"getViewsAsString",value:function(){return JSON.stringify(this.getViewsAsJson(),null,2)}},{key:"handleExportViewAsJSON",value:function(){FS("viewconf.json",this.getViewsAsString())}},{key:"handleExportViewsAsLink",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.viewConfig.exportViewUrl,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new URL(e,window.location.origin),r=fetch(e,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:`{"viewconf":${this.getViewsAsString()}}`,credentials:"same-origin"}).then((e=>{if(!e.ok)throw e;return e.json()})).catch((e=>{console.warn("err:",e)})).then((e=>({id:e.uid,url:`${n.origin}/l/?d=${e.uid}`})));return t||r.then((e=>{this.openModal(i.createElement(tTe,{onDone:()=>{this.closeModalBound()},url:e.url}))})).catch((e=>console.error("Exporting view config as link failed:",e))),r}},{key:"handleDataDomainChanged",value:function(e,t,n){const{views:r}=this.state;if(r[e].initialXDomain=t,r[e].initialYDomain=n,this.xScales[e]=Fp().domain(t),this.yScales[e]=Fp().domain(n),this.zoomLocks[e]){const i=this.zoomLocks[e],o=LS(i);for(let e=0;e<o.length;e++){const i=o[e][0];i in this.locationLocks&&(r[i].initialXDomain=t,r[i].initialYDomain=n,this.xScales[i]=Fp().domain(t),this.yScales[i]=Fp().domain(n))}}this.setState({views:r})}},{key:"viewPositionAvailable",value:function(e,t,n,r){const i=e+n,o=t+r;if(e+n>12)return!1;const a=BS(this.state.views);for(let s=0;s<a.length;s++){const n=a[s].layout.x,r=a[s].layout.y,l=n+a[s].layout.w,c=r+a[s].layout.h;if(e<l&&i>n&&t<c&&o>r)return!1}return!0}},{key:"handleAddView",value:function(e){const t=BS(this.state.views),n=e,r=[];12===e.layout.w&&(e.layout.w=6);for(let a=0;a<t.length;a++){let n=t[a].layout.x+t[a].layout.w,i=t[a].layout.y;this.viewPositionAvailable(n,i,e.layout.w,e.layout.h)&&r.push([n,i]),n=t[a].layout.x,i=t[a].layout.y+t[a].layout.h,this.viewPositionAvailable(n,i,e.layout.w,e.layout.h)&&r.push([n,i])}r.sort(((e,t)=>{const n=e[1]-t[1];return 0===n?e[0]-t[0]:n}));const i=JSON.stringify(n),o=JSON.parse(i);o.initialXDomain=this.xScales[o.uid].domain(),o.initialYDomain=this.yScales[o.uid].domain(),[[o.layout.x,o.layout.y]]=r,o.uid=ag.nice(),o.layout.i=o.uid,Ww(o.tracks,(e=>{this.addCallbacks(o.uid,e)})),this.setState((e=>{const t=JSON.parse(JSON.stringify(e.views));return t[o.uid]=o,{views:t}}))}},{key:"handleSelectedAssemblyChanged",value:function(e,t,n,r){const{views:i}=this.state;i[e].genomePositionSearchBox.chromInfoId=t,i[e].genomePositionSearchBox.autocompleteId=n,i[e].genomePositionSearchBox.autocompleteServer=r}},{key:"createGenomePostionSearchBoxEntry",value:function(e,t){let n=e;const r={autocompleteServer:QE,chromInfoServer:QE,visible:!1};return n||(n=JSON.parse(JSON.stringify(r))),n.autocompleteServer||(n.autocompleteServer=r.autocompleteServer),n.chromInfoId||(n.chromInfoId=t),n.chromInfoServer||(n.chromInfoServer=r.chromInfoServer),n.visible||(n.visible=!1),n}},{key:"handleTogglePositionSearchBox",value:function(e){const t=this.state.views[e];t.genomePositionSearchBoxVisible=!t.genomePositionSearchBoxVisible;const n={};Ww(t.tracks,(e=>{e.coordSystem&&(n[e.coordSystem]||(n[e.coordSystem]=0),n[e.coordSystem]+=1)}));const r=LS(n).sort(((e,t)=>t[1]-e[1]));let i="hg19";r.length&&(i=r[0][0]),t.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(t.genomePositionSearchBox,i),t.genomePositionSearchBox.visible=!t.genomePositionSearchBox.visible,this.refreshView(),this.setState({configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(e,t,n){const r=this.state.views[e],i=Uw(r.tracks,t);i&&(i.options=Object.assign(i.options,n),this.mounted&&(this.setState((e=>({views:e.views}))),this.adjustSplitHeatmapTrackOptions(i,n,r.tracks,e)))}},{key:"adjustSplitHeatmapTrackOptions",value:function(e,t,n,r){"heatmap"===e.type&&("upper-right"===t.extent&&"combined"===n.center[0].type&&n.center[0].contents.length>1&&n.center[0].contents.some((n=>{if("heatmap"===n.type&&n.uid!==e.uid&&"lower-left"!==n.options.extent){const i={...n.options,extent:"lower-left",labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"},o={...t,labelPosition:"topRight",colorbarPosition:"topRight"};return this.handleTrackOptionsChanged(r,n.uid,i),this.handleTrackOptionsChanged(r,e.uid,o),!0}return!1})),"lower-left"===t.extent&&"lower-left"===t.extent&&"combined"===n.center[0].type&&n.center[0].contents.length>1&&n.center[0].contents.some((n=>{if("heatmap"===n.type&&n.uid!==e.uid&&"upper-right"!==n.options.extent){const i={...n.options,extent:"upper-right",labelPosition:"topRight",colorbarPosition:"topRight"},o={...t,labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"};return this.handleTrackOptionsChanged(r,n.uid,i),this.handleTrackOptionsChanged(r,e.uid,o),!0}return!1})))}},{key:"handleViewOptionsChanged",value:function(e,t){const n=this.state.views[e];n&&(n.options=Object.assign(n.options||{},t),this.mounted&&this.setState((e=>({views:e.views}))))}},{key:"isTrackValid",value:function(e,t){return!("viewport-projection-center"===e.type&&!t.has(e.fromViewUid))}},{key:"removeInvalidTracks",value:function(e){const t=new Set(jS(e));for(const n of BS(e))for(const e of["left","top","center","right","bottom"])n.tracks&&n.tracks.hasOwnProperty(e)&&(n.tracks[e]=n.tracks[e].filter((e=>this.isTrackValid(e,t))),n.tracks[e].forEach((e=>{"combined"===e.type&&(e.contents=e.contents.filter((e=>this.isTrackValid(e,t))))})));return e}},{key:"processViewConfig",value:function(e){let{views:t}=e,n={};return(!e.views||0===e.views.length)&&(console.warn("No views provided in viewConfig"),t=[{editable:!0,tracks:{}}]),t.forEach((e=>{e.tracks&&GS(e.tracks),e.uid||(e.uid=ag.nice()),n[e.uid]=e,this.zoomToDataExtentOnInit.has(e.uid)&&this.zoomToDataExtentOnInit.delete(e.uid),e.initialXDomain?(e.initialXDomain[0]=+e.initialXDomain[0],e.initialXDomain[1]=+e.initialXDomain[1]):(e.initialXDomain=[0,100],this.zoomToDataExtentOnInit.add(e.uid)),e.initialYDomain?(e.initialXDomain[0]=+e.initialXDomain[0],e.initialXDomain[1]=+e.initialXDomain[1]):e.initialYDomain=[e.initialXDomain[0],e.initialXDomain[1]],this.xScales[e.uid]||(this.xScales[e.uid]=Fp().domain(e.initialXDomain)),this.yScales[e.uid]||(this.yScales[e.uid]=Fp().domain(e.initialYDomain)),Ww(e.tracks,(t=>{if(t.uid||(t.uid=ag.nice()),this.addCallbacks(e.uid,t),this.addDefaultTrackOptions(t),t.contents)for(const e of t.contents)this.addDefaultTrackOptions(e)})),e.layout?e.layout.i=e.uid:e.layout=this.generateViewLayout(e)})),this.deserializeZoomLocks(e),this.deserializeLocationLocks(e),this.deserializeValueScaleLocks(e),n=this.removeInvalidTracks(n),n}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(e){this.rangeSelection=e,this.apiPublish("rangeSelection",e)}},{key:"offViewChange",value:function(e){this.viewChangeListener.splice(e,1)}},{key:"onViewChange",value:function(e){return this.viewChangeListener.push(e)-1}},{key:"triggerViewChange",value:function(){this.viewChangeListener.forEach((e=>e(this.getViewsAsString())))}},{key:"getGenomeLocation",value:function(e){return bw.get(this.state.views[e].chromInfoPath).then((t=>DA(this.xScales[e],this.yScales[e],t)))}},{key:"offLocationChange",value:function(e,t){this.removeScalesChangedListener(e,t)}},{key:"zoomTo",value:function(e,t,n,r,i,o){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(Number.isNaN(+t)||Number.isNaN(+n)){const e=[t,n].join(", ");return void console.warn([`Invalid coordinates (${e}). All coordinates need to be numbers\n        and should represent absolute coordinates (not chromosome\n        coordinates).`].join(" "))}(Number.isNaN(+r)||Number.isNaN(+i)||null===r||null===i)&&(r=t,i=n);const[a,s,l]=PA(this.xScales[e].copy().domain([t,n]),this.yScales[e].copy().domain([r,i]));this.setCenters[e](a,s,l,!1,o)}},{key:"zoomToGene",value:function(e,t,n,r){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);this.state.views[e].genomePositionSearchBox&&this.state.views[e].genomePositionSearchBox.autocompleteServer&&this.state.views[e].genomePositionSearchBox.autocompleteId&&this.state.views[e].chromInfoPath?this.suggestGene(e,t,(i=>{if(i){const o=i.find((e=>e.geneName.toLowerCase()===t.toLowerCase()));if(o){const{chr:t,txStart:i,txEnd:a}=o;a9(this.state.views[e].chromInfoPath,(o=>{const s=o.chrToAbs([t,i])-n,l=o.chrToAbs([t,a])+n,[c,u,h]=PA(this.xScales[e].copy().domain([s,l]),this.yScales[e].copy().domain([s,l]));this.setCenters[e](c,u,h,!1,r)}),this.pubSub)}else console.warn(`Couldn't find the gene symbol: ${t}`)}})):console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API")}},{key:"suggestGene",value:function(e,t,n){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[e].genomePositionSearchBox||!this.state.views[e].genomePositionSearchBox.autocompleteServer||!this.state.views[e].genomePositionSearchBox.autocompleteId)return void console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");const r=`${this.state.views[e].genomePositionSearchBox.autocompleteServer}/suggest/?d=${this.state.views[e].genomePositionSearchBox.autocompleteId}&ac=${t.toLowerCase()}`;Fw.json(r,BA,this.pubSub).then((e=>{n(e)})).catch((e=>console.error(e)))}},{key:"onLocationChange",value:function(e,t,n){const r=Object.keys(this.state.views);if(!r.length)return this.unsetOnLocationChange.push({viewId:e,callback:t,callbackId:n}),null;if(typeof(e=typeof e>"u"&&1===r.length?r[0]:e)>"u"||-1===r.indexOf(e))return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ",e),null;const i=this.state.views[e];let o=1;return this.scalesChangedListeners[i.uid]&&(o=Object.keys(this.scalesChangedListeners[i.uid]).filter((e=>0===e.indexOf(KE))).map((e=>parseInt(e.slice(23),10))).reduce(((e,t)=>Math.max(e,t)),0)+1),this.addScalesChangedListener(i.uid,`${KE}.${o}`,((e,n)=>{t({xDomain:e.domain(),yDomain:n.domain(),xRange:e.range(),yRange:n.range()})})),n&&n(`${KE}.${o}`),o}},{key:"getTiledPlotAtPosition",value:function(e,t){let n;const r=BS(this.state.views);for(let i=0;i<r.length;i++){const o=this.tiledPlots[r[i].uid],a=this.tiledAreasDivs[r[i].uid].getBoundingClientRect(),{top:s,left:l}=a,c=s+a.height,u=l+a.width;if(e>=l&&e<=u&&(t>=s&&t<=c)){n=o;break}}return n}},{key:"mouseMoveHandler",value:function(e){if(!this.topDiv||this.state.modal)return;const t=e.clientX,n=e.clientY,r=Jl(e,this.topDiv);r[1]+=this.scrollTop;const i=this.getTiledPlotAtPosition(t,n),o=i?i.listTracksAtPosition(r[0],r[1],!0).map((e=>e.originalTrack||e)):[],a=o.find((e=>!e.isAugmentationTrack)),s=a?[r[0]-a.position[0],r[1]-a.position[1]]:r;let l=-1,c=-1;a&&(l=a.flipText?a._xScale.invert(s[1]):a._xScale.invert(s[0]),c=a.is2d?a._yScale.invert(s[1]):l);const u={x:r[0],y:r[1],relTrackX:a&&a.flipText?s[1]:s[0],relTrackY:a&&a.flipText?s[0]:s[1],dataX:l,dataY:c,isFrom2dTrack:!(!a||!a.is2d),isFromVerticalTrack:!(!a||!a.flipText),track:a,origEvt:e,sourceUid:this.uid,hoveredTracks:o,noHoveredTracks:0===o.length};if(this.pubSub.publish("app.mouseMove",u),this.isBroadcastMousePositionGlobally){const e={...u};e.origEvt=void 0,e.track=void 0,e.hoveredTracks=void 0,delete e.origEvt,delete e.track,delete e.hoveredTracks,Fb.publish("higlass.mouseMove",e)}this.apiPublish("cursorLocation",{absX:t,absY:n,relX:u.x,relY:u.y,relTrackX:u.relTrackX,relTrackY:u.relTrackY,dataX:u.dataX,dataY:u.dataY,isFrom2dTrack:u.isFrom2dTrack,isFromVerticalTrack:u.isFromVerticalTrack}),this.showHoverMenu(u)}},{key:"getMinMaxValue",value:function(e,t,n,r){const i=zw(this.tiledPlots,e,t);if(i){if(i.minVisibleValueInTiles&&i.maxVisibleValueInTiles)return n&&i.getAggregatedVisibleValue?[i.getAggregatedVisibleValue("min"),i.getAggregatedVisibleValue("max")]:[i.minVisibleValueInTiles(r),i.maxVisibleValueInTiles(r)];console.warn(`Track ${t} doesn't support the retrieval of min or max values.`)}else console.warn(`Track with ID: ${t} not found!`)}},{key:"showHoverMenu",value:function(e){const t=e.track&&e.track.getMouseOverHtml?e.track.getMouseOverHtml(e.relTrackX,e.relTrackY):"";if(e.track!==this.prevMouseHoverTrack&&this.prevMouseHoverTrack&&this.prevMouseHoverTrack.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=e.track,this.zooming)return;const n=t&&t.length?[1]:[];let r=ql("body").selectAll(".track-mouseover-menu").data(n);r.exit().remove(),r.enter().append("div").classed("track-mouseover-menu",!0).classed(Awe,!0),r=ql("body").selectAll(".track-mouseover-menu");const i=Jl(e.origEvt,ql("body").node()),o=[i[0]-window.scrollX,i[1]-window.scrollY];if(r.style("left",`${o[0]}px`).style("top",`${o[1]}px`),!r.node())return;const a=r.node().getBoundingClientRect();a.x+a.width>window.innerWidth&&r.style("left",o[0]-a.width+"px"),a.y+a.height>window.innerHeight&&r.style("top",o[1]-a.height+"px"),r.html(t)}},{key:"hideHoverMenu",value:function(){ql("body").selectAll(".track-mouseover-menu").remove()}},{key:"closeCustomDialog",value:function(){this.setState((e=>({customDialog:null})))}},{key:"appClickHandler",value:function(e){this.apiPublish("click",e)}},{key:"canvasClickHandler",value:function(e){const t=e.nativeEvent||e,n=t.clientX,r=t.clientY,i=this.getTiledPlotAtPosition(n,r),o=Jl(t,this.topDiv);o[1]+=this.scrollTop;const a=i?i.listTracksAtPosition(o[0],o[1],!0).map((e=>e.originalTrack||e)):[],s=a.find((e=>!e.isAugmentationTrack)),l=s?[o[0]-s.position[0],o[1]-s.position[1]]:o,c=s&&s.flipText?l[1]:l[0],u=s&&s.flipText?l[0]:l[1];for(const f of this.iterateOverTracks()){const e=zw(this.tiledPlots,f.viewId,f.trackId);e.respondsToPosition(o[0],o[1])||e.clickOutside()}const h=[];for(const f of a)if(f.childTracks){for(const t of f.childTracks)h.push({trackUid:t.context.trackUid,viewUid:t.context.viewUid,trackType:t.context.trackType,data:t.click(c,u,e)});h.push({trackUid:f.context.trackUid,viewUid:f.context.viewUid,trackType:f.context.trackType,data:{type:"generic",event:e}})}else h.push({trackUid:f.context.trackUid,viewUid:f.context.viewUid,trackType:f.context.trackType,data:f.click(c,u,e)});const p=[];h.forEach(((e,t)=>{const n=zw(this.tiledPlots,e.viewUid,e.trackUid);if("function"==typeof n.clickDialog){const e=n.clickDialog();e&&p.push(e)}})),p.length>0&&this.setState((e=>({customDialog:p}))),this.pubSub.publish("app.click",h)}},{key:"mouseMoveZoomHandler",value:function(e){this.apiPublish("mouseMoveZoom",e)}},{key:"geneSearchHandler",value:function(e){this.apiPublish("geneSearch",e)}},{key:"mouseDownHandler",value:function(e){}},{key:"onScrollHandler",value:function(){this.props.options.sizeMode===Nwe&&(this.scrollTop=this.scrollContainer.scrollTop,this.pixiStage.y=-this.scrollTop,this.pubSub.publish("app.scroll",this.scrollTop),this.animate())}},{key:"setTrackValueScaleLimits",value:function(e,t,n,r){const i=zw(this.tiledPlots,e,t);i?i.setFixedValueScaleMin&&i.setFixedValueScaleMax?(i.setFixedValueScaleMin(n),i.setFixedValueScaleMax(r),i.rerender(i.options,!0),i.animate()):console.warn("Track doesn't support fixed value scales."):console.warn(`Could't find track: ${t}`)}},{key:"setChromInfo",value:function(e,t){a9(e,(e=>{this.chromInfo=e,t()}),this.pubSub)}},{key:"onMouseLeaveHandler",value:function(){this.pubSub.publish("app.mouseLeave"),this.hideHoverMenu(),this.animate()}},{key:"onBlurHandler",value:function(){this.animate()}},{key:"isZoomFixed",value:function(e){return this.props.zoomFixed||this.props.options.zoomFixed||this.state.viewConfig.zoomFixed||this.props.options.sizeMode===Nwe||e&&e.zoomFixed}},{key:"trackDimensionsModifiedHandler",value:function(e){const t=this.state.views[e.viewId];if(!t)return;const n=Uw(t.tracks,e.trackId);n&&(void 0!==e.height&&(n.height=e.height),void 0!==e.width&&(n.width=e.width),this.adjustLayoutToTrackSizes(t),this.setState((e=>({views:e.views}))))}},{key:"wheelHandler",value:function(e){if(this.state.modal||this.props.options.sizeMode===Nwe)return;const t=e.nativeEvent||e,n=e.target===this.canvasElement;if(!Zw(t.target,this.topDiv)||this.isZoomFixed())return;const r=t.clientX,i=t.clientY,o=this.getTiledPlotAtPosition(r,i);if(this.apiStack.wheel&&this.apiStack.wheel.length>0){const e=Jl(t,this.topDiv);e[1]+=this.scrollTop;const n=o?o.listTracksAtPosition(e[0],e[1],!0).map((e=>e.originalTrack||e)):[],r=n.find((e=>!e.isAugmentationTrack)),i=r?[e[0]-r.position[0],e[1]-r.position[1]]:e,a={x:e[0],y:e[1],relTrackX:r&&r.flipText?i[1]:i[0],relTrackY:r&&r.flipText?i[0]:i[1],track:r,origEvt:t,sourceUid:this.uid,hoveredTracks:n,noHoveredTracks:0===n.length};this.apiPublish("wheel",a)}if(t.forwarded||n)return e.stopPropagation(),void e.preventDefault();if(e.preventDefault(),o){const{trackRenderer:e}=o;t.forwarded=!0,t&&(zS(t,e.eventTracker),t.preventDefault())}}},{key:"render",value:function(){this.tiledAreasDivs={},this.tiledAreas=i.createElement("div",{className:wwe}),this.mounted&&(this.tiledAreas=BS(this.state.views).map((e=>{const t=e.uid===this.state.addTrackPositionMenuUid?this.state.addTrackPositionMenuPosition:null;let n=null;if(this.state.chooseViewHandler){let t="transparent";this.state.mouseOverOverlayUid===e.uid&&(t="green"),n=i.createElement("div",{className:"tiled-plot-overlay",onClick:()=>this.state.chooseViewHandler(e.uid),onMouseEnter:()=>this.handleOverlayMouseEnter(e.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(e.uid),onMouseMove:()=>this.handleOverlayMouseEnter(e.uid),style:{position:"absolute",width:"100%",height:"100%",background:t,opacity:.3,zIndex:1}})}const r=i.createElement(Qbe,{key:`tp${e.uid}`,ref:t=>{this.tiledPlots[e.uid]=t},addTrackPosition:this.state.addTrackPositionView===e.uid?this.state.addTrackPosition:null,addTrackPositionMenuPosition:t,canvasElement:this.state.canvasElement,chooseTrackHandler:this.state.chooseTrackHandler?t=>this.state.chooseTrackHandler(e.uid,t):null,customDialog:this.state.customDialog,closeCustomDialog:()=>this.closeCustomDialog(),chromInfoPath:e.chromInfoPath,disableTrackMenu:this.isTrackMenuDisabled(),draggingHappening:null!==this.state.draggingHappening,editable:this.isEditable(),getLockGroupExtrema:t=>this.getLockGroupExtrema(e.uid,t),initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,isShowGlobalMousePosition:this.isShowGlobalMousePosition,isValueScaleLocked:t=>this.isValueScaleLocked(e.uid,t),marginBottom:this.viewMarginBottom,marginLeft:this.viewMarginLeft,marginRight:this.viewMarginRight,marginTop:this.viewMarginTop,metaTracks:e.metaTracks,mouseTool:this.state.mouseTool,onChangeTrackData:(t,n)=>this.handleChangeTrackData(e.uid,t,n),onChangeTrackType:(t,n)=>this.handleChangeTrackType(e.uid,t,n),onCloseTrack:t=>this.handleCloseTrack(e.uid,t),onDataDomainChanged:(t,n)=>this.handleDataDomainChanged(e.uid,t,n),onLockValueScale:t=>this.handleLockValueScale(e.uid,t),onMouseMoveZoom:this.mouseMoveZoomHandler.bind(this),onNewTilesLoaded:t=>this.handleNewTilesLoaded(e.uid,t),onNoTrackAdded:this.handleNoTrackAdded.bind(this),onRangeSelection:this.rangeSelectionHandler.bind(this),onResizeTrack:this.triggerViewChangeDb,onScalesChanged:(t,n)=>this.handleScalesChanged(e.uid,t,n),onTrackOptionsChanged:(t,n)=>this.handleTrackOptionsChanged(e.uid,t,n),onTrackPositionChosen:this.handleTrackPositionChosen.bind(this),onTracksAdded:(t,n,r)=>this.handleTracksAdded(e.uid,t,n,r),onUnlockValueScale:t=>this.handleUnlockValueScale(e.uid,t),onValueScaleChanged:t=>this.syncValueScales(e.uid,t),overlays:e.overlays,paddingBottom:this.viewPaddingBottom,paddingLeft:this.viewPaddingLeft,paddingRight:this.viewPaddingRight,paddingTop:this.viewPaddingTop,pixiRenderer:this.pixiRenderer,pixiStage:this.pixiStage,pluginDataFetchers:this.pluginDataFetchers,pluginTracks:this.pluginTracks,rangeSelection1dSize:this.state.rangeSelection1dSize,rangeSelectionToInt:this.state.rangeSelectionToInt,registerDraggingChangedListener:t=>this.addDraggingChangedListener(e.uid,e.uid,t),removeDraggingChangedListener:t=>this.removeDraggingChangedListener(e.uid,e.uid,t),setCentersFunction:t=>{this.setCenters[e.uid]=t},svgElement:this.state.svgElement,tracks:e.tracks,trackSourceServers:this.state.viewConfig.trackSourceServers,uid:e.uid,verticalMargin:this.verticalMargin,viewOptions:e.options,xDomainLimits:e.xDomainLimits,yDomainLimits:e.yDomainLimits,zoomable:!this.isZoomFixed(e),zoomLimits:this.calculateZoomLimits(e,e.initialXDomain),zoomToDataExtentOnInit:()=>this.zoomToDataExtentOnInit.has(e.uid)}),o=!this.isEditable()||this.isViewHeaderDisabled()||this.state.viewConfig.hideHeader?null:i.createElement(OTe,{ref:t=>{this.viewHeaders[e.uid]=t},getGenomePositionSearchBox:(t,n)=>e.genomePositionSearchBox?i.createElement(q_e,{key:`gpsb${e.uid}`,ref:t=>{this.genomePositionSearchBoxes[e.uid]=t},autocompleteId:e.genomePositionSearchBox.autocompleteId,autocompleteServer:e.genomePositionSearchBox.autocompleteServer,chromInfoId:e.genomePositionSearchBox.chromInfoId,chromInfoPath:e.genomePositionSearchBox.chromInfoPath,chromInfoServer:e.genomePositionSearchBox.chromInfoServer,hideAvailableAssemblies:e.genomePositionSearchBox.hideAvailableAssemblies,isFocused:t,onFocus:n,onGeneSearch:this.geneSearchHandler.bind(this),onSelectedAssemblyChanged:(t,n,r)=>this.handleSelectedAssemblyChanged(e.uid,t,n,r),registerViewportChangedListener:t=>this.addScalesChangedListener(e.uid,e.uid,t),removeViewportChangedListener:()=>this.removeScalesChangedListener(e.uid,e.uid),setCenters:(t,n,r,i)=>this.setCenters[e.uid](t,n,r,!1,i),trackSourceServers:this.state.viewConfig.trackSourceServers,twoD:!!(e.tracks.left.length||e.tracks.right.length||e.tracks.center.length)}):null,isGenomePositionSearchBoxVisible:e.genomePositionSearchBox&&e.genomePositionSearchBox.visible,mouseTool:this.state.mouseTool,onAddView:()=>this.handleAddView(e),onClearView:()=>this.handleClearView(e.uid),onCloseView:()=>this.handleCloseView(e.uid),onEditViewConfig:this.handleEditViewConfigBound,onExportPNG:this.handleExportPNG.bind(this),onExportSVG:this.handleExportSVG.bind(this),onExportViewsAsJSON:this.handleExportViewAsJSON.bind(this),onExportViewsAsLink:this.handleExportViewsAsLink.bind(this),onLockLocation:e=>this.handleYankFunction(e,this.handleLocationLockChosen.bind(this)),onLockZoom:e=>this.handleYankFunction(e,this.handleZoomLockChosen.bind(this)),onLockZoomAndLocation:e=>this.handleYankFunction(e,((e,t)=>{this.handleZoomLockChosen(e,t),this.handleLocationLockChosen(e,t)})),onProjectViewport:this.handleProjectViewport.bind(this),onTakeAndLockZoomAndLocation:e=>{this.handleYankFunction(e,((e,t)=>{this.handleZoomYanked(e,t),this.handleLocationYanked(e,t),this.handleZoomLockChosen(e,t),this.handleLocationLockChosen(e,t)}))},onTogglePositionSearchBox:this.handleTogglePositionSearchBox.bind(this),onTrackPositionChosen:t=>this.handleTrackPositionChosen(e.uid,t),onUnlockLocation:e=>this.handleUnlock(e,this.locationLocks),onUnlockZoom:e=>this.handleUnlock(e,this.zoomLocks),onUnlockZoomAndLocation:e=>{this.handleUnlock(e,this.zoomLocks),this.handleUnlock(e,this.locationLocks)},onViewOptionsChanged:t=>this.handleViewOptionsChanged(e.uid,t),onYankLocation:e=>this.handleYankFunction(e,this.handleLocationYanked.bind(this)),onYankZoom:e=>this.handleYankFunction(e,this.handleZoomYanked.bind(this)),onYankZoomAndLocation:e=>this.handleYankFunction(e,((e,t)=>{this.handleZoomYanked(e,t),this.handleLocationYanked(e,t)})),onZoomToData:e=>this.handleZoomToData(e),viewUid:e.uid});return i.createElement("div",{key:e.uid,ref:t=>{this.tiledAreasDivs[e.uid]=t},className:wwe},o,r,n)})));let e=this.mounted?Object.values(this.state.views).filter((e=>e.layout)).map((e=>e.layout)):[];e=JSON.parse(JSON.stringify(e));const t=this.isEditable()?10:0,n=this.isEditable()?10:0,r=+this.props.options.containerPaddingX>=0?+this.props.options.containerPaddingX:t,o=+this.props.options.containerPaddingY>=0?+this.props.options.containerPaddingY:n,a=i.createElement(eb,{ref:e=>{this.gridLayout=e},cols:12,containerPadding:[r,o],draggableHandle:`.${rS["multitrack-header-grabber"]}`,isDraggable:this.isEditable(),isResizable:this.isEditable(),layout:e,margin:this.isEditable()?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted,verticalCompact:this.state.viewConfig.compactLayout,width:this.state.width},this.tiledAreas);return i.createElement("div",{key:this.uid,ref:e=>{this.topDiv=e},className:zg("higlass",{"higlass-dark-theme":this.theme===eS,"higlass-container-overflow":this.props.options.sizeMode===Rwe||this.props.options.sizeMode===Nwe}),onMouseLeave:this.onMouseLeaveHandlerBound,onMouseMove:this.mouseMoveHandlerBound},i.createElement(cQ,{value:this.pubSub},i.createElement(kse,{value:this.modal},i.createElement(RK,{value:this.theme},this.state.modal,i.createElement("canvas",{key:this.uid,ref:e=>{this.canvasElement=e},onClick:this.canvasClickHandlerBound,className:Twe}),i.createElement("div",{ref:e=>{this.scrollContainer=e},className:zg("higlass-scroll-container",{"higlass-scroll-container-overflow":this.props.options.sizeMode===Rwe,"higlass-scroll-container-scroll":this.props.options.sizeMode===Nwe}),onScroll:this.onScrollHandlerBound},i.createElement("div",{ref:e=>{this.divDrawingSurface=e},className:zg("higlass-drawing-surface",Ewe)},a),i.createElement("svg",{ref:e=>{this.svgElement=e},className:Swe,style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none"}}))))))}}]),n}(i.Component);function Lwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jwe(r.key),r)}}function jwe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Bwe(e,t){return(Bwe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fwe(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=Gwe(e);if(t){var i=Gwe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Gwe(e){return(Gwe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Mwe.defaultProps={options:{},zoomFixed:!1,compactLayout:!0},Mwe.propTypes={getApi:Ls.func,options:Ls.object,viewConfig:Ls.oneOfType([Ls.string,Ls.object]).isRequired,zoomFixed:Ls.bool,compactLayout:Ls.bool};let Hwe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bwe(e,t)}(n,e);var t=Fwe(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).id=`id-${Math.random()}`,r}return function(e,t,n){t&&Lwe(e.prototype,t),n&&Lwe(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.initTrackViewer()}},{key:"shouldComponentUpdate",value:function(e){const{x:t,y:n,width:r,height:i}=e;return this.zoomTo(t,n,r,i),!1}},{key:"initTrackViewer",value:function(){const{trackConfig:e,x:t,y:n,width:r,height:i}=this.props,o=document.getElementById(this.id),{id:a,hgApi:s}=((e,t,n)=>{let[r,i,o,a]=t;n.options.colorbarPosition||(n.options.colorbarPosition="hidden"),n.options.labelPosition||(n.options.labelPosition="hidden");const s="arbitary-id";return{id:s,hgApi:Uwe(e,{editable:!1,zoomFixed:!1,views:[{uid:s,initialXDomain:[r,i],initialYDomain:[o,a],tracks:{center:[n]},layout:{w:12,h:12,x:0,y:0,moved:!1,static:!1}}]},{sizeMode:"bounded"})}})(o,[t,t+r,n,n+i],e);this.viewUid=a,this.viewer=s}},{key:"zoomTo",value:function(e,t,n,r){this.viewer.zoomTo(this.viewUid,e,e+n,t,t+r)}},{key:"render",value:function(){return i.createElement("div",{id:this.id,style:{height:"100%",width:"100%"}})}}]),n}(i.Component);Hwe.propTypes={trackConfig:Ls.object,width:Ls.number,height:Ls.number,x:Ls.number,y:Ls.number};const Uwe=(e,t,n)=>((e,t,n)=>{const r=i.createRef();return o.render(i.createElement(Mwe,{ref:r,options:n||{},viewConfig:t}),e),r.current})(e,t,n).api}}]);
//# sourceMappingURL=420.f982a71d.chunk.js.map