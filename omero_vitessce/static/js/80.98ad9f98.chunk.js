/*! For license information please see 80.98ad9f98.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkomero_vitessce=self.webpackChunkomero_vitessce||[]).push([[80],{80:(e,t,n)=>{n.d(t,{HiGlassComponent:()=>Kbe});var r,i=n(43),o=n(950),a=n(810),s={};var l,c,u=function(){return r||(r=1,e=s,function(t){var n=t.Promise,r=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&function(){var e;return new n(function(t){e=t}),"function"==typeof e}();e?(e.Promise=r?n:x,e.Polyfill=x):r||(t.Promise=x);var i="pending",o="sealed",a="fulfilled",s="rejected",l=function(){};function c(e){return"[object Array]"===Object.prototype.toString.call(e)}var u,h=typeof setImmediate<"u"?setImmediate:setTimeout,p=[];function f(){for(var e=0;e<p.length;e++)p[e][0](p[e][1]);p=[],u=!1}function d(e,t){p.push([e,t]),u||(u=!0,h(f,0))}function m(e){var t=e.owner,n=t.state_,r=t.data_,i=e[n],o=e.then;if("function"==typeof i){n=a;try{r=i(r)}catch(l){b(o,l)}}g(o,r)||(n===a&&y(o,r),n===s&&b(o,r))}function g(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t!==r?y(e,r):v(e,r))},function(t){n||(n=!0,b(e,t))}),!0}}catch(i){return n||b(e,i),!0}return!1}function y(e,t){(e===t||!g(e,t))&&v(e,t)}function v(e,t){e.state_===i&&(e.state_=o,e.data_=t,d(w,e))}function b(e,t){e.state_===i&&(e.state_=o,e.data_=t,d(T,e))}function _(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)m(t[n])}function w(e){e.state_=a,_(e)}function T(e){e.state_=s,_(e)}function x(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(!(this instanceof x))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){b(t,e)}try{e(function(e){y(t,e)},n)}catch(r){n(r)}}(e,this)}x.prototype={constructor:x,state_:i,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(l),fulfilled:e,rejected:t};return this.state_===a||this.state_===s?d(m,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},x.all=function(e){if(!c(e))throw new TypeError("You must pass an array to Promise.all().");return new this(function(t,n){var r=[],i=0;function o(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var a,s=0;s<e.length;s++)(a=e[s])&&"function"==typeof a.then?a.then(o(s),n):r[s]=a;i||t(r)})},x.race=function(e){if(!c(e))throw new TypeError("You must pass an array to Promise.race().");return new this(function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)})},x.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},x.reject=function(e){return new this(function(t,n){n(e)})}}(typeof window<"u"?window:typeof a.aS<"u"?a.aS:typeof self<"u"?self:s)),s;var e}();var h=function(){if(c)return l;c=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;return l=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}()?Object.assign:function(r,i){for(var o,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(r),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))t.call(o,c)&&(s[c]=o[c]);if(e){a=e(o);for(var u=0;u<a.length;u++)n.call(o,a[u])&&(s[a[u]]=o[a[u]])}}return s}}();const p=(0,a.g)(h);window.Promise||(window.Promise=u.Polyfill),Object.assign||(Object.assign=p);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var f=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-f}}for(var d=Date.now(),m=["ms","moz","webkit","o"],g=0;g<m.length&&!window.requestAnimationFrame;++g){var y=m[g];window.requestAnimationFrame=window[y+"RequestAnimationFrame"],window.cancelAnimationFrame=window[y+"CancelAnimationFrame"]||window[y+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),n=16+d-t;return n<0&&(n=0),d=t,window.setTimeout(function(){d=Date.now(),e(performance.now())},n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var v=/iPhone/i,b=/iPod/i,_=/iPad/i,w=/\biOS-universal(?:.+)Mac\b/i,T=/\bAndroid(?:.+)Mobile\b/i,x=/Android/i,E=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,S=/Silk/i,k=/Windows Phone/i,O=/\bWindows(?:.+)ARM\b/i,P=/BlackBerry/i,C=/BB10/i,A=/Opera Mini/i,M=/\b(CriOS|Chrome)(?:.+)Mobile/i,I=/Mobile(?:.+)Firefox\b/i,R=function(e){return typeof e<"u"&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&typeof MSStream>"u"};var D=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var n=t.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),typeof(r=n.split("Twitter"))[1]<"u"&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(v)&&!i(k),ipod:i(b),tablet:!i(v)&&(i(_)||R(t))&&!i(k),universal:i(w),device:(i(v)||i(b)||i(_)||i(w)||R(t))&&!i(k)},amazon:{phone:i(E),tablet:!i(E)&&i(S),device:i(E)||i(S)},android:{phone:!i(k)&&i(E)||!i(k)&&i(T),tablet:!i(k)&&!i(E)&&!i(T)&&(i(S)||i(x)),device:!i(k)&&(i(E)||i(S)||i(T)||i(x))||i(/\bokhttp\b/i)},windows:{phone:i(k),tablet:i(O),device:i(k)||i(O)},other:{blackberry:i(P),blackberry10:i(C),opera:i(A),firefox:i(I),chrome:i(M),device:i(P)||i(C)||i(A)||i(I)||i(M)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator);var N,j={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(e){var t=!0;if(D.tablet||D.phone){var n;if(D.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(t=!1);if(D.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(t=!1)}return t?e:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:D.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!D.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},L={exports:{}};var B=(N||(N=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!r||s.context===r)&&a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(L)),L.exports);const F=(0,a.g)(B);var z,H,U,V={},G={exports:{}},X=G.exports;var W,Y,q,$,K,Z,Q={};function J(){return K||(K=1,Q.decode=Q.parse=function(){if(Y)return W;function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}return Y=1,W=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var l=t.length;s>0&&l>s&&(l=s);for(var c=0;c<l;++c){var u,h,p,f,d=t[c].replace(a,"%20"),m=d.indexOf(r);m>=0?(u=d.substr(0,m),h=d.substr(m+1)):(u=d,h=""),p=decodeURIComponent(u),f=decodeURIComponent(h),e(o,p)?Array.isArray(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o}}(),Q.encode=Q.stringify=function(){if($)return q;$=1;var e=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};return q=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(e(t))}).join(n):o+encodeURIComponent(e(t[i]))}).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}}()),Q}var ee=function(){if(Z)return V;Z=1;var e=function(){return z||(z=1,e=G,t=G.exports,function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,o="object"==typeof a.aS&&a.aS;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,l,c=2147483647,u=36,h=/^xn--/,p=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function y(e){throw RangeError(d[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(f,".")).split("."),t).join(".")}function _(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function w(e){return v(e,function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)}).join("")}function T(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,n){var r=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;r+=u)e=m(e/35);return m(r+36*e/(e+38))}function S(e){var t,n,r,i,o,a,s,l,h,p,f=[],d=e.length,g=0,v=128,b=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&y("not-basic"),f.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<d;){for(o=g,a=1,s=u;i>=d&&y("invalid-input"),((l=T(e.charCodeAt(i++)))>=u||l>m((c-g)/a))&&y("overflow"),g+=l*a,!(l<(h=s<=b?1:s>=b+26?26:s-b));s+=u)a>m(c/(p=u-h))&&y("overflow"),a*=p;b=E(g-o,t=f.length+1,0==o),m(g/t)>c-v&&y("overflow"),v+=m(g/t),g%=t,f.splice(g++,0,v)}return w(f)}function k(e){var t,n,r,i,o,a,s,l,h,p,f,d,v,b,w,T=[];for(d=(e=_(e)).length,t=128,n=0,o=72,a=0;a<d;++a)(f=e[a])<128&&T.push(g(f));for(r=i=T.length,i&&T.push("-");r<d;){for(s=c,a=0;a<d;++a)(f=e[a])>=t&&f<s&&(s=f);for(s-t>m((c-n)/(v=r+1))&&y("overflow"),n+=(s-t)*v,t=s,a=0;a<d;++a)if((f=e[a])<t&&++n>c&&y("overflow"),f==t){for(l=n,h=u;!(l<(p=h<=o?1:h>=o+26?26:h-o));h+=u)w=l-p,b=u-p,T.push(g(x(p+w%b,0))),l=m(w/b);T.push(g(x(l,0))),o=E(n,v,r==i),n=0,++r}++n,++t}return T.join("")}if(s={version:"1.3.2",ucs2:{decode:_,encode:w},decode:S,encode:k,toASCII:function(e){return b(e,function(e){return p.test(e)?"xn--"+k(e):e})},toUnicode:function(e){return b(e,function(e){return h.test(e)?S(e.slice(4).toLowerCase()):e})}},r&&i)if(e.exports==r)i.exports=s;else for(l in s)s.hasOwnProperty(l)&&(r[l]=s[l]);else n.punycode=s}(X)),G.exports;var e,t}(),t=(U||(U=1,H={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}),H);function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}V.parse=y,V.resolve=function(e,t){return y(e,!1,!0).resolve(t)},V.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},V.format=function(e){return t.isString(e)&&(e=y(e)),e instanceof n?e.format():n.prototype.format.call(e)},V.Url=n;var r=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(s),c=["%","/","?",";","#"].concat(l),u=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},d={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=J();function y(e,r,i){if(e&&t.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,r,i),o}return n.prototype.parse=function(n,i,a){if(!t.isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var s=n.indexOf("?"),y=-1!==s&&s<n.indexOf("#")?"?":"#",v=n.split(y);v[0]=v[0].replace(/\\/g,"/");var b=n=v.join(y);if(b=b.trim(),!a&&1===n.split("#").length){var _=o.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=i?g.parse(this.search.substr(1)):this.search.substr(1)):i&&(this.search="",this.query={}),this}var w=r.exec(b);if(w){var T=(w=w[0]).toLowerCase();this.protocol=T,b=b.substr(w.length)}if(a||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);x&&(!w||!d[w])&&(b=b.substr(2),this.slashes=!0)}if(!d[w]&&(x||w&&!m[w])){for(var E=-1,S=0;S<u.length;S++){-1!==(P=b.indexOf(u[S]))&&(-1===E||P<E)&&(E=P)}var k,O;-1!==(O=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(k=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(k)),E=-1;for(S=0;S<c.length;S++){var P;-1!==(P=b.indexOf(c[S]))&&(-1===E||P<E)&&(E=P)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var A=this.hostname.split(/\./),M=(S=0,A.length);S<M;S++){var I=A[S];if(I&&!I.match(h)){for(var R="",D=0,N=I.length;D<N;D++)I.charCodeAt(D)>127?R+="x":R+=I[D];if(!R.match(h)){var j=A.slice(0,S),L=A.slice(S+1),B=I.match(p);B&&(j.push(B[1]),L.unshift(B[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=e.toASCII(this.hostname));var F=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+F,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!f[T])for(S=0,M=l.length;S<M;S++){var H=l[S];if(-1!==b.indexOf(H)){var U=encodeURIComponent(H);U===H&&(U=escape(H)),b=b.split(H).join(U)}}var V=b.indexOf("#");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),i&&(this.query=g.parse(this.query)),b=b.slice(0,G)):i&&(this.search="",this.query={}),b&&(this.pathname=b),m[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var X=this.search||"";this.path=F+X}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&t.isObject(this.query)&&Object.keys(this.query).length&&(a=g.stringify(this.query));var s=this.search||a&&"?"+a||"";return n&&":"!==n.substr(-1)&&(n+=":"),this.slashes||(!n||m[n])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+i},n.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(t.isString(e)){var r=new n;r.parse(e,!1,!0),e=r}for(var i=new n,o=Object.keys(this),a=0;a<o.length;a++){var s=o[a];i[s]=this[s]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(i[u]=e[u])}return m[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!m[e.protocol]){for(var h=Object.keys(e),p=0;p<h.length;p++){var f=h[p];i[f]=e[f]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||d[e.protocol])i.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),i.pathname=g.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var y=i.pathname||"",v=i.search||"";i.path=y+v}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||b||i.host&&e.pathname,T=w,x=i.pathname&&i.pathname.split("/")||[],E=(g=e.pathname&&e.pathname.split("/")||[],i.protocol&&!m[i.protocol]);if(E&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),w=w&&(""===g[0]||""===x[0])),_)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,x=g;else if(g.length)x||(x=[]),x.pop(),x=x.concat(g),i.search=e.search,i.query=e.query;else if(!t.isNullOrUndefined(e.search)){if(E)i.hostname=i.host=x.shift(),(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift());return i.search=e.search,i.query=e.query,(!t.isNull(i.pathname)||!t.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=x.slice(-1)[0],k=(i.host||e.host||x.length>1)&&("."===S||".."===S)||""===S,O=0,P=x.length;P>=0;P--)"."===(S=x[P])?x.splice(P,1):".."===S?(x.splice(P,1),O++):O&&(x.splice(P,1),O--);if(!w&&!T)for(;O--;O)x.unshift("..");w&&""!==x[0]&&(!x[0]||"/"!==x[0].charAt(0))&&x.unshift(""),k&&"/"!==x.join("/").substr(-1)&&x.push("");var C,A=""===x[0]||x[0]&&"/"===x[0].charAt(0);E&&(i.hostname=i.host=A?"":x.length?x.shift():"",(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift()));return(w=w||i.host&&x.length)&&!A&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),(!t.isNull(i.pathname)||!t.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},V}();const te=(0,a.g)(ee);var ne,re,ie,oe,ae,se,le,ce,ue,he,pe,fe,de,me,ge,ye,ve,be;(re=ne||(ne={}))[re.WEBGL_LEGACY=0]="WEBGL_LEGACY",re[re.WEBGL=1]="WEBGL",re[re.WEBGL2=2]="WEBGL2",function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(ie||(ie={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(oe||(oe={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(ae||(ae={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(se||(se={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(le||(le={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ce||(ce={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(ue||(ue={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(he||(he={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(pe||(pe={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(fe||(fe={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(de||(de={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(me||(me={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(ge||(ge={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(ye||(ye={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(ve||(ve={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(be||(be={})),j.RETINA_PREFIX=/@([0-9\.]+)x/,j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var _e,we=!1,Te="5.3.12";function xe(e){var t;if(!we){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS "+Te+" - \u2730 "+e+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=window.console).log.apply(t,n)}else window.console&&window.console.log("PixiJS "+Te+" - "+e+" - http://www.pixijs.com/");we=!0}}function Ee(){return typeof _e>"u"&&(_e=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch{return!1}}()),_e}function Se(e,t){return void 0===t&&(t=[]),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function ke(e){var t=e.toString(16);return"#"+(t="000000".substr(0,6-t.length)+t)}function Oe(e){return"string"==typeof e&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)}var Pe=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[ae.NORMAL_NPM]=ae.NORMAL,e[ae.ADD_NPM]=ae.ADD,e[ae.SCREEN_NPM]=ae.SCREEN,t[ae.NORMAL]=ae.NORMAL_NPM,t[ae.ADD]=ae.ADD_NPM,t[ae.SCREEN]=ae.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function Ce(e,t){return Pe[t?1:0][e]}function Ae(e,t,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t):(n[0]=e[0],n[1]=e[1],n[2]=e[2]),n[3]=t,n}function Me(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var n=e>>16&255,r=e>>8&255,i=255&e;return(255*t<<24)+((n=n*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(i=i*t+.5|0)}function Ie(e,t,n,r){return(n=n||new Float32Array(4))[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,(r||void 0===r)&&(n[0]*=t,n[1]*=t,n[2]*=t),n[3]=t,n}function Re(e,t){void 0===t&&(t=null);var n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function De(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var Ne={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function je(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function Le(e){return!(e&e-1)&&!!e}function Be(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function Fe(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}function ze(e){return 0===e?0:e<0?-1:1}var He=0;function Ue(){return++He}var Ve={};function Ge(e,t,n){if(void 0===n&&(n=3),!Ve[t]){var r=(new Error).stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+"\nDeprecated since v"+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+"\nDeprecated since v"+e),console.warn(r))),Ve[t]=!0}}var Xe={},We=Object.create(null),Ye=Object.create(null);var qe=function(){function e(e,t,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||j.RESOLUTION,this.resize(e,t)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e},enumerable:!1,configurable:!0}),e}();function $e(e){var t,n,r,i=e.width,o=e.height,a=e.getContext("2d"),s=a.getImageData(0,0,i,o).data,l=s.length,c={top:null,left:null,right:null,bottom:null},u=null;for(t=0;t<l;t+=4)0!==s[t+3]&&(n=t/4%i,r=~~(t/4/i),null===c.top&&(c.top=r),(null===c.left||n<c.left)&&(c.left=n),(null===c.right||c.right<n)&&(c.right=n+1),(null===c.bottom||c.bottom<r)&&(c.bottom=r));return null!==c.top&&(i=c.right-c.left,o=c.bottom-c.top+1,u=a.getImageData(c.left,c.top,i,o)),{height:o,width:i,data:u}}var Ke,Ze=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Qe(e,t){if(void 0===t&&(t=window.location),0===e.indexOf("data:"))return"";t=t||window.location,Ke||(Ke=document.createElement("a")),Ke.href=e;var n=ee.parse(Ke.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}function Je(e,t){var n=j.RETINA_PREFIX.exec(e);return n?parseFloat(n[1]):void 0!==t?t:1}const et=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ye,CanvasRenderTarget:qe,DATA_URI:Ze,EventEmitter:F,ProgramCache:Xe,TextureCache:We,clearTextureCache:function(){var e;for(e in We)delete We[e];for(e in Ye)delete Ye[e]},correctBlendMode:Ce,createIndicesForQuads:Re,decomposeDataUri:function(e){var t=Ze.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},deprecation:Ge,destroyTextureCache:function(){var e;for(e in We)We[e].destroy();for(e in Ye)Ye[e].destroy()},determineCrossOrigin:Qe,earcut:a.aT,getBufferType:De,getResolutionOfUrl:Je,hex2rgb:Se,hex2string:ke,interleaveTypedArrays:function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,l=0;for(o=0;o<e.length;o++){var c=t[o],u=e[o],h=De(u);i[h]||(i[h]=new Ne[h](a)),s=i[h];for(var p=0;p<u.length;p++){s[(p/c|0)*r+l+p%c]=u[p]}l+=c}return new Float32Array(a)},isMobile:D,isPow2:Le,isWebGLSupported:Ee,log2:Be,nextPow2:je,premultiplyBlendMode:Pe,premultiplyRgba:Ae,premultiplyTint:Me,premultiplyTintToRgba:Ie,removeItems:Fe,rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},sayHello:xe,sign:ze,skipHello:function(){we=!0},string2hex:Oe,trimCanvas:$e,uid:Ue,url:te},Symbol.toStringTag,{value:"Module"}));var tt,nt=2*Math.PI,rt=180/Math.PI,it=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(tt||(tt={}));var ot=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=tt.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this},e.prototype.ceil=function(e,t){void 0===e&&(e=1),void 0===t&&(t=.001);var n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this},e}(),at=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.radius=n,this.type=tt.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n},e.prototype.getBounds=function(){return new ot(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),st=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=e,this.y=t,this.width=n,this.height=r,this.type=tt.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1},e.prototype.getBounds=function(){return new ot(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),lt=function(){function e(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r=Array.isArray(t[0])?t[0]:t;if("number"!=typeof r[0]){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].x,r[o].y);r=i}this.points=r,this.type=tt.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],l=this.points[2*o],c=this.points[2*o+1];s>t!=c>t&&e<(t-s)/(c-s)*(l-a)+a&&(n=!n)}return n},e}(),ct=function(){function e(e,t,n,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=tt.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var n=e-(this.x+this.radius),r=t-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i||(n=e-(this.x+this.width-this.radius))*n+r*r<=i||n*n+(r=t-(this.y+this.height-this.radius))*r<=i||(n=e-(this.x+this.radius))*n+r*r<=i)return!0}return!1},e}(),ut=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},e.prototype.copyTo=function(e){return e.set(this.x,this.y),e},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x=e,this.y=t,this},e}(),ht=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=e,this.scope=t}return e.prototype.clone=function(t,n){return void 0===t&&(t=this.cb),void 0===n&&(n=this.scope),new e(t,n,this._x,this._y)},e.prototype.set=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(e){return e.set(this._x,this._y),e},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),pt=function(){function e(e,t,n,r,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},e.prototype.apply=function(e,t){t=t||new ut;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new ut;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this},e.prototype.append=function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this},e.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),a=Math.atan2(n,t),s=Math.abs(o+a);return s<1e-5||Math.abs(nt-s)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=a),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},e.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ft=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yt=[],vt=[],bt=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];yt.push(t);for(var n=0;n<16;n++)for(var r=bt(ft[e]*ft[n]+mt[e]*dt[n]),i=bt(dt[e]*ft[n]+gt[e]*dt[n]),o=bt(ft[e]*mt[n]+mt[e]*gt[n]),a=bt(dt[e]*mt[n]+gt[e]*gt[n]),s=0;s<16;s++)if(ft[s]===r&&dt[s]===i&&mt[s]===o&&gt[s]===a){t.push(s);break}}for(e=0;e<16;e++){var l=new pt;l.set(ft[e],dt[e],mt[e],gt[e],0,0),vt.push(l)}}();var _t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ft[e]},uY:function(e){return dt[e]},vX:function(e){return mt[e]},vY:function(e){return gt[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return yt[e][t]},sub:function(e,t){return yt[e][_t.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2===(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?_t.S:_t.N:2*Math.abs(t)<=Math.abs(e)?e>0?_t.E:_t.W:t>0?e>0?_t.SE:_t.SW:e>0?_t.NE:_t.NW},matrixAppendRotationInv:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=vt[_t.inv(t)];i.tx=n,i.ty=r,e.append(i)}},wt=function(){function e(){this.worldTransform=new pt,this.localTransform=new pt,this.position=new ht(this.onChange,this,0,0),this.scale=new ht(this.onChange,this,1,1),this.pivot=new ht(this.onChange,this,0,0),this.skew=new ht(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},e.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();j.SORTABLE_CHILDREN=!1;var Tt=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?ot.EMPTY:((e=e||new ot(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i},e.prototype.addFrame=function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)},e.prototype.addFrameMatrix=function(e,t,n,r,i){var o=e.a,a=e.b,s=e.c,l=e.d,c=e.tx,u=e.ty,h=this.minX,p=this.minY,f=this.maxX,d=this.maxY,m=o*t+s*n+c,g=a*t+l*n+u;h=m<h?m:h,p=g<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+s*n+c)<h?m:h,p=(g=a*r+l*n+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*t+s*i+c)<h?m:h,p=(g=a*t+l*i+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,h=(m=o*r+s*i+c)<h?m:h,p=(g=a*r+l*i+u)<p?g:p,f=m>f?m:f,d=g>d?g:d,this.minX=h,this.minY=p,this.maxX=f,this.maxY=d},e.prototype.addVertexData=function(e,t,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var l=e[s],c=e[s+1];r=l<r?l:r,i=c<i?c:i,o=l>o?l:o,a=c>a?c:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},e.prototype.addVertices=function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)},e.prototype.addVerticesMatrix=function(e,t,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=e.a,s=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty,p=this.minX,f=this.minY,d=this.maxX,m=this.maxY,g=n;g<r;g+=2){var y=t[g],v=t[g+1],b=a*y+l*v+u,_=c*v+s*y+h;p=Math.min(p,b-i),d=Math.max(d,b+i),f=Math.min(f,_-o),m=Math.max(m,_+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=m},e.prototype.addBounds=function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i},e.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},e.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},e.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},e.prototype.pad=function(e,t){void 0===e&&(e=0),void 0===t&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r},e}(),xt=function(e,t){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Et(e,t){function n(){this.constructor=e}xt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var St=function(e){function t(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new wt,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Tt,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return Et(t,e),t.mixin=function(e){for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(e,i))}},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ot),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new ot),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Tt);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},t.prototype.toGlobal=function(e,t,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,r,i,o,a,s,l){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new kt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*rt},set:function(e){this.transform.rotation=e*it},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){var t;this._mask&&((t=this._mask.maskObject||this._mask).renderable=!0,t.isMask=!1);(this._mask=e,this._mask)&&((t=this._mask.maskObject||this._mask).renderable=!1,t.isMask=!0)},enumerable:!1,configurable:!0}),t}(F),kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return Et(t,e),t}(St);function Ot(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}St.prototype.displayObjectUpdateTransform=St.prototype.updateTransform;var Pt=function(e){function t(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=j.SORTABLE_CHILDREN,t.sortDirty=!1,t}return Et(t,e),t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.addChild(t[r]);else{var i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);Fe(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];if(t.length>1)for(var r=0;r<t.length;r++)this.removeChild(t[r]);else{var i=t[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Fe(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return t[0]},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Fe(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var n,r=e,i=t-r;if(i>0&&i<=t){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(Ot),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.maskObject||t._mask;n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(t,n){void 0===n&&(n=!1);var r=e.prototype.getLocalBounds.call(this,t);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);r=0;for(var i=this.children.length;r<i;r++)this.children[r].render(e);e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e},enumerable:!1,configurable:!0}),t}(St);Pt.prototype.containerUpdateTransform=Pt.prototype.updateTransform;var Ct={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};St.mixin(Ct);var At,Mt=100,It=function(){function e(e){this._hookDiv=null,(D.tablet||D.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=Mt+"px",t.style.height=Mt+"px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessability for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}},e.prototype.update=function(){var e=performance.now();if(!(D.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=this.renderer.resolution,r=t.width/this.renderer.width*n,i=t.height/this.renderer.height*n,o=this.div;o.style.left=t.left+"px",o.style.top=t.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var a=0;a<this.children.length;a++){var s=this.children[a];if(s.renderId!==this.renderId)s._accessibleActive=!1,Fe(this.children,a,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,a--;else{o=s._accessibleDiv;var l=s.hitArea,c=s.worldTransform;s.hitArea?(o.style.left=(c.tx+l.x*c.a)*r+"px",o.style.top=(c.ty+l.y*c.d)*i+"px",o.style.width=l.width*c.a*r+"px",o.style.height=l.height*c.d*i+"px"):(l=s.getBounds(),this.capHitArea(l),o.style.left=l.x*r+"px",o.style.top=l.y*i+"px",o.style.width=l.width*r+"px",o.style.height=l.height*i+"px",o.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(o.title=s.accessibleTitle),o.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&o.setAttribute("aria-label",s.accessibleHint)),(s.accessibleTitle!==o.title||s.tabIndex!==o.tabIndex)&&(o.title=s.accessibleTitle,o.tabIndex=s.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},e.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width=Mt+"px",t.style.height=Mt+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData),t.dispatchEvent(e.target.displayObject,"pointertap",t.eventData),t.dispatchEvent(e.target.displayObject,"tap",t.eventData)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();j.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(At||(At={}));var Rt=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.fn=e,this.context=t,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return void 0===t&&(t=null),this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(e){void 0===e&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}(),Dt=function(){function e(){var e=this;this._head=new Rt(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/j.TARGET_FPMS,this.elapsedMS=1/j.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t,n){return void 0===n&&(n=At.NORMAL),this._addListener(new Rt(e,t,n))},e.prototype.addOnce=function(e,t,n){return void 0===n&&(n=At.NORMAL),this._addListener(new Rt(e,t,n,!0))},e.prototype._addListener=function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(e){var t;if(void 0===e&&(e=performance.now()),e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*j.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,j.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Nt=function(){function e(){}return e.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,At.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Dt.shared:new Dt,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},e}(),jt=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ut,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)},e.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),Lt=function(e,t){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Bt=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),Ft=function(){function e(t){this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return 0!==(this._flags&e.FLAGS.OVER)},set:function(t){this._doSet(e.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return 0!==(this._flags&e.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(e.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return 0!==(this._flags&e.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(e.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),zt=function(){function e(){this._tempPoint=new ut}return e.prototype.recursiveFindHit=function(e,t,n,r,i){if(!t||!t.visible)return!1;var o=e.data.global,a=!1,s=i=t.interactive||i,l=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,l=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(o)||(r=!1)),l&&t.interactiveChildren&&t.children)for(var c=t.children,u=c.length-1;u>=0;u--){var h=c[u],p=this.recursiveFindHit(e,h,n,r,s);if(p){if(!h.parent)continue;s=!1,p&&(e.target&&(r=!1),a=!0)}}return i&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(a=!0),t.interactive&&(a&&!e.target&&(e.target=t),n&&n(e,t,!!a))),a},e.prototype.findHit=function(e,t,n,r){this.recursiveFindHit(e,t,n,r,!1)},e}(),Ht={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};St.mixin(Ht);var Ut={target:null,data:{global:null}},Vt=function(e){function t(t,n){var r=e.call(this)||this;return n=n||{},r.renderer=t,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new jt,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new Bt,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new zt,r._tempDisplayObject=new kt,r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(e,t){function n(){this.constructor=e}Lt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,t){return Ut.target=null,Ut.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(Ut,t,null,!0),Ut.target},t.prototype.setTargetElement=function(e,t){void 0===t&&(t=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Dt.system.add(this.tickerUpdate,this,At.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(Dt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var e=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove)return void(this._didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=t,e.emit(t,n),e[t]&&e[t](n))},t.prototype.delayDispatchEvent=function(e,t,n){this.delayedEvents.push({displayObject:e,eventString:t,eventData:n})},t.prototype.mapPositionToPoint=function(e,t,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*i,e.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},t.prototype.processInteractive=function(e,t,n,r){var i=this.search.findHit(e,t,n,r),o=this.delayedEvents;if(!o.length)return i;e.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var l=o[s],c=l.displayObject,u=l.eventString,h=l.eventData;h.stopsPropagatingAt===c&&(h.stopPropagationHint=!0),this.dispatchEvent(c,u,h)}return i},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,n){var r=e.data,i=e.data.identifier;if(n)if(t.trackedPointers[i]||(t.trackedPointers[i]=new Ft(i)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[i].rightDown=!0:t.trackedPointers[i].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,n){for(var r=this.normalizeToPointerData(e),i=r.length,o=e.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],l=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(c.data.originalEvent=e,this.processInteractive(c,this.lastObjectRendered,n,t||!o),this.emit(t?"pointercancel":"pointerup"+o,c),"mouse"===s.pointerType||"pen"===s.pointerType){var u=2===s.button;this.emit(u?"rightup"+o:"mouseup"+o,c)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(s.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var n=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===n.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,n){var r=e.data,i=e.data.identifier,o=t.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(s){var c=2===r.button,u=Ft.FLAGS,h=c?u.RIGHT_DOWN:u.LEFT_DOWN,p=void 0!==o&&o.flags&h;n?(this.dispatchEvent(t,c?"rightup":"mouseup",e),p&&(this.dispatchEvent(t,c?"rightclick":"click",e),l=!0)):p&&this.dispatchEvent(t,c?"rightupoutside":"mouseupoutside",e),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(t,"pointerup",e),a&&this.dispatchEvent(t,"touchend",e),o&&((!s||l)&&this.dispatchEvent(t,"pointertap",e),a&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),a&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[i]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);("mouse"===t[0].pointerType||"pen"===t[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var n=t.length,r=0;r<n;r++){var i=t[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=e,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mousemove",a)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,n){var r=e.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(t,"pointermove",e),i&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},t.prototype.processPointerOverOut=function(e,t,n){var r=e.data,i=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=t.trackedPointers[i];n&&!a&&(a=t.trackedPointers[i]=new Ft(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(t,"pointerover",e),o&&this.delayDispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):a.over&&(a.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),a.none&&delete t.trackedPointers[i]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],n=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,n);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),("mouse"===t.pointerType||"pen"===t.pointerType)&&this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t,n=e.pointerId;return 1===n||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[n]?t=this.activeInteractionData[n]:((t=this.interactionDataPool.pop()||new jt).identifier=n,this.activeInteractionData[n]=t),t.copyEvent(e),t},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,n){return e.data=n,this.mapPositionToPoint(n.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=n.global.x,t.globalY=n.global.y),n.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];typeof i.button>"u"&&(i.button=e.touches.length?1:0),typeof i.buttons>"u"&&(i.buttons=e.touches.length?1:0),typeof i.isPrimary>"u"&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,t.push(i)}else if(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent)t.push(e);else{var o=e;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=1),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,t.push(o)}return t},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(F),Gt=function(){function e(e){this.items=[],this._name=e,this._aliasCount=0}return e.prototype.emit=function(e,t,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,c=this.items;this._aliasCount++;for(var u=0,h=c.length;u<h;u++)c[u][l](e,t,n,r,i,o,a,s);return c===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},e.prototype.remove=function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(e){return-1!==this.items.indexOf(e)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Gt.prototype,{dispatch:{value:Gt.prototype.emit},run:{value:Gt.prototype.emit}}),j.PREFER_ENV=D.any?ne.WEBGL:ne.WEBGL2,j.STRICT_TEXTURE_CACHE=!1;var Xt=[];function Wt(e,t){if(!e)return null;var n="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=Xt.length-1;i>=0;--i){var o=Xt[i];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var Yt=function(e,t){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function qt(e,t){function n(){this.constructor=e}Yt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $t=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Gt("setRealSize"),this.onUpdate=new Gt("update"),this.onError=new Gt("onError")}return e.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},e.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(e,t,n){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(e,t){return!1},e}(),Kt=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=e.call(this,o,a)||this).data=t,r}return qt(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===de.UNPACK),n.width===t.width&&n.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,r.texImage2D(t.target,0,n.internalFormat,t.width,t.height,0,t.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}($t),Zt={scaleMode:he.NEAREST,format:le.RGBA,alphaMode:de.NPM},Qt=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this,i=(n=n||{}).alphaMode,o=n.mipmap,a=n.anisotropicLevel,s=n.scaleMode,l=n.width,c=n.height,u=n.wrapMode,h=n.format,p=n.type,f=n.target,d=n.resolution,m=n.resourceOptions;return t&&!(t instanceof $t)&&((t=Wt(t,m)).internal=!0),r.width=l||0,r.height=c||0,r.resolution=d||j.RESOLUTION,r.mipmap=void 0!==o?o:j.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==a?a:j.ANISOTROPIC_LEVEL,r.wrapMode=u||j.WRAP_MODE,r.scaleMode=void 0!==s?s:j.SCALE_MODE,r.format=h||le.RGBA,r.type=p||ue.UNSIGNED_BYTE,r.target=f||ce.TEXTURE_2D,r.alphaMode=void 0!==i?i:de.UNPACK,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.uid=Ue(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=l>0&&c>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(t),r}return qt(t,e),Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e,this.height=t,this._refreshPOT(),this.update(),this},t.prototype.setRealSize=function(e,t,n){return this.resolution=n||this.resolution,this.width=e/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=Le(this.realWidth)&&Le(this.realHeight)},t.prototype.setResolution=function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=this.width*t/e,this.height=this.height*t/e,this.emit("update",this)),this._refreshPOT()),this},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ye[this.cacheId],delete We[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,n,r){void 0===r&&(r=j.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;i?o=e:(e._pixiId||(e._pixiId="pixiid_"+Ue()),o=e._pixiId);var a=Ye[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new t(e,n)).cacheId=o,t.addToCache(a,o)),a},t.fromBuffer=function(e,n,r,i){e=e||new Float32Array(n*r*4);var o=new Kt(e,{width:n,height:r}),a=e instanceof Float32Array?ue.FLOAT:ue.UNSIGNED_BYTE;return new t(o,Object.assign(Zt,i||{width:n,height:r,type:a}))},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Ye[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Ye[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Ye[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ye[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Ye[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(F),Jt=function(e){function t(t,n){var r=this,i=n||{},o=i.width,a=i.height;(r=e.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<t;s++){var l=new Qt;r.items.push(l),r.itemDirtyIds.push(-2)}return r.length=t,r._load=null,r.baseTexture=null,r}return qt(t,e),t.prototype.initFromArray=function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof $t?this.addResourceAt(e[n],n):this.addResourceAt(Wt(e[n],t),n))},t.prototype.dispose=function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,t){if(!this.items[t])throw new Error("Index "+t+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this},t.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=t,this.items[n].on("update",t.update,t)},t.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",t.update,t)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.items.map(function(e){return e.resource}).filter(function(e){return e}).map(function(e){return e.load()});return this._load=Promise.all(t).then(function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)}),this._load},t}($t),en=function(e){function t(t,n){var r,i,o=this,a=n||{},s=a.width,l=a.height;return Array.isArray(t)?(r=t,i=t.length):i=t,o=e.call(this,i,{width:s,height:l})||this,r&&o.initFromArray(r,n),o}return qt(t,e),t.prototype.addBaseTextureAt=function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this},t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=ce.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,t,n){var r=this,i=r.length,o=r.itemDirtyIds,a=r.items,s=e.gl;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,t.format,this._width,this._height,i,0,t.format,t.type,null);for(var l=0;l<i;l++){var c=a[l];o[l]<c.dirtyId&&(o[l]=c.dirtyId,c.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,t.type,c.resource.source))}return!0},t}(Jt),tn=function(e){function t(t){var n=this,r=t,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=e.call(this,i,o)||this).source=t,n.noSubImage=!1,n}return qt(t,e),t.crossOrigin=function(e,t,n){void 0===n&&0!==t.indexOf("data:")?e.crossOrigin=Qe(t):!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous")},t.prototype.upload=function(e,t,n,r){var i=e.gl,o=t.realWidth,a=t.realHeight;return r=r||this.source,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===de.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,i.texImage2D(t.target,0,t.format,t.format,t.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,t.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(n,r),e.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}($t),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qt(t,e),t.test=function(e){var t=window.OffscreenCanvas;return!!(t&&e instanceof t)||e instanceof HTMLCanvasElement},t}(tn),rn=function(e){function t(n,r){var i=this,o=r||{},a=o.width,s=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(n&&n.length!==t.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=e.call(this,6,{width:a,height:s})||this;for(var u=0;u<t.SIDES;u++)i.items[u].target=ce.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=!1!==c,n&&i.initFromArray(n,r),!1!==l&&i.load(),i}return qt(t,e),t.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=ce.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error("Index "+t+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=ce.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this},t.prototype.upload=function(e,n,r){for(var i=this.itemDirtyIds,o=0;o<t.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(e,a,r),i[o]=a.dirtyId):i[o]<-1&&(e.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Jt),on=function(e){function t(t,n){var r=this;if(n=n||{},!(t instanceof HTMLImageElement)){var i=new Image;tn.crossOrigin(i,t,n.crossorigin),i.src=t,t=i}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:j.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return qt(t,e),t.prototype.load=function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})})),this._load},t.prototype.process=function(){var e=this,t=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(t,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===de.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},t.prototype.upload=function(t,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return"string"==typeof e||e instanceof HTMLImageElement},t}(tn),an=function(e){function t(t,n){var r=this;return n=n||{},(r=e.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=t,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return qt(t,e),t.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},t.prototype._loadSvg=function(){var e=this,t=new Image;tn.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,o=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,o=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=e.source;a.width=i,a.height=o,a._pixiId="canvas_"+Ue(),a.getContext("2d").drawImage(t,0,0,n,r,0,0,i,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var n=t.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,t){return"svg"===t||"string"==typeof e&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||"string"==typeof e&&0===e.indexOf("<svg")},t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(tn),sn=function(e){function t(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];tn.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var l=document.createElement("source"),c=n[s],u=c.src,h=c.mime,p=(u=u||n[s]).split("?").shift().toLowerCase(),f=p.substr(p.lastIndexOf(".")+1);h=h||t.MIME_TYPES[f]||"video/"+f,l.src=u,l.type=h,o.appendChild(l)}n=o}return(i=e.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return qt(t,e),t.prototype.update=function(t){if(!this.destroyed){var n=Dt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,t.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return 3===e.readyState||4===e.readyState},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Dt.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&Dt.shared.remove(this.update,this);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Dt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,n){return e instanceof HTMLVideoElement||t.TYPES.indexOf(n)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(tn),ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qt(t,e),t.test=function(e){return!!window.createImageBitmap&&e instanceof ImageBitmap},t}(tn);Xt.push(on,ln,nn,sn,an,Kt,rn,en);var cn={Resource:$t,BaseImageResource:tn,INSTALLED:Xt,autoDetectResource:Wt,AbstractMultiResource:Jt,ArrayResource:en,BufferResource:Kt,CanvasResource:nn,CubeResource:rn,ImageResource:on,SVGResource:an,VideoResource:sn,ImageBitmapResource:ln},un=function(){function e(e){this.renderer=e}return e.prototype.destroy=function(){this.renderer=null},e}(),hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qt(t,e),t.prototype.upload=function(e,t,n){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===de.UNPACK),n.width===t.width&&n.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(n.width=t.width,n.height=t.height,r.texImage2D(t.target,0,1===e.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0},t}(Kt),pn=function(){function e(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Gt("disposeFramebuffer"),this.multisample=be.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,t){return void 0===e&&(e=0),this.colorTextures[e]=t||new Qt(null,{scaleMode:he.NEAREST,resolution:1,mipmap:fe.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Qt(new hn(null,{width:this.width,height:this.height}),{scaleMode:he.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:fe.OFF,format:le.DEPTH_COMPONENT,type:ue.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(e,t){if(e=Math.ceil(e),t=Math.ceil(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),fn=function(e){function t(t){var n=this;"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});n=e.call(this,null,t)||this;var r=t||{},i=r.width,o=r.height;return n.mipmap=0,n.width=Math.ceil(i)||100,n.height=Math.ceil(o)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new pn(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return qt(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),this.framebuffer.resize(e*this.resolution,t*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Qt),dn=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(e,t,n){var r=t.width,i=t.height;if(n){var o=e.width/2/r,a=e.height/2/i,s=e.x/r+o,l=e.y/i+a;n=_t.add(n,_t.NW),this.x0=s+o*_t.uX(n),this.y0=l+a*_t.uY(n),n=_t.add(n,2),this.x1=s+o*_t.uX(n),this.y1=l+a*_t.uY(n),n=_t.add(n,2),this.x2=s+o*_t.uX(n),this.y2=l+a*_t.uY(n),n=_t.add(n,2),this.x3=s+o*_t.uX(n),this.y3=l+a*_t.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),mn=new dn,gn=function(e){function t(n,r,i,o,a,s){var l=e.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new ot(0,0,1,1)),n instanceof t&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=mn,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(a||0),!0===a)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=s?new ut(s.x,s.y):new ut(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return qt(t,e),t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var n=this.baseTexture;n&&n.url&&We[n.url]&&t.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},t.prototype.updateUvs=function(){this._uvs===mn&&(this._uvs=new dn),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=j.STRICT_TEXTURE_CACHE);var i="string"==typeof e,o=null;i?o=e:(e._pixiId||(e._pixiId="pixiid_"+Ue()),o=e._pixiId);var a=We[o];if(i&&r&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||(n.resolution||(n.resolution=Je(e)),(a=new t(new Qt(e,n))).baseTexture.cacheId=o,Qt.addToCache(a.baseTexture,o),t.addToCache(a,o)),a},t.fromURL=function(e,n){var r=Object.assign({autoLoad:!1},n?.resourceOptions),i=t.from(e,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then(function(){return Promise.resolve(i)})},t.fromBuffer=function(e,n,r,i){return new t(Qt.fromBuffer(e,n,r,i))},t.fromLoader=function(e,n,r){var i=new on(e);i.url=n;var o=new t(new Qt(i,{scaleMode:j.SCALE_MODE,resolution:Je(n)}));return r||(r=n),Qt.addToCache(o.baseTexture,r),t.addToCache(o,r),r!==n&&(Qt.addToCache(o.baseTexture,n),t.addToCache(o,n)),o},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),We[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),We[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=We[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete We[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)We[e.textureCacheIds[r]]===e&&delete We[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",l="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+s+" "+c)}this.valid=r&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(F);function yn(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}gn.EMPTY=new gn(new Qt),yn(gn.EMPTY),yn(gn.EMPTY.baseTexture),gn.WHITE=function(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new gn(new Qt(new nn(e)))}(),yn(gn.WHITE),yn(gn.WHITE.baseTexture);var vn=function(e){function t(t,n){var r=this,i=null;if(!(t instanceof fn)){var o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),i=arguments[0],n=null,t=new fn({width:o,height:a,scaleMode:s,resolution:l})}return(r=e.call(this,t,n)||this).legacyRenderer=i,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return qt(t,e),Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t,n){void 0===n&&(n=!0),e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,n&&this.baseTexture.resize(e,t),this.updateUvs()},t.prototype.setResolution=function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))},t.create=function(e){return"number"==typeof e&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new t(new fn(e))},t}(gn),bn=function(){function e(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(e,t){var n=new fn(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new vn(n)},e.prototype.getOptimalTexture=function(t,n,r){void 0===r&&(r=1);var i=e.SCREEN_KEY;t*=r,n*=r,(!this.enableFullScreen||t!==this._pixelsWidth||n!==this._pixelsHeight)&&(i=(65535&(t=je(t)))<<16|65535&(n=je(n))),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(t,n)),o.filterPoolKey=i,o.setResolution(r),o},e.prototype.getFilterTexture=function(e,t){var n=this.getOptimalTexture(e.width,e.height,t||e.resolution);return n.filterFrame=e.filterFrame,n},e.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},e.prototype.returnFilterTexture=function(e){this.returnTexture(e)},e.prototype.clear=function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var n=e.SCREEN_KEY,r=this.texturePool[n];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},e.SCREEN_KEY="screen",e}(),_n=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=5126),this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=a}return e.prototype.destroy=function(){this.buffer=null},e.from=function(t,n,r,i,o){return new e(t,n,r,i,o)},e}(),wn=0,Tn=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=wn++,this.disposeRunner=new Gt("disposeBuffer")}return e.prototype.update=function(e){this.data=e||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)},e}();function xn(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var En={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Sn={5126:4,5123:2,5121:1},kn=0,On={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Pn=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=kn++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Gt("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(e,t,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Tn||(t instanceof Array&&(t=new Float32Array(t)),t=new Tn(t));var l=e.split("|");if(l.length>1){for(var c=0;c<l.length;c++)this.addAttribute(l[c],t,n,r,i);return this}var u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new _n(u,n,r,i,o,a,s),this.instanced=this.instanced||s,this},e.prototype.getAttribute=function(e){return this.attributes[e]},e.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},e.prototype.addIndex=function(e){return e instanceof Tn||(e instanceof Array&&(e=new Uint16Array(e)),e=new Tn(e)),e.index=!0,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new Tn;for(e in this.attributes){var i=this.attributes[e],o=this.buffers[i.buffer];t.push(o.data),n.push(i.size*Sn[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;var a=new ArrayBuffer(4*n),s=null,l=0;for(o=0;o<e.length;o++){var c=t[o],u=e[o],h=xn(u);i[h]||(i[h]=new En[h](a)),s=i[h];for(var p=0;p<u.length;p++)s[(p/c|0)*r+l+p%c]=u[p];l+=c}return new Float32Array(a)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Tn(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];t.attributes[n]=new _n(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},e.merge=function(t){for(var n,r=new e,i=[],o=[],a=[],s=0;s<t.length;s++){n=t[s];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,a[l]=0}for(s=0;s<n.buffers.length;s++)i[s]=new(On[xn(n.buffers[s].data)])(o[s]),r.buffers[s]=new Tn(i[s]);for(s=0;s<t.length;s++){n=t[s];for(l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,a[l]),a[l]+=n.buffers[l].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.index=!0;var c=0,u=0,h=0,p=0;for(s=0;s<n.buffers.length;s++)if(n.buffers[s]!==n.indexBuffer){p=s;break}for(var s in n.attributes){var f=n.attributes[s];(0|f.buffer)===p&&(u+=f.size*Sn[f.type]/4)}for(s=0;s<t.length;s++){var d=t[s].indexBuffer.data;for(l=0;l<d.length;l++)r.indexBuffer.data[l+h]+=c;c+=n.buffers[p].data.length/u,h+=d.length}}return r},e}(),Cn=function(e){function t(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return qt(t,e),t}(Pn),An=function(e){function t(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Tn(t.vertices),t.uvBuffer=new Tn(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return qt(t,e),t.prototype.map=function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(Pn),Mn=0,In=function(){function e(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Mn++,this.static=!!t}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(t,n,r){this.uniforms[t]=new e(n,r)},e.from=function(t,n){return new e(t,n)},e}(),Rn=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ot,this.destinationFrame=new ot,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Dn=function(e){function t(t){var n=e.call(this,t)||this;return n.defaultFilterStack=[{}],n.texturePool=new bn,n.texturePool.setScreenSize(t.view),n.statePool=[],n.quad=new Cn,n.quadUv=new An,n.tempRect=new ot,n.activeState={},n.globalUniforms=new In({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return qt(t,e),t.prototype.push=function(e,t){for(var n=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new Rn,o=t[0].resolution,a=t[0].padding,s=t[0].autoFit,l=t[0].legacy,c=1;c<t.length;c++){var u=t[c];o=Math.min(o,u.resolution),a=this.useMaxPadding?Math.max(a,u.padding):a+u.padding,s=s&&u.autoFit,l=l||u.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),r.push(i),i.resolution=o,i.legacy=l,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(a),s&&i.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),i.sourceFrame.ceil(o),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var h=this.tempRect;h.width=i.sourceFrame.width,h.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,n.renderTexture.bind(i.renderTexture,i.sourceFrame,h),n.renderTexture.clear()},t.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*t.resolution,o[1]=i[1]*t.resolution,o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*i[2]-.5*o[2],a[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(t.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,l.renderTexture,me.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var c=t.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,t.resolution);u.filterFrame=c.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,c,u,me.CLEAR,t);var p=c;c=u,u=p}n[h].apply(this,c,l.renderTexture,me.BLEND,t),this.returnFilterTexture(c),this.returnFilterTexture(u)}t.clear(),this.statePool.push(t)},t.prototype.bindAndClear=function(e,t){if(void 0===t&&(t=me.CLEAR),e&&e.filterFrame){var n=this.tempRect;n.width=e.filterFrame.width,n.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,n)}else this.renderer.renderTexture.bind(e);"boolean"==typeof t&&(t=t?me.CLEAR:me.BLEND,Ge("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(t===me.CLEAR||t===me.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},t.prototype.applyFilter=function(e,t,n,r){var i=this.renderer;this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.state.set(e.state),i.shader.bind(e),e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(se.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(se.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=t._texture.orig,a=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(pt.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,t,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(e,t,n)},t.prototype.getFilterTexture=function(e,t){if("number"==typeof e){var n=e;e=t,t=n}e=e||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);return r.filterFrame=e.filterFrame,r},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(un),Nn=function(){function e(e){this.renderer=e}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(e){},e}(),jn=function(e){function t(t){var n=e.call(this,t)||this;return n.emptyRenderer=new Nn(t),n.currentRenderer=n.emptyRenderer,n}return qt(t,e),t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)},t.prototype.boundArray=function(e,t,n,r){for(var i=e.elements,o=e.ids,a=e.count,s=0,l=0;l<a;l++){var c=i[l],u=c._batchLocation;if(u>=0&&u<r&&t[u]===c)o[l]=u;else for(;s<r;){var h=t[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[l]=s,c._batchLocation=s,t[s]=c;break}s++}}},t}(un),Ln=0,Bn=function(e){function t(t){var n=e.call(this,t)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),t.view.addEventListener("webglcontextlost",n.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return qt(t,e),Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Ln++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Ln++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},t.prototype.createContext=function(e,t){var n;if(j.PREFER_ENV>=ne.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in window&&e instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(un),Fn=function(){return function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=be.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}}(),zn=new ot,Hn=function(e){function t(t){var n=e.call(this,t)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new pn(10,10),n.msaaSamples=null,n}return qt(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ot,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;j.PREFER_ENV===ne.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,t){var n=this.gl;if(e){var r=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==e.dirtyId&&(r.dirtyId=e.dirtyId,r.dirtyFormat!==e.dirtyFormat?(r.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):r.dirtySize!==e.dirtySize&&(r.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var i=0;i<e.colorTextures.length;i++){var o=e.colorTextures[i];this.renderer.texture.unbind(o.parentTextureArray||o)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,t,n,r){var i=this.viewport;(i.width!==n||i.height!==r||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,t,n,r,i){void 0===i&&(i=oe.COLOR|oe.DEPTH);var o=this.gl;o.clearColor(e,t,n,r),o.clear(i)},t.prototype.initFramebuffer=function(e){var t=this.gl,n=new Fn(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));for(var r=e.colorTextures,i=0;i<r.length;i++)this.renderer.texture.bind(r[i],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID],r=e.colorTextures.length;t.drawBuffers||(r=Math.min(r,1)),n.multisample>1&&(n.msaaBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.RGBA8,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,n.msaaBuffer));for(var i=[],o=0;o<r;o++)if(!(0===o&&n.multisample>1)){var a=e.colorTextures[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,a.target,s._glTextures[this.CONTEXT_UID].texture,0),i.push(t.COLOR_ATTACHMENT0+o)}if((i.length>1&&t.drawBuffers(i),e.depthTexture)&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}!n.stencil&&(e.stencil||e.depth)&&(n.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height),e.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n.stencil))},t.prototype.detectSamples=function(e){var t=this.msaaSamples,n=be.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=be.NONE),n},t.prototype.blit=function(e,t,n){var r=this,i=r.current,o=r.renderer,a=r.gl,s=r.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var l=i.glFramebuffers[s];if(l){if(!e){if(l.multisample<=1)return;l.blitFramebuffer||(l.blitFramebuffer=new pn(i.width,i.height),l.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(e=l.blitFramebuffer).width=i.width,e.height=i.height}t||((t=zn).width=i.width,t.height=i.height),n||(n=t);var c=t.width===n.width&&t.height===n.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,l.framebuffer),a.blitFramebuffer(t.x,t.y,t.width,t.height,n.x,n.y,n.width,n.height,a.COLOR_BUFFER_BIT,c?a.NEAREST:a.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.stencil&&r.deleteRenderbuffer(n.stencil))}},t.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.enableStencil();var n=e.width,r=e.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ot},t}(un),Un=function(){return function(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}(),Vn={5126:4,5123:2,5121:1},Gn=function(e){function t(t){var n=e.call(this,t)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return qt(t,e),t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;j.PREFER_ENV===ne.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,o){return r.drawElementsInstancedANGLE(e,t,n,i,o)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex},t.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[t.program.id]||this.initGeometryVao(e,t.program,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.gl,n=0;n<e.buffers.length;n++){var r=e.buffers[n],i=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==i.updateID){i.updateID=r._updateID;var o=r.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;if(t.bindBuffer(o,i.buffer),this._boundBuffer=i,i.byteLength>=r.data.byteLength)t.bufferSubData(o,0,r.data);else{var a=r.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=r.data.byteLength,t.bufferData(o,r.data,a)}}}},t.prototype.checkCompatibility=function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var o in n)r[o]&&i.push(o);return i.join("-")},t.prototype.initGeometryVao=function(e,t,n){void 0===n&&(n=!0),this.checkCompatibility(e,t);var r=this.gl,i=this.CONTEXT_UID,o=this.getSignature(e,t),a=e.glVertexArrayObjects[this.CONTEXT_UID],s=a[o];if(s)return a[t.id]=s,s;var l=e.buffers,c=e.attributes,u={},h={};for(var p in l)u[p]=0,h[p]=0;for(var p in c)!c[p].size&&t.attributeData[p]?c[p].size=t.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[c[p].buffer]+=c[p].size*Vn[c[p].type];for(var p in c){var f=c[p],d=f.size;void 0===f.stride&&(u[f.buffer]===d*Vn[f.type]?f.stride=0:f.stride=u[f.buffer]),void 0===f.start&&(f.start=h[f.buffer],h[f.buffer]+=d*Vn[f.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var m=0;m<l.length;m++){var g=l[m];g._glBuffers[i]||(g._glBuffers[i]=new Un(r.createBuffer()),this.managedBuffers[g.id]=g,g.disposeRunner.add(this)),n&&g._glBuffers[i].refCount++}return this.activateVao(e,t),this._activeVao=s,a[t.id]=s,a[o]=s,s},t.prototype.disposeBuffer=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(e,t){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var n=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,i=e.buffers;if(e.disposeRunner.remove(this),n){for(var o=0;o<i.length;o++){var a=i[o]._glBuffers[this.CONTEXT_UID];a.refCount--,0===a.refCount&&!t&&this.disposeBuffer(i[o],t)}if(!t)for(var s in n)if("g"===s[0]){var l=n[s];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e);t=Object.keys(this.managedBuffers);for(n=0;n<t.length;n++)this.disposeBuffer(this.managedBuffers[t[n]],e)},t.prototype.activateVao=function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=e.buffers,o=e.attributes;e.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[r].buffer);var a=null;for(var s in o){var l=o[s],c=i[l.buffer]._glBuffers[r];if(t.attributeData[s]){a!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),a=c);var u=t.attributeData[s].location;if(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(u,1)}}}},t.prototype.draw=function(e,t,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,t||o.getSize(),r||1):i.drawArrays(e,n,t||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(un),Xn=function(){function e(e){void 0===e&&(e=null),this.type=ve.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ve.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function Wn(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function Yn(e,t,n,r){var i=Wn(e,e.VERTEX_SHADER,t),o=Wn(e,e.FRAGMENT_SHADER,n),a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,o),r)for(var s in r)e.bindAttribLocation(a,r[s],s);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(i))),e.getShaderParameter(o,e.COMPILE_STATUS)||(console.warn(n),console.error(e.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(i),e.deleteShader(o),a}function qn(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function $n(e,t){switch(e){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return qn(2*t);case"bvec3":return qn(3*t);case"bvec4":return qn(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Kn,Zn={},Qn=Zn;function Jn(){if(Qn===Zn||Qn&&Qn.isContextLost()){var e=document.createElement("canvas"),t=void 0;j.PREFER_ENV>=ne.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),Qn=t}return Qn}function er(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===ye.HIGH&&n!==ye.HIGH&&(r=ye.MEDIUM),"precision "+r+" float;\n"+e}return n!==ye.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var tr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function nr(e){return tr[e]}var rr=null,ir={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function or(e,t){if(!rr){var n=Object.keys(ir);rr={};for(var r=0;r<n.length;++r){var i=n[r];rr[e[i]]=ir[i]}}return rr[t]}var ar=[{test:function(e){return"float"===e.type&&1===e.size},code:function(e){return'\n            if(uv["'+e+'"] !== ud["'+e+'"].value)\n            {\n                ud["'+e+'"].value = uv["'+e+'"]\n                gl.uniform1f(ud["'+e+'"].location, uv["'+e+'"])\n            }\n            '}},{test:function(e){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+e+'"], t);\n\n            if(ud["'+e+'"].value !== t)\n            {\n                ud["'+e+'"].value = t;\n                gl.uniform1i(ud["'+e+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'+e+'"].location, false, uv["'+e+'"].toArray(true));\n            '}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&void 0!==t.x},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+e+'"].location, v.x, v.y);\n                }'}},{test:function(e){return"vec2"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+e+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&void 0!==t.width},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+e+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(e){return"vec4"===e.type&&1===e.size},code:function(e){return'\n                cv = ud["'+e+'"].value;\n                v = uv["'+e+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+e+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],sr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},lr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var cr,ur=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function hr(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == "+n+".0){}");return t}function pr(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=ur.replace(/%forloop%/gi,hr(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}var fr=0,dr={},mr=function(){function e(t,n,r){void 0===r&&(r="pixi-shader"),this.id=fr++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),dr[r]?(dr[r]++,r+="-"+dr[r]):dr[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=er(this.vertexSrc,j.PRECISION_VERTEX,ye.HIGH),this.fragmentSrc=er(this.fragmentSrc,j.PRECISION_FRAGMENT,function(){if(!Kn){Kn=ye.MEDIUM;var e=Jn();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Kn=t.precision?ye.HIGH:ye.MEDIUM}}return Kn}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(e,t){var n=Jn();if(n){var r=Yn(n,e,t);this.attributeData=this.getAttributeData(r,n),this.uniformData=this.getUniformData(r,n),n.deleteProgram(r)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(e,t){for(var n={},r=[],i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=t.getActiveAttrib(e,o),s=or(t,a.type),l={type:s,name:a.name,size:nr(s),location:0};n[a.name]=l,r.push(l)}r.sort(function(e,t){return e.name>t.name?1:-1});for(o=0;o<r.length;o++)r[o].location=o;return n},e.prototype.getUniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(e,i),a=o.name.replace(/\[.*?\]$/,""),s=o.name.match(/\[.*?\]$/),l=or(t,o.type);n[a]={type:l,size:o.size,isArray:s,value:$n(l,o.size)}}return n},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,n,r){var i=t+n,o=Xe[i];return o||(Xe[i]=o=new e(t,n,r)),o},e}(),gr=function(){function e(e,t){for(var n in this.program=e,this.uniformGroup=t?t instanceof In?t:new In(t):new In({}),e.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return e.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(t,n,r){return new e(mr.from(t,n),r)},e}(),yr=function(){function e(){this.data=0,this.blendMode=ae.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==ae.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),vr=function(e){function t(n,r,i){var o=this,a=mr.from(n||t.defaultVertexSrc,r||t.defaultFragmentSrc);return(o=e.call(this,a,i)||this).padding=0,o.resolution=j.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new yr,o}return qt(t,e),t.prototype.apply=function(e,t,n,r,i){e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),t}(gr),br=new pt,_r=function(){function e(e,t){this._texture=e,this.mapCoord=new pt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(br.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(br));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0},e}(),wr=function(e){function t(t){var n=this,r=new pt;return n=e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,t.renderable=!1,n.maskSprite=t,n.maskMatrix=r,n}return qt(t,e),t.prototype.apply=function(e,t,n,r){var i=this.maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new _r(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))},t}(vr),Tr=function(e){function t(t){var n=e.call(this,t)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return qt(t,e),t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Xn;r.pooled=!0,r.maskObject=t,n=r}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=e,n.type){case ve.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case ve.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case ve.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},t.prototype.pop=function(e){var t=this.maskStack.pop();if(t&&t._target===e){switch(t.type){case ve.SCISSOR:this.renderer.scissor.pop();break;case ve.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ve.SPRITE:this.popSpriteMask()}t.reset(),t.pooled&&this.maskDataPool.push(t)}},t.prototype.detect=function(e){var t=e.maskObject;if(t.isSprite)e.type=ve.SPRITE;else if(e.type=ve.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var n=t.worldTransform,r=Math.atan2(n.b,n.a),i=Math.atan2(n.d,n.c);r=Math.round(r*(180/Math.PI)*100),i=((i=Math.round(i*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===i&&(e.type=ve.SCISSOR)}},t.prototype.pushSpriteMask=function(e){var t=e.maskObject,n=e._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new wr(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t;var i=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=i,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(un),xr=function(e){function t(t){var n=e.call(this,t)||this;return n.maskStack=[],n.glConst=0,n}return qt(t,e),t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.maskStack=null},t}(un),Er=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return qt(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var t=e.maskObject;t.renderable=!0;var n=e._scissorRect,r=t.getBounds(!0),i=this.renderer.gl;t.renderable=!1,n?r.fit(n):i.enable(i.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=r,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current,n=this.renderer.projection,r=n.transform,i=n.sourceFrame,o=n.destinationFrame,a=t?t.resolution:this.renderer.resolution,s=(e.x-i.x)*a+o.x,l=(e.y-i.y)*a+o.y,c=e.width*a,u=e.height*a;r&&(s+=r.tx*a,l+=r.ty*a),t||(l=this.renderer.height-u-l),this.renderer.gl.scissor(s,l,c,u)},t}(xr),Sr=function(e){function t(t){var n=e.call(this,t)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return qt(t,e),t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var t=this.renderer.gl;0===this.getStackLength()?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(xr),kr=function(e){function t(t){var n=e.call(this,t)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new pt,n.transform=null,n}return qt(t,e),t.prototype.update=function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,t,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d},t.prototype.setTransform=function(e){},t}(un),Or=new ot,Pr=new ot,Cr=new ot,Ar=function(e){function t(t){var n=e.call(this,t)||this;return n.clearColor=t._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new ot,n.destinationFrame=new ot,n}return qt(t,e),t.prototype.bind=function(e,t,n){void 0===e&&(e=null);var r,i,o,a=this.renderer;this.current=e,e?(o=(r=e.baseTexture).resolution,t||(Or.width=e.frame.width,Or.height=e.frame.height,t=Or),n||(Pr.x=e.frame.x,Pr.y=e.frame.y,Pr.width=t.width,Pr.height=t.height,n=Pr),i=r.framebuffer):(o=a.resolution,t||(Or.width=a.screen.width,Or.height=a.screen.height,t=Or),n||((n=Or).width=t.width,n.height=t.height)),Cr.x=n.x*o,Cr.y=n.y*o,Cr.width=n.width*o,Cr.height=n.height*o,this.renderer.framebuffer.bind(i,Cr),this.renderer.projection.update(n,t,o,!i),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t)},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(un),Mr=function(){return function(){}}(),Ir=function(){function e(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),Rr=0,Dr={textureCount:0},Nr=function(e){function t(t){var n=e.call(this,t)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=Rr++,n}return qt(t,e),t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof cr)return cr;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");cr=!0===e({a:"b"},"a","b")}catch{cr=!1}return cr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,t){e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Dr.textureCount=0,this.syncUniformGroup(e.uniformGroup,Dr)),r},t.prototype.setUniforms=function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,t){var n=this.getglProgram();(!e.static||e.dirtyId!==n.uniformGroups[e.id])&&(n.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))},t.prototype.syncUniforms=function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=function(e,t){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in e.uniforms){var i=t[r];if(i){for(var o=e.uniforms[r],a=!1,s=0;s<ar.length;s++)if(ar[s].test(i,o)){n.push(ar[s].code(r,o)),a=!0;break}if(!a){var l=(1===i.size?sr:lr)[i.type].replace("location",'ud["'+r+'"].location');n.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+l+";")}}else e.uniforms[r].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(e,t){var n=e.uniforms,r=[];for(var i in n)r.push(i),t[i]&&r.push(t[i].type);return r.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(e){var t=this.gl,n=e.program,r={};for(var i in n.attributeData)r[i]=n.attributeData[i].location;var o=Yn(t,n.vertexSrc,n.fragmentSrc,r),a={};for(var i in n.uniformData){var s=n.uniformData[i];a[i]={location:t.getUniformLocation(o,i),value:$n(s.type,s.size)}}var l=new Ir(o,a);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(un);var jr=function(e){function t(t){var n=e.call(this,t)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=ae.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new yr,n.defaultState.blend=!0,n}return qt(t,e),t.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,t){return void 0===t&&(t=[]),t[ae.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.ADD]=[e.ONE,e.ONE],t[ae.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.NONE]=[0,0],t[ae.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ae.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ae.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ae.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ae.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ae.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ae.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ae.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ae.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ae.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ae.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):!t&&-1!==n&&this.checks.splice(n,1)},t.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},t.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},t}(un),Lr=function(e){function t(t){var n=e.call(this,t)||this;return n.count=0,n.checkCount=0,n.maxIdle=j.GC_MAX_IDLE,n.checkCountMax=j.GC_MAX_CHECK_COUNT,n.mode=j.GC_MODE,n}return qt(t,e),t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ge.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){var o=0;for(r=0;r<t.length;r++)null!==t[r]&&(t[o++]=t[r]);t.length=o}},t.prototype.unload=function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},t}(un),Br=function(){return function(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}}(),Fr=function(e){function t(t){var n=e.call(this,t)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new Qt,n}return qt(t,e),t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Br(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Br(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(e,t){void 0===t&&(t=0);var n=this.gl;if(e){if((e=e.castToBaseTexture()).parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)},t.prototype.initTexture=function(e){var t=new Br(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},t.prototype.initTextureType=function(e,t){if(t.internalFormat=e.format,t.type=e.type,2===this.webGLVersion){var n=this.renderer.gl;e.type===n.FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA32F),e.type===ue.HALF_FLOAT&&(t.type=n.HALF_FLOAT),t.type===n.HALF_FLOAT&&e.format===n.RGBA&&(t.internalFormat=n.RGBA16F)}},t.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var n=this.renderer;if(this.initTextureType(e,t),!e.resource||!e.resource.upload(n,e,t)){var r=e.realWidth,i=e.realHeight,o=n.gl;(t.width!==r||t.height!==i||t.dirtyId<0)&&(t.width=r,t.height=i,o.texImage2D(e.target,0,t.internalFormat,r,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&Fe(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==fe.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=pe.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,t){var n=this.gl;if(t.mipmap&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===he.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===he.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===he.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===he.LINEAR?n.LINEAR:n.NEAREST)},t}(un),zr={FilterSystem:Dn,BatchSystem:jn,ContextSystem:Bn,FramebufferSystem:Hn,GeometrySystem:Gn,MaskSystem:Tr,ScissorSystem:Er,StencilSystem:Sr,ProjectionSystem:kr,RenderTextureSystem:Ar,ShaderSystem:Nr,StateSystem:jr,TextureGCSystem:Lr,TextureSystem:Fr},Hr=new pt,Ur=function(e){function t(t,n){void 0===t&&(t=ie.UNKNOWN);var r=e.call(this)||this;return(n=Object.assign({},j.RENDER_OPTIONS,n)).roundPixels&&(j.ROUND_PIXELS=n.roundPixels,Ge("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=n,r.type=t,r.screen=new ot(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||j.RESOLUTION,r.transparent=n.transparent,r.autoDensity=n.autoDensity||n.autoResize||!1,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}return qt(t,e),t.prototype.initPlugins=function(e){for(var t in e)this.plugins[t]=new e[t](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=e+"px",this.view.style.height=t+"px"),this.emit("resize",e,t)},t.prototype.generateTexture=function(e,t,n,r){0===(r=r||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var i=vn.create({width:0|r.width,height:0|r.height,scaleMode:t,resolution:n});return Hr.tx=-r.x,Hr.ty=-r.y,this.render(e,i,!1,Hr,!!e.parent),i},t.prototype.destroy=function(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=ie.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=ke(e),Se(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),t}(F),Vr=function(e){function t(n){var r=e.call(this,ie.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Gt("destroy"),contextChange:new Gt("contextChange"),reset:new Gt("reset"),update:new Gt("update"),postrender:new Gt("postrender"),prerender:new Gt("prerender"),resize:new Gt("resize")},r.globalUniforms=new In({projectionMatrix:new pt},!0),r.addSystem(Tr,"mask").addSystem(Bn,"context").addSystem(jr,"state").addSystem(Nr,"shader").addSystem(Fr,"texture").addSystem(Gn,"geometry").addSystem(Hn,"framebuffer").addSystem(Er,"scissor").addSystem(Sr,"stencil").addSystem(kr,"projection").addSystem(Lr,"textureGC").addSystem(Dn,"filter").addSystem(Ar,"renderTexture").addSystem(jn,"batch"),r.initPlugins(t.__plugins),n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:n.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,xe(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return qt(t,e),t.create=function(e){if(Ee())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.addSystem=function(e,t){t||(t=e.name);var n=new e(this);if(this[t])throw new Error('Whoops! The name "'+t+'" is already in use');for(var r in this[t]=n,this.runners)this.runners[r].add(n);return this},t.prototype.render=function(e,t,n,r,i){if(this.renderingToScreen=!t,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(t||(this._lastObjectRendered=e),!i){var o=e.enableTempParent();e.updateTransform(),e.disableTempParent(o)}this.renderTexture.bind(t),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.runners.resize.emit(t,n)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(t){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();e.prototype.destroy.call(this,t),this.gl=null},t.registerPlugin=function(e,n){t.__plugins=t.__plugins||{},t.__plugins[e]=n},t}(Ur);function Gr(e){return Vr.create(e)}var Xr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Wr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Yr=function(){return function(){this.texArray=null,this.blend=0,this.type=se.TRIANGLES,this.start=0,this.size=0,this.data=null}}(),qr=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},e}(),$r=function(){function e(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(e){return this[e+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},e}(),Kr=function(e){function t(t){var n=e.call(this,t)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=yr.for2d(),n.size=4*j.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),t.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return qt(t,e),t.prototype.contextChange=function(){var e=this.renderer.gl;j.PREFER_ENV===ne.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),j.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=pr(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,n=t._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;e.length<r;)e.push(new Yr);for(;n.length<i;)n.push(new qr);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this._bufferedTextures,n=this.MAX_TEXTURES,r=t._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++Qt._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var p=e[h];e[h]=null,p._batchEnabled!==s&&(c.count>=n&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++s),p._batchEnabled=s,p.touched=a,c.elements[c.count++]=p)}c.count>0&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++s);for(h=0;h<o.length;h++)o[h]=null;Qt._globalBatch=s},t.prototype.buildDrawCalls=function(e,n,r){var i=this,o=i._bufferedElements,a=i._attributeBuffer,s=i._indexBuffer,l=i.vertexSize,c=t._drawCallPool,u=this._dcIndex,h=this._aIndex,p=this._iIndex,f=c[u];f.start=this._iIndex,f.texArray=e;for(var d=n;d<r;++d){var m=o[d],g=m._texture.baseTexture,y=Pe[g.alphaMode?1:0][m.blendMode];o[d]=null,n<d&&f.blend!==y&&(f.size=p-f.start,n=d,(f=c[++u]).texArray=e,f.start=p),this.packInterleavedGeometry(m,a,s,h,p),h+=m.vertexData.length/2*l,p+=m.indices.length,f.blend=y}n<r&&(f.size=p-f.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=p},t.prototype.bindAndClearTexArray=function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,t=e._packedGeometries,n=e._attributeBuffer,r=e._indexBuffer;j.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=t._drawCallPool,a=null,s=0;s<e;s++){var l=o[s],c=l.texArray,u=l.type,h=l.size,p=l.start,f=l.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=f,i.set(this.state),r.drawElements(u,h,r.UNSIGNED_SHORT,2*p)}},t.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),j.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var t=je(Math.ceil(e/8)),n=Be(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new $r(r*this.vertexSize*4)),i},t.prototype.getIndexBuffer=function(e){var t=je(Math.ceil(e/12)),n=Be(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},t.prototype.packInterleavedGeometry=function(e,t,n,r,i){for(var o=t.uint32View,a=t.float32View,s=r/this.vertexSize,l=e.uvs,c=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),f=p<1&&e._texture.baseTexture.alphaMode?Me(e._tintRGB,p):e._tintRGB+(255*p<<24),d=0;d<u.length;d+=2)a[r++]=u[d],a[r++]=u[d+1],a[r++]=l[d],a[r++]=l[d+1],o[r++]=f,a[r++]=h;for(d=0;d<c.length;d++)n[i++]=s+c[d]},t._drawCallPool=[],t._textureArrayPool=[],t}(Nn),Zr=function(){function e(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=In.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+e)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new mr(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:this.defaultGroupCache[e]};return new gr(this.programCache[e],i)},e.prototype.generateSampleSrc=function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < "+n+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"},e}(),Qr=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n._buffer=new Tn(null,t,!1),n._indexBuffer=new Tn(null,t,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,ue.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,ue.FLOAT).addAttribute("aColor",n._buffer,4,!0,ue.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,ue.FLOAT).addIndex(n._indexBuffer),n}return qt(t,e),t}(Pn),Jr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ei="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ti=function(){function e(){}return e.create=function(e){var t=Object.assign({vertex:Jr,fragment:ei,geometryClass:Qr,vertexSize:6},e),n=t.vertex,r=t.fragment,i=t.vertexSize,o=t.geometryClass;return function(e){function t(t){var a=e.call(this,t)||this;return a.shaderGenerator=new Zr(n,r),a.geometryClass=o,a.vertexSize=i,a}return qt(t,e),t}(Kr)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Jr},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return ei},enumerable:!1,configurable:!0}),e}(),ni=ti.create(),ri=function(){function e(t){var n=this;t=Object.assign({forceCanvas:!1},t),this.renderer=Gr(t),this.stage=new Pt,e._plugins.forEach(function(e){e.init.call(n,t)})}return e.registerPlugin=function(t){e._plugins.push(t)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach(function(e){e.destroy.call(r)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null},e}();ri._plugins=[];var ii=function(){function e(){}return e.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){window.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===window)e=window.innerWidth,n=window.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},e.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();ri.registerPlugin(ii);var oi,ai,si=new ot,li=function(){function e(e){this.renderer=e,e.extract=this}return e.prototype.image=function(e,t,n){var r=new Image;return r.src=this.base64(e,t,n),r},e.prototype.base64=function(e,t,n){return this.canvas(e).toDataURL(t,n)},e.prototype.canvas=function(t){var n,r,i,o=this.renderer,a=!1,s=!1;t&&(t instanceof vn?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=si).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),u=new qe(l,c,1),h=new Uint8Array(4*l*c),p=o.gl;p.readPixels(r.x*n,r.y*n,l,c,p.RGBA,p.UNSIGNED_BYTE,h);var f=u.context.getImageData(0,0,l,c);if(e.arrayPostDivide(h,f.data),u.context.putImageData(f,0,0),a){var d=new qe(u.width,u.height,1);d.context.scale(1,-1),d.context.drawImage(u.canvas,0,-c),u.destroy(),u=d}return s&&i.destroy(!0),u.canvas},e.prototype.pixels=function(t){var n,r,i,o=this.renderer,a=!1;t&&(t instanceof vn?i=t:(i=this.renderer.generateTexture(t),a=!0)),i?(n=i.baseTexture.resolution,r=i.frame,o.renderTexture.bind(i)):(n=o.resolution,(r=si).width=o.width,r.height=o.height,o.renderTexture.bind(null));var s=r.width*n,l=r.height*n,c=new Uint8Array(4*s*l),u=o.gl;return u.readPixels(r.x*n,r.y*n,s,l,u.RGBA,u.UNSIGNED_BYTE,c),a&&i.destroy(!0),e.arrayPostDivide(c,c),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(e,t){for(var n=0;n<e.length;n+=4){var r=t[n+3]=e[n+3];0!==r?(t[n]=Math.round(Math.min(255*e[n]/r,255)),t[n+1]=Math.round(Math.min(255*e[n+1]/r,255)),t[n+2]=Math.round(Math.min(255*e[n+2]/r,255))):(t[n]=e[n],t[n+1]=e[n+1],t[n+2]=e[n+2])}},e}();var ci=(ai||(ai=1,oi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;const n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[t.strictMode?"strict":"loose"].exec(e),i={};let o=14;for(;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}),oi);const ui=(0,a.g)(ci);class hi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;this._fn=e,this._once=t,this._thisArg=n,this._next=this._prev=this._owner=null}detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}function pi(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}class fi{constructor(){this._head=this._tail=void 0}handlers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._head;if(e)return!!t;const n=[];for(;t;)n.push(t),t=t._next;return n}has(e){if(!(e instanceof hi))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}dispatch(){let e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return pi(this,new hi(e,!1,t))}once(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return pi(this,new hi(e,!0,t))}detach(e){if(!(e instanceof hi))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this}detachAll(){let e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}function di(){}function mi(e,t,n,r){var i=0,o=e.length;!function a(s){s||i===o?n&&n(s):r?setTimeout(function(){t(e[i++],a)},1):t(e[i++],a)}()}function gi(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function yi(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}var vi=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),bi=null;function _i(){}var wi=function(){function e(t,n,r){if("string"!=typeof t||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=t,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_i,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new fi,this.onProgress=new fi,this.onComplete=new fi,this.onAfterMiddleware=new fi}e.setExtensionLoadType=function(t,n){Ti(e._loadTypeMap,t,n)},e.setExtensionXhrType=function(t,n){Ti(e._xhrTypeMap,t,n)};var t=e.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var n=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(n)},1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:vi&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t._hasFlag=function(e){return 0!==(this._flags&e)},t._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&typeof window.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&typeof window.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(e,this.url[n],Array.isArray(t)?t[n]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t._createSource=function(e,t,n){n||(n=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=n,r},t._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var e=this.xhr;this.abort(xi(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t._xhrOnTimeout=function(){var e=this.xhr;this.abort(xi(e)+" Request timed out.")},t._xhrOnAbort=function(){var e=this.xhr;this.abort(xi(e)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t=this.xhr,n="",r=typeof t.status>"u"?200:t.status;if((""===t.responseType||"text"===t.responseType||typeof t.responseType>"u")&&(n=t.responseText),0===r&&(n.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=e.TYPE.JSON}catch(a){return void this.abort("Error trying to parse loaded json: "+a)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=e.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=t.response||n;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},t._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,bi||(bi=document.createElement("a")),bi.href=e;var n=!(e=ui(bi.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&n&&r===t.protocol?"":"anonymous"},t._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},t._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var n=e.indexOf("/");t=e.substring(n+1,e.indexOf(";",n))}else{var r=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(r>-1?r:e.length,i>-1?i:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},yi(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function Ti(e,t,n){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=n)}function xi(e){return e.toString().replace("object ","")}wi.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},wi.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},wi.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},wi.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},wi._loadTypeMap={gif:wi.LOAD_TYPE.IMAGE,png:wi.LOAD_TYPE.IMAGE,bmp:wi.LOAD_TYPE.IMAGE,jpg:wi.LOAD_TYPE.IMAGE,jpeg:wi.LOAD_TYPE.IMAGE,tif:wi.LOAD_TYPE.IMAGE,tiff:wi.LOAD_TYPE.IMAGE,webp:wi.LOAD_TYPE.IMAGE,tga:wi.LOAD_TYPE.IMAGE,svg:wi.LOAD_TYPE.IMAGE,"svg+xml":wi.LOAD_TYPE.IMAGE,mp3:wi.LOAD_TYPE.AUDIO,ogg:wi.LOAD_TYPE.AUDIO,wav:wi.LOAD_TYPE.AUDIO,mp4:wi.LOAD_TYPE.VIDEO,webm:wi.LOAD_TYPE.VIDEO},wi._xhrTypeMap={xhtml:wi.XHR_RESPONSE_TYPE.DOCUMENT,html:wi.XHR_RESPONSE_TYPE.DOCUMENT,htm:wi.XHR_RESPONSE_TYPE.DOCUMENT,xml:wi.XHR_RESPONSE_TYPE.DOCUMENT,tmx:wi.XHR_RESPONSE_TYPE.DOCUMENT,svg:wi.XHR_RESPONSE_TYPE.DOCUMENT,tsx:wi.XHR_RESPONSE_TYPE.DOCUMENT,gif:wi.XHR_RESPONSE_TYPE.BLOB,png:wi.XHR_RESPONSE_TYPE.BLOB,bmp:wi.XHR_RESPONSE_TYPE.BLOB,jpg:wi.XHR_RESPONSE_TYPE.BLOB,jpeg:wi.XHR_RESPONSE_TYPE.BLOB,tif:wi.XHR_RESPONSE_TYPE.BLOB,tiff:wi.XHR_RESPONSE_TYPE.BLOB,webp:wi.XHR_RESPONSE_TYPE.BLOB,tga:wi.XHR_RESPONSE_TYPE.BLOB,json:wi.XHR_RESPONSE_TYPE.JSON,text:wi.XHR_RESPONSE_TYPE.TEXT,txt:wi.XHR_RESPONSE_TYPE.TEXT,ttf:wi.XHR_RESPONSE_TYPE.BUFFER,otf:wi.XHR_RESPONSE_TYPE.BUFFER},wi.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Ei=window.URL||window.webkitURL;var Si={parsing:function(e,t){if(e.data){if(e.xhr&&e.xhrType===wi.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var n=Ei.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=n,e.type=wi.TYPE.IMAGE,void(e.data.onload=function(){Ei.revokeObjectURL(n),e.data.onload=null,t()})}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+function(e){for(var t="",n=0;n<e.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<e.length?r[o]=255&e.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(e.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var a=0;a<i.length;++a)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[a])}return t}(e.xhr.responseText),e.type=wi.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}},ki=/(#[\w-]+)?$/,Oi=function(){function e(t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:t,saturated:di,unsaturated:di,buffer:t/4,empty:di,drain:di,error:di,started:!1,paused:!1,push:function(e,t){i(e,!1,t)},kill:function(){n=0,r.drain=di,r.started=!1,r._tasks=[]},unshift:function(e,t){i(e,!0,t)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),(n+=1)===r.concurrency&&r.saturated(),e(t.data,gi(o(t)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var e=1;e<=r.concurrency;e++)r.process()}}};function i(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==e&&r.idle())setTimeout(function(){return r.drain()},1);else{var i={data:e,callback:"function"==typeof n?n:di};t?r._tasks.unshift(i):r._tasks.push(i),setTimeout(function(){return r.process()},1)}}function o(e){return function(){n-=1,e.callback.apply(e,arguments),null!=arguments[0]&&r.error(arguments[0],e.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new fi,this.onError=new fi,this.onLoad=new fi,this.onStart=new fi,this.onComplete=new fi;for(var i=0;i<e._defaultBeforeMiddleware.length;++i)this.pre(e._defaultBeforeMiddleware[i]);for(var o=0;o<e._defaultAfterMiddleware.length;++o)this.use(e._defaultAfterMiddleware[o])}var t=e.prototype;return t.add=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"==typeof e&&(r=t||e.callback||e.onComplete,n=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(r=n,n=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new wi(e,t,n),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,a=[],s=0;s<o.children.length;++s)o.children[s].isComplete||a.push(o.children[s]);var l=o.progressChunk*(a.length+1)/(a.length+2);o.children.push(this.resources[e]),o.progressChunk=l;for(var c=0;c<a.length;++c)a[c].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},t.pre=function(e){return this._beforeMiddleware.push(e),this},t.use=function(e){return this._afterMiddleware.push(e),this},t.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},t.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(e){var t,n=ui(e,{strictMode:!0});if(t=n.protocol||!n.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=ki.exec(t)[0];-1!==(t=t.substr(0,t.length-r.length)).indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=r}return t},t._loadResource=function(e,t){var n=this;e._dequeue=t,mi(this._beforeMiddleware,function(t,r){t.call(n,e,function(){r(e.isComplete?{}:null)})},function(){e.isComplete?n._onLoad(e):(e._onLoadBinding=e.onComplete.once(n._onLoad,n),e.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),mi(this._afterMiddleware,function(n,r){n.call(t,e,r)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()},!0)},yi(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();Oi._defaultBeforeMiddleware=[],Oi._defaultAfterMiddleware=[],Oi.pre=function(e){return Oi._defaultBeforeMiddleware.push(e),Oi},Oi.use=function(e){return Oi._defaultAfterMiddleware.push(e),Oi};var Pi=wi,Ci=function(e,t){return(Ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Ai=function(){function e(){}return e.use=function(e,t){e.data&&e.type===wi.TYPE.IMAGE&&(e.texture=gn.fromLoader(e.data,e.url,e.name)),t()},e}(),Mi=function(e){function t(n,r){for(var i=e.call(this,n,r)||this,o=0;o<t._plugins.length;++o){var a=t._plugins[o],s=a.pre,l=a.use;s&&i.pre(s),l&&i.use(l)}return i._protected=!1,i}return function(e,t){function n(){this.constructor=e}Ci(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}(Oi);Mi.registerPlugin({use:Si.parsing}),Mi.registerPlugin(Ai);var Ii=function(){function e(){}return e.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Mi.shared:new Mi},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),Ri=function(e,t){return(Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Di(e,t){function n(){this.constructor=e}Ri(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ni,ji,Li=function(e){function t(t,n,r,i){void 0===t&&(t=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=e.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ae.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return Di(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,Se(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var t=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t}(Pt),Bi=function(){function e(e,t,n){this.geometry=new Pn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var i=e[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||ue.FLOAT,offset:i.offset},t[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new Tn(Re(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(a=this.dynamicProperties[n]).offset=t,t+=a.size,this.dynamicStride+=a.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Tn(this.dynamicData,!1,!1);var i=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(a=this.staticProperties[n]).offset=i,i+=a.size,this.staticStride+=a.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Tn(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var a=this.dynamicProperties[n];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ue.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(n=0;n<this.staticProperties.length;++n){a=this.staticProperties[n];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ue.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},e.prototype.uploadDynamic=function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===ue.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===ue.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Fi=function(e){function t(t){var n=e.call(this,t)||this;return n.shader=null,n.properties=null,n.tempMatrix=new pt,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ue.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=gr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=yr.for2d(),n}return Di(t,e),t.prototype.render=function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,o=t.length;if(0!==o){o>n&&!e.autoResize&&(o=n);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture;this.state.blendMode=Ce(e.blendMode,s.alphaMode),i.state.set(this.state);var l=i.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Ae(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,s.alphaMode),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var u=!1,h=0,p=0;h<o;h+=r,p+=1){var f=o-h;f>r&&(f=r),p>=a.length&&a.push(this._generateOneMoreBuffer(e));var d=a[p];d.uploadDynamic(t,h,f);var m=e._bufferUpdateIDs[p]||0;(u=u||d._updateID<m)&&(d._updateID=e._updateID,d.uploadStatic(t,h,f)),i.geometry.bind(d.geometry),l.drawElements(l.TRIANGLES,6*f,l.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,o=0;o<n;o+=r)t.push(new Bi(this.properties,i,r));return t},t.prototype._generateOneMoreBuffer=function(e){var t=e._batchSize,n=e._properties;return new Bi(this.properties,n,t)},t.prototype.uploadVertices=function(e,t,n,r,i,o){for(var a=0,s=0,l=0,c=0,u=0;u<n;++u){var h=e[t+u],p=h._texture,f=h.scale.x,d=h.scale.y,m=p.trim,g=p.orig;m?(a=(s=m.x-h.anchor.x*g.width)+m.width,l=(c=m.y-h.anchor.y*g.height)+m.height):(a=g.width*(1-h.anchor.x),s=g.width*-h.anchor.x,l=g.height*(1-h.anchor.y),c=g.height*-h.anchor.y),r[o]=s*f,r[o+1]=c*d,r[o+i]=a*f,r[o+i+1]=c*d,r[o+2*i]=a*f,r[o+2*i+1]=l*d,r[o+3*i]=s*f,r[o+3*i+1]=l*d,o+=4*i}},t.prototype.uploadPosition=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},t.prototype.uploadRotation=function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},t.prototype.uploadUvs=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},t.prototype.uploadTint=function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a],l=s._texture.baseTexture.alphaMode>0,c=s.alpha,u=c<1&&l?Me(s._tintRGB,c):s._tintRGB+(255*c<<24);r[o]=u,r[o+i]=u,r[o+2*i]=u,r[o+3*i]=u,o+=4*i}},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(Nn);!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(Ni||(Ni={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(ji||(ji={}));var zi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,t){if(void 0===t&&(t=20),!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},Hi=function(){function e(){this.color=16777215,this.alpha=1,this.texture=gn.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=gn.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),Ui=function(e,t){return(Ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Vi(e,t){function n(){this.constructor=e}Ui(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Gi={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,o=t.indices;if(n.length>=6){for(var s=[],l=0;l<r.length;l++){var c=r[l];s.push(n.length/2),n=n.concat(c.points)}var u=(0,a.aT)(n,s,2);if(!u)return;var h=i.length/2;for(l=0;l<u.length;l+=3)o.push(u[l]+h),o.push(u[l+1]+h),o.push(u[l+2]+h);for(l=0;l<n.length;l++)i.push(n[l])}}},Xi={build:function(e){var t,n,r=e.shape,i=e.points,o=r.x,a=r.y;if(i.length=0,e.type===tt.CIRC)t=r.radius,n=r.radius;else{var s=e.shape;t=s.width,n=s.height}if(0!==t&&0!==n){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(t+n));l/=2.3;for(var c=2*Math.PI/l,u=0;u<l-.5;u++)i.push(o+Math.sin(-c*u)*t,a+Math.cos(-c*u)*n);i.push(i[0],i[1])}},triangulate:function(e,t){var n=e.points,r=t.points,i=t.indices,o=r.length/2,a=o,s=e.shape,l=e.matrix,c=s.x,u=s.y;r.push(e.matrix?l.a*c+l.c*u+l.tx:c,e.matrix?l.b*c+l.d*u+l.ty:u);for(var h=0;h<n.length;h+=2)r.push(n[h],n[h+1]),i.push(o++,a,o)}},Wi={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,a=e.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(e,t){var n=e.points,r=t.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function Yi(e,t,n){return e+(t-e)*n}function qi(e,t,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0;d<=20;++d)l=Yi(e,n,m=d/20),c=Yi(t,r,m),u=Yi(n,i,m),h=Yi(r,o,m),p=Yi(l,u,m),f=Yi(c,h,m),s.push(p,f);return s}var $i={build:function(e){var t=e.shape,n=e.points,r=t.x,i=t.y,o=t.width,a=t.height,s=Math.max(0,Math.min(t.radius,Math.min(o,a)/2));n.length=0,s?(qi(r,i+s,r,i,r+s,i,n),qi(r+o-s,i,r+o,i,r+o,i+s,n),qi(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),qi(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)},triangulate:function(e,t){for(var n=e.points,r=t.points,i=t.indices,o=r.length/2,s=(0,a.aT)(n,null,2),l=0,c=s.length;l<c;l+=3)i.push(s[l]+o),i.push(s[l+1]+o),i.push(s[l+2]+o);for(l=0,c=n.length;l<c;l++)r.push(n[l],n[++l])}};function Ki(e,t,n,r,i,o,a,s){var l,c;a?(l=r,c=-n):(l=-r,c=n);var u=e-n*i+l,h=t-r*i+c,p=e+n*o+l,f=t+r*o+c;return s.push(u,h),s.push(p,f),2}function Zi(e,t,n,r,i,o,a,s){var l=n-e,c=r-t,u=Math.atan2(l,c),h=Math.atan2(i-e,o-t);s&&u<h?u+=2*Math.PI:!s&&u>h&&(h+=2*Math.PI);var p=u,f=h-u,d=Math.abs(f),m=Math.sqrt(l*l+c*c),g=1+(15*d*Math.sqrt(m)/Math.PI|0),y=f/g;if(p+=y,s){a.push(e,t),a.push(n,r);for(var v=1,b=p;v<g;v++,b+=y)a.push(e,t),a.push(e+Math.sin(b)*m,t+Math.cos(b)*m);a.push(e,t),a.push(i,o)}else{a.push(n,r),a.push(e,t);for(v=1,b=p;v<g;v++,b+=y)a.push(e+Math.sin(b)*m,t+Math.cos(b)*m),a.push(e,t);a.push(i,o),a.push(e,t)}return 2*g}function Qi(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,o=r.type!==tt.POLY||r.closeStroke;if(0!==i.length){var a=t.points,s=t.indices,l=i.length/2,c=a.length/2,u=c;for(a.push(i[0],i[1]),n=1;n<l;n++)a.push(i[2*n],i[2*n+1]),s.push(u,u+1),u++;o&&s.push(u,c)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var o=e.lineStyle,a=new ut(r[0],r[1]),s=new ut(r[r.length-2],r[r.length-1]),l=n.type!==tt.POLY||n.closeStroke,c=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var u=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(u,h),r.push(u,h)}var p=t.points,f=r.length/2,d=r.length,m=p.length/2,g=o.width/2,y=g*g,v=o.miterLimit*o.miterLimit,b=r[0],_=r[1],w=r[2],T=r[3],x=0,E=0,S=-(_-T),k=b-w,O=0,P=0,C=Math.sqrt(S*S+k*k);S/=C,k/=C,S*=g,k*=g;var A=o.alignment,M=2*(1-A),I=2*A;l||(o.cap===ji.ROUND?d+=Zi(b-S*(M-I)*.5,_-k*(M-I)*.5,b-S*M,_-k*M,b+S*I,_+k*I,p,!0)+2:o.cap===ji.SQUARE&&(d+=Ki(b,_,S,k,M,I,!0,p))),p.push(b-S*M,_-k*M),p.push(b+S*I,_+k*I);for(var R=1;R<f-1;++R){b=r[2*(R-1)],_=r[2*(R-1)+1],w=r[2*R],T=r[2*R+1],x=r[2*(R+1)],E=r[2*(R+1)+1],S=-(_-T),k=b-w,S/=C=Math.sqrt(S*S+k*k),k/=C,S*=g,k*=g,O=-(T-E),P=w-x,O/=C=Math.sqrt(O*O+P*P),P/=C,O*=g,P*=g;var D=w-b,N=_-T,j=w-x,L=E-T,B=N*j-L*D,F=B<0;if(Math.abs(B)<.1)p.push(w-S*M,T-k*M),p.push(w+S*I,T+k*I);else{var z=(-S+b)*(-k+T)-(-S+w)*(-k+_),H=(-O+x)*(-P+T)-(-O+w)*(-P+E),U=(D*H-j*z)/B,V=(L*z-N*H)/B,G=(U-w)*(U-w)+(V-T)*(V-T),X=w+(U-w)*M,W=T+(V-T)*M,Y=w-(U-w)*I,q=T-(V-T)*I,$=F?M:I;G<=Math.min(D*D+N*N,j*j+L*L)+$*$*y?o.join===Ni.BEVEL||G/y>v?(F?(p.push(X,W),p.push(w+S*I,T+k*I),p.push(X,W),p.push(w+O*I,T+P*I)):(p.push(w-S*M,T-k*M),p.push(Y,q),p.push(w-O*M,T-P*M),p.push(Y,q)),d+=2):o.join===Ni.ROUND?F?(p.push(X,W),p.push(w+S*I,T+k*I),d+=Zi(w,T,w+S*I,T+k*I,w+O*I,T+P*I,p,!0)+4,p.push(X,W),p.push(w+O*I,T+P*I)):(p.push(w-S*M,T-k*M),p.push(Y,q),d+=Zi(w,T,w-S*M,T-k*M,w-O*M,T-P*M,p,!1)+4,p.push(w-O*M,T-P*M),p.push(Y,q)):(p.push(X,W),p.push(Y,q)):(p.push(w-S*M,T-k*M),p.push(w+S*I,T+k*I),o.join===Ni.BEVEL||G/y>v||(o.join===Ni.ROUND?d+=F?Zi(w,T,w+S*I,T+k*I,w+O*I,T+P*I,p,!0)+2:Zi(w,T,w-S*M,T-k*M,w-O*M,T-P*M,p,!1)+2:(F?(p.push(Y,q),p.push(Y,q)):(p.push(X,W),p.push(X,W)),d+=2)),p.push(w-O*M,T-P*M),p.push(w+O*I,T+P*I),d+=2)}}b=r[2*(f-2)],_=r[2*(f-2)+1],w=r[2*(f-1)],S=-(_-(T=r[2*(f-1)+1])),k=b-w,S/=C=Math.sqrt(S*S+k*k),k/=C,S*=g,k*=g,p.push(w-S*M,T-k*M),p.push(w+S*I,T+k*I),l||(o.cap===ji.ROUND?d+=Zi(w-S*(M-I)*.5,T-k*(M-I)*.5,w-S*M,T-k*M,w+S*I,T+k*I,p,!1)+2:o.cap===ji.SQUARE&&(d+=Ki(w,T,S,k,M,I,!1,p)));var K=t.indices,Z=zi.epsilon*zi.epsilon;for(R=m;R<d+m-2;++R)b=p[2*R],_=p[2*R+1],w=p[2*(R+1)],T=p[2*(R+1)+1],x=p[2*(R+2)],E=p[2*(R+2)+1],!(Math.abs(b*(T-E)+w*(E-_)+x*(_-T))<Z)&&K.push(R,R+1,R+2)}}(e,t)}var Ji,eo=function(e){function t(t,n,r,i,o,a){void 0===a&&(a=0);o=o||i/2;for(var s=-1*Math.PI/2+a,l=2*r,c=nt/l,u=[],h=0;h<l;h++){var p=h%2?o:i,f=h*c+s;u.push(t+p*Math.cos(f),n+p*Math.sin(f))}return e.call(this,u)||this}return Vi(t,e),t}(lt),to=function(){function e(){}return e.curveTo=function(e,t,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-t,l=a-e,c=r-t,u=n-e,h=Math.abs(s*u-l*c);if(h<1e-8||0===i)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;var p=s*s+l*l,f=c*c+u*u,d=s*c+l*u,m=i*Math.sqrt(p)/h,g=i*Math.sqrt(f)/h,y=m*d/p,v=g*d/f,b=m*u+g*l,_=m*c+g*s,w=l*(g+y),T=s*(g+y),x=u*(m+v),E=c*(m+v);return{cx:b+e,cy:_+t,radius:i,startAngle:Math.atan2(T-_,w-b),endAngle:Math.atan2(E-_,x-b),anticlockwise:l*c>u*s}},e.arc=function(e,t,n,r,i,o,a,s,l){for(var c=a-o,u=zi._segmentsCount(Math.abs(c)*i,40*Math.ceil(Math.abs(c)/nt)),h=c/(2*u),p=2*h,f=Math.cos(h),d=Math.sin(h),m=u-1,g=m%1/m,y=0;y<=m;++y){var v=h+o+p*(y+g*y),b=Math.cos(v),_=-Math.sin(v);l.push((f*b+d*_)*i+n,(f*-_+d*b)*i+r)}},e}(),no=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o,a,s){for(var l=0,c=0,u=0,h=0,p=0,f=0,d=0,m=0,g=0,y=0,v=0,b=e,_=t,w=1;w<=10;++w)y=b-(m=(d=(f=(p=1-(c=w/10))*p)*p)*e+3*f*c*n+3*p*(u=c*c)*i+(h=u*c)*a),v=_-(g=d*t+3*f*c*r+3*p*u*o+h*s),b=m,_=g,l+=Math.sqrt(y*y+v*v);return l},e.curveTo=function(t,n,r,i,o,a,s){var l=s[s.length-2],c=s[s.length-1];s.length-=2;var u=zi._segmentsCount(e.curveLength(l,c,t,n,r,i,o,a)),h=0,p=0,f=0,d=0,m=0;s.push(l,c);for(var g=1,y=0;g<=u;++g)f=(p=(h=1-(y=g/u))*h)*h,m=(d=y*y)*y,s.push(f*l+3*p*y*t+3*h*d*r+m*o,f*c+3*p*y*n+3*h*d*i+m*a)},e}(),ro=function(){function e(){}return e.curveLength=function(e,t,n,r,i,o){var a=e-2*n+i,s=t-2*r+o,l=2*n-2*e,c=2*r-2*t,u=4*(a*a+s*s),h=4*(a*l+s*c),p=l*l+c*c,f=2*Math.sqrt(u+h+p),d=Math.sqrt(u),m=2*u*d,g=2*Math.sqrt(p),y=h/d;return(m*f+d*h*(f-g)+(4*p*u-h*h)*Math.log((2*d+y+f)/(y+g)))/(4*m)},e.curveTo=function(t,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=zi._segmentsCount(e.curveLength(a,s,t,n,r,i)),c=0,u=0,h=1;h<=l;++h){var p=h/l;c=a+(t-a)*p,u=s+(n-s)*p,o.push(c+(t+(r-t)*p-c)*p,u+(n+(i-n)*p-u)*p)}},e}(),io=function(){function e(){this.reset()}return e.prototype.begin=function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n},e.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),oo=((Ji={})[tt.POLY]=Gi,Ji[tt.CIRC]=Xi,Ji[tt.ELIP]=Xi,Ji[tt.RECT]=Wi,Ji[tt.RREC]=$i,Ji),ao=[],so=[],lo={buildPoly:Gi,buildCircle:Xi,buildRectangle:Wi,buildRoundedRectangle:$i,FILL_COMMANDS:oo,BATCH_POOL:ao,DRAW_CALL_POOL:so,buildLine:Qi,Star:eo,ArcUtils:to,BezierUtils:no,QuadraticUtils:ro,BatchPart:io},co=function(){function e(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),uo=new ut,ho=new Tt,po=function(e){function t(){var t=e.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new Tt,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return Vi(t,e),Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),so.push(this.drawCalls[e]);this.drawCalls.length=0;for(e=0;e<this.batches.length;e++){var t=this.batches[e];t.reset(),ao.push(t)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new co(e,t,n,r);return this.graphicsData.push(i),this.dirty++,this},t.prototype.drawHole=function(e,t){if(void 0===t&&(t=null),!this.graphicsData.length)return null;var n=new co(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,uo):uo.copyFrom(e),r.shape.contains(uo.x,uo.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(uo.x,uo.y)){i=!0;break}}if(!i)return!0}}return!1},t.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,l=a.lineStyle;oo[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var c=0;c<2;c++){var u=0===c?s:l;if(u.visible){var h=u.texture.baseTexture,p=this.indices.length,f=this.points.length/2;h.wrapMode=pe.REPEAT,0===c?this.processFill(a):this.processLine(a);var d=this.points.length/2-f;0!==d&&(r&&!this._compareStyles(i,u)&&(r.end(p,f),r=null),r||((r=ao.pop()||new io).begin(u,p,f),this.batches.push(r),i=u),this.addUvs(this.points,t,u.texture,f,d,u.matrix))}}}var m=this.indices.length,g=this.points.length/2;if(r&&r.end(m,g),0===this.batches.length)return void(this.batchable=!0);if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var y=g>65535&&e;this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}}else this.batchable=!0},t.prototype._compareStyles=function(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var e=this.batches,n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<2*t.BATCHABLE_SIZE},t.prototype.buildDrawCalls=function(){for(var e=++Qt._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),so.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=so.pop();i||((i=new Yr).texArray=new qr),i.texArray.count=0,i.start=0,i.size=0,i.type=se.TRIANGLES;var o=0,a=null,s=0,l=!1,c=se.TRIANGLES,u=0;this.drawCalls.push(i);for(t=0;t<this.batches.length;t++){var h=this.batches[t],p=h.style,f=p.texture.baseTexture;l!==!!p.native&&(c=(l=!!p.native)?se.LINES:se.TRIANGLES,a=null,o=8,e++),a!==f&&(a=f,f._batchEnabled!==e&&(8===o&&(e++,o=0,i.size>0&&((i=so.pop())||((i=new Yr).texArray=new qr),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),f.touched=1,f._batchEnabled=e,f._batchLocation=o,f.wrapMode=10497,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,u+=h.size,s=f._batchLocation,this.addColors(n,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,s,h.attribSize,h.attribStart)}Qt._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,l=0;l<e.length/2;l++)o[s++]=e[2*l],o[s++]=e[2*l+1],o[s++]=t[2*l],o[s++]=t[2*l+1],a[s++]=n[l],o[s++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){e.holes.length?(this.processHoles(e.holes),Gi.triangulate(e,this)):oo[e.type].triangulate(e,this)},t.prototype.processLine=function(e){Qi(e,this);for(var t=0;t<e.holes.length;t++)Qi(e.holes[t],this)},t.prototype.processHoles=function(e){for(var t=0;t<e.length;t++){var n=e[t];oo[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,t=ho,n=pt.IDENTITY;this._bounds.clear(),t.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,a=i.type,s=i.lineStyle,l=i.matrix||pt.IDENTITY,c=0;if(s&&s.visible){var u=s.alignment;c=s.width,a===tt.POLY?c*=.5+Math.abs(.5-u):c*=Math.max(0,u)}if(n!==l&&(t.isEmpty()||(e.addBoundsMatrix(t,n),t.clear()),n=l),a===tt.RECT||a===tt.RREC){var h=o;t.addFramePad(h.x,h.y,h.x+h.width,h.y+h.height,c,c)}else if(a===tt.CIRC){var p=o;t.addFramePad(p.x,p.y,p.x,p.y,p.radius+c,p.radius+c)}else if(a===tt.ELIP){var f=o;t.addFramePad(f.x,f.y,f.x,f.y,f.width+c,f.height+c)}else{var d=o;e.addVerticesMatrix(n,d.points,0,d.points.length,c,c)}}t.isEmpty()||e.addBoundsMatrix(t,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}},t.prototype.addColors=function(e,t,n,r,i){void 0===i&&(i=0);var o=Me((t>>16)+(65280&t)+((255&t)<<16),n);e.length=Math.max(e.length,i+r);for(var a=0;a<r;a++)e[i+a]=o},t.prototype.addTextureIds=function(e,t,n,r){void 0===r&&(r=0),e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t},t.prototype.addUvs=function(e,t,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=t.length,l=n.frame;a<i;){var c=e[2*(r+a)],u=e[2*(r+a)+1];if(o){var h=o.a*c+o.c*u+o.tx;u=o.b*c+o.d*u+o.ty,c=h}a++,t.push(c/l.width,u/l.height)}var p=n.baseTexture;(l.width<p.width||l.height<p.height)&&this.adjustUvs(t,n,s,i)},t.prototype.adjustUvs=function(e,t,n,r){for(var i=t.baseTexture,o=1e-6,a=n+2*r,s=t.frame,l=s.width/i.width,c=s.height/i.height,u=s.x/s.width,h=s.y/s.height,p=Math.floor(e[n]+o),f=Math.floor(e[n+1]+o),d=n+2;d<a;d+=2)p=Math.min(p,Math.floor(e[d]+o)),f=Math.min(f,Math.floor(e[d+1]+o));u-=p,h-=f;for(d=n;d<a;d+=2)e[d]=(e[d]+u)*l,e[d+1]=(e[d+1]+h)*c},t.BATCHABLE_SIZE=100,t}(Qr),fo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=ji.BUTT,t.join=Ni.MITER,t.miterLimit=10,t}return Vi(t,e),t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(Hi),mo=new Float32Array(3),go={},yo=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n._geometry=t||new po,n._geometry.refCount++,n.shader=null,n.state=yr.for2d(),n._fillStyle=new Hi,n._lineStyle=new fo,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=ae.NORMAL,n}return Vi(t,e),Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e){if(void 0===e&&(e=null),"number"==typeof e){var t=arguments;e={width:t[0]||0,color:t[1]||0,alpha:void 0!==t[2]?t[2]:1,alignment:void 0!==t[3]?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){if("number"==typeof e){Ge("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var t=arguments;e={width:t[0],texture:t[1],color:t[2],alpha:t[3],matrix:t[4],alignment:t[5],native:t[6]},Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]})}e=Object.assign({width:0,texture:gn.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ji.BUTT,join:Ni.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new lt,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new lt,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this},t.prototype.lineTo=function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==e||i!==t)&&n.push(e,t),this},t.prototype._initCurve=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)},t.prototype.quadraticCurveTo=function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),ro.curveTo(e,t,n,r,i),this},t.prototype.bezierCurveTo=function(e,t,n,r,i,o){return this._initCurve(),no.curveTo(e,t,n,r,i,o,this.currentPath.points),this},t.prototype.arcTo=function(e,t,n,r,i){this._initCurve(e,t);var o=this.currentPath.points,a=to.curveTo(e,t,n,r,i,o);if(a){var s=a.cx,l=a.cy,c=a.radius,u=a.startAngle,h=a.endAngle,p=a.anticlockwise;this.arc(s,l,c,u,h,p)}return this},t.prototype.arc=function(e,t,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=nt:o&&r<=i&&(r+=nt),0===i-r)return this;var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n,l=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var u=Math.abs(c[c.length-2]-a),h=Math.abs(c[c.length-1]-s);u<l&&h<l||c.push(a,s)}else this.moveTo(a,s),c=this.currentPath.points;return to.arc(a,s,e,t,n,r,i,o,c),this},t.prototype.beginFill=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=1),this.beginTextureFill({texture:gn.WHITE,color:e,alpha:t})},t.prototype.beginTextureFill=function(e){if(e instanceof gn){Ge("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var t=arguments;e={texture:t[0],color:t[1],alpha:t[2],matrix:t[3]},Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]})}e=Object.assign({texture:gn.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,t,n,r){return this.drawShape(new ot(e,t,n,r))},t.prototype.drawRoundedRect=function(e,t,n,r,i){return this.drawShape(new ct(e,t,n,r,i))},t.prototype.drawCircle=function(e,t,n){return this.drawShape(new at(e,t,n))},t.prototype.drawEllipse=function(e,t,n,r){return this.drawShape(new st(e,t,n,r))},t.prototype.drawPolygon=function(){for(var e=arguments,t=[],n=0;n<arguments.length;n++)t[n]=e[n];var r,i=!0,o=t[0];o.points?(i=o.closeStroke,r=o.points):r=Array.isArray(t[0])?t[0]:t;var a=new lt(r);return a.closeStroke=i,this.drawShape(a),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.drawStar=function(e,t,n,r,i,o){return void 0===o&&(o=0),this.drawPolygon(new eo(e,t,n,r,i,o))},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===tt.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var t=this._geometry,n=e.context.supports.uint32Indices;t.updateBatches(n),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:a,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Se(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}},t.prototype._renderDirect=function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.tint,i=this.worldAlpha,o=t.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var s=0,l=a.length;s<l;s++)this._renderDrawCallDirect(e,n.drawCalls[s])},t.prototype._renderDrawCallDirect=function(e,t){for(var n=t.texArray,r=t.type,i=t.size,o=t.start,a=n.count,s=0;s<a;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,o)},t.prototype._resolveDirectShader=function(e){var t=this.shader,n=this.pluginName;if(!t){if(!go[n]){for(var r=e.plugins.batch.MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:In.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;go[n]=new gr(s,a)}t=go[n]}return t},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=Se(this.tint,mo),t=0;t<this.batches.length;t++){var n=this.batches[t],r=n._batchRGB,i=(e[0]*r[0]*255<<16)+(e[1]*r[1]*255<<8)+(0|e[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this._geometry.points,c=this.vertexData,u=0,h=0;h<l.length;h+=2){var p=l[h],f=l[h+1];c[u++]=n*p+i*f+a,c[u++]=o*f+r*p+s}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},t._TEMP_POINT=new ut,t}(Pt),vo=function(e,t){return(vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var bo,_o=new ut,wo=new Uint16Array([0,1,2,0,2,3]),To=function(e){function t(t){var n=e.call(this)||this;return n._anchor=new ht(n._onAnchorUpdate,n,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ae.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=t||gn.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=wo,n.pluginName="batch",n.isSprite=!0,n._roundPixels=j.ROUND_PIXELS,n}return function(e,t){function n(){this.constructor=e}vo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ze(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ze(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this.vertexData,c=e.trim,u=e.orig,h=this._anchor,p=0,f=0,d=0,m=0;if(c?(p=(f=c.x-h._x*u.width)+c.width,d=(m=c.y-h._y*u.height)+c.height):(p=(f=-h._x*u.width)+u.width,d=(m=-h._y*u.height)+u.height),l[0]=n*f+i*m+a,l[1]=o*m+r*f+s,l[2]=n*p+i*m+a,l[3]=o*m+r*p+s,l[4]=n*p+i*d+a,l[5]=o*d+r*p+s,l[6]=n*f+i*d+a,l[7]=o*d+r*f+s,this._roundPixels)for(var g=j.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*g|0)/g)}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,c=i.tx,u=i.ty,h=-r._x*n.width,p=h+n.width,f=-r._y*n.height,d=f+n.height;t[0]=o*h+s*f+c,t[1]=l*f+a*h+u,t[2]=o*p+s*f+c,t[3]=l*f+a*p+u,t[4]=o*p+s*d+c,t[5]=l*d+a*p+u,t[6]=o*h+s*d+c,t[7]=l*d+a*h+u},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ot),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,_o);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return _o.x>=r&&_o.x<r+t&&(i=-n*this.anchor.y,_o.y>=i&&_o.y<i+n)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var n="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,n){return new t(e instanceof gn?e:gn.from(e,n))},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=ze(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=ze(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||gn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Pt),xo=function(e,t){return(xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};!function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(bo||(bo={}));var Eo={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:bo.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},So=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ko=function(){function e(e){this.styleID=0,this.reset(),Co(this,e,e)}return e.prototype.clone=function(){var t={};return Co(t,this,Eo),new e(t)},e.prototype.reset=function(){Co(this,Eo,Eo)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=Po(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=Po(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=Po(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&So.indexOf(r)<0&&(r='"'+r+'"'),t[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},e}();function Oo(e){return"number"==typeof e?ke(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function Po(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=Oo(e[t]);return e}return Oo(e)}function Co(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}var Ao=function(){function e(e,t,n,r,i,o,a,s,l){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=l}return e.measureText=function(t,n,r,i){void 0===i&&(i=e._canvas),r=r??n.wordWrap;var o=n.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),c=new Array(l.length),u=0,h=0;h<l.length;h++){var p=s.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;c[h]=p,u=Math.max(u,p)}var f=u+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var d=n.lineHeight||a.fontSize+n.strokeThickness,m=Math.max(d,a.fontSize+n.strokeThickness)+(l.length-1)*(d+n.leading);return n.dropShadow&&(m+=n.dropShadowDistance),new e(t,n,f,m,l,c,d+n.leading,u,a)},e.wordWrap=function(t,n,r){void 0===r&&(r=e._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",l=Object.create(null),c=n.letterSpacing,u=n.whiteSpace,h=e.collapseSpaces(u),p=e.collapseNewlines(u),f=!h,d=n.wordWrapWidth+c,m=e.tokenize(t),g=0;g<m.length;g++){var y=m[g];if(e.isNewline(y)){if(!p){s+=e.addLine(a),f=!h,a="",o=0;continue}y=" "}if(h){var v=e.isBreakingSpace(y),b=e.isBreakingSpace(a[a.length-1]);if(v&&b)continue}var _=e.getFromCache(y,c,l,i);if(_>d)if(""!==a&&(s+=e.addLine(a),a="",o=0),e.canBreakWords(y,n.breakWords))for(var w=e.wordWrapSplit(y),T=0;T<w.length;T++){for(var x=w[T],E=1;w[T+E];){var S=w[T+E],k=x[x.length-1];if(e.canBreakChars(k,S,y,T,n.breakWords))break;x+=S,E++}T+=x.length-1;var O=e.getFromCache(x,c,l,i);O+o>d&&(s+=e.addLine(a),f=!1,a="",o=0),a+=x,o+=O}else{a.length>0&&(s+=e.addLine(a),a="",o=0);var P=g===m.length-1;s+=e.addLine(y,!P),f=!1,a="",o=0}else _+o>d&&(f=!1,s+=e.addLine(a),a="",o=0),(a.length>0||!e.isBreakingSpace(y)||f)&&(a+=y,o+=_)}return s+=e.addLine(a,!1)},e.addLine=function(t,n){return void 0===n&&(n=!0),t=e.trimRight(t),t=n?t+"\n":t},e.getFromCache=function(e,t,n,r){var i=n[e];if("number"!=typeof i){var o=e.length*t;i=r.measureText(e).width+o,n[e]=i}return i},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var n=[],r="";if("string"!=typeof t)return n;for(var i=0;i<t.length;i++){var o=t[i];e.isBreakingSpace(o)||e.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,n,r,i){return!0},e.wordWrapSplit=function(e){return e.split("")},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=2*s;s=s*e.BASELINE_MULTIPLIER|0,r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a,l).data,u=c.length,h=4*a,p=0,f=0,d=!1;for(p=0;p<s;++p){for(var m=0;m<h;m+=4)if(255!==c[f+m]){d=!0;break}if(d)break;f+=h}for(n.ascent=s-p,f=u-h,d=!1,p=l;p>s;--p){for(m=0;m<h;m+=4)if(255!==c[f+m]){d=!0;break}if(d)break;f-=h}return n.descent=p-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n},e.clearMetrics=function(t){void 0===t&&(t=""),t?delete e._fonts[t]:e._fonts={}},e}(),Mo=function(){try{var e=new OffscreenCanvas(0,0),t=e.getContext("2d");return t&&t.measureText?e:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Mo.width=Mo.height=10,Ao._canvas=Mo,Ao._context=Mo.getContext("2d"),Ao._fonts={},Ao.METRICS_STRING="|\xc9q\xc5",Ao.BASELINE_SYMBOL="M",Ao.BASELINE_MULTIPLIER=1.4,Ao._newlines=[10,13],Ao._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Io={texture:!0,children:!1,baseTexture:!0},Ro=function(e){function t(t,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var a=gn.from(r);return a.orig=new ot,a.trim=new ot,(i=e.call(this,a)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=j.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=t,i.style=n,i.localStyleID=-1,i}return function(e,t){function n(){this.constructor=e}xo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n=this.context,r=Ao.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,a=r.lines,s=r.lineHeight,l=r.lineWidths,c=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;for(var h,p,f=t.dropShadow?2:1,d=0;d<f;++d){var m=t.dropShadow&&0===d,g=m?Math.ceil(Math.max(1,o)+2*t.padding):0,y=g*this._resolution;if(m){n.fillStyle="black",n.strokeStyle="black";var v=t.dropShadowColor,b=Se("number"==typeof v?v:Oe(v)),_=t.dropShadowBlur*this._resolution,w=t.dropShadowDistance*this._resolution;n.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+t.dropShadowAlpha+")",n.shadowBlur=_,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*w,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*w+y}else n.fillStyle=this._generateFillStyle(t,a,r),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var T=0;T<a.length;T++)h=t.strokeThickness/2,p=t.strokeThickness/2+T*s+u.ascent,"right"===t.align?h+=c-l[T]:"center"===t.align&&(h+=(c-l[T])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[T],h+t.padding,p+t.padding-g,!0),t.fill&&this.drawLetterSpacing(a[T],h+t.padding,p+t.padding-g)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,n,r){void 0===r&&(r=!1);var i=this._style.letterSpacing;if(0!==i)for(var o=t,a=Array.from?Array.from(e):e.split(""),s=this.context.measureText(e).width,l=0,c=0;c<a.length;++c){var u=a[c];r?this.context.strokeText(u,o,n):this.context.fillText(u,o,n),o+=s-(l=this.context.measureText(e.substring(c+1)).width)+i,s=l}else r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=$e(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(e.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(e.height/this._resolution),n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,t,n){var r=e.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var i,o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-o-2*a,l=Math.ceil(this.canvas.height/this._resolution)-o-2*a,c=r.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var h=c.length+1,p=1;p<h;++p)u.push(p/h);if(c.unshift(r[0]),u.unshift(0),c.push(r[r.length-1]),u.push(1),e.fillGradientType===bo.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,a,s/2,l+a);var f=0,d=(n.fontProperties.fontSize+e.strokeThickness)/l;for(p=0;p<t.length;p++)for(var m=n.lineHeight*p,g=0;g<c.length;g++){var y=m/l+("number"==typeof u[g]?u[g]:g/c.length)*d,v=Math.max(f,y);v=Math.min(v,1),i.addColorStop(v,c[g]),f=v}}else{i=this.context.createLinearGradient(a,l/2,s+a,l/2);var b=c.length+1,_=1;for(p=0;p<c.length;p++){var w=void 0;w="number"==typeof u[p]?u[p]:_/b,i.addColorStop(w,c[p]),_++}}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Io,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=ze(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=ze(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof ko?e:new ko(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t}(To);j.UPLOADS_PER_FRAME=4;var Do=function(e,t){return(Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var No=function(){function e(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function jo(e,t){var n=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof gn){var i=e._textures[r].baseTexture;-1===t.indexOf(i)&&(t.push(i),n=!0)}return n}function Lo(e,t){if(e.baseTexture instanceof Qt){var n=e.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Bo(e,t){if(e._texture&&e._texture instanceof gn){var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Fo(e,t){return t instanceof Ro&&(t.updateText(!0),!0)}function zo(e,t){if(t instanceof ko){var n=t.toFontString();return Ao.measureFont(n),!0}return!1}function Ho(e,t){if(e instanceof Ro){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var n=e._texture.baseTexture;return-1===t.indexOf(n)&&t.push(n),!0}return!1}function Uo(e,t){return e instanceof ko&&(-1===t.indexOf(e)&&t.push(e),!0)}var Vo=function(){function e(e){var t=this;this.limiter=new No(j.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(Ho),this.registerFindHook(Uo),this.registerFindHook(jo),this.registerFindHook(Lo),this.registerFindHook(Bo),this.registerUploadHook(Fo),this.registerUploadHook(zo)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Dt.system.addOnce(this.tick,this,At.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Dt.system.addOnce(this.tick,this,At.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(n=0,r=i.length;n<r;n++)i[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Pt)for(t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},e.prototype.destroy=function(){this.ticking&&Dt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Go(e,t){return t instanceof Qt&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Xo(e,t){if(!(t instanceof yo))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&Go(e,o.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Wo(e,t){return e instanceof yo&&(t.push(e),!0)}var Yo=function(e){function t(t){var n=e.call(this,t)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(Wo),n.registerUploadHook(Go),n.registerUploadHook(Xo),n}return function(e,t){function n(){this.constructor=e}Do(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Vo),qo=function(){function e(e){this.maxMilliseconds=e,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}(),$o=function(){function e(e,t,n){void 0===n&&(n=null),this._texture=e instanceof gn?e:null,this.baseTexture=e instanceof Qt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(e){void 0===e&&(e=null);var t=this.data.meta.scale,n=Je(e,null);return null===n&&(n=void 0!==t?parseFloat(t):1),1!==n&&this.baseTexture.setResolution(n),n},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,c=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,u=new ot(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s=o.rotated?new ot(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new ot(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new ot(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new gn(this.baseTexture,s,u,l,o.rotated?2:0,o.anchor),gn.addToCache(this.textures[i],i)}n++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},e.prototype.destroy=function(e){var t;for(var n in void 0===e&&(e=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),Ko=function(){function e(){}return e.use=function(t,n){var r=this,i=t.name+"_image";if(t.data&&t.type===Pi.TYPE.JSON&&t.data.frames&&!r.resources[i]){var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=e.getResourcePath(t,r.baseUrl);r.add(i,a,o,function(e){if(e.error)n(e.error);else{var r=new $o(e.texture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,n()})}})}else n()},e.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:te.resolve(e.url.replace(t,""),e.data.meta.image)},e}(),Zo=function(e,t){return(Zo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Qo(e,t){function n(){this.constructor=e}Zo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Jo=new ut,ea=function(e){function t(t,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=e.call(this,t)||this;return i.tileTransform=new wt,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new _r(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return Qo(t,e),Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ot),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Jo);var t=this._width,n=this._height,r=-t*this.anchor._x;if(Jo.x>=r&&Jo.x<r+t){var i=-n*this.anchor._y;if(Jo.y>=i&&Jo.y<i+n)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,n){return"number"==typeof n&&(Ge("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new t(gn.from(e,n),n.width,n.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t}(To),ta="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",na=new pt,ra=function(e){function t(t){var n=e.call(this,t)||this,r={globals:n.renderer.globalUniforms};return n.shader=gr.from(ta,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.simpleShader=gr.from(ta,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.quad=new An,n.state=yr.for2d(),n}return Qo(t,e),t.prototype.render=function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((r=n.uvs)[0]=r[6]=-e.anchor.x,r[1]=r[3]=-e.anchor.y,r[2]=r[4]=1-e.anchor.x,r[5]=r[7]=1-e.anchor.y),n.invalidate();var i=e._texture,o=i.baseTexture,a=e.tileTransform.localTransform,s=e.uvMatrix,l=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;l&&(o._glTextures[t.CONTEXT_UID]?l=o.wrapMode!==pe.CLAMP:o.wrapMode===pe.CLAMP&&(o.wrapMode=pe.REPEAT));var c=l?this.simpleShader:this.shader,u=i.width,h=i.height,p=e._width,f=e._height;na.set(a.a*u/p,a.b*u/f,a.c*h/p,a.d*h/f,a.tx/p,a.ty/f),na.invert(),l?na.prepend(s.mapCoord):(c.uniforms.uMapCoord=s.mapCoord.toArray(!0),c.uniforms.uClampFrame=s.uClampFrame,c.uniforms.uClampOffset=s.uClampOffset),c.uniforms.uTransform=na.toArray(!0),c.uniforms.uColor=Ie(e.tint,e.worldAlpha,c.uniforms.uColor,o.alphaMode),c.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),c.uniforms.uSampler=i,t.shader.bind(c),t.geometry.bind(n),this.state.blendMode=Ce(e.blendMode,o.alphaMode),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(Nn),ia=function(e,t){return(ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function oa(e,t){function n(){this.constructor=e}ia(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var aa=function(){function e(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),sa=new ut,la=new lt,ca=function(e){function t(t,n,r,i){void 0===i&&(i=se.TRIANGLES);var o=e.call(this)||this;return o.geometry=t,t.refCount++,o.shader=n,o.state=r||yr.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o._roundPixels=j.ROUND_PIXELS,o.batchUvs=null,o}return oa(t,e),Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this.shader.tint},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===se.TRIANGLES&&n.length<2*t.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.program.uniformData.translationMatrix&&(t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var t=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,t=e.buffers[0].data;if(e.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var n=this.transform.worldTransform,r=n.a,i=n.b,o=n.c,a=n.d,s=n.tx,l=n.ty,c=this.vertexData,u=0;u<c.length/2;u++){var h=t[2*u],p=t[2*u+1];c[2*u]=r*h+o*p+s,c[2*u+1]=i*h+a*p+l}if(this._roundPixels){var f=j.RESOLUTION;for(u=0;u<c.length;++u)c[u]=Math.round((c[u]*f|0)/f)}this.vertexDirty=e.vertexDirtyId}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new aa(e,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,sa);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=la.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],l=2*r[a+1],c=2*r[a+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[c],n[5]=t[c+1],la.contains(sa.x,sa.y))return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(Pt),ua=function(e){function t(t,n){var r=this,i={uSampler:t,alpha:1,uTextureMatrix:pt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=e.call(this,n.program||mr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new _r(t),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return oa(t,e),Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;Ie(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(gr),ha=function(e){function t(t,n,r){var i=e.call(this)||this,o=new Tn(t),a=new Tn(n,!0),s=new Tn(r,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,ue.FLOAT).addAttribute("aTextureCoord",a,2,!1,ue.FLOAT).addIndex(s),i._updateId=-1,i}return oa(t,e),Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(Pn),pa=function(e,t){return(pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var fa=function(){return function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}}(),da=function(){function e(){}return e.test=function(e){return"string"==typeof e&&0===e.indexOf("info face=")},e.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],o=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var l=o[s].split("="),c=l[0],u=l[1].replace(/"/gm,""),h=parseFloat(u),p=isNaN(h)?u:h;a[c]=p}n[i].push(a)}var f=new fa;return n.info.forEach(function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})}),n.common.forEach(function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})}),n.page.forEach(function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})}),n.char.forEach(function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})}),n.kerning.forEach(function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})}),f},e}(),ma=function(){function e(){}return e.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(e){for(var t=new fa,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),s=0;s<n.length;s++)t.info.push({face:n[s].getAttribute("face"),size:parseInt(n[s].getAttribute("size"),10)});for(s=0;s<r.length;s++)t.common.push({lineHeight:parseInt(r[s].getAttribute("lineHeight"),10)});for(s=0;s<i.length;s++)t.page.push({id:parseInt(i[s].getAttribute("id"),10)||0,file:i[s].getAttribute("file")});for(s=0;s<o.length;s++){var l=o[s];t.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(s=0;s<a.length;s++)t.kerning.push({first:parseInt(a[s].getAttribute("first"),10),second:parseInt(a[s].getAttribute("second"),10),amount:parseInt(a[s].getAttribute("amount"),10)});return t},e}(),ga=function(){function e(){}return e.test=function(e){if("string"==typeof e&&e.indexOf("<font>")>-1){var t=(new self.DOMParser).parseFromString(e,"text/xml");return ma.test(t)}return!1},e.parse=function(e){var t=(new window.DOMParser).parseFromString(e,"text/xml");return ma.parse(t)},e}(),ya=[da,ma,ga];function va(e){for(var t=0;t<ya.length;t++)if(ya[t].test(e))return ya[t];return null}function ba(e,t,n,r,i,o,a){var s=n.text,l=n.fontProperties;t.translate(r,i),t.scale(o,o);var c=a.strokeThickness/2,u=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=function(e,t,n,r,i,o){var a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s,l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=Math.ceil(e.width/r)-l-2*c,h=Math.ceil(e.height/r)-l-2*c,p=a.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var d=p.length+1,m=1;m<d;++m)f.push(m/d);if(p.unshift(a[0]),f.unshift(0),p.push(a[a.length-1]),f.push(1),n.fillGradientType===bo.LINEAR_VERTICAL){s=t.createLinearGradient(u/2,c,u/2,h+c);var g=0,y=(o.fontProperties.fontSize+n.strokeThickness)/h;for(m=0;m<i.length;m++)for(var v=o.lineHeight*m,b=0;b<p.length;b++){var _=v/h+("number"==typeof f[b]?f[b]:b/p.length)*y,w=Math.max(g,_);w=Math.min(w,1),s.addColorStop(w,p[b]),g=w}}else{s=t.createLinearGradient(c,h/2,u+c,h/2);var T=p.length+1,x=1;for(m=0;m<p.length;m++){var E=void 0;E="number"==typeof f[m]?f[m]:x/T,s.addColorStop(E,p[m]),x++}}return s}(e,t,a,o,[s],n),t.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,p=Se("number"==typeof h?h:Oe(h)),f=a.dropShadowBlur*o,d=a.dropShadowDistance*o;t.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+a.dropShadowAlpha+")",t.shadowBlur=f,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,c,u+n.lineHeight-l.descent),a.fill&&t.fillText(s,c,u+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}var _a=function(){function e(e,t,n){var r=e.info[0],i=e.common[0],o=Je(e.page[0].file),a={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/o,this.chars={},this.pageTextures=a;for(var s=0;s<e.page.length;s++){var l=e.page[s],c=l.id,u=l.file;a[c]=t instanceof Array?t[s]:t[u]}for(s=0;s<e.char.length;s++){var h=e.char[s],p=(c=h.id,h.page),f=e.char[s],d=f.x,m=f.y,g=f.width,y=f.height,v=f.xoffset,b=f.yoffset,_=f.xadvance;m/=o,g/=o,y/=o,v/=o,b/=o,_/=o;var w=new ot((d/=o)+a[p].frame.x/o,m+a[p].frame.y/o,g,y);this.chars[c]={xOffset:v,yOffset:b,xAdvance:_,kerning:{},texture:new gn(a[p].baseTexture,w),page:p}}for(s=0;s<e.kerning.length;s++){var T=e.kerning[s],x=T.first,E=T.second,S=T.amount;x/=o,E/=o,S/=o,this.chars[E]&&(this.chars[E].kerning[x]=S)}}return e.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},e.install=function(t,n,r){var i;if(t instanceof fa)i=t;else{var o=va(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}n instanceof gn&&(n=[n]);var a=new e(i,n,r);return e.available[a.font]=a,a},e.uninstall=function(t){var n=e.available[t];if(!n)throw new Error("No font found named '"+t+"'");n.destroy(),delete e.available[t]},e.from=function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,c=i.textureHeight,u=function(e){"string"==typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,i.split(""))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(o),h=n instanceof ko?n:new ko(n),p=l,f=new fa;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};for(var d,m,g,y=0,v=0,b=0,_=[],w=0;w<u.length;w++){d||((d=document.createElement("canvas")).width=l,d.height=c,m=d.getContext("2d"),g=new Qt(d,{resolution:s}),_.push(new gn(g)),f.page.push({id:_.length-1,file:""}));var T=Ao.measureText(u[w],h,!1,d),x=T.width,E=Math.ceil(T.height),S=Math.ceil(("italic"===h.fontStyle?2:1)*x);if(v>=c-E*s){if(0===v)throw new Error("[BitmapFont] textureHeight "+c+"px is too small for "+h.fontSize+"px fonts");--w,d=null,m=null,g=null,v=0,y=0,b=0}else if(b=Math.max(E+T.fontProperties.descent,b),S*s+y>=p)--w,v+=b*s,v=Math.ceil(v),y=0,b=0;else{ba(d,m,T,y,v,s,h);var k=T.text.charCodeAt(0);f.char.push({id:k,page:_.length-1,x:y/s,y:v/s,width:S,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),y+=(S+2*a)*s,y=Math.ceil(y)}}var O=new e(f,_,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=O,O},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),wa=[],Ta=[],xa=function(e){function t(n,r){void 0===r&&(r={});var i=e.call(this)||this;i._tint=16777215,r.font&&(Ge("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(r));var o=Object.assign({},t.styleDefaults,r),a=o.align,s=o.tint,l=o.maxWidth,c=o.letterSpacing,u=o.fontName,h=o.fontSize;if(!_a.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=a,i._tint=s,i._fontName=u,i._fontSize=h||_a.available[u].size,i._text=n,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=c,i._anchor=new ht(function(){i.dirty=!0},i,0,0),i._roundPixels=j.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}return function(e,t){function n(){this.constructor=e}pa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.updateText=function(){for(var e,t=_a.available[this._fontName],n=this._fontSize/t.size,r=new ut,i=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",s=a.length,l=this._maxWidth*t.size/this._fontSize,c=null,u=0,h=0,p=0,f=-1,d=0,m=0,g=0,y=0;y<s;y++){var v=a.charCodeAt(y),b=a.charAt(y);if(/(?:\s)/.test(b)&&(f=y,d=u),"\r"!==b&&"\n"!==b){var _=t.chars[v];if(_){c&&_.kerning[c]&&(r.x+=_.kerning[c]);var w=Ta.pop()||{texture:gn.EMPTY,line:0,charCode:0,position:new ut};w.texture=_.texture,w.line=p,w.charCode=v,w.position.x=r.x+_.xOffset+this._letterSpacing/2,w.position.y=r.y+_.yOffset,i.push(w),r.x+=_.xAdvance+this._letterSpacing,u=r.x,g=Math.max(g,_.yOffset+_.texture.height),c=v,-1!==f&&l>0&&r.x>l&&(Fe(i,1+f-++m,1+y-f),y=f,f=-1,o.push(d),h=Math.max(h,d),p++,r.x=0,r.y+=t.lineHeight,c=null)}}else o.push(u),h=Math.max(h,u),++p,++m,r.x=0,r.y+=t.lineHeight,c=null}var T=a.charAt(a.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(u=d),o.push(u),h=Math.max(h,u));var x=[];for(y=0;y<=p;y++){var E=0;"right"===this._align?E=h-o[y]:"center"===this._align&&(E=(h-o[y])/2),x.push(E)}var S=i.length,k={},O=[],P=this._activePagesMeshData;for(y=0;y<P.length;y++)wa.push(P[y]);for(y=0;y<S;y++){var C=(B=i[y].texture).baseTexture.uid;if(!k[C]){if(!(X=wa.pop())){var A=new ha,M=new ua(gn.EMPTY);X={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new ca(A,M),vertices:null,uvs:null,indices:null}}X.index=0,X.indexCount=0,X.vertexCount=0,X.uvsCount=0,X.total=0;var I=this._textureCache;I[C]=I[C]||new gn(B.baseTexture),X.mesh.texture=I[C],X.mesh.tint=this._tint,O.push(X),k[C]=X}k[C].total++}for(y=0;y<P.length;y++)-1===O.indexOf(P[y])&&this.removeChild(P[y].mesh);for(y=0;y<O.length;y++)O[y].mesh.parent!==this&&this.addChild(O[y].mesh);for(var y in this._activePagesMeshData=O,k){var R=(X=k[y]).total;if(!((null===(e=X.indices)||void 0===e?void 0:e.length)>6*R)||X.vertices.length<2*ca.BATCHABLE_SIZE)X.vertices=new Float32Array(8*R),X.uvs=new Float32Array(8*R),X.indices=new Uint16Array(6*R);else for(var D=X.total,N=X.vertices,j=4*D*2;j<N.length;j++)N[j]=0;X.mesh.size=6*R}for(y=0;y<S;y++){var L=(b=i[y]).position.x+x[b.line];this._roundPixels&&(L=Math.round(L));var B,F=L*n,z=b.position.y*n,H=k[(B=b.texture).baseTexture.uid],U=B.frame,V=B._uvs,G=H.index++;H.indices[6*G+0]=0+4*G,H.indices[6*G+1]=1+4*G,H.indices[6*G+2]=2+4*G,H.indices[6*G+3]=0+4*G,H.indices[6*G+4]=2+4*G,H.indices[6*G+5]=3+4*G,H.vertices[8*G+0]=F,H.vertices[8*G+1]=z,H.vertices[8*G+2]=F+U.width*n,H.vertices[8*G+3]=z,H.vertices[8*G+4]=F+U.width*n,H.vertices[8*G+5]=z+U.height*n,H.vertices[8*G+6]=F,H.vertices[8*G+7]=z+U.height*n,H.uvs[8*G+0]=V.x0,H.uvs[8*G+1]=V.y0,H.uvs[8*G+2]=V.x1,H.uvs[8*G+3]=V.y1,H.uvs[8*G+4]=V.x2,H.uvs[8*G+5]=V.y2,H.uvs[8*G+6]=V.x3,H.uvs[8*G+7]=V.y3}for(var y in this._textWidth=h*n,this._textHeight=(r.y+t.lineHeight)*n,k){var X=k[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var W=0,Y=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,$=0;$<X.total;$++)X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q;this._maxLineHeight=g*n;var K=X.mesh.geometry.getBuffer("aVertexPosition"),Z=X.mesh.geometry.getBuffer("aTextureCoord"),Q=X.mesh.geometry.getIndex();K.data=X.vertices,Z.data=X.uvs,Q.data=X.indices,K.update(),Z.update(),Q.update()}for(y=0;y<i.length;y++)Ta.push(i[y])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!_a.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype._upgradeStyle=function(e){if("string"==typeof e.font){var t=e.font.split(" ");e.fontName=1===t.length?t[0]:t.slice(1).join(" "),t.length>=2&&(e.fontSize=parseInt(t[0],10))}else e.fontName=e.font.name,e.fontSize="number"==typeof e.font.size?e.font.size:parseInt(e.font.size,10)},t.prototype.destroy=function(t){var n=this._textureCache;for(var r in n){n[r].destroy(),delete n[r]}this._textureCache=null,e.prototype.destroy.call(this,t)},t.registerFont=function(e,t){return Ge("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),_a.install(e,t)},Object.defineProperty(t,"fonts",{get:function(){return Ge("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),_a.available},enumerable:!1,configurable:!0}),t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t}(Pt),Ea=function(){function e(){}return e.add=function(){Pi.setExtensionXhrType("fnt",Pi.XHR_RESPONSE_TYPE.TEXT)},e.use=function(t,n){var r=va(t.data);if(r)for(var i=e.getBaseUrl(this,t),o=r.parse(t.data),a={},s=function(e){a[e.metadata.pageFile]=e.texture,Object.keys(a).length===o.page.length&&(t.bitmapFont=_a.install(o,a,!0),n())},l=0;l<o.page.length;++l){var c=o.page[l].file,u=i+c,h=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===u){f.metadata.pageFile=c,f.texture?s(f):f.onAfterMiddleware.add(s),h=!0;break}}if(!h){var d={crossOrigin:t.crossOrigin,loadType:Pi.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},t.metadata.imageMetadata),parentResource:t};this.add(u,d,s)}}else n()},e.getBaseUrl=function(t,n){var r=n.isDataUrl?"":e.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},e.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":""===t?"/":t},e}(),Sa=function(e,t){return(Sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var ka=function(e){function t(t){void 0===t&&(t=1);var n=e.call(this,Xr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=t,n}return function(e,t){function n(){this.constructor=e}Sa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(vr),Oa=function(e,t){return(Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Pa(e,t){function n(){this.constructor=e}Oa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ca,Aa,Ma,Ia,Ra,Da,Na,ja,La,Ba,Fa,za,Ha,Ua,Va,Ga,Xa,Wa={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ya=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Ca||(Ca={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Aa||(Aa={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ma||(Ma={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(Ia||(Ia={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ra||(Ra={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Da||(Da={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Na||(Na={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(ja||(ja={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(La||(La={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ba||(Ba={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(Fa||(Fa={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(za||(za={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Ha||(Ha={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Ua||(Ua={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Va||(Va={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Ga||(Ga={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Xa||(Xa={}));var qa=function(e){function t(t,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=j.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o,t),l=function(e){for(var t,n=Wa[e],r=n.length,i=Ya,o="",a=0;a<e;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());t=a,a>=r&&(t=e-a-1),o+=s=s.replace("%value%",n[t].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(o);return(a=e.call(this,s,l)||this).horizontal=t,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return Pa(t,e),t.prototype.apply=function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),o=e.renderer,a=t,s=i;this.state.blend=!1,e.applyFilter(this,a,s,Ha.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(a,Ha.BLIT),this.uniforms.uSampler=s;var c=s;s=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(vr),$a=function(e){function t(t,n,r,i){void 0===t&&(t=8),void 0===n&&(n=4),void 0===r&&(r=j.FILTER_RESOLUTION),void 0===i&&(i=5);var o=e.call(this)||this;return o.blurXFilter=new qa(!0,t,n,r,i),o.blurYFilter=new qa(!1,t,n,r,i),o.resolution=r,o.quality=n,o.blur=t,o.repeatEdgePixels=!1,o}return Pa(t,e),t.prototype.apply=function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Ha.CLEAR),this.blurYFilter.apply(e,a,n,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t}(vr),Ka=function(e,t){return(Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Za=function(e){function t(){var t=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=e.call(this,Wr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,t}return function(e,t){function n(){this.constructor=e}Ka(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._loadMatrix=function(e,t){void 0===t&&(t=!1);var n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.greyscale=function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,t)},t.prototype.contrast=function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.saturate=function(e,t){void 0===e&&(e=0);var n=2*e/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,l=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,u=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,e=e||.2,0,l,c,u,t=t||.15,0,o-l,a-c,s-u,0,0];this._loadMatrix(h,i)},t.prototype.night=function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.predator=function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(vr);Za.prototype.grayscale=Za.prototype.greyscale;var Qa=function(e,t){return(Qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Ja=function(e){function t(t,n){var r=this,i=new pt;return t.renderable=!1,(r=e.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,r.maskMatrix=i,null==n&&(n=20),r.scale=new ut(n,n),r}return function(e,t){function n(){this.constructor=e}Qa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.apply=function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,t,n,r)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t}(vr),es=function(e,t){return(es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var ts=function(e){function t(){return e.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(e,t){function n(){this.constructor=e}es(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(vr),ns=function(e,t){return(ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var rs=function(e){function t(t,n){void 0===t&&(t=.5),void 0===n&&(n=Math.random());var r=e.call(this,Wr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=t,r.seed=n,r}return function(e,t){function n(){this.constructor=e}ns(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t}(vr),is=new pt;St.prototype._cacheAsBitmap=!1,St.prototype._cacheData=null;var os=function(){return function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}();Object.defineProperties(St.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new os),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),St.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},St.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;n.pad(r)}n.ceil(j.RESOLUTION);var i=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),a=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,l=vn.create({width:n.width,height:n.height}),c="cacheAsBitmap_"+Ue();this._cacheData.textureCacheId=c,Qt.addToCache(l.baseTexture,c),gn.addToCache(l,c);var u=this.transform.localTransform.copyTo(is).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,l,!0,u,!1),e.projection.transform=s,e.renderTexture.bind(i,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new To(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-n.x/n.width,h.anchor.y=-n.y/n.height,h.alpha=t,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)}},St.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},St.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=e.context,i=e._projTransform;t.ceil(j.RESOLUTION);var o=vn.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+Ue();this._cacheData.textureCacheId=a,Qt.addToCache(o.baseTexture,a),gn.addToCache(o,a);var s=is;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,o,!0,s,!1),e.context=r,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new To(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},St.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},St.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},St.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Qt.removeFromCache(this._cacheData.textureCacheId),gn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},St.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},St.prototype.name=null,Pt.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(n=0,r=this.children.length;n<r;n++){if(this.children[n].getChildByName){var i=this.children[n].getChildByName(e,!0);if(i)return i}}return null},St.prototype.getGlobalPosition=function(e,t){return void 0===e&&(e=new ut),void 0===t&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var as=function(e,t){return(as=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ss(e,t){function n(){this.constructor=e}as(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ls=function(e){function t(t,n,r,i){void 0===t&&(t=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=e.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=t,o.height=n,o.build(),o}return ss(t,e),t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,l=0;l<e;l++){var c=l%this.segWidth,u=l/this.segWidth|0;t.push(c*a,u*s),n.push(c/i,u/o)}var h=i*o;for(l=0;l<h;l++){var p=l%i,f=l/i|0,d=f*this.segWidth+p,m=f*this.segWidth+p+1,g=(f+1)*this.segWidth+p,y=(f+1)*this.segWidth+p+1;r.push(d,m,g,m,y,g)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(ha),cs=function(e){function t(t,n,r){void 0===t&&(t=200),void 0===r&&(r=0);var i=e.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=t,i.textureScale=r,i.build(),i}return ss(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=e[0],l=this._width*this.textureScale,c=e.length,u=0;u<c;u++){var h=4*u;if(this.textureScale>0){var p=s.x-e[u].x,f=s.y-e[u].y,d=Math.sqrt(p*p+f*f);s=e[u],a+=d/l}else a=u/(c-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var m=0;for(u=0;u<c-1;u++){h=2*u;o[m++]=h,o[m++]=h+1,o[m++]=h+2,o[m++]=h+2,o[m++]=h+1,o[m++]=h+3}n.update(),r.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,o=this.buffers[0].data,a=e.length,s=0;s<a;s++){var l=e[s],c=4*s;i=-((t=s<e.length-1?e[s+1]:l).x-n.x),r=t.y-n.y;var u=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,i/=u,r*=h,i*=h,o[c]=l.x+r,o[c+1]=l.y+i,o[c+2]=l.x-r,o[c+3]=l.y-i,n=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(ha),us=function(e){function t(t,n,r){void 0===r&&(r=0);var i=this,o=new cs(t.height,n,r),a=new ua(t);return r>0&&(t.baseTexture.wrapMode=pe.REPEAT),(i=e.call(this,o,a)||this).autoUpdate=!0,i}return ss(t,e),t.prototype._render=function(t){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),e.prototype._render.call(this,t)},t}(ca),hs=function(e){function t(t,n,r){var i=this,o=new ls(t.width,t.height,n,r),a=new ua(gn.WHITE);return(i=e.call(this,o,a)||this).texture=t,i}return ss(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry;e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build()},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},t.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},t}(ca),ps=function(e){function t(t,n,r,i,o){void 0===t&&(t=gn.EMPTY);var a=this,s=new ha(n,r,i);s.getBuffer("aVertexPosition").static=!1;var l=new ua(t);return(a=e.call(this,s,l,null,o)||this).autoUpdate=!0,a}return ss(t,e),Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},t}(ca),fs=function(e){function t(t,n,r,i,o){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10);var a=e.call(this,gn.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=n,a._rightWidth=i,a._topHeight=r,a._bottomHeight=o,a.texture=t,a}return ss(t,e),t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t}(hs),ds=function(e,t){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var ms=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t[0]instanceof gn?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}return function(e,t){function n(){this.constructor=e}ds(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Dt.shared.add(this.update,this,At.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var n=[],r=0;r<e.length;++r)n.push(gn.from(e[r]));return new t(n)},t.fromImages=function(e){for(var n=[],r=0;r<e.length;++r)n.push(gn.from(e[r]));return new t(n)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof gn)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Dt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t}(To),gs=function(e,t){return(gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ys(e,t){function n(){this.constructor=e}gs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var vs="5.0.0";Vr.registerPlugin("accessibility",It),Vr.registerPlugin("extract",li),Vr.registerPlugin("interaction",Vt),Vr.registerPlugin("particle",Fi),Vr.registerPlugin("prepare",Yo),Vr.registerPlugin("batch",ni),Vr.registerPlugin("tilingSprite",ra),Mi.registerPlugin(Ea),Mi.registerPlugin(Ko),ri.registerPlugin(Nt),ri.registerPlugin(Ii);var bs="5.3.12",_s={AlphaFilter:ka,BlurFilter:$a,BlurFilterPass:qa,ColorMatrixFilter:Za,DisplacementFilter:Ja,FXAAFilter:ts,NoiseFilter:rs};const ws=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return de},AbstractBatchRenderer:Kr,AbstractRenderer:Ur,AccessibilityManager:It,AnimatedSprite:ms,AppLoaderPlugin:Ii,Application:ri,Attribute:_n,get BLEND_MODES(){return ae},get BUFFER_BITS(){return oe},BasePrepare:Vo,BaseRenderTexture:fn,BaseTexture:Qt,BatchDrawCall:Yr,BatchGeometry:Qr,BatchPluginFactory:ti,BatchRenderer:ni,BatchShaderGenerator:Zr,BatchTextureArray:qr,BitmapFont:_a,BitmapFontData:fa,BitmapFontLoader:Ea,BitmapText:xa,Bounds:Tt,Buffer:Tn,get CLEAR_MODES(){return me},Circle:at,Container:Pt,CountLimiter:No,DEG_TO_RAD:it,get DRAW_MODES(){return se},DisplayObject:St,get ENV(){return ne},Ellipse:st,Extract:li,get FORMATS(){return le},FillStyle:Hi,Filter:vr,FilterState:Rn,Framebuffer:pn,get GC_MODES(){return ge},GLFramebuffer:Fn,GLProgram:Ir,GLTexture:Br,GRAPHICS_CURVES:zi,Geometry:Pn,Graphics:yo,GraphicsData:co,GraphicsGeometry:po,IGLUniformData:Mr,InteractionData:jt,InteractionEvent:Bt,InteractionManager:Vt,InteractionTrackingData:Ft,get LINE_CAP(){return ji},get LINE_JOIN(){return Ni},LineStyle:fo,Loader:Mi,LoaderResource:Pi,get MASK_TYPES(){return ve},get MIPMAP_MODES(){return fe},get MSAA_QUALITY(){return be},MaskData:Xn,Matrix:pt,Mesh:ca,MeshBatchUvs:aa,MeshGeometry:ha,MeshMaterial:ua,NineSlicePlane:fs,ObjectRenderer:Nn,ObservablePoint:ht,PI_2:nt,get PRECISION(){return ye},ParticleContainer:Li,ParticleRenderer:Fi,PlaneGeometry:ls,Point:ut,Polygon:lt,Prepare:Yo,Program:mr,Quad:Cn,QuadUv:An,RAD_TO_DEG:rt,get RENDERER_TYPE(){return ie},Rectangle:ot,RenderTexture:vn,RenderTexturePool:bn,Renderer:Vr,RopeGeometry:cs,RoundedRectangle:ct,Runner:Gt,get SCALE_MODES(){return he},get SHAPES(){return tt},Shader:gr,SimpleMesh:ps,SimplePlane:hs,SimpleRope:us,Sprite:To,SpriteMaskFilter:wr,Spritesheet:$o,SpritesheetLoader:Ko,State:yr,System:un,get TARGETS(){return ce},get TEXT_GRADIENT(){return bo},get TYPES(){return ue},TemporaryDisplayObject:kt,Text:Ro,TextMetrics:Ao,TextStyle:ko,Texture:gn,TextureLoader:Ai,TextureMatrix:_r,TextureUvs:dn,Ticker:Dt,TickerPlugin:Nt,TilingSprite:ea,TilingSpriteRenderer:ra,TimeLimiter:qo,Transform:wt,get UPDATE_PRIORITY(){return At},UniformGroup:In,VERSION:bs,ViewableBuffer:$r,get WRAP_MODES(){return pe},accessibleTarget:Ct,autoDetectRenderer:Gr,checkMaxIfStatementsInShader:pr,defaultFilterVertex:Wr,defaultVertex:Xr,filters:_s,graphicsUtils:lo,groupD8:_t,interactiveTarget:Ht,isMobile:D,resources:cn,settings:j,systems:zr,uniformParsers:ar,useDeprecated:function(){var e=this;Object.defineProperties(e,{SVG_SIZE:{get:function(){return Ge(vs,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),e.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return Ge(vs,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),e.Transform}},TransformBase:{get:function(){return Ge(vs,"PIXI.TransformBase class has been removed, use PIXI.Transform"),e.Transform}},TRANSFORM_MODE:{get:function(){return Ge(vs,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return Ge(vs,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),e.Renderer}},CanvasRenderTarget:{get:function(){return Ge(vs,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),e.utils.CanvasRenderTarget}},loader:{get:function(){return Ge(vs,"PIXI.loader instance has moved to PIXI.Loader.shared"),e.Loader.shared}},FilterManager:{get:function(){return Ge(vs,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),e.systems.FilterSystem}},CanvasTinter:{get:function(){return Ge("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),e.canvasUtils}},GroupD8:{get:function(){return Ge("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),e.groupD8}}}),e.accessibility={},Object.defineProperties(e.accessibility,{AccessibilityManager:{get:function(){return Ge("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),e.AccessibilityManager}}}),e.interaction={},Object.defineProperties(e.interaction,{InteractionManager:{get:function(){return Ge("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),e.InteractionManager}},InteractionData:{get:function(){return Ge("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),e.InteractionData}},InteractionEvent:{get:function(){return Ge("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),e.InteractionEvent}}}),e.prepare={},Object.defineProperties(e.prepare,{BasePrepare:{get:function(){return Ge("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),e.BasePrepare}},Prepare:{get:function(){return Ge("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),e.Prepare}},CanvasPrepare:{get:function(){return Ge("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),e.CanvasPrepare}}}),e.extract={},Object.defineProperties(e.extract,{Extract:{get:function(){return Ge("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),e.Extract}},CanvasExtract:{get:function(){return Ge("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),e.CanvasExtract}}}),e.extras={},Object.defineProperties(e.extras,{TilingSprite:{get:function(){return Ge(vs,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),e.TilingSprite}},TilingSpriteRenderer:{get:function(){return Ge(vs,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),e.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return Ge(vs,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),e.AnimatedSprite}},BitmapText:{get:function(){return Ge(vs,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),e.BitmapText}}}),e.TilingSprite.fromFrame=function(t,n,r){return Ge("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),e.TilingSprite.from(t,{width:n,height:r})},e.TilingSprite.fromImage=function(t,n,r,i){return void 0===i&&(i={}),Ge("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),i&&"object"!=typeof i&&(i={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),i.width=n,i.height=r,e.TilingSprite.from(t,i)},Object.defineProperties(e.utils,{getSvgSize:{get:function(){return Ge(vs,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),e.resources.SVGResource.getSize}}}),e.mesh={},Object.defineProperties(e.mesh,{Mesh:{get:function(){return Ge(vs,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),e.SimpleMesh}},NineSlicePlane:{get:function(){return Ge(vs,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),e.NineSlicePlane}},Plane:{get:function(){return Ge(vs,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),e.SimplePlane}},Rope:{get:function(){return Ge(vs,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),e.SimpleRope}},RawMesh:{get:function(){return Ge(vs,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),e.Mesh}},CanvasMeshRenderer:{get:function(){return Ge(vs,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),e.CanvasMeshRenderer}},MeshRenderer:{get:function(){return Ge(vs,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),e.MeshRenderer}}}),e.particles={},Object.defineProperties(e.particles,{ParticleContainer:{get:function(){return Ge(vs,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),e.ParticleContainer}},ParticleRenderer:{get:function(){return Ge(vs,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),e.ParticleRenderer}}}),e.ticker={},Object.defineProperties(e.ticker,{Ticker:{get:function(){return Ge(vs,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),e.Ticker}},shared:{get:function(){return Ge(vs,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),e.Ticker.shared}}}),e.loaders={},Object.defineProperties(e.loaders,{Loader:{get:function(){return Ge(vs,"PIXI.loaders.Loader class has moved to PIXI.Loader"),e.Loader}},Resource:{get:function(){return Ge(vs,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),e.LoaderResource}},bitmapFontParser:{get:function(){return Ge(vs,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),e.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){Ge(vs,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return Ge(vs,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),e.SpritesheetLoader.use}},getResourcePath:{get:function(){return Ge(vs,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),e.SpritesheetLoader.getResourcePath}}}),e.Loader.addPixiMiddleware=function(t){return Ge(vs,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),e.loaders.Loader.registerPlugin({use:t()})};var t=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)};Object.assign(e.Loader.prototype,{on:function(e){var n=t(e);Ge(vs,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+n+".add")},once:function(e){var n=t(e);Ge(vs,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+n+".once")},off:function(e){var n=t(e);Ge(vs,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+n+".detach")}}),Object.defineProperty(e.extract,"WebGLExtract",{get:function(){return Ge(vs,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),e.Extract}}),Object.defineProperty(e.prepare,"WebGLPrepare",{get:function(){return Ge(vs,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),e.Prepare}}),e.Container.prototype._renderWebGL=function(e){Ge(vs,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(e)},e.Container.prototype.renderWebGL=function(e){Ge(vs,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(e)},e.DisplayObject.prototype.renderWebGL=function(e){Ge(vs,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(e)},e.Container.prototype.renderAdvancedWebGL=function(e){Ge(vs,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(e)},Object.defineProperties(e.settings,{TRANSFORM_MODE:{get:function(){return Ge(vs,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){Ge(vs,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var n=e.BaseTexture;n.prototype.loadSource=function(t){Ge(vs,"PIXI.BaseTexture.loadSource method has been deprecated");var n=e.resources.autoDetectResource(t);n.internal=!0,this.setResource(n),this.update()};var r=!1;Object.defineProperties(n.prototype,{hasLoaded:{get:function(){return Ge(vs,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var e;return Ge(vs,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(e=this.resource)||void 0===e?void 0:e.url},set:function(e){Ge(vs,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=e)}},source:{get:function(){return Ge(vs,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(e){Ge(vs,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=e)}},premultiplyAlpha:{get:function(){return Ge("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(e){Ge("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(e)}},_id:{get:function(){return r||(Ge("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(e){this._batchLocation=e}}}),n.fromImage=function(e,t,r,i){Ge(vs,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:i,crossorigin:t};return n.from(e,{scaleMode:r,resourceOptions:o})},n.fromCanvas=function(e,t){return Ge(vs,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),n.from(e,{scaleMode:t})},n.fromSVG=function(e,t,r,i){Ge(vs,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:i,crossorigin:t};return n.from(e,{scaleMode:r,resourceOptions:o})},Object.defineProperties(e.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return Ge("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(e){Ge("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(e)}}}),e.Point.prototype.copy=function(e){return Ge(vs,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(e)},e.ObservablePoint.prototype.copy=function(e){return Ge(vs,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(e)},e.Rectangle.prototype.copy=function(e){return Ge(vs,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(e)},e.Matrix.prototype.copy=function(e){return Ge(vs,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(e)},e.systems.StateSystem.prototype.setState=function(e){return Ge("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(e)},Object.assign(e.systems.FilterSystem.prototype,{getRenderTarget:function(e,t){return Ge(vs,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,t)},returnRenderTarget:function(e){Ge(vs,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(e)},calculateScreenSpaceMatrix:function(e){Ge(vs,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var t=e.identity(),n=this.activeState,r=n.sourceFrame,i=n.destinationFrame;return t.translate(r.x/i.width,r.y/i.height),t.scale(i.width,i.height),t},calculateNormalizedScreenSpaceMatrix:function(e){Ge(vs,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var t=this.activeState,n=t.sourceFrame,r=t.destinationFrame,i=e.identity();i.translate(n.x/r.width,n.y/r.height);var o=r.width/n.width,a=r.height/n.height;return i.scale(o,a),i}}),Object.defineProperties(e.RenderTexture.prototype,{sourceFrame:{get:function(){return Ge(vs,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return Ge(vs,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var i=function(e){function t(t,n,r,i){return Ge(vs,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),e.call(this,!0,t,n,r,i)||this}return ys(t,e),t}(e.filters.BlurFilterPass),o=function(e){function t(t,n,r,i){return Ge(vs,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),e.call(this,!1,t,n,r,i)||this}return ys(t,e),t}(e.filters.BlurFilterPass);Object.assign(e.filters,{BlurXFilter:i,BlurYFilter:o});var a=e.Sprite,s=e.Texture,l=e.Graphics;function c(e,t,n,r){return Ge(vs,"PIXI.Sprite."+e+" method is deprecated, use PIXI.Sprite.from"),a.from(t,{resourceOptions:{scale:r,crossorigin:n}})}function u(e,t,n,r){return Ge(vs,"PIXI.Texture."+e+" method is deprecated, use PIXI.Texture.from"),s.from(t,{resourceOptions:{scale:r,crossorigin:n}})}l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){Ge(vs,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return Ge(vs,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),a.fromImage=c.bind(null,"fromImage"),a.fromSVG=c.bind(null,"fromSVG"),a.fromCanvas=c.bind(null,"fromCanvas"),a.fromVideo=c.bind(null,"fromVideo"),a.fromFrame=c.bind(null,"fromFrame"),s.fromImage=u.bind(null,"fromImage"),s.fromSVG=u.bind(null,"fromSVG"),s.fromCanvas=u.bind(null,"fromCanvas"),s.fromVideo=u.bind(null,"fromVideo"),s.fromFrame=u.bind(null,"fromFrame"),Object.defineProperty(e.AbstractRenderer.prototype,"autoResize",{get:function(){return Ge(vs,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(e){Ge(vs,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=e}}),Object.defineProperty(e.Renderer.prototype,"textureManager",{get:function(){return Ge(vs,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),e.utils.mixins={mixin:function(){Ge(vs,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){Ge(vs,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){Ge(vs,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(e.BitmapText.prototype,"font",{get:function(){return Ge("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(t){if(Ge("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),t){var n={font:t};this._upgradeStyle(n),n.fontSize=n.fontSize||e.BitmapFont.available[n.fontName].size,this._fontName=n.fontName,this._fontSize=n.fontSize,this.dirty=!0}}})},utils:et},Symbol.toStringTag,{value:"Module"}));function Ts(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Ts(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function xs(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Ts(e))&&(r&&(r+=" "),r+=t);return r}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('._multitrack-header_1yz7l_1,._multitrack-header-focus_1yz7l_2,._multitrack-header-squeazed_1yz7l_3{position:relative;display:flex;justify-content:space-between;height:24px;margin-top:4px;margin-bottom:4px;color:#999;font-size:12px;line-height:24px;vertical-align:middle;border:0;border-radius:3px;background:#e5e5e5;transition:height .15s cubic-bezier(.25,.1,.25,1),margin .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20{background:#222}._multitrack-header-focus_1yz7l_2{height:32px;margin-top:0;margin-bottom:0}._multitrack-header-id_1yz7l_30{padding-left:3px}._multitrack-header-id_1yz7l_30:before{content:"ID:";font-weight:700;padding-right:5px}._multitrack-header-left_1yz7l_39{display:flex;flex-grow:1}._multitrack-header-grabber_1yz7l_44,._multitrack-header-grabber-squeazed_1yz7l_45{display:flex;align-items:center;justify-content:center;width:24px;height:100%;cursor:move;border-radius:3px 0 0 3px;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-grabber_1yz7l_44:hover,._multitrack-header-grabber-squeazed_1yz7l_45:hover{background:#999}._multitrack-header-grabber_1yz7l_44:hover div,._multitrack-header-grabber-squeazed_1yz7l_45:hover div{background:#fff}._multitrack-header-grabber_1yz7l_44 div,._multitrack-header-grabber-squeazed_1yz7l_45 div{width:1px;height:50%;margin:1px;background:#999;transition:background .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-dark_1yz7l_20 ._multitrack-header-grabber_1yz7l_44 div{background:#666}._multitrack-header-grabber-squeazed_1yz7l_45{width:19.2px}._multitrack-header-search_1yz7l_80{position:relative;flex-grow:1;height:100%;margin-right:12px}._multitrack-header-search_1yz7l_80:after{position:absolute;top:3px;bottom:3px;right:-12px;display:block;content:"";width:1px;margin:0 6px;background:#ccc}._multitrack-header-dark_1yz7l_20 ._multitrack-header-search_1yz7l_80:after{background:#666}._multitrack-header-nav-list_1yz7l_102,._multitrack-header_1yz7l_1>nav{display:flex}._multitrack-header-icon_1yz7l_107,._multitrack-header-icon-squeazed_1yz7l_108{width:24px;height:100%;padding:6px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._multitrack-header-icon_1yz7l_107 g,._multitrack-header-icon-squeazed_1yz7l_108 g{stroke:#999}._multitrack-header-icon_1yz7l_107:hover,._multitrack-header-icon_1yz7l_107:active,._multitrack-header-icon_1yz7l_107:focus,._multitrack-header-icon-squeazed_1yz7l_108:hover,._multitrack-header-icon-squeazed_1yz7l_108:active,._multitrack-header-icon-squeazed_1yz7l_108:focus{color:#fff;background:#337ab7}._multitrack-header-icon_1yz7l_107:hover g,._multitrack-header-icon_1yz7l_107:active g,._multitrack-header-icon_1yz7l_107:focus g,._multitrack-header-icon-squeazed_1yz7l_108:hover g,._multitrack-header-icon-squeazed_1yz7l_108:active g,._multitrack-header-icon-squeazed_1yz7l_108:focus g{stroke:#fff}._multitrack-header-icon_1yz7l_107:last-child,._multitrack-header-icon-squeazed_1yz7l_108:last-child{border-radius:0 3px 3px 0}._mouse-tool-selection_1yz7l_136{color:#fff;border-radius:3px 0 0 3px;background:#337ab7}._multitrack-header-icon-squeazed_1yz7l_108{width:20px 5;padding-left:3px;padding-right:3px}._button_1wnjn_1{display:flex;align-items:center;box-sizing:border-box;padding:.5em;color:#000;font-size:1em;line-height:1em;border:0;border-radius:2.5px;background:#fff;box-shadow:0 0 0 1px #ccc;transition:transform .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1);-webkit-appearance:none}._button_1wnjn_1:hover{background:#f2f2f2;box-shadow:0 0 0 1px #ccc}._button_1wnjn_1:focus{box-shadow:0 0 0 2px #0089ff}._button_1wnjn_1:active{transform:scale(.9)}._button_1wnjn_1:hover,._button_1wnjn_1:focus,._button_1wnjn_1:active{cursor:pointer;outline:none}._button-shortcut_1wnjn_35{padding:.1em 5px;color:#999;font-size:.8em;transition:color .15s cubic-bezier(.25,.1,.25,1)}._cross_2ke8w_1{position:relative;width:1em;height:1em}._cross_2ke8w_1:before,._cross_2ke8w_1:after{content:"";display:block;position:absolute;top:50%;left:0;width:1em;height:1px;background:#000;transform-origin:center}._cross_2ke8w_1:before{-webkit-transform:translate(0,-50%) rotate(45deg);-moz-transform:translate(0,-50%) rotate(45deg);transform:translateY(-50%) rotate(45deg)}._cross_2ke8w_1:after{-webkit-transform:translate(0,-50%) rotate(-45deg);-moz-transform:translate(0,-50%) rotate(-45deg);transform:translateY(-50%) rotate(-45deg)}._modal-background_zzhoe_1{position:absolute;z-index:1000;top:0;right:0;bottom:0;left:0;background:#000a;animation:_fade-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1;transition:opacity .2s cubic-bezier(.25,.1,.25,1)}._modal-hide_zzhoe_13{opacity:0}._modal-wrap_zzhoe_17{position:absolute;top:20px;right:20px;bottom:20px;left:20px}._modal-window_zzhoe_25{position:relative;width:100%;max-width:640px;max-height:100%;margin-left:auto;margin-right:auto;color:#000;border-radius:5px;background:#fff;animation:_fade-scale-in_zzhoe_1 .2s cubic-bezier(.25,.1,.25,1) 1}._modal-window-max-height_zzhoe_38{height:100%}._modal-content_zzhoe_42{padding:10px}@keyframes _fade-in_zzhoe_1{0%{opacity:0}to{opacity:1}}@keyframes _fade-scale-in_zzhoe_1{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}._dialog-header_wp50s_1{position:relative;z-index:2;display:flex;justify-content:space-between;margin:0 -10px 10px;padding:0 10px 10px;border-bottom:1px solid #cccccc}._dialog-header_wp50s_1 h3{margin:0;padding:0;font-size:20px;line-height:1em}._dialog-header_wp50s_1 button{font-size:10px}._dialog-main-max-height_wp50s_20{position:absolute;z-index:1;top:40px;right:0;bottom:50px;left:0;padding:10px;overflow:auto}._dialog-footer_wp50s_31,._dialog-footer-max-height_wp50s_31{display:flex;justify-content:space-between;margin:10px -10px 0;padding:10px 10px 0;border-top:1px solid #cccccc}._dialog-footer_wp50s_31 button,._dialog-footer-max-height_wp50s_31 button{font-size:14px}._dialog-footer-max-height_wp50s_31{position:absolute;z-index:2;left:10px;right:10px;bottom:10px}._export-link-dialog-wrapper_p9gxw_1{display:flex}._export-link-dialog-wrapper_p9gxw_1 input{flex-grow:1}._genome-position-search_1l2sx_1,._genome-position-search-focus_1l2sx_2{position:relative;display:flex;align-items:stretch;height:100%;margin-bottom:0;font-size:13.7142857143px;transition:box-shadow .15s cubic-bezier(.25,.1,.25,1),font-size .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-focus_1l2sx_2{box-shadow:0 0 0 1px #337ab7,0 0 3px 1px #337ab7}._genome-position-search-bar_1l2sx_16{position:relative;box-sizing:border-box;width:100%;height:100%;padding:3px;color:#666;font-size:inherit;line-height:24px;border:0;border-radius:3px 0 0 3px;background:transparent}._genome-position-search-bar_1l2sx_16:focus{outline:none;color:#000}._genome-position-search-dark_1l2sx_34 ._genome-position-search-bar_1l2sx_16:focus{color:#e5e5e5}._genome-position-search-bar-button_1l2sx_38,._genome-position-search-bar-button-focus_1l2sx_39{display:block;height:100%;padding:0 8px!important;color:#999;border:0!important;border-radius:0!important;background:transparent;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-button_1l2sx_38:active,._genome-position-search-bar-button_1l2sx_38:focus,._genome-position-search-bar-button_1l2sx_38:hover,._genome-position-search-bar-button-focus_1l2sx_39:active,._genome-position-search-bar-button-focus_1l2sx_39:focus,._genome-position-search-bar-button-focus_1l2sx_39:hover{color:#fff;background:#337ab7}._genome-position-search-bar-button-focus_1l2sx_39{color:#fff;background:#337ab7}._genome-position-search-bar-icon_1l2sx_62,._genome-position-search-bar-icon-focus_1l2sx_63{display:flex;align-items:center;transition:color .15s cubic-bezier(.25,.1,.25,1)}._genome-position-search-bar-icon_1l2sx_62:first-child,._genome-position-search-bar-icon-focus_1l2sx_63:first-child{margin-left:6px;margin-right:2px}._genome-position-search-bar-icon_1l2sx_62 span,._genome-position-search-bar-icon-focus_1l2sx_63 span{display:block;margin-top:-2px}._genome-position-search-bar-icon-focus_1l2sx_63{color:#337ab7}._genome-position-search-bar-suggestions_1l2sx_83{position:fixed;border-radius:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);padding:2px 0;font-size:90%;overflow:auto;max-height:50%}._btn_1l2sx_95{display:inline-block;margin-bottom:0;font-size:13.7142857143px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}._btn-sm_1l2sx_116{font-size:12px;line-height:1.5;border-radius:3px}._btn-default_1l2sx_122{color:#666;background-color:#fff;border-color:#ccc}._btn-default_1l2sx_122:hover{color:#000;background:#ccc}._btn-default_1l2sx_122:active,._btn-default_1l2sx_122:focus{color:#fff;border-color:#000;background:#000}._genome-position-search_1l2sx_1 ._btn_1l2sx_95{border-radius:0 3px 3px 0}.plot-type-selected{background-color:#0000ff4d}.plot-type-container{overflow-y:scroll;margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px;max-height:15vh}.plot-type-container-empty{margin:5px;padding:3px 8px;border:1px solid #aaaaaa;background-color:#e8e8e8;border-radius:5px}.plot-type-item{cursor:pointer}.plot-type-item:not(.plot-type-selected):hover{background-color:#3333cc1a}.track-thumbnail{width:30px;height:20px;display:inline-block;margin-right:10;vertical-align:middle}.track-thumbnail>svg{width:20px;height:20px}.tileset-finder-label{font-weight:700}.tileset-finder-search-box{margin-left:10px}.tileset-finder-search-bar{display:flex;margin-left:5px;justify-content:space-between;align-items:center}.tileset-finder-checkbox-tree{margin:5px;padding:3px;border:1px solid #aaaaaa;border-radius:5px}.react-checkbox-tree{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;font-size:16px}.react-checkbox-tree>ol{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.react-checkbox-tree ol{margin:0;padding-left:0;list-style-type:none}.react-checkbox-tree ol ol{padding-left:24px}.react-checkbox-tree button{line-height:normal;color:inherit}.react-checkbox-tree button:disabled{cursor:not-allowed}.react-checkbox-tree .rct-bare-label{cursor:default}.react-checkbox-tree label{margin-bottom:0;cursor:pointer}.react-checkbox-tree label:hover{background:#3333cc1a}.react-checkbox-tree label:active,.react-checkbox-tree label:focus{background:#3333cc26}.react-checkbox-tree:not(.rct-native-display) input{display:none}.react-checkbox-tree.rct-native-display input{margin:0 5px}.react-checkbox-tree .rct-icon{display:inline-block;text-align:center;text-rendering:auto;font-family:"Font Awesome 5 Free",FontAwesome,sans-serif;font-weight:400;font-variant:normal;font-style:normal}.rct-disabled>.rct-text>label{opacity:.75;cursor:not-allowed}.rct-disabled>.rct-text>label:hover{background:transparent}.rct-disabled>.rct-text>label:active{background:transparent}.rct-text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.rct-options{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:.5rem;text-align:right}.rct-option{opacity:.75;border:0;background:none;cursor:pointer;padding:0 4px;font-size:18px}.rct-option:hover{opacity:1}.rct-option+.rct-option{margin-left:2px}.rct-collapse,.rct-checkbox,.rct-node-icon{padding:0 5px}.rct-collapse *,.rct-checkbox *,.rct-node-icon *{display:inline-block;margin:0;width:14px}.rct-collapse{-ms-flex-item-align:stretch;align-self:stretch;border:0;background:none;line-height:normal;color:inherit;font-size:12px}.rct-collapse.rct-collapse-btn{cursor:pointer}.rct-collapse>.rct-icon-expand-close{opacity:.5}.rct-collapse>.rct-icon-expand-close:hover{opacity:1}.rct-native-display .rct-checkbox{display:none}.rct-node-clickable{cursor:pointer}.rct-node-clickable:hover{background:#3333cc1a}.rct-node-clickable:focus{outline:0;background:#33c3}.rct-node-icon{color:#33c}.rct-title{padding:0 5px}.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uf054"}.rct-icons-fa4 .rct-icon-expand-open:before{content:"\uf078"}.rct-icons-fa4 .rct-icon-uncheck:before{content:"\uf096"}.rct-icons-fa4 .rct-icon-check:before{content:"\uf046"}.rct-icons-fa4 .rct-icon-half-check:before{opacity:.5;content:"\uf046"}.rct-icons-fa4 .rct-icon-leaf:before{content:"\uf016"}.rct-icons-fa4 .rct-icon-parent-open:before{content:"\uf115"}.rct-icons-fa4 .rct-icon-parent-close:before{content:"\uf114"}.rct-icons-fa4 .rct-icon-expand-all:before{content:"\uf0fe"}.rct-icons-fa4 .rct-icon-collapse-all:before{content:"\uf146"}.rct-icons-fa5 .rct-icon-expand-close:before{font-weight:900;content:"\uf054"}.rct-icons-fa5 .rct-icon-expand-open:before{font-weight:900;content:"\uf078"}.rct-icons-fa5 .rct-icon-uncheck:before{content:"\uf0c8"}.rct-icons-fa5 .rct-icon-check:before{content:"\uf14a"}.rct-icons-fa5 .rct-icon-half-check:before{opacity:.5;content:"\uf14a"}.rct-icons-fa5 .rct-icon-leaf:before{content:"\uf15b"}.rct-icons-fa5 .rct-icon-parent-open:before{content:"\uf07c"}.rct-icons-fa5 .rct-icon-parent-close:before{content:"\uf07b"}.rct-icons-fa5 .rct-icon-expand-all:before{content:"\uf0fe"}.rct-icons-fa5 .rct-icon-collapse-all:before{content:"\uf146"}.rct-direction-rtl{direction:rtl}.rct-direction-rtl ol ol{padding-right:24px;padding-left:0}.rct-direction-rtl.rct-icons-fa4 .rct-icon-expand-close:before{content:"\uf105"}.rct-direction-rtl.rct-icons-fa5 .rct-icon-expand-close:before{content:"\uf053"}._track-control_w7hx2_1,._track-control-vertical_w7hx2_2{position:absolute;z-index:1;display:flex;background:#ffffffbf;right:2px;top:2px;border-radius:2.5px;box-shadow:0 0 0 1px #0000000d,0 0 3px #0000001a;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1),background .15s cubic-bezier(.25,.1,.25,1),box-shadow .15s cubic-bezier(.25,.1,.25,1)}._track-control-dark_w7hx2_15,._track-control-dark_w7hx2_15 ._track-control-active_w7hx2_16{background:#282828d9}._track-control-vertical_w7hx2_2{flex-direction:column-reverse}._track-control-left_w7hx2_24{left:2px;right:auto}._track-control-active_w7hx2_16,._track-control-vertical-active_w7hx2_30{opacity:1;z-index:1}._track-control-active_w7hx2_16:hover,._track-control-vertical-active_w7hx2_30:hover{background:#fff;box-shadow:0 0 0 1px #0000001a,0 0 3px #0003}._track-control-dark_w7hx2_15._track-control-active_w7hx2_16:hover{background:#222222f2}._track-control-padding-right_w7hx2_48{right:80px}._track-control-button_w7hx2_52{width:20px;height:20px;padding:4px;cursor:pointer;opacity:.66;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button_w7hx2_52:first-child{border-radius:2.5px 0 0 2.5px}._track-control-button_w7hx2_52:last-child{border-radius:0 2.5px 2.5px 0}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52{color:#ccc}._track-control-dark_w7hx2_15 ._track-control-button_w7hx2_52:hover{color:#fff;background:#337ab7;opacity:1}._track-control-button-vertical_w7hx2_81:first-child{border-radius:0 0 2.5px 2.5px}._track-control-button-vertical_w7hx2_81:last-child{border-radius:2.5px 2.5px 0 0}._center-track_fiu64_1{position:relative;background:transparent}._center-track-container_fiu64_6{position:absolute;z-index:1}._track-range-selection_5bcsr_1{position:absolute;z-index:-1;opacity:0;transition:opacity .15s cubic-bezier(.25,.1,.25,1)}._track-range-selection-active_5bcsr_8{z-index:1;opacity:1}._track-range-selection-group-inactive_5bcsr_22{display:none}._track-range-selection-group-brush-selection_5bcsr_26{outline:2px solid rgba(0,0,0,.33);fill:#000;fill-opacity:.1}._context-menu_18ock_1{position:fixed;background-color:#fffffff2;border:1px solid rgba(0,0,0,.1);border-radius:3px;font-size:12px;cursor:default;padding:3px;box-shadow:0 0 3px #0000001a,0 1px 5px #0000000d}._context-menu-dark_18ock_12{color:#ccc;background-color:#444444f7}._context-menu-icon_18ock_17{display:inline-block;margin-right:3px;vertical-align:middle}._context-menu-icon_18ock_17>svg{width:30px;height:20px}._context-menu-item_18ock_27{padding:2px;white-space:nowrap;border-radius:2px;transition:background .15s cubic-bezier(.25,.1,.25,1),color .15s cubic-bezier(.25,.1,.25,1)}._context-menu-item_18ock_27:hover{background:#337ab7;color:#fff}._context-menu-hr_18ock_38{margin-top:5px;margin-bottom:5px;border:0;border-top:1px solid rgba(0,0,0,.1)}._play-icon_18ock_45{width:12px;height:12px;position:absolute;right:5px}._context-menu-span_18ock_52{margin-right:20px;vertical-align:middle;display:inline-block;line-height:normal;white-space:nowrap}._context-menu-thumbnail_18ock_60{margin-right:10px;border:1px solid #888888}._context-menu-thumbnail-inline_18ock_65{display:inline-block;margin-right:10px;vertical-align:middle}table.table-track-options{border-collapse:collapse;margin-left:auto;margin-right:auto}td.td-track-options{border:1px solid #fff;outline:none;padding:3px;position:relative;font-family:Roboto,sans-serif;font-size:14px;color:#666}.cell-label{position:absolute;left:0;top:0;margin-left:5px;color:#777}.modal-dialog{position:relative;display:table;overflow-y:auto;overflow-x:auto;width:auto;min-width:300px;margin:auto}._drag-listening-div-active_19gkt_1{z-index:10;box-shadow:inset 0 0 3px red}._gallery-tracks_fbxxi_1{position:relative;top:0;left:0;width:100%;height:100%}._gallery-track_fbxxi_1{position:absolute;box-sizing:border-box;top:0;right:0;bottom:0;left:0}._gallery-sub-track_fbxxi_18,._gallery-invisible-track_fbxxi_19{position:absolute}._tiled-plot_1y7td_1{position:relative;flex:1;overflow:hidden}._horizontalList_1y7td_7{display:flex;width:600px;height:300px;white-space:nowrap}._list_1y7td_14{width:400px;height:600px;overflow:hidden;-webkit-overflow-scrolling:touch}._stylizedList_1y7td_21{position:relative;z-index:0;background-color:#f3f3f3;outline:none}._stylizedItem_1y7td_28{position:relative;display:flex;align-items:center;width:100%;background-color:transparent;-webkit-user-select:none;user-select:none;color:#333;font-weight:400}._stylizedHelper_1y7td_39{box-shadow:0 5px 5px -5px #0003,0 -5px 5px -5px #0003;background-color:#fffc;cursor:row-resize}._stylizedHelper_1y7td_39._horizontalItem_1y7td_44{cursor:col-resize}._horizontalItem_1y7td_44{display:flex;flex-shrink:0;align-items:center;justify-content:center}._resizable-track_1y7td_55{width:100%;height:100%}path._domain_1y7td_60{stroke-width:0px}._top-right-handle_cizw2_1,._bottom-right-handle_cizw2_2{border-right:black solid;border-top:black solid}._top-left-handle_cizw2_7,._bottom-left-handle_cizw2_8{border-left:black solid;border-top:black solid}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14,._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{position:absolute;opacity:0;transition:transform .15s cubic-bezier(.25,.1,.25,1),opacity .15s cubic-bezier(.25,.1,.25,1)}._draggable-div_cizw2_22{background-color:transparent;box-sizing:border-box}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{width:10px;height:4px;border-top:1px solid black;border-bottom:1px solid black}._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle-grabber_cizw2_28{margin:4px 7px}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{width:4px;height:10px;border-left:1px solid black;border-right:1px solid black}._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle-grabber_cizw2_44{margin:7px 4px}._draggable-div_cizw2_22:hover ._top-draggable-handle_cizw2_13,._draggable-div_cizw2_22:hover ._bottom-draggable-handle_cizw2_14,._draggable-div_cizw2_22:hover ._left-draggable-handle_cizw2_15,._draggable-div_cizw2_22:hover ._right-draggable-handle_cizw2_16{opacity:.5;background:#ffffffbf;box-shadow:0 0 3px 1px #ffffffbf;border-radius:3px}._top-draggable-handle_cizw2_13:hover,._top-draggable-handle_cizw2_13:active,._bottom-draggable-handle_cizw2_14:hover,._bottom-draggable-handle_cizw2_14:active,._left-draggable-handle_cizw2_15:hover,._left-draggable-handle_cizw2_15:active,._right-draggable-handle_cizw2_16:hover,._right-draggable-handle_cizw2_16:active{opacity:1!important;transform:scale(2)}._top-draggable-handle_cizw2_13:hover ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:hover ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:hover ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:hover ._right-draggable-handle-grabber_cizw2_44,._top-draggable-handle_cizw2_13:active ._top-draggable-handle-grabber_cizw2_27,._top-draggable-handle_cizw2_13:active ._bottom-draggable-handle-grabber_cizw2_28,._top-draggable-handle_cizw2_13:active ._left-draggable-handle-grabber_cizw2_43,._top-draggable-handle_cizw2_13:active ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:hover ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:hover ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:hover ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:hover ._right-draggable-handle-grabber_cizw2_44,._bottom-draggable-handle_cizw2_14:active ._top-draggable-handle-grabber_cizw2_27,._bottom-draggable-handle_cizw2_14:active ._bottom-draggable-handle-grabber_cizw2_28,._bottom-draggable-handle_cizw2_14:active ._left-draggable-handle-grabber_cizw2_43,._bottom-draggable-handle_cizw2_14:active ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:hover ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:hover ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:hover ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:hover ._right-draggable-handle-grabber_cizw2_44,._left-draggable-handle_cizw2_15:active ._top-draggable-handle-grabber_cizw2_27,._left-draggable-handle_cizw2_15:active ._bottom-draggable-handle-grabber_cizw2_28,._left-draggable-handle_cizw2_15:active ._left-draggable-handle-grabber_cizw2_43,._left-draggable-handle_cizw2_15:active ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:hover ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:hover ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:hover ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:hover ._right-draggable-handle-grabber_cizw2_44,._right-draggable-handle_cizw2_16:active ._top-draggable-handle-grabber_cizw2_27,._right-draggable-handle_cizw2_16:active ._bottom-draggable-handle-grabber_cizw2_28,._right-draggable-handle_cizw2_16:active ._left-draggable-handle-grabber_cizw2_43,._right-draggable-handle_cizw2_16:active ._right-draggable-handle-grabber_cizw2_44{box-shadow:0 0 3px 1px #0089ff;background:#0089ff}._top-draggable-handle_cizw2_13,._bottom-draggable-handle_cizw2_14{height:12px;cursor:row-resize}._left-draggable-handle_cizw2_15,._right-draggable-handle_cizw2_16{width:12px;cursor:col-resize}._horizontal-tiled-plot_1bqkg_1,._track-renderer_11dwb_1{position:relative}._track-renderer-element_11dwb_5,._track-renderer-events_11dwb_6{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}._track-renderer-events_11dwb_6{z-index:1}._vertical-tiled-plot_f3ho8_1{position:relative}._view-config-editor-header_1hlm6_1{margin:-10px -10px 0;padding:10px;display:flex;justify-content:space-between;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button{display:flex;align-items:center;font-size:14px;background:#f2f2f2}._view-config-editor-header_1hlm6_1 button:hover{background:#e5e5e5}._view-config-editor-header_1hlm6_1 button:hover span{color:#666}._view-config-editor_1hlm6_1{position:absolute;top:50px;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;overflow:auto;font-size:12.5px;height:calc(100% - 80px)}._view-config-log_1hlm6_34{position:absolute;right:0;bottom:0;left:0;margin:1px 0 0;padding:0;min-height:30px;background:#f2f2f2;transition:height .15s cubic-bezier(.25,.1,.25,1)}._view-config-log-header_1hlm6_46{background:#f2f2f2;border-top:1px solid #cccccc;border-bottom:1px solid #cccccc;padding-left:10px;height:30px;display:flex;align-items:center;cursor:pointer;position:sticky;position:-webkit-sticky;top:0}._view-config-log-msg_1hlm6_60{background:#f2f2f2;overflow:auto;height:calc(100% - 30px)}._view-config-log-msg_1hlm6_60 tr,._view-config-log-msg_1hlm6_60 td{outline:none;vertical-align:top}._view-config-log-msg_1hlm6_60 ._title_1hlm6_70{font-weight:700;padding-left:8px;padding-top:8px;width:100px}._view-config-log-msg_1hlm6_60 ._Warning_1hlm6_76{color:orange}._view-config-log-msg_1hlm6_60 ._Success_1hlm6_79{color:green}._view-config-log-msg_1hlm6_60 ._Error_1hlm6_82{color:red}._view-config-log-msg_1hlm6_60 pre{background:#fff;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._add-track-position-table_egwog_1{border-collapse:collapse;margin:5px;color:#666}._add-track-position-table-dark_egwog_7{color:#ccc}._add-track-position-other_egwog_11{outline:none}._add-track-position-top-center_egwog_15{min-width:80px;min-height:20px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999;border-radius:2px 2px 0 0}._add-track-position-top-center_egwog_15:hover{color:#fff;background-color:#337ab7}._add-track-position-middle-left_egwog_30{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #999;border-radius:2px 0 0 2px}._add-track-position-middle-left_egwog_30:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-right_egwog_45{min-width:40px;text-align:center;outline:none;border-top:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 2px 2px 0}._add-track-position-middle-right_egwog_45:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle_egwog_60{text-align:center;outline:none;border:1px solid #999;position:relative}._add-track-position-middle-middle_egwog_60:hover{background-color:#337ab7;color:#fff}._add-track-position-middle-middle-full_egwog_72{height:80px;display:flex;flex-direction:column;justify-content:center;align-items:center}._add-track-position-middle-middle-upper-right_egwog_80{width:0;height:0;border-top:30px solid #999;border-left:30px solid transparent;position:absolute;top:0;right:0}._add-track-position-middle-middle-upper-right_egwog_80:hover{border-top:30px solid #337ab7}._add-track-position-middle-middle-lower-left_egwog_94{width:0;height:0;border-bottom:30px solid #999;border-right:30px solid transparent;position:absolute;bottom:0;left:0}._add-track-position-middle-middle-lower-left_egwog_94:hover{border-bottom:30px solid #337ab7}._add-track-position-bottom-middle_egwog_108{min-height:20px;text-align:center;outline:none;border-left:1px solid #999;border-right:1px solid #999;border-bottom:1px solid #999;border-radius:0 0 2px 2px}._add-track-position-bottom-middle_egwog_108:hover{background-color:#337ab7;color:#fff}._add-track-position-span_egwog_123{margin:5px}._higlass_1k7ri_1{position:relative}._higlass-dark-theme_1k7ri_5{background:#000}._higlass-container-overflow_1k7ri_9,._higlass-scroll-container-overflow_1k7ri_10,._higlass-scroll-container-scroll_1k7ri_11{position:absolute;top:0;right:0;bottom:0;left:0}._higlass-scroll-container-overflow_1k7ri_10{overflow:hidden}._higlass-scroll-container-scroll_1k7ri_11{overflow-x:hidden;overflow-y:auto}._higlass-canvas_1k7ri_28{position:absolute;width:100%}._higlass-drawing-surface_1k7ri_33{position:relative;width:100%}._higlass-svg_1k7ri_38{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}._tiled-area_1k7ri_47{display:flex;flex-direction:column;width:100%;height:100%}._track-mouseover-menu_1k7ri_54{position:fixed;z-index:1;margin:17px 0 0 9px;padding:0 .25rem;max-width:50vw;word-wrap:break-word;font-size:.8em;pointer-events:none;background:#fff;border-radius:.25rem;box-shadow:0 0 0 1px #0000001a,0 0 3px #00000013,0 0 7px #0000000d}.react-grid-layout{position:relative;transition:height .2s ease}.react-grid-item{transition:all .2s ease;transition-property:left,top}.react-grid-item img{pointer-events:none;-webkit-user-select:none;user-select:none}.react-grid-item.cssTransforms{transition-property:transform}.react-grid-item.resizing{z-index:1;will-change:width,height}.react-grid-item.react-draggable-dragging{transition:none;z-index:3;will-change:transform}.react-grid-item.dropping{visibility:hidden}.react-grid-item.react-grid-placeholder{background:red;opacity:.2;transition-duration:.1s;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.react-grid-item>.react-resizable-handle{position:absolute;width:20px;height:20px}.react-grid-item>.react-resizable-handle:after{content:"";position:absolute;right:3px;bottom:3px;width:5px;height:5px;border-right:2px solid rgba(0,0,0,.4);border-bottom:2px solid rgba(0,0,0,.4)}.react-resizable-hide>.react-resizable-handle{display:none}.react-grid-item>.react-resizable-handle.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-grid-item>.react-resizable-handle.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-w,.react-grid-item>.react-resizable-handle.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-grid-item>.react-resizable-handle.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-n,.react-grid-item>.react-resizable-handle.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-grid-item>.react-resizable-handle.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-grid-item>.react-resizable-handle.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}.react-resizable{position:relative}.react-resizable-handle{position:absolute;width:20px;height:20px;background-repeat:no-repeat;background-origin:content-box;box-sizing:border-box;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDYiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmYwMCIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI2cHgiIGhlaWdodD0iNnB4Ij48ZyBvcGFjaXR5PSIwLjMwMiI+PHBhdGggZD0iTSA2IDYgTCAwIDYgTCAwIDQuMiBMIDQgNC4yIEwgNC4yIDQuMiBMIDQuMiAwIEwgNiAwIEwgNiA2IEwgNiA2IFoiIGZpbGw9IiMwMDAwMDAiLz48L2c+PC9zdmc+);background-position:bottom right;padding:0 3px 3px 0}.react-resizable-handle-sw{bottom:0;left:0;cursor:sw-resize;transform:rotate(90deg)}.react-resizable-handle-se{bottom:0;right:0;cursor:se-resize}.react-resizable-handle-nw{top:0;left:0;cursor:nw-resize;transform:rotate(180deg)}.react-resizable-handle-ne{top:0;right:0;cursor:ne-resize;transform:rotate(270deg)}.react-resizable-handle-w,.react-resizable-handle-e{top:50%;margin-top:-10px;cursor:ew-resize}.react-resizable-handle-w{left:0;transform:rotate(135deg)}.react-resizable-handle-e{right:0;transform:rotate(315deg)}.react-resizable-handle-n,.react-resizable-handle-s{left:50%;margin-left:-10px;cursor:ns-resize}.react-resizable-handle-n{top:0;transform:rotate(225deg)}.react-resizable-handle-s{bottom:0;transform:rotate(45deg)}code[class*=language-],pre[class*=language-]{color:#393a34;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;font-size:.95em;line-height:1.2em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{background:#b3d4fc}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border:1px solid #dddddd;background-color:#fff}:not(pre)>code[class*=language-]{padding:1px .2em;background:#f8f8f8;border:1px solid #dddddd}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.string,.token.attr-value{color:#e3116c}.token.punctuation,.token.operator{color:#393a34}.token.entity,.token.url,.token.symbol,.token.number,.token.boolean,.token.variable,.token.constant,.token.property,.token.regex,.token.inserted{color:#36acaa}.token.atrule,.token.keyword,.token.attr-name,.language-autohotkey .token.selector{color:#00a4db}.token.function,.token.deleted,.language-autohotkey .token.tag{color:#9a050f}.token.tag,.token.selector,.language-autohotkey .token.keyword{color:#00009f}.token.important,.token.function,.token.bold{font-weight:700}.token.italic{font-style:italic}.higlass *{box-sizing:border-box}.higlass .react-resizable-handle{z-index:1}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();const Es=Object.freeze(Object.defineProperty({__proto__:null,clsx:xs,default:xs},Symbol.toStringTag,{value:"Module"}));var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ks(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Os(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var Ps={exports:{}};!function(e){typeof window<"u"&&window,e.exports=function(){if(typeof window>"u")return null;var e=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},n=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function r(e,t){var n=Object.prototype.toString.call(e),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||typeof jQuery<"u"&&e instanceof jQuery||typeof Elements<"u"&&e instanceof Elements,i=0,o=e.length;if(r)for(;i<o;i++)t(e[i]);else t(e)}function i(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function o(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}var a=function(e,s){var l=0;function c(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(r){for(e=0,t=n.length;e<t;e++)n[e].call(this,r)},this.remove=function(r){var i=[];for(e=0,t=n.length;e<t;e++)n[e]!==r&&i.push(n[e]);n=i},this.length=function(){return n.length}}function u(e,n){if(e){if(e.resizedAttached)return void e.resizedAttached.add(n);e.resizedAttached=new c,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var r={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},a={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(e.resizeSensor,r);var s=document.createElement("div");s.className="resize-sensor-expand",o(s,r);var u=document.createElement("div");o(u,a),s.appendChild(u);var h=document.createElement("div");h.className="resize-sensor-shrink",o(h,r);var p=document.createElement("div");o(p,a),o(p,{width:"200%",height:"200%"}),h.appendChild(p),e.resizeSensor.appendChild(s),e.resizeSensor.appendChild(h),e.appendChild(e.resizeSensor);var f=window.getComputedStyle(e),d=f?f.getPropertyValue("position"):null;"absolute"!==d&&"relative"!==d&&"fixed"!==d&&"sticky"!==d&&(e.style.position="relative");var m=!1,g=0,y=i(e),v=0,b=0,_=!0;l=0;var w=function(){var t=e.offsetWidth,n=e.offsetHeight;u.style.width=t+10+"px",u.style.height=n+10+"px",s.scrollLeft=t+10,s.scrollTop=n+10,h.scrollLeft=t+10,h.scrollTop=n+10},T=function(){if(_){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t(function(){l=0,T()})));_=!1}w()};e.resizeSensor.resetSensor=T;var x=function(){g=0,m&&(v=y.width,b=y.height,e.resizedAttached&&e.resizedAttached.call(y))},E=function(){y=i(e),(m=y.width!==v||y.height!==b)&&!g&&(g=t(x)),T()},S=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};S(s,"scroll",E),S(h,"scroll",E),l=t(function(){l=0,T()})}}r(e,function(e){u(e,s)}),this.detach=function(t){l||(n(l),l=0),a.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(a.reset=function(e){r(e,function(e){e.resizeSensor.resetSensor()})},a.detach=function(e,t){r(e,function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},typeof MutationObserver<"u"){var s=new MutationObserver(function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=e[t].addedNodes,r=0;r<n.length;r++)n[r].resizeSensor&&a.reset(n[r])});document.addEventListener("DOMContentLoaded",function(e){s.observe(document.body,{childList:!0,subtree:!0})})}return a}()}(Ps);var Cs=Ps.exports,As={exports:{}};!function(e){typeof window<"u"&&window,e.exports=function(e){var t=function(){var t,n={},r=[];function i(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function a(e,t){var n=t.split(/\d/),r=n[n.length-1];switch(t=parseFloat(t),r){case"px":default:return t;case"em":return t*i(e);case"rem":return t*i();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,a=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===r?"min":"max"])(o,a)}}function s(e,t){this.element=e;var r,i,s,l,c,u,h,p,f=["min-width","min-height","max-width","max-height"];this.call=function(){for(r in s=o(this.element),u={},n[t])n[t].hasOwnProperty(r)&&(i=n[t][r],l=a(this.element,i.value),c="width"===i.property?s.width:s.height,p=i.mode+"-"+i.property,h="","min"===i.mode&&c>=l&&(h+=i.value),"max"===i.mode&&c<=l&&(h+=i.value),u[p]||(u[p]=""),h&&-1===(" "+u[p]+" ").indexOf(" "+h+" ")&&(u[p]+=" "+h));for(var e in f)f.hasOwnProperty(e)&&(u[f[e]]?this.element.setAttribute(f[e],u[f[e]].substr(1)):this.element.removeAttribute(f[e]))}}function l(t,n){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,n)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()}))}function c(e,i,o,a){if(typeof n[e]>"u"){n[e]=[];var s=r.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",r.push(e)}n[e].push({mode:i,property:o,value:a})}function u(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),!t&&typeof $$<"u"&&(t=$$),!t&&typeof jQuery<"u"&&(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function h(e){var t=u(e);for(var r in n)if(n.hasOwnProperty(r))for(var i=t(r,e),o=0,a=i.length;o<a;o++)l(i[o],r)}function p(t){var n=[],r=[],i=[],o=0,a=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){n.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),u=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");i.push(u);var h={minWidth:c};r.push(h),c?t.children[l].style.display="none":(o=n.length-1,t.children[l].style.display="block")}function p(){var e,l=!1;for(e in n)n.hasOwnProperty(e)&&r[e].minWidth&&t.offsetWidth>r[e].minWidth&&(l=e);if(l||(l=o),a!==l)if(s[l])n[a].style.display="none",n[l].style.display="block",a=l;else{var c=new Image;c.onload=function(){n[l].src=i[l],n[a].style.display="none",n[l].style.display="block",s[l]=!0,a=l},c.src=i[l]}else n[l].src=i[l]}a=o,t.resizeSensorInstance=new e(t,p),p()}function f(){for(var e=u()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)p(e[t])}var d=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,m=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function g(e){var t,n,r,i;for(e=e.replace(/'/g,'"');null!==(t=d.exec(e));)for(n=t[1]+t[3],r=t[2];null!==(i=m.exec(r));)c(n,i[1],i[2],i[3])}function y(e){var t="";if(e)if("string"==typeof e)(-1!==(e=e.toLowerCase()).indexOf("min-width")||-1!==e.indexOf("max-width"))&&g(e);else for(var n=0,r=e.length;n<r;n++)1===e[n].type?(-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")||-1!==t.indexOf("min-width")||-1!==t.indexOf("max-width"))&&g(t):4===e[n].type?y(e[n].cssRules||e[n].rules):3===e[n].type&&e[n].styleSheet.hasOwnProperty("cssRules")&&y(e[n].styleSheet.cssRules)}var v=!1;this.init=function(){var n="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?n="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?n="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(n="oanimationstart"),document.body.addEventListener(n,function(t){var n=t.target,i=n&&window.getComputedStyle(n,null),o=i&&i.getPropertyValue("animation-name");if(o&&-1!==o.indexOf("element-queries")){n.elementQueriesSensor=new e(n,function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()});var a=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");a=parseInt(a.replace("px","")),l(t.target,r[a])}}),v||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),v=!0);for(var i=0,o=document.styleSheets.length;i<o;i++)try{document.styleSheets[i].href&&0===document.styleSheets[i].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[i].href),y(document.styleSheets[i].cssRules||document.styleSheets[i].rules||document.styleSheets[i].cssText)}catch{}f()},this.findElementQueriesElements=function(e){h(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};var n=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){n(t.init)},t}(Cs)}(As);var Ms={ResizeSensor:Cs,ElementQueries:As.exports};function Is(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rs(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Is(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function Ds(e){return null===e?NaN:+e}const Ns=Rs(Is),js=Ns.right,Ls=Ns.left,Bs=Rs(Ds).center;function Fs(e,t){let n=0;if(void 0===t)for(let r of e)null!=r&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}return n}function zs(e){return 0|e.length}function Hs(e){return!(e>0)}function Us(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function Vs(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let a of e)null!=a&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function Gs(e,t){const n=Vs(e,t);return n&&Math.sqrt(n)}function Xs(e,t){let n,r;if(void 0===t)for(const i of e)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function Ws(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ys(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ys(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let qs=function(){return Ws(function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._partials=new Float64Array(32),this._n=0},[{key:"add",value:function(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}])}();function $s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ks(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zs(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zs(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Qs(e,t,n){return t=ol(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rl()?Reflect.construct(t,[],ol(e).constructor):t.apply(e,n))}function Js(e,t,n,r){var i=el(ol(e.prototype),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function el(){return el=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ol(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},el.apply(null,arguments)}function tl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&il(e,t)}function nl(e){var t="function"==typeof Map?new Map:void 0;return nl=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch{return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(rl())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&il(i,n.prototype),i}(e,arguments,ol(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),il(n,e)},nl(e)}function rl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rl=function(){return!!e})()}function il(e,t){return(il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ol(e){return(ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}let al=function(e){function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hl;var r;if($s(this,t),r=Qs(this,t),Object.defineProperties(r,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(const[t,i]of e)r.set(t,i);return r}return tl(t,e),Ks(t,[{key:"get",value:function(e){return Js(t,"get",this,3)([ll(this,e)])}},{key:"has",value:function(e){return Js(t,"has",this,3)([ll(this,e)])}},{key:"set",value:function(e,n){return Js(t,"set",this,3)([cl(this,e),n])}},{key:"delete",value:function(e){return Js(t,"delete",this,3)([ul(this,e)])}}])}(nl(Map)),sl=function(e){function t(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hl;var r;if($s(this,t),r=Qs(this,t),Object.defineProperties(r,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(const t of e)r.add(t);return r}return tl(t,e),Ks(t,[{key:"has",value:function(e){return Js(t,"has",this,3)([ll(this,e)])}},{key:"add",value:function(e){return Js(t,"add",this,3)([cl(this,e)])}},{key:"delete",value:function(e){return Js(t,"delete",this,3)([ul(this,e)])}}])}(nl(Set));function ll(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function cl(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function ul(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(t),n.delete(i)),t}function hl(e){return null!==e&&"object"==typeof e?e.valueOf():e}function pl(e){return e}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gl(e,pl,pl,n)}function dl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return gl(e,pl,t,r)}function ml(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function gl(e,t,n,r){return function e(i,o){if(o>=r.length)return n(i);const a=new al,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[t,n]of a)a.set(t,e(n,o));return t(a)}(e,0)}function yl(e,t){return Array.from(t,t=>e[t])}function vl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[i=Is]=n;if(1===i.length||n.length>1){const t=Uint32Array.from(e,(e,t)=>t);return n.length>1?(n=n.map(t=>e.map(t)),t.sort((e,t)=>{for(const r of n){const n=Is(r[e],r[t]);if(n)return n}})):(i=e.map(i),t.sort((e,t)=>Is(i[e],i[t]))),yl(e,t)}return e.sort(i)}var bl=Array.prototype.slice;function _l(e){return function(){return e}}var wl=Math.sqrt(50),Tl=Math.sqrt(10),xl=Math.sqrt(2);function El(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Sl(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}function Sl(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=wl?10:o>=Tl?5:o>=xl?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=wl?10:o>=Tl?5:o>=xl?2:1)}function kl(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=wl?i*=10:o>=Tl?i*=5:o>=xl&&(i*=2),t<e?-i:i}function Ol(e,t,n){let r;for(;;){const i=Sl(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Pl(e){return Math.ceil(Math.log(Fs(e))/Math.LN2)+1}function Cl(){var e=pl,t=Xs,n=Pl;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(r[i],i,r);var l=t(s),c=l[0],u=l[1],h=n(s,c,u);if(!Array.isArray(h)){const e=u,n=+h;if(t===Xs&&([c,u]=Ol(c,u,n)),(h=El(c,u,n))[h.length-1]>=u)if(e>=u&&t===Xs){const e=Sl(c,u,n);isFinite(e)&&(e>0?u=(Math.floor(u/e)+1)*e:e<0&&(u=(Math.ceil(u*-e)+1)/-e))}else h.pop()}for(var p=h.length;h[0]<=c;)h.shift(),--p;for(;h[p-1]>u;)h.pop(),--p;var f,d=new Array(p+1);for(i=0;i<=p;++i)(f=d[i]=[]).x0=i>0?h[i-1]:c,f.x1=i<p?h[i]:u;for(i=0;i<a;++i)c<=(o=s[i])&&o<=u&&d[js(h,o,0,p)].push(r[i]);return d}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:_l(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:_l([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?_l(bl.call(e)):_l(e),r):n},r}function Al(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Ml(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Il(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Is;for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Il(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}const o=e[t];let a=n,s=r;for(Rl(e,n,t),i(e[r],o)>0&&Rl(e,n,r);a<s;){for(Rl(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?Rl(e,n,s):(++s,Rl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Rl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Dl(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),r=e.length){if((t=+t)<=0||r<2)return Ml(e);if(t>=1)return Al(e);var r,i=(r-1)*t,o=Math.floor(i),a=Al(Il(e,o).subarray(0,o+1));return a+(Ml(e.subarray(o+1))-a)*(i-o)}}function Nl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ds;if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function jl(e,t){let n,r=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Ll(e,t){let n=0,r=0;if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Bl(e,t){return Dl(e,.5,t)}function Fl(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function zl(e,t){let n,r=-1,i=-1;if(void 0===t)for(const o of e)++i,null!=o&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);else for(let o of e)null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function Hl(e,t){return[e,t]}function Ul(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Vl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;if(1===t.length)return zl(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?0===t(o,o):t(o,n)<0)&&(n=o,r=i);return r}const Gl=Xl(Math.random);function Xl(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length)-(n=+n);for(;r;){const i=e()*r--|0,o=t[r+n];t[r+n]=t[i+n],t[i+n]=o}return t}}function Wl(e,t){let n=0;if(void 0===t)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Yl(e){if(!(i=e.length))return[];for(var t=-1,n=Ml(e,ql),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r}function ql(e){return e.length}function $l(e){return e instanceof Set?e:new Set(e)}function Kl(e,t){const n=e[Symbol.iterator](),r=new Set;for(const i of t){if(r.has(i))continue;let e,t;for(;({value:e,done:t}=n.next());){if(t)return!1;if(r.add(e),Object.is(i,e))break}}return!0}const Zl=Object.freeze(Object.defineProperty({__proto__:null,Adder:qs,InternMap:al,InternSet:sl,ascending:Is,bin:Cl,bisect:js,bisectCenter:Bs,bisectLeft:Ls,bisectRight:js,bisector:Rs,count:Fs,cross:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r="function"==typeof t[t.length-1]&&function(e){return t=>e(...t)}(t.pop()),i=(t=t.map(Us)).map(zs),o=t.length-1,a=new Array(o+1).fill(0),s=[];if(o<0||i.some(Hs))return s;for(;;){s.push(a.map((e,n)=>t[n][e]));let e=o;for(;++a[e]===i[e];){if(0===e)return r?s.map(r):s;a[e--]=0}}},cumsum:function(e,t){var n=0,r=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:i=>n+=+t(i,r++,e)||0)},descending:function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},deviation:Gs,difference:function(e){e=new Set(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)for(const t of i)e.delete(t);return e},disjoint:function(e,t){const n=t[Symbol.iterator](),r=new Set;for(const i of e){if(r.has(i))return!1;let e,t;for(;({value:e,done:t}=n.next())&&!t;){if(Object.is(i,e))return!1;r.add(e)}}return!0},every:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(!t(r,++n,e))return!1;return!0},extent:Xs,fcumsum:function(e,t){const n=new qs;let r=-1;return Float64Array.from(e,void 0===t?e=>n.add(+e||0):i=>n.add(+t(i,++r,e)||0))},filter:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of e)t(i,++r,e)&&n.push(i);return n},fsum:function(e,t){const n=new qs;if(void 0===t)for(let r of e)(r=+r)&&n.add(r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&n.add(i)}return+n},greatest:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is,r=!1;if(1===n.length){let i;for(const o of e){const e=n(o);(r?Is(e,i)>0:0===Is(e,e))&&(t=o,i=e,r=!0)}}else for(const i of e)(r?n(i,t)>0:0===n(i,i))&&(t=i,r=!0);return t},greatestIndex:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is;if(1===t.length)return jl(e,t);let n,r=-1,i=-1;for(const o of e)++i,(r<0?0===t(o,o):t(o,n)>0)&&(n=o,r=i);return r},group:fl,groupSort:function(e,t,n){return(1===t.length?vl(dl(e,t,n),(e,t)=>{let[n,r]=e,[i,o]=t;return Is(r,o)||Is(n,i)}):vl(fl(e,n),(e,n)=>{let[r,i]=e,[o,a]=n;return t(i,a)||Is(r,o)})).map(e=>{let[t]=e;return t})},groups:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gl(e,Array.from,pl,n)},histogram:Cl,index:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gl(e,pl,ml,n)},indexes:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gl(e,Array.from,ml,n)},intersection:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=new Set(e),n=n.map($l);e:for(const i of e)for(const t of n)if(!t.has(i)){e.delete(i);continue e}return e},least:function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Is,r=!1;if(1===n.length){let i;for(const o of e){const e=n(o);(r?Is(e,i)<0:0===Is(e,e))&&(t=o,i=e,r=!0)}}else for(const i of e)(r?n(i,t)<0:0===n(i,i))&&(t=i,r=!0);return t},leastIndex:Vl,map:function(e,t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof t)throw new TypeError("mapper is not a function");return Array.from(e,(n,r)=>t(n,r,e))},max:Al,maxIndex:jl,mean:Ll,median:Bl,merge:Fl,min:Ml,minIndex:zl,nice:Ol,pairs:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hl;const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n},permute:yl,quantile:Dl,quantileSorted:Nl,quickselect:Il,range:Ul,reduce:function(e,t,n){if("function"!=typeof t)throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=t(n,o,++a,e);return n},reverse:function(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()},rollup:dl,rollups:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return gl(e,Array.from,t,r)},scan:function(e,t){const n=Vl(e,t);return n<0?void 0:n},shuffle:Gl,shuffler:Xl,some:function(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let n=-1;for(const r of e)if(t(r,++n,e))return!0;return!1},sort:vl,subset:function(e,t){return Kl(t,e)},sum:Wl,superset:Kl,thresholdFreedmanDiaconis:function(e,t,n){return Math.ceil((n-t)/(2*(Dl(e,.75)-Dl(e,.25))*Math.pow(Fs(e),-1/3)))},thresholdScott:function(e,t,n){return Math.ceil((n-t)/(3.5*Gs(e)*Math.pow(Fs(e),-1/3)))},thresholdSturges:Pl,tickIncrement:Sl,tickStep:kl,ticks:El,transpose:Yl,union:function(){const e=new Set;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)for(const t of i)e.add(t);return e},variance:Vs,zip:function(){return Yl(arguments)}},Symbol.toStringTag,{value:"Module"}));function Ql(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Jl(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const ec=Symbol("implicit");function tc(){var e=new al,t=[],n=[],r=ec;function i(i){let o=e.get(i);if(void 0===o){if(r!==ec)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new al;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return tc(t,n).unknown(r)},Ql.apply(i,arguments),i}function nc(){var e,t,n=tc().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,p=h?a:o,f=h?o:a;e=(f-p)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),p+=(f-p-e*(n-l))*u,t=e*(1-l),s&&(p=Math.round(p),t=Math.round(t));var d=Ul(n).map(function(t){return p+e*t});return i(h?d.reverse():d)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return nc(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},Ql.apply(h(),arguments)}function rc(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rc(t())},e}function ic(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ac(){}var sc=.7,lc=1/sc,cc="\\s*([+-]?\\d+)\\s*",uc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",hc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pc=/^#([0-9a-f]{3,8})$/,fc=new RegExp("^rgb\\("+[cc,cc,cc]+"\\)$"),dc=new RegExp("^rgb\\("+[hc,hc,hc]+"\\)$"),mc=new RegExp("^rgba\\("+[cc,cc,cc,uc]+"\\)$"),gc=new RegExp("^rgba\\("+[hc,hc,hc,uc]+"\\)$"),yc=new RegExp("^hsl\\("+[uc,hc,hc]+"\\)$"),vc=new RegExp("^hsla\\("+[uc,hc,hc,uc]+"\\)$"),bc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _c(){return this.rgb().formatHex()}function wc(){return this.rgb().formatRgb()}function Tc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xc(t):3===n?new Oc(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ec(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ec(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=fc.exec(e))?new Oc(t[1],t[2],t[3],1):(t=dc.exec(e))?new Oc(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=mc.exec(e))?Ec(t[1],t[2],t[3],t[4]):(t=gc.exec(e))?Ec(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=yc.exec(e))?Mc(t[1],t[2]/100,t[3]/100,1):(t=vc.exec(e))?Mc(t[1],t[2]/100,t[3]/100,t[4]):bc.hasOwnProperty(e)?xc(bc[e]):"transparent"===e?new Oc(NaN,NaN,NaN,0):null}function xc(e){return new Oc(e>>16&255,e>>8&255,255&e,1)}function Ec(e,t,n,r){return r<=0&&(e=t=n=NaN),new Oc(e,t,n,r)}function Sc(e){return e instanceof ac||(e=Tc(e)),e?new Oc((e=e.rgb()).r,e.g,e.b,e.opacity):new Oc}function kc(e,t,n,r){return 1===arguments.length?Sc(e):new Oc(e,t,n,r??1)}function Oc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Pc(){return"#"+Ac(this.r)+Ac(this.g)+Ac(this.b)}function Cc(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Ac(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Mc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Dc(e,t,n,r)}function Ic(e){if(e instanceof Dc)return new Dc(e.h,e.s,e.l,e.opacity);if(e instanceof ac||(e=Tc(e)),!e)return new Dc;if(e instanceof Dc)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Dc(a,s,l,e.opacity)}function Rc(e,t,n,r){return 1===arguments.length?Ic(e):new Dc(e,t,n,r??1)}function Dc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Nc(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ic(ac,Tc,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:_c,formatHex:_c,formatHsl:function(){return Ic(this).formatHsl()},formatRgb:wc,toString:wc}),ic(Oc,kc,oc(ac,{brighter:function(e){return e=null==e?lc:Math.pow(lc,e),new Oc(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?sc:Math.pow(sc,e),new Oc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pc,formatHex:Pc,formatRgb:Cc,toString:Cc})),ic(Dc,Rc,oc(ac,{brighter:function(e){return e=null==e?lc:Math.pow(lc,e),new Dc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?sc:Math.pow(sc,e),new Dc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Oc(Nc(e>=240?e-240:e+120,i,r),Nc(e,i,r),Nc(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const jc=Math.PI/180,Lc=180/Math.PI,Bc=.96422,Fc=.82521,zc=4/29,Hc=6/29,Uc=3*Hc*Hc,Vc=Hc*Hc*Hc;function Gc(e){if(e instanceof Wc)return new Wc(e.l,e.a,e.b,e.opacity);if(e instanceof Jc)return eu(e);e instanceof Oc||(e=Sc(e));var t,n,r=Kc(e.r),i=Kc(e.g),o=Kc(e.b),a=Yc((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Yc((.4360747*r+.3850649*i+.1430804*o)/Bc),n=Yc((.0139322*r+.0971045*i+.7141733*o)/Fc)),new Wc(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Xc(e,t,n,r){return 1===arguments.length?Gc(e):new Wc(e,t,n,r??1)}function Wc(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Yc(e){return e>Vc?Math.pow(e,1/3):e/Uc+zc}function qc(e){return e>Hc?e*e*e:Uc*(e-zc)}function $c(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Kc(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zc(e){if(e instanceof Jc)return new Jc(e.h,e.c,e.l,e.opacity);if(e instanceof Wc||(e=Gc(e)),0===e.a&&0===e.b)return new Jc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Lc;return new Jc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Qc(e,t,n,r){return 1===arguments.length?Zc(e):new Jc(e,t,n,r??1)}function Jc(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function eu(e){if(isNaN(e.h))return new Wc(e.l,0,0,e.opacity);var t=e.h*jc;return new Wc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ic(Wc,Xc,oc(ac,{brighter:function(e){return new Wc(this.l+18*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new Wc(this.l-18*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Oc($c(3.1338561*(t=Bc*qc(t))-1.6168667*(e=1*qc(e))-.4906146*(n=Fc*qc(n))),$c(-.9787684*t+1.9161415*e+.033454*n),$c(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),ic(Jc,Qc,oc(ac,{brighter:function(e){return new Jc(this.h,this.c,this.l+18*(e??1),this.opacity)},darker:function(e){return new Jc(this.h,this.c,this.l-18*(e??1),this.opacity)},rgb:function(){return eu(this).rgb()}}));var tu=-.14861,nu=1.78277,ru=-.29227,iu=-.90649,ou=1.97294,au=ou*iu,su=ou*nu,lu=nu*ru-iu*tu;function cu(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof uu)return new uu(e.h,e.s,e.l,e.opacity);e instanceof Oc||(e=Sc(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(lu*r+au*t-su*n)/(lu+au-su),o=r-i,a=(ou*(n-i)-ru*o)/iu,s=Math.sqrt(a*a+o*o)/(ou*i*(1-i)),l=s?Math.atan2(a,o)*Lc-120:NaN;return new uu(l<0?l+360:l,s,i,e.opacity)}(e):new uu(e,t,n,r??1)}function uu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ic(uu,cu,oc(ac,{brighter:function(e){return e=null==e?lc:Math.pow(lc,e),new uu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?sc:Math.pow(sc,e),new uu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*jc,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Oc(255*(t+n*(tu*r+nu*i)),255*(t+n*(ru*r+iu*i)),255*(t+n*(ou*r)),this.opacity)}}));const hu=Object.freeze(Object.defineProperty({__proto__:null,color:Tc,cubehelix:cu,gray:function(e,t){return new Wc(e,0,0,t??1)},hcl:Qc,hsl:Rc,lab:Xc,lch:function(e,t,n,r){return 1===arguments.length?Zc(e):new Jc(n,t,e,r??1)},rgb:kc},Symbol.toStringTag,{value:"Module"})),pu=e=>()=>e;function fu(e){return 1==(e=+e)?du:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):pu(isNaN(t)?n:t)}}function du(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):pu(isNaN(e)?t:e)}const mu=function e(t){var n=fu(t);function r(e,t){var r=n((e=kc(e)).r,(t=kc(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=du(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function gu(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function yu(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Eu(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function vu(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function bu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _u(e,t){var n,r={},i={};for(n in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)n in e?r[n]=Eu(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var wu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tu=new RegExp(wu.source,"g");function xu(e,t){var n,r,i,o=wu.lastIndex=Tu.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=wu.exec(e))&&(r=Tu.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:bu(n,r)})),o=Tu.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Eu(e,t){var n,r=typeof t;return null==t||"boolean"===r?pu(t):("number"===r?bu:"string"===r?(n=Tc(t))?(t=n,mu):xu:t instanceof Tc?mu:t instanceof Date?vu:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?gu:Array.isArray(t)?yu:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?_u:bu)(e,t)}function Su(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ku,Ou=180/Math.PI,Pu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cu(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ou,skewX:Math.atan(l)*Ou,scaleX:a,scaleY:s}}function Au(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:bu(e,i)},{i:l-2,x:bu(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:bu(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:bu(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:bu(e,n)},{i:s-2,x:bu(t,r)})}else(1!==n||1!==r)&&o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var Mu=Au(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pu:Cu(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Iu=Au(function(e){return null!=e&&(ku||(ku=document.createElementNS("http://www.w3.org/2000/svg","g")),ku.setAttribute("transform",e),e=ku.transform.baseVal.consolidate())?Cu((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Pu},", ",")",")");function Ru(e){return((e=Math.exp(e))+1/e)/2}const Du=function e(t,n,r){function i(e,i){var o,a,s=e[0],l=e[1],c=e[2],u=i[0],h=i[1],p=i[2],f=u-s,d=h-l,m=f*f+d*d;if(m<1e-12)a=Math.log(p/c)/t,o=function(e){return[s+e*f,l+e*d,c*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(p*p-c*c+r*m)/(2*c*n*g),v=(p*p-c*c-r*m)/(2*p*n*g),b=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(v*v+1)-v);a=(_-b)/t,o=function(e){var r=e*a,i=Ru(b),o=c/(n*g)*(i*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+o*f,l+o*d,c*i/Ru(t*r+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Nu(e){return+e}var ju=[0,1];function Lu(e){return e}function Bu(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Fu(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Bu(i,r),o=n(a,o)):(r=Bu(r,i),o=n(o,a)),function(e){return o(r(e))}}function zu(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Bu(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=js(e,t,1,r)-1;return o[n](i[n](t))}}function Hu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Uu(){var e,t,n,r,i,o,a=ju,s=ju,l=Eu,c=Lu;function u(){var e=Math.min(a.length,s.length);return c!==Lu&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?zu:Fu,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),bu)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,Nu),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=Su,u()},h.clamp=function(e){return arguments.length?(c=!!e||Lu,u()):c!==Lu},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function Vu(){return Uu()(Lu,Lu)}function Gu(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Xu(e){return(e=Gu(Math.abs(e)))?e[1]:NaN}var Wu,Yu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qu(e){if(!(t=Yu.exec(e)))throw new Error("invalid format: "+e);var t;return new $u({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function $u(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Ku(e,t){var n=Gu(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}qu.prototype=$u.prototype,$u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Zu={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ku(100*e,t),r:Ku,s:function(e,t){var n=Gu(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Wu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Gu(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Qu(e){return e}var Ju,eh,th,nh=Array.prototype.map,rh=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function ih(e){var t=void 0===e.grouping||void 0===e.thousands?Qu:function(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}(nh.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",r=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Qu:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(nh.call(e.numerals,String)),a=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"\u2212":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function c(e){var c=(e=qu(e)).fill,u=e.align,h=e.sign,p=e.symbol,f=e.zero,d=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Zu[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===c&&"="===u)&&(f=!0,c="0",u="=");var b="$"===p?n:"#"===p&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===p?r:/[%p]/.test(v)?a:"",w=Zu[v],T=/[defgprs%]/.test(v);function x(e){var n,r,a,p=b,x=_;if("c"===v)x=w(e)+x,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==h&&(E=!1),p=(E?"("===h?h:s:"-"===h||"("===h?"":h)+p,x=("s"===v?rh[8+Wu/3]:"")+x+(E&&"("===h?")":""),T)for(n=-1,r=e.length;++n<r;)if(48>(a=e.charCodeAt(n))||a>57){x=(46===a?i+e.slice(n+1):e.slice(n))+x,e=e.slice(0,n);break}}m&&!f&&(e=t(e,1/0));var S=p.length+e.length+x.length,k=S<d?new Array(d-S+1).join(c):"";switch(m&&f&&(e=t(k+e,k.length?d-x.length:1/0),k=""),u){case"<":e=p+e+x+k;break;case"=":e=p+k+e+x;break;case"^":e=k.slice(0,S=k.length>>1)+p+e+x+k.slice(S);break;default:e=k+p+e+x}return o(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),x.toString=function(){return e+""},x}return{format:c,formatPrefix:function(e,t){var n=c(((e=qu(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Xu(t)/3))),i=Math.pow(10,-r),o=rh[8+r/3];return function(e){return n(i*e)+o}}}}function oh(e){return Ju=ih(e),eh=Ju.format,th=Ju.formatPrefix,Ju}function ah(e){return Math.max(0,-Xu(Math.abs(e)))}function sh(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xu(t)/3)))-Xu(Math.abs(e)))}function lh(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xu(t)-Xu(e))+1}oh({thousands:",",grouping:[3],currency:["$",""]});const ch=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier:$u,get format(){return eh},formatDefaultLocale:oh,formatLocale:ih,get formatPrefix(){return th},formatSpecifier:qu,precisionFixed:ah,precisionPrefix:sh,precisionRound:lh},Symbol.toStringTag,{value:"Module"}));function uh(e,t,n,r){var i,o=kl(e,t,n);switch((r=qu(r??",f")).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null==r.precision&&!isNaN(i=sh(o,a))&&(r.precision=i),th(r,a);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(i=lh(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(i=ah(o))&&(r.precision=i-2*("%"===r.type))}return eh(r)}function hh(e){var t=e.domain;return e.ticks=function(e){var n=t();return El(n[0],n[n.length-1],e??10)},e.tickFormat=function(e,n){var r=t();return uh(r[0],r[r.length-1],e??10,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=Sl(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function ph(){var e=Vu();return e.copy=function(){return Hu(e,ph())},Ql.apply(e,arguments),hh(e)}function fh(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function dh(e){return Math.log(e)}function mh(e){return Math.exp(e)}function gh(e){return-Math.log(-e)}function yh(e){return-Math.exp(-e)}function vh(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bh(e){return(t,n)=>-e(-t,n)}function _h(e){const t=e(dh,mh),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?vh:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=bh(r),i=bh(i),e(gh,yh)):e(dh,mh),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=r(a),p=r(s);const f=null==e?10:+e;let d=[];if(!(o%1)&&p-h<f){if(h=Math.floor(h),p=Math.ceil(p),a>0){for(;h<=p;++h)for(c=1;c<o;++c)if(u=h<0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;d.push(u)}}else for(;h<=p;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;d.push(u)}2*d.length<f&&(d=El(a,s,f))}else d=El(h,p,Math.min(p-h,f)).map(i);return l?d.reverse():d},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(!(o%1)&&null==(n=qu(n)).precision&&(n.trim=!0),n=eh(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(fh(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function wh(){const e=_h(Uu()).domain([1,10]);return e.copy=()=>Hu(e,wh()).base(e.base()),Ql.apply(e,arguments),e}function Th(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Eh(e){var t=1,n=e(Th(t),xh(t));return n.constant=function(n){return arguments.length?e(Th(t=+n),xh(t)):t},hh(n)}function Sh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kh(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oh(e){return e<0?-e*e:e*e}function Ph(e){var t=e(Lu,Lu),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Lu,Lu):.5===n?e(kh,Oh):e(Sh(n),Sh(1/n)):n},hh(t)}function Ch(){var e=Ph(Uu());return e.copy=function(){return Hu(e,Ch()).exponent(e.exponent())},Ql.apply(e,arguments),e}function Ah(e){return Math.sign(e)*e*e}function Mh(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=Nl(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[js(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null!=n&&!isNaN(n=+n)&&t.push(n);return t.sort(Is),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return Mh().domain(t).range(n).unknown(e)},Ql.apply(o,arguments)}const Ih=new Date,Rh=new Date;function Dh(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>Dh(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(Ih.setTime(+t),Rh.setTime(+r),e(Ih),e(Rh),Math.floor(n(Ih,Rh))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const Nh=Dh(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nh.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Dh(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Nh:null),Nh.range;const jh=1e3,Lh=6e4,Bh=60*Lh,Fh=24*Bh,zh=7*Fh,Hh=30*Fh,Uh=365*Fh,Vh=Dh(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*jh)},(e,t)=>(t-e)/jh,e=>e.getUTCSeconds());Vh.range;const Gh=Dh(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jh)},(e,t)=>{e.setTime(+e+t*Lh)},(e,t)=>(t-e)/Lh,e=>e.getMinutes());Gh.range;const Xh=Dh(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lh)},(e,t)=>(t-e)/Lh,e=>e.getUTCMinutes());Xh.range;const Wh=Dh(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jh-e.getMinutes()*Lh)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getHours());Wh.range;const Yh=Dh(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getUTCHours());Yh.range;const qh=Dh(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lh)/Fh,e=>e.getDate()-1);qh.range;const $h=Dh(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fh,e=>e.getUTCDate()-1);$h.range;const Kh=Dh(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fh,e=>Math.floor(e/Fh));function Zh(e){return Dh(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lh)/zh)}Kh.range;const Qh=Zh(0),Jh=Zh(1),ep=Zh(2),tp=Zh(3),np=Zh(4),rp=Zh(5),ip=Zh(6);function op(e){return Dh(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/zh)}Qh.range,Jh.range,ep.range,tp.range,np.range,rp.range,ip.range;const ap=op(0),sp=op(1),lp=op(2),cp=op(3),up=op(4),hp=op(5),pp=op(6);ap.range,sp.range,lp.range,cp.range,up.range,hp.range,pp.range;const fp=Dh(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());fp.range;const dp=Dh(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());dp.range;const mp=Dh(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mp.every=e=>isFinite(e=Math.floor(e))&&e>0?Dh(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,mp.range;const gp=Dh(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function yp(e,t,n,r,i,o){const a=[[Vh,1,jh],[Vh,5,5e3],[Vh,15,15e3],[Vh,30,3e4],[o,1,Lh],[o,5,5*Lh],[o,15,15*Lh],[o,30,30*Lh],[i,1,Bh],[i,3,3*Bh],[i,6,6*Bh],[i,12,12*Bh],[r,1,Fh],[r,2,2*Fh],[n,1,zh],[t,1,Hh],[t,3,3*Hh],[e,1,Uh]];function s(t,n,r){const i=Math.abs(n-t)/r,o=Rs(e=>{let[,,t]=e;return t}).right(a,i);if(o===a.length)return e.every(kl(t/Uh,n/Uh,r));if(0===o)return Nh.every(Math.max(kl(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}gp.every=e=>isFinite(e=Math.floor(e))&&e>0?Dh(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,gp.range;const[vp,bp]=yp(gp,dp,ap,Kh,Yh,Xh),[_p,wp]=yp(mp,fp,Qh,qh,Wh,Gh);function Tp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function xp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ep(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Sp,kp,Op,Pp={"-":"",_:" ",0:"0"},Cp=/^\s*\d+/,Ap=/^%/,Mp=/[\\^$*+?|[\]().{}]/g;function Ip(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Rp(e){return e.replace(Mp,"\\$&")}function Dp(e){return new RegExp("^(?:"+e.map(Rp).join("|")+")","i")}function Np(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function jp(e,t,n){var r=Cp.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Lp(e,t,n){var r=Cp.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Bp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Fp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function zp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Hp(e,t,n){var r=Cp.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Up(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Vp(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gp(e,t,n){var r=Cp.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Xp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Wp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Yp(e,t,n){var r=Cp.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function qp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function $p(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Kp(e,t,n){var r=Cp.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Zp(e,t,n){var r=Cp.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Qp(e,t,n){var r=Cp.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Jp(e,t,n){var r=Ap.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ef(e,t,n){var r=Cp.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function tf(e,t,n){var r=Cp.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function nf(e,t){return Ip(e.getDate(),t,2)}function rf(e,t){return Ip(e.getHours(),t,2)}function of(e,t){return Ip(e.getHours()%12||12,t,2)}function af(e,t){return Ip(1+qh.count(mp(e),e),t,3)}function sf(e,t){return Ip(e.getMilliseconds(),t,3)}function lf(e,t){return sf(e,t)+"000"}function cf(e,t){return Ip(e.getMonth()+1,t,2)}function uf(e,t){return Ip(e.getMinutes(),t,2)}function hf(e,t){return Ip(e.getSeconds(),t,2)}function pf(e){var t=e.getDay();return 0===t?7:t}function ff(e,t){return Ip(Qh.count(mp(e)-1,e),t,2)}function df(e){var t=e.getDay();return t>=4||0===t?np(e):np.ceil(e)}function mf(e,t){return e=df(e),Ip(np.count(mp(e),e)+(4===mp(e).getDay()),t,2)}function gf(e){return e.getDay()}function yf(e,t){return Ip(Jh.count(mp(e)-1,e),t,2)}function vf(e,t){return Ip(e.getFullYear()%100,t,2)}function bf(e,t){return Ip((e=df(e)).getFullYear()%100,t,2)}function _f(e,t){return Ip(e.getFullYear()%1e4,t,4)}function wf(e,t){var n=e.getDay();return Ip((e=n>=4||0===n?np(e):np.ceil(e)).getFullYear()%1e4,t,4)}function Tf(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ip(t/60|0,"0",2)+Ip(t%60,"0",2)}function xf(e,t){return Ip(e.getUTCDate(),t,2)}function Ef(e,t){return Ip(e.getUTCHours(),t,2)}function Sf(e,t){return Ip(e.getUTCHours()%12||12,t,2)}function kf(e,t){return Ip(1+$h.count(gp(e),e),t,3)}function Of(e,t){return Ip(e.getUTCMilliseconds(),t,3)}function Pf(e,t){return Of(e,t)+"000"}function Cf(e,t){return Ip(e.getUTCMonth()+1,t,2)}function Af(e,t){return Ip(e.getUTCMinutes(),t,2)}function Mf(e,t){return Ip(e.getUTCSeconds(),t,2)}function If(e){var t=e.getUTCDay();return 0===t?7:t}function Rf(e,t){return Ip(ap.count(gp(e)-1,e),t,2)}function Df(e){var t=e.getUTCDay();return t>=4||0===t?up(e):up.ceil(e)}function Nf(e,t){return e=Df(e),Ip(up.count(gp(e),e)+(4===gp(e).getUTCDay()),t,2)}function jf(e){return e.getUTCDay()}function Lf(e,t){return Ip(sp.count(gp(e)-1,e),t,2)}function Bf(e,t){return Ip(e.getUTCFullYear()%100,t,2)}function Ff(e,t){return Ip((e=Df(e)).getUTCFullYear()%100,t,2)}function zf(e,t){return Ip(e.getUTCFullYear()%1e4,t,4)}function Hf(e,t){var n=e.getUTCDay();return Ip((e=n>=4||0===n?up(e):up.ceil(e)).getUTCFullYear()%1e4,t,4)}function Uf(){return"+0000"}function Vf(){return"%"}function Gf(e){return+e}function Xf(e){return Math.floor(+e/1e3)}function Wf(e){return new Date(e)}function Yf(e){return e instanceof Date?+e:+new Date(+e)}function qf(e,t,n,r,i,o,a,s,l,c){var u=Vu(),h=u.invert,p=u.domain,f=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),b=c("%B"),_=c("%Y");function w(e){return(l(e)<e?f:s(e)<e?d:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:_)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?p(Array.from(e,Yf)):p().map(Wf)},u.ticks=function(t){var n=p();return e(n[0],n[n.length-1],t??10)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=p();return(!e||"function"!=typeof e.range)&&(e=t(n[0],n[n.length-1],e??10)),e?p(fh(n,e)):u},u.copy=function(){return Hu(u,qf(e,t,n,r,i,o,a,s,l,c))},u}function $f(){var e,t,n,r,i,o=0,a=1,s=Lu,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(Eu),c.rangeRound=u(Su),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function Kf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zf(){var e=Ph($f());return e.copy=function(){return Kf(e,Zf()).exponent(e.exponent())},Jl.apply(e,arguments)}function Qf(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=Lu,p=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(p?Math.max(0,Math.min(1,e)):e))}function d(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=function(e,t){void 0===t&&(t=e,e=Eu);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[s,l,c]},f.clamp=function(e){return arguments.length?(p=!!e,f):p},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=d(Eu),f.rangeRound=d(Su),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function Jf(){var e=Ph(Qf());return e.copy=function(){return Kf(e,Jf()).exponent(e.exponent())},Jl.apply(e,arguments)}!function(e){Sp=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=Dp(i),u=Np(i),h=Dp(o),p=Np(o),f=Dp(a),d=Np(a),m=Dp(s),g=Np(s),y=Dp(l),v=Np(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:nf,e:nf,f:lf,g:bf,G:wf,H:rf,I:of,j:af,L:sf,m:cf,M:uf,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Gf,s:Xf,S:hf,u:pf,U:ff,V:mf,w:gf,W:yf,x:null,X:null,y:vf,Y:_f,Z:Tf,"%":Vf},_={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:xf,e:xf,f:Pf,g:Ff,G:Hf,H:Ef,I:Sf,j:kf,L:Of,m:Cf,M:Af,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Gf,s:Xf,S:Mf,u:If,U:Rf,V:Nf,w:jf,W:Lf,x:null,X:null,y:Bf,Y:zf,Z:Uf,"%":Vf},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Wp,e:Wp,f:Qp,g:Up,G:Hp,H:qp,I:qp,j:Yp,L:Zp,m:Xp,M:$p,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:Gp,Q:ef,s:tf,S:Kp,u:Lp,U:Bp,V:Fp,w:jp,W:zp,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Up,Y:Hp,Z:Vp,"%":Jp};function T(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=Pp[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function x(e,t){return function(n){var r,i,o=Ep(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=xp(Ep(o.y,0,1))).getUTCDay(),r=i>4||0===i?sp.ceil(r):sp(r),r=$h.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Tp(Ep(o.y,0,1))).getDay(),r=i>4||0===i?Jh.ceil(r):Jh(r),r=qh.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?xp(Ep(o.y,0,1)).getUTCDay():Tp(Ep(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,xp(o)):Tp(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Pp?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),_.x=T(n,_),_.X=T(r,_),_.c=T(t,_),{format:function(e){var t=T(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=x(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=T(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=x(e+="",!0);return t.toString=function(){return e},t}}}(e),kp=Sp.format,Sp.parse,Op=Sp.utcFormat,Sp.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const ed=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nc,scaleDiverging:function e(){var t=hh(Qf()(Lu));return t.copy=function(){return Kf(t,e())},Jl.apply(t,arguments)},scaleDivergingLog:function e(){var t=_h(Qf()).domain([.1,1,10]);return t.copy=function(){return Kf(t,e()).base(t.base())},Jl.apply(t,arguments)},scaleDivergingPow:Jf,scaleDivergingSqrt:function(){return Jf.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=Eh(Qf());return t.copy=function(){return Kf(t,e()).constant(t.constant())},Jl.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,Nu),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,Nu):[0,1],hh(r)},scaleImplicit:ec,scaleLinear:ph,scaleLog:wh,scaleOrdinal:tc,scalePoint:function(){return rc(nc.apply(null,arguments).paddingInner(1))},scalePow:Ch,scaleQuantile:Mh,scaleQuantize:function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[js(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length&&(t=e),s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},Ql.apply(hh(s),arguments)},scaleRadial:function e(){var t,n=Vu(),r=[0,1],i=!1;function o(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:i?Math.round(r):r}return o.invert=function(e){return n.invert(Ah(e))},o.domain=function(e){return arguments.length?(n.domain(e),o):n.domain()},o.range=function(e){return arguments.length?(n.range((r=Array.from(e,Nu)).map(Ah)),o):r.slice()},o.rangeRound=function(e){return o.range(e).round(!0)},o.round=function(e){return arguments.length?(i=!!e,o):i},o.clamp=function(e){return arguments.length?(n.clamp(e),o):n.clamp()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e(n.domain(),r).round(i).clamp(n.clamp()).unknown(t)},Ql.apply(o,arguments),hh(o)},scaleSequential:function e(){var t=hh($f()(Lu));return t.copy=function(){return Kf(t,e())},Jl.apply(t,arguments)},scaleSequentialLog:function e(){var t=_h($f()).domain([1,10]);return t.copy=function(){return Kf(t,e()).base(t.base())},Jl.apply(t,arguments)},scaleSequentialPow:Zf,scaleSequentialQuantile:function e(){var t=[],n=Lu;function r(e){if(null!=e&&!isNaN(e=+e))return n((js(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null!=n&&!isNaN(n=+n)&&t.push(n);return t.sort(Is),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,r)=>n(r/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(n,r)=>Dl(t,r/e))},r.copy=function(){return e(n).domain(t)},Jl.apply(r,arguments)},scaleSequentialSqrt:function(){return Zf.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=Eh($f());return t.copy=function(){return Kf(t,e()).constant(t.constant())},Jl.apply(t,arguments)},scaleSqrt:function(){return Ch.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=Eh(Uu());return t.copy=function(){return Hu(t,e()).constant(t.constant())},Ql.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[js(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},Ql.apply(o,arguments)},scaleTime:function(){return Ql.apply(qf(_p,wp,mp,fp,Qh,qh,Wh,Gh,Vh,kp).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return Ql.apply(qf(vp,bp,gp,dp,ap,$h,Yh,Xh,Vh,Op).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:uh},Symbol.toStringTag,{value:"Module"}));var td="http://www.w3.org/1999/xhtml";const nd={svg:"http://www.w3.org/2000/svg",xhtml:td,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rd(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),nd.hasOwnProperty(t)?{space:nd[t],local:e}:e}function id(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===td&&t.documentElement.namespaceURI===td?t.createElement(e):t.createElementNS(n,e)}}function od(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ad(e){var t=rd(e);return(t.local?od:id)(t)}function sd(){}function ld(e){return null==e?sd:function(){return this.querySelector(e)}}function cd(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function ud(){return[]}function hd(e){return null==e?ud:function(){return this.querySelectorAll(e)}}function pd(e){return function(){return this.matches(e)}}function fd(e){return function(t){return t.matches(e)}}var dd=Array.prototype.find;function md(){return this.firstElementChild}var gd=Array.prototype.filter;function yd(){return this.children}function vd(e){return new Array(e.length)}function bd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function _d(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new bd(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function wd(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,p=o.length,f=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<p;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new bd(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function Td(e){return e.__data__}function xd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ed(e){return function(){this.removeAttribute(e)}}function Sd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kd(e,t){return function(){this.setAttribute(e,t)}}function Od(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Cd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ad(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Md(e){return function(){this.style.removeProperty(e)}}function Id(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Rd(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Dd(e,t){return e.style.getPropertyValue(t)||Ad(e).getComputedStyle(e,null).getPropertyValue(t)}function Nd(e){return function(){delete this[e]}}function jd(e,t){return function(){this[e]=t}}function Ld(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Bd(e){return e.trim().split(/^|\s+/)}function Fd(e){return e.classList||new zd(e)}function zd(e){this._node=e,this._names=Bd(e.getAttribute("class")||"")}function Hd(e,t){for(var n=Fd(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ud(e,t){for(var n=Fd(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Vd(e){return function(){Hd(this,e)}}function Gd(e){return function(){Ud(this,e)}}function Xd(e,t){return function(){(t.apply(this,arguments)?Hd:Ud)(this,e)}}function Wd(){this.textContent=""}function Yd(e){return function(){this.textContent=e}}function qd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $d(){this.innerHTML=""}function Kd(e){return function(){this.innerHTML=e}}function Zd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qd(){this.nextSibling&&this.parentNode.appendChild(this)}function Jd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function em(){return null}function tm(){var e=this.parentNode;e&&e.removeChild(this)}function nm(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rm(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function im(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function om(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function am(e,t,n){var r=Ad(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function sm(e,t){return function(){return am(this,e,t)}}function lm(e,t){return function(){return am(this,e,t.apply(this,arguments))}}bd.prototype={constructor:bd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},zd.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var cm=[null];function um(e,t){this._groups=e,this._parents=t}function hm(){return new um([[document.documentElement]],cm)}function pm(e){return"string"==typeof e?new um([[document.querySelector(e)]],[document.documentElement]):new um([[e]],cm)}um.prototype=hm.prototype={constructor:um,select:function(e){"function"!=typeof e&&(e=ld(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new um(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:cd(t)}}(e):hd(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new um(r,i)},selectChild:function(e){return this.select(null==e?md:function(e){return function(){return dd.call(this.children,e)}}("function"==typeof e?e:fd(e)))},selectChildren:function(e){return this.selectAll(null==e?yd:function(e){return function(){return gd.call(this.children,e)}}("function"==typeof e?e:fd(e)))},filter:function(e){"function"!=typeof e&&(e=pd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new um(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Td);var n=t?wd:_d,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],p=h.length,f=cd(e.call(u,u&&u.__data__,c,r)),d=f.length,m=s[c]=new Array(d),g=a[c]=new Array(d);n(u,h,m,g,l[c]=new Array(p),f,t);for(var y,v,b=0,_=0;b<d;++b)if(y=m[b]){for(b>=_&&(_=b+1);!(v=g[_])&&++_<d;);y._next=v||null}}return(a=new um(a,r))._enter=s,a._exit=l,a},enter:function(){return new um(this._enter||this._groups.map(vd),this._parents)},exit:function(){return new um(this._exit||this._groups.map(vd),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof um))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new um(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=xd);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new um(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=rd(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Sd:Ed:"function"==typeof t?n.local?Cd:Pd:n.local?Od:kd)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Md:"function"==typeof t?Rd:Id)(e,t,n??"")):Dd(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Nd:"function"==typeof t?Ld:jd)(e,t)):this.node()[e]},classed:function(e,t){var n=Bd(e+"");if(arguments.length<2){for(var r=Fd(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Xd:t?Vd:Gd)(n,t))},text:function(e){return arguments.length?this.each(null==e?Wd:("function"==typeof e?qd:Yd)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?$d:("function"==typeof e?Zd:Kd)(e)):this.node().innerHTML},raise:function(){return this.each(Qd)},lower:function(){return this.each(Jd)},append:function(e){var t="function"==typeof e?e:ad(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ad(e),r=null==t?em:"function"==typeof t?t:ld(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(tm)},clone:function(e){return this.select(e?rm:nm)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?om:im,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?lm:sm)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var fm=0;function dm(){return new mm}function mm(){this._="@"+(++fm).toString(36)}function gm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ym(e,t){if(e=gm(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}mm.prototype=dm.prototype={constructor:mm,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};const vm=Object.freeze(Object.defineProperty({__proto__:null,create:function(e){return pm(ad(e).call(document.documentElement))},creator:ad,local:dm,matcher:pd,namespace:rd,namespaces:nd,pointer:ym,pointers:function(e,t){return e.target&&(e=gm(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,e=>ym(e,t))},select:pm,selectAll:function(e){return"string"==typeof e?new um([document.querySelectorAll(e)],[document.documentElement]):new um([null==e?[]:cd(e)],cm)},selection:hm,selector:ld,selectorAll:hd,style:Dd,window:Ad},Symbol.toStringTag,{value:"Module"}));var bm={exports:{}};function _m(){}function wm(){}wm.resetWarningCache=_m;bm.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:wm,resetWarningCache:_m};return n.PropTypes=n,n}();var Tm=bm.exports;const xm=ks(Tm),Em=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),Sm=(e,t)=>t?e.toLowerCase():e,km=function(e){let{caseInsensitive:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const o=Sm(n,t);return e[o]||(e[o]=[],e.__times__[o]=[]),e[o].push(r),e.__times__[o].push(+i||1/0),{event:o,handler:r}}},Om=function(e){let{caseInsensitive:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n,r)=>{"object"==typeof n&&(r=n.handler,n=n.event);const i=Sm(n,t);if(!e[i])return;const o=e[i].indexOf(r);-1===o||o>=e[i].length||(e[i].splice(o,1),e.__times__[i].splice(o,1))}},Pm=(e,t)=>()=>{e.forEach(e=>e(t))},Cm=function(e){let{isGlobal:t,caseInsensitive:n,async:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Om(e);return function(o,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=Sm(o,n);if(!e[l])return;const c=[...e[l]];if(c.forEach((t,n)=>{--e.__times__[l][n]<1&&i(l,t)}),(void 0!==s.async?s.async:r)?setTimeout(Pm(c,a),0):Pm(c,a)(),t&&!s.isNoGlobalBroadcast)try{Em.postMessage({event:l,news:a})}catch(u){if(!(u instanceof DOMException))throw u;console.warn(`Could not broadcast '${l}' globally. Payload is not clonable.`)}}},Am=e=>()=>{Object.keys(e).filter(e=>"_"!==e[0]).forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},Mm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.async||!1,n=e.caseInsensitive||!1,r=e.stack||{__times__:{}};return r.__times__||(r.__times__={}),{publish:Cm(r,{async:t,caseInsensitive:n}),subscribe:km(r,{caseInsensitive:n}),unsubscribe:Om(r,{caseInsensitive:n}),clear:Am(r),stack:r}},Im={__times__:{}},Rm={publish:Cm(Im,{isGlobal:!0}),subscribe:km(Im),unsubscribe:Om(Im),clear:Am(Im),stack:Im};Em.onmessage=e=>{let{data:{event:t,news:n}}=e;return Rm.publish(t,n,{isNoGlobalBroadcast:!0})};var Dm={exports:{}},Nm={},jm={exports:{}};!function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",d="[object RegExp]",m="[object Set]",g="[object String]",y="[object Symbol]",v="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[i]=x[o]=x[b]=x[a]=x[_]=x[s]=x[l]=x[c]=x[u]=x[h]=x[p]=x[d]=x[m]=x[g]=x[v]=!1;var E="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,S="object"==typeof self&&self&&self.Object===Object&&self,k=E||S||Function("return this")(),O=t&&!t.nodeType&&t,P=O&&e&&!e.nodeType&&e,C=P&&P.exports===O,A=C&&E.process,M=function(){try{return A&&A.binding&&A.binding("util")}catch{}}(),I=M&&M.isTypedArray;function R(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function D(e,t){return e.has(t)}function N(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function j(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var L,B,F=Array.prototype,z=Function.prototype,H=Object.prototype,U=k["__core-js_shared__"],V=z.toString,G=H.hasOwnProperty,X=function(){var e=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),W=H.toString,Y=RegExp("^"+V.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=C?k.Buffer:void 0,$=k.Symbol,K=k.Uint8Array,Z=H.propertyIsEnumerable,Q=F.splice,J=$?$.toStringTag:void 0,ee=Object.getOwnPropertySymbols,te=q?q.isBuffer:void 0,ne=(L=Object.keys,B=Object,function(e){return L(B(e))}),re=Me(k,"DataView"),ie=Me(k,"Map"),oe=Me(k,"Promise"),ae=Me(k,"Set"),se=Me(k,"WeakMap"),le=Me(Object,"create"),ce=Ne(re),ue=Ne(ie),he=Ne(oe),pe=Ne(ae),fe=Ne(se),de=$?$.prototype:void 0,me=de?de.valueOf:void 0;function ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ve(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ve;++t<n;)this.add(e[t])}function _e(e){var t=this.__data__=new ye(e);this.size=t.size}function we(e,t){var n=Be(e),r=!n&&Le(e),i=!n&&!r&&Fe(e),o=!n&&!r&&!i&&Ge(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)G.call(e,c)&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||De(c,l)))&&s.push(c);return s}function Te(e,t){for(var n=e.length;n--;)if(je(e[n][0],t))return n;return-1}function xe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":J&&J in Object(e)?function(e){var t=G.call(e,J),n=e[J];try{e[J]=void 0;var r=!0}catch{}var i=W.call(e);return r&&(t?e[J]=n:delete e[J]),i}(e):function(e){return W.call(e)}(e)}function Ee(e){return Ve(e)&&xe(e)==i}function Se(e,t,n,r,c){return e===t||(null==e||null==t||!Ve(e)&&!Ve(t)?e!==e&&t!==t:function(e,t,n,r,c,f){var v=Be(e),w=Be(t),T=v?o:Re(e),x=w?o:Re(t),E=(T=T==i?p:T)==p,S=(x=x==i?p:x)==p,k=T==x;if(k&&Fe(e)){if(!Fe(t))return!1;v=!0,E=!1}if(k&&!E)return f||(f=new _e),v||Ge(e)?Pe(e,t,n,r,c,f):function(e,t,n,r,i,o,c){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case b:return!(e.byteLength!=t.byteLength||!o(new K(e),new K(t)));case a:case s:case h:return je(+e,+t);case l:return e.name==t.name&&e.message==t.message;case d:case g:return e==t+"";case u:var p=N;case m:var f=1&r;if(p||(p=j),e.size!=t.size&&!f)return!1;var v=c.get(e);if(v)return v==t;r|=2,c.set(e,t);var w=Pe(p(e),p(t),r,i,o,c);return c.delete(e),w;case y:if(me)return me.call(e)==me.call(t)}return!1}(e,t,T,n,r,c,f);if(!(1&n)){var O=E&&G.call(e,"__wrapped__"),P=S&&G.call(t,"__wrapped__");if(O||P){var C=O?e.value():e,A=P?t.value():t;return f||(f=new _e),c(C,A,n,r,f)}}return!!k&&(f||(f=new _e),function(e,t,n,r,i,o){var a=1&n,s=Ce(e),l=s.length,c=Ce(t),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var p=s[h];if(!(a?p in t:G.call(t,p)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var d=!0;o.set(e,t),o.set(t,e);for(var m=a;++h<l;){var g=e[p=s[h]],y=t[p];if(r)var v=a?r(y,g,p,t,e,o):r(g,y,p,e,t,o);if(!(void 0===v?g===y||i(g,y,n,r,o):v)){d=!1;break}m||(m="constructor"==p)}if(d&&!m){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,c,f))}(e,t,n,r,Se,c))}function ke(e){return!(!Ue(e)||function(e){return!!X&&X in e}(e))&&(ze(e)?Y:w).test(Ne(e))}function Oe(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||H;return e===n}(e))return ne(e);var t=[];for(var n in Object(e))G.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pe(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,p=2&n?new be:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var f=e[u],d=t[u];if(r)var m=a?r(d,f,u,t,e,o):r(f,d,u,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!R(t,function(e,t){if(!D(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)})){h=!1;break}}else if(f!==d&&!i(f,d,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ce(e){return function(e,t,n){var r=t(e);return Be(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Xe,Ie)}function Ae(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Me(e,t){var n=function(e,t){return e?.[t]}(e,t);return ke(n)?n:void 0}ge.prototype.clear=function(){this.__data__=le?le(null):{},this.size=0},ge.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge.prototype.get=function(e){var t=this.__data__;if(le){var r=t[e];return r===n?void 0:r}return G.call(t,e)?t[e]:void 0},ge.prototype.has=function(e){var t=this.__data__;return le?void 0!==t[e]:G.call(t,e)},ge.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=le&&void 0===t?n:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,n=Te(t,e);return!(n<0)&&(n==t.length-1?t.pop():Q.call(t,n,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,n=Te(t,e);return n<0?void 0:t[n][1]},ye.prototype.has=function(e){return Te(this.__data__,e)>-1},ye.prototype.set=function(e,t){var n=this.__data__,r=Te(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new ge,map:new(ie||ye),string:new ge}},ve.prototype.delete=function(e){var t=Ae(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Ae(this,e).get(e)},ve.prototype.has=function(e){return Ae(this,e).has(e)},ve.prototype.set=function(e,t){var n=Ae(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},be.prototype.add=be.prototype.push=function(e){return this.__data__.set(e,n),this},be.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.clear=function(){this.__data__=new ye,this.size=0},_e.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},_e.prototype.get=function(e){return this.__data__.get(e)},_e.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ye){var r=n.__data__;if(!ie||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ve(r)}return n.set(e,t),this.size=n.size,this};var Ie=ee?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(ee(e),function(t){return Z.call(e,t)}))}:function(){return[]},Re=xe;function De(e,t){return!!(t=t??r)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return V.call(e)}catch{}try{return e+""}catch{}}return""}function je(e,t){return e===t||e!==e&&t!==t}(re&&Re(new re(new ArrayBuffer(1)))!=_||ie&&Re(new ie)!=u||oe&&Re(oe.resolve())!=f||ae&&Re(new ae)!=m||se&&Re(new se)!=v)&&(Re=function(e){var t=xe(e),n=t==p?e.constructor:void 0,r=n?Ne(n):"";if(r)switch(r){case ce:return _;case ue:return u;case he:return f;case pe:return m;case fe:return v}return t});var Le=Ee(function(){return arguments}())?Ee:function(e){return Ve(e)&&G.call(e,"callee")&&!Z.call(e,"callee")},Be=Array.isArray;var Fe=te||function(){return!1};function ze(e){if(!Ue(e))return!1;var t=xe(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function He(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Ue(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ve(e){return null!=e&&"object"==typeof e}var Ge=I?function(e){return function(t){return e(t)}}(I):function(e){return Ve(e)&&He(e.length)&&!!x[xe(e)]};function Xe(e){return function(e){return null!=e&&He(e.length)&&!ze(e)}(e)?we(e):Oe(e)}e.exports=function(e,t){return Se(e,t)}}(jm,jm.exports);var Lm=jm.exports;const Bm=Os(Es);var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.bottom=Wm,Fm.childrenEqual=function(e,t){return(0,zm.default)(Hm.default.Children.map(e,function(e){return e?.key}),Hm.default.Children.map(t,function(e){return e?.key}))},Fm.cloneLayout=Ym,Fm.cloneLayoutItem=$m,Fm.collides=Zm,Fm.compact=Qm,Fm.compactItem=tg,Fm.compactType=function(e){var t=e||{},n=t.verticalCompact,r=t.compactType;return!1===n?null:r},Fm.correctBounds=ng,Fm.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},Fm.fastRGLPropsEqual=void 0,Fm.getAllCollisions=og,Fm.getFirstCollision=ig,Fm.getLayoutItem=rg,Fm.getStatics=ag,Fm.modifyLayout=qm,Fm.moveElement=sg,Fm.moveElementAwayFromCollision=lg,Fm.noop=void 0,Fm.perc=function(e){return 100*e+"%"},Fm.setTopLeft=function(e){var t=e.top,n=e.left,r=e.width,i=e.height;return{top:"".concat(t,"px"),left:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(i,"px"),position:"absolute"}},Fm.setTransform=function(e){var t=e.top,n=e.left,r=e.width,i=e.height,o="translate(".concat(n,"px,").concat(t,"px)");return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:"".concat(r,"px"),height:"".concat(i,"px"),position:"absolute"}},Fm.sortLayoutItems=cg,Fm.sortLayoutItemsByColRow=hg,Fm.sortLayoutItemsByRowCol=ug,Fm.synchronizeLayoutWithChildren=function(e,t,n,r,i){e=e||[];var o=[];Hm.default.Children.forEach(t,function(t){if(null!=t?.key){var n=rg(e,String(t.key));if(n)o.push($m(n));else{var r=t.props["data-grid"]||t.props._grid;r?o.push($m(Gm(Gm({},r),{},{i:t.key}))):o.push($m({w:1,h:1,x:0,y:Wm(o),i:String(t.key)}))}}});var a=ng(o,{cols:n});return i?a:Qm(a,r,n)},Fm.validateLayout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var r=0,i=e.length;r<i;r++)for(var o=e[r],a=0;a<n.length;a++)if("number"!=typeof o[n[a]])throw new Error("ReactGridLayout: "+t+"["+r+"]."+n[a]+" must be a number!")},Fm.withLayoutItem=function(e,t,n){var r=rg(e,t);return r?(r=n($m(r)),e=qm(e,r),[e,r]):[e,null]};var zm=Um(Lm),Hm=Um(i);function Um(e){return e&&e.__esModule?e:{default:e}}function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach(function(t){Xm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wm(e){for(var t,n=0,r=0,i=e.length;r<i;r++)(t=e[r].y+e[r].h)>n&&(n=t);return n}function Ym(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=$m(e[n]);return t}function qm(e,t){for(var n=Array(e.length),r=0,i=e.length;r<i;r++)t.i===e[r].i?n[r]=t:n[r]=e[r];return n}function $m(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:!!e.moved,static:!!e.static,isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var Km=function(e,t,n){return e===t||e.className===t.className&&n(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&n(e.verticalCompact,t.verticalCompact)&&n(e.compactType,t.compactType)&&n(e.layout,t.layout)&&n(e.margin,t.margin)&&n(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&n(e.resizeHandles,t.resizeHandles)&&n(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&n(e.droppingItem,t.droppingItem)&&n(e.innerRef,t.innerRef)};function Zm(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function Qm(e,t,n){for(var r=ag(e),i=cg(e,t),o=Array(e.length),a=0,s=i.length;a<s;a++){var l=$m(i[a]);l.static||(l=tg(r,l,t,n,i),r.push(l)),o[e.indexOf(i[a])]=l,l.moved=!1}return o}Fm.fastRGLPropsEqual=Km;var Jm={x:"w",y:"h"};function eg(e,t,n,r){var i=Jm[r];t[r]+=1;for(var o=e.map(function(e){return e.i}).indexOf(t.i)+1;o<e.length;o++){var a=e[o];if(!a.static){if(a.y>t.y+t.h)break;Zm(t,a)&&eg(e,a,n+t[i],r)}}t[r]=n}function tg(e,t,n,r,i){var o,a="horizontal"===n;if("vertical"===n)for(t.y=Math.min(Wm(e),t.y);t.y>0&&!ig(e,t);)t.y--;else if(a)for(;t.x>0&&!ig(e,t);)t.x--;for(;o=ig(e,t);)a?eg(i,t,o.x+o.w,"x"):eg(i,t,o.y+o.h,"y"),a&&t.x+t.w>r&&(t.x=r-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function ng(e,t){for(var n=ag(e),r=0,i=e.length;r<i;r++){var o=e[r];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;ig(n,o);)o.y++;else n.push(o)}return e}function rg(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function ig(e,t){for(var n=0,r=e.length;n<r;n++)if(Zm(e[n],t))return e[n]}function og(e,t){return e.filter(function(e){return Zm(e,t)})}function ag(e){return e.filter(function(e){return e.static})}function sg(e,t,n,r,i,o,a,s,l){if(t.static&&!0!==t.isDraggable||t.y===r&&t.x===n)return e;"Moving element ".concat(t.i," to [").concat(String(n),",").concat(String(r),"] from [").concat(t.x,",").concat(t.y,"]");var c=t.x,u=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;var h=cg(e,a);("vertical"===a&&"number"==typeof r?u>=r:"horizontal"===a&&"number"==typeof n&&c>=n)&&(h=h.reverse());var p=og(h,t),f=p.length>0;if(f&&l)return Ym(e);if(f&&o)return"Collision prevented on ".concat(t.i,", reverting."),t.x=c,t.y=u,t.moved=!1,e;for(var d=0,m=p.length;d<m;d++){var g=p[d];"Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(g.i," at [").concat(g.x,",").concat(g.y,"]"),!g.moved&&(e=g.static?lg(e,g,t,i,a):lg(e,t,g,i,a))}return e}function lg(e,t,n,r,i,o){var a="horizontal"===i,s="horizontal"!==i,l=t.static;if(r){r=!1;var c={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!ig(e,c))return"Doing reverse collision on ".concat(n.i," up to [").concat(c.x,",").concat(c.y,"]."),sg(e,n,a?c.x:void 0,s?c.y:void 0,r,l,i)}return sg(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,l,i)}function cg(e,t){return"horizontal"===t?hg(e):"vertical"===t?ug(e):e}function ug(e){return e.slice(0).sort(function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1})}function hg(e){return e.slice(0).sort(function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1})}Fm.noop=function(){};var pg={};function fg(e){var t=e.margin,n=e.containerPadding,r=e.containerWidth,i=e.cols;return(r-t[0]*(i-1)-2*n[0])/i}function dg(e,t,n){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*n):e}function mg(e,t,n){return Math.max(Math.min(e,n),t)}Object.defineProperty(pg,"__esModule",{value:!0}),pg.calcGridColWidth=fg,pg.calcGridItemPosition=function(e,t,n,r,i,o){var a=e.margin,s=e.containerPadding,l=e.rowHeight,c=fg(e),u={};return o&&o.resizing?(u.width=Math.round(o.resizing.width),u.height=Math.round(o.resizing.height)):(u.width=dg(r,c,a[0]),u.height=dg(i,l,a[1])),o&&o.dragging?(u.top=Math.round(o.dragging.top),u.left=Math.round(o.dragging.left)):(u.top=Math.round((l+a[1])*n+s[1]),u.left=Math.round((c+a[0])*t+s[0])),u},pg.calcGridItemWHPx=dg,pg.calcWH=function(e,t,n,r,i){var o=e.margin,a=e.maxRows,s=e.cols,l=e.rowHeight,c=fg(e),u=Math.round((t+o[0])/(c+o[0])),h=Math.round((n+o[1])/(l+o[1]));return u=mg(u,0,s-r),h=mg(h,0,a-i),{w:u,h:h}},pg.calcXY=function(e,t,n,r,i){var o=e.margin,a=e.cols,s=e.rowHeight,l=e.maxRows,c=fg(e),u=Math.round((n-o[0])/(c+o[0])),h=Math.round((t-o[1])/(s+o[1]));return u=mg(u,0,a-r),h=mg(h,0,l-i),{x:u,y:h}},pg.clamp=mg;var gg={},yg={exports:{}},vg={},bg={},_g={};Object.defineProperty(_g,"__esModule",{value:!0}),_g.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},_g.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},_g.int=function(e){return parseInt(e,10)},_g.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},_g.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var wg={};Object.defineProperty(wg,"__esModule",{value:!0}),wg.browserPrefixToKey=Eg,wg.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},wg.default=void 0,wg.getPrefix=xg;const Tg=["Moz","Webkit","O","ms"];function xg(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if(typeof window>"u")return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<Tg.length;r++)if(Eg(t,Tg[r])in n)return Tg[r];return""}function Eg(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}wg.default=xg(),Object.defineProperty(bg,"__esModule",{value:!0}),bg.addClassName=Mg,bg.addEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},bg.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Mg(e.body,"react-draggable-transparent-selection")},bg.createCSSTransform=function(e,t){const n=Ag(e,t,"px");return{[(0,kg.browserPrefixToKey)("transform",kg.default)]:n}},bg.createSVGTransform=function(e,t){return Ag(e,t,"")},bg.getTouch=function(e,t){return e.targetTouches&&(0,Sg.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,Sg.findInArray)(e.changedTouches,e=>t===e.identifier)},bg.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},bg.getTranslation=Ag,bg.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Sg.int)(n.paddingTop),t-=(0,Sg.int)(n.paddingBottom),t},bg.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Sg.int)(n.paddingLeft),t-=(0,Sg.int)(n.paddingRight),t},bg.matchesSelector=Cg,bg.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(Cg(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},bg.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:o}},bg.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Sg.int)(n.borderTopWidth),t+=(0,Sg.int)(n.borderBottomWidth),t},bg.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Sg.int)(n.borderLeftWidth),t+=(0,Sg.int)(n.borderRightWidth),t},bg.removeClassName=Ig,bg.removeEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},bg.removeUserSelectStyles=function(e){if(e)try{if(e.body&&Ig(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch{}};var Sg=_g,kg=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Og(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(wg);function Og(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Og=function(e){return e?n:t})(e)}let Pg="";function Cg(e,t){return Pg||(Pg=(0,Sg.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,Sg.isFunction)(e[t])})),!!(0,Sg.isFunction)(e[Pg])&&e[Pg](t)}function Ag(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),r="".concat("string"==typeof t.y?t.y:t.y+n);o="translate(".concat(e,", ").concat(r,")")+o}return o}function Mg(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Ig(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Rg={};Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Rg.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Rg.createCoreData=function(e,t,n){const r=!(0,Dg.isNum)(e.lastX),i=jg(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},Rg.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},Rg.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);const i=jg(e);if("string"==typeof r){const{ownerDocument:e}=i,t=e.defaultView;let n;if(n="parent"===r?i.parentNode:e.querySelector(r),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const o=n,a=t.getComputedStyle(i),s=t.getComputedStyle(o);r={left:-i.offsetLeft+(0,Dg.int)(s.paddingLeft)+(0,Dg.int)(a.marginLeft),top:-i.offsetTop+(0,Dg.int)(s.paddingTop)+(0,Dg.int)(a.marginTop),right:(0,Ng.innerWidth)(o)-(0,Ng.outerWidth)(i)-i.offsetLeft+(0,Dg.int)(s.paddingRight)-(0,Dg.int)(a.marginRight),bottom:(0,Ng.innerHeight)(o)-(0,Ng.outerHeight)(i)-i.offsetTop+(0,Dg.int)(s.paddingBottom)-(0,Dg.int)(a.marginBottom)}}return(0,Dg.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,Dg.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Dg.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,Dg.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]},Rg.getControlPosition=function(e,t,n){const r="number"==typeof t?(0,Ng.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;const i=jg(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,Ng.offsetXYFromParent)(r||e,o,n.props.scale)},Rg.snapToGrid=function(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]};var Dg=_g,Ng=bg;function jg(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Lg={},Bg={};function Fg(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zg(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zg(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Hg(e,t,n){return t=Vg(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ug()?Reflect.construct(t,n||[],Vg(e).constructor):t.apply(e,n))}function Ug(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ug=function(){return!!e})()}function Vg(e){return(Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gg(e,t){return(Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.default=function(){},Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.default=void 0;var Xg=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Jg(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),Wg=Qg(Tm),Yg=Qg(o),qg=bg,$g=Rg,Kg=_g,Zg=Qg(Bg);function Qg(e){return e&&e.__esModule?e:{default:e}}function Jg(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Jg=function(e){return e?n:t})(e)}function ey(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ty={start:"touchstart",move:"touchmove",stop:"touchend"},ny={start:"mousedown",move:"mousemove",stop:"mouseup"};let ry=ny,iy=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ey(e=Hg(this,t,arguments),"dragging",!1),ey(e,"lastX",NaN),ey(e,"lastY",NaN),ey(e,"touchIdentifier",null),ey(e,"mounted",!1),ey(e,"handleDragStart",t=>{if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;const n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,qg.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,qg.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))return;"touchstart"===t.type&&t.preventDefault();const i=(0,qg.getTouchIdentifier)(t);e.touchIdentifier=i;const o=(0,$g.getControlPosition)(t,i,e);if(null==o)return;const{x:a,y:s}=o,l=(0,$g.createCoreData)(e,a,s);(0,Zg.default)("DraggableCore: handleDragStart: %j",l),(0,Zg.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,qg.addUserSelectStyles)(r),e.dragging=!0,e.lastX=a,e.lastY=s,(0,qg.addEvent)(r,ry.move,e.handleDrag),(0,qg.addEvent)(r,ry.stop,e.handleDragStop))}),ey(e,"handleDrag",t=>{const n=(0,$g.getControlPosition)(t,e.touchIdentifier,e);if(null==n)return;let{x:r,y:i}=n;if(Array.isArray(e.props.grid)){let t=r-e.lastX,n=i-e.lastY;if([t,n]=(0,$g.snapToGrid)(e.props.grid,t,n),!t&&!n)return;r=e.lastX+t,i=e.lastY+n}const o=(0,$g.createCoreData)(e,r,i);if((0,Zg.default)("DraggableCore: handleDrag: %j",o),!1!==e.props.onDrag(t,o)&&!1!==e.mounted)e.lastX=r,e.lastY=i;else try{e.handleDragStop(new MouseEvent("mouseup"))}catch{const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(t)}}),ey(e,"handleDragStop",t=>{if(!e.dragging)return;const n=(0,$g.getControlPosition)(t,e.touchIdentifier,e);if(null==n)return;let{x:r,y:i}=n;if(Array.isArray(e.props.grid)){let t=r-e.lastX||0,n=i-e.lastY||0;[t,n]=(0,$g.snapToGrid)(e.props.grid,t,n),r=e.lastX+t,i=e.lastY+n}const o=(0,$g.createCoreData)(e,r,i);if(!1===e.props.onStop(t,o)||!1===e.mounted)return!1;const a=e.findDOMNode();a&&e.props.enableUserSelectHack&&(0,qg.removeUserSelectStyles)(a.ownerDocument),(0,Zg.default)("DraggableCore: handleDragStop: %j",o),e.dragging=!1,e.lastX=NaN,e.lastY=NaN,a&&((0,Zg.default)("DraggableCore: Removing handlers"),(0,qg.removeEvent)(a.ownerDocument,ry.move,e.handleDrag),(0,qg.removeEvent)(a.ownerDocument,ry.stop,e.handleDragStop))}),ey(e,"onMouseDown",t=>(ry=ny,e.handleDragStart(t))),ey(e,"onMouseUp",t=>(ry=ny,e.handleDragStop(t))),ey(e,"onTouchStart",t=>(ry=ty,e.handleDragStart(t))),ey(e,"onTouchEnd",t=>(ry=ty,e.handleDragStop(t))),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gg(e,t)}(t,e),Fg(t,[{key:"componentDidMount",value:function(){this.mounted=!0;const e=this.findDOMNode();e&&(0,qg.addEvent)(e,ty.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,qg.removeEvent)(t,ny.move,this.handleDrag),(0,qg.removeEvent)(t,ty.move,this.handleDrag),(0,qg.removeEvent)(t,ny.stop,this.handleDragStop),(0,qg.removeEvent)(t,ty.stop,this.handleDragStop),(0,qg.removeEvent)(e,ty.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,qg.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:Yg.default.findDOMNode(this)}},{key:"render",value:function(){return Xg.cloneElement(Xg.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])}(Xg.Component);Lg.default=iy,ey(iy,"displayName","DraggableCore"),ey(iy,"propTypes",{allowAnyClick:Wg.default.bool,children:Wg.default.node.isRequired,disabled:Wg.default.bool,enableUserSelectHack:Wg.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Wg.default.arrayOf(Wg.default.number),handle:Wg.default.string,cancel:Wg.default.string,nodeRef:Wg.default.object,onStart:Wg.default.func,onDrag:Wg.default.func,onStop:Wg.default.func,onMouseDown:Wg.default.func,scale:Wg.default.number,className:Kg.dontSetMe,style:Kg.dontSetMe,transform:Kg.dontSetMe}),ey(iy,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e,t,n){return t=s(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!e})()}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return g.default}}),e.default=void 0;var c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),u=v(Tm),h=v(o),p=v(Bm),f=bg,d=Rg,m=_g,g=v(Lg),y=v(Bg);function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function w(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let T=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),w(t=r(this,n,[e]),"onDragStart",(e,n)=>{if((0,y.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,d.createDraggableData)(t,n)))return!1;t.setState({dragging:!0,dragged:!0})}),w(t,"onDrag",(e,n)=>{if(!t.state.dragging)return!1;(0,y.default)("Draggable: onDrag: %j",n);const r=(0,d.createDraggableData)(t,n),i={x:r.x,y:r.y,slackX:0,slackY:0};if(t.props.bounds){const{x:e,y:n}=i;i.x+=t.state.slackX,i.y+=t.state.slackY;const[o,a]=(0,d.getBoundPosition)(t,i.x,i.y);i.x=o,i.y=a,i.slackX=t.state.slackX+(e-i.x),i.slackY=t.state.slackY+(n-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-t.state.x,r.deltaY=i.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(i)}),w(t,"onDragStop",(e,n)=>{if(!t.state.dragging||!1===t.props.onStop(e,(0,d.createDraggableData)(t,n)))return!1;(0,y.default)("Draggable: onDragStop: %j",n);const r={dragging:!1,slackX:0,slackY:0};if(t.props.position){const{x:e,y:n}=t.props.position;r.x=e,r.y=n}t.setState(r)}),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(n,e),function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(n,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:h.default.findDOMNode(this)}},{key:"render",value:function(){const{axis:e,bounds:t,children:n,defaultPosition:r,defaultClassName:i,defaultClassNameDragging:o,defaultClassNameDragged:a,position:s,positionOffset:l,scale:u,...h}=this.props;let m={},y=null;const v=!s||this.state.dragging,b=s||r,w={x:(0,d.canDragX)(this)&&v?this.state.x:b.x,y:(0,d.canDragY)(this)&&v?this.state.y:b.y};this.state.isElementSVG?y=(0,f.createSVGTransform)(w,l):m=(0,f.createCSSTransform)(w,l);const T=(0,p.default)(n.props.className||"",i,{[o]:this.state.dragging,[a]:this.state.dragged});return c.createElement(g.default,_({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),c.cloneElement(c.Children.only(n),{className:T,style:{...n.props.style,...m},transform:y}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,y.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}}])}(c.Component);e.default=T,w(T,"displayName","Draggable"),w(T,"propTypes",{...g.default.propTypes,axis:u.default.oneOf(["both","x","y","none"]),bounds:u.default.oneOfType([u.default.shape({left:u.default.number,right:u.default.number,top:u.default.number,bottom:u.default.number}),u.default.string,u.default.oneOf([!1])]),defaultClassName:u.default.string,defaultClassNameDragging:u.default.string,defaultClassNameDragged:u.default.string,defaultPosition:u.default.shape({x:u.default.number,y:u.default.number}),positionOffset:u.default.shape({x:u.default.oneOfType([u.default.number,u.default.string]),y:u.default.oneOfType([u.default.number,u.default.string])}),position:u.default.shape({x:u.default.number,y:u.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe}),w(T,"defaultProps",{...g.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(vg);const{default:oy,DraggableCore:ay}=vg;yg.exports=oy,yg.exports.default=oy,yg.exports.DraggableCore=ay;var sy=yg.exports,ly={exports:{}},cy={},uy={__esModule:!0,cloneElement:function(e,t){return t.style&&e.props.style&&(t.style=fy(fy({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),hy.default.cloneElement(e,t)}},hy=function(e){return e&&e.__esModule?e:{default:e}}(i);function py(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?py(Object(n),!0).forEach(function(t){dy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):py(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var my={__esModule:!0,resizableProps:void 0},gy=function(e){return e&&e.__esModule?e:{default:e}}(Tm);var yy={axis:gy.default.oneOf(["both","x","y","none"]),className:gy.default.string,children:gy.default.element.isRequired,draggableOpts:gy.default.shape({allowAnyClick:gy.default.bool,cancel:gy.default.string,children:gy.default.node,disabled:gy.default.bool,enableUserSelectHack:gy.default.bool,offsetParent:gy.default.node,grid:gy.default.arrayOf(gy.default.number),handle:gy.default.string,nodeRef:gy.default.object,onStart:gy.default.func,onDrag:gy.default.func,onStop:gy.default.func,onMouseDown:gy.default.func,scale:gy.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return"both"===i.axis||"y"===i.axis?(r=gy.default.number).isRequired.apply(r,t):gy.default.number.apply(gy.default,t)},handle:gy.default.oneOfType([gy.default.node,gy.default.func]),handleSize:gy.default.arrayOf(gy.default.number),lockAspectRatio:gy.default.bool,maxConstraints:gy.default.arrayOf(gy.default.number),minConstraints:gy.default.arrayOf(gy.default.number),onResizeStop:gy.default.func,onResizeStart:gy.default.func,onResize:gy.default.func,resizeHandles:gy.default.arrayOf(gy.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:gy.default.number,width:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return"both"===i.axis||"x"===i.axis?(r=gy.default.number).isRequired.apply(r,t):gy.default.number.apply(gy.default,t)}};my.resizableProps=yy,cy.__esModule=!0,cy.default=void 0;var vy=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=xy(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),by=sy,_y=uy,wy=my,Ty=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function xy(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(xy=function(e){return e?n:t})(e)}function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ey.apply(this,arguments)}function Sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ky(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sy(Object(n),!0).forEach(function(t){Oy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Py(e,t){return(Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Cy=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Py(e,t)}(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(e,t){var n=this.props,r=n.minConstraints,i=n.maxConstraints,o=n.lockAspectRatio;if(!r&&!i&&!o)return[e,t];if(o){var a=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*a)?t=e/a:e=t*a}var c=e,u=t,h=this.slack||[0,0],p=h[0],f=h[1];return e+=p,t+=f,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),i&&(e=Math.min(i[0],e),t=Math.min(i[1],t)),this.slack=[p+(c-e),f+(u-t)],[e,t]},n.resizeHandler=function(e,t){var n=this;return function(r,i){var o=i.node,a=i.deltaX,s=i.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],h=t[t.length-1],p=o.getBoundingClientRect();if(null!=n.lastHandleRect){if("w"===h)a+=p.left-n.lastHandleRect.left;if("n"===u)s+=p.top-n.lastHandleRect.top}n.lastHandleRect=p,"w"===h&&(a=-a),"n"===u&&(s=-s);var f=n.props.width+(l?a/n.props.transformScale:0),d=n.props.height+(c?s/n.props.transformScale:0),m=n.runConstraints(f,d);f=m[0],d=m[1];var g=f!==n.props.width||d!==n.props.height,y="function"==typeof n.props[e]?n.props[e]:null;y&&!("onResize"===e&&!g)&&(null==r.persist||r.persist(),y(r,{node:o,size:{width:f,height:d},handle:t})),"onResizeStop"===e&&n.resetData()}}},n.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return vy.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var r=ky({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return vy.cloneElement(n,r)},n.render=function(){var e=this,t=this.props,n=t.children,r=t.className,i=t.draggableOpts;t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart;var o=t.resizeHandles;t.transformScale;var a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(t,Ty);return(0,_y.cloneElement)(n,ky(ky({},a),{},{className:(r?r+" ":"")+"react-resizable",children:[].concat(n.props.children,o.map(function(t){var n,r=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=vy.createRef();return vy.createElement(by.DraggableCore,Ey({},i,{nodeRef:r,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,r))}))}))},t}(vy.Component);cy.default=Cy,Cy.propTypes=wy.resizableProps,Cy.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var Ay={__esModule:!0,default:void 0},My=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=Ly(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),Iy=jy(Tm),Ry=jy(cy),Dy=my,Ny=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function jy(e){return e&&e.__esModule?e:{default:e}}function Ly(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ly=function(e){return e?n:t})(e)}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(this,arguments)}function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fy(Object(n),!0).forEach(function(t){Hy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uy(e,t){return(Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Vy=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var r=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(r,function(){return t.props.onResize&&t.props.onResize(e,n)})):t.setState(r)},t}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Uy(e,t)}(t,e),t.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},t.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize;e.onResize;var r=e.onResizeStart,i=e.onResizeStop,o=e.draggableOpts,a=e.minConstraints,s=e.maxConstraints,l=e.lockAspectRatio,c=e.axis;e.width,e.height;var u=e.resizeHandles,h=e.style,p=e.transformScale,f=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,Ny);return My.createElement(Ry.default,{axis:c,draggableOpts:o,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:l,maxConstraints:s,minConstraints:a,onResizeStart:r,onResize:this.onResize,onResizeStop:i,resizeHandles:u,transformScale:p,width:this.state.width},My.createElement("div",By({},f,{style:zy(zy({},h),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(My.Component);Ay.default=Vy,Vy.propTypes=zy(zy({},Dy.resizableProps),{},{children:Iy.default.element}),ly.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},ly.exports.Resizable=cy.default,ly.exports.ResizableBox=Ay.default;var Gy=ly.exports,Xy={};Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.resizeHandleType=Xy.resizeHandleAxesType=Xy.default=void 0;var Wy=qy(Tm),Yy=qy(i);function qy(e){return e&&e.__esModule?e:{default:e}}var $y=Wy.default.arrayOf(Wy.default.oneOf(["s","w","e","n","sw","nw","se","ne"]));Xy.resizeHandleAxesType=$y;var Ky=Wy.default.oneOfType([Wy.default.node,Wy.default.func]);Xy.resizeHandleType=Ky;var Zy={className:Wy.default.string,style:Wy.default.object,width:Wy.default.number,autoSize:Wy.default.bool,cols:Wy.default.number,draggableCancel:Wy.default.string,draggableHandle:Wy.default.string,verticalCompact:function(e){e.verticalCompact},compactType:Wy.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&Fm.validateLayout(t,"layout")},margin:Wy.default.arrayOf(Wy.default.number),containerPadding:Wy.default.arrayOf(Wy.default.number),rowHeight:Wy.default.number,maxRows:Wy.default.number,isBounded:Wy.default.bool,isDraggable:Wy.default.bool,isResizable:Wy.default.bool,allowOverlap:Wy.default.bool,preventCollision:Wy.default.bool,useCSSTransforms:Wy.default.bool,transformScale:Wy.default.number,isDroppable:Wy.default.bool,resizeHandles:$y,resizeHandle:Ky,onLayoutChange:Wy.default.func,onDragStart:Wy.default.func,onDrag:Wy.default.func,onDragStop:Wy.default.func,onResizeStart:Wy.default.func,onResize:Wy.default.func,onResizeStop:Wy.default.func,onDrop:Wy.default.func,droppingItem:Wy.default.shape({i:Wy.default.string.isRequired,w:Wy.default.number.isRequired,h:Wy.default.number.isRequired}),children:function(e,t){var n=e[t],r={};Yy.default.Children.forEach(n,function(e){if(null!=e?.key){if(r[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');r[e.key]=!0}})},innerRef:Wy.default.any};function Qy(e){return(Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Xy.default=Zy,Object.defineProperty(gg,"__esModule",{value:!0}),gg.default=void 0;var Jy=sv(i),ev=sv(Tm),tv=sy,nv=Gy,rv=Fm,iv=pg,ov=Xy,av=sv(Bm);function sv(e){return e&&e.__esModule?e:{default:e}}function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lv(Object(n),!0).forEach(function(t){mv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uv(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hv(e,t){return(hv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pv(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=dv(e);if(t){var i=dv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Qy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fv(e)}(this,n)}}function fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dv(e){return(dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}(n,e);var t=pv(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return mv(fv(e=t.call.apply(t,[this].concat(i))),"state",{resizing:null,dragging:null,className:""}),mv(fv(e),"elementRef",Jy.default.createRef()),mv(fv(e),"onDragStart",function(t,n){var r=n.node,i=e.props,o=i.onDragStart,a=i.transformScale;if(o){var s={top:0,left:0},l=r.offsetParent;if(l){var c=l.getBoundingClientRect(),u=r.getBoundingClientRect(),h=u.left/a,p=c.left/a,f=u.top/a,d=c.top/a;s.left=h-p+l.scrollLeft,s.top=f-d+l.scrollTop,e.setState({dragging:s});var m=(0,iv.calcXY)(e.getPositionParams(),s.top,s.left,e.props.w,e.props.h),g=m.x,y=m.y;return o.call(fv(e),e.props.i,g,y,{e:t,node:r,newPosition:s})}}}),mv(fv(e),"onDrag",function(t,n){var r=n.node,i=n.deltaX,o=n.deltaY,a=e.props.onDrag;if(a){if(!e.state.dragging)throw new Error("onDrag called before onDragStart.");var s=e.state.dragging.top+o,l=e.state.dragging.left+i,c=e.props,u=c.isBounded,h=c.i,p=c.w,f=c.h,d=c.containerWidth,m=e.getPositionParams();if(u){var g=r.offsetParent;if(g){var y=e.props,v=y.margin,b=y.rowHeight,_=g.clientHeight-(0,iv.calcGridItemWHPx)(f,b,v[1]);s=(0,iv.clamp)(s,0,_);var w=(0,iv.calcGridColWidth)(m),T=d-(0,iv.calcGridItemWHPx)(p,w,v[0]);l=(0,iv.clamp)(l,0,T)}}var x={top:s,left:l};e.setState({dragging:x});var E=(0,iv.calcXY)(m,s,l,p,f),S=E.x,k=E.y;return a.call(fv(e),h,S,k,{e:t,node:r,newPosition:x})}}),mv(fv(e),"onDragStop",function(t,n){var r=n.node,i=e.props.onDragStop;if(i){if(!e.state.dragging)throw new Error("onDragEnd called before onDragStart.");var o=e.props,a=o.w,s=o.h,l=o.i,c=e.state.dragging,u=c.left,h=c.top,p={top:h,left:u};e.setState({dragging:null});var f=(0,iv.calcXY)(e.getPositionParams(),h,u,a,s),d=f.x,m=f.y;return i.call(fv(e),l,d,m,{e:t,node:r,newPosition:p})}}),mv(fv(e),"onResizeStop",function(t,n){e.onResizeHandler(t,n,"onResizeStop")}),mv(fv(e),"onResizeStart",function(t,n){e.onResizeHandler(t,n,"onResizeStart")}),mv(fv(e),"onResize",function(t,n){e.onResizeHandler(t,n,"onResize")}),e}return uv(n,[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;var n=(0,iv.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),r=(0,iv.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,rv.fastPositionEqual)(n,r)||this.props.useCSSTransforms!==e.useCSSTransforms}},{key:"componentDidMount",value:function(){this.moveDroppingItem({})}},{key:"componentDidUpdate",value:function(e){this.moveDroppingItem(e)}},{key:"moveDroppingItem",value:function(e){var t=this.props.droppingPosition;if(t){var n=this.elementRef.current;if(n){var r=e.droppingPosition||{left:0,top:0},i=this.state.dragging,o=i&&t.left!==r.left||t.top!==r.top;if(i){if(o){var a=t.left-i.left,s=t.top-i.top;this.onDrag(t.e,{node:n,deltaX:a,deltaY:s})}}else this.onDragStart(t.e,{node:n,deltaX:t.left,deltaY:t.top})}}}},{key:"getPositionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}},{key:"createStyle",value:function(e){var t,n=this.props,r=n.usePercentages,i=n.containerWidth;return n.useCSSTransforms?t=(0,rv.setTransform)(e):(t=(0,rv.setTopLeft)(e),r&&(t.left=(0,rv.perc)(e.left/i),t.width=(0,rv.perc)(e.width/i))),t}},{key:"mixinDraggable",value:function(e,t){return Jy.default.createElement(tv.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}},{key:"mixinResizable",value:function(e,t,n){var r=this.props,i=r.cols,o=r.x,a=r.minW,s=r.minH,l=r.maxW,c=r.maxH,u=r.transformScale,h=r.resizeHandles,p=r.resizeHandle,f=this.getPositionParams(),d=(0,iv.calcGridItemPosition)(f,0,0,i-o,0).width,m=(0,iv.calcGridItemPosition)(f,0,0,a,s),g=(0,iv.calcGridItemPosition)(f,0,0,l,c),y=[m.width,m.height],v=[Math.min(g.width,d),Math.min(g.height,1/0)];return Jy.default.createElement(nv.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:y,maxConstraints:v,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,onResize:this.onResize,transformScale:u,resizeHandles:h,handle:p},e)}},{key:"onResizeHandler",value:function(e,t,n){var r=t.node,i=t.size,o=this.props[n];if(o){var a=this.props,s=a.cols,l=a.x,c=a.y,u=a.i,h=a.maxH,p=a.minH,f=this.props,d=f.minW,m=f.maxW,g=(0,iv.calcWH)(this.getPositionParams(),i.width,i.height,l,c),y=g.w,v=g.h;d=Math.max(d,1),m=Math.min(m,s-l),y=(0,iv.clamp)(y,d,m),v=(0,iv.clamp)(v,p,h),this.setState({resizing:"onResizeStop"===n?null:i}),o.call(this,u,y,v,{e:e,node:r,size:i})}}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.w,i=e.h,o=e.isDraggable,a=e.isResizable,s=e.droppingPosition,l=e.useCSSTransforms,c=(0,iv.calcGridItemPosition)(this.getPositionParams(),t,n,r,i,this.state),u=Jy.default.Children.only(this.props.children),h=Jy.default.cloneElement(u,{ref:this.elementRef,className:(0,av.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":o,"react-draggable-dragging":!!this.state.dragging,dropping:!!s,cssTransforms:l}),style:cv(cv(cv({},this.props.style),u.props.style),this.createStyle(c))});return h=this.mixinResizable(h,c,a),h=this.mixinDraggable(h,o)}}]),n}(Jy.default.Component);function yv(e){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}gg.default=gv,mv(gv,"propTypes",{children:ev.default.element,cols:ev.default.number.isRequired,containerWidth:ev.default.number.isRequired,rowHeight:ev.default.number.isRequired,margin:ev.default.array.isRequired,maxRows:ev.default.number.isRequired,containerPadding:ev.default.array.isRequired,x:ev.default.number.isRequired,y:ev.default.number.isRequired,w:ev.default.number.isRequired,h:ev.default.number.isRequired,minW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minWidth not Number"):n>e.w||n>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxWidth not Number"):n<e.w||n<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minHeight not Number"):n>e.h||n>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxHeight not Number"):n<e.h||n<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:ev.default.string.isRequired,resizeHandles:ov.resizeHandleAxesType,resizeHandle:ov.resizeHandleType,onDragStop:ev.default.func,onDragStart:ev.default.func,onDrag:ev.default.func,onResizeStop:ev.default.func,onResizeStart:ev.default.func,onResize:ev.default.func,isDraggable:ev.default.bool.isRequired,isResizable:ev.default.bool.isRequired,isBounded:ev.default.bool.isRequired,static:ev.default.bool,useCSSTransforms:ev.default.bool.isRequired,transformScale:ev.default.number,className:ev.default.string,handle:ev.default.string,cancel:ev.default.string,droppingPosition:ev.default.shape({e:ev.default.object.isRequired,left:ev.default.number.isRequired,top:ev.default.number.isRequired})}),mv(gv,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.default=void 0;var vv=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==yv(e)&&"function"!=typeof e)return{default:e};var n=kv(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),bv=Sv(Lm),_v=Sv(Bm),wv=Fm,Tv=pg,xv=Sv(gg),Ev=Sv(Xy);function Sv(e){return e&&e.__esModule?e:{default:e}}function kv(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(kv=function(e){return e?n:t})(e)}function Ov(e){return function(e){if(Array.isArray(e))return Iv(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Mv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pv(Object(n),!0).forEach(function(t){Bv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Av(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}return o}}(e,t)||Mv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mv(e,t){if(e){if("string"==typeof e)return Iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iv(e,t)}}function Iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dv(e,t){return(Dv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Lv(e);if(t){var i=Lv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===yv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jv(e)}(this,n)}}function jv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lv(e){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fv="react-grid-layout",zv=!1;try{zv=/firefox/i.test(navigator.userAgent)}catch{}var Hv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}(n,e);var t=Nv(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bv(jv(e=t.call.apply(t,[this].concat(i))),"state",{activeDrag:null,layout:(0,wv.synchronizeLayoutWithChildren)(e.props.layout,e.props.children,e.props.cols,(0,wv.compactType)(e.props),e.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,droppingDOMNode:null,children:[]}),Bv(jv(e),"dragEnterCounter",0),Bv(jv(e),"onDragStart",function(t,n,r,i){var o=i.e,a=i.node,s=e.state.layout,l=(0,wv.getLayoutItem)(s,t);if(l)return e.setState({oldDragItem:(0,wv.cloneLayoutItem)(l),oldLayout:s}),e.props.onDragStart(s,l,l,null,o,a)}),Bv(jv(e),"onDrag",function(t,n,r,i){var o=i.e,a=i.node,s=e.state.oldDragItem,l=e.state.layout,c=e.props,u=c.cols,h=c.allowOverlap,p=c.preventCollision,f=(0,wv.getLayoutItem)(l,t);if(f){var d={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:t};l=(0,wv.moveElement)(l,f,n,r,!0,p,(0,wv.compactType)(e.props),u,h),e.props.onDrag(l,s,f,d,o,a),e.setState({layout:h?l:(0,wv.compact)(l,(0,wv.compactType)(e.props),u),activeDrag:d})}}),Bv(jv(e),"onDragStop",function(t,n,r,i){var o=i.e,a=i.node;if(e.state.activeDrag){var s=e.state.oldDragItem,l=e.state.layout,c=e.props,u=c.cols,h=c.preventCollision,p=c.allowOverlap,f=(0,wv.getLayoutItem)(l,t);if(f){l=(0,wv.moveElement)(l,f,n,r,!0,h,(0,wv.compactType)(e.props),u,p),e.props.onDragStop(l,s,f,null,o,a);var d=p?l:(0,wv.compact)(l,(0,wv.compactType)(e.props),u),m=e.state.oldLayout;e.setState({activeDrag:null,layout:d,oldDragItem:null,oldLayout:null}),e.onLayoutMaybeChanged(d,m)}}}),Bv(jv(e),"onResizeStart",function(t,n,r,i){var o=i.e,a=i.node,s=e.state.layout,l=(0,wv.getLayoutItem)(s,t);l&&(e.setState({oldResizeItem:(0,wv.cloneLayoutItem)(l),oldLayout:e.state.layout}),e.props.onResizeStart(s,l,l,null,o,a))}),Bv(jv(e),"onResize",function(t,n,r,i){var o=i.e,a=i.node,s=e.state,l=s.layout,c=s.oldResizeItem,u=e.props,h=u.cols,p=u.preventCollision,f=u.allowOverlap,d=Av((0,wv.withLayoutItem)(l,t,function(e){var t;if(p&&!f){var i=(0,wv.getAllCollisions)(l,Cv(Cv({},e),{},{w:n,h:r})).filter(function(t){return t.i!==e.i});if(t=i.length>0){var o=1/0,a=1/0;i.forEach(function(t){t.x>e.x&&(o=Math.min(o,t.x)),t.y>e.y&&(a=Math.min(a,t.y))}),Number.isFinite(o)&&(e.w=o-e.x),Number.isFinite(a)&&(e.h=a-e.y)}}return t||(e.w=n,e.h=r),e}),2),m=d[0],g=d[1];if(g){var y={w:g.w,h:g.h,x:g.x,y:g.y,static:!0,i:t};e.props.onResize(m,c,g,y,o,a),e.setState({layout:f?m:(0,wv.compact)(m,(0,wv.compactType)(e.props),h),activeDrag:y})}}),Bv(jv(e),"onResizeStop",function(t,n,r,i){var o=i.e,a=i.node,s=e.state,l=s.layout,c=s.oldResizeItem,u=e.props,h=u.cols,p=u.allowOverlap,f=(0,wv.getLayoutItem)(l,t);e.props.onResizeStop(l,c,f,null,o,a);var d=p?l:(0,wv.compact)(l,(0,wv.compactType)(e.props),h),m=e.state.oldLayout;e.setState({activeDrag:null,layout:d,oldResizeItem:null,oldLayout:null}),e.onLayoutMaybeChanged(d,m)}),Bv(jv(e),"onDragOver",function(t){var n;if(t.preventDefault(),t.stopPropagation(),zv&&(null===(n=t.nativeEvent.target)||void 0===n||!n.classList.contains(Fv)))return!1;var r=e.props,i=r.droppingItem,o=r.onDropDragOver,a=r.margin,s=r.cols,l=r.rowHeight,c=r.maxRows,u=r.width,h=r.containerPadding,p=r.transformScale,f=o?.(t);if(!1===f)return e.state.droppingDOMNode&&e.removeDroppingPlaceholder(),!1;var d=Cv(Cv({},i),f),m=e.state.layout,g=t.nativeEvent,y=g.layerX,v=g.layerY,b={left:y/p,top:v/p,e:t};if(e.state.droppingDOMNode){if(e.state.droppingPosition){var _=e.state.droppingPosition,w=_.left,T=_.top;(w!=y||T!=v)&&e.setState({droppingPosition:b})}}else{var x={cols:s,margin:a,maxRows:c,rowHeight:l,containerWidth:u,containerPadding:h||a},E=(0,Tv.calcXY)(x,v,y,d.w,d.h);e.setState({droppingDOMNode:vv.createElement("div",{key:d.i}),droppingPosition:b,layout:[].concat(Ov(m),[Cv(Cv({},d),{},{x:E.x,y:E.y,static:!1,isDraggable:!0})])})}}),Bv(jv(e),"removeDroppingPlaceholder",function(){var t=e.props,n=t.droppingItem,r=t.cols,i=e.state.layout,o=(0,wv.compact)(i.filter(function(e){return e.i!==n.i}),(0,wv.compactType)(e.props),r);e.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),Bv(jv(e),"onDragLeave",function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter--,0===e.dragEnterCounter&&e.removeDroppingPlaceholder()}),Bv(jv(e),"onDragEnter",function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter++}),Bv(jv(e),"onDrop",function(t){t.preventDefault(),t.stopPropagation();var n=e.props.droppingItem,r=e.state.layout,i=r.find(function(e){return e.i===n.i});e.dragEnterCounter=0,e.removeDroppingPlaceholder(),e.props.onDrop(r,i,t)}),e}return function(e,t,n){t&&Rv(e.prototype,t),n&&Rv(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children||!(0,wv.fastRGLPropsEqual)(this.props,e,bv.default)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.activeDrag){var n=this.state.layout,r=t.layout;this.onLayoutMaybeChanged(n,r)}}},{key:"containerHeight",value:function(){if(this.props.autoSize){var e=(0,wv.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}}},{key:"onLayoutMaybeChanged",value:function(e,t){t||(t=this.state.layout),(0,bv.default)(t,e)||this.props.onLayoutChange(e)}},{key:"placeholder",value:function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,n=t.width,r=t.cols,i=t.margin,o=t.containerPadding,a=t.rowHeight,s=t.maxRows,l=t.useCSSTransforms,c=t.transformScale;return vv.createElement(xv.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:n,cols:r,margin:i,containerPadding:o||i,maxRows:s,rowHeight:a,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},vv.createElement("div",null))}},{key:"processGridItem",value:function(e,t){if(e&&e.key){var n=(0,wv.getLayoutItem)(this.state.layout,String(e.key));if(!n)return null;var r=this.props,i=r.width,o=r.cols,a=r.margin,s=r.containerPadding,l=r.rowHeight,c=r.maxRows,u=r.isDraggable,h=r.isResizable,p=r.isBounded,f=r.useCSSTransforms,d=r.transformScale,m=r.draggableCancel,g=r.draggableHandle,y=r.resizeHandles,v=r.resizeHandle,b=this.state,_=b.mounted,w=b.droppingPosition,T="boolean"==typeof n.isDraggable?n.isDraggable:!n.static&&u,x="boolean"==typeof n.isResizable?n.isResizable:!n.static&&h,E=n.resizeHandles||y,S=T&&p&&!1!==n.isBounded;return vv.createElement(xv.default,{containerWidth:i,cols:o,margin:a,containerPadding:s||a,maxRows:c,rowHeight:l,cancel:m,handle:g,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:T,isResizable:x,isBounded:S,useCSSTransforms:f&&_,usePercentages:!_,transformScale:d,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:t?w:void 0,resizeHandles:E,resizeHandle:v},e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,i=t.isDroppable,o=t.innerRef,a=(0,_v.default)(Fv,n),s=Cv({height:this.containerHeight()},r);return vv.createElement("div",{ref:o,className:a,style:s,onDrop:i?this.onDrop:wv.noop,onDragLeave:i?this.onDragLeave:wv.noop,onDragEnter:i?this.onDragEnter:wv.noop,onDragOver:i?this.onDragOver:wv.noop},vv.Children.map(this.props.children,function(t){return e.processGridItem(t)}),i&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n;return t.activeDrag?null:((0,bv.default)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,wv.childrenEqual)(e.children,t.children)||(n=t.layout):n=e.layout,n?{layout:(0,wv.synchronizeLayoutWithChildren)(n,e.children,e.cols,(0,wv.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}}]),n}(vv.Component);Nm.default=Hv,Bv(Hv,"displayName","ReactGridLayout"),Bv(Hv,"propTypes",Ev.default),Bv(Hv,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:wv.noop,onDragStart:wv.noop,onDrag:wv.noop,onDragStop:wv.noop,onResizeStart:wv.noop,onResize:wv.noop,onResizeStop:wv.noop,onDrop:wv.noop,onDropDragOver:wv.noop});var Uv={},Vv={};Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.findOrGenerateResponsiveLayout=function(e,t,n,r,i,o){if(e[n])return(0,Gv.cloneLayout)(e[n]);for(var a=e[r],s=Xv(t),l=s.slice(s.indexOf(n)),c=0,u=l.length;c<u;c++){var h=l[c];if(e[h]){a=e[h];break}}return a=(0,Gv.cloneLayout)(a||[]),(0,Gv.compact)((0,Gv.correctBounds)(a,{cols:i}),o,i)},Vv.getBreakpointFromWidth=function(e,t){for(var n=Xv(e),r=n[0],i=1,o=n.length;i<o;i++){var a=n[i];t>e[a]&&(r=a)}return r},Vv.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},Vv.sortBreakpoints=Xv;var Gv=Fm;function Xv(e){return Object.keys(e).sort(function(t,n){return e[t]-e[n]})}function Wv(e){return(Wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.default=void 0;var Yv=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==Wv(e)&&"function"!=typeof e)return{default:e};var n=tb(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),qv=eb(Tm),$v=eb(Lm),Kv=Fm,Zv=Vv,Qv=eb(Nm),Jv=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function eb(e){return e&&e.__esModule?e:{default:e}}function tb(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(tb=function(e){return e?n:t})(e)}function nb(){return nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nb.apply(this,arguments)}function rb(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ob(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ib(Object(n),!0).forEach(function(t){hb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ib(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sb(e,t){return(sb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ub(e);if(t){var i=ub(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cb(e)}(this,n)}}function cb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ub(e){return(ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pb=function(e){return Object.prototype.toString.call(e)};function fb(e,t){return null==e?null:Array.isArray(e)?e:e[t]}var db=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sb(e,t)}(n,e);var t=lb(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return hb(cb(e=t.call.apply(t,[this].concat(i))),"state",e.generateInitialState()),hb(cb(e),"onLayoutChange",function(t){e.props.onLayoutChange(t,ob(ob({},e.props.layouts),{},hb({},e.state.breakpoint,t)))}),e}return function(e,t,n){t&&ab(e.prototype,t),n&&ab(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"generateInitialState",value:function(){var e=this.props,t=e.width,n=e.breakpoints,r=e.layouts,i=e.cols,o=(0,Zv.getBreakpointFromWidth)(n,t),a=(0,Zv.getColsFromBreakpoint)(o,i),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,Zv.findOrGenerateResponsiveLayout)(r,n,o,o,a,s),breakpoint:o,cols:a}}},{key:"componentDidUpdate",value:function(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,$v.default)(this.props.breakpoints,e.breakpoints)||!(0,$v.default)(this.props.cols,e.cols))&&this.onWidthChange(e)}},{key:"onWidthChange",value:function(e){var t=this.props,n=t.breakpoints,r=t.cols,i=t.layouts,o=t.compactType,a=this.props.breakpoint||(0,Zv.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),s=this.state.breakpoint,l=(0,Zv.getColsFromBreakpoint)(a,r),c=ob({},i);if(s!==a||e.breakpoints!==n||e.cols!==r){s in c||(c[s]=(0,Kv.cloneLayout)(this.state.layout));var u=(0,Zv.findOrGenerateResponsiveLayout)(c,n,a,s,l,o);u=(0,Kv.synchronizeLayoutWithChildren)(u,this.props.children,l,o,this.props.allowOverlap),c[a]=u,this.props.onLayoutChange(u,c),this.props.onBreakpointChange(a,l),this.setState({breakpoint:a,layout:u,cols:l})}var h=fb(this.props.margin,a),p=fb(this.props.containerPadding,a);this.props.onWidthChange(this.props.width,h,l,p)}},{key:"render",value:function(){var e=this.props;e.breakpoint,e.breakpoints,e.cols,e.layouts;var t=e.margin,n=e.containerPadding;e.onBreakpointChange,e.onLayoutChange,e.onWidthChange;var r=rb(e,Jv);return Yv.createElement(Qv.default,nb({},r,{margin:fb(t,this.state.breakpoint),containerPadding:fb(n,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!(0,$v.default)(e.layouts,t.layouts)){var n=t.breakpoint,r=t.cols;return{layout:(0,Zv.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType),layouts:e.layouts}}return null}}]),n}(Yv.Component);Uv.default=db,hb(db,"propTypes",{breakpoint:qv.default.string,breakpoints:qv.default.object,allowOverlap:qv.default.bool,cols:qv.default.object,margin:qv.default.oneOfType([qv.default.array,qv.default.object]),containerPadding:qv.default.oneOfType([qv.default.array,qv.default.object]),layouts:function(e,t){if("[object Object]"!==pb(e[t]))throw new Error("Layout property must be an object. Received: "+pb(e[t]));Object.keys(e[t]).forEach(function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,Kv.validateLayout)(e.layouts[t],"layouts."+t)})},width:qv.default.number.isRequired,onBreakpointChange:qv.default.func,onLayoutChange:qv.default.func,onWidthChange:qv.default.func}),hb(db,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:Kv.noop,onLayoutChange:Kv.noop,onWidthChange:Kv.noop});var mb={};function gb(e){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(mb,"__esModule",{value:!0}),mb.default=function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}(r,t);var n=function(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=kb(e);if(t){var i=kb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sb(e)}(this,n)}}(r);function r(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return Ob(Sb(e=n.call.apply(n,[this].concat(i))),"state",{width:1280}),Ob(Sb(e),"elementRef",yb.createRef()),Ob(Sb(e),"mounted",!1),Ob(Sb(e),"onWindowResize",function(){if(e.mounted){var t=e.elementRef.current;t instanceof HTMLElement&&t.offsetWidth&&e.setState({width:t.offsetWidth})}}),e}return function(e,t){t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"componentDidMount",value:function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var t=this.props,n=t.measureBeforeMount,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,_b);return n&&!this.mounted?yb.createElement("div",{className:(0,bb.default)(this.props.className,Pb),style:this.props.style,ref:this.elementRef}):yb.createElement(e,xb({innerRef:this.elementRef},r,this.state))}}]),r}(yb.Component),Ob(t,"defaultProps",{measureBeforeMount:!1}),Ob(t,"propTypes",{measureBeforeMount:vb.default.bool}),t};var yb=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==gb(e)&&"function"!=typeof e)return{default:e};var n=Tb(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(i),vb=wb(Tm),bb=wb(Bm),_b=["measureBeforeMount"];function wb(e){return e&&e.__esModule?e:{default:e}}function Tb(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Tb=function(e){return e?n:t})(e)}function xb(){return xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xb.apply(this,arguments)}function Eb(e,t){return(Eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kb(e){return(kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pb="react-grid-layout";!function(e){e.exports=Nm.default,e.exports.utils=Fm,e.exports.Responsive=Uv.default,e.exports.Responsive.utils=Vv,e.exports.WidthProvider=mb.default}(Dm);const Cb=ks(Dm.exports);var Ab,Mb={},Ib=new Uint8Array(16);function Rb(){if(!Ab&&!(Ab=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ab(Ib)}const Db=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Nb(e){return"string"==typeof e&&Db.test(e)}for(var jb=[],Lb=0;Lb<256;++Lb)jb.push((Lb+256).toString(16).substr(1));function Bb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jb[e[t+0]]+jb[e[t+1]]+jb[e[t+2]]+jb[e[t+3]]+"-"+jb[e[t+4]]+jb[e[t+5]]+"-"+jb[e[t+6]]+jb[e[t+7]]+"-"+jb[e[t+8]]+jb[e[t+9]]+"-"+jb[e[t+10]]+jb[e[t+11]]+jb[e[t+12]]+jb[e[t+13]]+jb[e[t+14]]+jb[e[t+15]]).toLowerCase();if(!Nb(n))throw TypeError("Stringified UUID is invalid");return n}var Fb,zb,Hb=0,Ub=0;function Vb(e){if(!Nb(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function Gb(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=Vb(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return Bb(a)}try{r.name=e}catch{}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function Xb(e){return 14+(e+64>>>9<<4)+1}function Wb(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Yb(e,t,n,r,i,o){return Wb(function(e,t){return e<<t|e>>>32-t}(Wb(Wb(t,e),Wb(r,o)),i),n)}function qb(e,t,n,r,i,o,a){return Yb(t&n|~t&r,e,t,i,o,a)}function $b(e,t,n,r,i,o,a){return Yb(t&r|n&~r,e,t,i,o,a)}function Kb(e,t,n,r,i,o,a){return Yb(t^n^r,e,t,i,o,a)}function Zb(e,t,n,r,i,o,a){return Yb(n^(t|~r),e,t,i,o,a)}var Qb=Gb("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[Xb(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,l=r,c=i,u=o;n=qb(n,r,i,o,e[a],7,-680876936),o=qb(o,n,r,i,e[a+1],12,-389564586),i=qb(i,o,n,r,e[a+2],17,606105819),r=qb(r,i,o,n,e[a+3],22,-1044525330),n=qb(n,r,i,o,e[a+4],7,-176418897),o=qb(o,n,r,i,e[a+5],12,1200080426),i=qb(i,o,n,r,e[a+6],17,-1473231341),r=qb(r,i,o,n,e[a+7],22,-45705983),n=qb(n,r,i,o,e[a+8],7,1770035416),o=qb(o,n,r,i,e[a+9],12,-1958414417),i=qb(i,o,n,r,e[a+10],17,-42063),r=qb(r,i,o,n,e[a+11],22,-1990404162),n=qb(n,r,i,o,e[a+12],7,1804603682),o=qb(o,n,r,i,e[a+13],12,-40341101),i=qb(i,o,n,r,e[a+14],17,-1502002290),n=$b(n,r=qb(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=$b(o,n,r,i,e[a+6],9,-1069501632),i=$b(i,o,n,r,e[a+11],14,643717713),r=$b(r,i,o,n,e[a],20,-373897302),n=$b(n,r,i,o,e[a+5],5,-701558691),o=$b(o,n,r,i,e[a+10],9,38016083),i=$b(i,o,n,r,e[a+15],14,-660478335),r=$b(r,i,o,n,e[a+4],20,-405537848),n=$b(n,r,i,o,e[a+9],5,568446438),o=$b(o,n,r,i,e[a+14],9,-1019803690),i=$b(i,o,n,r,e[a+3],14,-187363961),r=$b(r,i,o,n,e[a+8],20,1163531501),n=$b(n,r,i,o,e[a+13],5,-1444681467),o=$b(o,n,r,i,e[a+2],9,-51403784),i=$b(i,o,n,r,e[a+7],14,1735328473),n=Kb(n,r=$b(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=Kb(o,n,r,i,e[a+8],11,-2022574463),i=Kb(i,o,n,r,e[a+11],16,1839030562),r=Kb(r,i,o,n,e[a+14],23,-35309556),n=Kb(n,r,i,o,e[a+1],4,-1530992060),o=Kb(o,n,r,i,e[a+4],11,1272893353),i=Kb(i,o,n,r,e[a+7],16,-155497632),r=Kb(r,i,o,n,e[a+10],23,-1094730640),n=Kb(n,r,i,o,e[a+13],4,681279174),o=Kb(o,n,r,i,e[a],11,-358537222),i=Kb(i,o,n,r,e[a+3],16,-722521979),r=Kb(r,i,o,n,e[a+6],23,76029189),n=Kb(n,r,i,o,e[a+9],4,-640364487),o=Kb(o,n,r,i,e[a+12],11,-421815835),i=Kb(i,o,n,r,e[a+15],16,530742520),n=Zb(n,r=Kb(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=Zb(o,n,r,i,e[a+7],10,1126891415),i=Zb(i,o,n,r,e[a+14],15,-1416354905),r=Zb(r,i,o,n,e[a+5],21,-57434055),n=Zb(n,r,i,o,e[a+12],6,1700485571),o=Zb(o,n,r,i,e[a+3],10,-1894986606),i=Zb(i,o,n,r,e[a+10],15,-1051523),r=Zb(r,i,o,n,e[a+1],21,-2054922799),n=Zb(n,r,i,o,e[a+8],6,1873313359),o=Zb(o,n,r,i,e[a+15],10,-30611744),i=Zb(i,o,n,r,e[a+6],15,-1560198380),r=Zb(r,i,o,n,e[a+13],21,1309151649),n=Zb(n,r,i,o,e[a+4],6,-145523070),o=Zb(o,n,r,i,e[a+11],10,-1120210379),i=Zb(i,o,n,r,e[a+2],15,718787259),r=Zb(r,i,o,n,e[a+9],21,-343485551),n=Wb(n,s),r=Wb(r,l),i=Wb(i,c),o=Wb(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(Xb(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))});function Jb(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function e_(e,t){return e<<t|e>>>32-t}var t_=Gb("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),l=0;l<a;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];s[l]=c}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<a;++h){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=s[h][f];for(var d=16;d<80;++d)p[d]=e_(p[d-3]^p[d-8]^p[d-14]^p[d-16],1);for(var m=n[0],g=n[1],y=n[2],v=n[3],b=n[4],_=0;_<80;++_){var w=Math.floor(_/20),T=e_(m,5)+Jb(w,g,y,v)+b+t[w]+p[_]>>>0;b=v,v=y,y=e_(g,30)>>>0,g=m,m=T}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+v>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]});const n_=Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:Vb,stringify:Bb,v1:function(e,t,n){var r=t&&n||0,i=t||new Array(16),o=(e=e||{}).node||Fb,a=void 0!==e.clockseq?e.clockseq:zb;if(null==o||null==a){var s=e.random||(e.rng||Rb)();null==o&&(o=Fb=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=zb=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:Ub+1,u=l-Hb+(c-Ub)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||l>Hb)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hb=l,Ub=c,zb=a;var h=(1e4*(268435455&(l+=122192928e5))+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=255&p,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var f=0;f<6;++f)i[r+f]=o[f];return t||Bb(i)},v3:Qb,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||Rb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Bb(r)},v5:t_,validate:Nb,version:function(e){if(!Nb(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"}));var r_=Os(n_),i_=typeof Buffer<"u"?e=>Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode(...e)),o_=typeof Buffer<"u"?e=>Buffer.from(e,"base64"):e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0));Mb.encode=function(e){var t=r_.parse(e);return i_(t).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},Mb.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return r_.stringify(o_(t))},Mb.v4=function(){var e=r_.v4(null,new Uint8Array(16));return i_(e).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},Mb.nice=function(){var e=r_.v4(null,new Uint8Array(16));return e[0]=127&e[0],i_(e).replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)};const a_=ks(Mb);var s_={},l_=Object.prototype.hasOwnProperty;function c_(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function u_(e){try{return encodeURIComponent(e)}catch{return null}}function h_(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+t);return n}function p_(){this.step="    ",this.shift=h_(this.step)}function f_(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function d_(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+t+t+"AND ").replace(/ BETWEEN /gi,"~::~"+t+"BETWEEN ").replace(/ CASE /gi,"~::~"+t+"CASE ").replace(/ ELSE /gi,"~::~"+t+"ELSE ").replace(/ END /gi,"~::~"+t+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+t+"ON ").replace(/ OR /gi,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+t).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+t+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}s_.stringify=function(e,t){t=t||"";var n,r,i=[];for(r in"string"!=typeof t&&(t="?"),e)if(l_.call(e,r)){if(!(n=e[r])&&(null===n||undefined===n||isNaN(n))&&(n=""),r=u_(r),n=u_(n),null===r||null===n)continue;i.push(r+"="+n)}return i.length?t+i.join("&"):""},s_.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=c_(t[1]),o=c_(t[2]);null===i||null===o||i in r||(r[i]=o)}return r},p_.prototype.xml=function(e,t){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,l=t?h_(t):this.shift;for(s=0;s<r;s++)n[s].search(/<!/)>-1?(a+=l[o]+n[s],i=!0,(n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1||n[s].search(/!DOCTYPE/)>-1)&&(i=!1)):n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):n[s].search(/<\w/)>-1&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?a=a+=i?n[s]:l[o++]+n[s]:n[s].search(/<\w/)>-1&&n[s].search(/<\//)>-1?a=a+=i?n[s]:l[o]+n[s]:n[s].search(/<\//)>-1?a=a+=i?n[s]:l[--o]+n[s]:n[s].search(/\/>/)>-1?a=a+=i?n[s]:l[o]+n[s]:n[s].search(/<\?/)>-1||n[s].search(/xmlns\:/)>-1||n[s].search(/xmlns\=/)>-1?a+=l[o]+n[s]:a+=n[s];return"\n"==a[0]?a.slice(1):a},p_.prototype.json=function(e,t){t=t||this.step;return typeof JSON>"u"?e:"string"==typeof e?JSON.stringify(JSON.parse(e),null,t):"object"==typeof e?JSON.stringify(e,null,t):e},p_.prototype.css=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=t?h_(t):this.shift;for(a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")},p_.prototype.sql=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),r=n.length,i=[],o=0,a=this.step,s=0,l="",c=0,u=t?h_(t):this.shift;for(c=0;c<r;c++)i=c%2?i.concat(n[c]):i.concat(d_(n[c],a));for(r=i.length,c=0;c<r;c++)s=f_(i[c],s),/\s{0,}\s{0,}SELECT\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,",\n"+a+a)),/\s{0,}\s{0,}SET\s{0,}/.exec(i[c])&&(i[c]=i[c].replace(/\,/g,",\n"+a+a)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(i[c])?l+=u[++o]+i[c]:/\'/.exec(i[c])?(s<1&&o&&o--,l+=i[c]):(l+=u[o]+i[c],s<1&&o&&o--);return l=l.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},p_.prototype.xmlmin=function(e,t){return(t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},p_.prototype.jsonmin=function(e){return typeof JSON>"u"?e:JSON.stringify(JSON.parse(e),null,0)},p_.prototype.cssmin=function(e,t){return(t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},p_.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};const m_=ks(new p_);var g_={},y_={};function v_(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function b_(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function __(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function w_(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+__(-e,6):e>9999?"+"+__(e,6):__(e,4)}(e.getUTCFullYear())+"-"+__(e.getUTCMonth()+1,2)+"-"+__(e.getUTCDate(),2)+(i?"T"+__(t,2)+":"+__(n,2)+":"+__(r,2)+"."+__(i,3)+"Z":r?"T"+__(t,2)+":"+__(n,2)+":"+__(r,2)+"Z":n||t?"T"+__(t,2)+":"+__(n,2)+"Z":"")}function T_(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return y_;if(c)return c=!1,g_;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==y_;){for(var h=[];r!==g_&&r!==y_;)h.push(r),r=u();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?w_(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=v_(e);return function(r,i){return t(n(r),i,e)}}(e,t):v_(e)});return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=b_(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=b_(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var x_=T_(","),E_=x_.parse,S_=x_.parseRows,k_=x_.format,O_=x_.formatBody,P_=x_.formatRows,C_=x_.formatRow,A_=x_.formatValue,M_=T_("\t"),I_=M_.parse,R_=M_.parseRows,D_=M_.format,N_=M_.formatBody,j_=M_.formatRows,L_=M_.formatRow,B_=M_.formatValue;const F_=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),z_=Object.freeze(Object.defineProperty({__proto__:null,autoType:function(e){for(var t in e){var n,r,i=e[t].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;F_&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;e[t]=i}return e},csvFormat:k_,csvFormatBody:O_,csvFormatRow:C_,csvFormatRows:P_,csvFormatValue:A_,csvParse:E_,csvParseRows:S_,dsvFormat:T_,tsvFormat:D_,tsvFormatBody:N_,tsvFormatRow:L_,tsvFormatRows:j_,tsvFormatValue:B_,tsvParse:I_,tsvParseRows:R_},Symbol.toStringTag,{value:"Module"}));function H_(e){const t=[],n={},r={};let i=0;for(let o=0;o<e.length;o++){const a=Number(e[o][1]);i+=a;const s={id:o,chr:e[o][0],pos:i-a};t.push(s),r[s.chr]=s,n[e[o][0]]=a}return{cumPositions:t,chrPositions:r,totalLength:i,chromLengths:n}}const U_={},V_=(e,t)=>U_[e]?Promise.resolve(U_[e]):t(e),G_=e=>fetch(e,{credentials:"same-origin"}).then(e=>e.text()).then(e=>(e=>0===e.length?null:H_(R_(e)))(e)).catch(e=>(console.error("Could not retrieve or parse chrom info.",e),null)),X_={get:e=>((e,t,n)=>t(e,n).then(t=>(t&&(U_[e]=t),t)))(e,V_,G_)};function W_(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y_(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Y_(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let q_=function(){return W_(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.customEventHandlers={},this.registeredEls={},this.pubSub=t},[{key:"getEventHandler",value:function(e){return this.customEventHandlers[e]?this.customEventHandlers[e]:t=>this.pubSub.publish(e,t)}},{key:"unregister",value:function(e,t){!this.registeredEls[e]&&this.registeredEls[e]!==t||(this.registeredEls[e].removeEventListener(e,this.registeredEls[e].__handler__),this.registeredEls[e]=void 0,delete this.registeredEls[e])}},{key:"register",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!t||this.registeredEls[e]===t||(this.registeredEls[e]&&this.unregister(this.registeredEls[e]),this.registeredEls[e]=t,this.registeredEls[e].__handler__=this.getEventHandler(e),this.registeredEls[e].addEventListener(e,this.registeredEls[e].__handler__,{capture:n,passive:!1}))}}])}();const $_=e=>new q_(e),K_=Rs(e=>e.pos).left,Z_=(e,t)=>{if(!t||!t.cumPositions||!t.cumPositions.length)return null;let n=K_(t.cumPositions,e);const r=t.cumPositions[t.cumPositions.length-1].chr,i=t.chromLengths[r];n>0&&(n-=1);let o=Math.floor(e-t.cumPositions[n].pos),a=0;return o<0&&(a=o-1,o=1),n===t.cumPositions.length-1&&o>i&&(a=o-i,o=i),[t.cumPositions[n].chr,o,a,n]},Q_=(e,t)=>n=>n%e*t+Math.floor(n/e),J_=e=>e,ew=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J_;return e.map((e,r)=>e+t[n(r)])},tw=(e,t)=>{if("http://www.w3.org/2000/svg"===e.namespaceURI){const n=e.getAttribute("class");return!!n&&!!n.match(new RegExp(`(\\s|^)${t}(\\s|$)`))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))},nw=(e,t,n)=>n.chrPositions[e].pos+t,rw=e=>{if(!(e instanceof Event))throw new Error("Event must be an instance of Event");const t=new e.constructor(e.type,e);return t.sourceUid=e.sourceUid,t.forwarded=e.forwarded,t},iw=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.map((t,n)=>n*(255/(e.length-1))),r=ph().domain(n).range(e),i=Ul(t?255:254,-1,-1).map(r).map(e=>{const t=kc(e);return[t.r,t.g,t.b,255*t.opacity]});return i.length<256&&i.push([255,255,255,0]),i},ow={PIXI:ws},aw=e=>{const t=Tc(e);return ow.PIXI.utils.rgb2hex([t.r/255,t.g/255,t.b/255])},sw=e=>{if("transparent"===e)return[255,255,255,0];const t=Tc(e);return[t.r,t.g,t.b,255]},lw=(e,t,n)=>{const r=Z_(e,n),i=Z_(t,n);if(!r||!i)throw new Error("Couldn't convert data to genomic coordinates");return[r[0],Math.round(r[1]),i[0],Math.round(i[1])]},cw=(e,t,n)=>{let r;const i=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];const s=n&&!r;clearTimeout(r),r=setTimeout(()=>{r=void 0,n||e(...o)},t),s&&e(...o)};return i.cancel=()=>{clearTimeout(r),r=void 0},i},uw=e=>(e+16**6).toString(16).substr(-6),hw=e=>{const t={};return e.forEach(e=>{t[e[0]]=e[1]}),t},pw=e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t};function fw(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(n);return t}function dw(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function mw(e,t){const n="string"==typeof t?new Blob([t],{type:"application/octet-stream"}):t,r=window.document.createElement("a");r.href=window.URL.createObjectURL(n),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(r.href)}const gw="move",yw="select",vw="track-select",bw=3e3,_w="locationListenerPrefix",ww="http://higlass.io/api/v1",Tw=["top","left","right","bottom","center","whole","gallery"],xw=Symbol("Light theme"),Ew=Symbol("Dark theme"),Sw=xw,kw={"multitrack-header":"_multitrack-header_1yz7l_1","multitrack-header-focus":"_multitrack-header-focus_1yz7l_2","multitrack-header-squeazed":"_multitrack-header-squeazed_1yz7l_3","multitrack-header-dark":"_multitrack-header-dark_1yz7l_20","multitrack-header-id":"_multitrack-header-id_1yz7l_30","multitrack-header-left":"_multitrack-header-left_1yz7l_39","multitrack-header-grabber":"_multitrack-header-grabber_1yz7l_44","multitrack-header-grabber-squeazed":"_multitrack-header-grabber-squeazed_1yz7l_45","multitrack-header-search":"_multitrack-header-search_1yz7l_80","multitrack-header-nav-list":"_multitrack-header-nav-list_1yz7l_102","multitrack-header-icon":"_multitrack-header-icon_1yz7l_107","multitrack-header-icon-squeazed":"_multitrack-header-icon-squeazed_1yz7l_108","mouse-tool-selection":"_mouse-tool-selection_1yz7l_136"},Ow=[{id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},{id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},{id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},{id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},{id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},{id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},{id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},{id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},{id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]},{id:"check_square_o",viewBox:"0 0 1792 1792",paths:["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]},{id:"square_o",viewBox:"0 0 1792 1792",paths:["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]},{id:"file_o",viewBox:"0 0 1792 1792",paths:["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]},{id:"folder_o",viewBox:"0 0 1792 1792",paths:["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]},{id:"folder_open_o",viewBox:"0 0 1792 1792",paths:["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]},{id:"chevron_right",viewBox:"0 0 1792 1792",paths:["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]},{id:"chevron_down",viewBox:"0 0 1792 1792",paths:["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]}],Pw=new DOMParser,Cw=Pw.parseFromString('<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',"text/xml").documentElement,Aw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 20 20">\n  <rect x="0" y="3" width="4" height="14" fill="#637993"/>\n  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>\n  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>\n  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>\n  <rect x="14" y="3" width="2" height="14" fill="#000000"/>\n  <rect x="16" y="3" width="4" height="14" fill="#637993"/>\n</svg>\n',"text/xml").documentElement,Mw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>line</title>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>\n    </g>\n</svg>\n',"text/xml").documentElement,Iw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-3"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-5"></use>\n        </mask>\n        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>\n        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">\n            <use xlink:href="#tiles2DIconStr-path-7"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,Rw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>2d-heatmap</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>\n        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>\n        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>\n        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>\n        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>\n        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>\n        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>\n    </g>\n</svg>\n',"text/xml").documentElement,Dw='\n<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>axis-1d</title>\n    <desc>Created with Sketch.</desc>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>\n        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>\n    </g>\n</svg>\n',Nw=Pw.parseFromString(Dw,"text/xml").documentElement,jw=pm(Pw.parseFromString(Dw,"text/xml").documentElement).style("transform","rotate(90deg)").node(),Lw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>gene-annotations</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>\n        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-1"></use>\n        </mask>\n        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>\n        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">\n            <use xlink:href="#geneAnnotations-path-3"></use>\n        </mask>\n        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>\n        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">\n            <use xlink:href="#geneAnnotations-path-5"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>\n        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>\n    </g>\n</svg>\n',"text/xml").documentElement,Bw='\n<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>1d-tiles-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-1"></use>\n        </mask>\n        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>\n        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#tiles1DIconStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>\n    </g>\n</svg>\n',Fw=Pw.parseFromString(Bw,"text/xml").documentElement,zw=pm(Pw.parseFromString(Bw,"text/xml").documentElement).style("transform","rotate(90deg)").node(),Hw=Pw.parseFromString('\n<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>arrowhead-domains</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>\n        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        </mask>\n        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>\n        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">\n            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>\n        </mask>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>\n        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>\n    </g>\n</svg>\n',"text/xml").documentElement;function Uw(e){let{theStyle:t,onClick:n}=e;return i.createElement("svg",{className:kw[t],viewBox:"0 0 12 13",onClick:n,xmlns:"http://www.w3.org/2000/svg"},i.createElement("title",null,"Search"),i.createElement("g",{fill:"none",stroke:"#6c6c6c",strokeWidth:"2"},i.createElement("path",{d:"M11.29 11.71l-4-4"}),i.createElement("circle",{cx:"5",cy:"5",r:"4"})))}Uw.propTypes={theStyle:xm.string,onClick:xm.func};const Vw={type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:Cw,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},Gw={type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:Cw,availableOptions:["style","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},Xw=[Vw,{...Vw,type:"osm"},Gw,{...Gw,type:"mapbox"},{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:jw,availableOptions:["minWidth"],defaultOptions:{minWidth:100}},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:Nw,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"simple-svg",datatype:[],local:!1,orientation:"2d",exportable:!0,availableOptions:["minWidth","minHeight"],defaultOptions:{minWidth:100,minHeight:100}},{type:"heatmap",datatype:["matrix"],local:!1,orientation:"2d",thumbnail:Rw,exportable:!0,availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","maxZoom","minWidth","minHeight","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip","extent","zeroValueColor"],defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],colorbarBackgroundColor:"#ffffff",maxZoom:null,minWidth:100,minHeight:100,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1,extent:"full",zeroValueColor:null},defaultOptionsByTheme:{[Ew]:{backgroundColor:"#000000",colorRange:["black","rgba(208,2,27,1.0)","rgba(245,166,35,1.0)","white"],colorbarBackgroundColor:"#000000",labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"linear-heatmap",aliases:["horizontal-heatmap","vertical-heatmap"],datatype:["matrix"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:Rw,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,minWidth:100,minHeight:40,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","minWidth","minHeight","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"line",aliases:["horizontal-line","vertical-line"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:Mw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","lineStrokeWidth","lineStrokeColor","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode","minHeight"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelBackgroundColor:"white",labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,minHeight:20,mousePositionColor:"#000000",showTooltip:!1},defaultOptionsByTheme:{[Ew]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"1d-heatmap",aliases:["horizontal-1d-heatmap","vertical-1d-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:Aw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin","colorRange","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1}},{type:"vector-heatmap",aliases:["horizontal-vector-heatmap","vertical-vector-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,minHeight:1,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"multivec",aliases:["horizontal-multivec","vertical-multivec"],datatype:["multivec"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","minHeight","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling","selectRows","selectRowsAggregationMode","selectRowsAggregationWithRelativeHeight","selectRowsAggregationMethod","colorbarBackgroundColor","colorbarPosition","zeroValueColor"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,minHeight:100,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",selectRows:null,selectRowsAggregationMode:"mean",selectRowsAggregationWithRelativeHeight:!0,selectRowsAggregationMethod:"client",colorbarBackgroundColor:"#ffffff",colorbarPosition:"topRight",zeroValueColor:null},defaultOptionsByTheme:{[Ew]:{colorbarBackgroundColor:"#000000"}}},{type:"point",aliases:["horizontal-point","vertical-point"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"divergent-bar",aliases:["horizontal-divergent-bar","vertical-divergent-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",axisLabelFormatting:"scientific",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"bar",aliases:["horizontal-bar","vertical-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["align","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColor","colorRange","colorRangeGradient","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","barOpacity","showMousePosition","showTooltip","aggregationMode","zeroLineVisible","zeroLineColor","zeroLineOpacity"],defaultOptions:{align:"bottom",labelColor:"[glyph-color]",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:Iw},{type:"1d-value-interval",aliases:["horizontal-1d-value-interval","vertical-1d-value-interval"],datatype:["bed-value"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"1D Rectangles",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"stacked-interval",aliases:["top-stacked-interval","left-stacked-interval"],datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,projection:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"gene-annotations",aliases:["horizontal-gene-annotations","vertical-gene-annotations"],datatype:["gene-annotation"],local:!1,defaultHeight:90,defaultWidth:90,rotatable:!0,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:Lw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","minHeight","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor","fontSize","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing"],defaultOptions:{fontSize:10,labelColor:"black",labelBackgroundColor:"#ffffff",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#000000",geneAnnotationHeight:16,geneLabelPosition:"outside",geneStrandSpacing:4},defaultOptionsByTheme:{[Ew]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff",plusStrandColor:"#40a0ff"}}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:Hw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"linear-2d-rectangle-domains",aliases:["horizontal-2d-rectangle-domains","vertical-2d-rectangle-domains"],datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"Horizontal 2D Rectangle Domains",thumbnail:Hw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:Hw,availableOptions:["flipDiagonal","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainFillOpacity","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{flipDiagonal:"none",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainFillOpacity:.4,rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"horizontal-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokePos","regions"],defaultOptions:{fill:"red",fillOpacity:.2,stroke:"red",strokeOpacity:0,strokeWidth:1,regions:[],strokePos:[]}},{type:"vertical-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","regions"],defaultOptions:{fill:"red",fillOpacity:"0.2",stroke:"red",strokeOpacity:"0",regions:[]}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:Hw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:Hw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"horizontal-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-horizontal",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"vertical-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-vertical",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"chromosome-labels",aliases:["horizontal-chromosome-labels","vertical-chromosome-labels"],datatype:["chromsizes"],orientation:"1d-horizontal",rotatable:!0,minHeight:35,defaultHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["color","stroke","fontSize","fontIsLeftAligned","showMousePosition","mousePositionColor","tickPositions","tickFormat","reverseOrientation"],defaultOptions:{color:"#808080",stroke:"#ffffff",fontSize:12,fontIsLeftAligned:!1,showMousePosition:!1,mousePositionColor:"#000000",reverseOrientation:!1},defaultOptionsByTheme:{[Ew]:{color:"#808080",stroke:"#000000",mousePositionColor:"#ffffff"}}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:zw},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:Fw},{type:"osm-2d-tile-ids",datatype:["map-tiles"],local:!1,orientation:"2d",name:"OSM Tile Outlines",thumbnail:Iw,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"raster-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Raster Tiles",thumbnail:Cw,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],aliases:["vertical-bedlike"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"BED-like track",thumbnail:null,availableOptions:["alternating","annotationHeight","annotationStyle","fillColor","fillOpacity","fontColor","fontSize","minusStrandColor","plusStrandColor","labelBottomMargin","labelColor","labelLeftMargin","labelPosition","labelRightMargin","labelTopMargin","labelTextOpacity","labelBackgroundOpacity","maxAnnotationHeight","minHeight","trackBorderWidth","trackBorderColor","valueColumn","colorEncoding","colorRange","colorEncodingRange","separatePlusMinusStrands","showTexts","axisPositionHorizontal","axisMargin"],defaultOptions:{alternating:!1,annotationStyle:"box",fillColor:"blue",fillOpacity:.3,fontSize:"10",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:20,maxAnnotationHeight:null,trackBorderWidth:0,trackBorderColor:"black",valueColumn:null,colorEncoding:"itemRgb",showTexts:!1,colorRange:["#000000","#652537","#bf5458","#fba273","#ffffe0"],colorEncodingRange:!1,separatePlusMinusStrands:!0,annotationHeight:16}},{type:"empty",datatype:[],orientation:"1d-horizontal",name:"Empty track",thumbnail:null,availableOptions:[],defaultOptions:{}}],Ww=e=>{const t={};return Xw.filter(t=>!!(t.orientation===e||"1d-vertical"===e&&"1d-horizontal"===t.orientation&&t.rotatable)).forEach(e=>{let n=e.datatype;Array.isArray(e.datatype)||(n=[n]),n.forEach(n=>{n in t||(t[n]=[]),t[n].push(e)})}),t.none=[],t},Yw=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]],qw=Xw.reduce((e,t)=>{if(e[t.type]=t,t.aliases)for(const n of t.aliases)e[n]=t;return e},{}),$w=Xw.reduce((e,t)=>{for(let n=0;n<t.datatype.length;n++){const r=t.datatype[n];return e[r]?e[r].add(t.orientation):e[r]=new Set,e}return{}},{}),Kw={chromsizes:{center:"2d-chromosome-grid",top:"chromosome-labels",left:"chromosome-labels",bottom:"chromosome-labels",right:"chromosome-labels"},matrix:{center:"heatmap",top:"linear-heatmap",left:"linear-heatmap",right:"linear-heatmap",bottom:"linear-heatmap"},vector:{top:"bar",bottom:"bar",left:"bar",right:"bar"},"geo-json":{center:"geo-json"},"gene-annotation":{top:"gene-annotations",bottom:"gene-annotations",left:"gene-annotations",right:"gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}},Zw=(e,t)=>{const n=Ww(t);let r=new Set(Object.values(n).flat());for(const i of e){const e=new Set(i);r=new Set([...r].filter(t=>t.datatype.filter(t=>e.has(t)).length>0))}return[...r]},Qw="default",Jw="bounded",eT="overflow",tT="bounded-overflow",nT="scroll",rT=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_TRACK_TYPES:Zw,DATATYPE_TO_TRACK_TYPE:Ww,DEFAULT_CONTAINER_PADDING_X:10,DEFAULT_CONTAINER_PADDING_Y:10,DEFAULT_SERVER:ww,DEFAULT_TRACKS_FOR_DATATYPE:Kw,DEFAULT_VIEW_MARGIN:0,DEFAULT_VIEW_PADDING:5,GLOBALS:ow,HEATED_OBJECT_MAP:Yw,LOCATION_LISTENER_PREFIX:_w,LONG_DRAG_TIMEOUT:bw,MAX_CLICK_DELAY:300,MIN_HORIZONTAL_HEIGHT:20,MIN_VERTICAL_WIDTH:20,MOUSE_TOOL_MOVE:gw,MOUSE_TOOL_SELECT:yw,MOUSE_TOOL_TRACK_SELECT:vw,NUM_PRECOMP_SUBSETS_PER_1D_TTILE:8,NUM_PRECOMP_SUBSETS_PER_2D_TTILE:8,POSITIONS_BY_DATATYPE:$w,SHORT_DRAG_TIMEOUT:110,SIZE_MODE_BOUNDED:Jw,SIZE_MODE_BOUNDED_OVERFLOW:tT,SIZE_MODE_DEFAULT:Qw,SIZE_MODE_OVERFLOW:eT,SIZE_MODE_SCROLL:nT,THEME_DARK:Ew,THEME_DEFAULT:Sw,THEME_LIGHT:xw,TILE_FETCH_DEBOUNCE:100,TRACKS_INFO:Xw,TRACKS_INFO_BY_TYPE:qw,TRACK_LOCATIONS:Tw,VIEW_HEADER_MED_WIDTH_SEARCH_BAR:400,VIEW_HEADER_MIN_WIDTH_SEARCH_BAR:300,ZOOM_DEBOUNCE:10,ZOOM_TRANSITION_DURATION:1e3},Symbol.toStringTag,{value:"Module"})),iT=e=>(e.center??(e.center=[]),e.left??(e.left=[]),e.right??(e.right=[]),e.top??(e.top=[]),e.bottom??(e.bottom=[]),e.whole??(e.whole=[]),e.gallery??(e.gallery=[]),["top","bottom","gallery"].map(t=>e[t]).forEach(e=>(e??[]).forEach(e=>{const t=qw[e.type],n=t?.defaultOptions||{},r=e.options?{...n,...e.options}:n;void 0!==r.minHeight&&void 0===e.height&&(e.height=r.minHeight),void 0===e.height&&(e.height=t?.defaultHeight||20)})),["left","right","gallery"].map(t=>e[t]).forEach(e=>(e??[]).forEach(e=>{const t=qw[e.type],n=t?.defaultOptions||{},r=e.options?{...n,...e.options}:n;void 0!==r.minWidth&&void 0===e.width&&(e.width=r.minWidth),void 0===e.width&&(e.width=t?.defaultWidth||20)})),e),oT=(e,t)=>n=>n.reduce(e,t),aT=oT((e,t)=>e.concat(t),[]),sT=(e,t)=>{t.dispatchEvent(rw(e))};const lT=(e,t,n)=>{if(0===n.length)return;if(1===n.length)return n[0];let r=n[0];const i=function(e,t){return void 0!==Kw[e]?Kw[e][t]:void 0}(e,t);return void 0!==i&&(r=n.find(e=>e.type===i)||r),r},cT=e=>(vW.listen(),[e.clientWidth,e.clientHeight]),uT=(e,t)=>{let n=null;const r=e=>(e.uid===t&&(n=e),"combined"===e.type.substr(0,8)&&e.contents.forEach(r),null);return Object.keys(e).map(t=>e[t]).filter(e=>e.filter).reduce((e,t)=>e.concat(t),[]).forEach(r),n},hT=(e,t,n)=>{const r=t?e[t]:Object.values(e)[0];if(!r)return void console.warn(t?`Could't find view with id "${t}"`:"No views available.");let i=r.trackRenderer.trackDefObjects[n];return i?i=i.trackObject:Object.values(r.trackRenderer.trackDefObjects).map(e=>e.trackObject).filter(e=>e.childTracks).forEach(e=>{e.createdTracks[n]&&(i=e.createdTracks[n])}),i};function pT(e){return"contents"in e&&"combined"===e.type}function fT(e){return null!==e&&"object"==typeof e}function dT(e){return fT(e)&&"max_width"in e}function mT(e){return fT(e)&&"resolutions"in e}const gT=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e.forEach(e=>{n&&pT(e)&&gT(e.contents,t,n,r),t(e,r)})},yT=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=[];for(const[i,o]of Object.entries(e))gT(o,t,n,i),r.push(...o);return r},vT=(e,t)=>{let n=null;return yT(e,(e,r)=>{e.uid===t&&(n=r)}),n},bT=e=>t=>Array.prototype.map.call(t,e),_T=()=>[window,bT(e=>e.charCodeAt(0))("2.0.0").map(e=>e<=999?`00${e}`.slice(-3):e).join("")],wT=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;const s=document.createElement("canvas");s.width=t,s.height=n;const l=s.getContext("2d");if(!l)throw new Error("Could not get canvas context");const c=l.createLinearGradient(r,i,o,a);return e.forEach(e=>{c.addColorStop(e.from,e.color)}),l.fillStyle=c,l.fillRect(0,0,t,n),s},TT=(e,t)=>{let n=e;for(;n&&n!==t&&"HTML"!==n.tagName;)n=n.parentNode;return n===t},xT=e=>Number.parseInt(e.replace(/^#/,""),16),ET=()=>{};function ST(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kT(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kT(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let OT=function(){return ST(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.context=t;const{tracks:n,createTrackObject:r}=t;this.childTracks=n.map(r),this.createdTracks={},this.uid=a_.nice(),this.childTracks.forEach((e,t)=>{this.createdTracks[n[t].uid]=e});for(let i=0;i<this.childTracks.length;i++)this.childTracks[i]||console.error("Empty child track in CombinedTrack:",this)},[{key:"updateContents",value:function(e,t){const n=[],r=new Set;e.forEach(e=>{if(r.add(e.uid),e.uid in this.createdTracks)n.push(this.createdTracks[e.uid]);else{const r=t(e);r.setPosition(this.position),r.setDimensions(this.dimensions),n.push(r),r.zoomed(this._xScale,this._yScale),this.createdTracks[e.uid]=r}}),this.childTracks=n;const i=new Set(Object.keys(this.createdTracks));return[...new Set([...i].filter(e=>!r.has(e)))].forEach(e=>{this.createdTracks[e].remove(),delete this.createdTracks[e]}),this}},{key:"setPosition",value:function(e){this.position=e;for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].setPosition(e)}},{key:"setDimensions",value:function(e){this.dimensions=e;for(let t=0;t<this.childTracks.length;t++)this.childTracks[t].setDimensions(e)}},{key:"zoomed",value:function(e,t,n,r,i,o,a){this._xScale=e,this._yScale=t;for(let s=0;s<this.childTracks.length;s++)this.childTracks[s].zoomed(e,t,n,r,i,o,a)}},{key:"clickOutside",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].clickOutside()}},{key:"click",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].click(...arguments)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(e,t){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].refScalesChanged(e,t)}},{key:"remove",value:function(){for(let e=0;e<this.childTracks.length;e++)this.childTracks[e].remove()}},{key:"exportSVG",value:function(){const e=document.createElement("g");for(const t of this.childTracks)t.exportSVG&&e.appendChild(t.exportSVG()[0]);return[e,e]}},{key:"rerender",value:function(e){}},{key:"minValue",value:function(e){if(0===arguments.length){const e=this.childTracks.filter(e=>e.minValue).map(e=>e.minValue()).filter(e=>e);return Math.min(...e)}for(const t of this.childTracks)t.minValue&&t.minValue(e)}},{key:"maxValue",value:function(e){if(0===arguments.length){const e=this.childTracks.filter(e=>e.maxValue).map(e=>e.maxValue()).filter(e=>e);return Math.max(...e)}for(const t of this.childTracks)t.maxValue&&t.maxValue(e)}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){for(const e of this.childTracks)e.stopHover&&e.stopHover()}},{key:"getMouseOverHtml",value:function(e,t){let n="";for(const r of this.childTracks)if(r.getMouseOverHtml){const i=r.getMouseOverHtml(e,t);i?.length&&(n+=i,n+="<br/>")}return n}}])}();const PT=(e,t)=>t===e||t instanceof OT&&Object.keys(t.createdTracks).map(e=>t.createdTracks[e]).some(t=>PT(e,t)),CT=function(e,t,n,r,i,o){return arguments.length>6&&void 0!==arguments[6]&&arguments[6]?e>=n&&e<=r||t>=i&&t<=o:e>=n&&e<=r&&t>=i&&t<=o},AT=e=>bT(t=>e[t])(Object.keys(e)),MT=(e,t)=>e>t?e:t;function IT(e){let t=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<1e-7&&r>-1e-7||r>t&&(t=r)}return t}const RT=(e,t)=>e<t?e:t;function DT(e){let t=Number.MAX_SAFE_INTEGER;for(let n=0;n<e.length;n++){const r=e[n];r<1e-7&&r>-1e-7||r<t&&(t=r)}return t}const NT=(e,t)=>{const n=+t;if(Number.isNaN(n)){const n=e.shape[0],r=e.shape[1],i=t.shape[0],o=t.shape[1];if(n!==i||r!==o)return void console.warn("Cannot assign source to target ndarray as the dimensions do not match",n,i,r,o);if(1===e.dimension)for(let a=0;a<e.shape[0];++a)e.set(a,t.get(a));else for(let a=0;a<e.shape[0];++a)for(let n=0;n<e.shape[1];++n)e.set(a,n,t.get(a,n))}else if(1===e.dimension)for(let r=0;r<e.shape[0];++r)e.set(r,n);else for(let r=0;r<e.shape[0];++r)for(let t=0;t<e.shape[1];++t)e.set(r,t,n)};var jT=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t};function LT(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var BT=jT,FT=function(e){return null!=e&&(LT(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&LT(e.slice(0,0))}(e)||!!e._isBuffer)},zT=typeof Float64Array<"u";function HT(e,t){return e[0]-t[0]}function UT(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(HT);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function VT(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(i)()}if(0===t){i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",i)(GT[e][0])}i=["'use strict'"];var o=BT(t),a=o.map(function(e){return"i"+e}),s="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),l=o.map(function(e){return"b"+e}).join(","),c=o.map(function(e){return"c"+e}).join(",");i.push("function "+n+"(a,"+l+","+c+",d){this.data=a","this.shape=["+l+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+a.join(",")+",v){"),r?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+n+"_get("+a.join(",")+"){"),r?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+n+"_index(",a.join(),"){return "+s+"}"),i.push("proto.hi=function "+n+"_hi("+a.join(",")+"){return new "+n+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var u=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),h=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+n+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+u.join(",")+","+h.join(","));for(var p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+a.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var f=new Array(t),d=new Array(t);for(p=0;p<t;++p)f[p]="a[i"+p+"]",d[p]="b[i"+p+"]";i.push("proto.transpose=function "+n+"_transpose("+a+"){"+a.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+f.join(",")+","+d.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+a+"){var a=[],b=[],c=this.offset");for(p=0;p<t;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this.stride["+p+"]*i"+p+")|0}else{a.push(this.shape["+p+"]);b.push(this.stride["+p+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(GT[e],UT)}var GT={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};var XT=function(e,t,n,r){if(void 0===e)return(0,GT.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===n){n=new Array(i);for(var o=i-1,a=1;o>=0;--o)n[o]=a,a*=t[o]}if(void 0===r){r=0;for(o=0;o<i;++o)n[o]<0&&(r-=(t[o]-1)*n[o])}for(var s=function(e){if(FT(e))return"buffer";if(zT)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),l=GT[s];l.length<=i+1;)l.push(VT(s,l.length-1));return(0,l[i+1])(e,t,n,r)};const WT=ks(XT),YT=e=>{const t=e.shape.reduce((e,t)=>e*t,1),n=new Array(t);if(1===e.dimension){let t=0;for(let r=0;r<e.shape[0];++r)n[t]=e.get(r),t++}else{let t=0;for(let r=0;r<e.shape[0];++r)for(let i=0;i<e.shape[1];++i)n[t]=e.get(r,i),t++}return n},qT=e=>1===e.shape.length?e:WT(YT(e)),$T=e=>{const t=e.split("."),n=t.slice(1).join("").length;return+t.join("")/10**n},KT=(e,t)=>e||t,ZT=e=>{var t,n,r;const i=document.createElement("g"),o=document.createElement("text");return 0===e.anchor.x?o.setAttribute("text-anchor","start"):1===e.anchor.x?o.setAttribute("text-anchor","end"):o.setAttribute("text-anchor","middle"),o.setAttribute("font-family",(null==(t=e.style.fontFamily)?void 0:t.toString())??""),o.setAttribute("font-size",(null==(n=e.style.fontSize)?void 0:n.toString())??""),i.setAttribute("transform",`scale(${e.scale.x},1)`),o.setAttribute("fill",(null==(r=e.style.fill)?void 0:r.toString())??""),o.innerHTML=e.text,i.appendChild(o),i.setAttribute("transform",`translate(${e.x},${e.y})scale(${e.scale.x},1)`),i},QT=(e,t)=>{e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)},JT=e=>{const t=e.toString(16);return 1===t.length?`0${t}`:t},ex=(e,t)=>[e.invert((e.range()[0]+e.range()[1])/2),t.invert((t.range()[0]+t.range()[1])/2),e.invert(1)-e.invert(0)],tx=(e,t,n)=>{if(null===n||!e||!t)return;const r=e.domain()[0],i=e.domain()[1],o=t.domain()[0],a=t.domain()[1];return[...lw(r,i,n),...lw(o,a,n)]},nx=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t?e.pMasked:e.pForeground||e.pMain;if(!r)throw new Error("setupShowMousePosition: No scene found. Please make sure to call this method after the scene has been initialized.");const i=((e,t,n,r,i,o,a,s,l)=>{e.publish("app.animateOnMouseMove",!0);const c=n.mousePositionColor?xT(n.mousePositionColor):11184810,u=n.mousePositionAlpha||1,h=new ow.PIXI.Graphics,p=()=>{h.clear()},f=(e,t,n)=>{if(n||p(),h.lineStyle(1,c,u),t){const t=s?i()[0]:0;h.moveTo(0,e),h.lineTo(o()[0]+t,e)}else{const t=s?i()[1]:0;h.moveTo(e,0),h.lineTo(e,o()[1]+t)}},d=e=>{if(e.noHoveredTracks)return p(),h;let t,n;e.isFromVerticalTrack?(t=e.dataY,n=e.dataY):(t=e.dataX,n=e.isFrom2dTrack?e.dataY:e.dataX);const o=s?i():[0,0],l=a()?r()[0](n)+o[1]:r()[0](t)+o[0];return f(l),s&&f(r()[1](n)+o[1],!0,!0),h};return t.push(e.subscribe("app.mouseMove",d)),t.push(e.subscribe("app.mouseLeave",p)),t.push(e.subscribe("blur",p)),l&&t.push(Rm.subscribe("higlass.mouseMove",d)),h})(e.pubSub,e.pubSubs,e.options,()=>[e.xScale(),e.yScale()],e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t,n);return r.addChild(i),()=>{r.removeChild(i)}},rx=(e,t)=>e+t,ix=(e,t,n,r,i,o)=>{const a=document.createElement("line");return a.setAttribute("x1",String(e)),a.setAttribute("x2",String(n)),a.setAttribute("y1",String(t)),a.setAttribute("y2",String(r)),i&&a.setAttribute("stroke-width",String(i)),o&&a.setAttribute("stroke",o),a},ox=(e,t,n)=>{let r,i=0;const o=function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];clearTimeout(r),r=setTimeout(()=>{i>0&&(e(...o),i=0)},n)};o.cancel=()=>{clearTimeout(r),r=void 0},o.immediate=function(){e(...arguments)};let a=!1;return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];a?i++:(e(...s),o(...s),a=!0,i=0,setTimeout(()=>{a=!1},t))}},ax=e=>new Promise(t=>{setTimeout(t,e)}),sx=()=>{},lx=e=>(e||"").replace(/\/$/,""),cx=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return i=>{let o=255;return i>r&&(o=Math.max(0,Math.min(255,Math.floor(e(i+n))))),t[o]}},ux=e=>{let t=[];for(const n of e)pT(n)?t=t.concat(n.contents):t.push(n);return t};function hx(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,px(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function px(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function fx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}let dx=hx(function e(t,n,r,i){fx(this,e),this.interval=[t,n],this.max=Number.NEGATIVE_INFINITY,this.parentNode=null,this.left=r??null,this.right=i??null}),mx=function(){return hx(function e(){fx(this,e),this.root=null},[{key:"add",value:function(e){if(!this.root)return this.root=new dx(e[0],e[1]),void(this.root.max=e[1]);yx(this.root,e)}},{key:"contains",value:function(e){return vx(e,this.root)}},{key:"intersects",value:function(e){return bx(e,this.root)}},{key:"height",value:function(){return _x(this.root)}},{key:"findMax",value:function(e){const t=[e];let n,r,i=Number.NEGATIVE_INFINITY;for(;t.length;)n=t.pop(),n?.left&&t.push(n.left),n?.right&&t.push(n.right),n?.interval[1]>i&&(i=n.interval[1],r=n);return r??null}},{key:"_removeHelper",value:function(e,t){if(t)if(t.interval[0]===e[0]&&t.interval[1]===e[1]){if(t.left&&t.right){let e=t.left;for(;e.left;)e=e.left;const n=e.interval;e.interval=t.interval,t.interval=n,this._removeHelper(e.interval,t)}else{let e="left";t.right&&(e="right");const n=t.parentNode;n?(n.left===t?n.left=t[e]:n.right=t[e],t[e]&&(t[e].parentNode=n)):(this.root=t[e],this.root&&(this.root.parentNode=null))}const e=t.parentNode;if(e){let n=this.findMax(e);const r=n?.interval[1]??Number.NEGATIVE_INFINITY;for(;n;)n.max===t.interval[1]?(n.max=r,n=n.parentNode):n=null}}else this._removeHelper(e,t.left),this._removeHelper(e,t.right)}},{key:"remove",value:function(e){return this._removeHelper(e,this.root)}}])}();function gx(e,t,n){let r=new dx(n[0],n[1]);if(r.max=n[1],r.parentNode=e,e[t]=r,e.max<n[1])for(;r;)r.max<n[1]&&(r.max=n[1]),r=r.parentNode}function yx(e,t){e.interval[0]>t[0]?e.left?yx(e.left,t):gx(e,"left",t):e.right?yx(e.right,t):gx(e,"right",t)}function vx(e,t){if(!t)return!1;if(t.interval[0]<=e&&t.interval[1]>=e)return!0;let n,r=!1;return["left","right"].forEach(i=>{n=t[i],n&&n.max>e&&(r=r||vx(e,n))}),r}function bx(e,t){if(!t)return!1;if(function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]<t[0]&&e[1]>t[0]||e[0]<t[1]&&e[1]>t[1]||t[0]<e[0]&&t[1]>e[0]||t[0]<e[1]&&t[1]>e[1]}(t.interval,e))return!0;let n,r=!1;return["left","right"].forEach(i=>{n=t[i],n&&n.max>=e[0]&&(r=r||bx(e,n))}),r}function _x(e){return e?1+Math.max(_x(e.left),_x(e.right)):0}function wx(e){e.sort((e,t)=>t.to-t.from-(e.to-e.from));const t=[[]],n=[new mx];for(let r=0;r<e.length;r++){let i=!1;for(let o=0;o<t.length;o++){const a=n[o],s=[+e[r].from,+e[r].to];if(!a.intersects(s)){a.add(s),t[o].push(e[r]),i=!0;break}}if(!i){const i=new mx;i.add([e[r].from,e[r].to]),t.push([e[r]]),n.push(i)}}return t}function Tx(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xx(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xx(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let Ex=function(){return Tx(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.epsilon=1e-6,this.data=t,this.tileSize=this.data.length,this.paddedTileSize=2**Math.ceil(Math.log2(this.tileSize)),this.numSubsets=Math.min(8,this.paddedTileSize),this.subsetSize=this.paddedTileSize/this.numSubsets,this.subsetMinimums=this.computeSubsetNonZeroMinimums(),this.subsetMaximums=this.computeSubsetNonZeroMaximums(),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()},[{key:"getMinNonZeroInSubset",value:function(e){const t=e[0],n=e[1];let r=Number.MAX_SAFE_INTEGER;if(0===t&&n===this.tileSize)return this.minNonZeroInTile;const i=Math.ceil(t/this.subsetSize),o=Math.floor((n-1)/this.subsetSize);return i>=o?this.minNonZero(this.data,t,n):(t<i*this.subsetSize&&(r=Math.min(r,this.minNonZero(this.data,t,i*this.subsetSize))),r=Math.min(r,this.minNonZero(this.subsetMinimums,i,o)),n>o*this.subsetSize&&(r=Math.min(r,this.minNonZero(this.data,o*this.subsetSize,n))),r)}},{key:"getMaxNonZeroInSubset",value:function(e){const t=e[0],n=e[1];let r=Number.MIN_SAFE_INTEGER;if(0===t&&n===this.tileSize)return this.maxNonZeroInTile;const i=Math.ceil(t/this.subsetSize),o=Math.floor((n-1)/this.subsetSize);return i>=o?this.maxNonZero(this.data,t,n):(t<i*this.subsetSize&&(r=Math.max(r,this.maxNonZero(this.data,t,i*this.subsetSize))),r=Math.max(r,this.maxNonZero(this.subsetMaximums,i,o)),n>o*this.subsetSize&&(r=Math.max(r,this.maxNonZero(this.data,o*this.subsetSize,n))),r)}},{key:"computeSubsetNonZeroMinimums",value:function(){const e=[];for(let t=0;t<this.numSubsets;t++){let n=Number.MAX_SAFE_INTEGER;for(let e=0;e<this.subsetSize;e++){const r=this.data[t*this.subsetSize+e];void 0!==r&&(r<this.epsilon&&r>-this.epsilon||r<n&&(n=r))}e.push(n)}return e}},{key:"computeSubsetNonZeroMaximums",value:function(){const e=[];for(let t=0;t<this.numSubsets;t++){let n=Number.MIN_SAFE_INTEGER;for(let e=0;e<this.subsetSize;e++){const r=this.data[t*this.subsetSize+e];void 0!==r&&(r<this.epsilon&&r>-this.epsilon||r>n&&(n=r))}e.push(n)}return e}},{key:"getMinNonZeroInTile",value:function(){return Math.min(...this.subsetMinimums)}},{key:"getMaxNonZeroInTile",value:function(){return Math.max(...this.subsetMaximums)}},{key:"minNonZero",value:function(e,t,n){let r=Number.MAX_SAFE_INTEGER;for(let i=t;i<n;i++){const t=e[i];t<this.epsilon&&t>-this.epsilon||t<r&&(r=t)}return r}},{key:"maxNonZero",value:function(e,t,n){let r=Number.MIN_SAFE_INTEGER;for(let i=t;i<n;i++){const t=e[i];t<this.epsilon&&t>-this.epsilon||t>r&&(r=t)}return r}}])}();function Sx(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kx(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kx(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let Ox=function(){return Sx(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.epsilon=1e-6,this.tileSize=Math.sqrt(t.length),Number.isSafeInteger(this.tileSize)||console.error("The DenseDataExtrema2D module only works for data of quadratic length."),this.numSubsets=Math.min(8,this.tileSize),this.subsetSize=this.tileSize/this.numSubsets;const n=WT(Array.from(t),[this.tileSize,this.tileSize]);this.subsetMinimums=this.computeSubsetNonZeroMinimums(n),this.subsetMaximums=this.computeSubsetNonZeroMaximums(n),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()},[{key:"getMinNonZeroInSubset",value:function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=Math.floor(n/this.subsetSize),a=Math.floor(t/this.subsetSize),s=Math.ceil((i+1)/this.subsetSize)-o,l=Math.ceil((r+1)/this.subsetSize)-a;return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,o,a,l,s)}},{key:"getMaxNonZeroInSubset",value:function(e){const t=e[0],n=e[1],r=e[2],i=e[3],o=Math.floor(n/this.subsetSize),a=Math.floor(t/this.subsetSize),s=Math.ceil((i+1)/this.subsetSize)-o,l=Math.ceil((r+1)/this.subsetSize)-a;return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,o,a,l,s)}},{key:"computeSubsetNonZeroMinimums",value:function(e){const t=WT(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let r=0;r<this.numSubsets;r++){const i=this.getMinNonZeroInNdarraySubset(e,n*this.subsetSize,r*this.subsetSize,this.subsetSize,this.subsetSize);t.set(n,r,i)}return t}},{key:"computeSubsetNonZeroMaximums",value:function(e){const t=WT(new Array(this.numSubsets**2),[this.numSubsets,this.numSubsets]);for(let n=0;n<this.numSubsets;n++)for(let r=0;r<this.numSubsets;r++){const i=this.getMaxNonZeroInNdarraySubset(e,n*this.subsetSize,r*this.subsetSize,this.subsetSize,this.subsetSize);t.set(n,r,i)}return t}},{key:"getMinNonZeroInNdarraySubset",value:function(e,t,n,r,i){let o=Number.MAX_SAFE_INTEGER;for(let a=0;a<r;a++)for(let r=0;r<i;r++){const i=e.get(t+r,n+a);i<this.epsilon&&i>-this.epsilon||i<o&&(o=i)}return o}},{key:"getMaxNonZeroInNdarraySubset",value:function(e,t,n,r,i){let o=Number.MIN_SAFE_INTEGER;for(let a=0;a<r;a++)for(let r=0;r<i;r++){const i=e.get(t+r,n+a);i<this.epsilon&&i>-this.epsilon||i>o&&(o=i)}return o}},{key:"mirrorPrecomputedExtrema",value:function(){for(let e=1;e<this.numSubsets;e++)for(let t=0;t<e;t++)this.subsetMinimums.set(t,e,this.subsetMinimums.get(e,t)),this.subsetMaximums.set(t,e,this.subsetMaximums.get(e,t))}},{key:"getMinNonZeroInTile",value:function(){return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,0,0,this.numSubsets,this.numSubsets)}},{key:"getMaxNonZeroInTile",value:function(){return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,0,0,this.numSubsets,this.numSubsets)}}])}();const Px=e=>{let t;switch(e&&e.toLowerCase()){case"mean":t=Ll;break;case"sum":t=Wl;break;case"variance":t=Vs;break;case"deviation":t=Gs;break;default:t=Ll,console.warn("Encountered an unsupported selectedRowsAggregationMode option.")}return t},Cx=(e,t)=>e.reduce((e,n)=>e+(Array.isArray(n)&&t?n.length:1),0),Ax=e=>{switch(e.type){case"heatmap":case"horizontal-1d-heatmap":case"horizontal-bar":case"horizontal-line":case"horizontal-point":case"vertical-1d-heatmap":case"vertical-bar":case"vertical-line":case"vertical-point":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":case"horizontal-multivec":return!0;case"combined":return e.contents.map(e=>Ax(e)).reduce(KT,!1);default:return!1}};const Mx=(e,t,n)=>{var r;let i,o=t;return n?i=n:(i=t,o=Object.values(e.state.views)[0].uid),null==(r=e.tiledPlots[o].trackRenderer)?void 0:r.getTrackObject(i)},Ix=(e,t)=>e.tiledPlots[t].trackRenderer;var Rx,Dx,Nx={},jx=Object.prototype.toString,Lx=function(e){var t=jx.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===jx.call(e.callee)),n};var Bx=Array.prototype.slice,Fx=Lx,zx=Object.keys,Hx=zx?function(e){return zx(e)}:function(){if(Dx)return Rx;var e;if(Dx=1,!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Lx,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=e.constructor;return t&&t.prototype===e},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var e in window)try{if(!c["$"+e]&&t.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{l(window[e])}catch{return!0}}catch{return!0}return!1}();e=function(e){var i=null!==e&&"object"==typeof e,c="[object Function]"===n.call(e),h=r(e),p=i&&"[object String]"===n.call(e),f=[];if(!i&&!c&&!h)throw new TypeError("Object.keys called on a non-object");var d=a&&c;if(p&&e.length>0&&!t.call(e,0))for(var m=0;m<e.length;++m)f.push(String(m));if(h&&e.length>0)for(var g=0;g<e.length;++g)f.push(String(g));else for(var y in e)(!d||"prototype"!==y)&&t.call(e,y)&&f.push(String(y));if(o)for(var v=function(e){if(typeof window>"u"||!u)return l(e);try{return l(e)}catch{return!1}}(e),b=0;b<s.length;++b)(!v||"constructor"!==s[b])&&t.call(e,s[b])&&f.push(s[b]);return f}}return Rx=e}(),Ux=Object.keys;Hx.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return Fx(e)?Ux(Bx.call(e)):Ux(e)})}else Object.keys=Hx;return Object.keys||Hx};var Vx=Hx,Gx=Object.defineProperty||!1;if(Gx)try{Gx({},"a",{value:1})}catch{Gx=!1}var Xx=Gx,Wx=SyntaxError,Yx=TypeError,qx=Object.getOwnPropertyDescriptor;if(qx)try{qx([],"length")}catch{qx=null}var $x=qx,Kx=Xx,Zx=Wx,Qx=Yx,Jx=$x,eE=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new Qx("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new Qx("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Qx("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Qx("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Qx("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Qx("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],s=!!Jx&&Jx(e,t);if(Kx)Kx(e,t,{configurable:null===o&&s?s.configurable:!o,enumerable:null===r&&s?s.enumerable:!r,value:n,writable:null===i&&s?s.writable:!i});else{if(!a&&(r||i||o))throw new Zx("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}},tE=Xx,nE=function(){return!!tE};nE.hasArrayLengthDefineBug=function(){if(!tE)return null;try{return 1!==tE([],"length",{value:1}).length}catch{return!0}};var rE=nE,iE=Vx,oE="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),aE=Object.prototype.toString,sE=Array.prototype.concat,lE=eE,cE=rE(),uE=function(e,t,n,r){if(t in e)if(!0===r){if(e[t]===n)return}else if(!function(e){return"function"==typeof e&&"[object Function]"===aE.call(e)}(r)||!r())return;cE?lE(e,t,n,!0):lE(e,t,n)},hE=function(e,t){var n=arguments.length>2?arguments[2]:{},r=iE(t);oE&&(r=sE.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)uE(e,r[i],t[r[i]],n[r[i]])};hE.supportsDescriptors=!!cE;var pE,fE,dE,mE,gE,yE,vE=hE,bE={exports:{}},_E=Object,wE=Error,TE=EvalError,xE=RangeError,EE=ReferenceError,SE=URIError,kE=Math.abs,OE=Math.floor,PE=Math.max,CE=Math.min,AE=Math.pow,ME=Math.round,IE=Number.isNaN||function(e){return e!==e},RE=IE,DE=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var r in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0};function NE(){if(fE)return pE;fE=1;var e=typeof Symbol<"u"&&Symbol,t=DE;return pE=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}}function jE(){return mE||(mE=1,dE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),dE}function LE(){return yE?gE:(yE=1,gE=_E.getPrototypeOf||null)}var BE,FE,zE,HE,UE=Object.prototype.toString,VE=Math.max,GE=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n},XE=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==UE.apply(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=function(e,t){for(var n=[],r=t,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n}(arguments,1),i=VE(0,t.length-r.length),o=[],a=0;a<i;a++)o[a]="$"+a;if(n=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(o,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof n){var i=t.apply(this,GE(r,arguments));return Object(i)===i?i:this}return t.apply(e,GE(r,arguments))}),t.prototype){var s=function(){};s.prototype=t.prototype,n.prototype=new s,s.prototype=null}return n},WE=Function.prototype.bind||XE,YE=Function.prototype.call,qE=Function.prototype.apply,$E=qE,KE=YE,ZE=typeof Reflect<"u"&&Reflect&&Reflect.apply||WE.call(KE,$E),QE=WE,JE=Yx,eS=YE,tS=ZE,nS=function(e){if(e.length<1||"function"!=typeof e[0])throw new JE("a function is required");return tS(QE,eS,e)};var rS,iS=Function.prototype.call,oS=Object.prototype.hasOwnProperty,aS=WE.call(iS,oS),sS=_E,lS=wE,cS=TE,uS=xE,hS=EE,pS=Wx,fS=Yx,dS=SE,mS=kE,gS=OE,yS=PE,vS=CE,bS=AE,_S=ME,wS=function(e){return RE(e)||0===e?e:e<0?-1:1},TS=Function,xS=function(e){try{return TS('"use strict"; return ('+e+").constructor;")()}catch{}},ES=$x,SS=Xx,kS=function(){throw new fS},OS=ES?function(){try{return kS}catch{try{return ES(arguments,"callee").get}catch{return kS}}}():kS,PS=NE()(),CS=function(){if(HE)return zE;HE=1;var e=jE(),t=LE(),n=function(){if(FE)return BE;FE=1;var e,t=nS,n=$x;try{e=[].__proto__===Array.prototype}catch(a){if(!a||"object"!=typeof a||!("code"in a)||"ERR_PROTO_ACCESS"!==a.code)throw a}var r=!!e&&n&&n(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return BE=r&&"function"==typeof r.get?t([r.get]):"function"==typeof o&&function(e){return o(null==e?e:i(e))}}();return zE=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:n?function(e){return n(e)}:null}(),AS=LE(),MS=jE(),IS=qE,RS=YE,DS={},NS=typeof Uint8Array>"u"||!CS?rS:CS(Uint8Array),jS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?rS:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?rS:ArrayBuffer,"%ArrayIteratorPrototype%":PS&&CS?CS([][Symbol.iterator]()):rS,"%AsyncFromSyncIteratorPrototype%":rS,"%AsyncFunction%":DS,"%AsyncGenerator%":DS,"%AsyncGeneratorFunction%":DS,"%AsyncIteratorPrototype%":DS,"%Atomics%":typeof Atomics>"u"?rS:Atomics,"%BigInt%":typeof BigInt>"u"?rS:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?rS:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?rS:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?rS:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":lS,"%eval%":eval,"%EvalError%":cS,"%Float16Array%":typeof Float16Array>"u"?rS:Float16Array,"%Float32Array%":typeof Float32Array>"u"?rS:Float32Array,"%Float64Array%":typeof Float64Array>"u"?rS:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?rS:FinalizationRegistry,"%Function%":TS,"%GeneratorFunction%":DS,"%Int8Array%":typeof Int8Array>"u"?rS:Int8Array,"%Int16Array%":typeof Int16Array>"u"?rS:Int16Array,"%Int32Array%":typeof Int32Array>"u"?rS:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":PS&&CS?CS(CS([][Symbol.iterator]())):rS,"%JSON%":"object"==typeof JSON?JSON:rS,"%Map%":typeof Map>"u"?rS:Map,"%MapIteratorPrototype%":typeof Map>"u"||!PS||!CS?rS:CS((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":sS,"%Object.getOwnPropertyDescriptor%":ES,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?rS:Promise,"%Proxy%":typeof Proxy>"u"?rS:Proxy,"%RangeError%":uS,"%ReferenceError%":hS,"%Reflect%":typeof Reflect>"u"?rS:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?rS:Set,"%SetIteratorPrototype%":typeof Set>"u"||!PS||!CS?rS:CS((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?rS:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":PS&&CS?CS(""[Symbol.iterator]()):rS,"%Symbol%":PS?Symbol:rS,"%SyntaxError%":pS,"%ThrowTypeError%":OS,"%TypedArray%":NS,"%TypeError%":fS,"%Uint8Array%":typeof Uint8Array>"u"?rS:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?rS:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?rS:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?rS:Uint32Array,"%URIError%":dS,"%WeakMap%":typeof WeakMap>"u"?rS:WeakMap,"%WeakRef%":typeof WeakRef>"u"?rS:WeakRef,"%WeakSet%":typeof WeakSet>"u"?rS:WeakSet,"%Function.prototype.call%":RS,"%Function.prototype.apply%":IS,"%Object.defineProperty%":SS,"%Object.getPrototypeOf%":AS,"%Math.abs%":mS,"%Math.floor%":gS,"%Math.max%":yS,"%Math.min%":vS,"%Math.pow%":bS,"%Math.round%":_S,"%Math.sign%":wS,"%Reflect.getPrototypeOf%":MS};if(CS)try{null.error}catch(re){var LS=CS(CS(re));jS["%Error.prototype%"]=LS}var BS=function e(t){var n;if("%AsyncFunction%"===t)n=xS("async function () {}");else if("%GeneratorFunction%"===t)n=xS("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=xS("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&CS&&(n=CS(i.prototype))}return jS[t]=n,n},FS={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},zS=WE,HS=aS,US=zS.call(RS,Array.prototype.concat),VS=zS.call(IS,Array.prototype.splice),GS=zS.call(RS,String.prototype.replace),XS=zS.call(RS,String.prototype.slice),WS=zS.call(RS,RegExp.prototype.exec),YS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qS=/\\(\\)?/g,$S=function(e,t){var n,r=e;if(HS(FS,r)&&(r="%"+(n=FS[r])[0]+"%"),HS(jS,r)){var i=jS[r];if(i===DS&&(i=BS(r)),typeof i>"u"&&!t)throw new fS("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new pS("intrinsic "+e+" does not exist!")},KS=function(e,t){if("string"!=typeof e||0===e.length)throw new fS("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new fS('"allowMissing" argument must be a boolean');if(null===WS(/^%?[^%]*%?$/,e))throw new pS("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=XS(e,0,1),n=XS(e,-1);if("%"===t&&"%"!==n)throw new pS("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new pS("invalid intrinsic syntax, expected opening `%`");var r=[];return GS(e,YS,function(e,t,n,i){r[r.length]=n?GS(i,qS,"$1"):t||e}),r}(e),r=n.length>0?n[0]:"",i=$S("%"+r+"%",t),o=i.name,a=i.value,s=!1,l=i.alias;l&&(r=l[0],VS(n,US([0,1],l)));for(var c=1,u=!0;c<n.length;c+=1){var h=n[c],p=XS(h,0,1),f=XS(h,-1);if(('"'===p||"'"===p||"`"===p||'"'===f||"'"===f||"`"===f)&&p!==f)throw new pS("property names with quotes must have matching quotes");if(("constructor"===h||!u)&&(s=!0),HS(jS,o="%"+(r+="."+h)+"%"))a=jS[o];else if(null!=a){if(!(h in a)){if(!t)throw new fS("base intrinsic for "+e+" exists, but the property is not available.");return}if(ES&&c+1>=n.length){var d=ES(a,h);a=(u=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[h]}else u=HS(a,h),a=a[h];u&&!s&&(jS[o]=a)}}return a},ZS=KS,QS=eE,JS=rE(),ek=$x,tk=Yx,nk=ZS("%Math.floor%"),rk=function(e,t){if("function"!=typeof e)throw new tk("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||nk(t)!==t)throw new tk("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,i=!0;if("length"in e&&ek){var o=ek(e,"length");o&&!o.configurable&&(r=!1),o&&!o.writable&&(i=!1)}return(r||i||!n)&&(JS?QS(e,"length",t,!0,!0):QS(e,"length",t)),e},ik=WE,ok=qE,ak=ZE,sk=function(){return ak(ik,ok,arguments)};!function(e){var t=rk,n=Xx,r=nS,i=sk;e.exports=function(e){var n=r(arguments),i=e.length-(arguments.length-1);return t(n,1+(i>0?i:0),!0)},n?n(e.exports,"apply",{value:i}):e.exports.apply=i}(bE);var lk=bE.exports,ck=KS,uk=nS,hk=uk([ck("%String.prototype.indexOf%")]),pk=function(e,t){var n=ck(e,!!t);return"function"==typeof n&&hk(e,".prototype.")>-1?uk([n]):n},fk=Vx,dk=DE(),mk=pk,gk=_E,yk=mk("Array.prototype.push"),vk=mk("Object.prototype.propertyIsEnumerable"),bk=dk?gk.getOwnPropertySymbols:null,_k=function(e,t){if(null==e)throw new TypeError("target must be an object");var n=gk(e);if(1===arguments.length)return n;for(var r=1;r<arguments.length;++r){var i=gk(arguments[r]),o=fk(i),a=dk&&(gk.getOwnPropertySymbols||bk);if(a)for(var s=a(i),l=0;l<s.length;++l){var c=s[l];vk(i,c)&&yk(o,c)}for(var u=0;u<o.length;++u){var h=o[u];if(vk(i,h)){var p=i[h];n[h]=p}}}return n},wk=_k,Tk=function(){return!Object.assign||function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return"y"===e[1]}return!1}()?wk:Object.assign},xk=vE,Ek=Tk,Sk=vE,kk=_k,Ok=Tk,Pk=function(){var e=Ek();return xk(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},Ck=lk.apply(Ok()),Ak=function(e,t){return Ck(Object,arguments)};Sk(Ak,{getPolyfill:Ok,implementation:kk,shim:Pk});var Mk,Ik,Rk,Dk,Nk,jk,Lk,Bk,Fk,zk,Hk,Uk,Vk,Gk,Xk=Ak,Wk=IE,Yk=function(e){return("number"==typeof e||"bigint"==typeof e)&&!Wk(e)&&e!==1/0&&e!==-1/0};function qk(){if(Ik)return Mk;Ik=1;var e=kE,t=OE,n=IE,r=Yk;return Mk=function(i){if("number"!=typeof i||n(i)||!r(i))return!1;var o=e(i);return t(o)===o}}function $k(){if(Uk)return Hk;Uk=1;var e=(jk||(jk=1,Nk=typeof Reflect<"u"&&Reflect.setPrototypeOf||null),Nk),t=Bk?Lk:(Bk=1,Lk=_E.setPrototypeOf||null),n=function(){if(zk)return Fk;zk=1;var e=nS,t=$x,n=Yx,r={};try{r.__proto__=null}catch(a){if(!a||"object"!=typeof a||!("code"in a)||"ERR_PROTO_ACCESS"!==a.code)throw a}var i=!("toString"in r),o=t&&t(Object.prototype,"__proto__");return Fk=i&&(!!o&&"function"==typeof o.set&&e([o.set])||function(e,t){if(null==e)throw new n("set Object.prototype.__proto__ called on null or undefined");return e.__proto__=t,t})}(),r=Yx;return Hk=e?function(t,n){if(e(t,n))return t;throw new r("Reflect.setPrototypeOf: failed to set [[Prototype]]")}:t||(n?function(e,t){return n(e,t),e}:null)}const Kk=Os(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Zk="function"==typeof Map&&Map.prototype,Qk=Object.getOwnPropertyDescriptor&&Zk?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Jk=Zk&&Qk&&"function"==typeof Qk.get?Qk.get:null,eO=Zk&&Map.prototype.forEach,tO="function"==typeof Set&&Set.prototype,nO=Object.getOwnPropertyDescriptor&&tO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,rO=tO&&nO&&"function"==typeof nO.get?nO.get:null,iO=tO&&Set.prototype.forEach,oO="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,aO="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,sO="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,lO=Boolean.prototype.valueOf,cO=Object.prototype.toString,uO=Function.prototype.toString,hO=String.prototype.match,pO=String.prototype.slice,fO=String.prototype.replace,dO=String.prototype.toUpperCase,mO=String.prototype.toLowerCase,gO=RegExp.prototype.test,yO=Array.prototype.concat,vO=Array.prototype.join,bO=Array.prototype.slice,_O=Math.floor,wO="function"==typeof BigInt?BigInt.prototype.valueOf:null,TO=Object.getOwnPropertySymbols,xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,EO="function"==typeof Symbol&&"object"==typeof Symbol.iterator,SO="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,kO=Object.prototype.propertyIsEnumerable,OO=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function PO(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||gO.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-_O(-e):_O(e);if(r!==e){var i=String(r),o=pO.call(t,i.length+1);return fO.call(i,n,"$&_")+"."+fO.call(fO.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fO.call(t,n,"$&_")}var CO=Kk,AO=CO.custom,MO=zO(AO)?AO:null,IO={__proto__:null,double:'"',single:"'"},RO={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},DO=function e(t,n,r,i){var o=n||{};if(UO(o,"quoteStyle")&&!UO(IO,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(UO(o,"maxStringLength")&&("number"==typeof o.maxStringLength?o.maxStringLength<0&&o.maxStringLength!==1/0:null!==o.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!UO(o,"customInspect")||o.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(UO(o,"indent")&&null!==o.indent&&"\t"!==o.indent&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(UO(o,"numericSeparator")&&"boolean"!=typeof o.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return XO(t,o);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return s?PO(t,l):l}if("bigint"==typeof t){var c=String(t)+"n";return s?PO(t,c):c}var u=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&"object"==typeof t)return BO(t)?"[Array]":"[Object]";var h=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=vO.call(Array(e.indent+1)," ")}return{base:n,prev:vO.call(Array(t+1),n)}}(o,r);if(typeof i>"u")i=[];else if(GO(i,t)>=0)return"[Circular]";function p(t,n,a){if(n&&(i=bO.call(i)).push(n),a){var s={depth:o.depth};return UO(o,"quoteStyle")&&(s.quoteStyle=o.quoteStyle),e(t,s,r+1,i)}return e(t,o,r+1,i)}if("function"==typeof t&&!FO(t)){var f=function(e){if(e.name)return e.name;var t=hO.call(uO.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),d=ZO(t,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(d.length>0?" { "+vO.call(d,", ")+" }":"")}if(zO(t)){var m=EO?fO.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):xO.call(t);return"object"!=typeof t||EO?m:YO(m)}if(function(e){return!(!e||"object"!=typeof e)&&(typeof HTMLElement<"u"&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var g="<"+mO.call(String(t.nodeName)),y=t.attributes||[],v=0;v<y.length;v++)g+=" "+y[v].name+"="+NO(jO(y[v].value),"double",o);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+mO.call(String(t.nodeName))+">"}if(BO(t)){if(0===t.length)return"[]";var b=ZO(t,p);return h&&!function(e){for(var t=0;t<e.length;t++)if(GO(e[t],"\n")>=0)return!1;return!0}(b)?"["+KO(b,h)+"]":"[ "+vO.call(b,", ")+" ]"}if(function(e){return"[object Error]"===VO(e)&&LO(e)}(t)){var _=ZO(t,p);return"cause"in Error.prototype||!("cause"in t)||kO.call(t,"cause")?0===_.length?"["+String(t)+"]":"{ ["+String(t)+"] "+vO.call(_,", ")+" }":"{ ["+String(t)+"] "+vO.call(yO.call("[cause]: "+p(t.cause),_),", ")+" }"}if("object"==typeof t&&a){if(MO&&"function"==typeof t[MO]&&CO)return CO(t,{depth:u-r});if("symbol"!==a&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!Jk||!e||"object"!=typeof e)return!1;try{Jk.call(e);try{rO.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}(t)){var w=[];return eO&&eO.call(t,function(e,n){w.push(p(n,t,!0)+" => "+p(e,t))}),$O("Map",Jk.call(t),w,h)}if(function(e){if(!rO||!e||"object"!=typeof e)return!1;try{rO.call(e);try{Jk.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}(t)){var T=[];return iO&&iO.call(t,function(e){T.push(p(e,t))}),$O("Set",rO.call(t),T,h)}if(function(e){if(!oO||!e||"object"!=typeof e)return!1;try{oO.call(e,oO);try{aO.call(e,aO)}catch{return!0}return e instanceof WeakMap}catch{}return!1}(t))return qO("WeakMap");if(function(e){if(!aO||!e||"object"!=typeof e)return!1;try{aO.call(e,aO);try{oO.call(e,oO)}catch{return!0}return e instanceof WeakSet}catch{}return!1}(t))return qO("WeakSet");if(function(e){if(!sO||!e||"object"!=typeof e)return!1;try{return sO.call(e),!0}catch{}return!1}(t))return qO("WeakRef");if(function(e){return"[object Number]"===VO(e)&&LO(e)}(t))return YO(p(Number(t)));if(function(e){if(!e||"object"!=typeof e||!wO)return!1;try{return wO.call(e),!0}catch{}return!1}(t))return YO(p(wO.call(t)));if(function(e){return"[object Boolean]"===VO(e)&&LO(e)}(t))return YO(lO.call(t));if(function(e){return"[object String]"===VO(e)&&LO(e)}(t))return YO(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof globalThis<"u"&&t===globalThis)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===VO(e)&&LO(e)}(t)&&!FO(t)){var x=ZO(t,p),E=OO?OO(t)===Object.prototype:t instanceof Object||t.constructor===Object,S=t instanceof Object?"":"null prototype",k=!E&&SO&&Object(t)===t&&SO in t?pO.call(VO(t),8,-1):S?"Object":"",O=(E||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(k||S?"["+vO.call(yO.call([],k||[],S||[]),": ")+"] ":"");return 0===x.length?O+"{}":h?O+"{"+KO(x,h)+"}":O+"{ "+vO.call(x,", ")+" }"}return String(t)};function NO(e,t,n){var r=n.quoteStyle||t,i=IO[r];return i+e+i}function jO(e){return fO.call(String(e),/"/g,"&quot;")}function LO(e){return!SO||!("object"==typeof e&&(SO in e||typeof e[SO]<"u"))}function BO(e){return"[object Array]"===VO(e)&&LO(e)}function FO(e){return"[object RegExp]"===VO(e)&&LO(e)}function zO(e){if(EO)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!xO)return!1;try{return xO.call(e),!0}catch{}return!1}var HO=Object.prototype.hasOwnProperty||function(e){return e in this};function UO(e,t){return HO.call(e,t)}function VO(e){return cO.call(e)}function GO(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function XO(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return XO(pO.call(e,0,t.maxStringLength),t)+r}var i=RO[t.quoteStyle||"single"];return i.lastIndex=0,NO(fO.call(fO.call(e,i,"\\$1"),/[\x00-\x1f]/g,WO),"single",t)}function WO(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+dO.call(t.toString(16))}function YO(e){return"Object("+e+")"}function qO(e){return e+" { ? }"}function $O(e,t,n,r){return e+" ("+t+") {"+(r?KO(n,r):vO.call(n,", "))+"}"}function KO(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+vO.call(e,","+n)+"\n"+t.prev}function ZO(e,t){var n=BO(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=UO(e,i)?t(e[i],e):""}var o,a="function"==typeof TO?TO(e):[];if(EO){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var l in e)UO(e,l)&&(n&&String(Number(l))===l&&l<e.length||EO&&o["$"+l]instanceof Symbol||(gO.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"==typeof TO)for(var c=0;c<a.length;c++)kO.call(e,a[c])&&r.push("["+t(a[c])+"]: "+t(e[a[c]],e));return r}var QO,JO,eP,tP,nP,rP,iP,oP,aP,sP,lP,cP,uP,hP,pP=function(e){return!!e&&("function"==typeof e||"object"==typeof e)},fP=function(e){return"string"==typeof e||"symbol"==typeof e},dP=Yx,mP=DO,gP=pP,yP=fP,vP=function(e,t){if(!gP(e))throw new dP("Assertion failed: Type(O) is not Object");if(!yP(t))throw new dP("Assertion failed: P is not a Property Key, got "+mP(t));return e[t]},bP=KS("%Array%"),_P=!bP.isArray&&pk("Object.prototype.toString"),wP=bP.isArray||function(e){return"[object Array]"===_P(e)},TP=wP,xP={exports:{}};function EP(){if(tP)return eP;tP=1;var e=Yx,t=aS,n={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};return eP=function(r){if(!r||"object"!=typeof r)return!1;for(var i in r)if(t(r,i)&&!n[i])return!1;var o=t(r,"[[Value]]")||t(r,"[[Writable]]"),a=t(r,"[[Get]]")||t(r,"[[Set]]");if(o&&a)throw new e("Property Descriptors may not be both accessor and data descriptors");return!0}}function SP(){if(rP)return nP;rP=1;var e=Xx,t=rE.hasArrayLengthDefineBug(),n=t&&wP,r=pk("Object.prototype.propertyIsEnumerable");return nP=function(i,o,a,s,l,c){if(!e){if(!i(c)||!c["[[Configurable]]"]||!c["[[Writable]]"]||l in s&&r(s,l)!==!!c["[[Enumerable]]"])return!1;var u=c["[[Value]]"];return s[l]=u,o(s[l],u)}return t&&"length"===l&&"[[Value]]"in c&&n(s)&&s.length!==c["[[Value]]"]?(s.length=c["[[Value]]"],s.length===c["[[Value]]"]):(e(s,l,a(c)),!0)}}function kP(){if(sP)return aP;sP=1;var e=Yx,t=EP(),n=(oP||(oP=1,iP=function(e){if(typeof e>"u")return e;var t={};return"[[Value]]"in e&&(t.value=e["[[Value]]"]),"[[Writable]]"in e&&(t.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(t.get=e["[[Get]]"]),"[[Set]]"in e&&(t.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(t.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(t.configurable=!!e["[[Configurable]]"]),t}),iP);return aP=function(r){if(typeof r<"u"&&!t(r))throw new e("Assertion failed: `Desc` must be a Property Descriptor");return n(r)}}function OP(){if(cP)return lP;cP=1;var e=Yx,t=aS,n=EP();return lP=function(r){if(typeof r>"u")return!1;if(!n(r))throw new e("Assertion failed: `Desc` must be a Property Descriptor");return!(!t(r,"[[Value]]")&&!t(r,"[[Writable]]"))}}function PP(){if(hP)return uP;hP=1;var e=IE;return uP=function(t,n){return t===n?0!==t||1/t===1/n:e(t)&&e(n)}}var CP,AP,MP=Function.prototype.toString,IP="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof IP&&"function"==typeof Object.defineProperty)try{CP=Object.defineProperty({},"length",{get:function(){throw AP}}),AP={},IP(function(){throw 42},null,CP)}catch(re){re!==AP&&(IP=null)}else IP=null;var RP=/^\s*class\b/,DP=function(e){try{var t=MP.call(e);return RP.test(t)}catch{return!1}},NP=function(e){try{return!DP(e)&&(MP.call(e),!0)}catch{return!1}},jP=Object.prototype.toString,LP="function"==typeof Symbol&&!!Symbol.toStringTag,BP=!(0 in[,]),FP=function(){return!1};if("object"==typeof document){var zP=document.all;jP.call(zP)===jP.call(document.all)&&(FP=function(e){if((BP||!e)&&(typeof e>"u"||"object"==typeof e))try{var t=jP.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch{}return!1})}var HP,UP,VP,GP,XP,WP=IP?function(e){if(FP(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;try{IP(e,null,CP)}catch(t){if(t!==AP)return!1}return!DP(e)&&NP(e)}:function(e){if(FP(e))return!0;if(!e||"function"!=typeof e&&"object"!=typeof e)return!1;if(LP)return NP(e);if(DP(e))return!1;var t=jP.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&NP(e)},YP=WP,qP=function(e){return!!e};function $P(){if(UP)return HP;UP=1;var e=aS,t=Yx,n=YP,r=qP,i=pP;return HP=function(o){if(!i(o))throw new t("ToPropertyDescriptor requires an object");var a={};if(e(o,"enumerable")&&(a["[[Enumerable]]"]=r(o.enumerable)),e(o,"configurable")&&(a["[[Configurable]]"]=r(o.configurable)),e(o,"value")&&(a["[[Value]]"]=o.value),e(o,"writable")&&(a["[[Writable]]"]=r(o.writable)),e(o,"get")){var s=o.get;if(typeof s<"u"&&!n(s))throw new t("getter must be a function");a["[[Get]]"]=s}if(e(o,"set")){var l=o.set;if(typeof l<"u"&&!n(l))throw new t("setter must be a function");a["[[Set]]"]=l}if((e(a,"[[Get]]")||e(a,"[[Set]]"))&&(e(a,"[[Value]]")||e(a,"[[Writable]]")))throw new t("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return a}}var KP,ZP,QP=KS("%Symbol.species%",!0),JP=Yx,eC=qk(),tC=function(){if(Gk)return Vk;Gk=1;var e=KS("%Array.prototype%"),t=xE,n=Wx,r=Yx,i=qk(),o=(Dk||(Dk=1,Rk=4294967295),Rk),a=$k();return Vk=function(s){if(!i(s)||s<0)throw new r("Assertion failed: `length` must be an integer Number >= 0");if(s>o)throw new t("length is greater than (2**32 - 1)");var l=arguments.length>1?arguments[1]:e,c=[];if(l!==e){if(!a)throw new n("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");a(c,l)}return 0!==s&&(c.length=s),c}}(),nC=vP,rC=TP,iC=function(){if(XP)return xP.exports;XP=1;var e=(JO||(JO=1,QO=KS),QO)("%Reflect.construct%",!0),t=function(){if(GP)return VP;GP=1;var e=Yx,t=EP(),n=SP(),r=kP(),i=OP(),o=fP,a=PP(),s=$P(),l=pP;return VP=function(c,u,h){if(!l(c))throw new e("Assertion failed: Type(O) is not Object");if(!o(u))throw new e("Assertion failed: P is not a Property Key");var p=t(h)?h:s(h);if(!t(p))throw new e("Assertion failed: Desc is not a valid Property Descriptor");return n(i,a,r,c,u,p)}}();try{t({},"",{"[[Get]]":function(){}})}catch{t=null}if(t&&e){var n={},r={};t(r,"length",{"[[Get]]":function(){throw n},"[[Enumerable]]":!0}),xP.exports=function(t){try{e(t,r)}catch(i){return i===n}}}else xP.exports=function(e){return"function"==typeof e&&!!e.prototype};return xP.exports}(),oC=pP,aC=function(e,t){if(!eC(t)||t<0)throw new JP("Assertion failed: length must be an integer >= 0");if(!rC(e))return tC(t);var n=nC(e,"constructor");if(QP&&oC(n)&&(null===(n=nC(n,QP))&&(n=void 0)),typeof n>"u")return tC(t);if(!iC(n))throw new JP("C must be a constructor");return new n(t)},sC=Number.MAX_SAFE_INTEGER||9007199254740991,lC=pk,cC=Yx,uC=TP,hC=KS("%Reflect.apply%",!0)||lC("Function.prototype.apply"),pC=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!uC(n))throw new cC("Assertion failed: optional `argumentsList`, if provided, must be a List");return hC(e,t,n)},fC=Yx,dC=aS,mC=EP(),gC=function(e){if(typeof e>"u")return!1;if(!mC(e))throw new fC("Assertion failed: `Desc` must be a Property Descriptor");return!(!dC(e,"[[Get]]")&&!dC(e,"[[Set]]"))};function yC(){return ZP||(ZP=1,KP=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}),KP}var vC,bC,_C=KS,wC=_C("%Object.preventExtensions%",!0),TC=_C("%Object.isExtensible%",!0),xC=yC(),EC=wC?function(e){return!xC(e)&&TC(e)}:function(e){return!xC(e)},SC=EP(),kC=Yx,OC=gC,PC=OP(),CC=EP(),AC=pP,MC=function(e){return null===e?"Null":typeof e>"u"?"Undefined":AC(e)?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IC=Yx,RC=SP(),DC=function(e,t){return SC(t)&&"[[Enumerable]]"in t&&"[[Configurable]]"in t&&(e.IsAccessorDescriptor(t)||e.IsDataDescriptor(t))},NC=EP(),jC=kP(),LC=gC,BC=OP(),FC=function(e){if(typeof e>"u")return!1;if(!CC(e))throw new kC("Assertion failed: `Desc` must be a Property Descriptor");return!OC(e)&&!PC(e)},zC=fP,HC=PP(),UC=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":MC(e)},VC=pP,GC=$x,XC=Wx,WC=Yx,YC=EP(),qC=gC,$C=EC,KC=fP,ZC=$P(),QC=PP(),JC=function(e,t,n,r,i){var o,a,s=UC(e);if(typeof e<"u"&&!VC(e))throw new IC("Assertion failed: O must be undefined or an Object");if(!zC(t))throw new IC("Assertion failed: P must be a Property Key");if("boolean"!=typeof n)throw new IC("Assertion failed: extensible must be a Boolean");if(!NC(r))throw new IC("Assertion failed: Desc must be a Property Descriptor");if(typeof i<"u"&&!NC(i))throw new IC("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof i>"u")return!!n&&("Undefined"===s||(LC(r)?RC(BC,HC,jC,e,t,r):RC(BC,HC,jC,e,t,{"[[Configurable]]":!!r["[[Configurable]]"],"[[Enumerable]]":!!r["[[Enumerable]]"],"[[Value]]":r["[[Value]]"],"[[Writable]]":!!r["[[Writable]]"]})));if(!DC({IsAccessorDescriptor:LC,IsDataDescriptor:BC},i))throw new IC("`current`, when present, must be a fully populated and valid Property Descriptor");if(!i["[[Configurable]]"]){if("[[Configurable]]"in r&&r["[[Configurable]]"]||"[[Enumerable]]"in r&&!HC(r["[[Enumerable]]"],i["[[Enumerable]]"])||!FC(r)&&!HC(LC(r),LC(i)))return!1;if(LC(i)){if("[[Get]]"in r&&!HC(r["[[Get]]"],i["[[Get]]"])||"[[Set]]"in r&&!HC(r["[[Set]]"],i["[[Set]]"]))return!1}else if(!i["[[Writable]]"]&&("[[Writable]]"in r&&r["[[Writable]]"]||"[[Value]]"in r&&!HC(r["[[Value]]"],i["[[Value]]"])))return!1}return"Undefined"===s||(BC(i)&&LC(r)?(o=("[[Configurable]]"in r?r:i)["[[Configurable]]"],a=("[[Enumerable]]"in r?r:i)["[[Enumerable]]"],RC(BC,HC,jC,e,t,{"[[Configurable]]":!!o,"[[Enumerable]]":!!a,"[[Get]]":("[[Get]]"in r?r:i)["[[Get]]"],"[[Set]]":("[[Set]]"in r?r:i)["[[Set]]"]})):LC(i)&&BC(r)?(o=("[[Configurable]]"in r?r:i)["[[Configurable]]"],a=("[[Enumerable]]"in r?r:i)["[[Enumerable]]"],RC(BC,HC,jC,e,t,{"[[Configurable]]":!!o,"[[Enumerable]]":!!a,"[[Value]]":("[[Value]]"in r?r:i)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in r?r:i)["[[Writable]]"]})):RC(BC,HC,jC,e,t,r))},eA=pP,tA=Yx,nA=fP,rA=function(e,t,n){if(!eA(e))throw new WC("Assertion failed: O must be an Object");if(!KC(t))throw new WC("Assertion failed: P must be a Property Key");if(!YC(n))throw new WC("Assertion failed: Desc must be a Property Descriptor");if(!GC){if(qC(n))throw new XC("This environment does not support accessor property descriptors.");var r=!(t in e)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,i=t in e&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(r||i)return e[t]=n["[[Value]]"],QC(e[t],n["[[Value]]"]);throw new XC("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var o=GC(e,t),a=o&&ZC(o),s=$C(e);return JC(e,t,s,n,a)},iA=pP,oA=Yx,aA=function(e,t,n){if(!iA(e))throw new tA("Assertion failed: Type(O) is not Object");if(!nA(t))throw new tA("Assertion failed: P is not a Property Key");return rA(e,t,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0})},sA=pP,lA=fP,cA=function(e,t,n){if(!sA(e))throw new oA("Assertion failed: Type(O) is not Object");if(!lA(t))throw new oA("Assertion failed: P is not a Property Key");if(!aA(e,t,n))throw new oA("unable to create data property")},uA=Yx,hA=pP,pA=fP,fA=function(e,t){if(!hA(e))throw new uA("Assertion failed: `O` must be an Object");if(!pA(t))throw new uA("Assertion failed: `P` must be a Property Key");return t in e};var dA,mA,gA=DE,yA=function(){return gA()&&!!Symbol.toStringTag};function vA(){if(mA)return dA;mA=1;var e=pk,t=e("Date.prototype.getDay"),n=e("Object.prototype.toString"),r=yA();return dA=function(e){return"object"==typeof e&&null!==e&&(r?function(e){try{return t(e),!0}catch{return!1}}(e):"[object Date]"===n(e))}}var bA,_A={exports:{}},wA=pk,TA=yA(),xA=aS,EA=$x;if(TA){var SA=wA("RegExp.prototype.exec"),kA={},OA=function(){throw kA},PA={toString:OA,valueOf:OA};"symbol"==typeof Symbol.toPrimitive&&(PA[Symbol.toPrimitive]=OA),bA=function(e){if(!e||"object"!=typeof e)return!1;var t=EA(e,"lastIndex");if(!(t&&xA(t,"value")))return!1;try{SA(e,PA)}catch(n){return n===kA}}}else{var CA=wA("Object.prototype.toString");bA=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===CA(e)}}var AA,MA,IA,RA,DA,NA,jA,LA=bA;function BA(){if(MA)return AA;MA=1;var e=LA,t=pk("RegExp.prototype.exec"),n=Yx;return AA=function(r){if(!e(r))throw new n("`regex` must be a RegExp");return function(e){return null!==t(r,e)}}}function FA(){if(IA)return _A.exports;IA=1;var e=pk,t=e("Object.prototype.toString"),n=NE()(),r=BA();if(n){var i=e("Symbol.prototype.toString"),o=r(/^Symbol\(.*\)$/);_A.exports=function(e){if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||"[object Symbol]"!==t(e))return!1;try{return function(e){return"symbol"==typeof e.valueOf()&&o(i(e))}(e)}catch{return!1}}}else _A.exports=function(e){return!1};return _A.exports}function zA(){if(DA)return RA;DA=1;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,t=(bC||(bC=1,vC=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}),vC),n=WP,r=vA(),i=FA();return RA=function(o){if(t(o))return o;var a,s="default";if(arguments.length>1&&(arguments[1]===String?s="string":arguments[1]===Number&&(s="number")),e&&(Symbol.toPrimitive?a=function(e,t){var r=e[t];if(null!==r&&typeof r<"u"){if(!n(r))throw new TypeError(r+" returned for property "+String(t)+" of object "+e+" is not a function");return r}}(o,Symbol.toPrimitive):i(o)&&(a=Symbol.prototype.valueOf)),typeof a<"u"){var l=a.call(o,s);if(t(l))return l;throw new TypeError("unable to convert exotic object to primitive")}return"default"===s&&(r(o)||i(o))&&(s="string"),function(e,r){if(typeof e>"u"||null===e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof r||"number"!==r&&"string"!==r)throw new TypeError('hint must be "string" or "number"');var i,o,a,s="string"===r?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<s.length;++a)if(i=e[s[a]],n(i)&&(o=i.call(e),t(o)))return o;throw new TypeError("No default value")}(o,"default"===s?"number":s)},RA}var HA=Yx,UA=function(e){if(null==e)throw new HA(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e},VA=KS("%String%"),GA=Yx,XA=function(e){if("symbol"==typeof e)throw new GA("Cannot convert a Symbol value to a string");return VA(e)},WA=UA,YA=XA,qA=pk("String.prototype.replace"),$A=/^\s$/.test("\u180e"),KA=$A?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,ZA=$A?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,QA=function(){var e=YA(WA(this));return qA(qA(e,KA,""),ZA,"")},JA=QA,eM="\u180e",tM=function(){return String.prototype.trim&&"\u200b"==="\u200b".trim()&&eM.trim()===eM&&"_\u180e"==="_\u180e".trim()&&"\u180e_"==="\u180e_".trim()?String.prototype.trim:JA},nM=rE(),rM=eE,iM=tM,oM=vE,aM=UA,sM=QA,lM=tM,cM=function(){var e=iM();return String.prototype.trim!==e&&(nM?rM(String.prototype,"trim",e,!0):rM(String.prototype,"trim",e)),e},uM=lk(lM()),hM=function(e){return aM(e),uM(e)};oM(hM,{getPolyfill:lM,implementation:sM,shim:cM});var pM,fM,dM=hM;var mM,gM,yM,vM,bM=Yx,_M=KS("%Number%"),wM=yC(),TM=function(){if(jA)return NA;jA=1;var e=zA();return NA=function(t){return arguments.length>1?e(t,arguments[1]):e(t)},NA}(),xM=function(){if(fM)return pM;fM=1;var e=KS,t=e("%RegExp%"),n=Yx,r=e("%parseInt%"),i=pk,o=BA(),a=i("String.prototype.slice"),s=o(/^0b[01]+$/i),l=o(/^0o[0-7]+$/i),c=o(/^[-+]0x[0-9a-f]+$/i),u=o(new t("["+["\x85","\u200b","\ufffe"].join("")+"]","g")),h=dM;return pM=function e(t){if("string"!=typeof t)throw new n("Assertion failed: `argument` is not a String");if(s(t))return+r(a(t,2),2);if(l(t))return+r(a(t,2),8);if(u(t)||c(t))return NaN;var i=h(t);return i!==t?e(i):+t}}(),EM=OE,SM=function(e){return"bigint"==typeof e?e:EM(e)},kM=Yx,OM=function(e){var t=wM(e)?e:TM(e,_M);if("symbol"==typeof t)throw new bM("Cannot convert a Symbol value to a number");if("bigint"==typeof t)throw new bM("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof t?xM(t):+t},PM=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new kM("argument must be a Number or a BigInt");var t=e<0?-SM(-e):SM(e);return 0===t?0:t},CM=IE,AM=Yk,MM=function(e){var t=OM(e);return CM(t)||0===t?0:AM(t)?PM(t):t},IM=sC,RM=MM,DM=function(e){var t=RM(e);return t<=0?0:t>IM?IM:t},NM=Yx,jM=vP,LM=DM,BM=pP,FM=function(e){if(!BM(e))throw new NM("Assertion failed: `obj` must be an Object");return LM(jM(e,"length"))},zM=Yx,HM=sC,UM=pC,VM=cA,GM=vP,XM=fA,WM=TP,YM=FM,qM=XA,$M=_E,KM=UA,ZM=function(e){return KM(e),$M(e)},QM=aC,JM=function e(t,n,r,i,o){var a;arguments.length>5&&(a=arguments[5]);for(var s=i,l=0;l<r;){var c=qM(l);if(!0===XM(n,c)){var u=GM(n,c);if(typeof a<"u"){if(arguments.length<=6)throw new zM("Assertion failed: thisArg is required when mapperFunction is provided");u=UM(a,arguments[6],[u,l,n])}var h=!1;if(o>0&&(h=WM(u)),h){s=e(t,u,YM(u),s,o-1)}else{if(s>=HM)throw new zM("index too large");VM(t,qM(s),u),s+=1}}l+=1}return s},eI=vP,tI=MM,nI=DM,rI=ZM,iI=function(){var e=rI(this),t=nI(eI(e,"length")),n=1;arguments.length>0&&typeof arguments[0]<"u"&&(n=tI(arguments[0]));var r=QM(e,0);return JM(r,e,t,0,n),r},oI=iI,aI=function(){return Array.prototype.flat||oI};var sI=vE,lI=lk,cI=iI,uI=aI,hI=uI(),pI=function(){if(vM)return yM;vM=1;var e=vE,t=function(){if(gM)return mM;gM=1;var e=aS,t="function"==typeof Symbol&&"symbol"==typeof Symbol.unscopables,n=t&&Array.prototype[Symbol.unscopables],r=TypeError;return mM=function(i){if("string"!=typeof i||!i)throw new r("method must be a non-empty string");if(!e(Array.prototype,i))throw new r("method must be on Array.prototype");t&&n&&(n[i]=!0)}}(),n=aI;return yM=function(){var r=n();return e(Array.prototype,{flat:r},{flat:function(){return Array.prototype.flat!==r}}),t("flat"),r}}(),fI=lI(hI);sI(fI,{getPolyfill:uI,implementation:cI,shim:pI});var dI=fI,mI={}.hasOwnProperty,gI=Function.prototype.call,yI=gI.bind?gI.bind(mI):function(e,t){return gI.call(mI,e,t)},vI={},bI={exports:{}},_I=function(e){return e!==e},wI=function(e,t){return 0===e&&0===t?1/e===1/t:!!(e===t||_I(e)&&_I(t))},TI=wI,xI=function(){return"function"==typeof Object.is?Object.is:TI},EI=xI,SI=vE,kI=vE,OI=wI,PI=xI,CI=function(){var e=EI();return SI(Object,{is:e},{is:function(){return Object.is!==e}}),e},AI=lk(PI(),Object);kI(AI,{getPolyfill:PI,implementation:OI,shim:CI});var MI=AI;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e,t))return!0;if(!e||!t||"object"!==o(e)||"object"!==o(t))return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;i.sort(),a.sort();for(var s=0;s<i.length;s+=1)if(!(0,r.default)(t,i[s])||!(0,n.default)(e[i[s]],t[i[s]]))return!1;return!0};var n=i(MI),r=i(aS);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default}(bI,bI.exports);var II=bI.exports,RI=UA,DI=pk,NI=DI("Object.prototype.propertyIsEnumerable"),jI=DI("Array.prototype.push"),LI=function(e){var t=RI(e),n=[];for(var r in t)NI(t,r)&&jI(n,[r,t[r]]);return n},BI=LI,FI=function(){return"function"==typeof Object.entries?Object.entries:BI},zI=FI,HI=vE,UI=vE,VI=LI,GI=FI,XI=function(){var e=zI();return HI(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e},WI=lk(GI(),Object);UI(WI,{getPolyfill:GI,implementation:VI,shim:XI});var YI=WI,qI=function(){return"string"==typeof function(){}.name},$I=Object.getOwnPropertyDescriptor;if($I)try{$I([],"length")}catch{$I=null}qI.functionsHaveConfigurableNames=function(){if(!qI()||!$I)return!1;var e=$I(function(){},"name");return!!e&&!!e.configurable};var KI=Function.prototype.bind;qI.boundFunctionsHaveNames=function(){return qI()&&"function"==typeof KI&&""!==function(){}.bind().name};var ZI=qI,QI=WP,JI=aS,eR=ZI(),tR=pk,nR=tR("Function.prototype.toString"),rR=tR("String.prototype.match"),iR=tR("Object.prototype.toString"),oR=/^class /,aR=/\s*function\s+([^(\s]*)\s*/,sR=!(0 in[,]),lR=Function.prototype,cR=function(){return!1};if("object"==typeof document){var uR=document.all;iR(uR)===iR(document.all)&&(cR=function(e){if((sR||!e)&&(typeof e>"u"||"object"==typeof e))try{var t=iR(e);return("[object HTMLAllCollection]"===t||"[object Object]"===t)&&null==e("")}catch{}return!1})}var hR=function(){if(cR(this)||!function(e){if(QI(e)||"function"!=typeof e)return!1;try{return!!rR(nR(e),oR)}catch{}return!1}(this)&&!QI(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(eR&&JI(this,"name"))return this.name;if(this===lR)return"";var e=nR(this),t=rR(e,aR);return t&&t[1]},pR=hR,fR=function(){return pR},dR=vE.supportsDescriptors,mR=ZI(),gR=fR,yR=Object.defineProperty,vR=TypeError,bR=vE,_R=hR,wR=fR,TR=function(){var e=gR();if(mR)return e;if(!dR)throw new vR("Shimming Function.prototype.name support requires ES5 property descriptor support.");var t=Function.prototype;return yR(t,"name",{configurable:!0,enumerable:!1,get:function(){var n=e.call(this);return this!==t&&yR(this,"name",{configurable:!0,enumerable:!1,value:n,writable:!1}),n}}),e},xR=lk(_R);bR(xR,{getPolyfill:wR,implementation:_R,shim:TR});var ER=xR,SR={},kR=function(e,t){return(kR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function OR(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}kR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var PR=function(){return PR=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},PR.apply(this,arguments)};function CR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function AR(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function MR(e,t){return function(n,r){t(n,r,e)}}function IR(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p=!1,f=n.length-1;f>=0;f--){var d={};for(var m in r)d[m]="access"===m?{}:r[m];for(var m in r.access)d.access[m]=r.access[m];d.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,n[f])("accessor"===l?{get:h.get,set:h.set}:h[c],d);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===l?i.unshift(s):h[c]=s)}u&&Object.defineProperty(u,r.name,h),p=!0}function RR(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function DR(e){return"symbol"==typeof e?e:"".concat(e)}function NR(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function jR(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function LR(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})}function BR(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var FR=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function zR(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&FR(t,e,n)}function HR(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function UR(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function VR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(UR(arguments[t]));return e}function GR(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function XR(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function WR(e){return this instanceof WR?(this.v=e,this):new WR(e)}function YR(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{!function(e){e.value instanceof WR?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(i[e](t))}catch(n){u(o[0][3],n)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function qR(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:WR(e[r](t)),done:!1}:i?i(t):t}:i}}function $R(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=HR(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function KR(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var ZR=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},QR=function(e){return(QR=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)};function JR(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=QR(e),r=0;r<n.length;r++)"default"!==n[r]&&FR(t,e,n[r]);return ZR(t,e),t}function eD(e){return e&&e.__esModule?e:{default:e}}function tD(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function nD(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function rD(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function iD(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var oD="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function aD(e){function t(t){e.error=e.hasError?new oD(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function i(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(e){return t(e),i()})}else r|=1}catch(a){t(a)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function sD(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,o){return n?t?".jsx":".js":!r||i&&o?r+i+"."+o.toLowerCase()+"js":e}):e}const lD={__extends:OR,__assign:PR,__rest:CR,__decorate:AR,__param:MR,__esDecorate:IR,__runInitializers:RR,__propKey:DR,__setFunctionName:NR,__metadata:jR,__awaiter:LR,__generator:BR,__createBinding:FR,__exportStar:zR,__values:HR,__read:UR,__spread:VR,__spreadArrays:GR,__spreadArray:XR,__await:WR,__asyncGenerator:YR,__asyncDelegator:qR,__asyncValues:$R,__makeTemplateObject:KR,__importStar:JR,__importDefault:eD,__classPrivateFieldGet:tD,__classPrivateFieldSet:nD,__classPrivateFieldIn:rD,__addDisposableResource:iD,__disposeResources:aD,__rewriteRelativeImportExtension:sD},cD=Os(Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:iD,get __assign(){return PR},__asyncDelegator:qR,__asyncGenerator:YR,__asyncValues:$R,__await:WR,__awaiter:LR,__classPrivateFieldGet:tD,__classPrivateFieldIn:rD,__classPrivateFieldSet:nD,__createBinding:FR,__decorate:AR,__disposeResources:aD,__esDecorate:IR,__exportStar:zR,__extends:OR,__generator:BR,__importDefault:eD,__importStar:JR,__makeTemplateObject:KR,__metadata:jR,__param:MR,__propKey:DR,__read:UR,__rest:CR,__rewriteRelativeImportExtension:sD,__runInitializers:RR,__setFunctionName:NR,__spread:VR,__spreadArray:XR,__spreadArrays:GR,__values:HR,default:lD},Symbol.toStringTag,{value:"Module"})));var uD,hD={};var pD,fD={},dD={};function mD(){if(pD)return dD;pD=1,Object.defineProperty(dD,"__esModule",{value:!0}),dD.flatten=void 0;var e=cD;dD.default={xml:!1,decodeEntities:!0};var t={_useHtmlParser2:!0,xmlMode:!0};return dD.flatten=function(n){return n?.xml?"boolean"==typeof n.xml?t:e.__assign(e.__assign({},t),n.xml):n??void 0},dD}var gD,yD={},vD={};!function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"}(gD||(gD={}));var bD;!function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"}(bD||(bD={}));const _D=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,wD=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,TD=new Map([[126,bD.Element],[94,bD.Start],[36,bD.End],[42,bD.Any],[33,bD.Not],[124,bD.Hyphen]]),xD=new Set(["has","not","matches","is","where","host","host-context"]);function ED(e){switch(e.type){case gD.Adjacent:case gD.Child:case gD.Descendant:case gD.Parent:case gD.Sibling:case gD.ColumnCombinator:return!0;default:return!1}}const SD=new Set(["contains","icontains"]);function kD(e,t,n){const r=parseInt(t,16)-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)}function OD(e){return e.replace(wD,kD)}function PD(e){return 39===e||34===e}function CD(e){return 32===e||9===e||10===e||12===e||13===e}function AD(e,t,n){let r=[];function i(e){const r=t.slice(n+e).match(_D);if(!r)throw new Error(`Expected name, found ${t.slice(n)}`);const[i]=r;return n+=e+i.length,OD(i)}function o(e){for(n+=e;n<t.length&&CD(t.charCodeAt(n));)n++}function a(){const e=n+=1;let r=1;for(;r>0&&n<t.length;n++)40!==t.charCodeAt(n)||s(n)?41===t.charCodeAt(n)&&!s(n)&&r--:r++;if(r)throw new Error("Parenthesis not matched");return OD(t.slice(e,n-1))}function s(e){let n=0;for(;92===t.charCodeAt(--e);)n++;return 1===(1&n)}function l(){if(r.length>0&&ED(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function c(e){r.length>0&&r[r.length-1].type===gD.Descendant?r[r.length-1].type=e:(l(),r.push({type:e}))}function u(e,t){r.push({type:gD.Attribute,name:e,action:t,value:i(1),namespace:null,ignoreCase:"quirks"})}function h(){if(r.length&&r[r.length-1].type===gD.Descendant&&r.pop(),0===r.length)throw new Error("Empty sub-selector");e.push(r)}if(o(0),t.length===n)return n;e:for(;n<t.length;){const e=t.charCodeAt(n);switch(e){case 32:case 9:case 10:case 12:case 13:(0===r.length||r[0].type!==gD.Descendant)&&(l(),r.push({type:gD.Descendant})),o(1);break;case 62:c(gD.Child),o(1);break;case 60:c(gD.Parent),o(1);break;case 126:c(gD.Sibling),o(1);break;case 43:c(gD.Adjacent),o(1);break;case 46:u("class",bD.Element);break;case 35:u("id",bD.Equals);break;case 91:{o(1);let e,a=null;124===t.charCodeAt(n)?e=i(1):t.startsWith("*|",n)?(a="*",e=i(2)):(e=i(0),124===t.charCodeAt(n)&&61!==t.charCodeAt(n+1)&&(a=e,e=i(1))),o(0);let l=bD.Exists;const c=TD.get(t.charCodeAt(n));if(c){if(l=c,61!==t.charCodeAt(n+1))throw new Error("Expected `=`");o(2)}else 61===t.charCodeAt(n)&&(l=bD.Equals,o(1));let u="",h=null;if("exists"!==l){if(PD(t.charCodeAt(n))){const e=t.charCodeAt(n);let r=n+1;for(;r<t.length&&(t.charCodeAt(r)!==e||s(r));)r+=1;if(t.charCodeAt(r)!==e)throw new Error("Attribute value didn't end");u=OD(t.slice(n+1,r)),n=r+1}else{const e=n;for(;n<t.length&&(!CD(t.charCodeAt(n))&&93!==t.charCodeAt(n)||s(n));)n+=1;u=OD(t.slice(e,n))}o(0);const e=32|t.charCodeAt(n);115===e?(h=!1,o(1)):105===e&&(h=!0,o(1))}if(93!==t.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const p={type:gD.Attribute,name:e,action:l,value:u,namespace:a,ignoreCase:h};r.push(p);break}case 58:{if(58===t.charCodeAt(n+1)){r.push({type:gD.PseudoElement,name:i(2).toLowerCase(),data:40===t.charCodeAt(n)?a():null});continue}const e=i(1).toLowerCase();let o=null;if(40===t.charCodeAt(n))if(xD.has(e)){if(PD(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${e} cannot be quoted`);if(o=[],n=AD(o,t,n+1),41!==t.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${e} (${t})`);n+=1}else{if(o=a(),SD.has(e)){const e=o.charCodeAt(0);e===o.charCodeAt(o.length-1)&&PD(e)&&(o=o.slice(1,-1))}o=OD(o)}r.push({type:gD.Pseudo,name:e,data:o});break}case 44:h(),r=[],o(1);break;default:{if(t.startsWith("/*",n)){const e=t.indexOf("*/",n+2);if(e<0)throw new Error("Comment was not terminated");n=e+2,0===r.length&&o(0);break}let a,s=null;if(42===e)n+=1,a="*";else if(124===e){if(a="",124===t.charCodeAt(n+1)){c(gD.ColumnCombinator),o(2);break}}else{if(!_D.test(t.slice(n)))break e;a=i(0)}124===t.charCodeAt(n)&&124!==t.charCodeAt(n+1)&&(s=a,42===t.charCodeAt(n+1)?(a="*",n+=2):a=i(1)),r.push("*"===a?{type:gD.Universal,namespace:s}:{type:gD.Tag,name:a,namespace:s})}}}return h(),n}const MD=["\\",'"'],ID=[...MD,"(",")"],RD=new Set(MD.map(e=>e.charCodeAt(0))),DD=new Set(ID.map(e=>e.charCodeAt(0))),ND=new Set([...ID,"~","^","$","*","+","!","|",":","[","]"," ","."].map(e=>e.charCodeAt(0)));function jD(e){return e.map(e=>e.map(LD).join("")).join(", ")}function LD(e,t,n){switch(e.type){case gD.Child:return 0===t?"> ":" > ";case gD.Parent:return 0===t?"< ":" < ";case gD.Sibling:return 0===t?"~ ":" ~ ";case gD.Adjacent:return 0===t?"+ ":" + ";case gD.Descendant:return" ";case gD.ColumnCombinator:return 0===t?"|| ":" || ";case gD.Universal:return"*"===e.namespace&&t+1<n.length&&"name"in n[t+1]?"":`${FD(e.namespace)}*`;case gD.Tag:return BD(e);case gD.PseudoElement:return`::${zD(e.name,ND)}${null===e.data?"":`(${zD(e.data,DD)})`}`;case gD.Pseudo:return`:${zD(e.name,ND)}${null===e.data?"":`(${"string"==typeof e.data?zD(e.data,DD):jD(e.data)})`}`;case gD.Attribute:{if("id"===e.name&&e.action===bD.Equals&&"quirks"===e.ignoreCase&&!e.namespace)return`#${zD(e.value,ND)}`;if("class"===e.name&&e.action===bD.Element&&"quirks"===e.ignoreCase&&!e.namespace)return`.${zD(e.value,ND)}`;const t=BD(e);return e.action===bD.Exists?`[${t}]`:`[${t}${function(e){switch(e){case bD.Equals:return"";case bD.Element:return"~";case bD.Start:return"^";case bD.End:return"$";case bD.Any:return"*";case bD.Not:return"!";case bD.Hyphen:return"|";case bD.Exists:throw new Error("Shouldn't be here")}}(e.action)}="${zD(e.value,RD)}"${null===e.ignoreCase?"":e.ignoreCase?" i":" s"}]`}}}function BD(e){return`${FD(e.namespace)}${zD(e.name,ND)}`}function FD(e){return null!==e?`${"*"===e?"*":zD(e,ND)}|`:""}function zD(e,t){let n=0,r="";for(let i=0;i<e.length;i++)t.has(e.charCodeAt(i))&&(r+=`${e.slice(n,i)}\\${e.charAt(i)}`,n=i+1);return r.length>0?r+e.slice(n):e}const HD=Object.freeze(Object.defineProperty({__proto__:null,get AttributeAction(){return bD},IgnoreCaseMode:{Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1},get SelectorType(){return gD},isTraversal:ED,parse:function(e){const t=[],n=AD(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t},stringify:jD},Symbol.toStringTag,{value:"Module"})),UD=Os(HD);var VD={},GD={},XD={},WD={},YD={};!function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,(n=t=e.ElementType||(e.ElementType={})).Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype",e.isTag=function(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style},e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}(YD);var qD={},$D=Ss&&Ss.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),KD=Ss&&Ss.__assign||function(){return KD=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},KD.apply(this,arguments)};Object.defineProperty(qD,"__esModule",{value:!0}),qD.cloneNode=qD.hasChildren=qD.isDocument=qD.isDirective=qD.isComment=qD.isText=qD.isCDATA=qD.isTag=qD.Element=qD.Document=qD.NodeWithChildren=qD.ProcessingInstruction=qD.Comment=qD.Text=qD.DataNode=qD.Node=void 0;var ZD=YD,QD=new Map([[ZD.ElementType.Tag,1],[ZD.ElementType.Script,1],[ZD.ElementType.Style,1],[ZD.ElementType.Directive,1],[ZD.ElementType.Text,3],[ZD.ElementType.CDATA,4],[ZD.ElementType.Comment,8],[ZD.ElementType.Root,9]]),JD=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){var e;return null!==(e=QD.get(this.type))&&void 0!==e?e:1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),fN(this,e)},e}();qD.Node=JD;var eN=function(e){function t(t,n){var r=e.call(this,t)||this;return r.data=n,r}return $D(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(JD);qD.DataNode=eN;var tN=function(e){function t(t){return e.call(this,ZD.ElementType.Text,t)||this}return $D(t,e),t}(eN);qD.Text=tN;var nN=function(e){function t(t){return e.call(this,ZD.ElementType.Comment,t)||this}return $D(t,e),t}(eN);qD.Comment=nN;var rN=function(e){function t(t,n){var r=e.call(this,ZD.ElementType.Directive,n)||this;return r.name=t,r}return $D(t,e),t}(eN);qD.ProcessingInstruction=rN;var iN=function(e){function t(t,n){var r=e.call(this,t)||this;return r.children=n,r}return $D(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(JD);qD.NodeWithChildren=iN;var oN=function(e){function t(t){return e.call(this,ZD.ElementType.Root,t)||this}return $D(t,e),t}(iN);qD.Document=oN;var aN=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?ZD.ElementType.Script:"style"===t?ZD.ElementType.Style:ZD.ElementType.Tag);var o=e.call(this,i,r)||this;return o.name=t,o.attribs=n,o}return $D(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}})},enumerable:!1,configurable:!0}),t}(iN);function sN(e){return(0,ZD.isTag)(e)}function lN(e){return e.type===ZD.ElementType.CDATA}function cN(e){return e.type===ZD.ElementType.Text}function uN(e){return e.type===ZD.ElementType.Comment}function hN(e){return e.type===ZD.ElementType.Directive}function pN(e){return e.type===ZD.ElementType.Root}function fN(e,t){var n;if(void 0===t&&(t=!1),cN(e))n=new tN(e.data);else if(uN(e))n=new nN(e.data);else if(sN(e)){var r=t?dN(e.children):[],i=new aN(e.name,KD({},e.attribs),r);r.forEach(function(e){return e.parent=i}),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=KD({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=KD({},e["x-attribsPrefix"])),n=i}else if(lN(e)){r=t?dN(e.children):[];var o=new iN(ZD.ElementType.CDATA,r);r.forEach(function(e){return e.parent=o}),n=o}else if(pN(e)){r=t?dN(e.children):[];var a=new oN(r);r.forEach(function(e){return e.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else{if(!hN(e))throw new Error("Not implemented yet: ".concat(e.type));var s=new rN(e.name,e.data);null!=e["x-name"]&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),n=s}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function dN(e){for(var t=e.map(function(e){return fN(e,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}qD.Element=aN,qD.isTag=sN,qD.isCDATA=lN,qD.isText=cN,qD.isComment=uN,qD.isDirective=hN,qD.isDocument=pN,qD.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},qD.cloneNode=fN,function(e){var t=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ss&&Ss.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=YD,i=qD;n(qD,e);var o=/\s+/g,a={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function e(e,t,n){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=e??null,this.options=t??a,this.elementCB=n??null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?r.ElementType.Tag:void 0,o=new i.Element(e,t,void 0,n);this.addNode(o),this.tagStack.push(o)},e.prototype.ontext=function(e){var t=this.options.normalizeWhitespace,n=this.lastNode;if(n&&n.type===r.ElementType.Text)t?n.data=(n.data+e).replace(o," "):n.data+=e,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{t&&(e=e.replace(o," "));var a=new i.Text(e);this.addNode(a),this.lastNode=a}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment)this.lastNode.data+=e;else{var t=new i.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new i.Text(""),t=new i.NodeWithChildren(r.ElementType.CDATA,[e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new i.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=s,e.default=s}(WD);var mN={},gN={},yN={};const vN={Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",amp:"&",AMP:"&",andand:"\u2a55",And:"\u2a53",and:"\u2227",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angmsd:"\u2221",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"\u2a6f",ap:"\u2248",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250c",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252c",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxuL:"\u255b",boxUl:"\u255c",boxUL:"\u255d",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255a",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253c",boxvH:"\u256a",boxVh:"\u256b",boxVH:"\u256c",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251c",boxvR:"\u255e",boxVr:"\u255f",boxVR:"\u2560",bprime:"\u2035",breve:"\u02d8",Breve:"\u02d8",brvbar:"\xa6",bscr:"\ud835\udcb7",Bscr:"\u212c",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsolb:"\u29c5",bsol:"\\",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",cap:"\u2229",Cap:"\u22d2",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",centerdot:"\xb7",CenterDot:"\xb7",cfr:"\ud835\udd20",Cfr:"\u212d",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25cb",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",conint:"\u222e",Conint:"\u222f",ContourIntegral:"\u222e",copf:"\ud835\udd54",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xa9",COPY:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",cross:"\u2717",Cross:"\u2a2f",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",cupbrcap:"\u2a48",cupcap:"\u2a46",CupCap:"\u224d",cup:"\u222a",Cup:"\u22d3",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21a1",dArr:"\u21d3",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21ca",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",diamond:"\u22c4",Diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21d3",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21bd",DownRightTeeVector:"\u295f",DownRightVectorBar:"\u2957",DownRightVector:"\u21c1",DownTeeArrow:"\u21a7",DownTee:"\u22a4",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",Ecirc:"\xca",ecirc:"\xea",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",escr:"\u212f",Escr:"\u2130",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"\u2200",ForAll:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",fscr:"\ud835\udcbb",Fscr:"\u2131",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",gescc:"\u2aa9",ges:"\u2a7e",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"\u226b",Gg:"\u22d9",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2aa5",gl:"\u2277",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gnE:"\u2269",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gt:">",GT:">",Gt:"\u226b",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",harrcir:"\u2948",harr:"\u2194",hArr:"\u21d4",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",hfr:"\ud835\udd25",Hfr:"\u210c",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",hopf:"\ud835\udd59",Hopf:"\u210d",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\ud835\udcbd",Hscr:"\u210b",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",ifr:"\ud835\udd26",Ifr:"\u2111",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",incare:"\u2105",in:"\u2208",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",intcal:"\u22ba",int:"\u222b",Int:"\u222c",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",iscr:"\ud835\udcbe",Iscr:"\u2110",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",Lang:"\u27ea",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",larrb:"\u21e4",larrbfs:"\u291f",larr:"\u2190",Larr:"\u219e",lArr:"\u21d0",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",latail:"\u2919",lAtail:"\u291b",lat:"\u2aab",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lBarr:"\u290e",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27e8",LeftArrowBar:"\u21e4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21d0",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21c3",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTeeArrow:"\u21a4",LeftTee:"\u22a3",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangleBar:"\u29cf",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21bf",LeftVectorBar:"\u2952",LeftVector:"\u21bc",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",lescc:"\u2aa8",les:"\u2a7d",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21c7",ll:"\u226a",Ll:"\u22d8",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoustache:"\u23b0",lmoust:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lnE:"\u2268",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",longleftarrow:"\u27f5",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftrightarrow:"\u27f7",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longmapsto:"\u27fc",longrightarrow:"\u27f6",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\ud835\udcc1",Lscr:"\u2112",lsh:"\u21b0",Lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",lt:"<",LT:"<",Lt:"\u226a",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\xb5",midast:"*",midcir:"\u2af0",mid:"\u2223",middot:"\xb7",minusb:"\u229f",minus:"\u2212",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",mscr:"\ud835\udcc2",Mscr:"\u2133",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266e",naturals:"\u2115",natur:"\u266e",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21d7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nharr:"\u21ae",nhArr:"\u21ce",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlarr:"\u219a",nlArr:"\u21cd",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219a",nLeftarrow:"\u21cd",nleftrightarrow:"\u21ae",nLeftrightarrow:"\u21ce",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",nopf:"\ud835\udd5f",Nopf:"\u2115",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",nprec:"\u2280",npreceq:"\u2aaf\u0338",npre:"\u2aaf\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219b",nrArr:"\u21cf",nrarrw:"\u219d\u0338",nrightarrow:"\u219b",nRightarrow:"\u21cf",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvDash:"\u22ad",nVdash:"\u22ae",nVDash:"\u22af",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21d6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",Ocirc:"\xd4",ocirc:"\xf4",ocir:"\u229a",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",orarr:"\u21bb",Or:"\u2a54",or:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",otimesas:"\u2a36",Otimes:"\u2a37",otimes:"\u2297",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",para:"\xb6",parallel:"\u2225",par:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plus:"+",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",popf:"\ud835\udd61",Popf:"\u2119",pound:"\xa3",prap:"\u2ab7",Pr:"\u2abb",pr:"\u227a",prcue:"\u227c",precapprox:"\u2ab7",prec:"\u227a",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",pre:"\u2aaf",prE:"\u2ab3",precsim:"\u227e",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportional:"\u221d",Proportion:"\u2237",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",qopf:"\ud835\udd62",Qopf:"\u211a",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",quot:'"',QUOT:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",rang:"\u27e9",Rang:"\u27eb",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21a0",rArr:"\u21d2",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",ratail:"\u291a",rAtail:"\u291c",ratio:"\u2236",rationals:"\u211a",rbarr:"\u290d",rBarr:"\u290f",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",Re:"\u211c",rect:"\u25ad",reg:"\xae",REG:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",rfr:"\ud835\udd2f",Rfr:"\u211c",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrowBar:"\u21e5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21d2",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVectorBar:"\u2955",RightDownVector:"\u21c2",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTeeArrow:"\u21a6",RightTee:"\u22a2",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangleBar:"\u29d0",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVectorBar:"\u2954",RightUpVector:"\u21be",RightVectorBar:"\u2953",RightVector:"\u21c0",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoustache:"\u23b1",rmoust:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",ropf:"\ud835\udd63",Ropf:"\u211d",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",rscr:"\ud835\udcc7",Rscr:"\u211b",rsh:"\u21b1",Rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2abc",sc:"\u227b",sccue:"\u227d",sce:"\u2ab0",scE:"\u2ab4",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdotb:"\u22a1",sdot:"\u22c5",sdote:"\u2a66",searhk:"\u2925",searr:"\u2198",seArr:"\u21d8",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",solbar:"\u233f",solb:"\u29c4",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25a1",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squ:"\u25a1",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",sub:"\u2282",Sub:"\u22d0",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subset:"\u2282",Subset:"\u22d0",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succapprox:"\u2ab8",succ:"\u227b",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",sum:"\u2211",Sum:"\u2211",sung:"\u266a",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",sup:"\u2283",Sup:"\u22d1",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",supset:"\u2283",Supset:"\u22d1",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21d9",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",tilde:"\u02dc",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2a31",timesb:"\u22a0",times:"\xd7",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",topbot:"\u2336",topcir:"\u2af1",top:"\u22a4",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",uarr:"\u2191",Uarr:"\u219f",uArr:"\u21d1",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21d1",UpArrowDownArrow:"\u21c5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21d5",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03c5",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTeeArrow:"\u21a5",UpTee:"\u22a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",varr:"\u2195",vArr:"\u21d5",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",vBar:"\u2ae8",Vbar:"\u2aeb",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22a2",vDash:"\u22a8",Vdash:"\u22a9",VDash:"\u22ab",Vdashl:"\u2ae6",veebar:"\u22bb",vee:"\u2228",Vee:"\u22c1",veeeq:"\u225a",vellip:"\u22ee",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",wedge:"\u2227",Wedge:"\u22c0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"\u27f7",xhArr:"\u27fa",Xi:"\u039e",xi:"\u03be",xlarr:"\u27f5",xlArr:"\u27f8",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",xrarr:"\u27f6",xrArr:"\u27f9",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",yuml:"\xff",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",zfr:"\ud835\udd37",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\ud835\udd6b",Zopf:"\u2124",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"},bN={Aacute:"\xc1",aacute:"\xe1",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",AElig:"\xc6",aelig:"\xe6",Agrave:"\xc0",agrave:"\xe0",amp:"&",AMP:"&",Aring:"\xc5",aring:"\xe5",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",brvbar:"\xa6",Ccedil:"\xc7",ccedil:"\xe7",cedil:"\xb8",cent:"\xa2",copy:"\xa9",COPY:"\xa9",curren:"\xa4",deg:"\xb0",divide:"\xf7",Eacute:"\xc9",eacute:"\xe9",Ecirc:"\xca",ecirc:"\xea",Egrave:"\xc8",egrave:"\xe8",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",frac12:"\xbd",frac14:"\xbc",frac34:"\xbe",gt:">",GT:">",Iacute:"\xcd",iacute:"\xed",Icirc:"\xce",icirc:"\xee",iexcl:"\xa1",Igrave:"\xcc",igrave:"\xec",iquest:"\xbf",Iuml:"\xcf",iuml:"\xef",laquo:"\xab",lt:"<",LT:"<",macr:"\xaf",micro:"\xb5",middot:"\xb7",nbsp:"\xa0",not:"\xac",Ntilde:"\xd1",ntilde:"\xf1",Oacute:"\xd3",oacute:"\xf3",Ocirc:"\xd4",ocirc:"\xf4",Ograve:"\xd2",ograve:"\xf2",ordf:"\xaa",ordm:"\xba",Oslash:"\xd8",oslash:"\xf8",Otilde:"\xd5",otilde:"\xf5",Ouml:"\xd6",ouml:"\xf6",para:"\xb6",plusmn:"\xb1",pound:"\xa3",quot:'"',QUOT:'"',raquo:"\xbb",reg:"\xae",REG:"\xae",sect:"\xa7",shy:"\xad",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",szlig:"\xdf",THORN:"\xde",thorn:"\xfe",times:"\xd7",Uacute:"\xda",uacute:"\xfa",Ucirc:"\xdb",ucirc:"\xfb",Ugrave:"\xd9",ugrave:"\xf9",uml:"\xa8",Uuml:"\xdc",uuml:"\xfc",Yacute:"\xdd",yacute:"\xfd",yen:"\xa5",yuml:"\xff"},_N={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};var wN={};var TN=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wN,"__esModule",{value:!0});var xN,EN=TN({0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}),SN=String.fromCodePoint||function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function kN(){if(xN)return yN;xN=1;var e=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yN,"__esModule",{value:!0}),yN.decodeHTML=yN.decodeHTMLStrict=yN.decodeXML=void 0;var t=e(vN),n=e(bN),r=e(_N),i=e(wN),o=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function a(e){var t=l(e);return function(e){return String(e).replace(o,t)}}yN.decodeXML=a(r.default),yN.decodeHTMLStrict=a(t.default);var s=function(e,t){return e<t?1:-1};function l(e){return function(t){if("#"===t.charAt(1)){var n=t.charAt(2);return"X"===n||"x"===n?i.default(parseInt(t.substr(3),16)):i.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]||t}}return yN.decodeHTML=function(){for(var e=Object.keys(n.default).sort(s),r=Object.keys(t.default).sort(s),i=0,o=0;i<r.length;i++)e[o]===r[i]?(r[i]+=";?",o++):r[i]+=";";var a=new RegExp("&(?:"+r.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),c=l(t.default);function u(e){return";"!==e.substr(-1)&&(e+=";"),c(e)}return function(e){return String(e).replace(a,u)}}(),yN}wN.default=function(e){return e>=55296&&e<=57343||e>1114111?"\ufffd":(e in EN.default&&(e=EN.default[e]),SN(e))};var ON,PN,CN={};function AN(){if(ON)return CN;ON=1;var e=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(CN,"__esModule",{value:!0}),CN.escapeUTF8=CN.escape=CN.encodeNonAsciiHTML=CN.encodeHTML=CN.encodeXML=void 0;var t=s(e(_N).default),n=l(t);CN.encodeXML=f(t);var r,i,o=s(e(vN).default),a=l(o);function s(e){return Object.keys(e).sort().reduce(function(t,n){return t[e[n]]="&"+n+";",t},{})}function l(e){for(var t=[],n=[],r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];1===o.length?t.push("\\"+o):n.push(o)}t.sort();for(var a=0;a<t.length-1;a++){for(var s=a;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var l=1+s-a;l<3||t.splice(a,l,t[a]+"-"+t[s])}return n.unshift("["+t.join("")+"]"),new RegExp(n.join("|"),"g")}CN.encodeHTML=(r=o,i=a,function(e){return e.replace(i,function(e){return r[e]}).replace(c,h)}),CN.encodeNonAsciiHTML=f(o);var c=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,u=null!=String.prototype.codePointAt?function(e){return e.codePointAt(0)}:function(e){return 1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536};function h(e){return"&#x"+(e.length>1?u(e):e.charCodeAt(0)).toString(16).toUpperCase()+";"}var p=new RegExp(n.source+"|"+c.source,"g");function f(e){return function(t){return t.replace(p,function(t){return e[t]||h(t)})}}return CN.escape=function(e){return e.replace(p,h)},CN.escapeUTF8=function(e){return e.replace(n,h)},CN}var MN,IN,RN={};function DN(){if(IN)return mN;IN=1;var e=Ss&&Ss.__assign||function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)},t=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r};Object.defineProperty(mN,"__esModule",{value:!0});var i=r(YD),o=(PN||(PN=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.escapeUTF8=e.escape=e.encodeNonAsciiHTML=e.encodeHTML=e.encodeXML=e.encode=e.decodeStrict=e.decode=void 0;var t=kN(),n=AN();e.decode=function(e,n){return(!n||n<=0?t.decodeXML:t.decodeHTML)(e)},e.decodeStrict=function(e,n){return(!n||n<=0?t.decodeXML:t.decodeHTMLStrict)(e)},e.encode=function(e,t){return(!t||t<=0?n.encodeXML:n.encodeHTML)(e)};var r=AN();Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return r.encodeXML}}),Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return r.encodeNonAsciiHTML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return r.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return r.escapeUTF8}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return r.encodeHTML}});var i=kN();Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return i.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return i.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return i.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return i.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return i.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return i.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return i.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return i.decodeXML}})}(gN)),gN),a=(MN||(MN=1,Object.defineProperty(RN,"__esModule",{value:!0}),RN.attributeNames=RN.elementNames=void 0,RN.elementNames=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),RN.attributeNames=new Map([["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])),RN),s=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);var l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function c(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",i=0;i<n.length;i++)r+=u(n[i],t);return r}function u(t,n){switch(t.type){case i.Root:return c(t.children,n);case i.Directive:case i.Doctype:return function(e){return"<"+e.data+">"}(t);case i.Comment:return function(e){return"\x3c!--"+e.data+"--\x3e"}(t);case i.CDATA:return function(e){return"<![CDATA["+e.children[0].data+"]]>"}(t);case i.Script:case i.Style:case i.Tag:return function(t,n){var r;"foreign"===n.xmlMode&&(t.name=null!==(r=a.elementNames.get(t.name))&&void 0!==r?r:t.name,t.parent&&h.has(t.parent.name)&&(n=e(e({},n),{xmlMode:!1}))),!n.xmlMode&&p.has(t.name)&&(n=e(e({},n),{xmlMode:"foreign"}));var i="<"+t.name,s=function(e,t){if(e)return Object.keys(e).map(function(n){var r,i,s=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(i=a.attributeNames.get(n))&&void 0!==i?i:n),t.emptyAttrs||t.xmlMode||""!==s?n+'="'+(!1!==t.decodeEntities?o.encodeXML(s):s.replace(/"/g,"&quot;"))+'"':n}).join(" ")}(t.attribs,n);return s&&(i+=" "+s),0===t.children.length&&(n.xmlMode?!1!==n.selfClosingTags:n.selfClosingTags&&l.has(t.name))?(n.xmlMode||(i+=" "),i+="/>"):(i+=">",t.children.length>0&&(i+=c(t.children,n)),(n.xmlMode||!l.has(t.name))&&(i+="</"+t.name+">")),i}(t,n);case i.Text:return function(e,t){var n=e.data||"";return!1!==t.decodeEntities&&!(!t.xmlMode&&e.parent&&s.has(e.parent.name))&&(n=o.encodeXML(n)),n}(t,n)}}mN.default=c;var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=new Set(["svg","math"]);return mN}var NN=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(XD,"__esModule",{value:!0}),XD.innerText=XD.textContent=XD.getText=XD.getInnerHTML=XD.getOuterHTML=void 0;var jN=WD,LN=NN(DN()),BN=YD;function FN(e,t){return(0,LN.default)(e,t)}XD.getOuterHTML=FN,XD.getInnerHTML=function(e,t){return(0,jN.hasChildren)(e)?e.children.map(function(e){return FN(e,t)}).join(""):""},XD.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,jN.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,jN.isCDATA)(t)?e(t.children):(0,jN.isText)(t)?t.data:""},XD.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,jN.hasChildren)(t)&&!(0,jN.isComment)(t)?e(t.children):(0,jN.isText)(t)?t.data:""},XD.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,jN.hasChildren)(t)&&(t.type===BN.ElementType.Tag||(0,jN.isCDATA)(t))?e(t.children):(0,jN.isText)(t)?t.data:""};var zN={};Object.defineProperty(zN,"__esModule",{value:!0}),zN.prevElementSibling=zN.nextElementSibling=zN.getName=zN.hasAttrib=zN.getAttributeValue=zN.getSiblings=zN.getParent=zN.getChildren=void 0;var HN=WD,UN=[];function VN(e){var t;return null!==(t=e.children)&&void 0!==t?t:UN}function GN(e){return e.parent||null}zN.getChildren=VN,zN.getParent=GN,zN.getSiblings=function(e){var t=GN(e);if(null!=t)return VN(t);for(var n=[e],r=e.prev,i=e.next;null!=r;)n.unshift(r),r=r.prev;for(;null!=i;)n.push(i),i=i.next;return n},zN.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},zN.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},zN.getName=function(e){return e.name},zN.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,HN.isTag)(t);)t=t.next;return t},zN.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,HN.isTag)(t);)t=t.prev;return t};var XN={};function WN(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}Object.defineProperty(XN,"__esModule",{value:!0}),XN.prepend=XN.prependChild=XN.append=XN.appendChild=XN.replaceElement=XN.removeElement=void 0,XN.removeElement=WN,XN.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t}},XN.appendChild=function(e,t){if(WN(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},XN.append=function(e,t){WN(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var i=n.children;i.splice(i.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},XN.prependChild=function(e,t){if(WN(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},XN.prepend=function(e,t){WN(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t};var YN={};Object.defineProperty(YN,"__esModule",{value:!0}),YN.findAll=YN.existsOne=YN.findOne=YN.findOneChild=YN.find=YN.filter=void 0;var qN=WD;function $N(e,t,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o];if(e(s)&&(i.push(s),--r<=0))break;if(n&&(0,qN.hasChildren)(s)&&s.children.length>0){var l=$N(e,s.children,n,r);if(i.push.apply(i,l),(r-=l.length)<=0)break}}return i}YN.filter=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),$N(e,t,n,r)},YN.find=$N,YN.findOneChild=function(e,t){return t.find(e)},YN.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var i=null,o=0;o<n.length&&!i;o++){var a=n[o];(0,qN.isTag)(a)&&(t(a)?i=a:r&&a.children.length>0&&(i=e(t,a.children)))}return i},YN.existsOne=function e(t,n){return n.some(function(n){return(0,qN.isTag)(n)&&(t(n)||n.children.length>0&&e(t,n.children))})},YN.findAll=function(e,t){for(var n,r,i=[],o=t.filter(qN.isTag);r=o.shift();){var a=null===(n=r.children)||void 0===n?void 0:n.filter(qN.isTag);a&&a.length>0&&o.unshift.apply(o,a),e(r)&&i.push(r)}return i};var KN={};Object.defineProperty(KN,"__esModule",{value:!0}),KN.getElementsByTagType=KN.getElementsByTagName=KN.getElementById=KN.getElements=KN.testElement=void 0;var ZN=WD,QN=YN,JN={tag_name:function(e){return"function"==typeof e?function(t){return(0,ZN.isTag)(t)&&e(t.name)}:"*"===e?ZN.isTag:function(t){return(0,ZN.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,ZN.isText)(t)&&e(t.data)}:function(t){return(0,ZN.isText)(t)&&t.data===e}}};function ej(e,t){return"function"==typeof t?function(n){return(0,ZN.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,ZN.isTag)(n)&&n.attribs[e]===t}}function tj(e,t){return function(n){return e(n)||t(n)}}function nj(e){var t=Object.keys(e).map(function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(JN,t)?JN[t](n):ej(t,n)});return 0===t.length?null:t.reduce(tj)}KN.testElement=function(e,t){var n=nj(e);return!n||n(t)},KN.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var i=nj(e);return i?(0,QN.filter)(i,t,n,r):[]},KN.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,QN.findOne)(ej("id",e),t,n)},KN.getElementsByTagName=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,QN.filter)(JN.tag_name(e),t,n,r)},KN.getElementsByTagType=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=1/0),(0,QN.filter)(JN.tag_type(e),t,n,r)};var rj={};Object.defineProperty(rj,"__esModule",{value:!0}),rj.uniqueSort=rj.compareDocumentPosition=rj.removeSubsets=void 0;var ij=WD;function oj(e,t){var n=[],r=[];if(e===t)return 0;for(var i=(0,ij.hasChildren)(e)?e:e.parent;i;)n.unshift(i),i=i.parent;for(i=(0,ij.hasChildren)(t)?t:t.parent;i;)r.unshift(i),i=i.parent;for(var o=Math.min(n.length,r.length),a=0;a<o&&n[a]===r[a];)a++;if(0===a)return 1;var s=n[a-1],l=s.children,c=n[a],u=r[a];return l.indexOf(c)>l.indexOf(u)?s===t?20:4:s===e?10:2}rj.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},rj.compareDocumentPosition=oj,rj.uniqueSort=function(e){return(e=e.filter(function(e,t,n){return!n.includes(e,t+1)})).sort(function(e,t){var n=oj(e,t);return 2&n?-1:4&n?1:0}),e};var aj={};Object.defineProperty(aj,"__esModule",{value:!0}),aj.getFeed=void 0;var sj=XD,lj=KN;aj.getFeed=function(e){var t=dj(yj,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,lj.getElementsByTagName)("entry",n).map(function(e){var t,n=e.children,r={media:fj(n)};gj(r,"id","id",n),gj(r,"title","title",n);var i=null===(t=dj("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);var o=mj("summary",n)||mj("content",n);o&&(r.description=o);var a=mj("updated",n);return a&&(r.pubDate=new Date(a)),r})};gj(r,"id","id",n),gj(r,"title","title",n);var i=null===(t=dj("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i),gj(r,"description","subtitle",n);var o=mj("updated",n);return o&&(r.updated=new Date(o)),gj(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=dj("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],i={type:e.name.substr(0,3),id:"",items:(0,lj.getElementsByTagName)("item",e.children).map(function(e){var t=e.children,n={media:fj(t)};gj(n,"id","guid",t),gj(n,"title","title",t),gj(n,"link","link",t),gj(n,"description","description",t);var r=mj("pubDate",t);return r&&(n.pubDate=new Date(r)),n})};gj(i,"title","title",r),gj(i,"link","link",r),gj(i,"description","description",r);var o=mj("lastBuildDate",r);return o&&(i.updated=new Date(o)),gj(i,"author","managingEditor",r,!0),i}(t):null};var cj,uj,hj=["url","type","lang"],pj=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function fj(e){return(0,lj.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,i=hj;r<i.length;r++){t[s=i[r]]&&(n[s]=t[s])}for(var o=0,a=pj;o<a.length;o++){var s;t[s=a[o]]&&(n[s]=parseInt(t[s],10))}return t.expression&&(n.expression=t.expression),n})}function dj(e,t){return(0,lj.getElementsByTagName)(e,t,!0,1)[0]}function mj(e,t,n){return void 0===n&&(n=!1),(0,sj.textContent)((0,lj.getElementsByTagName)(e,t,n,1)).trim()}function gj(e,t,n,r,i){void 0===i&&(i=!1);var o=mj(n,r,i);o&&(e[t]=o)}function yj(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}function vj(){return uj||(uj=1,cj={trueFunc:function(){return!0},falseFunc:function(){return!1}}),cj}!function(e){var t=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ss&&Ss.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(XD,e),n(zN,e),n(XN,e),n(YN,e),n(KN,e),n(rj,e),n(aj,e);var r=WD;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return r.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return r.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return r.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return r.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return r.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return r.hasChildren}})}(GD);var bj,_j,wj={},Tj={},xj={};function Ej(){return bj||(bj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isTraversal=e.procedure=void 0,e.procedure={universal:50,tag:30,attribute:1,pseudo:0,"pseudo-element":0,"column-combinator":-1,descendant:-1,child:-1,parent:-1,sibling:-1,adjacent:-1,_flexibleDescendant:-1},e.isTraversal=function(t){return e.procedure[t.type]<0}}(xj)),xj}var Sj,kj={},Oj={};var Pj,Cj={},Aj={},Mj={},Ij={};var Rj,Dj,Nj,jj={};function Lj(){return Dj||(Dj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=e.generate=e.compile=e.parse=void 0;var t=function(){if(Pj)return Ij;Pj=1,Object.defineProperty(Ij,"__esModule",{value:!0}),Ij.parse=void 0;var e=new Set([9,10,12,13,32]);return Ij.parse=function(t){if("even"===(t=t.trim().toLowerCase()))return[2,0];if("odd"===t)return[2,1];var n=0,r=0,i=a(),o=s();if(n<t.length&&"n"===t.charAt(n)&&(n++,r=i*(o??1),l(),n<t.length?(i=a(),l(),o=s()):i=o=0),null===o||n<t.length)throw new Error("n-th rule couldn't be parsed ('".concat(t,"')"));return[r,i*o];function a(){return"-"===t.charAt(n)?(n++,-1):("+"===t.charAt(n)&&n++,1)}function s(){for(var e=n,r=0;n<t.length&&t.charCodeAt(n)>=48&&t.charCodeAt(n)<=57;)r=10*r+(t.charCodeAt(n)-48),n++;return n===e?null:r}function l(){for(;n<t.length&&e.has(t.charCodeAt(n));)n++}},Ij}();Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}});var n=function(){if(Rj)return jj;Rj=1;var e=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jj,"__esModule",{value:!0}),jj.generate=jj.compile=void 0;var t=e(vj());return jj.compile=function(e){var n=e[0],r=e[1]-1;if(r<0&&n<=0)return t.default.falseFunc;if(-1===n)return function(e){return e<=r};if(0===n)return function(e){return e===r};if(1===n)return r<0?t.default.trueFunc:function(e){return e>=r};var i=Math.abs(n),o=(r%i+i)%i;return n>1?function(e){return e>=r&&e%i===o}:function(e){return e<=r&&e%i===o}},jj.generate=function(e){var t=e[0],n=e[1]-1,r=0;if(t<0){var i=-t,o=(n%i+i)%i;return function(){var e=o+i*r++;return e>n?null:e}}return 0===t?n<0?function(){return null}:function(){return 0===r++?n:null}:(n<0&&(n+=t*Math.ceil(-n/t)),function(){return t*r+++n})},jj}();Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return n.compile}}),Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return n.generate}}),e.default=function(e){return(0,n.compile)((0,t.parse)(e))},e.sequence=function(e){return(0,n.generate)((0,t.parse)(e))}}(Mj)),Mj}var Bj,Fj={};var zj,Hj={};var Uj,Vj,Gj,Xj,Wj,Yj={};function qj(){return Uj||(Uj=1,function(e){var t=Ss&&Ss.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.subselects=e.getNextSiblings=e.ensureIsTag=e.PLACEHOLDER_ELEMENT=void 0;var n=vj(),r=Ej();function i(e,t){return e===n.falseFunc?n.falseFunc:function(n){return t.isTag(n)&&e(n)}}function o(e,t){var n=t.getSiblings(e);if(n.length<=1)return[];var r=n.indexOf(e);return r<0||r===n.length-1?[]:n.slice(r+1).filter(t.isTag)}e.PLACEHOLDER_ELEMENT={},e.ensureIsTag=i,e.getNextSiblings=o;var a=function(e,t,n,r,i){var o=i(t,{xmlMode:!!n.xmlMode,adapter:n.adapter,equals:n.equals},r);return function(t){return o(t)&&e(t)}};e.subselects={is:a,matches:a,where:a,not:function(e,t,r,i,o){var a=o(t,{xmlMode:!!r.xmlMode,adapter:r.adapter,equals:r.equals},i);return a===n.falseFunc?e:a===n.trueFunc?n.falseFunc:function(t){return!a(t)&&e(t)}},has:function(a,s,l,c,u){var h=l.adapter,p={xmlMode:!!l.xmlMode,adapter:h,equals:l.equals},f=s.some(function(e){return e.some(r.isTraversal)})?[e.PLACEHOLDER_ELEMENT]:void 0,d=u(s,p,f);if(d===n.falseFunc)return n.falseFunc;if(d===n.trueFunc)return function(e){return h.getChildren(e).some(h.isTag)&&a(e)};var m=i(d,h),g=d.shouldTestNextSiblings,y=void 0!==g&&g;return f?function(e){f[0]=e;var n=h.getChildren(e),r=y?t(t([],n,!0),o(e,h),!0):n;return a(e)&&h.existsOne(m,r)}:function(e){return a(e)&&h.existsOne(m,h.getChildren(e))}}}}(Yj)),Yj}function $j(){return Vj||(Vj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compilePseudoSelector=e.aliases=e.pseudos=e.filters=void 0;var t=vj(),n=UD,r=(Nj||(Nj=1,function(e){var t=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var n=t(Lj()),r=vj();function i(e,t){return function(n){var r=t.getParent(n);return null!=r&&t.isTag(r)&&e(n)}}function o(e){return function(t,n,i){var o=i.adapter[e];return"function"!=typeof o?r.falseFunc:function(e){return o(e)&&t(e)}}}e.filters={contains:function(e,t,n){var r=n.adapter;return function(n){return e(n)&&r.getText(n).includes(t)}},icontains:function(e,t,n){var r=n.adapter,i=t.toLowerCase();return function(t){return e(t)&&r.getText(t).toLowerCase().includes(i)}},"nth-child":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.falseFunc?r.falseFunc:l===r.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=0;i<n.length&&!s(t,n[i]);i++)a.isTag(n[i])&&r++;return l(r)&&e(t)}},"nth-last-child":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.falseFunc?r.falseFunc:l===r.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=n.length-1;i>=0&&!s(t,n[i]);i--)a.isTag(n[i])&&r++;return l(r)&&e(t)}},"nth-of-type":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.falseFunc?r.falseFunc:l===r.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=0;i<n.length;i++){var o=n[i];if(s(t,o))break;a.isTag(o)&&a.getName(o)===a.getName(t)&&r++}return l(r)&&e(t)}},"nth-last-of-type":function(e,t,o){var a=o.adapter,s=o.equals,l=(0,n.default)(t);return l===r.falseFunc?r.falseFunc:l===r.trueFunc?i(e,a):function(t){for(var n=a.getSiblings(t),r=0,i=n.length-1;i>=0;i--){var o=n[i];if(s(t,o))break;a.isTag(o)&&a.getName(o)===a.getName(t)&&r++}return l(r)&&e(t)}},root:function(e,t,n){var r=n.adapter;return function(t){var n=r.getParent(t);return(null==n||!r.isTag(n))&&e(t)}},scope:function(t,n,r,i){var o=r.equals;return i&&0!==i.length?1===i.length?function(e){return o(i[0],e)&&t(e)}:function(e){return i.includes(e)&&t(e)}:e.filters.root(t,n,r)},hover:o("isHovered"),visited:o("isVisited"),active:o("isActive")}}(Aj)),Aj);Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return r.filters}});var i=(Bj||(Bj=1,Object.defineProperty(Fj,"__esModule",{value:!0}),Fj.verifyPseudoArgs=Fj.pseudos=void 0,Fj.pseudos={empty:function(e,t){var n=t.adapter;return!n.getChildren(e).some(function(e){return n.isTag(e)||""!==n.getText(e)})},"first-child":function(e,t){var n=t.adapter,r=t.equals,i=n.getSiblings(e).find(function(e){return n.isTag(e)});return null!=i&&r(e,i)},"last-child":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=i.length-1;o>=0;o--){if(r(e,i[o]))return!0;if(n.isTag(i[o]))break}return!1},"first-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=0;a<i.length;a++){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"last-of-type":function(e,t){for(var n=t.adapter,r=t.equals,i=n.getSiblings(e),o=n.getName(e),a=i.length-1;a>=0;a--){var s=i[a];if(r(e,s))return!0;if(n.isTag(s)&&n.getName(s)===o)break}return!1},"only-of-type":function(e,t){var n=t.adapter,r=t.equals,i=n.getName(e);return n.getSiblings(e).every(function(t){return r(e,t)||!n.isTag(t)||n.getName(t)!==i})},"only-child":function(e,t){var n=t.adapter,r=t.equals;return n.getSiblings(e).every(function(t){return r(e,t)||!n.isTag(t)})}},Fj.verifyPseudoArgs=function(e,t,n){if(null===n){if(e.length>2)throw new Error("pseudo-selector :".concat(t," requires an argument"))}else if(2===e.length)throw new Error("pseudo-selector :".concat(t," doesn't have any arguments"))}),Fj);Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return i.pseudos}});var o=(zj||(zj=1,Object.defineProperty(Hj,"__esModule",{value:!0}),Hj.aliases=void 0,Hj.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:":is(\n        :is(button, input, select, textarea, optgroup, option)[disabled],\n        optgroup[disabled] > option,\n        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)\n    )",enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"}),Hj);Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return o.aliases}});var a=qj();e.compilePseudoSelector=function(e,s,l,c,u){var h=s.name,p=s.data;if(Array.isArray(p))return a.subselects[h](e,p,l,c,u);if(h in o.aliases){if(null!=p)throw new Error("Pseudo ".concat(h," doesn't have any arguments"));var f=(0,n.parse)(o.aliases[h]);return a.subselects.is(e,f,l,c,u)}if(h in r.filters)return r.filters[h](e,p,l,c);if(h in i.pseudos){var d=i.pseudos[h];return(0,i.verifyPseudoArgs)(d,h,p),d===t.falseFunc?t.falseFunc:e===t.trueFunc?function(e){return d(e,l,p)}:function(t){return d(t,l,p)&&e(t)}}throw new Error("unmatched pseudo-class :".concat(h))}}(Cj)),Cj}function Kj(){if(Gj)return kj;Gj=1,Object.defineProperty(kj,"__esModule",{value:!0}),kj.compileGeneralSelector=void 0;var e=function(){if(Sj)return Oj;Sj=1,Object.defineProperty(Oj,"__esModule",{value:!0}),Oj.attributeRules=void 0;var e=vj(),t=/[-[\]{}()*+?.,\\^$|#\s]/g;function n(e){return e.replace(t,"\\$&")}var r=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function i(e,t){return"boolean"==typeof e.ignoreCase?e.ignoreCase:"quirks"===e.ignoreCase?!!t.quirksMode:!t.xmlMode&&r.has(e.name)}return Oj.attributeRules={equals:function(e,t,n){var r=n.adapter,o=t.name,a=t.value;return i(t,n)?(a=a.toLowerCase(),function(t){var n=r.getAttributeValue(t,o);return null!=n&&n.length===a.length&&n.toLowerCase()===a&&e(t)}):function(t){return r.getAttributeValue(t,o)===a&&e(t)}},hyphen:function(e,t,n){var r=n.adapter,o=t.name,a=t.value,s=a.length;return i(t,n)?(a=a.toLowerCase(),function(t){var n=r.getAttributeValue(t,o);return null!=n&&(n.length===s||"-"===n.charAt(s))&&n.substr(0,s).toLowerCase()===a&&e(t)}):function(t){var n=r.getAttributeValue(t,o);return null!=n&&(n.length===s||"-"===n.charAt(s))&&n.substr(0,s)===a&&e(t)}},element:function(t,r,o){var a=o.adapter,s=r.name,l=r.value;if(/\s/.test(l))return e.falseFunc;var c=new RegExp("(?:^|\\s)".concat(n(l),"(?:$|\\s)"),i(r,o)?"i":"");return function(e){var n=a.getAttributeValue(e,s);return null!=n&&n.length>=l.length&&c.test(n)&&t(e)}},exists:function(e,t,n){var r=t.name,i=n.adapter;return function(t){return i.hasAttrib(t,r)&&e(t)}},start:function(t,n,r){var o=r.adapter,a=n.name,s=n.value,l=s.length;return 0===l?e.falseFunc:i(n,r)?(s=s.toLowerCase(),function(e){var n=o.getAttributeValue(e,a);return null!=n&&n.length>=l&&n.substr(0,l).toLowerCase()===s&&t(e)}):function(e){var n;return!(null===(n=o.getAttributeValue(e,a))||void 0===n||!n.startsWith(s))&&t(e)}},end:function(t,n,r){var o=r.adapter,a=n.name,s=n.value,l=-s.length;return 0===l?e.falseFunc:i(n,r)?(s=s.toLowerCase(),function(e){var n;return(null===(n=o.getAttributeValue(e,a))||void 0===n?void 0:n.substr(l).toLowerCase())===s&&t(e)}):function(e){var n;return!(null===(n=o.getAttributeValue(e,a))||void 0===n||!n.endsWith(s))&&t(e)}},any:function(t,r,o){var a=o.adapter,s=r.name,l=r.value;if(""===l)return e.falseFunc;if(i(r,o)){var c=new RegExp(n(l),"i");return function(e){var n=a.getAttributeValue(e,s);return null!=n&&n.length>=l.length&&c.test(n)&&t(e)}}return function(e){var n;return!(null===(n=a.getAttributeValue(e,s))||void 0===n||!n.includes(l))&&t(e)}},not:function(e,t,n){var r=n.adapter,o=t.name,a=t.value;return""===a?function(t){return!!r.getAttributeValue(t,o)&&e(t)}:i(t,n)?(a=a.toLowerCase(),function(t){var n=r.getAttributeValue(t,o);return(null==n||n.length!==a.length||n.toLowerCase()!==a)&&e(t)}):function(t){return r.getAttributeValue(t,o)!==a&&e(t)}}},Oj}(),t=$j(),n=UD;return kj.compileGeneralSelector=function(r,i,o,a,s){var l=o.adapter,c=o.equals;switch(i.type){case n.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case n.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case n.SelectorType.Attribute:if(null!=i.namespace)throw new Error("Namespaced attributes are not yet supported by css-select");return(!o.xmlMode||o.lowerCaseAttributeNames)&&(i.name=i.name.toLowerCase()),e.attributeRules[i.action](r,i,o);case n.SelectorType.Pseudo:return(0,t.compilePseudoSelector)(r,i,o,a,s);case n.SelectorType.Tag:if(null!=i.namespace)throw new Error("Namespaced tag names are not yet supported by css-select");var u=i.name;return(!o.xmlMode||o.lowerCaseTags)&&(u=u.toLowerCase()),function(e){return l.getName(e)===u&&r(e)};case n.SelectorType.Descendant:if(!1===o.cacheResults||typeof WeakSet>"u")return function(e){for(var t=e;t=l.getParent(t);)if(l.isTag(t)&&r(t))return!0;return!1};var h=new WeakSet;return function(e){for(var t=e;t=l.getParent(t);)if(!h.has(t)){if(l.isTag(t)&&r(t))return!0;h.add(t)}return!1};case"_flexibleDescendant":return function(e){var t=e;do{if(l.isTag(t)&&r(t))return!0}while(t=l.getParent(t));return!1};case n.SelectorType.Parent:return function(e){return l.getChildren(e).some(function(e){return l.isTag(e)&&r(e)})};case n.SelectorType.Child:return function(e){var t=l.getParent(e);return null!=t&&l.isTag(t)&&r(t)};case n.SelectorType.Sibling:return function(e){for(var t=l.getSiblings(e),n=0;n<t.length;n++){var i=t[n];if(c(e,i))break;if(l.isTag(i)&&r(i))return!0}return!1};case n.SelectorType.Adjacent:return l.prevElementSibling?function(e){var t=l.prevElementSibling(e);return null!=t&&r(t)}:function(e){for(var t,n=l.getSiblings(e),i=0;i<n.length;i++){var o=n[i];if(c(e,o))break;l.isTag(o)&&(t=o)}return!!t&&r(t)};case n.SelectorType.Universal:if(null!=i.namespace&&"*"!==i.namespace)throw new Error("Namespaced universal selectors are not yet supported by css-select");return r}},kj}function Zj(){if(Xj)return wj;Xj=1;var e=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wj,"__esModule",{value:!0}),wj.compileToken=wj.compileUnsafe=wj.compile=void 0;var t=UD,n=vj(),r=e(function(){if(_j)return Tj;_j=1,Object.defineProperty(Tj,"__esModule",{value:!0});var e=UD,t=Ej(),n={exists:10,equals:8,not:7,start:6,end:6,any:5,hyphen:4,element:4};function r(i){var o=t.procedure[i.type];if(i.type===e.SelectorType.Attribute)(o=n[i.action])===n.equals&&"id"===i.name&&(o=9),i.ignoreCase&&(o>>=1);else if(i.type===e.SelectorType.Pseudo)if(i.data)if("has"===i.name||"contains"===i.name)o=0;else if(Array.isArray(i.data)){o=0;for(var a=0;a<i.data.length;a++)if(1===i.data[a].length){var s=r(i.data[a][0]);if(0===s){o=0;break}s>o&&(o=s)}i.data.length>1&&o>0&&(o-=1)}else o=1;else o=3;return o}return Tj.default=function(e){for(var t=e.map(r),n=1;n<e.length;n++){var i=t[n];if(!(i<0))for(var o=n-1;o>=0&&i<t[o];o--){var a=e[o+1];e[o+1]=e[o],e[o]=a,t[o+1]=t[o],t[o]=i}}},Tj}()),i=Ej(),o=Kj(),a=qj();function s(e,n,r){return p("string"==typeof e?(0,t.parse)(e):e,n,r)}function l(e){return"pseudo"===e.type&&("scope"===e.name||Array.isArray(e.data)&&e.data.some(function(e){return e.some(l)}))}wj.compile=function(e,t,n){var r=s(e,t,n);return(0,a.ensureIsTag)(r,t.adapter)},wj.compileUnsafe=s;var c={type:t.SelectorType.Descendant},u={type:"_flexibleDescendant"},h={type:t.SelectorType.Pseudo,name:"scope",data:null};function p(e,t,s){var d;(e=e.filter(function(e){return e.length>0})).forEach(r.default),s=null!==(d=t.context)&&void 0!==d?d:s;var m=Array.isArray(s),g=s&&(Array.isArray(s)?s:[s]);!function(e,t,n){for(var r=t.adapter,o=!!n?.every(function(e){var t=r.isTag(e)&&r.getParent(e);return e===a.PLACEHOLDER_ELEMENT||t&&r.isTag(t)}),s=0,u=e;s<u.length;s++){var p=u[s];if(!(p.length>0&&(0,i.isTraversal)(p[0])&&"descendant"!==p[0].type)){if(!o||p.some(l))continue;p.unshift(c)}p.unshift(h)}}(e,t,g);var y=!1,v=e.map(function(e){if(e.length>=2){var r=e[0],i=e[1];"pseudo"!==r.type||"scope"!==r.name||(m&&"descendant"===i.type?e[1]=u:("adjacent"===i.type||"sibling"===i.type)&&(y=!0))}return function(e,t,r){var i;return e.reduce(function(e,i){return e===n.falseFunc?n.falseFunc:(0,o.compileGeneralSelector)(e,i,t,r,p)},null!==(i=t.rootFunc)&&void 0!==i?i:n.trueFunc)}(e,t,g)}).reduce(f,n.falseFunc);return v.shouldTestNextSiblings=y,v}function f(e,t){return t===n.falseFunc||e===n.trueFunc?e:e===n.falseFunc||t===n.trueFunc?t:function(n){return e(n)||t(n)}}return wj.compileToken=p,wj}function Qj(){return Wj||(Wj=1,function(e){var t=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r};Object.defineProperty(e,"__esModule",{value:!0}),e.aliases=e.pseudos=e.filters=e.is=e.selectOne=e.selectAll=e.prepareContext=e._compileToken=e._compileUnsafe=e.compile=void 0;var i=r(GD),o=vj(),a=Zj(),s=qj(),l=function(e,t){return e===t},c={adapter:i,equals:l};function u(e){var t,n,r,o,a=e??c;return null!==(t=a.adapter)&&void 0!==t||(a.adapter=i),null!==(n=a.equals)&&void 0!==n||(a.equals=null!==(o=null===(r=a.adapter)||void 0===r?void 0:r.equals)&&void 0!==o?o:l),a}function h(e){return function(t,n,r){var i=u(n);return e(t,i,r)}}function p(e){return function(t,n,r){var i=u(r);"function"!=typeof t&&(t=(0,a.compileUnsafe)(t,i,n));var o=f(n,i.adapter,t.shouldTestNextSiblings);return e(t,o,i)}}function f(e,t,n){return void 0===n&&(n=!1),n&&(e=function(e,t){for(var n=Array.isArray(e)?e.slice(0):[e],r=n.length,i=0;i<r;i++){var o=(0,s.getNextSiblings)(n[i],t);n.push.apply(n,o)}return n}(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}e.compile=h(a.compile),e._compileUnsafe=h(a.compileUnsafe),e._compileToken=h(a.compileToken),e.prepareContext=f,e.selectAll=p(function(e,t,n){return e!==o.falseFunc&&t&&0!==t.length?n.adapter.findAll(e,t):[]}),e.selectOne=p(function(e,t,n){return e!==o.falseFunc&&t&&0!==t.length?n.adapter.findOne(e,t):null}),e.is=function(e,t,n){var r=u(n);return("function"==typeof t?t:(0,a.compile)(t,r))(e)},e.default=e.selectAll;var d=$j();Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return d.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return d.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return d.aliases}})}(VD)),VD}var Jj,eL,tL,nL={},rL={};function iL(){return Jj||(Jj=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLimit=e.isFilter=e.filterNames=void 0,e.filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]),e.isFilter=function t(n){return"pseudo"===n.type&&(!!e.filterNames.has(n.name)||!("not"!==n.name||!Array.isArray(n.data))&&n.data.some(function(e){return e.some(t)}))},e.getLimit=function(e,t){var n=null!=t?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(n)?n>=0?n+1:1/0:0;case"lt":return isFinite(n)?n>=0?n:1/0:0;case"gt":return isFinite(n)?1/0:0;default:return 1/0}}}(rL)),rL}function oL(){return tL||(tL=1,function(e){var t=Ss&&Ss.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=Ss&&Ss.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.filter=e.some=e.is=e.aliases=e.pseudos=e.filters=void 0;var a=UD,s=Qj(),l=i(GD),c=function(){if(eL)return nL;eL=1,Object.defineProperty(nL,"__esModule",{value:!0}),nL.groupSelectors=nL.getDocumentRoot=void 0;var e=iL();return nL.getDocumentRoot=function(e){for(;e.parent;)e=e.parent;return e},nL.groupSelectors=function(t){for(var n=[],r=[],i=0,o=t;i<o.length;i++){var a=o[i];a.some(e.isFilter)?n.push(a):r.push(a)}return[r,n]},nL}(),u=iL(),h=Qj();Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return h.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return h.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return h.aliases}});var p={type:a.SelectorType.Pseudo,name:"scope",data:null},f=t({},p),d={type:a.SelectorType.Universal,namespace:null};function m(e,t,n){if(void 0===n&&(n={}),"function"==typeof t)return e.some(t);var r=(0,c.groupSelectors)((0,a.parse)(t)),i=r[0],o=r[1];return i.length>0&&e.some((0,s._compileToken)(i,n))||o.some(function(t){return y(t,e,n).length>0})}function g(e,t,n){if(0===t.length)return[];var r,i=(0,c.groupSelectors)(e),o=i[0],a=i[1];if(o.length){var s=E(t,o,n);if(0===a.length)return s;s.length&&(r=new Set(s))}for(var u=0;u<a.length&&r?.size!==t.length;u++){var h=a[u];if(0===(r?t.filter(function(e){return l.isTag(e)&&!r.has(e)}):t).length)break;if((s=y(h,t,n)).length)if(r)s.forEach(function(e){return r.add(e)});else{if(u===a.length-1)return s;r=new Set(s)}}return typeof r<"u"?r.size===t.length?t:t.filter(function(e){return r.has(e)}):[]}function y(e,t,n){var r;return e.some(a.isTraversal)?w(null!==(r=n.root)&&void 0!==r?r:(0,c.getDocumentRoot)(t[0]),o(o([],e,!0),[f],!1),n,!0,t):w(t,e,n,!1)}e.is=function(e,t,n){return void 0===n&&(n={}),m([e],t,n)},e.some=m,e.filter=function(e,t,n){return void 0===n&&(n={}),g((0,a.parse)(e),t,n)},e.select=function(e,t,n){if(void 0===n&&(n={}),"function"==typeof e)return x(t,e);var r=(0,c.groupSelectors)((0,a.parse)(e)),i=r[0],s=r[1].map(function(e){return w(t,e,n,!0)});return i.length&&s.push(T(t,i,n,1/0)),0===s.length?[]:1===s.length?s[0]:l.uniqueSort(s.reduce(function(e,t){return o(o([],e,!0),t,!0)}))};var v=new Set([a.SelectorType.Descendant,a.SelectorType.Adjacent]);function b(e){return e!==p&&"pseudo"===e.type&&("scope"===e.name||Array.isArray(e.data)&&e.data.some(function(e){return e.some(b)}))}function _(e,n,r){return r&&e.some(b)?t(t({},n),{context:r}):n}function w(e,t,n,r,i){var o=t.findIndex(u.isFilter),s=t.slice(0,o),c=t[o],h=(0,u.getLimit)(c.name,c.data);if(0===h)return[];var f=_(s,n,i),m=(0!==s.length||Array.isArray(e)?0===s.length||1===s.length&&s[0]===p?(Array.isArray(e)?e:[e]).filter(l.isTag):r||s.some(a.isTraversal)?T(e,[s],f,h):E(e,[s],f):l.getChildren(e).filter(l.isTag)).slice(0,h),y=function(e,t,n,r){var i="string"==typeof n?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(i)&&Math.abs(i)<t.length?[i<0?t[t.length+i]:t[i]]:[];case"gt":return isFinite(i)?t.slice(i+1):[];case"even":return t.filter(function(e,t){return t%2===0});case"odd":return t.filter(function(e,t){return t%2===1});case"not":var o=new Set(g(n,t,r));return t.filter(function(e){return!o.has(e)})}}(c.name,m,c.data,n);if(0===y.length||t.length===o+1)return y;var b=t.slice(o+1),x=b.some(a.isTraversal),S=_(b,n,i);return x&&(v.has(b[0].type)&&b.unshift(d),b.unshift(p)),b.some(u.isFilter)?w(y,b,n,!1,i):x?T(y,[b],S,1/0):E(y,[b],S)}function T(e,t,n,r){return 0===r?[]:x(e,(0,s._compileToken)(t,n,e),r)}function x(e,t,n){void 0===n&&(n=1/0);var r=(0,s.prepareContext)(e,l,t.shouldTestNextSiblings);return l.find(function(e){return l.isTag(e)&&t(e)},r,!0,n)}function E(e,t,n){var r=(Array.isArray(e)?e:[e]).filter(l.isTag);if(0===r.length)return r;var i=(0,s._compileToken)(t,n);return r.filter(i)}}(vD)),vD}var aL={},sL={},lL={},cL=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lL,"__esModule",{value:!0});var uL=cL(wN),hL=cL(vN),pL=cL(bN),fL=cL(_N);function dL(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function mL(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function gL(e,t,n){var r=e.toLowerCase();return e===r?function(e,i){i===r?e._state=t:(e._state=n,e._index--)}:function(i,o){o===r||o===e?i._state=t:(i._state=n,i._index--)}}function yL(e,t){var n=e.toLowerCase();return function(r,i){i===n||i===e?r._state=t:(r._state=3,r._index--)}}var vL=gL("C",24,16),bL=gL("D",25,16),_L=gL("A",26,16),wL=gL("T",27,16),TL=gL("A",28,16),xL=yL("R",35),EL=yL("I",36),SL=yL("P",37),kL=yL("T",38),OL=gL("R",40,1),PL=gL("I",41,1),CL=gL("P",42,1),AL=gL("T",43,1),ML=yL("Y",45),IL=yL("L",46),RL=yL("E",47),DL=gL("Y",49,1),NL=gL("L",50,1),jL=gL("E",51,1),LL=yL("I",54),BL=yL("T",55),FL=yL("L",56),zL=yL("E",57),HL=gL("I",58,1),UL=gL("T",59,1),VL=gL("L",60,1),GL=gL("E",61,1),XL=gL("#",63,64),WL=gL("X",66,65),YL=function(){function e(e,t){var n;this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1,this.cbs=t,this.xmlMode=!!e?.xmlMode,this.decodeEntities=null===(n=e?.decodeEntities)||void 0===n||n}return e.prototype.reset=function(){this._state=1,this.buffer="",this.sectionStart=0,this._index=0,this.bufferOffset=0,this.baseState=1,this.special=1,this.running=!0,this.ended=!1},e.prototype.write=function(e){this.ended&&this.cbs.onerror(Error(".write() after done!")),this.buffer+=e,this.parse()},e.prototype.end=function(e){this.ended&&this.cbs.onerror(Error(".end() after done!")),e&&this.write(e),this.ended=!0,this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this._index<this.buffer.length&&this.parse(),this.ended&&this.finish()},e.prototype.getAbsoluteIndex=function(){return this.bufferOffset+this._index},e.prototype.stateText=function(e){"<"===e?(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this._state=2,this.sectionStart=this._index):this.decodeEntities&&"&"===e&&(1===this.special||4===this.special)&&(this._index>this.sectionStart&&this.cbs.ontext(this.getSection()),this.baseState=1,this._state=62,this.sectionStart=this._index)},e.prototype.isTagStartChar=function(e){return mL(e)||this.xmlMode&&!dL(e)&&"/"!==e&&">"!==e},e.prototype.stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this.cbs.ontext(this.getSection()),this.sectionStart=this._index):">"===e||1!==this.special||dL(e)?this._state=1:"!"===e?(this._state=15,this.sectionStart=this._index+1):"?"===e?(this._state=17,this.sectionStart=this._index+1):this.isTagStartChar(e)?(this._state=this.xmlMode||"s"!==e&&"S"!==e?this.xmlMode||"t"!==e&&"T"!==e?3:52:32,this.sectionStart=this._index):this._state=1},e.prototype.stateInTagName=function(e){("/"===e||">"===e||dL(e))&&(this.emitToken("onopentagname"),this._state=8,this._index--)},e.prototype.stateBeforeClosingTagName=function(e){dL(e)||(">"===e?this._state=1:1!==this.special?4===this.special||"s"!==e&&"S"!==e?4!==this.special||"t"!==e&&"T"!==e?(this._state=1,this._index--):this._state=53:this._state=33:this.isTagStartChar(e)?(this._state=6,this.sectionStart=this._index):(this._state=20,this.sectionStart=this._index))},e.prototype.stateInClosingTagName=function(e){(">"===e||dL(e))&&(this.emitToken("onclosetag"),this._state=7,this._index--)},e.prototype.stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeAttributeName=function(e){">"===e?(this.cbs.onopentagend(),this._state=1,this.sectionStart=this._index+1):"/"===e?this._state=4:dL(e)||(this._state=9,this.sectionStart=this._index)},e.prototype.stateInSelfClosingTag=function(e){">"===e?(this.cbs.onselfclosingtag(),this._state=1,this.sectionStart=this._index+1,this.special=1):dL(e)||(this._state=8,this._index--)},e.prototype.stateInAttributeName=function(e){("="===e||"/"===e||">"===e||dL(e))&&(this.cbs.onattribname(this.getSection()),this.sectionStart=-1,this._state=10,this._index--)},e.prototype.stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this.cbs.onattribend(void 0),this._state=8,this._index--):dL(e)||(this.cbs.onattribend(void 0),this._state=9,this.sectionStart=this._index)},e.prototype.stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this.sectionStart=this._index+1):"'"===e?(this._state=13,this.sectionStart=this._index+1):dL(e)||(this._state=14,this.sectionStart=this._index,this._index--)},e.prototype.handleInAttributeValue=function(e,t){e===t?(this.emitToken("onattribdata"),this.cbs.onattribend(t),this._state=8):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,'"')},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,"'")},e.prototype.stateInAttributeValueNoQuotes=function(e){dL(e)||">"===e?(this.emitToken("onattribdata"),this.cbs.onattribend(null),this._state=8,this._index--):this.decodeEntities&&"&"===e&&(this.emitToken("onattribdata"),this.baseState=this._state,this._state=62,this.sectionStart=this._index)},e.prototype.stateBeforeDeclaration=function(e){this._state="["===e?23:"-"===e?18:16},e.prototype.stateInDeclaration=function(e){">"===e&&(this.cbs.ondeclaration(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateInProcessingInstruction=function(e){">"===e&&(this.cbs.onprocessinginstruction(this.getSection()),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateBeforeComment=function(e){"-"===e?(this._state=19,this.sectionStart=this._index+1):this._state=16},e.prototype.stateInComment=function(e){"-"===e&&(this._state=21)},e.prototype.stateInSpecialComment=function(e){">"===e&&(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index)),this._state=1,this.sectionStart=this._index+1)},e.prototype.stateAfterComment1=function(e){this._state="-"===e?22:19},e.prototype.stateAfterComment2=function(e){">"===e?(this.cbs.oncomment(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype.stateBeforeCdata6=function(e){"["===e?(this._state=29,this.sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype.stateInCdata=function(e){"]"===e&&(this._state=30)},e.prototype.stateAfterCdata1=function(e){this._state="]"===e?31:29},e.prototype.stateAfterCdata2=function(e){">"===e?(this.cbs.oncdata(this.buffer.substring(this.sectionStart,this._index-2)),this._state=1,this.sectionStart=this._index+1):"]"!==e&&(this._state=29)},e.prototype.stateBeforeSpecialS=function(e){"c"===e||"C"===e?this._state=34:"t"===e||"T"===e?this._state=44:(this._state=3,this._index--)},e.prototype.stateBeforeSpecialSEnd=function(e){2!==this.special||"c"!==e&&"C"!==e?3!==this.special||"t"!==e&&"T"!==e?this._state=1:this._state=48:this._state=39},e.prototype.stateBeforeSpecialLast=function(e,t){("/"===e||">"===e||dL(e))&&(this.special=t),this._state=3,this._index--},e.prototype.stateAfterSpecialLast=function(e,t){">"===e||dL(e)?(this.special=1,this._state=6,this.sectionStart=this._index-t,this._index--):this._state=1},e.prototype.parseFixedEntity=function(e){if(void 0===e&&(e=this.xmlMode?fL.default:hL.default),this.sectionStart+1<this._index){var t=this.buffer.substring(this.sectionStart+1,this._index);Object.prototype.hasOwnProperty.call(e,t)&&(this.emitPartial(e[t]),this.sectionStart=this._index+1)}},e.prototype.parseLegacyEntity=function(){for(var e=this.sectionStart+1,t=Math.min(this._index-e,6);t>=2;){var n=this.buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(pL.default,n))return this.emitPartial(pL.default[n]),void(this.sectionStart+=t+1);t--}},e.prototype.stateInNamedEntity=function(e){";"===e?(this.parseFixedEntity(),1===this.baseState&&this.sectionStart+1<this._index&&!this.xmlMode&&this.parseLegacyEntity(),this._state=this.baseState):(e<"0"||e>"9")&&!mL(e)&&(this.xmlMode||this.sectionStart+1===this._index||(1!==this.baseState?"="!==e&&this.parseFixedEntity(pL.default):this.parseLegacyEntity()),this._state=this.baseState,this._index--)},e.prototype.decodeNumericEntity=function(e,t,n){var r=this.sectionStart+e;if(r!==this._index){var i=this.buffer.substring(r,this._index),o=parseInt(i,t);this.emitPartial(uL.default(o)),this.sectionStart=n?this._index+1:this._index}this._state=this.baseState},e.prototype.stateInNumericEntity=function(e){";"===e?this.decodeNumericEntity(2,10,!0):(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(2,10,!1),this._index--)},e.prototype.stateInHexEntity=function(e){";"===e?this.decodeNumericEntity(3,16,!0):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this.xmlMode?this._state=this.baseState:this.decodeNumericEntity(3,16,!1),this._index--)},e.prototype.cleanup=function(){this.sectionStart<0?(this.buffer="",this.bufferOffset+=this._index,this._index=0):this.running&&(1===this._state?(this.sectionStart!==this._index&&this.cbs.ontext(this.buffer.substr(this.sectionStart)),this.buffer="",this.bufferOffset+=this._index,this._index=0):this.sectionStart===this._index?(this.buffer="",this.bufferOffset+=this._index,this._index=0):(this.buffer=this.buffer.substr(this.sectionStart),this._index-=this.sectionStart,this.bufferOffset+=this.sectionStart),this.sectionStart=0)},e.prototype.parse=function(){for(;this._index<this.buffer.length&&this.running;){var e=this.buffer.charAt(this._index);1===this._state?this.stateText(e):12===this._state?this.stateInAttributeValueDoubleQuotes(e):9===this._state?this.stateInAttributeName(e):19===this._state?this.stateInComment(e):20===this._state?this.stateInSpecialComment(e):8===this._state?this.stateBeforeAttributeName(e):3===this._state?this.stateInTagName(e):6===this._state?this.stateInClosingTagName(e):2===this._state?this.stateBeforeTagName(e):10===this._state?this.stateAfterAttributeName(e):13===this._state?this.stateInAttributeValueSingleQuotes(e):11===this._state?this.stateBeforeAttributeValue(e):5===this._state?this.stateBeforeClosingTagName(e):7===this._state?this.stateAfterClosingTagName(e):32===this._state?this.stateBeforeSpecialS(e):21===this._state?this.stateAfterComment1(e):14===this._state?this.stateInAttributeValueNoQuotes(e):4===this._state?this.stateInSelfClosingTag(e):16===this._state?this.stateInDeclaration(e):15===this._state?this.stateBeforeDeclaration(e):22===this._state?this.stateAfterComment2(e):18===this._state?this.stateBeforeComment(e):33===this._state?this.stateBeforeSpecialSEnd(e):53===this._state?HL(this,e):39===this._state?OL(this,e):40===this._state?PL(this,e):41===this._state?CL(this,e):34===this._state?xL(this,e):35===this._state?EL(this,e):36===this._state?SL(this,e):37===this._state?kL(this,e):38===this._state?this.stateBeforeSpecialLast(e,2):42===this._state?AL(this,e):43===this._state?this.stateAfterSpecialLast(e,6):44===this._state?ML(this,e):29===this._state?this.stateInCdata(e):45===this._state?IL(this,e):46===this._state?RL(this,e):47===this._state?this.stateBeforeSpecialLast(e,3):48===this._state?DL(this,e):49===this._state?NL(this,e):50===this._state?jL(this,e):51===this._state?this.stateAfterSpecialLast(e,5):52===this._state?LL(this,e):54===this._state?BL(this,e):55===this._state?FL(this,e):56===this._state?zL(this,e):57===this._state?this.stateBeforeSpecialLast(e,4):58===this._state?UL(this,e):59===this._state?VL(this,e):60===this._state?GL(this,e):61===this._state?this.stateAfterSpecialLast(e,5):17===this._state?this.stateInProcessingInstruction(e):64===this._state?this.stateInNamedEntity(e):23===this._state?vL(this,e):62===this._state?XL(this,e):24===this._state?bL(this,e):25===this._state?_L(this,e):30===this._state?this.stateAfterCdata1(e):31===this._state?this.stateAfterCdata2(e):26===this._state?wL(this,e):27===this._state?TL(this,e):28===this._state?this.stateBeforeCdata6(e):66===this._state?this.stateInHexEntity(e):65===this._state?this.stateInNumericEntity(e):63===this._state?WL(this,e):this.cbs.onerror(Error("unknown _state"),this._state),this._index++}this.cleanup()},e.prototype.finish=function(){this.sectionStart<this._index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.substr(this.sectionStart);29===this._state||30===this._state||31===this._state?this.cbs.oncdata(e):19===this._state||21===this._state||22===this._state?this.cbs.oncomment(e):64!==this._state||this.xmlMode?65!==this._state||this.xmlMode?66!==this._state||this.xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this.cbs.ontext(e):(this.decodeNumericEntity(3,16,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.decodeNumericEntity(2,10,!1),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData())):(this.parseLegacyEntity(),this.sectionStart<this._index&&(this._state=this.baseState,this.handleTrailingData()))},e.prototype.getSection=function(){return this.buffer.substring(this.sectionStart,this._index)},e.prototype.emitToken=function(e){this.cbs[e](this.getSection()),this.sectionStart=-1},e.prototype.emitPartial=function(e){1!==this.baseState?this.cbs.onattribdata(e):this.cbs.ontext(e)},e}();lL.default=YL;var qL=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sL,"__esModule",{value:!0}),sL.Parser=void 0;var $L=qL(lL),KL=new Set(["input","option","optgroup","select","button","datalist","textarea"]),ZL=new Set(["p"]),QL={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:ZL,h1:ZL,h2:ZL,h3:ZL,h4:ZL,h5:ZL,h6:ZL,select:KL,input:KL,output:KL,button:KL,datalist:KL,textarea:KL,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:ZL,article:ZL,aside:ZL,blockquote:ZL,details:ZL,div:ZL,dl:ZL,fieldset:ZL,figcaption:ZL,figure:ZL,footer:ZL,form:ZL,header:ZL,hr:ZL,main:ZL,nav:ZL,ol:ZL,pre:ZL,section:ZL,table:ZL,ul:ZL,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},JL=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),eB=new Set(["math","svg"]),tB=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),nB=/\s|\//,rB=function(){function e(e,t){var n,r,i,o,a;void 0===t&&(t={}),this.startIndex=0,this.endIndex=null,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.options=t,this.cbs=e??{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:!t.xmlMode,this.tokenizer=new(null!==(i=t.Tokenizer)&&void 0!==i?i:$L.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.updatePosition=function(e){null===this.endIndex?this.tokenizer.sectionStart<=e?this.startIndex=0:this.startIndex=this.tokenizer.sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this.tokenizer.getAbsoluteIndex()},e.prototype.ontext=function(e){var t,n;this.updatePosition(1),this.endIndex--,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,e)},e.prototype.onopentagname=function(e){var t,n;if(this.lowerCaseTagNames&&(e=e.toLowerCase()),this.tagname=e,!this.options.xmlMode&&Object.prototype.hasOwnProperty.call(QL,e))for(var r=void 0;this.stack.length>0&&QL[e].has(r=this.stack[this.stack.length-1]);)this.onclosetag(r);(this.options.xmlMode||!JL.has(e))&&(this.stack.push(e),eB.has(e)?this.foreignContext.push(!0):tB.has(e)&&this.foreignContext.push(!1)),null===(n=(t=this.cbs).onopentagname)||void 0===n||n.call(t,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.onopentagend=function(){var e,t;this.updatePosition(1),this.attribs&&(null===(t=(e=this.cbs).onopentag)||void 0===t||t.call(e,this.tagname,this.attribs),this.attribs=null),!this.options.xmlMode&&this.cbs.onclosetag&&JL.has(this.tagname)&&this.cbs.onclosetag(this.tagname),this.tagname=""},e.prototype.onclosetag=function(e){if(this.updatePosition(1),this.lowerCaseTagNames&&(e=e.toLowerCase()),(eB.has(e)||tB.has(e))&&this.foreignContext.pop(),!this.stack.length||!this.options.xmlMode&&JL.has(e))!this.options.xmlMode&&("br"===e||"p"===e)&&(this.onopentagname(e),this.closeCurrentTag());else{var t=this.stack.lastIndexOf(e);if(-1!==t)if(this.cbs.onclosetag)for(t=this.stack.length-t;t--;)this.cbs.onclosetag(this.stack.pop());else this.stack.length=t;else"p"===e&&!this.options.xmlMode&&(this.onopentagname(e),this.closeCurrentTag())}},e.prototype.onselfclosingtag=function(){this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?this.closeCurrentTag():this.onopentagend()},e.prototype.closeCurrentTag=function(){var e,t,n=this.tagname;this.onopentagend(),this.stack[this.stack.length-1]===n&&(null===(t=(e=this.cbs).onclosetag)||void 0===t||t.call(e,n),this.stack.pop())},e.prototype.onattribname=function(e){this.lowerCaseAttributeNames&&(e=e.toLowerCase()),this.attribname=e},e.prototype.onattribdata=function(e){this.attribvalue+=e},e.prototype.onattribend=function(e){var t,n;null===(n=(t=this.cbs).onattribute)||void 0===n||n.call(t,this.attribname,this.attribvalue,e),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribname="",this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(nB),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("!"+t,"!"+e)}},e.prototype.onprocessinginstruction=function(e){if(this.cbs.onprocessinginstruction){var t=this.getInstructionName(e);this.cbs.onprocessinginstruction("?"+t,"?"+e)}},e.prototype.oncomment=function(e){var t,n,r,i;this.updatePosition(4),null===(n=(t=this.cbs).oncomment)||void 0===n||n.call(t,e),null===(i=(r=this.cbs).oncommentend)||void 0===i||i.call(r)},e.prototype.oncdata=function(e){var t,n,r,i,o,a;this.updatePosition(1),this.options.xmlMode||this.options.recognizeCDATA?(null===(n=(t=this.cbs).oncdatastart)||void 0===n||n.call(t),null===(i=(r=this.cbs).ontext)||void 0===i||i.call(r,e),null===(a=(o=this.cbs).oncdataend)||void 0===a||a.call(o)):this.oncomment("[CDATA["+e+"]]")},e.prototype.onerror=function(e){var t,n;null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,e)},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag)for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n]));null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack=[],null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this)},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.write=function(e){this.tokenizer.write(e)},e.prototype.end=function(e){this.tokenizer.end(e)},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();sL.Parser=rB;var iB={},oB=Ss&&Ss.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aB=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),sB=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),lB=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&aB(t,e,n);return sB(t,e),t},cB=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iB,"__esModule",{value:!0}),iB.parseFeed=iB.FeedHandler=void 0;var uB,hB,pB=cB(WD),fB=lB(GD),dB=sL;!function(e){e[e.image=0]="image",e[e.audio=1]="audio",e[e.video=2]="video",e[e.document=3]="document",e[e.executable=4]="executable"}(uB||(uB={})),function(e){e[e.sample=0]="sample",e[e.full=1]="full",e[e.nonstop=2]="nonstop"}(hB||(hB={}));var mB=function(e){function t(t,n){return"object"==typeof t&&(n=t=void 0),e.call(this,t,n)||this}return oB(t,e),t.prototype.onend=function(){var e,t,n=vB(TB,this.dom);if(n){var r={};if("feed"===n.name){var i=n.children;r.type="atom",wB(r,"id","id",i),wB(r,"title","title",i);var o=_B("href",vB("link",i));o&&(r.link=o),wB(r,"description","subtitle",i),(a=bB("updated",i))&&(r.updated=new Date(a)),wB(r,"author","email",i,!0),r.items=yB("entry",i).map(function(e){var t={},n=e.children;wB(t,"id","id",n),wB(t,"title","title",n);var r=_B("href",vB("link",n));r&&(t.link=r);var i=bB("summary",n)||bB("content",n);i&&(t.description=i);var o=bB("updated",n);return o&&(t.pubDate=new Date(o)),t.media=gB(n),t})}else{var a;i=null!==(t=null===(e=vB("channel",n.children))||void 0===e?void 0:e.children)&&void 0!==t?t:[];r.type=n.name.substr(0,3),r.id="",wB(r,"title","title",i),wB(r,"link","link",i),wB(r,"description","description",i),(a=bB("lastBuildDate",i))&&(r.updated=new Date(a)),wB(r,"author","managingEditor",i,!0),r.items=yB("item",n.children).map(function(e){var t={},n=e.children;wB(t,"id","guid",n),wB(t,"title","title",n),wB(t,"link","link",n),wB(t,"description","description",n);var r=bB("pubDate",n);return r&&(t.pubDate=new Date(r)),t.media=gB(n),t})}this.feed=r,this.handleCallback(null)}else this.handleCallback(new Error("couldn't find root of feed"))},t}(pB.default);function gB(e){return yB("media:content",e).map(function(e){var t={medium:e.attribs.medium,isDefault:!!e.attribs.isDefault};return e.attribs.url&&(t.url=e.attribs.url),e.attribs.fileSize&&(t.fileSize=parseInt(e.attribs.fileSize,10)),e.attribs.type&&(t.type=e.attribs.type),e.attribs.expression&&(t.expression=e.attribs.expression),e.attribs.bitrate&&(t.bitrate=parseInt(e.attribs.bitrate,10)),e.attribs.framerate&&(t.framerate=parseInt(e.attribs.framerate,10)),e.attribs.samplingrate&&(t.samplingrate=parseInt(e.attribs.samplingrate,10)),e.attribs.channels&&(t.channels=parseInt(e.attribs.channels,10)),e.attribs.duration&&(t.duration=parseInt(e.attribs.duration,10)),e.attribs.height&&(t.height=parseInt(e.attribs.height,10)),e.attribs.width&&(t.width=parseInt(e.attribs.width,10)),e.attribs.lang&&(t.lang=e.attribs.lang),t})}function yB(e,t){return fB.getElementsByTagName(e,t,!0)}function vB(e,t){return fB.getElementsByTagName(e,t,!0,1)[0]}function bB(e,t,n){return void 0===n&&(n=!1),fB.getText(fB.getElementsByTagName(e,t,n,1)).trim()}function _B(e,t){return t?t.attribs[e]:null}function wB(e,t,n,r,i){void 0===i&&(i=!1);var o=bB(n,r,i);o&&(e[t]=o)}function TB(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}iB.FeedHandler=mB,iB.parseFeed=function(e,t){void 0===t&&(t={xmlMode:!0});var n=new mB(t);return new dB.Parser(n,t).end(e),n.feed},function(e){var t=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=Ss&&Ss.__exportStar||function(e,n){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)},o=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.RssHandler=e.DefaultHandler=e.DomUtils=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DomHandler=e.Parser=void 0;var a=sL;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}});var s=WD;function l(e,t){var n=new s.DomHandler(void 0,t);return new a.Parser(n,t).end(e),n.root}Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return s.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return s.DomHandler}}),e.parseDocument=l,e.parseDOM=function(e,t){return l(e,t).children},e.createDomStream=function(e,t,n){var r=new s.DomHandler(e,t,n);return new a.Parser(r,t)};var c=lL;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return o(c).default}});var u=r(YD);e.ElementType=u,i(iB,e),e.DomUtils=r(GD);var h=iB;Object.defineProperty(e,"RssHandler",{enumerable:!0,get:function(){return h.FeedHandler}})}(aL);var xB,EB,SB,kB,OB,PB,CB,AB,MB,IB={},RB={},DB={};function NB(){if(xB)return DB;xB=1;const e=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];return DB.REPLACEMENT_CHARACTER="\ufffd",DB.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},DB.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]},DB.isSurrogate=function(e){return e>=55296&&e<=57343},DB.isSurrogatePair=function(e){return e>=56320&&e<=57343},DB.getSurrogatePairCodePoint=function(e,t){return 1024*(e-55296)+9216+t},DB.isControlCodePoint=function(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159},DB.isUndefinedCodePoint=function(t){return t>=64976&&t<=65007||e.indexOf(t)>-1},DB}function jB(){return SB||(SB=1,EB={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"}),EB}function LB(){if(OB)return kB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}OB=1;const n=NB(),r=jB(),i=n.CODE_POINTS;return kB=function(){return e(function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536},[{key:"_err",value:function(){}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(e){if(this.pos!==this.lastCharPos){const t=this.html.charCodeAt(this.pos+1);if(n.isSurrogatePair(t))return this.pos++,this._addGap(),n.getSurrogatePairCodePoint(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,i.EOF;return this._err(r.surrogateInInputStream),e}},{key:"dropParsedChunk",value:function(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}},{key:"write",value:function(e,t){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=t}},{key:"insertHtmlAtCurrentPos",value:function(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}},{key:"advance",value:function(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,i.EOF;let e=this.html.charCodeAt(this.pos);return this.skipNextNewLine&&e===i.LINE_FEED?(this.skipNextNewLine=!1,this._addGap(),this.advance()):e===i.CARRIAGE_RETURN?(this.skipNextNewLine=!0,i.LINE_FEED):(this.skipNextNewLine=!1,n.isSurrogate(e)&&(e=this._processSurrogate(e)),e>31&&e<127||e===i.LINE_FEED||e===i.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}},{key:"_checkForProblematicCharacters",value:function(e){n.isControlCodePoint(e)?this._err(r.controlCharacterInInputStream):n.isUndefinedCodePoint(e)&&this._err(r.noncharacterInInputStream)}},{key:"retreat",value:function(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}}])}()}function BB(){if(MB)return AB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}MB=1;const n=LB(),r=NB(),i=(CB||(CB=1,PB=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204])),PB),o=jB(),a=r.CODE_POINTS,s=r.CODE_POINT_SEQUENCES,l={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},c="DATA_STATE",u="RCDATA_STATE",h="RAWTEXT_STATE",p="SCRIPT_DATA_STATE",f="PLAINTEXT_STATE",d="TAG_OPEN_STATE",m="END_TAG_OPEN_STATE",g="TAG_NAME_STATE",y="RCDATA_LESS_THAN_SIGN_STATE",v="RCDATA_END_TAG_OPEN_STATE",b="RCDATA_END_TAG_NAME_STATE",_="RAWTEXT_LESS_THAN_SIGN_STATE",w="RAWTEXT_END_TAG_OPEN_STATE",T="RAWTEXT_END_TAG_NAME_STATE",x="SCRIPT_DATA_LESS_THAN_SIGN_STATE",E="SCRIPT_DATA_END_TAG_OPEN_STATE",S="SCRIPT_DATA_END_TAG_NAME_STATE",k="SCRIPT_DATA_ESCAPE_START_STATE",O="SCRIPT_DATA_ESCAPE_START_DASH_STATE",P="SCRIPT_DATA_ESCAPED_STATE",C="SCRIPT_DATA_ESCAPED_DASH_STATE",A="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",M="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE",I="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE",R="SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE",D="SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE",N="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",j="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",L="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",B="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",F="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",z="BEFORE_ATTRIBUTE_NAME_STATE",H="ATTRIBUTE_NAME_STATE",U="AFTER_ATTRIBUTE_NAME_STATE",V="BEFORE_ATTRIBUTE_VALUE_STATE",G="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",X="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",W="ATTRIBUTE_VALUE_UNQUOTED_STATE",Y="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",q="SELF_CLOSING_START_TAG_STATE",$="BOGUS_COMMENT_STATE",K="MARKUP_DECLARATION_OPEN_STATE",Z="COMMENT_START_STATE",Q="COMMENT_START_DASH_STATE",J="COMMENT_STATE",ee="COMMENT_LESS_THAN_SIGN_STATE",te="COMMENT_LESS_THAN_SIGN_BANG_STATE",ne="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE",re="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE",ie="COMMENT_END_DASH_STATE",oe="COMMENT_END_STATE",ae="COMMENT_END_BANG_STATE",se="DOCTYPE_STATE",le="BEFORE_DOCTYPE_NAME_STATE",ce="DOCTYPE_NAME_STATE",ue="AFTER_DOCTYPE_NAME_STATE",he="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE",pe="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE",fe="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE",de="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE",me="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE",ge="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE",ye="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE",ve="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE",be="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE",_e="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE",we="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE",Te="BOGUS_DOCTYPE_STATE",xe="CDATA_SECTION_STATE",Ee="CDATA_SECTION_BRACKET_STATE",Se="CDATA_SECTION_END_STATE",ke="CHARACTER_REFERENCE_STATE",Oe="NAMED_CHARACTER_REFERENCE_STATE",Pe="AMBIGUOS_AMPERSAND_STATE",Ce="NUMERIC_CHARACTER_REFERENCE_STATE",Ae="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE",Me="DECIMAL_CHARACTER_REFERENCE_START_STATE",Ie="HEXADEMICAL_CHARACTER_REFERENCE_STATE",Re="DECIMAL_CHARACTER_REFERENCE_STATE",De="NUMERIC_CHARACTER_REFERENCE_END_STATE";function Ne(e){return e===a.SPACE||e===a.LINE_FEED||e===a.TABULATION||e===a.FORM_FEED}function je(e){return e>=a.DIGIT_0&&e<=a.DIGIT_9}function Le(e){return e>=a.LATIN_CAPITAL_A&&e<=a.LATIN_CAPITAL_Z}function Be(e){return e>=a.LATIN_SMALL_A&&e<=a.LATIN_SMALL_Z}function Fe(e){return Be(e)||Le(e)}function ze(e){return Fe(e)||je(e)}function He(e){return e>=a.LATIN_CAPITAL_A&&e<=a.LATIN_CAPITAL_F}function Ue(e){return e>=a.LATIN_SMALL_A&&e<=a.LATIN_SMALL_F}function Ve(e){return e+32}function Ge(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(e>>>10&1023|55296)+String.fromCharCode(56320|1023&e))}function Xe(e){return String.fromCharCode(Ve(e))}function We(e,t){const n=i[++e];let r=++e,o=r+n-1;for(;r<=o;){const e=r+o>>>1,a=i[e];if(a<t)r=e+1;else{if(!(a>t))return i[e+n];o=e-1}}return-1}let Ye=function(){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.preprocessor=new n,this.tokenQueue=[],this.allowCDATA=!1,this.state=c,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}return e(t,[{key:"_err",value:function(){}},{key:"_errOnNextCodePoint",value:function(e){this._consume(),this._err(e),this._unconsume()}},{key:"getNextToken",value:function(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}},{key:"write",value:function(e,t){this.active=!0,this.preprocessor.write(e,t)}},{key:"insertHtmlAtCurrentPos",value:function(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}},{key:"_ensureHibernation",value:function(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:t.HIBERNATION_TOKEN}),!0}return!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}},{key:"_reconsumeInState",value:function(e){this.state=e,this._unconsume()}},{key:"_consumeSequenceIfMatch",value:function(e,t,n){let r=0,i=!0;const o=e.length;let s,l=0,c=t;for(;l<o;l++){if(l>0&&(c=this._consume(),r++),c===a.EOF){i=!1;break}if(s=e[l],c!==s&&(n||c!==Ve(s))){i=!1;break}}if(!i)for(;r--;)this._unconsume();return i}},{key:"_isTempBufferEqualToScriptString",value:function(){if(this.tempBuff.length!==s.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==s.SCRIPT_STRING[e])return!1;return!0}},{key:"_createStartTagToken",value:function(){this.currentToken={type:t.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:t.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}},{key:"_createCommentToken",value:function(){this.currentToken={type:t.COMMENT_TOKEN,data:""}}},{key:"_createDoctypeToken",value:function(e){this.currentToken={type:t.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}},{key:"_createCharacterToken",value:function(e,t){this.currentCharacterToken={type:e,chars:t}}},{key:"_createEOFToken",value:function(){this.currentToken={type:t.EOF_TOKEN}}},{key:"_createAttr",value:function(e){this.currentAttr={name:e,value:""}}},{key:"_leaveAttrName",value:function(e){null===t.getTokenAttr(this.currentToken,this.currentAttr.name)?this.currentToken.attrs.push(this.currentAttr):this._err(o.duplicateAttribute),this.state=e}},{key:"_leaveAttrValue",value:function(e){this.state=e}},{key:"_emitCurrentToken",value:function(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===t.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===t.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(o.endTagWithAttributes),e.selfClosing&&this._err(o.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}},{key:"_emitCurrentCharacterToken",value:function(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}},{key:"_emitEOFToken",value:function(){this._createEOFToken(),this._emitCurrentToken()}},{key:"_appendCharToCurrentCharacterToken",value:function(e,t){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=t:this._createCharacterToken(e,t)}},{key:"_emitCodePoint",value:function(e){let n=t.CHARACTER_TOKEN;Ne(e)?n=t.WHITESPACE_CHARACTER_TOKEN:e===a.NULL&&(n=t.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(n,Ge(e))}},{key:"_emitSeveralCodePoints",value:function(e){for(let t=0;t<e.length;t++)this._emitCodePoint(e[t])}},{key:"_emitChars",value:function(e){this._appendCharToCurrentCharacterToken(t.CHARACTER_TOKEN,e)}},{key:"_matchNamedCharacterReference",value:function(e){let t=null,n=1,r=We(0,e);for(this.tempBuff.push(e);r>-1;){const e=i[r],o=e<7;o&&1&e&&(t=2&e?[i[++r],i[++r]]:[i[++r]],n=0);const s=this._consume();if(this.tempBuff.push(s),n++,s===a.EOF)break;r=o?4&e?We(r,s):-1:s===e?++r:-1}for(;n--;)this.tempBuff.pop(),this._unconsume();return t}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===G||this.returnState===X||this.returnState===W}},{key:"_isCharacterReferenceAttributeQuirk",value:function(e){if(!e&&this._isCharacterReferenceInAttribute()){const e=this._consume();return this._unconsume(),e===a.EQUALS_SIGN||ze(e)}return!1}},{key:"_flushCodePointsConsumedAsCharacterReference",value:function(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=Ge(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}},{key:c,value:function(e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=d:e===a.AMPERSAND?(this.returnState=c,this.state=ke):e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitCodePoint(e)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}},{key:u,value:function(e){this.preprocessor.dropParsedChunk(),e===a.AMPERSAND?(this.returnState=u,this.state=ke):e===a.LESS_THAN_SIGN?this.state=y:e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}},{key:h,value:function(e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=_:e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}},{key:p,value:function(e){this.preprocessor.dropParsedChunk(),e===a.LESS_THAN_SIGN?this.state=x:e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}},{key:f,value:function(e){this.preprocessor.dropParsedChunk(),e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?this._emitEOFToken():this._emitCodePoint(e)}},{key:d,value:function(e){e===a.EXCLAMATION_MARK?this.state=K:e===a.SOLIDUS?this.state=m:Fe(e)?(this._createStartTagToken(),this._reconsumeInState(g)):e===a.QUESTION_MARK?(this._err(o.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState($)):e===a.EOF?(this._err(o.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(o.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(c))}},{key:m,value:function(e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(g)):e===a.GREATER_THAN_SIGN?(this._err(o.missingEndTagName),this.state=c):e===a.EOF?(this._err(o.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(o.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState($))}},{key:g,value:function(e){Ne(e)?this.state=z:e===a.SOLIDUS?this.state=q:e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):Le(e)?this.currentToken.tagName+=Xe(e):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.tagName+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=Ge(e)}},{key:y,value:function(e){e===a.SOLIDUS?(this.tempBuff=[],this.state=v):(this._emitChars("<"),this._reconsumeInState(u))}},{key:v,value:function(e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(b)):(this._emitChars("</"),this._reconsumeInState(u))}},{key:b,value:function(e){if(Le(e))this.currentToken.tagName+=Xe(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Ne(e))return void(this.state=z);if(e===a.SOLIDUS)return void(this.state=q);if(e===a.GREATER_THAN_SIGN)return this.state=c,void this._emitCurrentToken()}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(u)}}},{key:_,value:function(e){e===a.SOLIDUS?(this.tempBuff=[],this.state=w):(this._emitChars("<"),this._reconsumeInState(h))}},{key:w,value:function(e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(T)):(this._emitChars("</"),this._reconsumeInState(h))}},{key:T,value:function(e){if(Le(e))this.currentToken.tagName+=Xe(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Ne(e))return void(this.state=z);if(e===a.SOLIDUS)return void(this.state=q);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=c)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(h)}}},{key:x,value:function(e){e===a.SOLIDUS?(this.tempBuff=[],this.state=E):e===a.EXCLAMATION_MARK?(this.state=k,this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState(p))}},{key:E,value:function(e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(S)):(this._emitChars("</"),this._reconsumeInState(p))}},{key:S,value:function(e){if(Le(e))this.currentToken.tagName+=Xe(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Ne(e))return void(this.state=z);if(e===a.SOLIDUS)return void(this.state=q);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=c)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(p)}}},{key:k,value:function(e){e===a.HYPHEN_MINUS?(this.state=O,this._emitChars("-")):this._reconsumeInState(p)}},{key:O,value:function(e){e===a.HYPHEN_MINUS?(this.state=A,this._emitChars("-")):this._reconsumeInState(p)}},{key:P,value:function(e){e===a.HYPHEN_MINUS?(this.state=C,this._emitChars("-")):e===a.LESS_THAN_SIGN?this.state=M:e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}},{key:C,value:function(e){e===a.HYPHEN_MINUS?(this.state=A,this._emitChars("-")):e===a.LESS_THAN_SIGN?this.state=M:e===a.NULL?(this._err(o.unexpectedNullCharacter),this.state=P,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=P,this._emitCodePoint(e))}},{key:A,value:function(e){e===a.HYPHEN_MINUS?this._emitChars("-"):e===a.LESS_THAN_SIGN?this.state=M:e===a.GREATER_THAN_SIGN?(this.state=p,this._emitChars(">")):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.state=P,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=P,this._emitCodePoint(e))}},{key:M,value:function(e){e===a.SOLIDUS?(this.tempBuff=[],this.state=I):Fe(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState(D)):(this._emitChars("<"),this._reconsumeInState(P))}},{key:I,value:function(e){Fe(e)?(this._createEndTagToken(),this._reconsumeInState(R)):(this._emitChars("</"),this._reconsumeInState(P))}},{key:R,value:function(e){if(Le(e))this.currentToken.tagName+=Xe(e),this.tempBuff.push(e);else if(Be(e))this.currentToken.tagName+=Ge(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(Ne(e))return void(this.state=z);if(e===a.SOLIDUS)return void(this.state=q);if(e===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=c)}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(P)}}},{key:D,value:function(e){Ne(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?N:P,this._emitCodePoint(e)):Le(e)?(this.tempBuff.push(Ve(e)),this._emitCodePoint(e)):Be(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(P)}},{key:N,value:function(e){e===a.HYPHEN_MINUS?(this.state=j,this._emitChars("-")):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.NULL?(this._err(o.unexpectedNullCharacter),this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}},{key:j,value:function(e){e===a.HYPHEN_MINUS?(this.state=L,this._emitChars("-")):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.state=N,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=N,this._emitCodePoint(e))}},{key:L,value:function(e){e===a.HYPHEN_MINUS?this._emitChars("-"):e===a.LESS_THAN_SIGN?(this.state=B,this._emitChars("<")):e===a.GREATER_THAN_SIGN?(this.state=p,this._emitChars(">")):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.state=N,this._emitChars(r.REPLACEMENT_CHARACTER)):e===a.EOF?(this._err(o.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=N,this._emitCodePoint(e))}},{key:B,value:function(e){e===a.SOLIDUS?(this.tempBuff=[],this.state=F,this._emitChars("/")):this._reconsumeInState(N)}},{key:F,value:function(e){Ne(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?P:N,this._emitCodePoint(e)):Le(e)?(this.tempBuff.push(Ve(e)),this._emitCodePoint(e)):Be(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(N)}},{key:z,value:function(e){Ne(e)||(e===a.SOLIDUS||e===a.GREATER_THAN_SIGN||e===a.EOF?this._reconsumeInState(U):e===a.EQUALS_SIGN?(this._err(o.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=H):(this._createAttr(""),this._reconsumeInState(H)))}},{key:H,value:function(e){Ne(e)||e===a.SOLIDUS||e===a.GREATER_THAN_SIGN||e===a.EOF?(this._leaveAttrName(U),this._unconsume()):e===a.EQUALS_SIGN?this._leaveAttrName(V):Le(e)?this.currentAttr.name+=Xe(e):e===a.QUOTATION_MARK||e===a.APOSTROPHE||e===a.LESS_THAN_SIGN?(this._err(o.unexpectedCharacterInAttributeName),this.currentAttr.name+=Ge(e)):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentAttr.name+=r.REPLACEMENT_CHARACTER):this.currentAttr.name+=Ge(e)}},{key:U,value:function(e){Ne(e)||(e===a.SOLIDUS?this.state=q:e===a.EQUALS_SIGN?this.state=V:e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState(H)))}},{key:V,value:function(e){Ne(e)||(e===a.QUOTATION_MARK?this.state=G:e===a.APOSTROPHE?this.state=X:e===a.GREATER_THAN_SIGN?(this._err(o.missingAttributeValue),this.state=c,this._emitCurrentToken()):this._reconsumeInState(W))}},{key:G,value:function(e){e===a.QUOTATION_MARK?this.state=Y:e===a.AMPERSAND?(this.returnState=G,this.state=ke):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ge(e)}},{key:X,value:function(e){e===a.APOSTROPHE?this.state=Y:e===a.AMPERSAND?(this.returnState=X,this.state=ke):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ge(e)}},{key:W,value:function(e){Ne(e)?this._leaveAttrValue(z):e===a.AMPERSAND?(this.returnState=W,this.state=ke):e===a.GREATER_THAN_SIGN?(this._leaveAttrValue(c),this._emitCurrentToken()):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentAttr.value+=r.REPLACEMENT_CHARACTER):e===a.QUOTATION_MARK||e===a.APOSTROPHE||e===a.LESS_THAN_SIGN||e===a.EQUALS_SIGN||e===a.GRAVE_ACCENT?(this._err(o.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=Ge(e)):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Ge(e)}},{key:Y,value:function(e){Ne(e)?this._leaveAttrValue(z):e===a.SOLIDUS?this._leaveAttrValue(q):e===a.GREATER_THAN_SIGN?(this._leaveAttrValue(c),this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):(this._err(o.missingWhitespaceBetweenAttributes),this._reconsumeInState(z))}},{key:q,value:function(e){e===a.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInTag),this._emitEOFToken()):(this._err(o.unexpectedSolidusInTag),this._reconsumeInState(z))}},{key:$,value:function(e){e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):e===a.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.data+=r.REPLACEMENT_CHARACTER):this.currentToken.data+=Ge(e)}},{key:K,value:function(e){this._consumeSequenceIfMatch(s.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state=Z):this._consumeSequenceIfMatch(s.DOCTYPE_STRING,e,!1)?this.state=se:this._consumeSequenceIfMatch(s.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state=xe:(this._err(o.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state=$):this._ensureHibernation()||(this._err(o.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState($))}},{key:Z,value:function(e){e===a.HYPHEN_MINUS?this.state=Q:e===a.GREATER_THAN_SIGN?(this._err(o.abruptClosingOfEmptyComment),this.state=c,this._emitCurrentToken()):this._reconsumeInState(J)}},{key:Q,value:function(e){e===a.HYPHEN_MINUS?this.state=oe:e===a.GREATER_THAN_SIGN?(this._err(o.abruptClosingOfEmptyComment),this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(J))}},{key:J,value:function(e){e===a.HYPHEN_MINUS?this.state=ie:e===a.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state=ee):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.data+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(o.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=Ge(e)}},{key:ee,value:function(e){e===a.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state=te):e===a.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState(J)}},{key:te,value:function(e){e===a.HYPHEN_MINUS?this.state=ne:this._reconsumeInState(J)}},{key:ne,value:function(e){e===a.HYPHEN_MINUS?this.state=re:this._reconsumeInState(ie)}},{key:re,value:function(e){e!==a.GREATER_THAN_SIGN&&e!==a.EOF&&this._err(o.nestedComment),this._reconsumeInState(oe)}},{key:ie,value:function(e){e===a.HYPHEN_MINUS?this.state=oe:e===a.EOF?(this._err(o.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(J))}},{key:oe,value:function(e){e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):e===a.EXCLAMATION_MARK?this.state=ae:e===a.HYPHEN_MINUS?this.currentToken.data+="-":e===a.EOF?(this._err(o.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState(J))}},{key:ae,value:function(e){e===a.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state=ie):e===a.GREATER_THAN_SIGN?(this._err(o.incorrectlyClosedComment),this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState(J))}},{key:se,value:function(e){Ne(e)?this.state=le:e===a.GREATER_THAN_SIGN?this._reconsumeInState(le):e===a.EOF?(this._err(o.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingWhitespaceBeforeDoctypeName),this._reconsumeInState(le))}},{key:le,value:function(e){Ne(e)||(Le(e)?(this._createDoctypeToken(Xe(e)),this.state=ce):e===a.NULL?(this._err(o.unexpectedNullCharacter),this._createDoctypeToken(r.REPLACEMENT_CHARACTER),this.state=ce):e===a.GREATER_THAN_SIGN?(this._err(o.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(Ge(e)),this.state=ce))}},{key:ce,value:function(e){Ne(e)?this.state=ue:e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):Le(e)?this.currentToken.name+=Xe(e):e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.name+=r.REPLACEMENT_CHARACTER):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=Ge(e)}},{key:ue,value:function(e){Ne(e)||(e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(s.PUBLIC_STRING,e,!1)?this.state=he:this._consumeSequenceIfMatch(s.SYSTEM_STRING,e,!1)?this.state=ye:this._ensureHibernation()||(this._err(o.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te)))}},{key:he,value:function(e){Ne(e)?this.state=pe:e===a.QUOTATION_MARK?(this._err(o.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=fe):e===a.APOSTROPHE?(this._err(o.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=de):e===a.GREATER_THAN_SIGN?(this._err(o.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te))}},{key:pe,value:function(e){Ne(e)||(e===a.QUOTATION_MARK?(this.currentToken.publicId="",this.state=fe):e===a.APOSTROPHE?(this.currentToken.publicId="",this.state=de):e===a.GREATER_THAN_SIGN?(this._err(o.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te)))}},{key:fe,value:function(e){e===a.QUOTATION_MARK?this.state=me:e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.publicId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(o.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Ge(e)}},{key:de,value:function(e){e===a.APOSTROPHE?this.state=me:e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.publicId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(o.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Ge(e)}},{key:me,value:function(e){Ne(e)?this.state=ge:e===a.GREATER_THAN_SIGN?(this.state=c,this._emitCurrentToken()):e===a.QUOTATION_MARK?(this._err(o.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=be):e===a.APOSTROPHE?(this._err(o.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=_e):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te))}},{key:ge,value:function(e){Ne(e)||(e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=c):e===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state=be):e===a.APOSTROPHE?(this.currentToken.systemId="",this.state=_e):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te)))}},{key:ye,value:function(e){Ne(e)?this.state=ve:e===a.QUOTATION_MARK?(this._err(o.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=be):e===a.APOSTROPHE?(this._err(o.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=_e):e===a.GREATER_THAN_SIGN?(this._err(o.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te))}},{key:ve,value:function(e){Ne(e)||(e===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state=be):e===a.APOSTROPHE?(this.currentToken.systemId="",this.state=_e):e===a.GREATER_THAN_SIGN?(this._err(o.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=c,this._emitCurrentToken()):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(Te)))}},{key:be,value:function(e){e===a.QUOTATION_MARK?this.state=we:e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.systemId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(o.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Ge(e)}},{key:_e,value:function(e){e===a.APOSTROPHE?this.state=we:e===a.NULL?(this._err(o.unexpectedNullCharacter),this.currentToken.systemId+=r.REPLACEMENT_CHARACTER):e===a.GREATER_THAN_SIGN?(this._err(o.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Ge(e)}},{key:we,value:function(e){Ne(e)||(e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=c):e===a.EOF?(this._err(o.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(o.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState(Te)))}},{key:Te,value:function(e){e===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=c):e===a.NULL?this._err(o.unexpectedNullCharacter):e===a.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}},{key:xe,value:function(e){e===a.RIGHT_SQUARE_BRACKET?this.state=Ee:e===a.EOF?(this._err(o.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}},{key:Ee,value:function(e){e===a.RIGHT_SQUARE_BRACKET?this.state=Se:(this._emitChars("]"),this._reconsumeInState(xe))}},{key:Se,value:function(e){e===a.GREATER_THAN_SIGN?this.state=c:e===a.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState(xe))}},{key:ke,value:function(e){this.tempBuff=[a.AMPERSAND],e===a.NUMBER_SIGN?(this.tempBuff.push(e),this.state=Ce):ze(e)?this._reconsumeInState(Oe):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}},{key:Oe,value:function(e){const t=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[a.AMPERSAND];else if(t){const e=this.tempBuff[this.tempBuff.length-1]===a.SEMICOLON;this._isCharacterReferenceAttributeQuirk(e)||(e||this._errOnNextCodePoint(o.missingSemicolonAfterCharacterReference),this.tempBuff=t),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state=Pe}},{key:Pe,value:function(e){ze(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=Ge(e):this._emitCodePoint(e):(e===a.SEMICOLON&&this._err(o.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}},{key:Ce,value:function(e){this.charRefCode=0,e===a.LATIN_SMALL_X||e===a.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state=Ae):this._reconsumeInState(Me)}},{key:Ae,value:function(e){!function(e){return je(e)||He(e)||Ue(e)}(e)?(this._err(o.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)):this._reconsumeInState(Ie)}},{key:Me,value:function(e){je(e)?this._reconsumeInState(Re):(this._err(o.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}},{key:Ie,value:function(e){He(e)?this.charRefCode=16*this.charRefCode+e-55:Ue(e)?this.charRefCode=16*this.charRefCode+e-87:je(e)?this.charRefCode=16*this.charRefCode+e-48:e===a.SEMICOLON?this.state=De:(this._err(o.missingSemicolonAfterCharacterReference),this._reconsumeInState(De))}},{key:Re,value:function(e){je(e)?this.charRefCode=10*this.charRefCode+e-48:e===a.SEMICOLON?this.state=De:(this._err(o.missingSemicolonAfterCharacterReference),this._reconsumeInState(De))}},{key:De,value:function(){if(this.charRefCode===a.NULL)this._err(o.nullCharacterReference),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(o.characterReferenceOutsideUnicodeRange),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(r.isSurrogate(this.charRefCode))this._err(o.surrogateCharacterReference),this.charRefCode=a.REPLACEMENT_CHARACTER;else if(r.isUndefinedCodePoint(this.charRefCode))this._err(o.noncharacterCharacterReference);else if(r.isControlCodePoint(this.charRefCode)||this.charRefCode===a.CARRIAGE_RETURN){this._err(o.controlCharacterReference);const e=l[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}}])}();return Ye.CHARACTER_TOKEN="CHARACTER_TOKEN",Ye.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",Ye.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",Ye.START_TAG_TOKEN="START_TAG_TOKEN",Ye.END_TAG_TOKEN="END_TAG_TOKEN",Ye.COMMENT_TOKEN="COMMENT_TOKEN",Ye.DOCTYPE_TOKEN="DOCTYPE_TOKEN",Ye.EOF_TOKEN="EOF_TOKEN",Ye.HIBERNATION_TOKEN="HIBERNATION_TOKEN",Ye.MODE={DATA:c,RCDATA:u,RAWTEXT:h,SCRIPT_DATA:p,PLAINTEXT:f},Ye.getTokenAttr=function(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null},AB=Ye}var FB,zB,HB,UB,VB,GB,XB,WB,YB,qB,$B,KB,ZB,QB,JB,eF,tF,nF,rF,iF,oF,aF,sF,lF={};function cF(){if(FB)return lF;FB=1;const e=lF.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};lF.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},lF.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const t=lF.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};return lF.SPECIAL_ELEMENTS={[e.HTML]:{[t.ADDRESS]:!0,[t.APPLET]:!0,[t.AREA]:!0,[t.ARTICLE]:!0,[t.ASIDE]:!0,[t.BASE]:!0,[t.BASEFONT]:!0,[t.BGSOUND]:!0,[t.BLOCKQUOTE]:!0,[t.BODY]:!0,[t.BR]:!0,[t.BUTTON]:!0,[t.CAPTION]:!0,[t.CENTER]:!0,[t.COL]:!0,[t.COLGROUP]:!0,[t.DD]:!0,[t.DETAILS]:!0,[t.DIR]:!0,[t.DIV]:!0,[t.DL]:!0,[t.DT]:!0,[t.EMBED]:!0,[t.FIELDSET]:!0,[t.FIGCAPTION]:!0,[t.FIGURE]:!0,[t.FOOTER]:!0,[t.FORM]:!0,[t.FRAME]:!0,[t.FRAMESET]:!0,[t.H1]:!0,[t.H2]:!0,[t.H3]:!0,[t.H4]:!0,[t.H5]:!0,[t.H6]:!0,[t.HEAD]:!0,[t.HEADER]:!0,[t.HGROUP]:!0,[t.HR]:!0,[t.HTML]:!0,[t.IFRAME]:!0,[t.IMG]:!0,[t.INPUT]:!0,[t.LI]:!0,[t.LINK]:!0,[t.LISTING]:!0,[t.MAIN]:!0,[t.MARQUEE]:!0,[t.MENU]:!0,[t.META]:!0,[t.NAV]:!0,[t.NOEMBED]:!0,[t.NOFRAMES]:!0,[t.NOSCRIPT]:!0,[t.OBJECT]:!0,[t.OL]:!0,[t.P]:!0,[t.PARAM]:!0,[t.PLAINTEXT]:!0,[t.PRE]:!0,[t.SCRIPT]:!0,[t.SECTION]:!0,[t.SELECT]:!0,[t.SOURCE]:!0,[t.STYLE]:!0,[t.SUMMARY]:!0,[t.TABLE]:!0,[t.TBODY]:!0,[t.TD]:!0,[t.TEMPLATE]:!0,[t.TEXTAREA]:!0,[t.TFOOT]:!0,[t.TH]:!0,[t.THEAD]:!0,[t.TITLE]:!0,[t.TR]:!0,[t.TRACK]:!0,[t.UL]:!0,[t.WBR]:!0,[t.XMP]:!0},[e.MATHML]:{[t.MI]:!0,[t.MO]:!0,[t.MN]:!0,[t.MS]:!0,[t.MTEXT]:!0,[t.ANNOTATION_XML]:!0},[e.SVG]:{[t.TITLE]:!0,[t.FOREIGN_OBJECT]:!0,[t.DESC]:!0}},lF}function uF(){if(HB)return zB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}HB=1;const n=cF(),r=n.TAG_NAMES,i=n.NAMESPACES;function o(e){switch(e.length){case 1:return e===r.P;case 2:return e===r.RB||e===r.RP||e===r.RT||e===r.DD||e===r.DT||e===r.LI;case 3:return e===r.RTC;case 6:return e===r.OPTION;case 8:return e===r.OPTGROUP}return!1}function a(e){switch(e.length){case 1:return e===r.P;case 2:return e===r.RB||e===r.RP||e===r.RT||e===r.DD||e===r.DT||e===r.LI||e===r.TD||e===r.TH||e===r.TR;case 3:return e===r.RTC;case 5:return e===r.TBODY||e===r.TFOOT||e===r.THEAD;case 6:return e===r.OPTION;case 7:return e===r.CAPTION;case 8:return e===r.OPTGROUP||e===r.COLGROUP}return!1}function s(e,t){switch(e.length){case 2:if(e===r.TD||e===r.TH)return t===i.HTML;if(e===r.MI||e===r.MO||e===r.MN||e===r.MS)return t===i.MATHML;break;case 4:if(e===r.HTML)return t===i.HTML;if(e===r.DESC)return t===i.SVG;break;case 5:if(e===r.TABLE)return t===i.HTML;if(e===r.MTEXT)return t===i.MATHML;if(e===r.TITLE)return t===i.SVG;break;case 6:return(e===r.APPLET||e===r.OBJECT)&&t===i.HTML;case 7:return(e===r.CAPTION||e===r.MARQUEE)&&t===i.HTML;case 8:return e===r.TEMPLATE&&t===i.HTML;case 13:return e===r.FOREIGN_OBJECT&&t===i.SVG;case 14:return e===r.ANNOTATION_XML&&t===i.MATHML}return!1}return zB=function(){return e(function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.stackTop=-1,this.items=[],this.current=t,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=n},[{key:"_indexOf",value:function(e){let t=-1;for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){t=n;break}return t}},{key:"_isInTemplate",value:function(){return this.currentTagName===r.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===i.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}},{key:"push",value:function(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}},{key:"pop",value:function(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}},{key:"replace",value:function(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&this._updateCurrentElement()}},{key:"insertAfter",value:function(e,t){const n=this._indexOf(e)+1;this.items.splice(n,0,t),n===++this.stackTop&&this._updateCurrentElement()}},{key:"popUntilTagNamePopped",value:function(e){for(;this.stackTop>-1;){const t=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===e&&n===i.HTML)break}}},{key:"popUntilElementPopped",value:function(e){for(;this.stackTop>-1;){const t=this.current;if(this.pop(),t===e)break}}},{key:"popUntilNumberedHeaderPopped",value:function(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===r.H1||e===r.H2||e===r.H3||e===r.H4||e===r.H5||e===r.H6&&t===i.HTML)break}}},{key:"popUntilTableCellPopped",value:function(){for(;this.stackTop>-1;){const e=this.currentTagName,t=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===r.TD||e===r.TH&&t===i.HTML)break}}},{key:"popAllUpToHtmlElement",value:function(){this.stackTop=0,this._updateCurrentElement()}},{key:"clearBackToTableContext",value:function(){for(;this.currentTagName!==r.TABLE&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==i.HTML;)this.pop()}},{key:"clearBackToTableBodyContext",value:function(){for(;this.currentTagName!==r.TBODY&&this.currentTagName!==r.TFOOT&&this.currentTagName!==r.THEAD&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==i.HTML;)this.pop()}},{key:"clearBackToTableRowContext",value:function(){for(;this.currentTagName!==r.TR&&this.currentTagName!==r.TEMPLATE&&this.currentTagName!==r.HTML||this.treeAdapter.getNamespaceURI(this.current)!==i.HTML;)this.pop()}},{key:"remove",value:function(e){for(let t=this.stackTop;t>=0;t--)if(this.items[t]===e){this.items.splice(t,1),this.stackTop--,this._updateCurrentElement();break}}},{key:"tryPeekProperlyNestedBodyElement",value:function(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===r.BODY?e:null}},{key:"contains",value:function(e){return this._indexOf(e)>-1}},{key:"getCommonAncestor",value:function(e){let t=this._indexOf(e);return--t>=0?this.items[t]:null}},{key:"isRootHtmlElementCurrent",value:function(){return 0===this.stackTop&&this.currentTagName===r.HTML}},{key:"hasInScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),r=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&r===i.HTML)return!0;if(s(n,r))return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]),n=this.treeAdapter.getNamespaceURI(this.items[e]);if((t===r.H1||t===r.H2||t===r.H3||t===r.H4||t===r.H5||t===r.H6)&&n===i.HTML)return!0;if(s(t,n))return!1}return!0}},{key:"hasInListItemScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),o=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&o===i.HTML)return!0;if((n===r.UL||n===r.OL)&&o===i.HTML||s(n,o))return!1}return!0}},{key:"hasInButtonScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]),o=this.treeAdapter.getNamespaceURI(this.items[t]);if(n===e&&o===i.HTML)return!0;if(n===r.BUTTON&&o===i.HTML||s(n,o))return!1}return!0}},{key:"hasInTableScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===i.HTML){if(n===e)return!0;if(n===r.TABLE||n===r.TEMPLATE||n===r.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let e=this.stackTop;e>=0;e--){const t=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===i.HTML){if(t===r.TBODY||t===r.THEAD||t===r.TFOOT)return!0;if(t===r.TABLE||t===r.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(e){for(let t=this.stackTop;t>=0;t--){const n=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===i.HTML){if(n===e)return!0;if(n!==r.OPTION&&n!==r.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;o(this.currentTagName);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;a(this.currentTagName);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(e){for(;o(this.currentTagName)&&this.currentTagName!==e;)this.pop()}}])}()}function hF(){if(VB)return UB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}VB=1;let n=function(){function t(e){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}return e(t,[{key:"_getNoahArkConditionCandidates",value:function(e){const n=[];if(this.length>=3){const r=this.treeAdapter.getAttrList(e).length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let e=this.length-1;e>=0;e--){const a=this.entries[e];if(a.type===t.MARKER_ENTRY)break;const s=a.element,l=this.treeAdapter.getAttrList(s);this.treeAdapter.getTagName(s)===i&&this.treeAdapter.getNamespaceURI(s)===o&&l.length===r&&n.push({idx:e,attrs:l})}}return n.length<3?[]:n}},{key:"_ensureNoahArkCondition",value:function(e){const t=this._getNoahArkConditionCandidates(e);let n=t.length;if(n){const r=this.treeAdapter.getAttrList(e),i=r.length,o=Object.create(null);for(let e=0;e<i;e++){const t=r[e];o[t.name]=t.value}for(let e=0;e<i;e++)for(let r=0;r<n;r++){const i=t[r].attrs[e];if(o[i.name]!==i.value&&(t.splice(r,1),n--),t.length<3)return}for(let e=n-1;e>=2;e--)this.entries.splice(t[e].idx,1),this.length--}}},{key:"insertMarker",value:function(){this.entries.push({type:t.MARKER_ENTRY}),this.length++}},{key:"pushElement",value:function(e,n){this._ensureNoahArkCondition(e),this.entries.push({type:t.ELEMENT_ENTRY,element:e,token:n}),this.length++}},{key:"insertElementAfterBookmark",value:function(e,n){let r=this.length-1;for(;r>=0&&this.entries[r]!==this.bookmark;r--);this.entries.splice(r+1,0,{type:t.ELEMENT_ENTRY,element:e,token:n}),this.length++}},{key:"removeEntry",value:function(e){for(let t=this.length-1;t>=0;t--)if(this.entries[t]===e){this.entries.splice(t,1),this.length--;break}}},{key:"clearToLastMarker",value:function(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===t.MARKER_ENTRY)break}}},{key:"getElementEntryInScopeWithTagName",value:function(e){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===t.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(r.element)===e)return r}return null}},{key:"getElementEntry",value:function(e){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===t.ELEMENT_ENTRY&&r.element===e)return r}return null}}])}();return n.MARKER_ENTRY="MARKER_ENTRY",n.ELEMENT_ENTRY="ELEMENT_ENTRY",UB=n}function pF(){if(XB)return GB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}XB=1;let n=function(){return e(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);const n={},r=this._getOverriddenMethods(this,n);for(const i of Object.keys(r))"function"==typeof r[i]&&(n[i]=t[i],t[i]=r[i])},[{key:"_getOverriddenMethods",value:function(){throw new Error("Not implemented")}}])}();return n.install=function(e,t,n){e.__mixins||(e.__mixins=[]);for(let i=0;i<e.__mixins.length;i++)if(e.__mixins[i].constructor===t)return e.__mixins[i];const r=new t(e,n);return e.__mixins.push(r),r},GB=n}function fF(){if(YB)return WB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}YB=1;const a=pF();return WB=function(t){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n(this,r,[e])).preprocessor=e,t.isEol=!1,t.lineStartPos=0,t.droppedBufferSize=0,t.offset=0,t.col=0,t.line=1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_getOverriddenMethods",value:function(e,t){return{advance(){const n=this.pos+1,r=this.html[n];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=n),("\n"===r||"\r"===r&&"\n"!==this.html[n+1])&&(e.isEol=!0),e.col=n-e.lineStartPos+1,e.offset=e.droppedBufferSize+n,t.advance.call(this)},retreat(){t.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const n=this.pos;t.dropParsedChunk.call(this);const r=n-this.pos;e.lineStartPos-=r,e.droppedBufferSize+=r,e.offset=e.droppedBufferSize+this.pos}}}}])}(a)}function dF(){if($B)return qB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}$B=1;const a=pF(),s=BB(),l=fF();return qB=function(t){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n(this,r,[e])).tokenizer=e,t.posTracker=a.install(e.preprocessor,l),t.currentAttrLocation=null,t.ctLoc=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_getCurrentLocation",value:function(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}},{key:"_attachCurrentAttrLocationInfo",value:function(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,t=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[t.name]=this.currentAttrLocation}},{key:"_getOverriddenMethods",value:function(e,t){const n={_createStartTagToken(){t._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){t._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){t._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(n){t._createDoctypeToken.call(this,n),this.currentToken.location=e.ctLoc},_createCharacterToken(n,r){t._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){t._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(n){t._createAttr.call(this,n),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(n){t._leaveAttrName.call(this,n),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(n){t._leaveAttrValue.call(this,n),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const n=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentToken.type===s.EOF_TOKEN?(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset):(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col+1,n.endOffset=e.posTracker.offset+1),t._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const n=this.currentCharacterToken&&this.currentCharacterToken.location;n&&-1===n.endOffset&&(n.endLine=e.posTracker.line,n.endCol=e.posTracker.col,n.endOffset=e.posTracker.offset),t._emitCurrentCharacterToken.call(this)}};return Object.keys(s.MODE).forEach(r=>{const i=s.MODE[r];n[i]=function(n){e.ctLoc=e._getCurrentLocation(),t[i].call(this,n)}}),n}}])}(a)}function mF(){if(ZB)return KB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}ZB=1;const a=pF();return KB=function(t){function r(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n(this,r,[e])).onItemPop=t.onItemPop,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_getOverriddenMethods",value:function(e,t){return{pop(){e.onItemPop(this.current),t.pop.call(this)},popAllUpToHtmlElement(){for(let t=this.stackTop;t>0;t--)e.onItemPop(this.items[t]);t.popAllUpToHtmlElement.call(this)},remove(n){e.onItemPop(this.current),t.remove.call(this,n)}}}}])}(a)}function gF(){if(JB)return QB;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}JB=1;const a=pF(),s=BB(),l=dF(),c=mF(),u=cF().TAG_NAMES;return QB=function(t){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n(this,r,[e])).parser=e,t.treeAdapter=t.parser.treeAdapter,t.posTracker=null,t.lastStartTagToken=null,t.lastFosterParentingLocation=null,t.currentToken=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_setStartLocation",value:function(e){let t=null;this.lastStartTagToken&&(t=Object.assign({},this.lastStartTagToken.location),t.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,t)}},{key:"_setEndLocation",value:function(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i={};t.type===s.END_TAG_TOKEN&&r===t.tagName?(i.endTag=Object.assign({},n),i.endLine=n.endLine,i.endCol=n.endCol,i.endOffset=n.endOffset):(i.endLine=n.startLine,i.endCol=n.startCol,i.endOffset=n.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}},{key:"_getOverriddenMethods",value:function(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=a.install(this.tokenizer,l);e.posTracker=i.posTracker,a.install(this.openElements,c,{onItemPop:function(t){e._setEndLocation(t,e.currentToken)}})},_runParsingLoop(n){t._runParsingLoop.call(this,n);for(let t=this.openElements.stackTop;t>=0;t--)e._setEndLocation(this.openElements.items[t],e.currentToken)},_processTokenInForeignContent(n){e.currentToken=n,t._processTokenInForeignContent.call(this,n)},_processToken(n){if(e.currentToken=n,t._processToken.call(this,n),n.type===s.END_TAG_TOKEN&&(n.tagName===u.HTML||n.tagName===u.BODY&&this.openElements.hasInScope(u.BODY)))for(let t=this.openElements.stackTop;t>=0;t--){const r=this.openElements.items[t];if(this.treeAdapter.getTagName(r)===n.tagName){e._setEndLocation(r,n);break}}},_setDocumentType(e){t._setDocumentType.call(this,e);const n=this.treeAdapter.getChildNodes(this.document),r=n.length;for(let t=0;t<r;t++){const r=n[t];if(this.treeAdapter.isDocumentTypeNode(r)){this.treeAdapter.setNodeSourceCodeLocation(r,e.location);break}}},_attachElementToTree(n){e._setStartLocation(n),e.lastStartTagToken=null,t._attachElementToTree.call(this,n)},_appendElement(n,r){e.lastStartTagToken=n,t._appendElement.call(this,n,r)},_insertElement(n,r){e.lastStartTagToken=n,t._insertElement.call(this,n,r)},_insertTemplate(n){e.lastStartTagToken=n,t._insertTemplate.call(this,n);const r=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(r,null)},_insertFakeRootElement(){t._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(e,n){t._appendCommentNode.call(this,e,n);const r=this.treeAdapter.getChildNodes(n),i=r[r.length-1];this.treeAdapter.setNodeSourceCodeLocation(i,e.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=t._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(n){t._insertCharacters.call(this,n);const r=this._shouldFosterParentOnInsertion(),i=r&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,o=this.treeAdapter.getChildNodes(i),a=r&&e.lastFosterParentingLocation.beforeElement?o.indexOf(e.lastFosterParentingLocation.beforeElement)-1:o.length-1,s=o[a];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:e,endCol:t,endOffset:r}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:e,endCol:t,endOffset:r})}else this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}}}])}(a)}function yF(){if(tF)return eF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}tF=1;const a=pF();return eF=function(t){function r(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n(this,r,[e])).posTracker=null,i.onParseError=t.onParseError,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_setErrorLocation",value:function(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}},{key:"_reportError",value:function(e){const t={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(t),this.onParseError(t)}},{key:"_getOverriddenMethods",value:function(e){return{_err(t){e._reportError(t)}}}}])}(a)}function vF(){if(rF)return nF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=o(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],o(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(){return i=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(null,arguments)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}rF=1;const s=yF(),l=fF(),c=pF();return nF=function(t){function r(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n(this,r,[e,t])).posTracker=c.install(e,l),i.lastErrOffset=-1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(r,t),e(r,[{key:"_reportError",value:function(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,function(e,t,n){var r=i(o(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(r,"_reportError",this)([e]))}}])}(s)}function bF(){if(oF)return iF;function e(e,r,i){return r=n(r),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,t()?Reflect.construct(r,i||[],n(e).constructor):r.apply(e,i))}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t=function(){return!!e})()}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}oF=1;const i=yF(),o=vF(),a=pF();return iF=function(t){function n(t,r){var i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,n),i=e(this,n,[t,r]);const s=a.install(t.preprocessor,o,r);return i.posTracker=s.posTracker,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(n,t),function(e){return Object.defineProperty(e,"prototype",{writable:!1}),e}(n)}(i)}function _F(){if(sF)return aF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n(e,t,n){return t=i(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,n||[],i(e).constructor):t.apply(e,n))}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r=function(){return!!e})()}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}sF=1;const a=yF(),s=bF(),l=dF(),c=pF();return aF=function(t){function r(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=n(this,r,[e,t])).opts=t,i.ctLoc=null,i.locBeforeToken=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,t),e(r,[{key:"_setErrorLocation",value:function(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}},{key:"_getOverriddenMethods",value:function(e,t){return{_bootstrap(n,r){t._bootstrap.call(this,n,r),c.install(this.tokenizer,s,e.opts),c.install(this.tokenizer,l)},_processInputToken(n){e.ctLoc=n.location,t._processInputToken.call(this,n)},_err(t,n){e.locBeforeToken=n&&n.beforeToken,e._reportError(t)}}}}])}(a)}var wF,TF,xF,EF={};function SF(){if(wF)return EF;wF=1;const{DOCUMENT_MODE:e}=cF();EF.createDocument=function(){return{nodeName:"#document",mode:e.NO_QUIRKS,childNodes:[]}},EF.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},EF.createElement=function(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},EF.createCommentNode=function(e){return{nodeName:"#comment",data:e,parentNode:null}};const t=function(e){return{nodeName:"#text",value:e,parentNode:null}},n=EF.appendChild=function(e,t){e.childNodes.push(t),t.parentNode=e},r=EF.insertBefore=function(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e};return EF.setTemplateContent=function(e,t){e.content=t},EF.getTemplateContent=function(e){return e.content},EF.setDocumentType=function(e,t,r,i){let o=null;for(let n=0;n<e.childNodes.length;n++)if("#documentType"===e.childNodes[n].nodeName){o=e.childNodes[n];break}o?(o.name=t,o.publicId=r,o.systemId=i):n(e,{nodeName:"#documentType",name:t,publicId:r,systemId:i})},EF.setDocumentMode=function(e,t){e.mode=t},EF.getDocumentMode=function(e){return e.mode},EF.detachNode=function(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},EF.insertText=function(e,r){if(e.childNodes.length){const t=e.childNodes[e.childNodes.length-1];if("#text"===t.nodeName)return void(t.value+=r)}n(e,t(r))},EF.insertTextBefore=function(e,n,i){const o=e.childNodes[e.childNodes.indexOf(i)-1];o&&"#text"===o.nodeName?o.value+=n:r(e,t(n),i)},EF.adoptAttributes=function(e,t){const n=[];for(let r=0;r<e.attrs.length;r++)n.push(e.attrs[r].name);for(let r=0;r<t.length;r++)-1===n.indexOf(t[r].name)&&e.attrs.push(t[r])},EF.getFirstChild=function(e){return e.childNodes[0]},EF.getChildNodes=function(e){return e.childNodes},EF.getParentNode=function(e){return e.parentNode},EF.getAttrList=function(e){return e.attrs},EF.getTagName=function(e){return e.tagName},EF.getNamespaceURI=function(e){return e.namespaceURI},EF.getTextNodeContent=function(e){return e.value},EF.getCommentNodeContent=function(e){return e.data},EF.getDocumentTypeNodeName=function(e){return e.name},EF.getDocumentTypeNodePublicId=function(e){return e.publicId},EF.getDocumentTypeNodeSystemId=function(e){return e.systemId},EF.isTextNode=function(e){return"#text"===e.nodeName},EF.isCommentNode=function(e){return"#comment"===e.nodeName},EF.isDocumentTypeNode=function(e){return"#documentType"===e.nodeName},EF.isElementNode=function(e){return!!e.tagName},EF.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},EF.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},EF.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)},EF}function kF(){return xF||(xF=1,TF=function(e,t){return[e,t=t||Object.create(null)].reduce((e,t)=>(Object.keys(t).forEach(n=>{e[n]=t[n]}),e),Object.create(null))}),TF}var OF,PF={};function CF(){if(OF)return PF;OF=1;const{DOCUMENT_MODE:e}=cF(),t="html",n=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],r=n.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),i=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],o=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],a=o.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function s(e){const t=-1!==e.indexOf('"')?"'":'"';return t+e+t}function l(e,t){for(let n=0;n<t.length;n++)if(0===e.indexOf(t[n]))return!0;return!1}return PF.isConforming=function(e){return e.name===t&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)},PF.getDocumentMode=function(s){if(s.name!==t)return e.QUIRKS;const c=s.systemId;if(c&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===c.toLowerCase())return e.QUIRKS;let u=s.publicId;if(null!==u){if(u=u.toLowerCase(),i.indexOf(u)>-1)return e.QUIRKS;let t=null===c?r:n;if(l(u,t))return e.QUIRKS;if(t=null===c?o:a,l(u,t))return e.LIMITED_QUIRKS}return e.NO_QUIRKS},PF.serializeContent=function(e,t,n){let r="!DOCTYPE ";return e&&(r+=e),t?r+=" PUBLIC "+s(t):n&&(r+=" SYSTEM"),null!==n&&(r+=" "+s(n)),r},PF}var AF,MF,IF,RF,DF,NF,jF={};function LF(){if(AF)return jF;AF=1;const e=BB(),t=cF(),n=t.TAG_NAMES,r=t.NAMESPACES,i=t.ATTRS,o="text/html",a="application/xhtml+xml",s={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},l={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:r.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:r.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:r.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:r.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:r.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:r.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:r.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:r.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:r.XML},"xml:space":{prefix:"xml",name:"space",namespace:r.XML},xmlns:{prefix:"",name:"xmlns",namespace:r.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:r.XMLNS}},c=jF.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},u={[n.B]:!0,[n.BIG]:!0,[n.BLOCKQUOTE]:!0,[n.BODY]:!0,[n.BR]:!0,[n.CENTER]:!0,[n.CODE]:!0,[n.DD]:!0,[n.DIV]:!0,[n.DL]:!0,[n.DT]:!0,[n.EM]:!0,[n.EMBED]:!0,[n.H1]:!0,[n.H2]:!0,[n.H3]:!0,[n.H4]:!0,[n.H5]:!0,[n.H6]:!0,[n.HEAD]:!0,[n.HR]:!0,[n.I]:!0,[n.IMG]:!0,[n.LI]:!0,[n.LISTING]:!0,[n.MENU]:!0,[n.META]:!0,[n.NOBR]:!0,[n.OL]:!0,[n.P]:!0,[n.PRE]:!0,[n.RUBY]:!0,[n.S]:!0,[n.SMALL]:!0,[n.SPAN]:!0,[n.STRONG]:!0,[n.STRIKE]:!0,[n.SUB]:!0,[n.SUP]:!0,[n.TABLE]:!0,[n.TT]:!0,[n.U]:!0,[n.UL]:!0,[n.VAR]:!0};return jF.causesExit=function(t){const r=t.tagName;return r===n.FONT&&(null!==e.getTokenAttr(t,i.COLOR)||null!==e.getTokenAttr(t,i.SIZE)||null!==e.getTokenAttr(t,i.FACE))||u[r]},jF.adjustTokenMathMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}},jF.adjustTokenSVGAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=s[e.attrs[t].name];n&&(e.attrs[t].name=n)}},jF.adjustTokenXMLAttrs=function(e){for(let t=0;t<e.attrs.length;t++){const n=l[e.attrs[t].name];n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}},jF.adjustTokenSVGTagName=function(e){const t=c[e.tagName];t&&(e.tagName=t)},jF.isIntegrationPoint=function(e,t,s,l){return!((l&&l!==r.HTML||!function(e,t,s){if(t===r.MATHML&&e===n.ANNOTATION_XML)for(let n=0;n<s.length;n++)if(s[n].name===i.ENCODING){const e=s[n].value.toLowerCase();return e===o||e===a}return t===r.SVG&&(e===n.FOREIGN_OBJECT||e===n.DESC||e===n.TITLE)}(e,t,s))&&(l&&l!==r.MATHML||!function(e,t){return t===r.MATHML&&(e===n.MI||e===n.MO||e===n.MN||e===n.MS||e===n.MTEXT)}(e,t)))},jF}function BF(){if(IF)return MF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}IF=1;const n=BB(),r=uF(),i=hF(),o=gF(),a=_F(),s=pF(),l=SF(),c=kF(),u=CF(),h=LF(),p=jB(),f=NB(),d=cF(),m=d.TAG_NAMES,g=d.NAMESPACES,y=d.ATTRS,v={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:l},b="hidden",_="INITIAL_MODE",w="BEFORE_HTML_MODE",T="BEFORE_HEAD_MODE",x="IN_HEAD_MODE",E="IN_HEAD_NO_SCRIPT_MODE",S="AFTER_HEAD_MODE",k="IN_BODY_MODE",O="TEXT_MODE",P="IN_TABLE_MODE",C="IN_TABLE_TEXT_MODE",A="IN_CAPTION_MODE",M="IN_COLUMN_GROUP_MODE",I="IN_TABLE_BODY_MODE",R="IN_ROW_MODE",D="IN_CELL_MODE",N="IN_SELECT_MODE",j="IN_SELECT_IN_TABLE_MODE",L="IN_TEMPLATE_MODE",B="AFTER_BODY_MODE",F="IN_FRAMESET_MODE",z="AFTER_FRAMESET_MODE",H="AFTER_AFTER_BODY_MODE",U="AFTER_AFTER_FRAMESET_MODE",V={[m.TR]:R,[m.TBODY]:I,[m.THEAD]:I,[m.TFOOT]:I,[m.CAPTION]:A,[m.COLGROUP]:M,[m.TABLE]:P,[m.BODY]:k,[m.FRAMESET]:F},G={[m.CAPTION]:P,[m.COLGROUP]:P,[m.TBODY]:P,[m.TFOOT]:P,[m.THEAD]:P,[m.COL]:M,[m.TR]:I,[m.TD]:R,[m.TH]:R},X={[_]:{[n.CHARACTER_TOKEN]:oe,[n.NULL_CHARACTER_TOKEN]:oe,[n.WHITESPACE_CHARACTER_TOKEN]:J,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:function(e,t){e._setDocumentType(t);const n=t.forceQuirks?d.DOCUMENT_MODE.QUIRKS:u.getDocumentMode(t);u.isConforming(t)||e._err(p.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=w},[n.START_TAG_TOKEN]:oe,[n.END_TAG_TOKEN]:oe,[n.EOF_TOKEN]:oe},[w]:{[n.CHARACTER_TOKEN]:ae,[n.NULL_CHARACTER_TOKEN]:ae,[n.WHITESPACE_CHARACTER_TOKEN]:J,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){t.tagName===m.HTML?(e._insertElement(t,g.HTML),e.insertionMode=T):ae(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;(n===m.HTML||n===m.HEAD||n===m.BODY||n===m.BR)&&ae(e,t)},[n.EOF_TOKEN]:ae},[T]:{[n.CHARACTER_TOKEN]:se,[n.NULL_CHARACTER_TOKEN]:se,[n.WHITESPACE_CHARACTER_TOKEN]:J,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:ee,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.HEAD?(e._insertElement(t,g.HTML),e.headElement=e.openElements.current,e.insertionMode=x):se(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HEAD||n===m.BODY||n===m.HTML||n===m.BR?se(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[n.EOF_TOKEN]:se},[x]:{[n.CHARACTER_TOKEN]:ue,[n.NULL_CHARACTER_TOKEN]:ue,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:ee,[n.START_TAG_TOKEN]:le,[n.END_TAG_TOKEN]:ce,[n.EOF_TOKEN]:ue},[E]:{[n.CHARACTER_TOKEN]:he,[n.NULL_CHARACTER_TOKEN]:he,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:ee,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.BASEFONT||n===m.BGSOUND||n===m.HEAD||n===m.LINK||n===m.META||n===m.NOFRAMES||n===m.STYLE?le(e,t):n===m.NOSCRIPT?e._err(p.nestedNoscriptInHead):he(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.NOSCRIPT?(e.openElements.pop(),e.insertionMode=x):n===m.BR?he(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[n.EOF_TOKEN]:he},[S]:{[n.CHARACTER_TOKEN]:pe,[n.NULL_CHARACTER_TOKEN]:pe,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:ee,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.BODY?(e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode=k):n===m.FRAMESET?(e._insertElement(t,g.HTML),e.insertionMode=F):n===m.BASE||n===m.BASEFONT||n===m.BGSOUND||n===m.LINK||n===m.META||n===m.NOFRAMES||n===m.SCRIPT||n===m.STYLE||n===m.TEMPLATE||n===m.TITLE?(e._err(p.abandonedHeadElementChild),e.openElements.push(e.headElement),le(e,t),e.openElements.remove(e.headElement)):n===m.HEAD?e._err(p.misplacedStartTagForHeadElement):pe(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.BODY||n===m.HTML||n===m.BR?pe(e,t):n===m.TEMPLATE?ce(e,t):e._err(p.endTagWithoutMatchingOpenElement)},[n.EOF_TOKEN]:pe},[k]:{[n.CHARACTER_TOKEN]:de,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:Se,[n.END_TAG_TOKEN]:Ce,[n.EOF_TOKEN]:Ae},[O]:{[n.CHARACTER_TOKEN]:re,[n.NULL_CHARACTER_TOKEN]:re,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:J,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:J,[n.END_TAG_TOKEN]:function(e,t){t.tagName===m.SCRIPT&&(e.pendingScript=e.openElements.current),e.openElements.pop(),e.insertionMode=e.originalInsertionMode},[n.EOF_TOKEN]:function(e,t){e._err(p.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e._processToken(t)}},[P]:{[n.CHARACTER_TOKEN]:Me,[n.NULL_CHARACTER_TOKEN]:Me,[n.WHITESPACE_CHARACTER_TOKEN]:Me,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:Ie,[n.END_TAG_TOKEN]:Re,[n.EOF_TOKEN]:Ae},[C]:{[n.CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0},[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:function(e,t){e.pendingCharacterTokens.push(t)},[n.COMMENT_TOKEN]:Ne,[n.DOCTYPE_TOKEN]:Ne,[n.START_TAG_TOKEN]:Ne,[n.END_TAG_TOKEN]:Ne,[n.EOF_TOKEN]:Ne},[A]:{[n.CHARACTER_TOKEN]:de,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.CAPTION||n===m.COL||n===m.COLGROUP||n===m.TBODY||n===m.TD||n===m.TFOOT||n===m.TH||n===m.THEAD||n===m.TR?e.openElements.hasInTableScope(m.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(m.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=P,e._processToken(t)):Se(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.CAPTION||n===m.TABLE?e.openElements.hasInTableScope(m.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(m.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=P,n===m.TABLE&&e._processToken(t)):n!==m.BODY&&n!==m.COL&&n!==m.COLGROUP&&n!==m.HTML&&n!==m.TBODY&&n!==m.TD&&n!==m.TFOOT&&n!==m.TH&&n!==m.THEAD&&n!==m.TR&&Ce(e,t)},[n.EOF_TOKEN]:Ae},[M]:{[n.CHARACTER_TOKEN]:je,[n.NULL_CHARACTER_TOKEN]:je,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.COL?(e._appendElement(t,g.HTML),t.ackSelfClosing=!0):n===m.TEMPLATE?le(e,t):je(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.COLGROUP?e.openElements.currentTagName===m.COLGROUP&&(e.openElements.pop(),e.insertionMode=P):n===m.TEMPLATE?ce(e,t):n!==m.COL&&je(e,t)},[n.EOF_TOKEN]:Ae},[I]:{[n.CHARACTER_TOKEN]:Me,[n.NULL_CHARACTER_TOKEN]:Me,[n.WHITESPACE_CHARACTER_TOKEN]:Me,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.TR?(e.openElements.clearBackToTableBodyContext(),e._insertElement(t,g.HTML),e.insertionMode=R):n===m.TH||n===m.TD?(e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(m.TR),e.insertionMode=R,e._processToken(t)):n===m.CAPTION||n===m.COL||n===m.COLGROUP||n===m.TBODY||n===m.TFOOT||n===m.THEAD?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P,e._processToken(t)):Ie(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.TBODY||n===m.TFOOT||n===m.THEAD?e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P):n===m.TABLE?e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=P,e._processToken(t)):(n!==m.BODY&&n!==m.CAPTION&&n!==m.COL&&n!==m.COLGROUP||n!==m.HTML&&n!==m.TD&&n!==m.TH&&n!==m.TR)&&Re(e,t)},[n.EOF_TOKEN]:Ae},[R]:{[n.CHARACTER_TOKEN]:Me,[n.NULL_CHARACTER_TOKEN]:Me,[n.WHITESPACE_CHARACTER_TOKEN]:Me,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.TH||n===m.TD?(e.openElements.clearBackToTableRowContext(),e._insertElement(t,g.HTML),e.insertionMode=D,e.activeFormattingElements.insertMarker()):n===m.CAPTION||n===m.COL||n===m.COLGROUP||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR?e.openElements.hasInTableScope(m.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=I,e._processToken(t)):Ie(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.TR?e.openElements.hasInTableScope(m.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=I):n===m.TABLE?e.openElements.hasInTableScope(m.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=I,e._processToken(t)):n===m.TBODY||n===m.TFOOT||n===m.THEAD?(e.openElements.hasInTableScope(n)||e.openElements.hasInTableScope(m.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=I,e._processToken(t)):(n!==m.BODY&&n!==m.CAPTION&&n!==m.COL&&n!==m.COLGROUP||n!==m.HTML&&n!==m.TD&&n!==m.TH)&&Re(e,t)},[n.EOF_TOKEN]:Ae},[D]:{[n.CHARACTER_TOKEN]:de,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.CAPTION||n===m.COL||n===m.COLGROUP||n===m.TBODY||n===m.TD||n===m.TFOOT||n===m.TH||n===m.THEAD||n===m.TR?(e.openElements.hasInTableScope(m.TD)||e.openElements.hasInTableScope(m.TH))&&(e._closeTableCell(),e._processToken(t)):Se(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.TD||n===m.TH?e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=R):n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR?e.openElements.hasInTableScope(n)&&(e._closeTableCell(),e._processToken(t)):n!==m.BODY&&n!==m.CAPTION&&n!==m.COL&&n!==m.COLGROUP&&n!==m.HTML&&Ce(e,t)},[n.EOF_TOKEN]:Ae},[N]:{[n.CHARACTER_TOKEN]:re,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:Le,[n.END_TAG_TOKEN]:Be,[n.EOF_TOKEN]:Ae},[j]:{[n.CHARACTER_TOKEN]:re,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.CAPTION||n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR||n===m.TD||n===m.TH?(e.openElements.popUntilTagNamePopped(m.SELECT),e._resetInsertionMode(),e._processToken(t)):Le(e,t)},[n.END_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.CAPTION||n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR||n===m.TD||n===m.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(m.SELECT),e._resetInsertionMode(),e._processToken(t)):Be(e,t)},[n.EOF_TOKEN]:Ae},[L]:{[n.CHARACTER_TOKEN]:de,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;if(n===m.BASE||n===m.BASEFONT||n===m.BGSOUND||n===m.LINK||n===m.META||n===m.NOFRAMES||n===m.SCRIPT||n===m.STYLE||n===m.TEMPLATE||n===m.TITLE)le(e,t);else{const r=G[n]||k;e._popTmplInsertionMode(),e._pushTmplInsertionMode(r),e.insertionMode=r,e._processToken(t)}},[n.END_TAG_TOKEN]:function(e,t){t.tagName===m.TEMPLATE&&ce(e,t)},[n.EOF_TOKEN]:Fe},[B]:{[n.CHARACTER_TOKEN]:ze,[n.NULL_CHARACTER_TOKEN]:ze,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:function(e,t){e._appendCommentNode(t,e.openElements.items[0])},[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){t.tagName===m.HTML?Se(e,t):ze(e,t)},[n.END_TAG_TOKEN]:function(e,t){t.tagName===m.HTML?e.fragmentContext||(e.insertionMode=H):ze(e,t)},[n.EOF_TOKEN]:ie},[F]:{[n.CHARACTER_TOKEN]:J,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.FRAMESET?e._insertElement(t,g.HTML):n===m.FRAME?(e._appendElement(t,g.HTML),t.ackSelfClosing=!0):n===m.NOFRAMES&&le(e,t)},[n.END_TAG_TOKEN]:function(e,t){t.tagName===m.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagName!==m.FRAMESET&&(e.insertionMode=z))},[n.EOF_TOKEN]:ie},[z]:{[n.CHARACTER_TOKEN]:J,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:re,[n.COMMENT_TOKEN]:te,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.NOFRAMES&&le(e,t)},[n.END_TAG_TOKEN]:function(e,t){t.tagName===m.HTML&&(e.insertionMode=U)},[n.EOF_TOKEN]:ie},[H]:{[n.CHARACTER_TOKEN]:He,[n.NULL_CHARACTER_TOKEN]:He,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:ne,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){t.tagName===m.HTML?Se(e,t):He(e,t)},[n.END_TAG_TOKEN]:He,[n.EOF_TOKEN]:ie},[U]:{[n.CHARACTER_TOKEN]:J,[n.NULL_CHARACTER_TOKEN]:J,[n.WHITESPACE_CHARACTER_TOKEN]:fe,[n.COMMENT_TOKEN]:ne,[n.DOCTYPE_TOKEN]:J,[n.START_TAG_TOKEN]:function(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.NOFRAMES&&le(e,t)},[n.END_TAG_TOKEN]:J,[n.EOF_TOKEN]:ie}};function W(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagName)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Pe(e,t),n}function Y(e,t){let n=null;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i)&&(n=i)}return n||(e.openElements.popUntilElementPopped(t.element),e.activeFormattingElements.removeEntry(t)),n}function q(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),s=n&&o>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=$(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function $(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function K(e,t,n){if(e._isElementCausesFosterParenting(t))e._fosterParentElement(n);else{const r=e.treeAdapter.getTagName(t),i=e.treeAdapter.getNamespaceURI(t);r===m.TEMPLATE&&i===g.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Z(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),i=n.token,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,n.token),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o)}function Q(e,t){let n;for(let r=0;r<8&&(n=W(e,t),n);r++){const t=Y(e,n);if(!t)break;e.activeFormattingElements.bookmark=n;const r=q(e,t,n.element),i=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(r),K(e,i,r),Z(e,t,n)}}function J(){}function ee(e){e._err(p.misplacedDoctype)}function te(e,t){e._appendCommentNode(t,e.openElements.currentTmplContent||e.openElements.current)}function ne(e,t){e._appendCommentNode(t,e.document)}function re(e,t){e._insertCharacters(t)}function ie(e){e.stopped=!0}function oe(e,t){e._err(p.missingDoctype,{beforeToken:!0}),e.treeAdapter.setDocumentMode(e.document,d.DOCUMENT_MODE.QUIRKS),e.insertionMode=w,e._processToken(t)}function ae(e,t){e._insertFakeRootElement(),e.insertionMode=T,e._processToken(t)}function se(e,t){e._insertFakeElement(m.HEAD),e.headElement=e.openElements.current,e.insertionMode=x,e._processToken(t)}function le(e,t){const r=t.tagName;r===m.HTML?Se(e,t):r===m.BASE||r===m.BASEFONT||r===m.BGSOUND||r===m.LINK||r===m.META?(e._appendElement(t,g.HTML),t.ackSelfClosing=!0):r===m.TITLE?e._switchToTextParsing(t,n.MODE.RCDATA):r===m.NOSCRIPT?e.options.scriptingEnabled?e._switchToTextParsing(t,n.MODE.RAWTEXT):(e._insertElement(t,g.HTML),e.insertionMode=E):r===m.NOFRAMES||r===m.STYLE?e._switchToTextParsing(t,n.MODE.RAWTEXT):r===m.SCRIPT?e._switchToTextParsing(t,n.MODE.SCRIPT_DATA):r===m.TEMPLATE?(e._insertTemplate(t,g.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=L,e._pushTmplInsertionMode(L)):r===m.HEAD?e._err(p.misplacedStartTagForHeadElement):ue(e,t)}function ce(e,t){const n=t.tagName;n===m.HEAD?(e.openElements.pop(),e.insertionMode=S):n===m.BODY||n===m.BR||n===m.HTML?ue(e,t):n===m.TEMPLATE&&e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagName!==m.TEMPLATE&&e._err(p.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(m.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode()):e._err(p.endTagWithoutMatchingOpenElement)}function ue(e,t){e.openElements.pop(),e.insertionMode=S,e._processToken(t)}function he(e,t){const r=t.type===n.EOF_TOKEN?p.openElementsLeftAfterEof:p.disallowedContentInNoscriptInHead;e._err(r),e.openElements.pop(),e.insertionMode=x,e._processToken(t)}function pe(e,t){e._insertFakeElement(m.BODY),e.insertionMode=k,e._processToken(t)}function fe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function de(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function me(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML)}function ge(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function ye(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ve(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function be(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,g.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function _e(e,t){e._appendElement(t,g.HTML),t.ackSelfClosing=!0}function we(e,t){e._switchToTextParsing(t,n.MODE.RAWTEXT)}function Te(e,t){e.openElements.currentTagName===m.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML)}function xe(e,t){e.openElements.hasInScope(m.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,g.HTML)}function Ee(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML)}function Se(e,t){const r=t.tagName;switch(r.length){case 1:r===m.I||r===m.S||r===m.B||r===m.U?ye(e,t):r===m.P?me(e,t):r===m.A?function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(m.A);n&&(Q(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):Ee(e,t);break;case 2:r===m.DL||r===m.OL||r===m.UL?me(e,t):r===m.H1||r===m.H2||r===m.H3||r===m.H4||r===m.H5||r===m.H6?function(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement();const n=e.openElements.currentTagName;(n===m.H1||n===m.H2||n===m.H3||n===m.H4||n===m.H5||n===m.H6)&&e.openElements.pop(),e._insertElement(t,g.HTML)}(e,t):r===m.LI||r===m.DD||r===m.DT?function(e,t){e.framesetOk=!1;const n=t.tagName;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.items[r],i=e.treeAdapter.getTagName(t);let o=null;if(n===m.LI&&i===m.LI?o=m.LI:(n===m.DD||n===m.DT)&&(i===m.DD||i===m.DT)&&(o=i),o){e.openElements.generateImpliedEndTagsWithExclusion(o),e.openElements.popUntilTagNamePopped(o);break}if(i!==m.ADDRESS&&i!==m.DIV&&i!==m.P&&e._isSpecialElement(t))break}e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML)}(e,t):r===m.EM||r===m.TT?ye(e,t):r===m.BR?be(e,t):r===m.HR?function(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._appendElement(t,g.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t):r===m.RB?xe(e,t):r===m.RT||r===m.RP?function(e,t){e.openElements.hasInScope(m.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(m.RTC),e._insertElement(t,g.HTML)}(e,t):r!==m.TH&&r!==m.TD&&r!==m.TR&&Ee(e,t);break;case 3:r===m.DIV||r===m.DIR||r===m.NAV?me(e,t):r===m.PRE?ge(e,t):r===m.BIG?ye(e,t):r===m.IMG||r===m.WBR?be(e,t):r===m.XMP?function(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,n.MODE.RAWTEXT)}(e,t):r===m.SVG?function(e,t){e._reconstructActiveFormattingElements(),h.adjustTokenSVGAttrs(t),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,g.SVG):e._insertElement(t,g.SVG),t.ackSelfClosing=!0}(e,t):r===m.RTC?xe(e,t):r!==m.COL&&Ee(e,t);break;case 4:r===m.HTML?function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t):r===m.BASE||r===m.LINK||r===m.META?le(e,t):r===m.BODY?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t):r===m.MAIN||r===m.MENU?me(e,t):r===m.FORM?function(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML),n||(e.formElement=e.openElements.current))}(e,t):r===m.CODE||r===m.FONT?ye(e,t):r===m.NOBR?function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(m.NOBR)&&(Q(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,g.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t):r===m.AREA?be(e,t):r===m.MATH?function(e,t){e._reconstructActiveFormattingElements(),h.adjustTokenMathMLAttrs(t),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,g.MATHML):e._insertElement(t,g.MATHML),t.ackSelfClosing=!0}(e,t):r===m.MENU?function(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML)}(e,t):r!==m.HEAD&&Ee(e,t);break;case 5:r===m.STYLE||r===m.TITLE?le(e,t):r===m.ASIDE?me(e,t):r===m.SMALL?ye(e,t):r===m.TABLE?function(e,t){e.treeAdapter.getDocumentMode(e.document)!==d.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode=P}(e,t):r===m.EMBED?be(e,t):r===m.INPUT?function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,g.HTML);const r=n.getTokenAttr(t,y.TYPE);(!r||r.toLowerCase()!==b)&&(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t):r===m.PARAM||r===m.TRACK?_e(e,t):r===m.IMAGE?function(e,t){t.tagName=m.IMG,be(e,t)}(e,t):r!==m.FRAME&&r!==m.TBODY&&r!==m.TFOOT&&r!==m.THEAD&&Ee(e,t);break;case 6:r===m.SCRIPT?le(e,t):r===m.CENTER||r===m.FIGURE||r===m.FOOTER||r===m.HEADER||r===m.HGROUP||r===m.DIALOG?me(e,t):r===m.BUTTON?function(e,t){e.openElements.hasInScope(m.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(m.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.framesetOk=!1}(e,t):r===m.STRIKE||r===m.STRONG?ye(e,t):r===m.APPLET||r===m.OBJECT?ve(e,t):r===m.KEYGEN?be(e,t):r===m.SOURCE?_e(e,t):r===m.IFRAME?function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,n.MODE.RAWTEXT)}(e,t):r===m.SELECT?function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,g.HTML),e.framesetOk=!1,e.insertionMode===P||e.insertionMode===A||e.insertionMode===I||e.insertionMode===R||e.insertionMode===D?e.insertionMode=j:e.insertionMode=N}(e,t):r===m.OPTION?Te(e,t):Ee(e,t);break;case 7:r===m.BGSOUND?le(e,t):r===m.DETAILS||r===m.ADDRESS||r===m.ARTICLE||r===m.SECTION||r===m.SUMMARY?me(e,t):r===m.LISTING?ge(e,t):r===m.MARQUEE?ve(e,t):r===m.NOEMBED?we(e,t):r!==m.CAPTION&&Ee(e,t);break;case 8:r===m.BASEFONT?le(e,t):r===m.FRAMESET?function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,g.HTML),e.insertionMode=F)}(e,t):r===m.FIELDSET?me(e,t):r===m.TEXTAREA?function(e,t){e._insertElement(t,g.HTML),e.skipNextNewLine=!0,e.tokenizer.state=n.MODE.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=O}(e,t):r===m.TEMPLATE?le(e,t):r===m.NOSCRIPT?e.options.scriptingEnabled?we(e,t):Ee(e,t):r===m.OPTGROUP?Te(e,t):r!==m.COLGROUP&&Ee(e,t);break;case 9:r===m.PLAINTEXT?function(e,t){e.openElements.hasInButtonScope(m.P)&&e._closePElement(),e._insertElement(t,g.HTML),e.tokenizer.state=n.MODE.PLAINTEXT}(e,t):Ee(e,t);break;case 10:r===m.BLOCKQUOTE||r===m.FIGCAPTION?me(e,t):Ee(e,t);break;default:Ee(e,t)}}function ke(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Oe(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Pe(e,t){const n=t.tagName;for(let r=e.openElements.stackTop;r>0;r--){const t=e.openElements.items[r];if(e.treeAdapter.getTagName(t)===n){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilElementPopped(t);break}if(e._isSpecialElement(t))break}}function Ce(e,t){const n=t.tagName;switch(n.length){case 1:n===m.A||n===m.B||n===m.I||n===m.S||n===m.U?Q(e,t):n===m.P?function(e){e.openElements.hasInButtonScope(m.P)||e._insertFakeElement(m.P),e._closePElement()}(e):Pe(e,t);break;case 2:n===m.DL||n===m.UL||n===m.OL?ke(e,t):n===m.LI?function(e){e.openElements.hasInListItemScope(m.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(m.LI),e.openElements.popUntilTagNamePopped(m.LI))}(e):n===m.DD||n===m.DT?function(e,t){const n=t.tagName;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t):n===m.H1||n===m.H2||n===m.H3||n===m.H4||n===m.H5||n===m.H6?function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e):n===m.BR?function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(m.BR),e.openElements.pop(),e.framesetOk=!1}(e):n===m.EM||n===m.TT?Q(e,t):Pe(e,t);break;case 3:n===m.BIG?Q(e,t):n===m.DIR||n===m.DIV||n===m.NAV||n===m.PRE?ke(e,t):Pe(e,t);break;case 4:n===m.BODY?function(e){e.openElements.hasInScope(m.BODY)&&(e.insertionMode=B)}(e):n===m.HTML?function(e,t){e.openElements.hasInScope(m.BODY)&&(e.insertionMode=B,e._processToken(t))}(e,t):n===m.FORM?function(e){const t=e.openElements.tmplCount>0,n=e.formElement;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(m.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(m.FORM):e.openElements.remove(n))}(e):n===m.CODE||n===m.FONT||n===m.NOBR?Q(e,t):n===m.MAIN||n===m.MENU?ke(e,t):Pe(e,t);break;case 5:n===m.ASIDE?ke(e,t):n===m.SMALL?Q(e,t):Pe(e,t);break;case 6:n===m.CENTER||n===m.FIGURE||n===m.FOOTER||n===m.HEADER||n===m.HGROUP||n===m.DIALOG?ke(e,t):n===m.APPLET||n===m.OBJECT?Oe(e,t):n===m.STRIKE||n===m.STRONG?Q(e,t):Pe(e,t);break;case 7:n===m.ADDRESS||n===m.ARTICLE||n===m.DETAILS||n===m.SECTION||n===m.SUMMARY||n===m.LISTING?ke(e,t):n===m.MARQUEE?Oe(e,t):Pe(e,t);break;case 8:n===m.FIELDSET?ke(e,t):n===m.TEMPLATE?ce(e,t):Pe(e,t);break;case 10:n===m.BLOCKQUOTE||n===m.FIGCAPTION?ke(e,t):Pe(e,t);break;default:Pe(e,t)}}function Ae(e,t){e.tmplInsertionModeStackTop>-1?Fe(e,t):e.stopped=!0}function Me(e,t){const n=e.openElements.currentTagName;n===m.TABLE||n===m.TBODY||n===m.TFOOT||n===m.THEAD||n===m.TR?(e.pendingCharacterTokens=[],e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=C,e._processToken(t)):De(e,t)}function Ie(e,t){const r=t.tagName;switch(r.length){case 2:r===m.TD||r===m.TH||r===m.TR?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(m.TBODY),e.insertionMode=I,e._processToken(t)}(e,t):De(e,t);break;case 3:r===m.COL?function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(m.COLGROUP),e.insertionMode=M,e._processToken(t)}(e,t):De(e,t);break;case 4:r===m.FORM?function(e,t){!e.formElement&&0===e.openElements.tmplCount&&(e._insertElement(t,g.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t):De(e,t);break;case 5:r===m.TABLE?function(e,t){e.openElements.hasInTableScope(m.TABLE)&&(e.openElements.popUntilTagNamePopped(m.TABLE),e._resetInsertionMode(),e._processToken(t))}(e,t):r===m.STYLE?le(e,t):r===m.TBODY||r===m.TFOOT||r===m.THEAD?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,g.HTML),e.insertionMode=I}(e,t):r===m.INPUT?function(e,t){const r=n.getTokenAttr(t,y.TYPE);r&&r.toLowerCase()===b?e._appendElement(t,g.HTML):De(e,t),t.ackSelfClosing=!0}(e,t):De(e,t);break;case 6:r===m.SCRIPT?le(e,t):De(e,t);break;case 7:r===m.CAPTION?function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,g.HTML),e.insertionMode=A}(e,t):De(e,t);break;case 8:r===m.COLGROUP?function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,g.HTML),e.insertionMode=M}(e,t):r===m.TEMPLATE?le(e,t):De(e,t);break;default:De(e,t)}}function Re(e,t){const n=t.tagName;n===m.TABLE?e.openElements.hasInTableScope(m.TABLE)&&(e.openElements.popUntilTagNamePopped(m.TABLE),e._resetInsertionMode()):n===m.TEMPLATE?ce(e,t):n!==m.BODY&&n!==m.CAPTION&&n!==m.COL&&n!==m.COLGROUP&&n!==m.HTML&&n!==m.TBODY&&n!==m.TD&&n!==m.TFOOT&&n!==m.TH&&n!==m.THEAD&&n!==m.TR&&De(e,t)}function De(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,e._processTokenInBodyMode(t),e.fosterParentingEnabled=n}function Ne(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)De(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}function je(e,t){e.openElements.currentTagName===m.COLGROUP&&(e.openElements.pop(),e.insertionMode=P,e._processToken(t))}function Le(e,t){const n=t.tagName;n===m.HTML?Se(e,t):n===m.OPTION?(e.openElements.currentTagName===m.OPTION&&e.openElements.pop(),e._insertElement(t,g.HTML)):n===m.OPTGROUP?(e.openElements.currentTagName===m.OPTION&&e.openElements.pop(),e.openElements.currentTagName===m.OPTGROUP&&e.openElements.pop(),e._insertElement(t,g.HTML)):n===m.INPUT||n===m.KEYGEN||n===m.TEXTAREA||n===m.SELECT?e.openElements.hasInSelectScope(m.SELECT)&&(e.openElements.popUntilTagNamePopped(m.SELECT),e._resetInsertionMode(),n!==m.SELECT&&e._processToken(t)):(n===m.SCRIPT||n===m.TEMPLATE)&&le(e,t)}function Be(e,t){const n=t.tagName;if(n===m.OPTGROUP){const t=e.openElements.items[e.openElements.stackTop-1],n=t&&e.treeAdapter.getTagName(t);e.openElements.currentTagName===m.OPTION&&n===m.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagName===m.OPTGROUP&&e.openElements.pop()}else n===m.OPTION?e.openElements.currentTagName===m.OPTION&&e.openElements.pop():n===m.SELECT&&e.openElements.hasInSelectScope(m.SELECT)?(e.openElements.popUntilTagNamePopped(m.SELECT),e._resetInsertionMode()):n===m.TEMPLATE&&ce(e,t)}function Fe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(m.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e._popTmplInsertionMode(),e._resetInsertionMode(),e._processToken(t)):e.stopped=!0}function ze(e,t){e.insertionMode=k,e._processToken(t)}function He(e,t){e.insertionMode=k,e._processToken(t)}return MF=function(){return e(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=c(v,t),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&s.install(this,o),this.options.onParseError&&s.install(this,a,{onParseError:this.options.onParseError})},[{key:"parse",value:function(e){const t=this.treeAdapter.createDocument();return this._bootstrap(t,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),t}},{key:"parseFragment",value:function(e,t){t||(t=this.treeAdapter.createElement(m.TEMPLATE,g.HTML,[]));const n=this.treeAdapter.createElement("documentmock",g.HTML,[]);this._bootstrap(n,t),this.treeAdapter.getTagName(t)===m.TEMPLATE&&this._pushTmplInsertionMode(L),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i}},{key:"_bootstrap",value:function(e,t){this.tokenizer=new n(this.options),this.stopped=!1,this.insertionMode=_,this.originalInsertionMode="",this.document=e,this.fragmentContext=t,this.headElement=null,this.formElement=null,this.openElements=new r(this.document,this.treeAdapter),this.activeFormattingElements=new i(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}},{key:"_err",value:function(){}},{key:"_runParsingLoop",value:function(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const t=this.tokenizer.getNextToken();if(t.type===n.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.type===n.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)continue;t.chars=t.chars.substr(1)}if(this._processInputToken(t),e&&this.pendingScript)break}}},{key:"runParsingLoopForCurrentChunk",value:function(e,t){if(this._runParsingLoop(t),t&&this.pendingScript){const e=this.pendingScript;return this.pendingScript=null,void t(e)}e&&e()}},{key:"_setupTokenizerCDATAMode",value:function(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==g.HTML&&!this._isIntegrationPoint(e)}},{key:"_switchToTextParsing",value:function(e,t){this._insertElement(e,g.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=O}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=O,this.originalInsertionMode=k,this.tokenizer.state=n.MODE.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===m.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}},{key:"_initTokenizerForFragmentParsing",value:function(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===g.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===m.TITLE||e===m.TEXTAREA?this.tokenizer.state=n.MODE.RCDATA:e===m.STYLE||e===m.XMP||e===m.IFRAME||e===m.NOEMBED||e===m.NOFRAMES||e===m.NOSCRIPT?this.tokenizer.state=n.MODE.RAWTEXT:e===m.SCRIPT?this.tokenizer.state=n.MODE.SCRIPT_DATA:e===m.PLAINTEXT&&(this.tokenizer.state=n.MODE.PLAINTEXT)}}},{key:"_setDocumentType",value:function(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";this.treeAdapter.setDocumentType(this.document,t,n,r)}},{key:"_attachElementToTree",value:function(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(t,e)}}},{key:"_appendElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n)}},{key:"_insertElement",value:function(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n),this.openElements.push(n)}},{key:"_insertFakeElement",value:function(e){const t=this.treeAdapter.createElement(e,g.HTML,[]);this._attachElementToTree(t),this.openElements.push(t)}},{key:"_insertTemplate",value:function(e){const t=this.treeAdapter.createElement(e.tagName,g.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t),this.openElements.push(t)}},{key:"_insertFakeRootElement",value:function(){const e=this.treeAdapter.createElement(m.HTML,g.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}},{key:"_appendCommentNode",value:function(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n)}},{key:"_insertCharacters",value:function(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const t=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(t,e.chars)}}},{key:"_adoptNodes",value:function(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}},{key:"_shouldProcessTokenInForeignContent",value:function(e){const t=this._getAdjustedCurrentElement();if(!t||t===this.document)return!1;const r=this.treeAdapter.getNamespaceURI(t);if(r===g.HTML||this.treeAdapter.getTagName(t)===m.ANNOTATION_XML&&r===g.MATHML&&e.type===n.START_TAG_TOKEN&&e.tagName===m.SVG)return!1;const i=e.type===n.CHARACTER_TOKEN||e.type===n.NULL_CHARACTER_TOKEN||e.type===n.WHITESPACE_CHARACTER_TOKEN;return!((e.type===n.START_TAG_TOKEN&&e.tagName!==m.MGLYPH&&e.tagName!==m.MALIGNMARK||i)&&this._isIntegrationPoint(t,g.MATHML)||(e.type===n.START_TAG_TOKEN||i)&&this._isIntegrationPoint(t,g.HTML))&&e.type!==n.EOF_TOKEN}},{key:"_processToken",value:function(e){X[this.insertionMode][e.type](this,e)}},{key:"_processTokenInBodyMode",value:function(e){X[k][e.type](this,e)}},{key:"_processTokenInForeignContent",value:function(e){e.type===n.CHARACTER_TOKEN?function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e):e.type===n.NULL_CHARACTER_TOKEN?function(e,t){t.chars=f.REPLACEMENT_CHARACTER,e._insertCharacters(t)}(this,e):e.type===n.WHITESPACE_CHARACTER_TOKEN?re(this,e):e.type===n.COMMENT_TOKEN?te(this,e):e.type===n.START_TAG_TOKEN?function(e,t){if(h.causesExit(t)&&!e.fragmentContext){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==g.HTML&&!e._isIntegrationPoint(e.openElements.current);)e.openElements.pop();e._processToken(t)}else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===g.MATHML?h.adjustTokenMathMLAttrs(t):r===g.SVG&&(h.adjustTokenSVGTagName(t),h.adjustTokenSVGAttrs(t)),h.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):e.type===n.END_TAG_TOKEN&&function(e,t){for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===g.HTML){e._processToken(t);break}if(e.treeAdapter.getTagName(r).toLowerCase()===t.tagName){e.openElements.popUntilElementPopped(r);break}}}(this,e)}},{key:"_processInputToken",value:function(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===n.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(p.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_isIntegrationPoint",value:function(e,t){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return h.isIntegrationPoint(n,r,i,t)}},{key:"_reconstructActiveFormattingElements",value:function(){const e=this.activeFormattingElements.length;if(e){let t=e,n=null;do{if(t--,n=this.activeFormattingElements.entries[t],n.type===i.MARKER_ENTRY||this.openElements.contains(n.element)){t++;break}}while(t>0);for(let r=t;r<e;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=R}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(m.P),this.openElements.popUntilTagNamePopped(m.P)}},{key:"_resetInsertionMode",value:function(){for(let e=this.openElements.stackTop,t=!1;e>=0;e--){let n=this.openElements.items[e];0===e&&(t=!0,this.fragmentContext&&(n=this.fragmentContext));const r=this.treeAdapter.getTagName(n),i=V[r];if(i){this.insertionMode=i;break}if(!(t||r!==m.TD&&r!==m.TH)){this.insertionMode=D;break}if(!t&&r===m.HEAD){this.insertionMode=x;break}if(r===m.SELECT){this._resetInsertionModeForSelect(e);break}if(r===m.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===m.HTML){this.insertionMode=this.headElement?S:T;break}if(t){this.insertionMode=k;break}}}},{key:"_resetInsertionModeForSelect",value:function(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.items[t],n=this.treeAdapter.getTagName(e);if(n===m.TEMPLATE)break;if(n===m.TABLE)return void(this.insertionMode=j)}this.insertionMode=N}},{key:"_pushTmplInsertionMode",value:function(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}},{key:"_popTmplInsertionMode",value:function(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}},{key:"_isElementCausesFosterParenting",value:function(e){const t=this.treeAdapter.getTagName(e);return t===m.TABLE||t===m.TBODY||t===m.TFOOT||t===m.THEAD||t===m.TR}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}},{key:"_findFosterParentingLocation",value:function(){const e={parent:null,beforeElement:null};for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===m.TEMPLATE&&i===g.HTML){e.parent=this.treeAdapter.getTemplateContent(n);break}if(r===m.TABLE){e.parent=this.treeAdapter.getParentNode(n),e.parent?e.beforeElement=n:e.parent=this.openElements.items[t-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}},{key:"_fosterParentElement",value:function(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}},{key:"_fosterParentText",value:function(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertTextBefore(t.parent,e,t.beforeElement):this.treeAdapter.insertText(t.parent,e)}},{key:"_isSpecialElement",value:function(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);return d.SPECIAL_ELEMENTS[n][t]}}])}()}function FF(){if(DF)return RF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}DF=1;const n=SF(),r=kF(),i=CF(),o=cF(),a=o.TAG_NAMES,s=o.NAMESPACES,l={treeAdapter:n},c=/&/g,u=/\u00a0/g,h=/"/g,p=/</g,f=/>/g;let d=function(){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=r(l,n),this.treeAdapter=this.options.treeAdapter,this.html="",this.startNode=e}return e(t,[{key:"serialize",value:function(){return this._serializeChildNodes(this.startNode),this.html}},{key:"_serializeChildNodes",value:function(e){const t=this.treeAdapter.getChildNodes(e);if(t)for(let n=0,r=t.length;n<r;n++){const e=t[n];this.treeAdapter.isElementNode(e)?this._serializeElement(e):this.treeAdapter.isTextNode(e)?this._serializeTextNode(e):this.treeAdapter.isCommentNode(e)?this._serializeCommentNode(e):this.treeAdapter.isDocumentTypeNode(e)&&this._serializeDocumentTypeNode(e)}}},{key:"_serializeElement",value:function(e){const t=this.treeAdapter.getTagName(e),n=this.treeAdapter.getNamespaceURI(e);if(this.html+="<"+t,this._serializeAttributes(e),this.html+=">",t!==a.AREA&&t!==a.BASE&&t!==a.BASEFONT&&t!==a.BGSOUND&&t!==a.BR&&t!==a.COL&&t!==a.EMBED&&t!==a.FRAME&&t!==a.HR&&t!==a.IMG&&t!==a.INPUT&&t!==a.KEYGEN&&t!==a.LINK&&t!==a.META&&t!==a.PARAM&&t!==a.SOURCE&&t!==a.TRACK&&t!==a.WBR){const r=t===a.TEMPLATE&&n===s.HTML?this.treeAdapter.getTemplateContent(e):e;this._serializeChildNodes(r),this.html+="</"+t+">"}}},{key:"_serializeAttributes",value:function(e){const n=this.treeAdapter.getAttrList(e);for(let r=0,i=n.length;r<i;r++){const e=n[r],i=t.escapeString(e.value,!0);this.html+=" ",e.namespace?e.namespace===s.XML?this.html+="xml:"+e.name:e.namespace===s.XMLNS?("xmlns"!==e.name&&(this.html+="xmlns:"),this.html+=e.name):e.namespace===s.XLINK?this.html+="xlink:"+e.name:this.html+=e.prefix+":"+e.name:this.html+=e.name,this.html+='="'+i+'"'}}},{key:"_serializeTextNode",value:function(e){const n=this.treeAdapter.getTextNodeContent(e),r=this.treeAdapter.getParentNode(e);let i;r&&this.treeAdapter.isElementNode(r)&&(i=this.treeAdapter.getTagName(r)),i===a.STYLE||i===a.SCRIPT||i===a.XMP||i===a.IFRAME||i===a.NOEMBED||i===a.NOFRAMES||i===a.PLAINTEXT||i===a.NOSCRIPT?this.html+=n:this.html+=t.escapeString(n,!1)}},{key:"_serializeCommentNode",value:function(e){this.html+="\x3c!--"+this.treeAdapter.getCommentNodeContent(e)+"--\x3e"}},{key:"_serializeDocumentTypeNode",value:function(e){const t=this.treeAdapter.getDocumentTypeNodeName(e);this.html+="<"+i.serializeContent(t,null,null)+">"}}])}();return d.escapeString=function(e,t){return e=e.replace(c,"&amp;").replace(u,"&nbsp;"),e=t?e.replace(h,"&quot;"):e.replace(p,"&lt;").replace(f,"&gt;")},RF=d}var zF,HF,UF={};function VF(){if(zF)return UF;function e(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}zF=1;const n=CF(),{DOCUMENT_MODE:r}=cF(),i={element:1,text:3,cdata:4,comment:8},o={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"};let a=function(){return e(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(const n of Object.keys(t))this[n]=t[n]},[{key:"firstChild",get:function(){const e=this.children;return e&&e[0]||null}},{key:"lastChild",get:function(){const e=this.children;return e&&e[e.length-1]||null}},{key:"nodeType",get:function(){return i[this.type]||i.element}}])}();Object.keys(o).forEach(e=>{const t=o[e];Object.defineProperty(a.prototype,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})}),UF.createDocument=function(){return new a({type:"root",name:"root",parent:null,prev:null,next:null,children:[],"x-mode":r.NO_QUIRKS})},UF.createDocumentFragment=function(){return new a({type:"root",name:"root",parent:null,prev:null,next:null,children:[]})},UF.createElement=function(e,t,n){const r=Object.create(null),i=Object.create(null),o=Object.create(null);for(let a=0;a<n.length;a++){const e=n[a].name;r[e]=n[a].value,i[e]=n[a].namespace,o[e]=n[a].prefix}return new a({type:"script"===e||"style"===e?e:"tag",name:e,namespace:t,attribs:r,"x-attribsNamespace":i,"x-attribsPrefix":o,children:[],parent:null,prev:null,next:null})},UF.createCommentNode=function(e){return new a({type:"comment",data:e,parent:null,prev:null,next:null})};const s=function(e){return new a({type:"text",data:e,parent:null,prev:null,next:null})},l=UF.appendChild=function(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},c=UF.insertBefore=function(e,t,n){const r=e.children.indexOf(n),i=n.prev;i&&(i.next=t,t.prev=i),n.prev=t,t.next=n,e.children.splice(r,0,t),t.parent=e};return UF.setTemplateContent=function(e,t){l(e,t)},UF.getTemplateContent=function(e){return e.children[0]},UF.setDocumentType=function(e,t,r,i){const o=n.serializeContent(t,r,i);let s=null;for(let n=0;n<e.children.length;n++)if("directive"===e.children[n].type&&"!doctype"===e.children[n].name){s=e.children[n];break}s?(s.data=o,s["x-name"]=t,s["x-publicId"]=r,s["x-systemId"]=i):l(e,new a({type:"directive",name:"!doctype",data:o,"x-name":t,"x-publicId":r,"x-systemId":i}))},UF.setDocumentMode=function(e,t){e["x-mode"]=t},UF.getDocumentMode=function(e){return e["x-mode"]},UF.detachNode=function(e){if(e.parent){const t=e.parent.children.indexOf(e),n=e.prev,r=e.next;e.prev=null,e.next=null,n&&(n.next=r),r&&(r.prev=n),e.parent.children.splice(t,1),e.parent=null}},UF.insertText=function(e,t){const n=e.children[e.children.length-1];n&&"text"===n.type?n.data+=t:l(e,s(t))},UF.insertTextBefore=function(e,t,n){const r=e.children[e.children.indexOf(n)-1];r&&"text"===r.type?r.data+=t:c(e,s(t),n)},UF.adoptAttributes=function(e,t){for(let n=0;n<t.length;n++){const r=t[n].name;typeof e.attribs[r]>"u"&&(e.attribs[r]=t[n].value,e["x-attribsNamespace"][r]=t[n].namespace,e["x-attribsPrefix"][r]=t[n].prefix)}},UF.getFirstChild=function(e){return e.children[0]},UF.getChildNodes=function(e){return e.children},UF.getParentNode=function(e){return e.parent},UF.getAttrList=function(e){const t=[];for(const n in e.attribs)t.push({name:n,value:e.attribs[n],namespace:e["x-attribsNamespace"][n],prefix:e["x-attribsPrefix"][n]});return t},UF.getTagName=function(e){return e.name},UF.getNamespaceURI=function(e){return e.namespace},UF.getTextNodeContent=function(e){return e.data},UF.getCommentNodeContent=function(e){return e.data},UF.getDocumentTypeNodeName=function(e){return e["x-name"]},UF.getDocumentTypeNodePublicId=function(e){return e["x-publicId"]},UF.getDocumentTypeNodeSystemId=function(e){return e["x-systemId"]},UF.isTextNode=function(e){return"text"===e.type},UF.isCommentNode=function(e){return"comment"===e.type},UF.isDocumentTypeNode=function(e){return"directive"===e.type&&"!doctype"===e.name},UF.isElementNode=function(e){return!!e.attribs},UF.setNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=t},UF.getNodeSourceCodeLocation=function(e){return e.sourceCodeLocation},UF.updateNodeSourceCodeLocation=function(e,t){e.sourceCodeLocation=Object.assign(e.sourceCodeLocation,t)},UF}function GF(){if(HF)return IB;HF=1,Object.defineProperty(IB,"__esModule",{value:!0}),IB.render=IB.parse=void 0;var e=cD,t=WD,n=function(){if(NF)return RB;NF=1;const e=BF(),t=FF();return RB.parse=function(t,n){return new e(n).parse(t)},RB.parseFragment=function(t,n,r){return"string"==typeof t&&(r=n,n=t,t=null),new e(r).parseFragment(n,t)},RB.serialize=function(e,n){return new t(e,n).serialize()},RB}(),r=e.__importDefault(VF());return IB.parse=function(e,t,i){var o={scriptingEnabled:"boolean"!=typeof t.scriptingEnabled||t.scriptingEnabled,treeAdapter:r.default,sourceCodeLocationInfo:t.sourceCodeLocationInfo},a=t.context;return i?n.parse(e,o):n.parseFragment(a,e,o)},IB.render=function(i){for(var o,a=("length"in i?i:[i]),s=0;s<a.length;s+=1){var l=a[s];t.isDocument(l)&&(o=Array.prototype.splice).call.apply(o,e.__spreadArray([a,s,1],l.children))}return n.serialize({children:a},{treeAdapter:r.default})},IB}var XF,WF,YF={};function qF(){return XF||(XF=1,function(e){var t=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.render=e.parse=void 0;var n=aL;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.parseDocument}});var r=DN();Object.defineProperty(e,"render",{enumerable:!0,get:function(){return t(r).default}})}(YF)),YF}function $F(){if(WF)return yD;WF=1,Object.defineProperty(yD,"__esModule",{value:!0}),yD.merge=yD.contains=yD.root=yD.parseHTML=yD.text=yD.xml=yD.html=void 0;var e=cD,t=e.__importStar(mD()),n=oL(),r=aL,i=GF(),o=qF();function a(e,t,r){var a,s=t?"string"==typeof t?n.select(t,null!==(a=e?._root)&&void 0!==a?a:[],r):t:e?._root.children;return s?r.xmlMode||r._useHtmlParser2?o.render(s,r):i.render(s):""}function s(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!Object.prototype.hasOwnProperty.call(e,"length")||"number"!=typeof e.length||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}return yD.html=function(n,r){return!r&&function(e){return"object"==typeof e&&null!=e&&!("length"in e)&&!("type"in e)}(n)&&(r=n,n=void 0),a(this||void 0,n,e.__assign(e.__assign(e.__assign({},t.default),this?this._options:{}),t.flatten(r??{})))},yD.xml=function(t){return a(this,t,e.__assign(e.__assign({},this._options),{xmlMode:!0}))},yD.text=function e(t){for(var n=t||(this?this.root():[]),i="",o=0;o<n.length;o++){var a=n[o];r.DomUtils.isText(a)?i+=a.data:r.DomUtils.hasChildren(a)&&a.type!==r.ElementType.Comment&&a.type!==r.ElementType.Script&&a.type!==r.ElementType.Style&&(i+=e(a.children))}return i},yD.parseHTML=function(e,n,r){if(void 0===r&&(r="boolean"==typeof n&&n),!e||"string"!=typeof e)return null;"boolean"==typeof n&&(r=n);var i=this.load(e,t.default,!1);return r||i("script").remove(),i.root()[0].children.slice()},yD.root=function(){return this(this._root)},yD.contains=function(e,t){if(t===e)return!1;for(var n=t;n&&n!==n.parent;)if((n=n.parent)===e)return!0;return!1},yD.merge=function(e,t){if(s(e)&&s(t)){for(var n=e.length,r=+t.length,i=0;i<r;i++)e[n++]=t[i];return e.length=n,e}},yD}var KF,ZF={},QF={};function JF(){if(KF)return QF;KF=1,Object.defineProperty(QF,"__esModule",{value:!0}),QF.update=void 0;var e=aL,t=qF(),n=GF(),r=WD;function i(t,n){var r=Array.isArray(t)?t:[t];n?n.children=r:n=null;for(var i=0;i<r.length;i++){var o=r[i];o.parent&&o.parent.children!==r&&e.DomUtils.removeElement(o),n?(o.prev=r[i-1]||null,o.next=r[i+1]||null):o.prev=o.next=null,o.parent=n}return n}return QF.default=function(e,o,a){if(typeof Buffer<"u"&&Buffer.isBuffer(e)&&(e=e.toString()),"string"==typeof e)return o.xmlMode||o._useHtmlParser2?t.parse(e,o):n.parse(e,o,a);var s=e;if(!Array.isArray(s)&&r.isDocument(s))return s;var l=new r.Document([]);return i(s,l),l},QF.update=i,QF}var ez={};Object.defineProperty(ez,"__esModule",{value:!0}),ez.isHtml=ez.cloneDom=ez.domEach=ez.cssCase=ez.camelCase=ez.isCheerio=ez.isTag=void 0;var tz=aL,nz=WD;ez.isTag=tz.DomUtils.isTag,ez.isCheerio=function(e){return null!=e.cheerio},ez.camelCase=function(e){return e.replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()})},ez.cssCase=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},ez.domEach=function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r);return e},ez.cloneDom=function(e){var t="length"in e?Array.prototype.map.call(e,function(e){return nz.cloneNode(e,!0)}):[nz.cloneNode(e,!0)],n=new nz.Document(t);return t.forEach(function(e){e.parent=n}),t};var rz=/<[a-zA-Z][^]*>/;ez.isHtml=function(e){return rz.test(e)};var iz,oz={};var az,sz={};var lz,cz={};var uz,hz={};function pz(){if(uz)return hz;uz=1,Object.defineProperty(hz,"__esModule",{value:!0}),hz.css=void 0;var e=ez;function t(e,r,i,o){if("string"==typeof r){var a=n(e),s="function"==typeof i?i.call(e,o,a[r]):i;""===s?delete a[r]:null!=s&&(a[r]=s),e.attribs.style=function(e){return Object.keys(e).reduce(function(t,n){return t+(t?" ":"")+n+": "+e[n]+";"},"")}(a)}else"object"==typeof r&&Object.keys(r).forEach(function(n,i){t(e,n,r[n],i)})}function n(t,n){if(t&&e.isTag(t)){var r=function(e){return e=(e||"").trim(),e?e.split(";").reduce(function(e,t){var n=t.indexOf(":");return n<1||n===t.length-1||(e[t.slice(0,n).trim()]=t.slice(n+1).trim()),e},{}):{}}(t.attribs.style);if("string"==typeof n)return r[n];if(Array.isArray(n)){var i={};return n.forEach(function(e){null!=r[e]&&(i[e]=r[e])}),i}return r}}return hz.css=function(r,i){return null!=r&&null!=i||"object"==typeof r&&!Array.isArray(r)?e.domEach(this,function(n,o){e.isTag(n)&&t(n,r,i,o)}):n(this[0],r)},hz}var fz,dz,mz,gz={};function yz(){if(dz)return ZF;dz=1,Object.defineProperty(ZF,"__esModule",{value:!0}),ZF.Cheerio=void 0;var e=cD,t=e.__importDefault(JF()),n=e.__importDefault(mD()),r=ez,i=e.__importStar(function(){if(iz)return oz;iz=1,Object.defineProperty(oz,"__esModule",{value:!0}),oz.toggleClass=oz.removeClass=oz.addClass=oz.hasClass=oz.removeAttr=oz.val=oz.data=oz.prop=oz.attr=void 0;var e=$F(),t=ez,n=Object.prototype.hasOwnProperty,r=/\s+/,i="data-",o={null:null,true:!0,false:!1},a=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,s=/^{[^]*}$|^\[[^]*]$/;function l(r,i,o){var s;if(r&&t.isTag(r)){if(null!==(s=r.attribs)&&void 0!==s||(r.attribs={}),!i)return r.attribs;if(n.call(r.attribs,i))return!o&&a.test(i)?i:r.attribs[i];if("option"===r.name&&"value"===i)return e.text(r.children);if("input"===r.name&&("radio"===r.attribs.type||"checkbox"===r.attribs.type)&&"value"===i)return"on"}}function c(e,t,n){null===n?d(e,t):e.attribs[t]=""+n}function u(e,n,r){if(e&&t.isTag(e))return n in e?e[n]:!r&&a.test(n)?void 0!==l(e,n,!1):l(e,n,r)}function h(e,t,n,r){t in e?e[t]=n:c(e,t,!r&&a.test(t)?n?"":null:""+n)}function p(e,t,n){var r,i=e;null!==(r=i.data)&&void 0!==r||(i.data={}),"object"==typeof t?Object.assign(i.data,t):"string"==typeof t&&void 0!==n&&(i.data[t]=n)}function f(e,r){var a,l,c;null==r?l=(a=Object.keys(e.attribs).filter(function(e){return e.startsWith(i)})).map(function(e){return t.camelCase(e.slice(5))}):(a=[i+t.cssCase(r)],l=[r]);for(var u=0;u<a.length;++u){var h=a[u],p=l[u];if(n.call(e.attribs,h)&&!n.call(e.data,p)){if(c=e.attribs[h],n.call(o,c))c=o[c];else if(c===String(Number(c)))c=Number(c);else if(s.test(c))try{c=JSON.parse(c)}catch{}e.data[p]=c}}return null==r?e.data:c}function d(e,t){!e.attribs||!n.call(e.attribs,t)||delete e.attribs[t]}function m(e){return e?e.trim().split(r):[]}return oz.attr=function(e,n){if("object"==typeof e||void 0!==n){if("function"==typeof n){if("string"!=typeof e)throw new Error("Bad combination of arguments.");return t.domEach(this,function(r,i){t.isTag(r)&&c(r,e,n.call(r,i,r.attribs[e]))})}return t.domEach(this,function(r){t.isTag(r)&&("object"==typeof e?Object.keys(e).forEach(function(t){var n=e[t];c(r,t,n)}):c(r,e,n))})}return arguments.length>1?this:l(this[0],e,this.options.xmlMode)},oz.prop=function(e,n){var r=this;if("string"==typeof e&&void 0===n)switch(e){case"style":var i=this.css(),o=Object.keys(i);return o.forEach(function(e,t){i[t]=e}),i.length=o.length,i;case"tagName":case"nodeName":var a=this[0];return t.isTag(a)?a.name.toUpperCase():void 0;case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return u(this[0],e,this.options.xmlMode)}if("object"==typeof e||void 0!==n){if("function"==typeof n){if("object"==typeof e)throw new Error("Bad combination of arguments.");return t.domEach(this,function(i,o){t.isTag(i)&&h(i,e,n.call(i,o,u(i,e,r.options.xmlMode)),r.options.xmlMode)})}return t.domEach(this,function(i){t.isTag(i)&&("object"==typeof e?Object.keys(e).forEach(function(t){var n=e[t];h(i,t,n,r.options.xmlMode)}):h(i,e,n,r.options.xmlMode))})}},oz.data=function(e,r){var i,o=this[0];if(o&&t.isTag(o)){var a=o;return null!==(i=a.data)&&void 0!==i||(a.data={}),e?"object"==typeof e||void 0!==r?(t.domEach(this,function(n){t.isTag(n)&&("object"==typeof e?p(n,e):p(n,e,r))}),this):n.call(a.data,e)?a.data[e]:f(a,e):f(a)}},oz.val=function(n){var r=0===arguments.length,i=this[0];if(!i||!t.isTag(i))return r?void 0:this;switch(i.name){case"textarea":return this.text(n);case"select":var o=this.find("option:selected");if(!r){if(null==this.attr("multiple")&&"object"==typeof n)return this;this.find("option").removeAttr("selected");for(var a="object"!=typeof n?[n]:n,s=0;s<a.length;s++)this.find('option[value="'+a[s]+'"]').attr("selected","");return this}return this.attr("multiple")?o.toArray().map(function(t){return e.text(t.children)}):o.attr("value");case"input":case"option":return r?this.attr("value"):this.attr("value",n)}},oz.removeAttr=function(e){for(var n=m(e),r=function(e){t.domEach(i,function(r){t.isTag(r)&&d(r,n[e])})},i=this,o=0;o<n.length;o++)r(o);return this},oz.hasClass=function(e){return this.toArray().some(function(n){var i=t.isTag(n)&&n.attribs.class,o=-1;if(i&&e.length)for(;(o=i.indexOf(e,o+1))>-1;){var a=o+e.length;if((0===o||r.test(i[o-1]))&&(a===i.length||r.test(i[a])))return!0}return!1})},oz.addClass=function e(n){if("function"==typeof n)return t.domEach(this,function(r,i){if(t.isTag(r)){var o=r.attribs.class||"";e.call([r],n.call(r,i,o))}});if(!n||"string"!=typeof n)return this;for(var i=n.split(r),o=this.length,a=0;a<o;a++){var s=this[a];if(t.isTag(s)){var u=l(s,"class",!1);if(u){for(var h=" "+u+" ",p=0;p<i.length;p++){var f=i[p]+" ";h.includes(" "+f)||(h+=f)}c(s,"class",h.trim())}else c(s,"class",i.join(" ").trim())}}return this},oz.removeClass=function e(n){if("function"==typeof n)return t.domEach(this,function(r,i){t.isTag(r)&&e.call([r],n.call(r,i,r.attribs.class||""))});var r=m(n),i=r.length,o=0===arguments.length;return t.domEach(this,function(e){if(t.isTag(e))if(o)e.attribs.class="";else{for(var n=m(e.attribs.class),a=!1,s=0;s<i;s++){var l=n.indexOf(r[s]);l>=0&&(n.splice(l,1),a=!0,s--)}a&&(e.attribs.class=n.join(" "))}})},oz.toggleClass=function e(n,i){if("function"==typeof n)return t.domEach(this,function(r,o){t.isTag(r)&&e.call([r],n.call(r,o,r.attribs.class||"",i),i)});if(!n||"string"!=typeof n)return this;for(var o=n.split(r),a=o.length,s="boolean"==typeof i?i?1:-1:0,l=this.length,c=0;c<l;c++){var u=this[c];if(t.isTag(u)){for(var h=m(u.attribs.class),p=0;p<a;p++){var f=h.indexOf(o[p]);s>=0&&f<0?h.push(o[p]):s<=0&&f>=0&&h.splice(f,1)}u.attribs.class=h.join(" ")}}return this},oz}()),o=e.__importStar(function(){if(az)return sz;az=1,Object.defineProperty(sz,"__esModule",{value:!0}),sz.addBack=sz.add=sz.end=sz.slice=sz.index=sz.toArray=sz.get=sz.eq=sz.last=sz.first=sz.has=sz.not=sz.is=sz.filterArray=sz.filter=sz.map=sz.each=sz.contents=sz.children=sz.siblings=sz.prevUntil=sz.prevAll=sz.prev=sz.nextUntil=sz.nextAll=sz.next=sz.closest=sz.parentsUntil=sz.parents=sz.parent=sz.find=void 0;var e=cD,t=WD,n=e.__importStar(oL()),r=ez,i=$F(),o=aL,a=o.DomUtils.uniqueSort,s=/^\s*[~+]/;function l(e){return function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(r){var i,o=e(t,this);return r&&(o=d(o,r,this.options.xmlMode,null===(i=this._root)||void 0===i?void 0:i[0])),this._make(this.length>1&&o.length>1?n.reduce(function(e,t){return t(e)},o):o)}}}sz.find=function(e){var t;if(!e)return this._make([]);var o=this.toArray();if("string"!=typeof e){var a=r.isCheerio(e)?e.toArray():[e];return this._make(a.filter(function(e){return o.some(function(t){return i.contains(t,e)})}))}var l=s.test(e)?o:this.children().toArray(),c={context:o,root:null===(t=this._root)||void 0===t?void 0:t[0],xmlMode:this.options.xmlMode};return this._make(n.select(e,l,c))};var c=l(function(e,t){for(var n,r=[],i=0;i<t.length;i++){var o=e(t[i]);r.push(o)}return(n=new Array).concat.apply(n,r)}),u=l(function(e,t){for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);null!==i&&n.push(i)}return n});function h(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=null,s=l(function(e,t){var n=[];return r.domEach(t,function(t){for(var r;(r=e(t))&&!a?.(r,n.length);t=r)n.push(r)}),n}).apply(void 0,e.__spreadArray([t],i));return function(e,t){var r=this;a="string"==typeof e?function(t){return n.is(t,e,r.options)}:e?f(e):null;var i=s.call(this,t);return a=null,i}}function p(e){return Array.from(new Set(e))}function f(e){return"function"==typeof e?function(t,n){return e.call(t,n,t)}:r.isCheerio(e)?function(t){return Array.prototype.includes.call(e,t)}:function(t){return e===t}}function d(e,t,r,i){return"string"==typeof t?n.filter(t,e,{xmlMode:r,root:i}):e.filter(f(t))}return sz.parent=u(function(e){var n=e.parent;return n&&!t.isDocument(n)?n:null},p),sz.parents=c(function(e){for(var n=[];e.parent&&!t.isDocument(e.parent);)n.push(e.parent),e=e.parent;return n},a,function(e){return e.reverse()}),sz.parentsUntil=h(function(e){var n=e.parent;return n&&!t.isDocument(n)?n:null},a,function(e){return e.reverse()}),sz.closest=function(e){var t=this,n=[];return e?(r.domEach(this,function(r){for(var i;r&&"root"!==r.type;){if(!e||d([r],e,t.options.xmlMode,null===(i=t._root)||void 0===i?void 0:i[0]).length){r&&!n.includes(r)&&n.push(r);break}r=r.parent}}),this._make(n)):this._make(n)},sz.next=u(function(e){return o.DomUtils.nextElementSibling(e)}),sz.nextAll=c(function(e){for(var t=[];e.next;)e=e.next,r.isTag(e)&&t.push(e);return t},p),sz.nextUntil=h(function(e){return o.DomUtils.nextElementSibling(e)},p),sz.prev=u(function(e){return o.DomUtils.prevElementSibling(e)}),sz.prevAll=c(function(e){for(var t=[];e.prev;)e=e.prev,r.isTag(e)&&t.push(e);return t},p),sz.prevUntil=h(function(e){return o.DomUtils.prevElementSibling(e)},p),sz.siblings=c(function(e){return o.DomUtils.getSiblings(e).filter(function(t){return r.isTag(t)&&t!==e})},a),sz.children=c(function(e){return o.DomUtils.getChildren(e).filter(r.isTag)},p),sz.contents=function(){var e=this.toArray().reduce(function(e,n){return t.hasChildren(n)?e.concat(n.children):e},[]);return this._make(e)},sz.each=function(e){for(var t=0,n=this.length;t<n&&!1!==e.call(this[t],t,this[t]);)++t;return this},sz.map=function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n],i=e.call(r,n,r);null!=i&&(t=t.concat(i))}return this._make(t)},sz.filter=function(e){var t;return this._make(d(this.toArray(),e,this.options.xmlMode,null===(t=this._root)||void 0===t?void 0:t[0]))},sz.filterArray=d,sz.is=function(e){var t=this.toArray();return"string"==typeof e?n.some(t.filter(r.isTag),e,this.options):!!e&&t.some(f(e))},sz.not=function(e){var t=this.toArray();if("string"==typeof e){var r=new Set(n.filter(e,t,this.options));t=t.filter(function(e){return!r.has(e)})}else{var i=f(e);t=t.filter(function(e,t){return!i(e,t)})}return this._make(t)},sz.has=function(e){var t=this;return this.filter("string"==typeof e?":has("+e+")":function(n,r){return t._make(r).find(e).length>0})},sz.first=function(){return this.length>1?this._make(this[0]):this},sz.last=function(){return this.length>0?this._make(this[this.length-1]):this},sz.eq=function(e){var t;return 0===(e=+e)&&this.length<=1?this:(e<0&&(e=this.length+e),this._make(null!==(t=this[e])&&void 0!==t?t:[]))},sz.get=function(e){return null==e?this.toArray():this[e<0?this.length+e:e]},sz.toArray=function(){return Array.prototype.slice.call(this)},sz.index=function(e){var t,n;return null==e?(t=this.parent().children(),n=this[0]):"string"==typeof e?(t=this._make(e),n=this[0]):(t=this,n=r.isCheerio(e)?e[0]:e),Array.prototype.indexOf.call(t,n)},sz.slice=function(e,t){return this._make(Array.prototype.slice.call(this,e,t))},sz.end=function(){var e;return null!==(e=this.prevObject)&&void 0!==e?e:this._make([])},sz.add=function(t,n){var r=this._make(t,n),i=a(e.__spreadArray(e.__spreadArray([],this.get()),r.get()));return this._make(i)},sz.addBack=function(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this},sz}()),a=e.__importStar(function(){if(lz)return cz;lz=1,Object.defineProperty(cz,"__esModule",{value:!0}),cz.clone=cz.text=cz.toString=cz.html=cz.empty=cz.replaceWith=cz.remove=cz.insertBefore=cz.before=cz.insertAfter=cz.after=cz.wrapAll=cz.unwrap=cz.wrapInner=cz.wrap=cz.prepend=cz.append=cz.prependTo=cz.appendTo=cz._makeDomArray=void 0;var e=cD,t=WD,n=WD,r=e.__importStar(JF()),i=$F(),o=ez,a=aL;function s(e){return function(){for(var n=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=this.length-1;return o.domEach(this,function(o,a){if(t.hasChildren(o)){var l="function"==typeof r[0]?r[0].call(o,a,i.html(o.children)):r,c=n._makeDomArray(l,a<s);e(c,o.children,o)}})}}function l(t,n,r,i,o){for(var a,s,l=e.__spreadArray([n,r],i),c=t[n-1]||null,u=t[n+r]||null,h=0;h<i.length;++h){var p=i[h],f=p.parent;if(f){var d=f.children.indexOf(i[h]);d>-1&&(f.children.splice(d,1),o===f&&n>d&&l[0]--)}p.parent=o,p.prev&&(p.prev.next=null!==(a=p.next)&&void 0!==a?a:null),p.next&&(p.next.prev=null!==(s=p.prev)&&void 0!==s?s:null),p.prev=i[h-1]||c,p.next=i[h+1]||u}return c&&(c.next=i[0]),u&&(u.prev=i[i.length-1]),t.splice.apply(t,l)}function c(e){return function(t){for(var n=this.length-1,r=this.parents().last(),i=0;i<this.length;i++){var s=this[i],l="function"==typeof t?t.call(s,i,s):"string"!=typeof t||o.isHtml(t)?t:r.find(t).clone(),c=this._makeDomArray(l,i<n)[0];if(c&&a.DomUtils.hasChildren(c)){for(var u=c,h=0;h<u.children.length;){var p=u.children[h];o.isTag(p)?(u=p,h=0):h++}e(s,u,[c])}}return this}}return cz._makeDomArray=function(e,t){var n=this;return null==e?[]:o.isCheerio(e)?t?o.cloneDom(e.get()):e.get():Array.isArray(e)?e.reduce(function(e,r){return e.concat(n._makeDomArray(r,t))},[]):"string"==typeof e?r.default(e,this.options,!1).children:t?o.cloneDom([e]):[e]},cz.appendTo=function(e){return(o.isCheerio(e)?e:this._make(e)).append(this),this},cz.prependTo=function(e){return(o.isCheerio(e)?e:this._make(e)).prepend(this),this},cz.append=s(function(e,t,n){l(t,t.length,0,e,n)}),cz.prepend=s(function(e,t,n){l(t,0,0,e,n)}),cz.wrap=c(function(e,t,n){var i=e.parent;if(i){var o=i.children,a=o.indexOf(e);r.update([e],t),l(o,a,0,n,i)}}),cz.wrapInner=c(function(e,n,i){t.hasChildren(e)&&(r.update(e.children,n),r.update(i,e))}),cz.unwrap=function(e){var t=this;return this.parent(e).not("body").each(function(e,n){t._make(n).replaceWith(n.children)}),this},cz.wrapAll=function(e){var t=this[0];if(t){for(var n=this._make("function"==typeof e?e.call(t,0,t):e).insertBefore(t),r=void 0,i=0;i<n.length;i++)"tag"===n[i].type&&(r=n[i]);for(var o=0;r&&o<r.children.length;){var a=r.children[o];"tag"===a.type?(r=a,o=0):o++}r&&this._make(r).append(this)}return this},cz.after=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return o.domEach(this,function(n,o){var s=n.parent;if(a.DomUtils.hasChildren(n)&&s){var c=s.children,u=c.indexOf(n);if(!(u<0)){var h="function"==typeof t[0]?t[0].call(n,o,i.html(n.children)):t;l(c,u+1,0,e._makeDomArray(h,o<r),s)}}})},cz.insertAfter=function(e){var t=this;"string"==typeof e&&(e=this._make(e)),this.remove();var n=[];return this._makeDomArray(e).forEach(function(e){var r=t.clone().toArray(),i=e.parent;if(i){var o=i.children,a=o.indexOf(e);a<0||(l(o,a+1,0,r,i),n.push.apply(n,r))}}),this._make(n)},cz.before=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length-1;return o.domEach(this,function(n,o){var s=n.parent;if(a.DomUtils.hasChildren(n)&&s){var c=s.children,u=c.indexOf(n);if(!(u<0)){var h="function"==typeof t[0]?t[0].call(n,o,i.html(n.children)):t;l(c,u,0,e._makeDomArray(h,o<r),s)}}})},cz.insertBefore=function(e){var t=this,n=this._make(e);this.remove();var r=[];return o.domEach(n,function(e){var n=t.clone().toArray(),i=e.parent;if(i){var o=i.children,a=o.indexOf(e);a<0||(l(o,a,0,n,i),r.push.apply(r,n))}}),this._make(r)},cz.remove=function(e){var t=e?this.filter(e):this;return o.domEach(t,function(e){a.DomUtils.removeElement(e),e.prev=e.next=e.parent=null}),this},cz.replaceWith=function(e){var t=this;return o.domEach(this,function(n,i){var o=n.parent;if(o){var a=o.children,s="function"==typeof e?e.call(n,i,n):e,c=t._makeDomArray(s);r.update(c,null);var u=a.indexOf(n);l(a,u,1,c,o),c.includes(n)||(n.parent=n.prev=n.next=null)}})},cz.empty=function(){return o.domEach(this,function(e){a.DomUtils.hasChildren(e)&&(e.children.forEach(function(e){e.next=e.prev=e.parent=null}),e.children.length=0)})},cz.html=function(t){if(void 0===t){var n=this[0];return n&&a.DomUtils.hasChildren(n)?i.html(n.children,this.options):null}var s=e.__assign(e.__assign({},this.options),{context:null});return o.domEach(this,function(e){if(a.DomUtils.hasChildren(e)){e.children.forEach(function(e){e.next=e.prev=e.parent=null}),s.context=e;var n=o.isCheerio(t)?t.toArray():r.default(""+t,s,!1).children;r.update(n,e)}})},cz.toString=function(){return i.html(this,this.options)},cz.text=function e(t){var s=this;return void 0===t?i.text(this):"function"==typeof t?o.domEach(this,function(n,r){e.call(s._make(n),t.call(n,r,i.text([n])))}):o.domEach(this,function(e){if(a.DomUtils.hasChildren(e)){e.children.forEach(function(e){e.next=e.prev=e.parent=null});var i=new n.Text(t);r.update(i,e)}})},cz.clone=function(){return this._make(o.cloneDom(this.get()))},cz}()),s=e.__importStar(pz()),l=e.__importStar(function(){if(fz)return gz;fz=1,Object.defineProperty(gz,"__esModule",{value:!0}),gz.serializeArray=gz.serialize=void 0;var e=ez,t="input,select,textarea,keygen",n=/%20/g,r=/\r?\n/g;return gz.serialize=function(){return this.serializeArray().map(function(e){return encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)}).join("&").replace(n,"+")},gz.serializeArray=function(){var n=this;return this.map(function(r,i){var o=n._make(i);return e.isTag(i)&&"form"===i.name?o.find(t).toArray():o.filter(t).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(function(e,t){var i,o=n._make(t),a=o.attr("name"),s=null!==(i=o.val())&&void 0!==i?i:"";return Array.isArray(s)?s.map(function(e){return{name:a,value:e.replace(r,"\r\n")}}):{name:a,value:s.replace(r,"\r\n")}}).toArray()},gz}()),c=function(){function e(e,i,o,a){var s=this;if(void 0===a&&(a=n.default),this.length=0,this.options=a,!e)return this;if(o&&("string"==typeof o&&(o=t.default(o,this.options,!1)),this._root=new this.constructor(o,null,null,this.options),this._root._root=this._root),r.isCheerio(e))return e;var l="string"==typeof e&&r.isHtml(e)?t.default(e,this.options,!1).children:function(e){return!!e.name||"root"===e.type||"text"===e.type||"comment"===e.type}(e)?[e]:Array.isArray(e)?e:null;if(l)return l.forEach(function(e,t){s[t]=e}),this.length=l.length,this;var c=e,u=i?"string"==typeof i?r.isHtml(i)?this._make(t.default(i,this.options,!1)):(c=i+" "+c,this._root):r.isCheerio(i)?i:this._make(i):this._root;return u?u.find(c):this}return e.prototype._make=function(e,t){var n=new this.constructor(e,t,this._root,this.options);return n.prevObject=this,n},e}();return ZF.Cheerio=c,c.prototype.cheerio="[cheerio object]",c.prototype.splice=Array.prototype.splice,c.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(c.prototype,i,o,a,s,l),ZF}function vz(){if(mz)return fD;mz=1,Object.defineProperty(fD,"__esModule",{value:!0}),fD.load=void 0;var e=cD,t=e.__importStar(mD()),n=e.__importStar($F()),r=yz(),i=e.__importDefault(JF());return fD.load=function o(a,s,l){if(void 0===l&&(l=!0),null==a)throw new Error("cheerio.load() expects a string");var c=e.__assign(e.__assign({},t.default),t.flatten(s)),u=i.default(a,c,l),h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(n,t),n}(r.Cheerio);function p(n,r,i,o){return void 0===i&&(i=u),new h(n,r,i,e.__assign(e.__assign({},c),t.flatten(o)))}return Object.assign(p,n,{load:o,_root:u,_options:c,fn:h.prototype,prototype:h.prototype}),p},fD}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.root=e.parseHTML=e.merge=e.contains=void 0;var t=cD;t.__exportStar((uD||(uD=1,Object.defineProperty(hD,"__esModule",{value:!0})),hD),e),t.__exportStar(vz(),e);var n=vz();e.default=n.load([]);var r=t.__importStar($F());e.contains=r.contains,e.merge=r.merge,e.parseHTML=r.parseHTML,e.root=r.root}(SR);var bz={},_z={},wz=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tz(e,t){return new Error(String(e)+" is a required method of "+String(t)+", but was not implemented.")}var xz=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options={}}return wz(e,[{key:"createRenderer",value:function(){return function(e){throw Tz("createRenderer","EnzymeAdapter")}}()},{key:"nodeToElement",value:function(){return function(e){throw Tz("nodeToElement","EnzymeAdapter")}}()},{key:"matchesElementType",value:function(){return function(e,t){return e?e.type===t:e}}()},{key:"isValidElement",value:function(){return function(e){throw Tz("isValidElement","EnzymeAdapter")}}()},{key:"createElement",value:function(){return function(e,t){throw Tz("createElement","EnzymeAdapter")}}()},{key:"invokeSetStateCallback",value:function(){return function(e,t){t.call(e)}}()}]),e}();xz.MODES={STRING:"string",MOUNT:"mount",SHALLOW:"shallow"};var Ez=xz;!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(!e)throw new Error("\n      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.\n      To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n      before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n      corresponding to the library currently being tested. For example:\n\n      import Adapter from 'enzyme-adapter-react-15';\n\n      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n    ");if("function"==typeof e)throw Object.getPrototypeOf(e)===n.default?new Error("\n        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -\n        you provided an adapter *constructor*.\n        To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n        before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n        corresponding to the library currently being tested. For example:\n\n        import Adapter from 'enzyme-adapter-react-15';\n\n        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n      "):new Error("\n      Enzyme Internal Error: Enzyme expects an adapter to be configured -\n      an enzyme adapter must be an object instance; you provided a function.\n      To configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })`\n      before using any of Enzyme's top level APIs, where `Adapter` is the adapter\n      corresponding to the library currently being tested. For example:\n\n      import Adapter from 'enzyme-adapter-react-15';\n\n      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html\n    ");if(!(e instanceof n.default))throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class")};var t,n=(t=Ez)&&t.__esModule?t:{default:t}}(_z),Object.defineProperty(bz,"__esModule",{value:!0}),bz.get=function(){return(0,Sz.default)({},Pz)},bz.merge=Cz,bz.reset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pz={},Cz(e)};var Sz=Oz(Xk),kz=Oz(_z);function Oz(e){return e&&e.__esModule?e:{default:e}}var Pz={};function Cz(e){e.adapter&&(0,kz.default)(e.adapter),(0,Sz.default)(Pz,e)}var Az={},Mz={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&Object.keys(t).every(function(r){if(!e.propertyIsEnumerable(r))return!1;var i=t[r],o=e[r];return!("object"==typeof i&&null!==i?!n(o,i):o!==i)})});t.default=n,e.exports=t.default}(Mz,Mz.exports);var Iz=Mz.exports,Rz={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.adapter)return(0,n.default)(e.adapter),e.adapter;var t=(0,r.get)().adapter;return(0,n.default)(t),t};var t,n=(t=_z)&&t.__esModule?t:{default:t},r=bz}(Rz),Object.defineProperty(Az,"__esModule",{value:!0});var Dz=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Az.propsOfNode=Gz,Az.childrenOfNode=Xz,Az.hasClassName=function(e,t){var n=Gz(e).className||"";return n=String(n).replace(/\s/g," "),(0,zz.default)(t)?t.test(n):(" "+String(n)+" ").indexOf(" "+String(t)+" ")>-1},Az.treeForEach=Wz,Az.treeFilter=Yz,Az.findParentNode=function(e,t){var n=Yz(e,function(e){return!!e.rendered&&-1!==Xz(e).indexOf(t)});return n[0]||null},Az.pathToNode=$z,Az.parentsOfNode=function(e,t){return($z(e,t)||[]).reverse()},Az.nodeHasId=function(e,t){return Gz(e).id===t},Az.nodeMatchesObjectProps=function(e,t){return(0,Bz.default)(Gz(e),function(e){return(0,Lz.default)(e).reduce(function(e,t){var n=Dz(t,2),r=n[0],i=n[1];return(0,Nz.default)({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,function(e){return typeof e<"u"?e:Kz}(i)))},{})}(t))},Az.getTextFromNode=function e(t){return Qz(t,{recurse:e,getCustom:function(){return function(e){var t=e.type;return"<"+String(t.displayName||(0,Fz.default)(t))+" />"}}()})},Az.getTextFromHostNodes=function e(t,n){return Qz(t,{recurse:function(){function t(t){return e(t,n)}return t}(),handleHostNodes:function(){return function(e){return[].concat(n.nodeToHostNode(e,!0)).map(Zz).join("")}}()})},Az.getHTMLFromHostNodes=function e(t,n){return Qz(t,{recurse:function(){function t(t){return e(t,n)}return t}(),handleHostNodes:function(){return function(e){return[].concat(n.nodeToHostNode(e,!0)).map(Jz).join("")}}(),nullRenderReturnsNull:!0})};var Nz=Uz(Xk),jz=Uz(dI),Lz=Uz(YI),Bz=Uz(Iz),Fz=Uz(ER),zz=Uz(LA),Hz=Uz(Rz);function Uz(e){return e&&e.__esModule?e:{default:e}}function Vz(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Gz(e){return e&&e.props||{}}function Xz(e){if(!e)return[];var t=(0,Hz.default)(),n=t.isFragment&&"function"==typeof t.isFragment,r=Array.isArray(e.rendered)?(0,jz.default)(e.rendered,1):[e.rendered];return n?(0,jz.default)(r.map(function(e){return t.isFragment(e)?Xz(e):e}),1):r}function Wz(e,t){e&&t(e),Xz(e).forEach(function(e){return Wz(e,t)})}function Yz(e,t){var n=[];return Wz(e,function(e){t(e)&&n.push(e)}),n}function qz(e,t){return e.filter(function(e){return 0!==Yz(e,t).length})}function $z(e,t){for(var n=[t],r=[],i=function(t){return e===t};n.length;){var o=n.pop(),a=Xz(o);if(o===e)return qz(r,i);r.push(o),0===a.length&&r.pop(),n.push.apply(n,Vz(a))}return null}var Kz={};function Zz(e){return"string"==typeof e?String(e||""):e&&e.textContent||""}function Qz(e,t){var n=t.getCustom,r=t.handleHostNodes,i=t.recurse,o=t.nullRenderReturnsNull,a=void 0!==o&&o;return null==e?"":"string"==typeof e||"number"==typeof e?String(e):n&&e.type&&"function"==typeof e.type?n(e):r&&"host"===e.nodeType?r(e):null==e.rendered&&a?null:Xz(e).map(i).join("")}function Jz(e){return null==e?null:e.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g,"")}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shallowEqual=e.ITERATOR_SYMBOL=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getAdapter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"),(0,g.default)(e)},e.makeOptions=function(e){var t=(0,d.get)(),n=t.attachTo,r=t.hydrateIn,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["attachTo","hydrateIn"]);_(n,r);var a=e.attachTo,s=e.hydrateIn;_(a,s);var l=s||r||n||a||void 0,c=s||r||void 0,u=(0,i.default)({},l&&{attachTo:l},c&&{hydrateIn:c});return(0,i.default)({},o,e,u)},e.isCustomComponent=function(e,t){return(0,y.default)(t),t.isCustomComponent?!!t.isCustomComponent(e):"function"==typeof e},e.isCustomComponentElement=function(e,t){return t.isCustomComponentElement?!!t.isCustomComponentElement(e):!!e&&t.isValidElement(e)&&"function"==typeof e.type},e.propsOfNode=w,e.typeOfNode=function(e){return e?e.type:null},e.nodeHasType=function(e,t){if(!t||!e)return!1;var n=(0,g.default)();if(n.displayNameOfNode){return n.displayNameOfNode(e)===t}return!!e.type&&("string"==typeof e.type?e.type===t:("function"==typeof e.type?(0,l.default)(e.type)===t:e.type.name===t)||e.type.displayName===t)},e.nodeMatches=O,e.nodeEqual=P,e.containsChildrenSubArray=function(e,t,n){var r=(0,m.childrenOfNode)(t);return r.some(function(t,i){return function(e,t,n){return t.length===n.length&&t.every(function(t,r){return e(t,n[r])})}(e,r.slice(i,i+n.length),n)})},e.childrenToSimplifiedArray=C,e.isReactElementAlike=function(e,t){return t.isValidElement(e)||A(e)||Array.isArray(e)},e.withSetStateAllowed=function(e){var t=!1;typeof globalThis.document>"u"&&(t=!0,globalThis.document={}),e(),t&&(globalThis.document=void 0,delete globalThis.document)},e.AND=function(e){var t=e.slice().reverse();return function(e){return t.every(function(t){return t(e)})}},e.displayNameOfNode=function(e){if(!e)return null;var t=e.type;return t?t.displayName||("function"==typeof t?(0,l.default)(t):t.name||t):null},e.sym=function(e){return"function"==typeof Symbol?Symbol.for("enzyme."+String(e)):e},e.privateSet=function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0})},e.cloneElement=function(e,t,n){return e.createElement(t.type,(0,i.default)({},t.props,n))},e.spyMethod=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0,i=e[t],o=(0,c.default)(e,t),a=void 0;return o&&(a=Object.getOwnPropertyDescriptor(e,t)),Object.defineProperty(e,t,{configurable:!0,enumerable:!a||!!a.enumerable,value:n(i)||function(){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=i.apply(this,t);return r=o,o}}()}),{restore:function(){return function(){o?a?Object.defineProperty(e,t,a):e[t]=i:delete e[t]}}(),getLastReturnValue:function(){return function(){return r}}()}};var r=II;Object.defineProperty(e,"shallowEqual",{enumerable:!0,get:function(){return function(){return v(r).default}}()}),e.isEmptyValue=M,e.renderedDive=function e(t){return!!M(t)||[].concat(t).every(function(t){if(t){var n=t.rendered;return M(n)||e(n)}return M(t)})},e.loadCheerioRoot=function(e){return e?(0,f.isHtml)(e)?p.default.load("")(e):p.default.load(e,null,!1).root():p.default.root()};var i=v(Xk),o=v(Lm),a=v(MI),s=v(YI),l=v(ER),c=v(yI),u=v(dI),h=v(dM),p=v(SR),f=ez,d=bz,m=Az,g=v(Rz),y=v(_z);function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){if(e&&t&&e!==t)throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)")}function w(e){return(0,s.default)(e&&e.props||{}).filter(function(e){return typeof n(e,2)[1]<"u"}).reduce(function(e,t){var r=n(t,2),o=r[0],a=r[1];return(0,i.default)(e,b({},o,a))},{})}function T(e,t,n,r){var i=r?O:P;if(e===t)return!0;if(!Array.isArray(e)&&!Array.isArray(t))return i(e,t,n);var o=(0,u.default)(e,1/0),a=(0,u.default)(t,1/0);if(o.length!==a.length)return!1;if(0===o.length&&0===a.length)return!0;for(var s=0;s<o.length;s+=1)if(!i(o[s],a[s],n))return!1;return!0}function x(e,t,n){return T(e,t,n,!0)}function E(e,t,n){return T(e,t,n,!1)}function S(e,t){var r=n(t,2),o=r[0],a=r[1],s=null==a?{}:b({},o,a);return(0,i.default)({},e,s)}function k(e,n,r,i){if(e===n)return!0;if(!e||!n||e.type!==n.type)return!1;var a=w(e),l=w(n);i&&(a=(0,s.default)(a).reduce(S,{}),l=(0,s.default)(l).reduce(S,{}));for(var c=Object.keys(a),u=0;u<c.length;u+=1){var h=c[u];if("children"!==h){if(!(h in l))return!1;if(l[h]!==a[h]){if(t(l[h])!==t(a[h])||"object"!==t(a[h]))return!1;if(!(0,o.default)(a[h],l[h]))return!1}}}var p="children"in a,f="children"in l;if((p||f)&&!(i?x:E)(C(a.children,i),C(l.children,i),r))return!1;if(!A(e)){var d=Object.keys(l);return r(c.length-p,d.length-f)}return!1}function O(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,!0)}function P(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,!1)}function C(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var t=[],n=function(e){null===e||!1===e||typeof e>"u"||t.push(e)};return Array.isArray(e)?e.forEach(n):n(e),t}(e),r=[],i=0;i<n.length;i+=1){var o=n[i],a=r.pop();typeof a>"u"?r.push(o):A(o)&&A(a)?r.push(a+o):(r.push(a),r.push(o))}return t?r.map(function(e){return"string"==typeof e?(0,h.default)(e):e}):r}function A(e){return"string"==typeof e||"number"==typeof e}function M(e){return null===e||!1===e}e.ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator}(vI);var eH={},tH="[object Symbol]",nH=/[&<>"'`]/g,rH=RegExp(nH.source),iH="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,oH="object"==typeof self&&self&&self.Object===Object&&self,aH=iH||oH||Function("return this")();var sH=function(e){return function(t){return e?.[t]}}({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),lH=Object.prototype.toString,cH=aH.Symbol,uH=cH?cH.prototype:void 0,hH=uH?uH.toString:void 0;function pH(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&lH.call(e)==tH}(e))return hH?hH.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var fH=function(e){return(e=function(e){return null==e?"":pH(e)}(e))&&rH.test(e)?e.replace(nH,sH):e},dH=pk,mH=dH("String.prototype.valueOf"),gH=dH("Object.prototype.toString"),yH=yA(),vH=function(e){return"string"==typeof e||!(!e||"object"!=typeof e)&&(yH?function(e){try{return mH(e),!0}catch{return!1}}(e):"[object String]"===gH(e))},bH=pk,_H=bH("Number.prototype.toString"),wH=bH("Object.prototype.toString"),TH=yA(),xH=pk,EH=xH("Boolean.prototype.toString"),SH=xH("Object.prototype.toString"),kH=yA();Object.defineProperty(eH,"__esModule",{value:!0});var OH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};eH.typeName=UH,eH.spaces=VH,eH.indent=GH,eH.debugNode=WH,eH.debugNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.map(function(e){return WH(e,void 0,t)}).join("\n\n\n")};var PH=zH(fH),CH=zH(ER),AH=zH(vH),MH=function(e){return"number"==typeof e||!(!e||"object"!=typeof e)&&(TH?function(e){try{return _H(e),!0}catch{return!1}}(e):"[object Number]"===wH(e))},IH=zH(MH),RH=zH(WP),DH=function(e){return"boolean"==typeof e||null!==e&&"object"==typeof e&&(kH?function(e){try{return EH(e),!0}catch{return!1}}(e):"[object Boolean]"===SH(e))},NH=zH(DH),jH=zH(DO),LH=zH(yI),BH=Az,FH=zH(Rz);function zH(e){return e&&e.__esModule?e:{default:e}}var HH=Function.bind.call(Function.call,Boolean.prototype.valueOf);function UH(e){return(0,FH.default)().displayNameOfNode?(0,FH.default)().displayNameOfNode(e)||"Component":"function"==typeof e.type?e.type.displayName||(0,CH.default)(e.type)||"Component":e.type}function VH(e){return Array(e+1).join(" ")}function GH(e,t){return t.split("\n").map(function(t){return""+String(VH(e))+String(t)}).join("\n")}function XH(e,t){var n=(0,BH.propsOfNode)(e);return Object.keys(n).filter(function(e){return"children"!==e}).map(function(e){return String(e)+"="+String(function(e,t){return(0,AH.default)(e)?(0,jH.default)(String(e),{quoteStyle:"double"}):(0,IH.default)(e)?"{"+String((0,jH.default)(Number(e)))+"}":(0,NH.default)(e)?"{"+String((0,jH.default)(HH(e)))+"}":(0,RH.default)(e)?"{"+String((0,jH.default)(e))+"}":"object"===(typeof e>"u"?"undefined":OH(e))?t.verbose?"{"+String((0,jH.default)(e))+"}":"{{...}}":"{["+(typeof e>"u"?"undefined":OH(e))+"]}"}(n[e],t))}).join(" ")}function WH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof e||"number"==typeof e)return(0,PH.default)(e);if("function"==typeof e){var r=(0,CH.default)(e);return"[function"+(r?" "+String(r):"")+"]"}if(!e)return"";if(!(0,FH.default)().isValidElement(e)&&!function(e){return(0,LH.default)(e,"nodeType")&&"string"==typeof e.nodeType&&(0,LH.default)(e,"type")&&(0,LH.default)(e,"key")&&(0,LH.default)(e,"ref")&&(0,LH.default)(e,"instance")&&(0,LH.default)(e,"rendered")}(e))return"{"+String((0,jH.default)(e))+"}";var i=(0,BH.childrenOfNode)(e).map(function(e){return WH(e,t,n)}).filter(Boolean),o=UH(e),a=n.ignoreProps?"":XH(e,n),s=a?" ":"",l=i.length?">":" ",c=function(e,t){return e.length?"\n"+String(e.map(function(e){return GH(t,e)}).join("\n"))+"\n":""}(i,t),u=i.length?"</"+String(o)+">":"/>";return"<"+String(o)+s+String(a)+l+String(c)+u}var YH={},qH={},$H={};Object.defineProperty($H,"__esModule",{value:!0});var KH=function(e){return JSON.stringify(e)},ZH=function(e){var t=e.body,n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=void 0;if("universalSelector"===l.type)c="*";else if("typeSelector"===l.type)c=l.name;else if("idSelector"===l.type)c="#"+l.name;else if("classSelector"===l.type)c="."+l.name;else if("attributePresenceSelector"===l.type)c="["+l.name+"]";else if("attributeValueSelector"===l.type)c="["+l.name+l.operator+KH(l.value)+"]";else if("pseudoClassSelector"===l.type)c=":"+l.name,l.parameters.length&&(c+="("+l.parameters.map(KH).join(", ")+")");else{if("pseudoElementSelector"!==l.type)throw new Error("Unknown token.");c="::"+l.name}n.push(c)}}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n.join("")};$H.default=function(){return{generate:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("selector"===s.type)t.push(ZH(s));else if("descendantCombinator"===s.type)t.push(" ");else if("childCombinator"===s.type)t.push(" > ");else if("adjacentSiblingCombinator"===s.type)t.push(" + ");else{if("generalSiblingCombinator"!==s.type)throw new Error("Unknown token.");t.push(" ~ ")}}}catch(l){r=!0,i=l}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return t.join("")}}};var QH={},JH={exports:{}};!function(e){var t,n;t=Ss,n=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach(function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)})}function i(){this.reset("")}function o(e,t,o){if(e instanceof r){var a=e;o=t}else a=r.fromCompiled(e,t);for(var s in this.grammar=a,this.options={keepHistory:!1,lexer:a.lexer||new i},o||{})this.options[s]=o[s];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(a,0);this.table=[l],l.wants[a.start]=[],l.predict(a.start),l.process(),this.current=0}function a(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=typeof e>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,e).map(a).join(" ")+" \u25cf "+this.symbols.slice(e).map(a).join(" ");return this.name+" \u2192 "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,i=0;i<t.length;i++){var a=t[i];if(a.isComplete){if(a.finish(),a.data!==o.fail){for(var s=a.wantedBy,l=s.length;l--;){var c=s[l];this.complete(c,a)}if(a.reference===this.index){var u=a.rule.name;(this.completed[u]=this.completed[u]||[]).push(a)}}}else{if("string"!=typeof(u=a.rule.symbols[a.dot])){this.scannable.push(a);continue}if(n[u]){if(n[u].push(a),r.hasOwnProperty(u)){var h=r[u];for(l=0;l<h.length;l++){var p=h[l];this.complete(a,p)}}}else n[u]=[a],this.predict(u)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var i=n[r],o=this.wants[e],a=new t(i,0,this.index,o);this.states.push(a)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var i=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var o=new r(t=t.map(function(t){return new e(t.name,t.symbols,t.postprocess)}),n);return o.lexer=i,o},i.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(e,t){var n=this.buffer;if("string"==typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var o=this.index-this.lastLineBreak,a=String(this.line).length;return t+=" at line "+this.line+" col "+o+":\n\n",t+=r.map(function(e,t){return s(this.line-r.length+t+1,a)+" "+e},this).join("\n"),t+="\n"+s("",a+o)+"^\n"}return t+" at index "+(this.index-1);function s(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(g){var o=new n(this.grammar,this.current+1);throw this.table.push(o),(s=new Error(this.reportLexerError(g))).offset=this.current,s.token=g.token,s}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var s,l=this.current+1;o=new n(this.grammar,l),this.table.push(o);for(var c=void 0!==t.text?t.text:t.value,u=r.constructor===i?t.value:t,h=a.scannable,p=h.length;p--;){var f=h[p],d=f.rule.symbols[f.dot];if(d.test?d.test(u):d.type?d.type===t.type:d.literal===c){var m=f.nextState({data:u,token:t,isToken:!0,reference:l-1});o.states.push(m)}}if(o.process(),0===o.states.length)throw(s=new Error(this.reportError(t))).offset=this.current,s.token=t,s;this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},o.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},o.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,i=this.table[r],o=i.states.filter(function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t});return 0===o.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),o.map(function(e){return this.buildFirstStateStack(e,[])||[e]},this).forEach(function(e){var t=e[0],r=t.rule.symbols[t.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(e,n)},this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],a=o.rule.toString(o.dot);a===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+a)),n=a}},o.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},o.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),i=this.buildFirstStateStack(n,r);return null===i?null:[e].concat(i)},o.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},o.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},o.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},o.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&e.push(n)}),e.map(function(e){return e.data})},{Parser:o,Grammar:r,Rule:e}},e.exports?e.exports=n():t.nearley=n()}(JH);var eU=JH.exports,tU={exports:{}},nU=1/0,rU=9007199254740991,iU="[object Arguments]",oU="[object Function]",aU="[object GeneratorFunction]",sU="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,lU="object"==typeof self&&self&&self.Object===Object&&self,cU=sU||lU||Function("return this")(),uU=Object.prototype,hU=uU.hasOwnProperty,pU=uU.toString,fU=cU.Symbol,dU=uU.propertyIsEnumerable,mU=fU?fU.isConcatSpreadable:void 0;function gU(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yU),i||(i=[]);++o<a;){var s=e[o];n(s)?gU(s,t-1,n,r,i):i[i.length]=s}return i}function yU(e){return vU(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=rU}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?pU.call(e):"";return t==oU||t==aU}(e)}(e)}(e)&&hU.call(e,"callee")&&(!dU.call(e,"callee")||pU.call(e)==iU)}(e)||!!(mU&&e&&e[mU])}var vU=Array.isArray;var bU=function(e){return(e?e.length:0)?gU(e,nU):[]};!function(e){!function(){function t(e){return e[0]}var n,r,i=bU,o=function(e){return e=e.filter(function(e){return null!==e}),i(e)},a={" ":"descendantCombinator","+":"adjacentSiblingCombinator",">":"childCombinator","~":"generalSiblingCombinator"},s=function(e,t,n){var r=i(e).join(""),o=parseFloat(r);return isNaN(o)?n:o},l=function(e,t,n){return"true"===e[0]||"false"!==e[0]&&n},c=function(e,t,n){return"NaN"===e[0]?NaN:"undefined"!==e[0]?"null"===e[0]?null:n:void 0},u={Lexer:void 0,ParserRules:[{name:"combinator",symbols:["selector"]},{name:"combinator",symbols:["combinator","_",/[>+~ ]/,"_","selector"],postprocess:function(e){return(Array.isArray(e[0])?e[0]:[e[0]]).concat({type:a[e[2]]}).concat(e[4])}},{name:"selector",symbols:["selectorBody"],postprocess:function(e){return{type:"selector",body:e[0]}}},{name:"selectorBody$ebnf$1",symbols:["typeSelector"],postprocess:t},{name:"selectorBody$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"selectorBody$ebnf$2",symbols:[]},{name:"selectorBody$ebnf$2",symbols:["selectorBody$ebnf$2","simpleSelector"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"selectorBody",symbols:["selectorBody$ebnf$1","selectorBody$ebnf$2"],postprocess:function(e,t,n){var r=o(e);return r.length?r:n}},{name:"selectorBody$ebnf$3",symbols:[]},{name:"selectorBody$ebnf$3",symbols:["selectorBody$ebnf$3","simpleSelector"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"selectorBody",symbols:["universalSelector","selectorBody$ebnf$3"],postprocess:o},{name:"simpleSelector",symbols:["idSelector"]},{name:"simpleSelector",symbols:["classSelector"]},{name:"simpleSelector",symbols:["attributeValueSelector"]},{name:"simpleSelector",symbols:["attributePresenceSelector"]},{name:"simpleSelector",symbols:["pseudoClassSelector"]},{name:"simpleSelector",symbols:["pseudoElementSelector"]},{name:"typeSelector",symbols:["attributeName"],postprocess:function(e){return{type:"typeSelector",name:e[0]}}},{name:"className$ebnf$1",symbols:[{literal:"-"}],postprocess:t},{name:"className$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"className$ebnf$2",symbols:[]},{name:"className$ebnf$2",symbols:["className$ebnf$2",/[_a-zA-Z0-9-]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"className",symbols:["className$ebnf$1",/[_a-zA-Z]/,"className$ebnf$2"],postprocess:function(e){return(e[0]||"")+e[1]+e[2].join("")}},{name:"attributeName$ebnf$1",symbols:[]},{name:"attributeName$ebnf$1",symbols:["attributeName$ebnf$1",/[_a-zA-Z()0-9-]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"attributeName",symbols:[/[_a-z()A-Z]/,"attributeName$ebnf$1"],postprocess:function(e){return e[0]+e[1].join("")}},{name:"classSelector",symbols:[{literal:"."},"className"],postprocess:function(e){return{type:"classSelector",name:e[1]}}},{name:"idSelector",symbols:[{literal:"#"},"attributeName"],postprocess:function(e){return{type:"idSelector",name:e[1]}}},{name:"universalSelector",symbols:[{literal:"*"}],postprocess:function(e){return{type:"universalSelector"}}},{name:"attributePresenceSelector",symbols:[{literal:"["},"attributeName",{literal:"]"}],postprocess:function(e){return{type:"attributePresenceSelector",name:e[1]}}},{name:"attributeOperator",symbols:[{literal:"="}]},{name:"attributeOperator$string$1",symbols:[{literal:"~"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$1"]},{name:"attributeOperator$string$2",symbols:[{literal:"|"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$2"]},{name:"attributeOperator$string$3",symbols:[{literal:"^"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$3"]},{name:"attributeOperator$string$4",symbols:[{literal:"$"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$4"]},{name:"attributeOperator$string$5",symbols:[{literal:"*"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$5"]},{name:"attributeValueSelector",symbols:[{literal:"["},"attributeName","attributeOperator","attributeValue",{literal:"]"}],postprocess:function(e){return{type:"attributeValueSelector",name:e[1],value:e[3],operator:e[2][0]}}},{name:"attributeValue",symbols:["falsyPrimitiveStrings"],postprocess:t},{name:"attributeValue",symbols:["numericValue"],postprocess:t},{name:"attributeValue",symbols:["sqstring"],postprocess:t},{name:"attributeValue",symbols:["dqstring"],postprocess:t},{name:"falsyPrimitiveStrings$string$1",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$1"],postprocess:l},{name:"falsyPrimitiveStrings$string$2",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$2"],postprocess:l},{name:"falsyPrimitiveStrings$string$3",symbols:[{literal:"N"},{literal:"a"},{literal:"N"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$3"],postprocess:c},{name:"falsyPrimitiveStrings$string$4",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$4"],postprocess:c},{name:"falsyPrimitiveStrings$string$5",symbols:[{literal:"u"},{literal:"n"},{literal:"d"},{literal:"e"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"e"},{literal:"d"}],postprocess:function(e){return e.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$5"],postprocess:c},{name:"numericValue",symbols:["int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int"],postprocess:s},{name:"numericValue",symbols:["int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int"],postprocess:s},{name:"numericValue$string$1",symbols:[{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$1"],postprocess:s},{name:"numericValue$string$2",symbols:[{literal:"+"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$2"],postprocess:s},{name:"numericValue$string$3",symbols:[{literal:"-"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(e){return e.join("")}},{name:"numericValue",symbols:["numericValue$string$3"],postprocess:s},{name:"int$ebnf$1",symbols:[/[0-9]/]},{name:"int$ebnf$1",symbols:["int$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"int",symbols:["int$ebnf$1"]},{name:"classParameters",symbols:[]},{name:"classParameters",symbols:["classParameter"]},{name:"classParameters",symbols:["classParameters",{literal:","},"_","classParameter"],postprocess:(n=0,r=3,function(e){return e[n].concat([e[r]])})},{name:"classParameter$ebnf$1",symbols:[/[^()"', ]/]},{name:"classParameter$ebnf$1",symbols:["classParameter$ebnf$1",/[^()"', ]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"classParameter",symbols:["classParameter$ebnf$1"],postprocess:function(e){return e[0].join("")}},{name:"classParameter",symbols:["sqstring"],postprocess:t},{name:"classParameter",symbols:["dqstring"],postprocess:t},{name:"pseudoElementSelector$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:function(e){return e.join("")}},{name:"pseudoElementSelector",symbols:["pseudoElementSelector$string$1","pseudoClassSelectorName"],postprocess:function(e){return{type:"pseudoElementSelector",name:e[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName"],postprocess:function(e){return{type:"pseudoClassSelector",name:e[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName",{literal:"("},"classParameters",{literal:")"}],postprocess:function(e){return{type:"pseudoClassSelector",name:e[1],parameters:e[3]}}},{name:"pseudoClassSelectorName$ebnf$1",symbols:[/[a-zA-Z0-9-_]/]},{name:"pseudoClassSelectorName$ebnf$1",symbols:["pseudoClassSelectorName$ebnf$1",/[a-zA-Z0-9-_]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"pseudoClassSelectorName",symbols:[/[a-zA-Z]/,"pseudoClassSelectorName$ebnf$1"],postprocess:function(e){return e[0]+e[1].join("")}},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"dstrchar",symbols:[/[^"]/],postprocess:t},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(e){return'"'}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"sstrchar",symbols:[/[^']/],postprocess:t},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(e){return"'"}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(e){return null}}],ParserStart:"combinator"};e.exports=u}()}(tU);var _U=tU.exports;Object.defineProperty(QH,"__esModule",{value:!0});var wU=eU,TU=function(e){return e&&e.__esModule?e:{default:e}}(_U);QH.default=function(){return{parse:function(e){var t=new wU.Parser(TU.default.ParserRules,TU.default.ParserStart).feed(e).results;if(0===t.length)throw new Error("Found no parsings.");if(t.length>1)throw new Error("Ambiguous results.");return t[0]}}},Object.defineProperty(qH,"__esModule",{value:!0}),qH.createParser=qH.createGenerator=void 0;var xU=SU($H),EU=SU(QH);function SU(e){return e&&e.__esModule?e:{default:e}}qH.createGenerator=xU.default,qH.createParser=EU.default;var kU=UA,OU=pk("Object.prototype.propertyIsEnumerable"),PU=function(e){var t=kU(e),n=[];for(var r in t)OU(t,r)&&(n[n.length]=t[r]);return n},CU=PU,AU=function(){return"function"==typeof Object.values?Object.values:CU},MU=AU,IU=vE,RU=vE,DU=PU,NU=AU,jU=function(){var e=MU();return IU(Object,{values:e},{values:function(){return Object.values!==e}}),e},LU=lk(NU(),Object);RU(LU,{getPolyfill:NU,implementation:DU,shim:jU});var BU,FU,zU=LU,HU=KS,UU=lk,VU=UU(HU("String.prototype.indexOf")),GU=function(e,t){var n=HU(e,!!t);return"function"==typeof n&&VU(e,".prototype.")>-1?UU(n):n},XU=aC,WU=pC,YU=cA,qU=vP,$U=fA,KU=YP,ZU=FM,QU=qP,JU=ZM,eV=XA,tV=GU,nV=vH,rV=_E("a"),iV="a"!==rV[0]||!(0 in rV),oV=tV("String.prototype.split"),aV=function(e){var t,n=JU(this),r=iV&&nV(n)?oV(n,""):n,i=ZU(r);if(!KU(e))throw new TypeError("Array.prototype.filter callback must be a function");arguments.length>1&&(t=arguments[1]);for(var o=XU(n,0),a=0,s=0;a<i;){var l=eV(a);if($U(n,l)){var c=qU(n,l);QU(WU(e,t,[c,a,n]))&&(YU(o,eV(s),c),s+=1)}a+=1}return o},sV=function(e){var t=!0,n=!0,r=!1;if("function"==typeof e){try{e.call("f",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([null],function(){n="string"==typeof this},"x")}catch{r=!0}return!r&&t&&n}return!1},lV=aV,cV=function(){var e=Array.prototype.filter;return sV(e)?e:lV};var uV=vE,hV=UA,pV=GU,fV=aV,dV=cV,mV=lk.apply(dV()),gV=function(){if(FU)return BU;FU=1;var e=vE,t=cV;return BU=function(){var n=t();return e(Array.prototype,{filter:n},{filter:function(){return Array.prototype.filter!==n}}),n}}(),yV=pV("Array.prototype.slice"),vV=function(e,t){return hV(e),mV(e,yV(arguments,1))};uV(vV,{getPolyfill:dV,implementation:fV,shim:gV});var bV=vV,_V=GU("Array.prototype.push"),wV=function(e,t){for(var n=[],r=0;r<e.length;r+=1)_V(n,t(e[r],r));return n},TV=[["HTMLElement","article"],["HTMLElement","section"],["HTMLBaseFontElement","basefont","HTMLBaseFontElementConstructor"],["HTMLPhraseElement","cite","HTMLElement"],["HTMLElement","noscript"],["HTMLBGSoundElement","bgsound","HTMLElement"],["HTMLPhraseElement","blink","HTMLElement"],["HTMLElement","multicol"],["HTMLNextIdElement","nextid","HTMLElement"],["HTMLElement","rb"],["HTMLElement","spacer"],["HTMLAnchorElement","a","HTMLElement"],["HTMLAreaElement","area","HTMLElement"],["HTMLAudioElement","audio","HTMLElement"],["HTMLBaseElement","base","HTMLElement"],["HTMLBodyElement","body","HTMLElement"],["HTMLBRElement","br","HTMLElement"],["HTMLButtonElement","button"],["HTMLCanvasElement","canvas"],["HTMLContentElement","content","HTMLElement"],["HTMLDataElement","data","HTMLElement"],["HTMLDataListElement","datalist"],["HTMLDialogElement","dialog","HTMLElement"],["HTMLDirectoryElement","dir"],["HTMLDivElement","div"],["HTMLDListElement","dl"],["HTMLEmbedElement","embed"],["HTMLFieldSetElement","fieldset"],["HTMLFontElement","font"],["HTMLFormElement","form"],["HTMLFrameElement","frame"],["HTMLFrameSetElement","frameset"],["HTMLHeadElement","head"],["HTMLHeadingElement","h1"],["HTMLHeadingElement","h2"],["HTMLHeadingElement","h3"],["HTMLHeadingElement","h4"],["HTMLHeadingElement","h5"],["HTMLHeadingElement","h6"],["HTMLHtmlElement","html"],["HTMLHRElement","hr"],["HTMLIFrameElement","iframe"],["HTMLImageElement","img"],["HTMLInputElement","input"],["HTMLIsIndexElement","index","HTMLElement"],["HTMLKeygenElement","keygen","HTMLBlockElement"],["HTMLLabelElement","label"],["HTMLLegendElement","legend"],["HTMLLIElement","li"],["HTMLLinkElement","link"],["HTMLElement","main"],["HTMLMapElement","map"],["HTMLMarqueeElement","marquee"],["HTMLMenuElement","menu"],["HTMLMetaElement","meta"],["HTMLMeterElement","meter","HTMLElement"],["HTMLModElement","del"],["HTMLModElement","ins"],["HTMLObjectElement","object"],["HTMLOListElement","ol"],["HTMLOptGroupElement","optgroup"],["HTMLOptionElement","option"],["HTMLOutputElement","output"],["HTMLParagraphElement","p"],["HTMLParamElement","param"],["HTMLPictureElement","picture","HTMLElement"],["HTMLPreElement","pre"],["HTMLProgressElement","progress","HTMLElement"],["HTMLQuoteElement","q","HTMLBlockquoteElement"],["HTMLQuoteElement","blockquote","HTMLBlockElement","HTMLBlockquoteElement"],["HTMLScriptElement","script"],["HTMLSelectElement","select"],["HTMLShadowElement","shadow","HTMLElement"],["HTMLSourceElement","source"],["HTMLSpanElement","span","HTMLElement"],["HTMLStyleElement","style"],["HTMLTableElement","table"],["HTMLTableCaptionElement","caption"],["HTMLTableCellElement","td","HTMLTableDataCellElement"],["HTMLTableCellElement","th","HTMLTableHeaderCellElement"],["HTMLTableRowElement","tr"],["HTMLTableColElement","col"],["HTMLTableColElement","colgroup"],["HTMLTableSectionElement","tbody"],["HTMLTableSectionElement","thead"],["HTMLTableSectionElement","tfoot"],["HTMLTemplateElement","template","HTMLElement"],["HTMLTextAreaElement","textarea"],["HTMLTimeElement","time","HTMLElement"],["HTMLTitleElement","title"],["HTMLTrackElement","track","HTMLElement"],["HTMLUListElement","ul"],["HTMLVideoElement","video"],["HTMLElement","abbr"],["HTMLElement","address"],["HTMLElement","aside"],["HTMLElement","b"],["HTMLElement","bdi"],["HTMLElement","bdo"],["HTMLElement","code"],["HTMLElement","dd"],["HTMLDetailsElement","details","HTMLElement"],["HTMLElement","dfn"],["HTMLElement","dt"],["HTMLElement","em"],["HTMLElement","figcaption"],["HTMLElement","figure"],["HTMLElement","footer"],["HTMLElement","header"],["HTMLElement","hgroup"],["HTMLElement","i"],["HTMLElement","kbd"],["HTMLElement","mark"],["HTMLElement","nav"],["HTMLElement","rp"],["HTMLElement","rt"],["HTMLElement","ruby"],["HTMLElement","s"],["HTMLElement","samp"],["HTMLSlotElement","slot","HTMLElement"],["HTMLElement","small"],["HTMLElement","strong"],["HTMLElement","summary"],["HTMLElement","u"],["HTMLElement","var"],["HTMLElement","wbr"]],xV=function(e,t,n){if(typeof document<"u"&&"function"==typeof document.createElement){var r=document.createElement(e).constructor;if(r!==n)return r}},EV=bV,SV=function(){var e=globalThis.HTMLUnknownElement;return{all:globalThis.HTMLElement,elements:wV(TV,function(t){for(var n,r,i=t[0],o=t[1],a=2;a<arguments.length&&!r;a+=1)r=(n=t[a])&&globalThis[n];var s=globalThis[i];return{constructor:xV(o,0,e),constructorName:r?n:i,expectedConstructor:r||s,tag:o}}),unknown:e}};Object.defineProperty(YH,"__esModule",{value:!0});var kV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OV=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();YH.buildPredicate=hG,YH.reduceTreeBySelector=gG,YH.reduceTreesBySelector=function(e,t){var n=t.map(function(t){return gG(e,t)});return oG((0,AV.default)(n,1))};var PV=qH,CV=BV(zU),AV=BV(dI),MV=BV(MI),IV=BV(yI),RV=function(e){if(!e)return[];var t=SV();return e===t.unknown?[]:e===t.all?t.elements:EV(t.elements,function(t){return t.constructor===e})},DV=BV(RV),NV=Az,jV=vI,LV=BV(Rz);function BV(e){return e&&e.__esModule?e:{default:e}}var FV=(0,PV.createParser)(),zV="childCombinator",HV="adjacentSiblingCombinator",UV="generalSiblingCombinator",VV="descendantCombinator",GV="selector",XV="typeSelector",WV="classSelector",YV="idSelector",qV="universalSelector",$V="attributePresenceSelector",KV="attributeValueSelector",ZV="pseudoClassSelector",QV="pseudoElementSelector",JV="=",eG="~=",tG="|=",nG="^=",rG="$=",iG="*=";function oG(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(e)))}function aG(e,t){return oG(t.reduce(e,[]))}function sG(e){try{return FV.parse(e)}catch{throw new Error("Failed to parse selector: "+String(e))}}function lG(e,t){var n=t.operator,r=t.value,i=t.name,o=(0,jV.propsOfNode)(e),a=Object.getOwnPropertyDescriptor(o,i);if(a&&a.get)return!1;var s=o[i];if(typeof s>"u")return!1;if(t.type===$V)return(0,IV.default)(o,t.name);if(("string"!=typeof s||"string"!=typeof r)&&n!==JV)return!1;switch(n){case JV:return(0,MV.default)(s,r);case eG:return-1!==s.split(" ").indexOf(r);case tG:return s===r||s.startsWith(String(r)+"-");case nG:return""!==r&&s.slice(0,r.length)===r;case rG:return""!==r&&s.slice(-r.length)===r;case iG:return""!==r&&-1!==s.indexOf(r);default:throw new Error('Enzyme::Selector: Unknown attribute selector operator "'+String(n)+'"')}}function cG(e,t,n){if(null===e||"string"==typeof e)return!1;switch(t.type){case qV:return!0;case WV:return(0,NV.hasClassName)(e,t.name);case XV:return(0,jV.nodeHasType)(e,t.name);case YV:return(0,NV.nodeHasId)(e,t.name);case $V:case KV:return lG(e,t);case QV:case ZV:return function(e,t,n){var r=t.name,i=t.parameters;if("not"===r)return i.every(function(t){return 0===gG(t,e).length});if("empty"===r)return 0===(0,NV.treeFilter)(e,function(t){return t!==e}).length;if("first-child"===r){var o=(0,NV.findParentNode)(n,e).rendered;return OV(o,1)[0]===e}if("last-child"===r){var a=(0,NV.findParentNode)(n,e).rendered;return a[a.length-1]===e}if("focus"===r){if(typeof document>"u")throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a global `document`.');var s=(0,LV.default)();return document.activeElement&&s.nodeToHostNode(e)===document.activeElement}throw new TypeError('Enzyme::Selector does not support the "'+String(t.name)+'" pseudo-element or pseudo-class selectors.')}(e,t,n);default:throw new Error("Unknown token type: "+String(t.type))}}function uG(e,t){return function(n){return e.body.every(function(e){return cG(n,e,t)})}}function hG(e){if("string"==typeof e){var t=sG(e);if(function(e){return e.some(function(e){return e.type!==GV})}(t))throw new TypeError("This method does not support complex CSS selectors");return uG(t[0])}var n=(0,LV.default)();if(n.isValidElementType?n.isValidElementType(e):"function"==typeof e)return function(t){return n.matchesElementType(t,e)};if("object"===(typeof e>"u"?"undefined":kV(e))){if(!Array.isArray(e)&&null!==e&&Object.keys(e).length>0){if((0,CV.default)(e).some(function(e){return typeof e>"u"}))throw new TypeError("Enzyme::Props can\u2019t have `undefined` values. Try using \u2018findWhere()\u2019 instead.");return function(t){return(0,NV.nodeMatchesObjectProps)(t,e)}}throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector")}throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)")}function pG(e,t,n){return e.reduce(function(e,r){var i=(0,NV.findParentNode)(n,r);if(!i)return e;var o=(0,NV.childrenOfNode)(i),a=o.indexOf(r),s=o[a+1];return s&&t(s)&&e.push(s),e},[])}function fG(e,t,n){return aG(function(e,r){var i=(0,NV.findParentNode)(n,r);if(!i)return e;var o=(0,NV.childrenOfNode)(i),a=o.indexOf(r),s=o.slice(a+1);return e.concat(s.filter(t))},e)}function dG(e,t){return aG(function(e,n){return e.concat((0,NV.childrenOfNode)(n).filter(t))},e)}function mG(e,t){return aG(function(e,n){return e.concat((0,NV.treeFilter)(n,t))},(0,AV.default)(e.map(NV.childrenOfNode)))}function gG(e,t){if("string"!=typeof e){var n=(0,DV.default)(e);if(n.length>0)return(0,AV.default)(n.map(function(e){return gG(e.tag,t)}))}if("function"==typeof e||"object"===(typeof e>"u"?"undefined":kV(e)))return(0,NV.treeFilter)(t,hG(e));var r=[];if("string"!=typeof e)throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");for(var i=sG(e),o=0;o<i.length;){var a=i[o];if(a.type===GV){var s=uG(a,t);r=r.concat((0,NV.treeFilter)(t,s))}else{var l=a.type,c=uG(i[o+=1],t);switch(l){case HV:r=pG(r,c,t);break;case UV:r=fG(r,c,t);break;case zV:r=dG(r,c);break;case VV:r=mG(r,c);break;default:throw new Error("Unknown combinator selector: "+String(l))}}o+=1}return r}!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=h(Xk),i=h(dI),o=h(yI),a=vI,s=h(Rz),l=eH,c=Az,u=YH;function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=(0,a.sym)("__node__"),m=(0,a.sym)("__nodes__"),g=(0,a.sym)("__renderer__"),y=(0,a.sym)("__unrendered__"),v=(0,a.sym)("__root__"),b=(0,a.sym)("__options__"),_=(0,a.sym)("__rootNodes__"),w=(0,a.sym)("__wrappingComponent__"),T=(0,a.sym)("__linkedRoots__"),x=(0,a.sym)("__updatedBy__");function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.treeFilter;return e.flatMap(function(e){return n(e.getNodeInternal(),t)})}function S(e,t){return e.wrap(e.getNodesInternal().filter(t).filter(Boolean))}function k(e){if(1!==e[v].length)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return e[v]!==e?e[_][0]:e[v][d]}function O(e,t){return(0,c.parentsOfNode)(t,k(e))}function P(e,t){t?Array.isArray(t)?((0,a.privateSet)(e,d,t[0]),(0,a.privateSet)(e,m,t)):((0,a.privateSet)(e,d,t),(0,a.privateSet)(e,m,[t])):((0,a.privateSet)(e,d,null),(0,a.privateSet)(e,m,[])),(0,a.privateSet)(e,"length",e[m].length)}var C=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(f(this,e),!globalThis.window&&!globalThis.document)throw new Error("It looks like you called `mount()` without a global document being loaded.");var o=(0,a.makeOptions)(i);if(n)(0,a.privateSet)(this,g,n[g]),(0,a.privateSet)(this,v,n),P(this,t),(0,a.privateSet)(this,_,n[m]),(0,a.privateSet)(this,b,n[b]),(0,a.privateSet)(this,T,[]);else{var l=(0,s.default)(o);if(!l.isValidElement(t))throw new TypeError("ReactWrapper can only wrap valid elements");var c=l.createRenderer((0,r.default)({mode:"mount"},o));if((0,a.privateSet)(this,g,c),c.render(t,o.context),(0,a.privateSet)(this,v,this),P(this,this[g].getNode()),(0,a.privateSet)(this,b,o),(0,a.privateSet)(this,T,[]),(0,a.isCustomComponent)(o.wrappingComponent,l)){if("function"!=typeof this[g].getWrappingComponentRenderer)throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");(0,a.privateSet)(this,w,new A(this,this[g].getWrappingComponentRenderer())),this[T].push(this[w])}}(0,a.privateSet)(this,y,t),(0,a.privateSet)(this,x,null)}return n(e,[{key:"root",value:function(){return function(){return this[v]}}()},{key:"getNodeInternal",value:function(){return function(){if(1!==this.length)throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");return this[m][0]}}()},{key:"getNodesInternal",value:function(){return function(){return this[m]}}()},{key:"getElement",value:function(){return function(){var e=this;return this.single("getElement",function(){return(0,s.default)(e[b]).nodeToElement(e[d])})}}()},{key:"getElements",value:function(){return function(){var e=this;return this[m].map(function(t){return(0,s.default)(e[b]).nodeToElement(t)})}}()},{key:"getNode",value:function(){return function(){throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead")}}()},{key:"getNodes",value:function(){return function(){throw new Error("ReactWrapper::getNodes() is no longer supported.")}}()},{key:"getDOMNode",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("getDOMNode",function(t){return e.nodeToHostNode(t,!0)})}}()},{key:"ref",value:function(){return function(e){if(this[v]!==this)throw new Error("ReactWrapper::ref(refname) can only be called on the root");return this.instance().refs[e]}}()},{key:"instance",value:function(){return function(){var e=this;return this.single("instance",function(){return e[d].instance})}}()},{key:"getWrappingComponent",value:function(){return function(){if(this[v]!==this)throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");if(!this[b].wrappingComponent)throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[w]}}()},{key:"update",value:function(){return function(){var e=this,t=this[v];return this!==t?t.update():(P(this,this[g].getNode()),this[T].forEach(function(t){if(t!==e[x]){t[x]=e;try{t.update()}finally{t[x]=null}}}),this)}}()},{key:"unmount",value:function(){return function(){var e=this;if(this[v]!==this)throw new Error("ReactWrapper::unmount() can only be called on the root");return this.single("unmount",function(){e[g].unmount(),e.update()}),this}}()},{key:"mount",value:function(){return function(){var e=this;if(this[v]!==this)throw new Error("ReactWrapper::mount() can only be called on the root");return this[g].render(this[y],this[b].context,function(){return e.update()}),this}}()},{key:"setProps",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[v]!==this)throw new Error("ReactWrapper::setProps() can only be called on the root");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");var r=(0,s.default)(this[b]);return this[y]=(0,a.cloneElement)(r,this[y],e),this[g].render(this[y],null,function(){t.update(),n&&n()}),this}}()},{key:"setState",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(null===this.instance()||"class"!==this.getNodeInternal().nodeType)throw new Error("ReactWrapper::setState() can only be called on class components");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.instance().setState(e,function(){if(t.update(),n){var e=(0,s.default)(t[b]),r=t.instance();e.invokeSetStateCallback?e.invokeSetStateCallback(r,n):n.call(r)}}),this}}()},{key:"setContext",value:function(){return function(e){var t=this;if(this[v]!==this)throw new Error("ReactWrapper::setContext() can only be called on the root");if(!this[b].context)throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this[g].render(this[y],e,function(){return t.update()}),this}}()},{key:"contains",value:function(){return function(e){var t=(0,s.default)(this[b]);return E(this,Array.isArray(e)?function(n){return(0,a.containsChildrenSubArray)(a.nodeEqual,n,e.map(function(e){return t.elementToNode(e)}))}:function(n){return(0,a.nodeEqual)(t.elementToNode(e),n)}).length>0}}()},{key:"containsMatchingElement",value:function(){return function(e){var t=(0,s.default)(this[b]).elementToNode(e);return E(this,function(){return function(e){return(0,a.nodeMatches)(t,e,function(e,t){return e<=t})}}()).length>0}}()},{key:"containsAllMatchingElements",value:function(){return function(e){var t=this;if(!Array.isArray(e))throw new TypeError("nodes should be an Array");return e.every(function(e){return t.containsMatchingElement(e)})}}()},{key:"containsAnyMatchingElements",value:function(){return function(e){var t=this;return Array.isArray(e)&&e.some(function(e){return t.containsMatchingElement(e)})}}()},{key:"equals",value:function(){return function(e){var t=this;return this.single("equals",function(){return(0,a.nodeEqual)(t.getNodeInternal(),e)})}}()},{key:"matchesElement",value:function(){return function(e){var t=this;return this.single("matchesElement",function(){var n=(0,s.default)(t[b]).elementToNode(e);return(0,a.nodeMatches)(n,t.getNodeInternal(),function(e,t){return e<=t})})}}()},{key:"find",value:function(){return function(e){return this.wrap((0,u.reduceTreesBySelector)(e,this.getNodesInternal()))}}()},{key:"is",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return this.single("is",function(e){return t(e)})}}()},{key:"isEmptyRender",value:function(){return function(){var e=this.getNodeInternal();return(0,a.renderedDive)(e)}}()},{key:"filterWhere",value:function(){return function(e){var t=this;return S(this,function(n){return e(t.wrap(n))})}}()},{key:"filter",value:function(){return function(e){return S(this,(0,u.buildPredicate)(e))}}()},{key:"not",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return S(this,function(e){return!t(e)})}}()},{key:"text",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("text",function(t){return(0,c.getTextFromHostNodes)(t,e)})}}()},{key:"html",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("html",function(t){return(0,c.getHTMLFromHostNodes)(t,e)})}}()},{key:"render",value:function(){return function(){var e=this.html();return(0,a.loadCheerioRoot)(e)}}()},{key:"simulate",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.single("simulate",function(r){return t[g].simulateEvent(r,e,n),t[v].update(),t})}}()},{key:"simulateError",value:function(){return function(e){var t=this;if(this[v]===this)throw new Error("ReactWrapper::simulateError() may not be called on the root");return this.single("simulateError",function(n){if("host"===n.nodeType)throw new Error("ReactWrapper::simulateError() can only be called on custom components");var r=t[g];if("function"!=typeof r.simulateError)throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var i=k(t),o=[n].concat(O(t,n));return r.simulateError(o,i,e),t[v].update(),t})}}()},{key:"props",value:function(){return function(){return this.single("props",c.propsOfNode)}}()},{key:"state",value:function(){return function(e){var t=this,n=this[v]===this?this[g].getNode():this.getNodeInternal();if(null===this.instance()||"class"!==n.nodeType)throw new Error("ReactWrapper::state() can only be called on class components");var r=this.single("state",function(){return t.instance().state});if(typeof e<"u"){if(null==r)throw new TypeError('ReactWrapper::state("'+String(e)+'") requires that `state` not be `null` or `undefined`');return r[e]}return r}}()},{key:"context",value:function(){return function(e){var t=this;if(this[v]!==this)throw new Error("ReactWrapper::context() can only be called on the root");var n=this.single("context",function(){return t.instance()});if(null===n)throw new Error("ReactWrapper::context() can only be called on components with instances");var r=n.context;return typeof e<"u"?r[e]:r}}()},{key:"children",value:function(){return function(e){var t=this.flatMap(function(e){return(0,c.childrenOfNode)(e.getNodeInternal())});return e?t.filter(e):t}}()},{key:"childAt",value:function(){return function(e){var t=this;return this.single("childAt",function(){return t.children().at(e)})}}()},{key:"parents",value:function(){return function(e){var t=this;return this.single("parents",function(n){var r=t.wrap(O(t,n));return e?r.filter(e):r})}}()},{key:"parent",value:function(){return function(){return this.flatMap(function(e){return[e.parents().get(0)]})}}()},{key:"closest",value:function(){return function(e){if(this.is(e))return this;var t=this.parents().filter(e);return t.length>0?t.first():this.findWhere(function(){return!1})}}()},{key:"prop",value:function(){return function(e){return this.props()[e]}}()},{key:"invoke",value:function(){return function(e){var t=this;return this.single("invoke",function(){var n=t.prop(e);if("function"!=typeof n)throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");return function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var o="function"==typeof t[g].wrapInvoke?t[g].wrapInvoke(function(){return n.apply(void 0,r)}):n.apply(void 0,r);return t[v].update(),o}})}}()},{key:"renderProp",value:function(){return function(e){var n=this,r=(0,s.default)(this[b]);if("function"!=typeof r.wrap)throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(i){if("host"===i.nodeType)throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");if("string"!=typeof e)throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");var a=n.props();if(!(0,o.default)(a,e))throw new Error("ReactWrapper::renderProp(): no prop called \u201c"+String(e)+"\u201c found");var s=a[e];if("function"!=typeof s)throw new TypeError("ReactWrapper::renderProp(): expected prop \u201c"+String(e)+"\u201c to contain a function, but it holds \u201c"+(typeof s>"u"?"undefined":t(s))+"\u201c");return function(){var e=s.apply(void 0,arguments),t=r.wrap(e);return n.wrap(t,null,n[b])}})}}()},{key:"key",value:function(){return function(){return this.single("key",function(e){return void 0===e.key?null:e.key})}}()},{key:"type",value:function(){return function(){return this.single("type",function(e){return(0,a.typeOfNode)(e)})}}()},{key:"name",value:function(){return function(){var e=(0,s.default)(this[b]);return this.single("name",function(t){return e.displayNameOfNode?e.displayNameOfNode(t):(0,a.displayNameOfNode)(t)})}}()},{key:"hasClass",value:function(){return function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(t){return(0,c.hasClassName)(t,e)})}}()},{key:"forEach",value:function(){return function(e){var t=this;return this.getNodesInternal().forEach(function(n,r){return e.call(t,t.wrap(n),r)}),this}}()},{key:"map",value:function(){return function(e){var t=this;return this.getNodesInternal().map(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"reduce",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(n,r,i){return e.call(t,n,t.wrap(r),i)},n):this.getNodesInternal().reduce(function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)})}}()},{key:"reduceRight",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(n,r,i){return e.call(t,n,t.wrap(r),i)},n):this.getNodesInternal().reduceRight(function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)})}}()},{key:"slice",value:function(){return function(e,t){return this.wrap(this.getNodesInternal().slice(e,t))}}()},{key:"some",value:function(){return function(e){if(this[v]===this)throw new Error("ReactWrapper::some() can not be called on the root");var t=(0,u.buildPredicate)(e);return this.getNodesInternal().some(t)}}()},{key:"someWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().some(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"every",value:function(){return function(e){var t=(0,u.buildPredicate)(e);return this.getNodesInternal().every(t)}}()},{key:"everyWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().every(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"flatMap",value:function(){return function(e){var t=this,n=this.getNodesInternal().map(function(n,r){return e.call(t,t.wrap(n),r)}),r=(0,i.default)(n,1);return this.wrap(r.filter(Boolean))}}()},{key:"findWhere",value:function(){return function(e){var t=this;return E(this,function(n){var r=t.wrap(n);return r.length>0&&e(r)})}}()},{key:"get",value:function(){return function(e){return this.getElements()[e]}}()},{key:"at",value:function(){return function(e){var t=this.getNodesInternal();return e<t.length?this.wrap(t[e]):this.wrap([])}}()},{key:"first",value:function(){return function(){return this.at(0)}}()},{key:"last",value:function(){return function(){return this.at(this.length-1)}}()},{key:"isEmpty",value:function(){return function(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}}()},{key:"exists",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>0?this.find(e).exists():this.length>0}}()},{key:"single",value:function(){return function(e,t){var n="string"==typeof e?e:"unknown",r="function"==typeof t?t:e;if(1!==this.length)throw new Error("Method \u201c"+n+"\u201d is meant to be run on 1 node. "+String(this.length)+" found instead.");return r.call(this,this.getNodeInternal())}}()},{key:"wrap",value:function(){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[v];if(t instanceof e)return t;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat([t,n],i)))}}()},{key:"debug",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.debugNodes)(this.getNodesInternal(),e)}}()},{key:"tap",value:function(){return function(e){return e(this),this}}()},{key:"detach",value:function(){return function(){if(this[v]!==this)throw new Error("ReactWrapper::detach() can only be called on the root");if(!this[b].attachTo)throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");this[g].unmount()}}()},{key:"hostNodes",value:function(){return function(){return this.filterWhere(function(e){return"string"==typeof e.type()})}}()}]),e}(),A=function(e){function t(e,n){f(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.getNode(),e));return(0,a.privateSet)(r,v,r),(0,a.privateSet)(r,g,n),r[T].push(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"getWrappingComponent",value:function(){return function(){throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root")}}()}]),t}(C);function M(e,t){Object.defineProperty(C.prototype,e,{get:function(){return function(){throw new Error("\n        Attempted to access ReactWrapper::"+String(e)+", which was previously a private property on\n        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.\n        "+String(t)+"\n      ")}}(),enumerable:!1,configurable:!1})}a.ITERATOR_SYMBOL&&Object.defineProperty(C.prototype,a.ITERATOR_SYMBOL,{configurable:!0,value:function(){return function(){var e,t=this[m][a.ITERATOR_SYMBOL](),n=(0,s.default)(this[b]);return p(e={},a.ITERATOR_SYMBOL,function(){return this}),p(e,"next",function(){return function(){var e=t.next();return e.done?{done:!0}:{done:!1,value:n.nodeToElement(e.value)}}}()),e}}()}),M("node","Consider using the getElement() method instead."),M("nodes","Consider using the getElements() method instead."),M("renderer",""),M("options",""),M("complexSelector",""),e.default=C}(Nx);var yG={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)}}(),n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=f(Xk),o=f(dI),a=f(yI),s=f(II),l=vI,c=f(Rz),u=eH,h=Az,p=YH;function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,l.sym)("__node__"),v=(0,l.sym)("__nodes__"),b=(0,l.sym)("__renderer__"),_=(0,l.sym)("__unrendered__"),w=(0,l.sym)("__root__"),T=(0,l.sym)("__options__"),x=(0,l.sym)("__setState__"),E=(0,l.sym)("__rootNodes__"),S=(0,l.sym)("__childContext__"),k=(0,l.sym)("__wrappingComponent__"),O=(0,l.sym)("__primaryWrapper__"),P=(0,l.sym)("__rootFinder__"),C=(0,l.sym)("__providerValues__");function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.treeFilter;return e.flatMap(function(e){return n(e.getNodeInternal(),t)})}function M(e,t){return e.wrap(e.getNodesInternal().filter(t).filter(Boolean))}function I(e){var t=e.options,n=t.lifecycles,r=void 0===n?{}:n,o=t.enableComponentDidUpdateOnSetState,a=t.supportPrevContextArgumentOfComponentDidUpdate,s=typeof o<"u",l=typeof a<"u",c=s||l?(0,i.default)({},s&&{onSetState:!!o},l&&{prevContext:!!a}):null,u=r.getDerivedStateFromProps,h=!!u&&{hasShouldComponentUpdateBug:!!u.hasShouldComponentUpdateBug};return(0,i.default)({},r,{setState:(0,i.default)({},r.setState),getChildContext:(0,i.default)({calledByRenderer:!0},r.getChildContext)},c&&{componentDidUpdate:c},{getDerivedStateFromProps:h})}function R(e){return"host"===e.nodeType?e:e.rendered}function D(e){if(1!==e[w].length)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return e[w]!==e?e[E][0]:e[w][y]}function N(e,t){return(0,h.parentsOfNode)(t,D(e))}function j(e,t){Array.isArray(t)?((0,l.privateSet)(e,y,t[0]),(0,l.privateSet)(e,v,t)):((0,l.privateSet)(e,y,t),(0,l.privateSet)(e,v,[t])),(0,l.privateSet)(e,"length",e[v].length)}function L(e,t,n,r){return!(0,s.default)(e,t)||!(0,s.default)(n,r)}function B(e){return e&&e.isPureReactComponent}function F(e,t,n,i,o){var a=t[b];if("parent"===e.options.legacyContextMode)if(o)(0,l.privateSet)(t,S,o.getLastReturnValue()),o.restore();else if("function"==typeof n.getChildContext){var s=function(e,t,n){var i=e.instance,o=e.type,a=(0,l.displayNameOfNode)(e);if("object"!==r(o.childContextTypes))return console.warn(String(a)+".getChildContext(): childContextTypes must be defined in order to use getChildContext()."),{};var s=i.getChildContext();return Object.keys(s).forEach(function(e){if(!(e in o.childContextTypes))throw new Error(String(a)+'.getChildContext(): key "'+String(e)+'" is not defined in childContextTypes.')}),"function"==typeof n.checkPropTypes&&n.checkPropTypes(o.childContextTypes,s,"child context",t),s}(i,[t[y]].concat(N(t,t[y])),a);(0,l.privateSet)(t,S,s)}else(0,l.privateSet)(t,S,null)}function z(e,t){if("function"==typeof e.type.getDerivedStateFromProps)var n=e.instance,r=(0,l.spyMethod)(n,"shouldComponentUpdate",function(e){return function(){return function(){n.state=t;for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=e.apply(n,o),l=o[1];return n.state=l,i(),s}}()}),i=r.restore}function H(e,t,n){var r=e[y],i=r&&n.nodeToElement(r);if(e.type()===t)return e.dive();if(i&&(0,l.isCustomComponentElement)(i,n))return H(e.dive(),t,n);for(var o=e.children(),a=0;a<o.length;a+=1){var s=H(o.at(a),t,n);if(typeof s<"u")return s}}function U(e,t){var n=H(e,e[P],t);if(!n)throw new Error("`wrappingComponent` must render its children!");return{legacyContext:n[T].context,providerValues:n[C]}}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,i.default)({},e[T],t,{context:t.context||(0,i.default)({},e[T].context,e[w][S])});return(0,l.privateSet)(n,C,e[w][C]),n}var G=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m(this,e),function(e){var t=e.lifecycleExperimental,n=e.disableLifecycleMethods,r=e.enableComponentDidUpdateOnSetState,i=e.supportPrevContextArgumentOfComponentDidUpdate,o=e.lifecycles;if(typeof t<"u"&&"boolean"!=typeof t)throw new Error("lifecycleExperimental must be either true or false if provided");if(typeof n<"u"&&"boolean"!=typeof n)throw new Error("disableLifecycleMethods must be either true or false if provided");if(null!=t&&null!=n&&t===n)throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");if(typeof r<"u"&&o.componentDidUpdate&&o.componentDidUpdate.onSetState!==r)throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");if(typeof i<"u"&&o.componentDidUpdate&&o.componentDidUpdate.prevContext!==i)throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility")}(o);var a=function(e,t,n,r){var o=(0,l.makeOptions)(n),a=(0,c.default)(n);if((0,l.privateSet)(o,C,n[C]),t||!(0,l.isCustomComponent)(o.wrappingComponent,a))return o;if("function"!=typeof a.wrapWithWrappingComponent)throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");var s=a.wrapWithWrappingComponent(e,o),u=s.node,h=s.RootFinder,p=new W(u,r,h),f=U(p,a),d=f.legacyContext,m=f.providerValues;return(0,l.privateSet)(r,k,p),(0,i.default)({},o,g({context:(0,i.default)({},o.context,d)},C,m))}(t,n,o,this),s=(0,c.default)(a),u=I(s);if(n)(0,l.privateSet)(this,w,n),(0,l.privateSet)(this,_,null),(0,l.privateSet)(this,b,n[b]),j(this,t),(0,l.privateSet)(this,T,n[T]),(0,l.privateSet)(this,E,n[v]),(0,l.privateSet)(this,C,null);else{if(!s.isValidElement(t))throw new TypeError("ShallowWrapper can only wrap valid elements");var h=u.getChildContext.calledByRenderer?function(e,t){return(0,l.isCustomComponentElement)(e,t)&&e.type.prototype&&"function"==typeof e.type.prototype.getChildContext?(0,l.spyMethod)(e.type.prototype,"getChildContext"):null}(t,s):null;(0,l.privateSet)(this,w,this),(0,l.privateSet)(this,_,t);var p=s.createRenderer((0,i.default)({mode:"shallow"},a));(0,l.privateSet)(this,b,p);var f=new Map(a[C]||[]);this[b].render(t,a.context,{providerValues:f});var y=this[b].getNode();j(this,R(y)),(0,l.privateSet)(this,T,a),(0,l.privateSet)(this,C,f);var S=y.instance;S&&!a.disableLifecycleMethods&&(u.componentDidUpdate.onSetState&&!S[x]&&((0,l.privateSet)(S,x,S.setState),S.setState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return r.setState.apply(r,d(null==t?[e]:[e,t]))}),"function"==typeof S.componentDidMount&&this[b].batchedUpdates(function(){S.componentDidMount()}),F(s,this,S,y,h))}}return n(e,[{key:"root",value:function(){return function(){return this[w]}}()},{key:"getNodeInternal",value:function(){return function(){if(1!==this.length)throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");return this[w]===this&&this.update(),this[y]}}()},{key:"getNodesInternal",value:function(){return function(){return this[w]===this&&1===this.length&&this.update(),this[v]}}()},{key:"getElement",value:function(){return function(){var e=this;return this.single("getElement",function(t){return(0,c.default)(e[T]).nodeToElement(t)})}}()},{key:"getElements",value:function(){return function(){var e=this;return this.getNodesInternal().map(function(t){return(0,c.default)(e[T]).nodeToElement(t)})}}()},{key:"getNode",value:function(){return function(){throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead")}}()},{key:"getNodes",value:function(){return function(){throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead")}}()},{key:"instance",value:function(){return function(){if(this[w]!==this)throw new Error("ShallowWrapper::instance() can only be called on the root");return this[b].getNode().instance}}()},{key:"getWrappingComponent",value:function(){return function(){if(this[w]!==this)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");if(!this[T].wrappingComponent)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[k]}}()},{key:"update",value:function(){return function(){if(this[w]!==this)throw new Error("ShallowWrapper::update() can only be called on the root");if(1!==this.length)throw new Error("ShallowWrapper::update() can only be called when wrapping one node");return j(this,R(this[b].getNode())),this}}()},{key:"unmount",value:function(){return function(){return this[b].unmount(),this[w][k]&&this[w][k].unmount(),this}}()},{key:"rerender",value:function(){return function(e,t){var n=this,r=(0,c.default)(this[T]);return this.single("rerender",function(){(0,l.withSetStateAllowed)(function(){var o=n[b].getNode(),a=o.instance||{},c=o.type||{},u=a.state,h=a.props||n[_].props,p=a.context||n[T].context,f=t||p;t&&(n[T]=(0,i.default)({},n[T],{context:f})),n[b].batchedUpdates(function(){var t=I(r),d=!0,m=void 0,g=void 0;if(!n[T].disableLifecycleMethods&&a){if("function"==typeof a.shouldComponentUpdate){var y=t.getDerivedStateFromProps;y&&y.hasShouldComponentUpdateBug&&z(o,u),m=(0,l.spyMethod)(a,"shouldComponentUpdate")}t.getChildContext.calledByRenderer&&"function"==typeof a.getChildContext&&(g=(0,l.spyMethod)(a,"getChildContext"))}if(!m&&B(a)&&(d=L(h,e,u,a.state)),e&&(n[_]=(0,l.cloneElement)(r,n[_],e)),n[b].render(n[_],f,{providerValues:n[C]}),m&&(d=m.getLastReturnValue(),m.restore()),d&&!n[T].disableLifecycleMethods&&a)if(F(r,n,a,o,g),t.getSnapshotBeforeUpdate){var v=void 0;"function"==typeof a.getSnapshotBeforeUpdate&&(v=a.getSnapshotBeforeUpdate(h,u)),t.componentDidUpdate&&"function"==typeof a.componentDidUpdate&&(!u||(0,s.default)(u,n.instance().state)||"function"==typeof c.getDerivedStateFromProps)&&a.componentDidUpdate(h,u,v)}else t.componentDidUpdate&&"function"==typeof a.componentDidUpdate&&(t.componentDidUpdate.prevContext?a.componentDidUpdate(h,u,p):(!u||(0,s.default)(n.instance().state,u))&&a.componentDidUpdate(h,u));else(0,s.default)(e,a.props)||(a.props=(Object.freeze||Object)((0,i.default)({},a.props,e)));n.update()})})}),this}}()},{key:"setProps",value:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[w]!==this)throw new Error("ShallowWrapper::setProps() can only be called on the root");if(arguments.length>1&&"function"!=typeof t)throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");return this.rerender(e),t&&t(),this}}()},{key:"setState",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(this[w]!==this)throw new Error("ShallowWrapper::setState() can only be called on the root");if(null===this.instance()||"class"!==this[b].getNode().nodeType)throw new Error("ShallowWrapper::setState() can only be called on class components");if(arguments.length>1&&"function"!=typeof n)throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.single("setState",function(){(0,l.withSetStateAllowed)(function(){var r=(0,c.default)(t[T]),o=I(r),a=t[b].getNode(),s=a.instance,u=s.props,h=s.state,p=s.context,f="function"==typeof e?e.call(s,h,u):e,d=!o.setState.skipsComponentDidUpdateOnNullish||null!=f,m=void 0,g=void 0,y=!0;if(!t[T].disableLifecycleMethods&&s){if(o.componentDidUpdate&&o.componentDidUpdate.onSetState&&"function"==typeof s.shouldComponentUpdate){var v=o.getDerivedStateFromProps;v&&v.hasShouldComponentUpdateBug&&z(a,e),m=(0,l.spyMethod)(s,"shouldComponentUpdate")}o.getChildContext.calledByRenderer&&"function"==typeof s.getChildContext&&(g=(0,l.spyMethod)(s,"getChildContext"))}if(!m&&B(s)&&(y=L(u,s.props,h,(0,i.default)({},h,f))),s[x]?s[x](f):s.setState(f),m&&(y=m.getLastReturnValue(),m.restore()),d&&y&&!t[T].disableLifecycleMethods&&(F(r,t,s,a,g),o.componentDidUpdate&&o.componentDidUpdate.onSetState))if(o.getSnapshotBeforeUpdate&&"function"==typeof s.getSnapshotBeforeUpdate){var _=s.getSnapshotBeforeUpdate(u,h);"function"==typeof s.componentDidUpdate&&s.componentDidUpdate(u,h,_)}else"function"==typeof s.componentDidUpdate&&(o.componentDidUpdate.prevContext?s.componentDidUpdate(u,h,p):s.componentDidUpdate(u,h));t.update(),n&&(r.invokeSetStateCallback?r.invokeSetStateCallback(s,n):n.call(s))})}),this}}()},{key:"setContext",value:function(){return function(e){if(this[w]!==this)throw new Error("ShallowWrapper::setContext() can only be called on the root");if(!this[T].context)throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this.rerender(null,e)}}()},{key:"contains",value:function(){return function(e){var t=(0,c.default)(this[T]);if(!(0,l.isReactElementAlike)(e,t))throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");return A(this,Array.isArray(e)?function(n){return(0,l.containsChildrenSubArray)(l.nodeEqual,n,e.map(function(e){return t.elementToNode(e)}))}:function(n){return(0,l.nodeEqual)(t.elementToNode(e),n)}).length>0}}()},{key:"containsMatchingElement",value:function(){return function(e){var t=(0,c.default)(this[T]).elementToNode(e);return A(this,function(){return function(e){return(0,l.nodeMatches)(t,e,function(e,t){return e<=t})}}()).length>0}}()},{key:"containsAllMatchingElements",value:function(){return function(e){var t=this;if(!Array.isArray(e))throw new TypeError("nodes should be an Array");return e.every(function(e){return t.containsMatchingElement(e)})}}()},{key:"containsAnyMatchingElements",value:function(){return function(e){var t=this;return Array.isArray(e)&&e.some(function(e){return t.containsMatchingElement(e)})}}()},{key:"equals",value:function(){return function(e){var t=this;return this.single("equals",function(){return(0,l.nodeEqual)(t.getNodeInternal(),e)})}}()},{key:"matchesElement",value:function(){return function(e){var t=this;return this.single("matchesElement",function(){var n=(0,c.default)(t[T]).elementToNode(e);return(0,l.nodeMatches)(n,t.getNodeInternal(),function(e,t){return e<=t})})}}()},{key:"find",value:function(){return function(e){return this.wrap((0,p.reduceTreesBySelector)(e,this.getNodesInternal()))}}()},{key:"is",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return this.single("is",function(e){return t(e)})}}()},{key:"isEmptyRender",value:function(){return function(){return this.getNodesInternal().every(function(e){return(0,l.isEmptyValue)(e)})}}()},{key:"filterWhere",value:function(){return function(e){var t=this;return M(this,function(n){return e(t.wrap(n))})}}()},{key:"filter",value:function(){return function(e){return M(this,(0,p.buildPredicate)(e))}}()},{key:"not",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return M(this,function(e){return!t(e)})}}()},{key:"text",value:function(){return function(){return this.single("text",h.getTextFromNode)}}()},{key:"html",value:function(){return function(){var e=this;return this.single("html",function(t){if(null===e.type())return null;var n=(0,c.default)(e[T]);return n.createRenderer((0,i.default)({},e[T],{mode:"string"})).render(n.nodeToElement(t))})}}()},{key:"render",value:function(){return function(){var e=this.html();return(0,l.loadCheerioRoot)(e)}}()},{key:"simulate",value:function(){return function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.single("simulate",function(n){var i;return(i=t[b]).simulateEvent.apply(i,[n,e].concat(r)),t[w].update(),t})}}()},{key:"simulateError",value:function(){return function(e){var t=this;return this.single("simulateError",function(n){if("host"===n.nodeType)throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");var r=t[b];if("function"!=typeof r.simulateError)throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var i=D(t),o=[n].concat(N(t,n));return r.simulateError(o,i,e),t})}}()},{key:"props",value:function(){return function(){return this.single("props",h.propsOfNode)}}()},{key:"state",value:function(){return function(e){var t=this;if(this[w]!==this)throw new Error("ShallowWrapper::state() can only be called on the root");if(null===this.instance()||"class"!==this[b].getNode().nodeType)throw new Error("ShallowWrapper::state() can only be called on class components");var n=this.single("state",function(){return t.instance().state});if(typeof e<"u"){if(null==n)throw new TypeError('ShallowWrapper::state("'+String(e)+'") requires that `state` not be `null` or `undefined`');return n[e]}return n}}()},{key:"context",value:function(){return function(e){var t=this;if(this[w]!==this)throw new Error("ShallowWrapper::context() can only be called on the root");if(!this[T].context)throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");if(null===this.instance())throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");var n=this.single("context",function(){return t.instance().context});return e?n[e]:n}}()},{key:"children",value:function(){return function(e){var t=this.flatMap(function(e){return(0,h.childrenOfNode)(e.getNodeInternal())});return e?t.filter(e):t}}()},{key:"childAt",value:function(){return function(e){var t=this;return this.single("childAt",function(){return t.children().at(e)})}}()},{key:"parents",value:function(){return function(e){var t=this;return this.single("parents",function(n){var r=t.wrap(N(t,n));return e?r.filter(e):r})}}()},{key:"parent",value:function(){return function(){return this.flatMap(function(e){return[e.parents().get(0)]})}}()},{key:"closest",value:function(){return function(e){if(this.is(e))return this;var t=this.parents().filter(e);return t.length>0?t.first():this.findWhere(function(){return!1})}}()},{key:"shallow",value:function(){return function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.single("shallow",function(n){var r=V(e,t);return e.wrap((0,c.default)(e[T]).nodeToElement(n),null,r)})}}()},{key:"prop",value:function(){return function(e){return this.props()[e]}}()},{key:"invoke",value:function(){return function(e){var t=this;return this.single("invoke",function(){var n=t.prop(e);if("function"!=typeof n)throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");return function(){var e=n.apply(void 0,arguments);return t[w].update(),e}})}}()},{key:"renderProp",value:function(){return function(e){var t=this,n=(0,c.default)(this[T]);if("function"!=typeof n.wrap)throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(i){if("host"===i.nodeType)throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");if("string"!=typeof e)throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");var o=t.props();if(!(0,a.default)(o,e))throw new Error("ShallowWrapper::renderProp(): no prop called \u201c"+String(e)+"\u201c found");var s=o[e];if("function"!=typeof s)throw new TypeError("ShallowWrapper::renderProp(): expected prop \u201c"+String(e)+"\u201c to contain a function, but it holds \u201c"+(typeof s>"u"?"undefined":r(s))+"\u201c");return function(){var e=s.apply(void 0,arguments),r=n.wrap(e);return t.wrap(r,null,t[T])}})}}()},{key:"key",value:function(){return function(){return this.single("key",function(e){return void 0===e.key?null:e.key})}}()},{key:"type",value:function(){return function(){return this.single("type",function(e){return(0,l.typeOfNode)(e)})}}()},{key:"name",value:function(){return function(){var e=(0,c.default)(this[T]);return this.single("name",function(t){return e.displayNameOfNode?e.displayNameOfNode(t):(0,l.displayNameOfNode)(t)})}}()},{key:"hasClass",value:function(){return function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(t){return(0,h.hasClassName)(t,e)})}}()},{key:"forEach",value:function(){return function(e){var t=this;return this.getNodesInternal().forEach(function(n,r){return e.call(t,t.wrap(n),r)}),this}}()},{key:"map",value:function(){return function(e){var t=this;return this.getNodesInternal().map(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"reduce",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(n,r,i){return e.call(t,n,t.wrap(r),i)},n):this.getNodesInternal().reduce(function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)})}}()},{key:"reduceRight",value:function(){return function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(n,r,i){return e.call(t,n,t.wrap(r),i)},n):this.getNodesInternal().reduceRight(function(n,r,i){return e.call(t,1===i?t.wrap(n):n,t.wrap(r),i)})}}()},{key:"slice",value:function(){return function(e,t){return this.wrap(this.getNodesInternal().slice(e,t))}}()},{key:"some",value:function(){return function(e){if(this[w]===this)throw new Error("ShallowWrapper::some() can not be called on the root");var t=(0,p.buildPredicate)(e);return this.getNodesInternal().some(t)}}()},{key:"someWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().some(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"every",value:function(){return function(e){var t=(0,p.buildPredicate)(e);return this.getNodesInternal().every(t)}}()},{key:"everyWhere",value:function(){return function(e){var t=this;return this.getNodesInternal().every(function(n,r){return e.call(t,t.wrap(n),r)})}}()},{key:"flatMap",value:function(){return function(e){var t=this,n=this.getNodesInternal().map(function(n,r){return e.call(t,t.wrap(n),r)}),r=(0,o.default)(n,1);return this.wrap(r.filter(Boolean))}}()},{key:"findWhere",value:function(){return function(e){var t=this;return A(this,function(n){var r=t.wrap(n);return r.length>0&&e(r)})}}()},{key:"get",value:function(){return function(e){return this.getElements()[e]}}()},{key:"at",value:function(){return function(e){var t=this.getNodesInternal();return e<t.length?this.wrap(t[e]):this.wrap([])}}()},{key:"first",value:function(){return function(){return this.at(0)}}()},{key:"last",value:function(){return function(){return this.at(this.length-1)}}()},{key:"isEmpty",value:function(){return function(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}}()},{key:"exists",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return arguments.length>0?this.find(e).exists():this.length>0}}()},{key:"single",value:function(){return function(e,t){var n="string"==typeof e?e:"unknown",r="function"==typeof t?t:e;if(1!==this.length)throw new Error("Method \u201c"+n+"\u201d is meant to be run on 1 node. "+String(this.length)+" found instead.");return r.call(this,this.getNodeInternal())}}()},{key:"wrap",value:function(){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[w];if(t instanceof e)return t;for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat([t,n],i)))}}()},{key:"debug",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.debugNodes)(this.getNodesInternal(),e)}}()},{key:"tap",value:function(){return function(e){return e(this),this}}()},{key:"dive",value:function(){return function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,c.default)(this[T]),r="dive";return this.single(r,function(r){if(r&&"host"===r.nodeType)throw new TypeError("ShallowWrapper::dive() can not be called on Host Components");var i=(0,c.default)(e[T]).nodeToElement(r);if(!(0,l.isCustomComponentElement)(i,n))throw new TypeError("ShallowWrapper::dive() can only be called on components");var o=V(e,t);return e.wrap(i,null,o)})}}()},{key:"hostNodes",value:function(){return function(){return this.filterWhere(function(e){return"string"==typeof e.type()})}}()}]),e}();function X(e){var t=(0,c.default)(e[T]),n=e[O],r=n[b].getNode(),o=U(e,t),a=o.legacyContext,s=o.providerValues,l=n[C];if(n.setContext((0,i.default)({},e[O][T].context,a)),n[C]=new Map([].concat(d(l),d(s))),"function"==typeof t.isContextConsumer&&t.isContextConsumer(r.type)){var u=r.type,h=t.getProviderFromConsumer(u);s.get(h)!==l.get(h)&&n.rerender()}}var W=function(e){function r(e,t,n){m(this,r);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return(0,l.privateSet)(i,O,t),(0,l.privateSet)(i,P,n),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),n(r,[{key:"rerender",value:function(){return function(){for(var e,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=(e=t(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"rerender",this)).call.apply(e,[this].concat(i));return X(this),a}}()},{key:"setState",value:function(){return function(){for(var e,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=(e=t(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setState",this)).call.apply(e,[this].concat(i));return X(this),a}}()},{key:"getWrappingComponent",value:function(){return function(){throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root")}}()}]),r}(G);function Y(e,t){Object.defineProperty(G.prototype,e,{get:function(){return function(){throw new Error("\n        Attempted to access ShallowWrapper::"+String(e)+", which was previously a private property on\n        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.\n        "+String(t)+"\n      ")}}(),enumerable:!1,configurable:!1})}l.ITERATOR_SYMBOL&&Object.defineProperty(G.prototype,l.ITERATOR_SYMBOL,{configurable:!0,value:function(){return function(){var e,t=this.getNodesInternal()[l.ITERATOR_SYMBOL](),n=(0,c.default)(this[T]);return g(e={},l.ITERATOR_SYMBOL,function(){return this}),g(e,"next",function(){return function(){var e=t.next();return e.done?{done:!0}:{done:!1,value:n.nodeToElement(e.value)}}}()),e}}()}),Y("node","Consider using the getElement() method instead."),Y("nodes","Consider using the getElements() method instead."),Y("renderer",""),Y("options",""),Y("complexSelector",""),e.default=G}(yG);var vG={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return new n.default(e,null,t)};var t,n=(t=Nx)&&t.__esModule?t:{default:t}}(vG);var bG={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return new n.default(e,null,t)};var t,n=(t=yG)&&t.__esModule?t:{default:t}}(bG);var _G={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,n.default)(i).createRenderer((0,t.default)({mode:"string"},i)).render(e,i.context);return(0,r.loadCheerioRoot)(o)};var t=i(Xk),n=i(Rz),r=vI;function i(e){return e&&e.__esModule?e:{default:e}}}(_G);var wG=PG(Nx),TG=PG(yG),xG=PG(Ez),EG=PG(vG),SG=PG(bG),kG=PG(_G),OG=bz;function PG(e){return e&&e.__esModule?e:{default:e}}var CG={render:kG.default,shallow:SG.default,mount:EG.default,ShallowWrapper:TG.default,ReactWrapper:wG.default,configure:OG.merge,EnzymeAdapter:xG.default};const AG=(e,t)=>{(e=>{for(const t of e.iterateOverTracks()){const n=Ix(e,t.viewId);if(n?.activeTransitions)return!0}return!1})(e)?setTimeout(()=>{AG(e,t)},100):t()},MG=e=>{kW>0?setTimeout(()=>MG(e),100):e()},IG=(e,t)=>{(e=>{var t;for(const n of e.iterateOverTracks()){let r=Mx(e,n.viewId,n.trackId);if(n.track.server||n.track.tilesetUid||n.track.data&&"divided"===n.track.data.type||n.track.data&&"local-tiles"===n.track.data.type){if(!(n.track.data&&"divided"===n.track.data.type||n.track.server&&n.track.tilesetUid||n.track.data&&"local-tiles"===n.track.data.type))throw Error('"server" and "tilesetUid" belong together');if(!r||(r.originalTrack&&(r=r.originalTrack),!r.tilesetInfo&&!r.chromInfo)||null!=(t=r.fetching)&&t.size)return!0}}return!1})(e)?setTimeout(()=>{IG(e,t)},100):t()},RG=function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{style:a="width:800px; background-color: lightgreen;",bounded:s=!1,extendedDelay:l=!1}=o;t&&(t.unmount(),t.detach()),e&&globalThis.document.body.removeChild(e);const c=globalThis.document.createElement("div");globalThis.document.body.appendChild(c),c.setAttribute("style",a),c.setAttribute("id","simple-hg-component");const u=CG.mount(i.createElement(Kbe,{options:{bounded:s},viewConfig:n}),{attachTo:c});return u.update(),MG(()=>{if(l){const e=()=>setTimeout(()=>{r()},1e3);IG(u.instance(),e)}else IG(u.instance(),r)}),[c,u]};var DG={value:()=>{}};function NG(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new jG(r)}function jG(e){this._=e}function LG(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function BG(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=DG,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function FG(e){e.stopImmediatePropagation()}function zG(e){e.preventDefault(),e.stopImmediatePropagation()}function HG(e){var t=e.document.documentElement,n=pm(e).on("dragstart.drag",zG,!0);"onselectstart"in t?n.on("selectstart.drag",zG,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function UG(e,t){var n=e.document.documentElement,r=pm(e).on("dragstart.drag",null);t&&(r.on("click.drag",zG,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}jG.prototype=NG.prototype={constructor:jG,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=BG(r[n],e.name,t);else if(null==t)for(n in r)r[n]=BG(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=LG(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new jG(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const VG=e=>()=>e;function GG(e,t){let{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:c,dy:u,dispatch:h}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function XG(e){return!e.ctrlKey&&!e.button}function WG(){return this.parentNode}function YG(e,t){return t??{x:e.x,y:e.y}}function qG(){return navigator.maxTouchPoints||"ontouchstart"in this}function $G(){var e,t,n,r,i=XG,o=WG,a=YG,s=qG,l={},c=NG("start","drag","end"),u=0,h=0;function p(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&i.call(this,a,s)){var l=b(this,o.call(this,a,s),a,s,"mouse");l&&(pm(a.view).on("mousemove.drag",d,!0).on("mouseup.drag",m,!0),HG(a.view),FG(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function d(r){if(zG(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>h}l.mouse("drag",r)}function m(e){pm(e.view).on("mousemove.drag mouseup.drag",null),UG(e.view,n),zG(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,a=e.changedTouches,s=o.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(FG(e),r("start",e,a[n]))}}function y(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(zG(e),n("drag",e,r[t]))}function v(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=l[i[t].identifier])&&(FG(e),n("end",e,i[t]))}function b(e,t,n,r,i,o){var s,h,f,d=c.copy(),m=ym(o||n,t);if(null!=(f=a.call(e,new GG("beforestart",{sourceEvent:n,target:p,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:d}),r)))return s=f.x-m[0]||0,h=f.y-m[1]||0,function n(o,a,c){var g,y=m;switch(o){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=ym(c||a,t),g=u}d.call(o,e,new GG(o,{sourceEvent:a,subject:f,target:p,identifier:i,active:g,x:m[0]+s,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:d}),r)}}return p.filter=function(e){return arguments.length?(i="function"==typeof e?e:VG(!!e),p):i},p.container=function(e){return arguments.length?(o="function"==typeof e?e:VG(e),p):o},p.subject=function(e){return arguments.length?(a="function"==typeof e?e:VG(e),p):a},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:VG(!!e),p):s},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,p):Math.sqrt(h)},p}GG.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const KG=Object.freeze(Object.defineProperty({__proto__:null,drag:$G,dragDisable:HG,dragEnable:UG},Symbol.toStringTag,{value:"Module"}));var ZG,QG,JG=0,eX=0,tX=0,nX=0,rX=0,iX=0,oX="object"==typeof performance&&performance.now?performance:Date,aX="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sX(){return rX||(aX(lX),rX=oX.now()+iX)}function lX(){rX=0}function cX(){this._call=this._time=this._next=null}function uX(e,t,n){var r=new cX;return r.restart(e,t,n),r}function hX(){rX=(nX=oX.now())+iX,JG=eX=0;try{!function(){sX(),++JG;for(var e,t=ZG;t;)(e=rX-t._time)>=0&&t._call.call(void 0,e),t=t._next;--JG}()}finally{JG=0,function(){for(var e,t,n=ZG,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ZG=t);QG=e,fX(r)}(),rX=0}}function pX(){var e=oX.now(),t=e-nX;t>1e3&&(iX-=t,nX=e)}function fX(e){JG||(eX&&(eX=clearTimeout(eX)),e-rX>24?(e<1/0&&(eX=setTimeout(hX,e-oX.now()-iX)),tX&&(tX=clearInterval(tX))):(tX||(nX=oX.now(),tX=setInterval(pX,1e3)),JG=1,aX(hX)))}function dX(e,t,n){var r=new cX;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}cX.prototype=uX.prototype={constructor:cX,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?sX():+n)+(null==t?0:+t),!this._next&&QG!==this&&(QG?QG._next=this:ZG=this,QG=this),this._call=e,this._time=n,fX()},stop:function(){this._call&&(this._call=null,this._time=1/0,fX())}};var mX=NG("start","end","cancel","interrupt"),gX=[];function yX(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,p;if(1!==n.state)return l();for(c in i)if((p=i[c]).name===n.name){if(3===p.state)return dX(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(dX(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=uX(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:mX,tween:gX,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function vX(e,t){var n=_X(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function bX(e,t){var n=_X(e,t);if(n.state>3)throw new Error("too late; already running");return n}function _X(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wX(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function TX(e,t){var n,r;return function(){var i=bX(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function xX(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=bX(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function EX(e,t,n){var r=e._id;return e.each(function(){var e=bX(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return _X(e,r).value[t]}}function SX(e,t){var n;return("number"==typeof t?bu:t instanceof Tc?mu:(n=Tc(t))?(t=n,mu):xu)(e,t)}function kX(e){return function(){this.removeAttribute(e)}}function OX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PX(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function CX(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function AX(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function MX(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function IX(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function RX(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function DX(e,t){return function(){vX(this,e).delay=+t.apply(this,arguments)}}function NX(e,t){return t=+t,function(){vX(this,e).delay=t}}function jX(e,t){return function(){bX(this,e).duration=+t.apply(this,arguments)}}function LX(e,t){return t=+t,function(){bX(this,e).duration=t}}var BX=hm.prototype.constructor;function FX(e){return function(){this.style.removeProperty(e)}}var zX=0;function HX(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function UX(e){return hm().transition(e)}function VX(){return++zX}var GX=hm.prototype;HX.prototype=UX.prototype={constructor:HX,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ld(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,yX(h[p],t,n,p,h,_X(s,n)));return new HX(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=hd(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),d=_X(l,n),m=0,g=f.length;m<g;++m)(p=f[m])&&yX(p,t,n,m,f,d);o.push(f),a.push(l)}return new HX(o,a,t,n)},selectChild:GX.selectChild,selectChildren:GX.selectChildren,filter:function(e){"function"!=typeof e&&(e=pd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new HX(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new HX(a,this._parents,this._name,this._id)},selection:function(){return new BX(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=VX(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=_X(a,t);yX(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new HX(r,this._parents,e,n)},call:GX.call,nodes:GX.nodes,node:GX.node,size:GX.size,empty:GX.empty,each:GX.each,on:function(e,t){var n=this._id;return arguments.length<2?_X(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?vX:bX;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=rd(e),r="transform"===n?Iu:SX;return this.attrTween(e,"function"==typeof t?(n.local?MX:AX)(n,r,EX(this,"attr."+e,t)):null==t?(n.local?OX:kX)(n):(n.local?CX:PX)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=rd(e);return this.tween(n,(r.local?IX:RX)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Mu:SX;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Dd(this,e),a=(this.style.removeProperty(e),Dd(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,FX(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Dd(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Dd(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,EX(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=bX(this,e),c=l.on,u=null==l.value[a]?o||(o=FX(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Dd(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(EX(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=_X(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?TX:xX)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?DX:NX)(t,e)):_X(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?jX:LX)(t,e)):_X(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){bX(this,e).ease=t}}(t,e)):_X(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;bX(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=bX(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&o()})},[Symbol.iterator]:GX[Symbol.iterator]};var XX={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function WX(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}hm.prototype.interrupt=function(e){return this.each(function(){wX(this,e)})},hm.prototype.transition=function(e){var t,n;e instanceof HX?(t=e._id,e=e._name):(t=VX(),(n=XX).time=sX(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&yX(a,e,t,c,s,n||WX(a,t));return new HX(r,this._parents,e,t)};var YX=[null];const qX=Object.freeze(Object.defineProperty({__proto__:null,active:function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>1&&n.name===t)return new HX([[e]],YX,t,+r);return null},interrupt:wX,transition:UX},Symbol.toStringTag,{value:"Module"})),$X=e=>()=>e;function KX(e,t){let{sourceEvent:n,target:r,transform:i,dispatch:o}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ZX(e,t,n){this.k=e,this.x=t,this.y=n}ZX.prototype={constructor:ZX,scale:function(e){return 1===e?this:new ZX(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ZX(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var QX=new ZX(1,0,0);function JX(e){for(;!e.__zoom;)if(!(e=e.parentNode))return QX;return e.__zoom}function eW(e){e.stopImmediatePropagation()}function tW(e){e.preventDefault(),e.stopImmediatePropagation()}function nW(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function rW(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function iW(){return this.__zoom||QX}function oW(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function aW(){return navigator.maxTouchPoints||"ontouchstart"in this}function sW(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function lW(){var e,t,n,r=nW,i=rW,o=sW,a=oW,s=aW,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=Du,p=NG("start","zoom","end"),f=0,d=10;function m(e){e.property("__zoom",iW).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",S).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new ZX(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new ZX(e.k,r,i)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",function(){_(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,o=arguments,a=_(e,o).event(r),s=i.apply(e,o),l=null==n?v(s):"function"==typeof n?n.apply(e,o):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,p="function"==typeof t?t.apply(e,o):t,f=h(u.invert(l).concat(c/u.k),p.invert(l).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=c/t[2];e=new ZX(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function _(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=_(this,n).event(e),u=this.__zoom,h=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,a.apply(this,arguments)))),p=ym(e);if(s.wheel)(s.mouse[0][0]!==p[0]||s.mouse[0][1]!==p[1])&&(s.mouse[1]=u.invert(s.mouse[0]=p)),clearTimeout(s.wheel);else{if(u.k===h)return;s.mouse=[p,u.invert(p)],wX(this),s.start()}tW(e),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",o(y(g(u,h),s.mouse[0],s.mouse[1]),s.extent,c))}}function x(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=_(this,i,!0).event(e),u=pm(e.view).on("mousemove.zoom",function(e){if(tW(e),!l.moved){var t=e.clientX-p,n=e.clientY-d;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",o(y(l.that.__zoom,l.mouse[0]=ym(e,s),l.mouse[1]),l.extent,c))},!0).on("mouseup.zoom",function(e){u.on("mousemove.zoom mouseup.zoom",null),UG(e.view,l.moved),tW(e),l.event(e).end()},!0),h=ym(e,s),p=e.clientX,d=e.clientY;HG(e.view),eW(e),l.mouse=[h,this.__zoom.invert(h)],wX(this),l.start()}}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,l=ym(e.changedTouches?e.changedTouches[0]:e,this),h=s.invert(l),p=s.k*(e.shiftKey?.5:2),f=o(y(g(s,p),l,h),i.apply(this,n),c);tW(e),u>0?pm(this).transition().duration(u).call(b,f,l,e):pm(this).call(m.transform,f,l,e)}}function S(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(r.apply(this,arguments)){var s,l,c,u,h=n.touches,p=h.length,f=_(this,o,n.changedTouches.length===p).event(n);for(eW(n),l=0;l<p;++l)u=[u=ym(c=h[l],this),this.__zoom.invert(u),c.identifier],f.touch0?!f.touch1&&f.touch0[2]!==u[2]&&(f.touch1=u,f.taps=0):(f.touch0=u,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),wX(this),f.start())}}function k(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,s,l,u=_(this,n).event(e),h=e.changedTouches,p=h.length;for(tW(e),i=0;i<p;++i)s=ym(a=h[i],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],d=u.touch0[1],m=u.touch1[0],v=u.touch1[1],b=(b=m[0]-f[0])*b+(b=m[1]-f[1])*b,w=(w=v[0]-d[0])*w+(w=v[1]-d[1])*w;a=g(a,Math.sqrt(b/w)),s=[(f[0]+m[0])/2,(f[1]+m[1])/2],l=[(d[0]+v[0])/2,(d[1]+v[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",o(y(a,s,l),u.extent,c))}}function O(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var a,s,l=_(this,i).event(e),c=e.changedTouches,u=c.length;for(eW(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),a=0;a<u;++a)s=c[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=ym(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<d)){var h=pm(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",iW),e!==i?b(e,t,n,r):i.interrupt().each(function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,a=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return o(y(g(r,l),a,s),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,a){m.transform(e,function(){var e=i.apply(this,arguments),a=this.__zoom,s=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return o(QX.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=pm(this.that).datum();p.call(e,this.that,new KX(e,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:p}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:$X(+e),m):a},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:$X(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:$X(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:$X([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(h=e,m):h},m.on=function(){var e=p.on.apply(p,arguments);return e===p?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(d=+e,m):d},m}JX.prototype=ZX.prototype;const cW=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:ZX,zoom:lW,zoomIdentity:QX,zoomTransform:JX},Symbol.toStringTag,{value:"Module"}));function uW(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hW(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hW(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let pW=function(){return uW(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.pAxis=new ow.PIXI.Graphics,this.track=t,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10},[{key:"startAxis",value:function(e){const t=this.pAxis;t.clear(),t.lineStyle(1,this.track.getTheme()===Ew?aw("#ffffff"):0,1),t.moveTo(0,0),t.lineTo(0,e)}},{key:"createAxisTexts",value:function(e,t){this.tickValues=this.calculateAxisTickValues(e,t);let n=0;const r=this.track.getTheme()===Ew?"white":"black";for(this.track.options&&this.track.options.axisLabelFormatting&&"scientific"!==this.track.options.axisLabelFormatting?this.tickFormat=e=>e:this.tickFormat=eh(".2");n<this.tickValues.length;){const e=this.tickValues[n];for(;this.axisTexts.length<=n;){const t=new ow.PIXI.Text(e,{fontSize:`${this.axisTextFontSize}px`,fontFamily:this.axisTextFontFamily,fill:r});this.axisTexts.push(t),this.pAxis.addChild(t)}this.axisTexts[n].text=this.tickFormat(e),this.axisTexts[n].anchor.y=.5,this.axisTexts[n].anchor.x=.5,n++}for(;this.axisTexts.length>this.tickValues.length;){const e=this.axisTexts.pop();this.pAxis.removeChild(e),e.destroy(!0)}}},{key:"calculateAxisTickValues",value:function(e,t){const n=Math.max(Math.ceil(t/40),1);let r=e.ticks(n);return r.length<1&&(r=e.ticks(n+1),r.length>1&&(r=[r[0]])),r}},{key:"drawAxisLeft",value:function(e,t){var n;this.startAxis(t),this.createAxisTexts(e,t);const r=this.pAxis;this.track.getTheme()===Ew&&r.lineStyle(r.lineWidth||r._lineStyle.width,aw("#ffffff")),r.moveTo(0,0),r.lineTo(-5,0),r.moveTo(0,t),r.lineTo(-5,t);for(let i=0;i<this.axisTexts.length;i++){const t=this.tickValues[i];this.axisTexts[i].x=-(9+this.axisTexts[i].width/2),this.axisTexts[i].y=e(t),r.moveTo(-0,e(t)),r.lineTo(-5,e(t)),null!=(n=this.track)&&n.flipText&&(this.axisTexts[i].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(e,t){var n;this.startAxis(t),this.createAxisTexts(e,t);const r=this.pAxis;this.track.getTheme()===Ew&&r.lineStyle(r.lineWidth||r._lineStyle.width,aw("#ffffff")),r.moveTo(0,0),r.lineTo(5,0),r.moveTo(0,t),r.lineTo(5,t);for(let i=0;i<this.axisTexts.length;i++){const t=this.tickValues[i];this.axisTexts[i].x=9+this.axisTexts[i].width/2,this.axisTexts[i].y=e(t),r.moveTo(0,e(t)),r.lineTo(5,e(t)),null!=(n=this.track)&&n.flipText&&(this.axisTexts[i].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(let e=this.axisTexts.length-1;e>=0;e--)this.axisTexts[e].visible=!0;for(let e=this.axisTexts.length-1;e>=0;e--){if(!this.axisTexts[e].visible)continue;let t=e-1;for(;t>=0&&this.axisTexts[e].y+this.axisTexts[e].height/2>this.axisTexts[t].y-this.axisTexts[t].height/2;)this.axisTexts[t].visible=!1,t-=1}}},{key:"exportVerticalAxis",value:function(e){var t;const n=document.createElement("g");n.setAttribute("class","axis-vertical");let r="black";null!=(t=this.track)&&t.options.lineStrokeColor&&(r=this.track.options.lineStrokeColor),this.track.getTheme()===Ew&&(r="#cccccc");const i=document.createElement("path");return i.setAttribute("fill","transparent"),i.setAttribute("stroke",r),i.setAttribute("id","axis-line"),i.setAttribute("d",`M0,0 L0,${e}`),n.appendChild(i),n}},{key:"createAxisSVGLine",value:function(){var e;let t="black";null!=(e=this.track)&&e.options.lineStrokeColor&&(t=this.track.options.lineStrokeColor),this.track.getTheme()===Ew&&(t="#cccccc");const n=document.createElement("path");return n.setAttribute("id","tick-mark"),n.setAttribute("fill","transparent"),n.setAttribute("stroke",t),n}},{key:"createAxisSVGText",value:function(e){const t=document.createElement("text");return t.innerHTML=e,t.setAttribute("id","axis-text"),t.setAttribute("text-anchor","middle"),t.setAttribute("font-family",this.axisTextFontFamily),t.setAttribute("font-size",this.axisTextFontSize),t.setAttribute("dy",this.axisTextFontSize/2-2),t}},{key:"exportAxisLeftSVG",value:function(e,t){const n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L5,0");const i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${t} L5,${t}`);for(let o=0;o<this.axisTexts.length;o++){const t=this.tickValues[o],r=this.axisTexts[o],i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${e(t)} L5,${e(t)}`);const a=document.createElement("g");if(n.appendChild(a),r.visible){const e=this.createAxisSVGText(r.text);a.appendChild(e)}a.setAttribute("transform",`translate(${r.position.x},${r.position.y})\n             scale(${r.scale.x},${r.scale.y})`)}return n}},{key:"exportAxisRightSVG",value:function(e,t){const n=this.exportVerticalAxis(t),r=this.createAxisSVGLine();n.appendChild(r),r.setAttribute("d","M0,0 L-5,0");const i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${t} L-5,${t}`);for(let o=0;o<this.axisTexts.length;o++){const t=this.tickValues[o],r=this.axisTexts[o],i=this.createAxisSVGLine();n.appendChild(i),i.setAttribute("d",`M0,${e(t)} L-5,${e(t)}`);const a=document.createElement("g");if(n.appendChild(a),r.visible){const e=this.createAxisSVGText(r.text);a.appendChild(e)}a.setAttribute("transform",`translate(${r.position.x},${r.position.y})\n             scale(${r.scale.x},${r.scale.y})`)}return n}},{key:"clearAxis",value:function(){const e=this.pAxis;for(;this.axisTexts.length;){const t=this.axisTexts.pop();e.removeChild(t)}e.clear()}}])}();const fW=(e,t)=>{const n=[];for(let r=e;r<t;r++)n.push(r);return n},dW=(e,t,n)=>{if(typeof n>"u"&&(n=Number.MAX_SAFE_INTEGER),e.resolutions)return((e,t)=>{const n=e.map(e=>+e).sort((e,t)=>t-e),r=t.range()[1]-t.range()[0],i=n.map(e=>(t.domain()[1]-t.domain()[0])/e).map(e=>e/r),o=i.filter(e=>e<1);return 0===o.length?0:i.indexOf(o[o.length-1])})(e.resolutions,t,e.min_pos[0],e.max_pos[0]);const r=((e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,l=0;return r&&(l=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=l,s})(t,e.min_pos[0],e.max_pos[0],e.bins_per_dimension||e.tile_size),i=Math.min(r,n);return Math.max(i,0)};const mW={calculate1DVisibleTiles:(e,t)=>{if(!e)return[];const n=dW(e,t,e.max_zoom);if(e.resolutions){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE;const i=e*(arguments.length>4&&void 0!==arguments[4]?arguments[4]:256),o=Math.max(0,Math.floor((t.domain()[0]-n)/i)),a=Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/i);let s=fW(o,a);return s.length>20&&(console.warn(`Too many visible tiles: ${s.length} truncating to 20`),s=s.slice(0,20)),s}(e.resolutions.map(e=>+e).sort((e,t)=>t-e)[n],t,e.min_pos[0],e.max_pos[0]).map(e=>[n,e])}return((e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return fW(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))})(n,t,e.min_pos[0],e.max_pos[0],e.max_zoom,e.max_width).map(e=>[n,e])},calculate1DZoomLevel:dW,drawAxis:(e,t)=>{if(e.axis||(e.axis=new pW(e),e.pBase.addChild(e.axis.pAxis)),!e.options.axisPositionVertical&&!e.options.axisPositionHorizontal)return void e.axis.clearAxis();if(e.options.axisPositionVertical&&"hidden"===e.options.axisPositionVertical)return void e.axis.clearAxis();if(e.options.axisPositionHorizontal&&"hidden"===e.options.axisPositionHorizontal)return void e.axis.clearAxis();const n=e.options.axisMargin||0;"left"===e.options.axisPositionHorizontal||"top"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1])):"outsideLeft"===e.options.axisPositionHorizontal||"outsideTop"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):"right"===e.options.axisPositionHorizontal||"bottom"===e.options.axisPositionVertical?(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):("outsideRight"===e.options.axisPositionHorizontal||"outsideBottom"===e.options.axisPositionVertical)&&(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1]))},movedY:(e,t)=>{const n=e.valueScaleTransform,{y:r,k:i}=n;r+t/i>-(i-1)*e.dimensions[1]&&r+t/i<0&&(e.valueScaleTransform=n.translate(0,t/i)),Object.values(e.fetchedTiles).forEach(t=>{t.graphics.position.y=e.valueScaleTransform.y}),e.animate()},getTilePosAndDimensions:(e,t)=>{const n=+t.split(".")[0],r=+t.split(".")[1],i=e.max_width/2**n;return{tileX:e.min_pos[0]+r*i,tileWidth:i}},stretchRects:function(e,t){Object.values(e.fetchedTiles).forEach(n=>{if(!n.drawnAtScale)return;const r=n.drawnAtScale.range(),i=e._xScale.range();if(r[0]!==i[0]||r[1]!==i[1])return void e.renderTile(n);const o=(n.drawnAtScale.domain()[1]-n.drawnAtScale.domain()[0])/(e._xScale.domain()[1]-e._xScale.domain()[0]);if(o>2||o<.5)e.renderTile(n);else{const r=e._xScale.domain().map(n.drawnAtScale)[0];for(const e of t)e(n).scale.x=o,e(n).x=-r*o}})},zoomedY:(e,t,n,r)=>{const i=n.k,o=n.y,a=(e-o)/i,s=Math.max(i/t,1);let l=i*a+o-s*a;return l=Math.max(l,-(s-1)*r),l=Math.min(l,0),QX.translate(0,l).scale(s)}},gW=Object.freeze(Object.defineProperty({__proto__:null,DenseDataExtrema1D:Ex,DenseDataExtrema2D:Ox,IS_TRACK_RANGE_SELECTABLE:Ax,absToChr:Z_,accessorTransposition:Q_,addArrays:ew,addClass:(e,t)=>{if("http://www.w3.org/2000/svg"===e.namespaceURI){if(!tw(e,t)){const n=e.getAttribute("class")||"";e.setAttribute("class",`${n} ${t}`)}}else e.classList?e.classList.add(t):tw(e,t)||(e.className+=` ${t}`)},base64ToCanvas:(e,t,n)=>{const r=document.createElement("canvas");return new Promise((i,o)=>{const a=new window.Image;a.onload=()=>{r.width=t||a.width,r.height=n||a.height;const e=r.getContext("2d");e?(e.drawImage(a,0,0),i(r)):o(new Error("Could not get canvas context"))},a.onerror=()=>{o(new Error("Could not convert base64 to canvas"))},a.src=`data:image/png;base64,${e}`})},changeOptions:(e,t,n,r)=>{for(const{viewId:i,trackId:o,track:a}of e.instance().iterateOverTracks())i===t&&o===n&&(a.options={...a.options,...r});e.setState(e.instance().state)},chrToAbs:nw,chromInfoBisector:K_,cloneEvent:rw,colorDomainToRgbaArray:iw,colorToHex:aw,colorToRgba:sw,dataToGenomicLoci:lw,debounce:cw,decToHexStr:uw,dictFromTuples:hw,dictItems:pw,dictKeys:fw,dictValues:dw,download:mw,expandCombinedTracks:ux,fillInMinWidths:iT,flatten:aT,forEach:e=>t=>Array.prototype.forEach.call(t,e),forwardEvent:sT,genomeLociToPixels:(e,t)=>[nw(e[0],e[1],t),nw(e[2],e[3],t)],genomicRangeToChromosomeChunks:function(e,t,n,r,i){const{chr:o,pos:a}=t,{chr:s,pos:l}=n,c=[];if(o===s){const e=o,t=Math.floor(a/r),n=Math.min(t+i,Math.ceil(l/r));c.push([e,t,n])}else{let t=i;const n=e.findIndex(e=>{let[t]=e;return t===o}),u=e.findIndex(e=>{let[t]=e;return t===s});for(let i=n;i<=u;i++){let o,s;const[h,p]=e[i];i<u?(o=i===n?a:0,s=p):(o=0,s=l);const f=Math.floor(o/r),d=Math.min(f+t,Math.ceil(s/r));c.push([h,f,d]),t-=d-f}}return c},getAggregationFunction:Px,getDefaultTrackForDatatype:lT,getDefaultTracksForDatatype:function(e,t){if(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(e=>{qw[e]=window.higlassTracksByType[e].config}),!(e in Kw)&&!t)return void console.warn("unknown data type:",e);const n={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},r=Kw[e]||{};if(t)for(const i of t)if(qw[i])for(const e of n[qw[i].orientation])r[e]=i;else console.warn("unknown track type",i);return r},getElementDim:cT,getTiledPlot:(e,t)=>e.tiledPlots[t],getTrackByUid:uT,getTrackConfFromHGC:(e,t,n)=>{const r=e.state.views[t];if(!r)return null;let i=null;const o=e=>(e.uid===n&&(i=e),"combined"===e.type.substr(0,8)&&e.contents.forEach(o),null),a=r.tracks;return Object.keys(a).map(e=>a[e]).filter(e=>e.filter).reduce((e,t)=>e.concat(t),[]).forEach(o),i},getTrackObjById:hT,getTrackObjectFromHGC:Mx,getTrackPositionByUid:vT,getTrackRenderer:Ix,getXylofon:_T,gradient:wT,hasClass:tw,hasParent:TT,hexStrToInt:xT,intoTheVoid:ET,isTrackOrChildTrack:PT,isWithin:CT,latToY:(e,t)=>{let n=e*Math.PI/180;return n=(e=>Math.log(Math.tan((e+Math.PI/2)/2)))(n),2**t*(Math.PI-n)/(2*Math.PI)},lngToX:(e,t)=>2**t*(e+180)/360,loadChromInfos:e=>AT(e).map(e=>e.chromInfoPath).forEach(e=>X_.get(e)),map:bT,max:MT,maxNonZero:IT,min:RT,minNonZero:DT,mod:(e,t)=>(e%t+t)%t,mountHGComponent:RG,mountHGComponentAsync:async function(e,t,n,r){let i;return await new Promise(o=>{i=RG(e,t,n,o,r)}),i},ndarrayAssign:NT,ndarrayFlatten:qT,ndarrayToList:YT,numericifyVersion:$T,objVals:AT,or:KT,parseChromsizesRows:H_,pixiTextToSvg:ZT,q:e=>{try{const t=e.split(".");return e=>{let n=e;return t.forEach(e=>{n=n[e]}),n}}catch{return}},rangeQuery2d:function(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8?arguments[8]:void 0;const c=o?i:r,u=o?r:i,h=o?s:a,p=o?a:s,f=Math.max(0,+c[0]||0),d=Math.max(0,+c[1]||0),m=Math.max(0,+u[0]||0),g=Math.max(0,+u[1]||0);let y=[];ArrayBuffer.isView(l)||console.warn("Not supported yet");try{const r=new l.constructor(l.length);let i=0+p;for(let o=m;o<g;o++)r.set(e.slice(o*t+f,o*t+d),h+i*n),i+=1;const a=o?Q_(n,n):void 0;y=ew(l,r,a)}catch{}return y},reduce:oT,relToAbsChromPos:(e,t,n,r)=>[r.chrPositions[e].pos+ +t,r.chrPositions[e].pos+ +n],removeClass:(e,t)=>{const n=new RegExp(`(\\s|^)${t}(\\s|$)`);if("http://www.w3.org/2000/svg"===e.namespaceURI){const t=e.getAttribute("class")||"";e.setAttribute("class",t.replace(n," "))}else e.classList?e.classList.remove(t):tw(e,t)&&(e.className=e.className.replace(n," "))},removeHGComponent:e=>{e&&(o.unmountComponentAtNode(e),document.body.removeChild(e))},resetD3BrushStyle:QT,rgbToHex:(e,t,n)=>`#${JT(e)}${JT(t)}${JT(n)}`,scalesCenterAndK:ex,scalesToGenomeLoci:tx,segmentsToRows:wx,selectedItemsToSize:Cx,showMousePosition:nx,some:e=>t=>Array.prototype.some.call(t,e),sum:rx,svgLine:ix,throttleAndDebounce:ox,tileToCanvas:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256;const r=document.createElement("canvas");r.width=t,r.height=n;const i=r.getContext("2d");if(!i)throw new Error("Could not get canvas context");i.fillStyle="transparent",i.fillRect(0,0,r.width,r.height);const o=new ImageData(e,r.width,r.height);return i.putImageData(o,0,0),r},timeout:ax,toVoid:sx,totalTrackPixelHeight:e=>{if(!e.tracks)return 0;let t=0;return e.tracks.top&&(t+=e.tracks.top.map(e=>e.height).reduce((e,t)=>e+t,0)),e.tracks.center&&(t+=e.tracks.center.map(e=>e.height).reduce((e,t)=>e+t,0)),e.tracks.bottom&&(t+=e.tracks.bottom.map(e=>e.height).reduce((e,t)=>e+t,0)),t},trackUtils:mW,trimTrailingSlash:lx,valueToColor:cx,visitPositionedTracks:yT,visitTracks:gT,waitForJsonComplete:MG,waitForTilesLoaded:IG,waitForTransitionsFinished:AG},Symbol.toStringTag,{value:"Module"}));let yW=!1;const vW={listen:()=>{if(yW)return;const[e,t]=_T(),n=[String.fromCharCode(..."102117110099116105111110040041123115101108102046099111110115111108101046108111103040039".match(/.{1,3}/g).map(e=>+e)).toLowerCase(),String.fromCharCode(..."072".match(/.{1,3}/g).map(e=>+e)),String.fromCharCode(..."105".match(/.{1,3}/g).map(e=>+e)).toLowerCase(),String.fromCharCode(..."071".match(/.{1,3}/g).map(e=>+e)),String.fromCharCode(..."108097115115".match(/.{1,3}/g).map(e=>+e)).toLowerCase(),String.fromCharCode(..."032118".match(/.{1,3}/g).map(e=>+e)).toLowerCase(),String.fromCharCode(...t.match(/.{1,3}/g).map(e=>+e)).toLowerCase(),String.fromCharCode(..."058032104116116112058047047104105103108097115115046105111039041125".match(/.{1,3}/g).map(e=>+e)).toLowerCase()].join(""),r=e=>e.charAt(0).toUpperCase()+e.slice(1),i=e=>e.slice(0,6)+e.charAt(6).toUpperCase()+e.slice(7,12)+e.slice(12).toUpperCase(),o=e[String.fromCharCode(..."085082076".match(/.{1,3}/g).map(e=>+e))],a=e[r(String.fromCharCode(..."066076079066".match(/.{1,3}/g).map(e=>+e)).toLowerCase())],s=e[r(String.fromCharCode(..."087111114107101114".match(/.{1,3}/g).map(e=>+e)).toLowerCase())],l=i(String.fromCharCode(..."099114101097116101079098106101099116085082076".match(/.{1,3}/g).map(e=>+e)).toLowerCase()),c=i(String.fromCharCode(..."114101118111107101079098106101099116085082076".match(/.{1,3}/g).map(e=>+e)).toLowerCase()),u=o[l](new a([`(${n})()`],{type:"application/javascript"}));new s(u),o[c](u),yW=!0}};function bW(e,t,n,r,i,o){let a,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;"log"===n?a=wh().range([254,0]).domain(r):("linear"!==n&&console.warn("Unknown value scale type:",n," Defaulting to linear"),a=ph().range([254,0]).domain(r));const{selectedRows:p,selectedRowsAggregationMode:f="mean",selectedRowsAggregationWithRelativeHeight:d=!1,selectedRowsAggregationMethod:m="client"}=h??{};let g=e;c&&p&&(g=Cx(p,d)*c[1]);let y,v=0;const b=c?c[1]:Math.sqrt(e),_=new Uint8ClampedArray(4*g),w=(e,t)=>{v=255,!(s&&Math.floor(e/b)<e%b)&&!(l&&Math.floor(e/b)>e%b)&&!Number.isNaN(+t)&&(v=(e=>{const t=a(e);return Number.isNaN(t)?254:Math.max(0,Math.min(254,Math.floor(t)))})(t+i)),(v<0||v>255)&&console.warn("out of bounds rgbIdx:",v," (should be 0 <= rgbIdx <= 255)"),y=u&&!Number.isNaN(+t)&&0==+t?u:o[v],_[4*e]=y[0],_[4*e+1]=y[1],_[4*e+2]=y[2],_[4*e+3]=y[3]};let T;try{if(p&&c)!function(e,t,n,r,i,o,a){let s,l,c,u,h,p,f,d;if(i){const n=Px(i);s=n,l=(r,i)=>n(i.map(n=>e[n*t[1]+r]))??0}for(h=0;h<t[1];h++)for(u=0,p=0;p<r.length;p++){if(d=r[p],s&&"server"===a)c=e[p*t[1]+h];else if(Array.isArray(d)){if(!l)throw new Error("row aggregation requires 'aggFromDataFunc'");c=l(h,d)}else c=e[d*t[1]+h];if(o&&Array.isArray(d))for(f=0;f<d.length;f++)n(u*t[1]+h,c),u++;else n(u*t[1]+h,c),u++}}(t,c,w,p,f,d,m);else for(let e=0;e<t.length;e++)T=t[e],w(e,T)}catch(x){return console.warn("Odd datapoint"),console.warn("d:",T),T=T??0,console.warn("valueScale.domain():",a.domain()),console.warn("valueScale.range():",a.range()),console.warn("value:",a(T+i)),console.warn("pseudocount:",i),console.warn("rgbIdx:",v,"d:",T,"ct:",a(T)),console.error("ERROR:",x),_}return _}function _W(e){let t,n,r,i=31744&e;const o=(32768&e)<<16;switch(i){case 0:if(t=1023&e,0===t)return o;for(t<<=1;0===(1024&t);)t<<=1,i++;return n=112-i<<23,r=(1023&t)<<13,o+n+r;case 31744:return o+2139095040+((1023&e)<<13);default:return o+(114688+(32767&e)<<13)}}function wW(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function TW(e){const t=new Uint32Array(e.length);for(let n=0;n<e.length;n++)t[n]=_W(e[n]);return new Float32Array(t.buffer)}function xW(e,t,n){const r=e??{};for(const i of n){i in r||(r[i]={});const e=i,n=e.split(".");r[e].server=t,r[e].tileId=e,r[e].zoomLevel=+n[1];const o=n.slice(2,n.length).map(e=>+e).filter(e=>!Number.isNaN(e));if(r[e].tilePos=o,r[e].tilesetUid=n[0],"dense"in r[e]){const t=wW(r[e].dense);let n;if("float16"===r[e].dtype){n=TW(new Uint16Array(t))}else n=new Float32Array(t);const i=2===o.length?new Ox(n):new Ex(n);r[e].dense=n,r[e].denseDataExtrema=i,r[e].minNonZero=i.minNonZeroInTile,r[e].maxNonZero=i.maxNonZeroInTile}}return r}const EW=15,SW=a_.nice();let kW=0,OW=null;function*PW(e,t){let n=[];for(const r of e)n.push(r),n.length===t&&(yield n,n=[]);n.length&&(yield n)}const CW=e=>{OW=e},AW=()=>OW;const MW=function(e){let t,{processBatch:n,interval:r,finalWait:i}=e,o=[],a=0;const s=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];n(o,...r),t=void 0,o=[]};let l=!1;return function(e){const{promise:n,resolve:c,reject:u}=Promise.withResolvers();for(var h=arguments.length,p=new Array(h>1?h-1:0),f=1;f<h;f++)p[f-1]=arguments[f];return o.push({value:e,resolve:c,reject:u}),l?a++:(s(...p),function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];clearTimeout(t),t=setTimeout(()=>{a>0&&(s(...n),a=0)},i)}(...p),l=!0,a=0,setTimeout(()=>{l=!1},r)),n}}({processBatch:async(e,t)=>{const n=Array.from(function(e){let{maxSize:t=EW}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const n=function(e){const t=[],n={};for(const r of e){void 0===n[r.id]&&(n[r.id]=t.length,t.push({...r,tileIds:[]}));const e=t[n[r.id]];e.tileIds=e.tileIds.concat(r.tileIds)}return t}(e),r=function(e){const t=[],n={};for(const r of e){void 0===n[r.server]&&(n[r.server]=t.length,t.push({...r,tileIds:[],body:[]}));const e=t[n[r.server]];e.tileIds=e.tileIds.concat(r.tileIds);for(const t of r.tileIds)if(r.options){const n=t.indexOf("."),i=t.substring(0,n),o=t.substring(n+1);let a=e.body.find(e=>e.tilesetUid===i);a||(a={tilesetUid:i,tileIds:[],options:r.options},e.body.push(a)),a.tileIds.push(o)}}return t}(n);for(const e of r)for(const n of PW(new Set(e.tileIds),t))yield{...e,tileIds:n}}()}(e.map(e=>e.value)),e=>function(e,t){var n,r;const i={"content-type":"application/json"};t.authHeader&&(i.Authorization=t.authHeader);const o=e.tileIds.map(e=>`d=${e}`).join("&"),a=`${e.server}/tiles/?${o}&s=${t.sessionId}`;return null==(n=t.pubSub)||n.publish("requestSent",a),fetch(a,{credentials:"same-origin",headers:i,...(null==(r=e.body)?void 0:r.length)>0?{method:"POST",body:JSON.stringify(e.body)}:{}}).then(e=>e.json()).then(n=>{var r;return null==(r=t.pubSub)||r.publish("requestReceived",a),xW(n,e.server,e.tileIds)}).catch(e=>console.warn("err:",e))}(e,{authHeader:OW,sessionId:SW,pubSub:t})),r=function(e){const t={},n=(e,t)=>`${e}/${t}`;for(const r of e)if(r)for(const[e,i]of Object.entries(r))t[n(i.server,e)]=r[e];return{resolveTileDataForRequest(e){const r={};for(const i of e.tileIds){const o=t[n(e.server,i)];o&&(r[i]=o)}return r}}}(await Promise.all(n));for(const i of e)i.resolve(r.resolveTileDataForRequest(i.value))},interval:100,finalWait:100}),IW=(e,t)=>{const n=e.map(e=>+e).sort((e,t)=>t-e),r=t.range()[1]-t.range()[0],i=n.map(e=>(t.domain()[1]-t.domain()[0])/e).map(e=>e/r),o=i.filter(e=>e<1);return 0===o.length?0:i.indexOf(o[o.length-1])},RW=(e,t)=>{if(mT(e))return e.resolutions.map(e=>+e).sort((e,t)=>t-e)[t];return e.max_width/(2**t*+(e?.bins_per_dimension??256))},DW=(e,t,n,r)=>{const i=e.range()[1]-e.range()[0],o=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),a=Math.max(0,Math.ceil(Math.log(i/384)/Math.LN2));let s=Math.round(Math.log(o)/Math.LN2)+a,l=0;return r&&(l=Math.floor(Math.log(256)/Math.log(2)-Math.log(r)/Math.log(2))),s+=l,s};function NW(e,t,n,r,i){let o=null;const a=dT(e)?e.bins_per_dimension??256:256;o=dT(e)?t/2**r:e.resolutions[r]*a;const s=Math.floor((i-n)/o);return[s,Math.floor(a*(i-s*o)/o)]}const jW=(e,t,n,r,i,o)=>{const a=Math.min(e,i),s=o/2**a;return Ul(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**a,Math.ceil((t.domain()[1]-n-1e-7)/s)))},LW=(e,t,n)=>dT(e)?e.max_width/2**t:e.resolutions.map(e=>+e).sort((e,t)=>t-e)[t]*n,BW=(e,t,n,r,i)=>{const o=e*(i||256);r||(r=Number.MAX_VALUE);let a=Ul(Math.max(0,Math.floor((t.domain()[0]-n)/o)),Math.ceil(Math.min(r,t.domain()[1]-n-1e-7)/o));return a.length>20&&(console.warn(`Too many visible tiles: ${a.length} truncating to 20`),a=a.slice(0,20)),a},FW=(e,t,n,r,i,o,a,s,l,c)=>{const{tileData:u}=e;if(!u.dense)return void o(null);if(e.mirrored&&!e.isMirrored&&e.tileData.tilePos.length>0&&e.tileData.tilePos[0]===e.tileData.tilePos[1]){e.tileData.dense=e.tileData.dense.slice();const t=Math.floor(Math.sqrt(e.tileData.dense.length));for(let n=0;n<t;n++)for(let r=n+1;r<t;r++)e.tileData.dense[n*t+r]=e.tileData.dense[r*t+n];if(s)for(let n=0;n<t;n++)for(let r=0;r<n;r++)e.tileData.dense[n*t+r]=Number.NaN;e.isMirrored=!0}o({pixData:bW(u.dense.length,u.dense,t,n,r,i,a,s,e.tileData.shape,l,c)})};function zW(e,t,n,r){kW+=1,r.publish("requestSent",e);let i=null;if("text"===n)i=null;else{if("json"!==n)throw new Error(`fetch either "text" or "json", not "${n}"`);i="application/json"}const o={};return i&&(o["Content-Type"]=i),OW&&(o.Authorization=OW),fetch(e,{credentials:"same-origin",headers:o}).then(e=>{if(!e.ok)throw Error(e.statusText);return e[n]()}).then(e=>(t(void 0,e),e)).catch(n=>(console.error(`Could not fetch ${e}`,n),t(n,void 0),n)).finally(()=>{r.publish("requestReceived",e),kW-=1})}async function HW(e,t,n){return zW(e,t,"json",n)}const UW=(e,t,n,r,i)=>{const o=`${lx(e)}/tileset_info/?d=${t}&s=${SW}`;i.publish("requestSent",o),HW(o,(t,a)=>{i.publish("requestReceived",o),t?r?r(`Error retrieving tilesetInfo from: ${e}`):console.warn("Error retrieving: ",o):n(a)},i)},VW={calculateResolution:RW,calculateTileAndPosInTile:NW,calculateTiles:jW,calculateTilesFromResolution:BW,calculateTileWidth:LW,calculateZoomLevel:DW,calculateZoomLevelFromResolutions:IW,fetchTilesDebounced:MW,json:HW,text:function(e,t,n){return zW(e,t,"text",n)},tileDataToPixData:FW,trackInfo:UW},GW=Object.freeze(Object.defineProperty({__proto__:null,ElementResizeListener:vW,get authHeader(){return OW},chromInfo:X_,createDomEvent:$_,getTileProxyAuthHeader:AW,get requestsInFlight(){return kW},setTileProxyAuthHeader:CW,tileProxy:VW,tileResponseToData:xW},Symbol.toStringTag,{value:"Module"})),XW={__fake__:!0,publish:()=>{},subscribe:()=>({event:"",handler:()=>{}}),unsubscribe:()=>{},clear:()=>{}};function WW(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:XW;const r={absToChr:e=>r.chrPositions?Z_(e,r):null,chrToAbs:function(){let[e,t]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.chrPositions?nw(e,t,r):null}};return VW.text(e,(e,n)=>{if(e)t&&t(null);else{const e=H_(R_(n));Object.keys(e).forEach(t=>{r[t]=e[t]}),t&&t(r)}},n).then(()=>r)}const YW={button:"_button_1wnjn_1","button-shortcut":"_button-shortcut_1wnjn_35"},qW=i.forwardRef((e,t)=>i.createElement("button",{ref:t,className:YW[e.styleName]??YW.button,disabled:e.disable,onBlur:e.onBlur,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseOut:e.onMouseOut,onMouseUp:e.onMouseUp,type:"button"},e.children,e.shortcut&&i.createElement("span",{className:YW["button-shortcut"]},e.shortcut)));qW.defaultProps={onClick:()=>{},styleName:"",type:"button"},qW.propTypes={children:xm.any,disable:xm.bool,onBlur:xm.func,onClick:xm.func,onMouseDown:xm.func,onMouseOut:xm.func,onMouseUp:xm.func,shortcut:xm.string,type:xm.string,styleName:xm.string};const $W="_cross_2ke8w_1";function KW(){return i.createElement("div",{className:$W})}const{Provider:ZW,Consumer:QW}=i.createContext({close:sx,open:sx});function JW(e){return i.forwardRef((t,n)=>i.createElement(QW,null,r=>i.createElement(e,{ref:n,...t,modal:r})))}const eY="_modal-background_zzhoe_1",tY="_modal-hide_zzhoe_13",nY="_modal-wrap_zzhoe_17",rY="_modal-window_zzhoe_25",iY="_modal-window-max-height_zzhoe_38",oY="_modal-content_zzhoe_42";function aY(e){return i.createElement("div",{className:xs(eY,{[tY]:e.hide})},i.createElement("div",{className:nY},i.createElement("div",{className:xs(rY,{[iY]:e.maxHeight})},e.closeButton&&i.createElement(qW,{onClick:()=>{e.modal.close(),e.onClose&&e.onClose()}},i.createElement(KW,null)),i.createElement("div",{className:oY},e.children))))}aY.defaultProps={closeButton:!0,hide:!1,maxHeight:!1},aY.propTypes={children:xm.element.isRequired,closeButton:xm.bool,hide:xm.bool,maxHeight:xm.bool,modal:xm.object.isRequired,onClose:xm.func};const sY=JW(aY),lY={"dialog-header":"_dialog-header_wp50s_1","dialog-main-max-height":"_dialog-main-max-height_wp50s_20","dialog-footer":"_dialog-footer_wp50s_31","dialog-footer-max-height":"_dialog-footer-max-height_wp50s_31"};function cY(e){const t=()=>{e.modal.close(),e.onCancel&&e.onCancel()};return i.createElement(sY,{closeButton:!1,hide:e.hide,maxHeight:e.maxHeight},i.createElement(i.Fragment,null,i.createElement("header",{className:lY["dialog-header"]},i.createElement("h3",null,e.title),i.createElement(qW,{onClick:t},i.createElement(KW,null))),e.maxHeight?i.createElement("main",{className:xs(e.maxHeight&&lY["dialog-main-max-height"])},e.children):i.createElement("main",null,e.children),i.createElement("footer",{className:lY[e.maxHeight?"dialog-footer-max-height":"dialog-footer"]},e.okayOnly?i.createElement("div",null):i.createElement(qW,{onClick:t,shortcut:e.cancelShortcut},e.cancelTitle),i.createElement(qW,{onClick:()=>{e.modal.close(),e.onOkay&&e.onOkay()},shortcut:e.okayShortcut},e.okayTitle))))}cY.defaultProps={cancelTitle:"Cancel",hide:!1,maxHeight:!1,okayOnly:!1,okayTitle:"Ok"},cY.propTypes={cancelShortcut:xm.string,cancelTitle:xm.string,children:xm.object,hide:xm.bool,maxHeight:xm.bool,modal:xm.object.isRequired,okayShortcut:xm.string,okayTitle:xm.string,okayOnly:xm.bool,onCancel:xm.func.isRequired,onOkay:xm.func.isRequired,title:xm.string.isRequired};const uY=JW(cY),hY="_export-link-dialog-wrapper_p9gxw_1";function pY(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fY(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fY(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function dY(e,t,n){return t=gY(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mY()?Reflect.construct(t,n||[],gY(e).constructor):t.apply(e,n))}function mY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mY=function(){return!!e})()}function gY(e){return(gY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yY(e,t){return(yY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let vY=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dY(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yY(e,t)}(t,e),pY(t,[{key:"render",value:function(){return i.createElement(uY,{okayOnly:!0,okayTitle:"Done",onOkay:this.props.onDone,title:"Share view link"},i.createElement("div",{className:hY},i.createElement("input",{ref:e=>{e&&(this.input=e,e.focus(),e.select())},onClick:e=>{e.target.select()},placeholder:"Generating the link...",readOnly:!0,value:this.props.url}),i.createElement(qW,{onClick:e=>{this.input.select(),document.execCommand("copy")}},"Copy")))}}])}(i.Component);vY.defaultProps={onDone:()=>{},url:""},vY.propTypes={onDone:xm.func,url:xm.string};var bY=[].slice,_Y={};function wY(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function TY(e){if(!e._start)try{!function(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=xY(e,t),--e._waiting,++e._active,n=i.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||_Y)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])EY(e,t);else if(!e._data)throw t}}function xY(e,t){return function(n,r){e._tasks[t]&&(--e._active,++e._ended,e._tasks[t]=null,null==e._error&&(null!=n?EY(e,n):(e._data[t]=r,e._waiting?TY(e):SY(e))))}}function EY(e,t){var n,r=e._tasks.length;for(e._error=t,e._data=void 0,e._waiting=NaN;--r>=0;)if((n=e._tasks[r])&&(e._tasks[r]=null,n.abort))try{n.abort()}catch{}e._active=NaN,SY(e)}function SY(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function kY(e){if(null==e)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new wY(e)}wY.prototype=kY.prototype={constructor:wY,defer:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var t=bY.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),TY(this),this},abort:function(){return null==this._error&&EY(this,new Error("abort")),this},await:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,n){e.apply(null,[t].concat(n))},SY(this),this},awaitAll:function(e){if("function"!=typeof e)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,SY(this),this}};const OY=Object.freeze(Object.defineProperty({__proto__:null,queue:kY},Symbol.toStringTag,{value:"Module"}));function PY(){return PY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PY.apply(null,arguments)}function CY(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AY(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AY(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function MY(e,t,n){return t=RY(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,IY()?Reflect.construct(t,n||[],RY(e).constructor):t.apply(e,n))}function IY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IY=function(){return!!e})()}function RY(e){return(RY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DY(e,t){return(DY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const NY=[];let jY=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MY(this,t,[e])).state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},n.keyDownHandlers={ArrowDown(e){e.preventDefault();const t=this.getFilteredItems().length;if(!t)return;const{highlightedIndex:n}=this.state,r=null===n||n===t-1?0:n+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})},ArrowUp(e){e.preventDefault();const t=this.getFilteredItems().length;if(!t)return;const{highlightedIndex:n}=this.state,r=0===n||null===n?t-1:n-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:r,isOpen:!0})},Enter(e){if(!1!==this.state.isOpen)if(null===this.state.highlightedIndex)this.setState({isOpen:!1},()=>{this.inputEl.select()});else{e.preventDefault();const t=this.getFilteredItems()[this.state.highlightedIndex],n=this.props.getItemValue(t);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.inputEl.setSelectionRange(n.length,n.length),this.props.onSelect(n,t)})}},Escape(){this.setState({highlightedIndex:null,isOpen:!1})}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DY(e,t)}(t,e),CY(t,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"UNSAFE_componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._performAutoCompleteOnUpdate=!0,(this.props.items!==e.items||this.state.highlightedIndex>=e.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.isOpen&&!1===t.isOpen&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),t.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(!0===this.state.isOpen&&null!==this.state.highlightedIndex){const e=this.refs[`item-${this.state.highlightedIndex}`];e?.scrollIntoView({block:"nearest",behavior:"smooth"})}}},{key:"handleKeyDown",value:function(e){this.keyDownHandlers[e.key]?this.keyDownHandlers[e.key].call(this,e):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(e){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(e,e.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){let e=this.props.items;return this.props.shouldItemRender&&(e=e.filter(e=>this.props.shouldItemRender(e,this.props.value))),this.props.sortItems&&e.sort((e,t)=>this.props.sortItems(e,t,this.props.value)),e}},{key:"maybeAutoCompleteText",value:function(){if(!this.props.autoHighlight||""===this.props.value)return;const{highlightedIndex:e}=this.state,t=this.getFilteredItems();if(0===t.length)return;const n=null!==e?t[e]:t[0];0===this.props.getItemValue(n).toLowerCase().indexOf(this.props.value.toLowerCase())&&null===e&&this.setState({highlightedIndex:0})}},{key:"setMenuPositions",value:function(){const e=this.inputEl,t=e.getBoundingClientRect(),n=globalThis.window.getComputedStyle(e),r=Number.parseInt(n.marginBottom,10)||0,i=Number.parseInt(n.marginLeft,10)||0,o=Number.parseInt(n.marginRight,10)||0;this.setState({menuTop:t.bottom+r,menuLeft:t.left+i,menuWidth:t.width+i+o})}},{key:"highlightItemFromMouse",value:function(e){this.setState({highlightedIndex:e})}},{key:"selectItemFromMouse",value:function(e){const t=this.props.getItemValue(e);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.props.onSelect(t,e),this.inputEl.focus()})}},{key:"setIgnoreBlur",value:function(e){this._ignoreBlur=e}},{key:"renderMenu",value:function(){const e=this.getFilteredItems().map((e,t)=>{const n=this.props.renderItem(e,this.state.highlightedIndex===t,{cursor:"default"});return i.cloneElement(n,{onMouseDown:()=>this.setIgnoreBlur(!0),onMouseEnter:()=>this.highlightItemFromMouse(t),onClick:()=>this.selectItemFromMouse(e),ref:`item-${t}`})}),t={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!e.length)return null;const n=this.props.renderMenu(e,this.props.value,t);return i.cloneElement(n,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),!this._ignoreBlur&&this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur?this.setIgnoreBlur(!1):(this._ignoreClick=!0,this.setState({isOpen:!0}))}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&!1===this.state.isOpen?this.setState({isOpen:!0}):null!==this.state.highlightedIndex&&!this._ignoreClick&&this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(e,t){return t?n=>{e(n),t(n)}:e}},{key:"render",value:function(){var e,t,n,r,o;this.props.debug&&NY.push({id:NY.length,state:this.state});const{inputProps:a}=this.props;return i.createElement("div",PY({style:{...this.props.wrapperStyle}},this.props.wrapperProps),i.createElement("input",PY({},a,{ref:e=>{this.inputEl=e},"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),null==(e=a.onBlur)?void 0:e.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),null==(t=a.onClick)?void 0:t.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),null==(n=a.onFocus)?void 0:n.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),null==(r=a.onKeyDown)?void 0:r.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),null==(o=a.onKeyUp)?void 0:o.bind(this)),role:"combobox",value:this.props.value})),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&i.createElement("pre",{style:{marginLeft:300}},JSON.stringify(NY.slice(NY.length-5,NY.length),null,2)))}}])}(i.Component);function LY(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BY(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BY(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function FY(e,t,n){return t=HY(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zY()?Reflect.construct(t,n||[],HY(e).constructor):t.apply(e,n))}function zY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zY=function(){return!!e})()}function HY(e){return(HY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UY(e,t){return(UY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}jY.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange(){},onSelect(){},renderMenu(e,t,n){return i.createElement("div",{style:{...n,...this.menuStyle}},e)},shouldItemRender:()=>!0,menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange(){}},jY.propTypes={autoHighlight:xm.bool,debug:xm.bool,getItemValue:xm.func.isRequired,inputProps:xm.object,items:xm.array,menuStyle:xm.object,onChange:xm.func,onFocus:xm.func,onMenuVisibilityChange:xm.func,onSelect:xm.func,open:xm.bool,renderItem:xm.func.isRequired,renderMenu:xm.func,shouldItemRender:xm.func,sortItems:xm.func,value:xm.any,wrapperProps:xm.object,wrapperStyle:xm.object};let VY=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=FY(this,t,[e])).clickHandlerBound=n.clickHandler.bind(n),n.contextMenuHandlerBound=n.contextMenuHandler.bind(n),n.resizeHandlerBound=n.resizeHandler.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UY(e,t)}(t,e),LY(t,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),o.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){o.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(e){this.popup.contains(e.target)||this.props.onMenuClosed&&this.props.onMenuClosed(e)}},{key:"contextMenuHandler",value:function(e){e.altKey||(e.preventDefault(),this.clickHandler(e))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return i.createElement("div",null)}}])}(i.Component);function GY(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XY(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XY(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}VY.defaultProps={onMenuClosed:ET},VY.propTypes={children:xm.node.isRequired,onMenuClosed:xm.func};let WY=function(){return GY(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.chromInfo=t,this.chromInfoBisector=Rs(e=>e.pos).left},[{key:"scalesToPositionText",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===this.chromInfo||!e||!t)return"";const r=Z_(e.domain()[0],this.chromInfo),i=Z_(e.domain()[1],this.chromInfo),o=Z_(t.domain()[0],this.chromInfo),a=Z_(t.domain()[1],this.chromInfo);let s=null;const l=eh(",d");return s=r[0]!==i[0]?`${r[0]}:${l(Math.floor(r[1]))}-${i[0]}:${l(Math.ceil(i[1]))}`:`${r[0]}:${l(Math.floor(r[1]))}-${l(Math.ceil(i[1]))}`,n&&(o[0]!==a[0]?s+=` & ${o[0]}:${l(Math.floor(o[1]))}-${a[0]}:${l(Math.ceil(a[1]))}`:s+=` & ${o[0]}:${l(Math.floor(o[1]))}-${l(Math.ceil(a[1]))}`),(r[2]<=0||i[2]>0||n&&(o[2]<=0||a[2]>0))&&(s+=` [offset ${r[2]},${i[2]}`,n&&(s+=`:${o[2]},${a[2]}`),s+="]"),s}},{key:"convertNumberNotation",value:function(e){let t=e;if(!t.includes("M",t.length-1)&&!t.includes("K",t.length-1))return t;let n=0,r=0;if(t.includes("M",t.length-1)?(n=6,t=t.replace("M","")):(n=3,t=t.replace("K","")),Number.isNaN(+t))return e;t=(+t).toString(),t.includes(".")&&(r=t.length-1-t.indexOf("."),t=(+t.replace(".","")).toString());const i=n-r;return i<0?e:(t+="0".repeat(i),t)}},{key:"parsePosition",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.split(":");let r=null,i=0;n.length>1?(r=n[0],i=+this.convertNumberNotation(n[1].replace(/,/g,""))):n[0]in this.chromInfo.chrPositions?(r=n[0],i=0,null!==t&&(i=+this.chromInfo.chromLengths[r])):(i=+this.convertNumberNotation(n[0].replace(/,/g,"")),r=null,t&&(r=t));let o=null;return null===r?(r=t,o=i):r in this.chromInfo.chrPositions&&(o=this.chromInfo.chrPositions[r].pos+i),[r,i,o]}},{key:"matchRangesToLarger",value:function(e,t){if(e[1]-e[0]<t[1]-t[0]){const n=t[1]-t[0]-(e[1]-e[0]);return[[e[0]-n/2,e[1]+n/2],t]}const n=e[1]-e[0]-(t[1]-t[0]);return[e,[t[0]-n/2,t[1]+n/2]]}},{key:"getSearchRange",value:function(e){if(0===e.length)return null;let t=e.split("-");t=t.filter(e=>e.length>0);let n=null;if(0===t[0].indexOf("-")&&(t[0]=t[0].slice(3,t[0].length)),t.length>1){let[e,n,r]=this.parsePosition(t[0]),[i,o,a]=this.parsePosition(t[1],e);const s=[r,a];[e,n,r]=this.parsePosition(t[1]),[i,o,a]=this.parsePosition(t[0],e),null===e&&null!==i&&([e,n,r]=this.parsePosition(t[1],i));const l=[r,a];return l[1]-l[0]>s[1]-s[0]?l:s}if(t[0]in this.chromInfo.chrPositions){const e=+this.chromInfo.chrPositions[t[0]].pos;n=[e,e+ +this.chromInfo.chromLengths[t[0]]]}else{const[e,r,i]=this.parsePosition(t[0]);n=[i-8e6,i+8e6]}return n[0]>n[1]?[n[1],n[0]]:n}},{key:"parseOffset",value:function(e){const t=e.split(":");if(0===t.length)return[[0,0],[0,0]];if(1===t.length){const e=t[0].split(",");return[[+e[0],+e[1]],[0,0]]}const n=t[0].split(","),r=t[1].split(",");return[[+n[0],+n[1]],[+r[0],+r[1]]]}},{key:"searchPosition",value:function(e){let t=null,n=null;e=e.trim();const r=/\[offset (.+?)\]/.exec(e);let i=[[0,0],[0,0]];r&&(e=e.replace(r[0],""),i=this.parseOffset(r[1]));const o=e.split(" & ");return o.length>1?(t=this.getSearchRange(o[0].split(" ")[0]),n=this.getSearchRange(o[1].split(" ")[0])):t=this.getSearchRange(o[0]),null!==t&&null!==n&&([t,n]=this.matchRangesToLarger(t,n)),t&&(t[0]+=i[0][0],t[1]+=i[0][1]),n&&(n[0]+=i[1][0],n[1]+=i[1][1]),[t,n]}}])}();const{Provider:YY,Consumer:qY}=i.createContext(XW);function $Y(e){return i.forwardRef((t,n)=>i.createElement(qY,null,r=>i.createElement(e,{ref:n,...t,pubSub:r})))}const KY="_genome-position-search_1l2sx_1",ZY="_genome-position-search-focus_1l2sx_2",QY="_genome-position-search-bar_1l2sx_16",JY="_genome-position-search-dark_1l2sx_34",eq="_genome-position-search-bar-suggestions_1l2sx_83";function tq(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nq(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nq(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function rq(e,t,n){return t=oq(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,iq()?Reflect.construct(t,n||[],oq(e).constructor):t.apply(e,n))}function iq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iq=function(){return!!e})()}function oq(e){return(oq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aq(e,t){return(aq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let sq=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rq(this,t,[e])).mounted=!1,n.uid=a_.nice(),n.chromInfo=null,n.searchField=null,n.autocompleteMenu=null,n.xScale=null,n.yScale=null,n.prevParts=[],n.props.registerViewportChangedListener(n.scalesChanged.bind(n)),n.menuPosition={left:0,top:0},n.currentChromInfoServer=n.props.chromInfoServer,n.currentChromInfoId=n.props.chromInfoId,n.positionText=e.error,n.state={value:n.positionText,loading:!1,menuPosition:[0,0],genes:[],isFocused:!1,menuOpened:!1,availableAssemblies:[],selectedAssembly:null},n.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aq(e,t)}(t,e),tq(t,[{key:"componentDidMount",value:function(){this.mounted=!0,pm(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.fetchChromInfo(this.props.chromInfoServer,this.props.chromInfoId),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"fetchChromInfo",value:function(e,t){if(!t)return this.positionText="no chromosome track present",void this.setState({value:this.positionText});this.mounted&&(this.setState({autocompleteServer:e}),WW(`${e}/chrom-sizes/?id=${t}`,e=>{this.chromInfo=e,this.searchField=new WY(this.chromInfo),this.setPositionText()}))}},{key:"scalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.setPositionText()}},{key:"setPositionText",value:function(){if(!this.mounted||!this.searchField)return;const e=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=e.split(/[ -]/),this.gpsbForm&&(this.positionText=e,this.autocompleteMenu.inputEl.value=e)}},{key:"autocompleteKeyPress",value:function(e){13===e.keyCode&&this.buttonClick()}},{key:"replaceGenesWithLoadedPositions",value:function(e){const t=this.positionText,n=t.split(" ");let r=!1;for(let o=0;o<n.length;o++){const t=n[o].split("-");let i=0,a=0,s="";for(;i<t.length;){for(a=t.length;a>i;){const n=t.slice(i,a).join("-");if(e[n.toLowerCase()]){const o=e[n.toLowerCase()],l=Math.floor((o.txEnd-o.txStart)/4);0===i&&a<t.length?s=`${o.chr}:${o.txStart-l}`:0===i&&a===t.length?s=`${o.chr}:${o.txStart-l}-${o.txEnd+l}`:s+=`- ${o.chr}:${o.txEnd+l}`,r=!0;break}a===i+1&&(s.length&&(s+="-"),s+=n),a-=1}i=a+1}n[o]=s}const i=n.join(" ");return this.prevParts=i.split(/[ -]/),this.positionText=i,this.setState({value:i}),r?t:null}},{key:"replaceGenesWithPositions",value:function(e){const t=this.positionText.split(/[ -]/);let n=kY();for(let r=0;r<t.length;r++){if(0===t[r].length)continue;const[,,e]=this.searchField.parsePosition(t[r]);if(null==e||Number.isNaN(e)){const e=`${this.props.autocompleteServer}/suggest/?d=${this.props.autocompleteId}&ac=${t[r].toLowerCase()}`,i=t=>{VW.json(e,t,this.props.pubSub)};n=n.defer(i)}}n.awaitAll((t,n)=>{if(n){const t={};for(let e=0;e<n.length;e++)if(n[e][0])for(let r=0;r<n[e].length;r++)t[n[e][r].geneName.toLowerCase()]=n[e][r];this.replaceGenesWithLoadedPositions(t),e()}})}},{key:"buttonClick",value:function(){this.setState({genes:[]}),this.replaceGenesWithPositions(()=>{const e=this.positionText;if(null!=this.searchField){let[t,n]=this.searchField.searchPosition(e);if(t&&(Number.isNaN(t[0])||Number.isNaN(t[1]))||n&&(Number.isNaN(n[0])||Number.isNaN(n[1])))return;n||(n=t);const r=this.xScale.copy(),i=this.yScale.copy();t&&(r.domain(t),i.domain(t));const[o,a,s]=ex(r,i);this.props.setCenters(o,a,s,1e3)}})}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(e,t){const n=t||"/",r=new RegExp(`${n}{1,}`,"g");return e.join(n).replace(r,n)}},{key:"onAutocompleteChange",value:function(e,t){this.positionText=t,this.setState({value:t,loading:!0});const n=t.split(/[ -]/);this.changedPart=null;for(let r=0;r<n.length;r++){if(r===this.prevParts.length){this.changedPart=r;break}if(n[r]!==this.prevParts[r]){this.changedPart=r;break}}if(this.prevParts=n,this.props.autocompleteServer&&this.props.autocompleteId&&null!=this.changedPart){this.setState({loading:!0});const e=`${this.props.autocompleteServer}/suggest/?d=${this.props.autocompleteId}&ac=${n[this.changedPart].toLowerCase()}`;VW.json(e,(e,t)=>{e?this.setState({loading:!1,genes:[]}):this.setState({loading:!1,genes:t})},this.props.pubSub)}}},{key:"geneSelected",value:function(e,t){const n=this.positionText.split(" ");let r=this.changedPart;for(let i=0;i<n.length;i++){const e=n[i].split("-");if(!(r>e.length-1)){e[r]=t.geneName,n[i]=e.join("-");break}r-=e.length}this.prevParts=n.join(" ").split(/[ -]/),this.positionText=n.join(" "),this.setState({value:n.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(e,t){const n=t.getBoundingClientRect();this.menuPosition={left:n.left,top:n.top+n.height},this.setState({menuOpened:e})}},{key:"handleRenderMenu",value:function(e){return i.createElement(VY,null,i.createElement("div",{style:{left:this.menuPosition.left,top:this.menuPosition.top},className:eq},e))}},{key:"handleAssemblySelect",value:function(e){this.fetchChromInfo(e),this.setState({selectedAssembly:e})}},{key:"focusHandler",value:function(e){this.setState({isFocused:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(e.chromInfoId!==this.currentChromInfoId||e.chromInfoServer!==this.currentChromInfoServer)&&(this.currentChromInfoId=e.chromInfoId,this.currentChromInfoServer=e.chromInfoServer,this.fetchChromInfo(e.chromInfoServer,e.chromInfoId))}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.gpsbForm=e},className:xs({[ZY]:this.state.isFocused,[KY]:!this.state.isFocused,[JY]:this.props.theme===Ew})},i.createElement(jY,{ref:e=>{this.autocompleteMenu=e},getItemValue:e=>e.geneName,inputProps:{className:QY},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:(e,t)=>this.geneSelected(e,t),onSubmit:this.searchFieldSubmit.bind(this),renderItem:(e,t)=>i.createElement("div",{key:e.geneName,id:e.geneName,style:t?this.styles.highlightedItem:this.styles.item},e.geneName),renderMenu:this.handleRenderMenu.bind(this),value:this.props.error||this.positionText,wrapperStyle:{width:"100%"}}),i.createElement(Uw,{onClick:this.buttonClick.bind(this),theStyle:"multitrack-header-icon"}))}}])}(i.Component);sq.propTypes={autocompleteId:xm.string,autocompleteServer:xm.string,chromInfoId:xm.string,chromInfoServer:xm.string,isFocused:xm.bool,onFocus:xm.func,onSelectedAssemblyChanged:xm.func,registerViewportChangedListener:xm.func,removeViewportChangedListener:xm.func,setCenters:xm.func,theme:xm.string,trackSourceServers:xm.array,twoD:xm.bool};const lq=$Y(sq);var cq,uq,hq=0,pq=0,fq=0,dq=0,mq=0,gq=0,yq="object"==typeof performance&&performance.now?performance:Date,vq="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bq(){return mq||(vq(_q),mq=yq.now()+gq)}function _q(){mq=0}function wq(){this._call=this._time=this._next=null}function Tq(e,t,n){var r=new wq;return r.restart(e,t,n),r}function xq(){mq=(dq=yq.now())+gq,hq=pq=0;try{!function(){bq(),++hq;for(var e,t=cq;t;)(e=mq-t._time)>=0&&t._call.call(null,e),t=t._next;--hq}()}finally{hq=0,function(){for(var e,t,n=cq,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:cq=t);uq=e,Sq(r)}(),mq=0}}function Eq(){var e=yq.now(),t=e-dq;t>1e3&&(gq-=t,dq=e)}function Sq(e){hq||(pq&&(pq=clearTimeout(pq)),e-mq>24?(e<1/0&&(pq=setTimeout(xq,e-yq.now()-gq)),fq&&(fq=clearInterval(fq))):(fq||(dq=yq.now(),fq=setInterval(Eq,1e3)),hq=1,vq(xq)))}function kq(e,t,n){var r=new wq;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}wq.prototype=Tq.prototype={constructor:wq,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?bq():+n)+(null==t?0:+t),!this._next&&uq!==this&&(uq?uq._next=this:cq=this,uq=this),this._call=e,this._time=n,Sq()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sq())}};var Oq=NG("start","end","cancel","interrupt"),Pq=[];function Cq(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,p;if(1!==n.state)return l();for(c in i)if((p=i[c]).name===n.name){if(3===p.state)return kq(a);4===p.state?(p.state=6,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=6,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(kq(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Tq(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Oq,tween:Pq,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Aq(e,t){var n=Iq(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Mq(e,t){var n=Iq(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Iq(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rq(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function Dq(e,t){var n,r;return function(){var i=Mq(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Nq(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Mq(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function jq(e,t,n){var r=e._id;return e.each(function(){var e=Mq(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Iq(e,r).value[t]}}function Lq(e,t){var n;return("number"==typeof t?bu:t instanceof Tc?mu:(n=Tc(t))?(t=n,mu):xu)(e,t)}function Bq(e){return function(){this.removeAttribute(e)}}function Fq(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zq(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Hq(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Uq(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttribute(e):(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function Vq(e,t,n){var r,i,o;return function(){var a,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function Gq(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Xq(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Wq(e,t){return function(){Aq(this,e).delay=+t.apply(this,arguments)}}function Yq(e,t){return t=+t,function(){Aq(this,e).delay=t}}function qq(e,t){return function(){Mq(this,e).duration=+t.apply(this,arguments)}}function $q(e,t){return t=+t,function(){Mq(this,e).duration=t}}var Kq=hm.prototype.constructor;function Zq(e){return function(){this.style.removeProperty(e)}}var Qq=0;function Jq(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function e$(){return++Qq}var t$=hm.prototype;Jq.prototype={constructor:Jq,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ld(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),p=0;p<u;++p)(s=c[p])&&(l=e.call(s,s.__data__,p,c))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,Cq(h[p],t,n,p,h,Iq(s,n)));return new Jq(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=hd(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),d=Iq(l,n),m=0,g=f.length;m<g;++m)(p=f[m])&&Cq(p,t,n,m,f,d);o.push(f),a.push(l)}return new Jq(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=pd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new Jq(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,p=a[s]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(p[f]=l);for(;s<r;++s)a[s]=t[s];return new Jq(a,this._parents,this._name,this._id)},selection:function(){return new Kq(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=e$(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Iq(a,t);Cq(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Jq(r,this._parents,e,n)},call:t$.call,nodes:t$.nodes,node:t$.node,size:t$.size,empty:t$.empty,each:t$.each,on:function(e,t){var n=this._id;return arguments.length<2?Iq(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Aq:Mq;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=rd(e),r="transform"===n?Iu:Lq;return this.attrTween(e,"function"==typeof t?(n.local?Vq:Uq)(n,r,jq(this,"attr."+e,t)):null==t?(n.local?Fq:Bq)(n):(n.local?Hq:zq)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=rd(e);return this.tween(n,(r.local?Gq:Xq)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Mu:Lq;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Dd(this,e),a=(this.style.removeProperty(e),Dd(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Zq(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Dd(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Dd(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,jq(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=Mq(this,e),c=l.on,u=null==l.value[a]?o||(o=Zq(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Dd(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(jq(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Iq(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Dq:Nq)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Wq:Yq)(t,e)):Iq(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?qq:$q)(t,e)):Iq(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Mq(this,e).ease=t}}(t,e)):Iq(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Mq(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=Mq(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&o()})},[Symbol.iterator]:t$[Symbol.iterator]};var n$={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function r$(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}hm.prototype.interrupt=function(e){return this.each(function(){Rq(this,e)})},hm.prototype.transition=function(e){var t,n;e instanceof Jq?(t=e._id,e=e._name):(t=e$(),(n=n$).time=bq(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Cq(a,e,t,c,s,n||r$(a,t));return new Jq(r,this._parents,e,t)};const i$=e=>()=>e;function o$(e,t){let{sourceEvent:n,target:r,selection:i,mode:o,dispatch:a}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function a$(e){e.preventDefault(),e.stopImmediatePropagation()}var s$={name:"drag"},l$={name:"space"},c$={name:"handle"},u$={name:"center"};const{abs:h$,max:p$,min:f$}=Math;function d$(e){return[+e[0],+e[1]]}function m$(e){return[d$(e[0]),d$(e[1])]}var g$={name:"x",handles:["w","e"].map(E$),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},y$={name:"y",handles:["n","s"].map(E$),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},v$={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(E$),input:function(e){return null==e?null:m$(e)},output:function(e){return e}},b$={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_$={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},w$={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},T$={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},x$={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function E$(e){return{type:e}}function S$(e){return!e.ctrlKey&&!e.button}function k$(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function O$(){return navigator.maxTouchPoints||"ontouchstart"in this}function P$(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function C$(){return I$(g$)}function A$(){return I$(y$)}function M$(){return I$(v$)}function I$(e){var t,n=k$,r=S$,i=O$,o=!0,a=NG("start","brush","end"),s=6;function l(t){var n=t.property("__brush",m).selectAll(".overlay").data([E$("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",b$.overlay).merge(n).each(function(){var e=P$(this).extent;pm(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([E$("selection")]).enter().append("rect").attr("class","selection").attr("cursor",b$.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return b$[e.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var e=pm(this),t=P$(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-s/2:t[0][0]-s/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-s/2:t[0][1]-s/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+s:s}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+s:s})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(e,t,n){var r=e.__brush.emitter;return!r||n&&r.clean?new h(e,t,n):r}function h(e,t,n){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=n}function p(n){if((!t||n.touches)&&r.apply(this,arguments)){var i,a,s,l,h,p,f,d,m,g,y,v=this,b=n.target.__data__.type,_="selection"===(o&&n.metaKey?b="overlay":b)?s$:o&&n.altKey?u$:c$,w=e===y$?null:T$[b],T=e===g$?null:x$[b],x=P$(v),E=x.extent,S=x.selection,k=E[0][0],O=E[0][1],P=E[1][0],C=E[1][1],A=0,M=0,I=w&&T&&o&&n.shiftKey,R=Array.from(n.touches||[n],e=>{const t=e.identifier;return(e=ym(e,v)).point0=e.slice(),e.identifier=t,e});if("overlay"===b){S&&(m=!0);const t=[R[0],R[1]||R[0]];x.selection=S=[[i=e===y$?k:f$(t[0][0],t[1][0]),s=e===g$?O:f$(t[0][1],t[1][1])],[h=e===y$?P:p$(t[0][0],t[1][0]),f=e===g$?C:p$(t[0][1],t[1][1])]],R.length>1&&F()}else i=S[0][0],s=S[0][1],h=S[1][0],f=S[1][1];a=i,l=s,p=h,d=f;var D=pm(v).attr("pointer-events","none"),N=D.selectAll(".overlay").attr("cursor",b$[b]);Rq(v);var j=u(v,arguments,!0).beforestart();if(n.touches)j.moved=B,j.ended=z;else{var L=pm(n.view).on("mousemove.brush",B,!0).on("mouseup.brush",z,!0);o&&L.on("keydown.brush",function(e){switch(e.keyCode){case 16:I=w&&T;break;case 18:_===c$&&(w&&(h=p-A*w,i=a+A*w),T&&(f=d-M*T,s=l+M*T),_=u$,F());break;case 32:(_===c$||_===u$)&&(w<0?h=p-A:w>0&&(i=a-A),T<0?f=d-M:T>0&&(s=l-M),_=l$,N.attr("cursor",b$.selection),F());break;default:return}a$(e)},!0).on("keyup.brush",function(e){switch(e.keyCode){case 16:I&&(g=y=I=!1,F());break;case 18:_===u$&&(w<0?h=p:w>0&&(i=a),T<0?f=d:T>0&&(s=l),_=c$,F());break;case 32:_===l$&&(e.altKey?(w&&(h=p-A*w,i=a+A*w),T&&(f=d-M*T,s=l+M*T),_=u$):(w<0?h=p:w>0&&(i=a),T<0?f=d:T>0&&(s=l),_=c$),N.attr("cursor",b$[b]),F());break;default:return}a$(e)},!0),HG(n.view)}c.call(v),j.start(n,_.name)}function B(e){for(const t of e.changedTouches||[e])for(const e of R)e.identifier===t.identifier&&(e.cur=ym(t,v));if(I&&!g&&!y&&1===R.length){const e=R[0];h$(e.cur[0]-e[0])>h$(e.cur[1]-e[1])?y=!0:g=!0}for(const t of R)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,a$(e),F(e)}function F(e){const t=R[0],n=t.point0;var r;switch(A=t[0]-n[0],M=t[1]-n[1],_){case l$:case s$:w&&(A=p$(k-i,f$(P-h,A)),a=i+A,p=h+A),T&&(M=p$(O-s,f$(C-f,M)),l=s+M,d=f+M);break;case c$:R[1]?(w&&(a=p$(k,f$(P,R[0][0])),p=p$(k,f$(P,R[1][0])),w=1),T&&(l=p$(O,f$(C,R[0][1])),d=p$(O,f$(C,R[1][1])),T=1)):(w<0?(A=p$(k-i,f$(P-i,A)),a=i+A,p=h):w>0&&(A=p$(k-h,f$(P-h,A)),a=i,p=h+A),T<0?(M=p$(O-s,f$(C-s,M)),l=s+M,d=f):T>0&&(M=p$(O-f,f$(C-f,M)),l=s,d=f+M));break;case u$:w&&(a=p$(k,f$(P,i-A*w)),p=p$(k,f$(P,h+A*w))),T&&(l=p$(O,f$(C,s-M*T)),d=p$(O,f$(C,f+M*T)))}p<a&&(w*=-1,r=i,i=h,h=r,r=a,a=p,p=r,b in _$&&N.attr("cursor",b$[b=_$[b]])),d<l&&(T*=-1,r=s,s=f,f=r,r=l,l=d,d=r,b in w$&&N.attr("cursor",b$[b=w$[b]])),x.selection&&(S=x.selection),g&&(a=S[0][0],p=S[1][0]),y&&(l=S[0][1],d=S[1][1]),(S[0][0]!==a||S[0][1]!==l||S[1][0]!==p||S[1][1]!==d)&&(x.selection=[[a,l],[p,d]],c.call(v),j.brush(e,_.name))}function z(e){if(function(e){e.stopImmediatePropagation()}(e),e.touches){if(e.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500)}else UG(e.view,m),L.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),N.attr("cursor",b$.overlay),x.selection&&(S=x.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}(S)&&(x.selection=null,c.call(v)),j.end(e,_.name)}}function f(e){u(this,arguments).moved(e)}function d(e){u(this,arguments).ended(e)}function m(){var t=this.__brush||{selection:null};return t.extent=m$(n.apply(this,arguments)),t.dim=e,t}return l.move=function(t,n){t.tween?t.on("start.brush",function(e){u(this,arguments).beforestart().start(e)}).on("interrupt.brush end.brush",function(e){u(this,arguments).end(e)}).tween("brush",function(){var t=this,r=t.__brush,i=u(t,arguments),o=r.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Eu(o,a);function l(e){r.selection=1===e&&null===a?null:s(e),c.call(t),i.brush()}return null!==o&&null!==a?l:l(1)}):t.each(function(){var t=this,r=arguments,i=t.__brush,o=e.input("function"==typeof n?n.apply(t,r):n,i.extent),a=u(t,r).beforestart();Rq(t),i.selection=null===o?null:o,c.call(t),a.start().brush().end()})},l.clear=function(e){l.move(e,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(e,t){return this.starting?(this.starting=!1,this.emit("start",e,t)):this.emit("brush",e),this},brush:function(e,t){return this.emit("brush",e,t),this},end:function(e,t){return 0===--this.active&&(delete this.state.emitter,this.emit("end",e,t)),this},emit:function(t,n,r){var i=pm(this.that).datum();a.call(t,this.that,new o$(t,{sourceEvent:n,target:l,selection:e.output(this.state.selection),mode:r,dispatch:a}),i)}},l.extent=function(e){return arguments.length?(n="function"==typeof e?e:i$(m$(e)),l):n},l.filter=function(e){return arguments.length?(r="function"==typeof e?e:i$(!!e),l):r},l.touchable=function(e){return arguments.length?(i="function"==typeof e?e:i$(!!e),l):i},l.handleSize=function(e){return arguments.length?(s=+e,l):s},l.keyModifiers=function(e){return arguments.length?(o=!!e,l):o},l.on=function(){var e=a.on.apply(a,arguments);return e===a?l:e},l}const R$=Object.freeze(Object.defineProperty({__proto__:null,brush:M$,brushSelection:function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},brushX:C$,brushY:A$},Symbol.toStringTag,{value:"Module"}));function D$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N$(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N$(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function j$(e,t,n){return t=B$(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L$()?Reflect.construct(t,n||[],B$(e).constructor):t.apply(e,n))}function L$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L$=function(){return!!e})()}function B$(e){return(B$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F$(e,t){return(F$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let z$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j$(this,t,[e])).DATATYPE_TO_TRACK_TYPE=Ww(n.props.orientation),n.AVAILABLE_TRACK_TYPES=Zw(n.props.datatypes,n.props.orientation),n.state={selectedPlotType:n.AVAILABLE_TRACK_TYPES[0]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F$(e,t)}(t,e),D$(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.AVAILABLE_TRACK_TYPES=Zw(e.datatypes,this.props.orientation),this.AVAILABLE_TRACK_TYPES&&e.allTracksSameDatatype&&this.AVAILABLE_TRACK_TYPES.length>0&&!this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)){const t=lT(e.datatypes[0][0],this.props.position,this.AVAILABLE_TRACK_TYPES);this.handlePlotTypeSelected(t)}}},{key:"handlePlotTypeSelected",value:function(e){this.setState({selectedPlotType:e}),this.props.onPlotTypeSelected(e.type)}},{key:"render",value:function(){let e="No plot types available for track";const t={};return Xw.forEach(e=>{t[e.type]=e}),this.AVAILABLE_TRACK_TYPES&&(e=this.AVAILABLE_TRACK_TYPES.sort((e,t)=>e.type<t.type).map(e=>{const n=t[e.type].thumbnail,r=this.state.selectedPlotType.type===e.type?"plot-type-item plot-type-selected":"plot-type-item",o=t[e.type].thumbnail?i.createElement("div",{className:"track-thumbnail",dangerouslySetInnerHTML:{__html:n.outerHTML}}):i.createElement("div",{className:"track-thumbnail"},i.createElement("svg",{height:20,width:30}));return i.createElement("li",{key:e.type,className:r,onClick:t=>{this.setState({selectedPlotType:e}),this.props.onPlotTypeSelected(e.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},o,i.createElement("span",{style:{verticalAlign:"middle"}},e.type))})),i.createElement("div",null,e.length>0&&this.props.allTracksSameDatatype&&i.createElement("div",{className:"plot-type-container"},e),!this.props.allTracksSameDatatype&&i.createElement("div",{className:"plot-type-container-empty"},"Datasets with multiple datatypes chosen. They will be added with their default track types."))}}])}(i.Component);z$.propTypes={allTracksSameDatatype:xm.bool,datatypes:xm.array,orientation:xm.string,onPlotTypeSelected:xm.func,position:xm.string};var H$={exports:{}};!function(e){var t;self,t=e=>(()=>{var t={4184:(e,t)=>{var n;!function(){var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8552:(e,t,n)=>{var r=n(852)(n(5639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(1789),i=n(401),o=n(7667),a=n(1327),s=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},8407:(e,t,n)=>{var r=n(7040),i=n(4125),o=n(2117),a=n(7518),s=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),i=n(1285),o=n(6e3),a=n(9916),s=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},3818:(e,t,n)=>{var r=n(852)(n(5639),"Promise");e.exports=r},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),i=n(619),o=n(2385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},6384:(e,t,n)=>{var r=n(8407),i=n(7465),o=n(3779),a=n(7599),s=n(4758),l=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},1149:(e,t,n)=>{var r=n(5639).Uint8Array;e.exports=r},577:(e,t,n)=>{var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},4636:(e,t,n)=>{var r=n(2545),i=n(5694),o=n(1469),a=n(4144),s=n(5776),l=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),p=!n&&!u&&!h&&l(e),f=n||u||h||p,d=f?r(e.length,String):[],m=d.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||d.push(g);return d}},2488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:(e,t,n)=>{var r=n(2488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},4239:(e,t,n)=>{var r=n(2705),i=n(9607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},9454:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:(e,t,n)=>{var r=n(2492),i=n(7005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(6384),i=n(7114),o=n(8351),a=n(6096),s=n(4160),l=n(1469),c=n(4144),u=n(6719),h="[object Arguments]",p="[object Array]",f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),_=v?p:s(e),w=b?p:s(t),T=(_=_==h?f:_)==f,x=(w=w==h?f:w)==f,E=_==w;if(E&&c(e)){if(!c(t))return!1;v=!0,T=!1}if(E&&!T)return y||(y=new r),v||u(e)?i(e,t,n,m,g,y):o(e,t,_,n,m,g,y);if(!(1&n)){var S=T&&d.call(e,"__wrapped__"),k=x&&d.call(t,"__wrapped__");if(S||k){var O=S?e.value():e,P=k?t.value():t;return y||(y=new r),g(O,P,n,m,y)}}return!!E&&(y||(y=new r),a(e,t,n,m,g,y))}},8458:(e,t,n)=>{var r=n(3560),i=n(5346),o=n(3218),a=n(346),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,p=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:s).test(a(e))}},8749:(e,t,n)=>{var r=n(4239),i=n(1780),o=n(7005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},280:(e,t,n)=>{var r=n(5726),i=n(6916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},7114:(e,t,n)=>{var r=n(8668),i=n(2908),o=n(4757);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var p=l.get(e),f=l.get(t);if(p&&f)return p==t&&f==e;var d=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++d<u;){var y=e[d],v=t[d];if(a)var b=c?a(v,y,d,t,e,l):a(y,v,d,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,function(e,t){if(!o(g,t)&&(y===e||s(y,e,n,a,l)))return g.push(t)})){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},8351:(e,t,n)=>{var r=n(2705),i=n(1149),o=n(7813),a=n(7114),s=n(8776),l=n(1814),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var d=1&r;if(f||(f=l),e.size!=t.size&&!d)return!1;var m=p.get(e);if(m)return m==t;r|=2,p.set(e,t);var g=a(f(e),f(t),r,c,h,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:(e,t,n)=>{var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var p=c[h];if(!(l?p in t:i.call(t,p)))return!1}var f=s.get(e),d=s.get(t);if(f&&d)return f==t&&d==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var y=e[p=c[h]],v=t[p];if(o)var b=l?o(v,y,p,t,e,s):o(y,v,p,e,t,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:(e,t,n)=>{var r=n(8866),i=n(9551),o=n(3674);e.exports=function(e){return r(e,o,i)}},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch{}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9551:(e,t,n)=>{var r=n(4963),i=n(479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return o.call(e,t)}))}:i;e.exports=s},4160:(e,t,n)=>{var r=n(8552),i=n(7071),o=n(3818),a=n(8525),s=n(577),l=n(4239),c=n(346),u="[object Map]",h="[object Promise]",p="[object Set]",f="[object WeakMap]",d="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(a),b=c(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=d||i&&_(new i)!=u||o&&_(o.resolve())!=h||a&&_(new a)!=p||s&&_(new s)!=f)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return d;case g:return u;case y:return h;case v:return p;case b:return f}return t}),e.exports=_},7801:e=>{e.exports=function(e,t){return e?.[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=n??9007199254740991)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,i=n(4429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),i=n(8407),o=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},6916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},1167:(e,t,n)=>{e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},7465:(e,t,n)=>{var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,n)=>{var r=n(8407),i=n(7071),o=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch{}try{return e+""}catch{}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,n)=>{var r=n(9454),i=n(7005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:(e,t,n)=>{e=n.nmd(e);var r=n(5639),i=n(5062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},8446:(e,t,n)=>{var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:(e,t,n)=>{var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6719:(e,t,n)=>{var r=n(8749),i=n(1717),o=n(1167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(4636),i=n(280),o=n(8612);e.exports=function(e){return o(e)?r(e):i(e)}},8306:(e,t,n)=>{var r=n(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},2703:(e,t,n)=>{var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9787:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e](o,o.exports,r),o.loaded=!0,o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};return(()=>{r.r(i),r.d(i,{default:()=>ce,expandNodesToLevel:()=>le});var e=r(4184),t=r.n(e),n=r(8446),o=r.n(n),a=r(8306),s=r.n(a);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")};var c=r(5697),u=r.n(c),h=r(9787),p=r.n(h);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["children","title"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var e,t=y(r);if(i){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,d);return p().createElement("button",m({"aria-label":n,title:n,type:"button"},r),t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().PureComponent);v(b,"propTypes",{children:u().node.isRequired,title:u().string}),v(b,"defaultProps",{title:null});const _=b,w={ALL:"all",PARENT:"parent",LEAF:"leaf"};function T(e){this.message=e,this.stack=Error().stack}T.prototype=Object.create(Error.prototype),T.prototype.name="CheckboxTreeError";const x=T;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=w;const O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.props=t,this.flatNodes=n}var t,n;return t=e,n=[{key:"setProps",value:function(e){this.props=e}},{key:"clone",value:function(){var t=this,n={};return Object.keys(this.flatNodes).forEach(function(e){var r=t.flatNodes[e];n[e]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r)}),new e(this.props,n)}},{key:"getNode",value:function(e){return this.flatNodes[e]}},{key:"reset",value:function(){this.flatNodes={}}},{key:"flattenNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(e)&&0!==e.length){var i=this.props,o=i.disabled,a=i.noCascade;e.forEach(function(e,i){var s=t.nodeHasChildren(e);if(void 0!==t.flatNodes[e.value])throw new x("Duplicate value '".concat(e.value,"' detected. All node values must be unique."));t.flatNodes[e.value]={label:e.label,value:e.value,children:e.children,parent:n,isChild:void 0!==n.value,isParent:s,isLeaf:!s,showCheckbox:void 0===e.showCheckbox||e.showCheckbox,disabled:t.getDisabledState(e,n,o,a),treeDepth:r,index:i},t.flattenNodes(e.children,e,r+1)})}}},{key:"nodeHasChildren",value:function(e){return Array.isArray(e.children)}},{key:"getDisabledState",value:function(e,t,n,r){return!!n||!(r||!t.disabled)||!!e.disabled}},{key:"deserializeLists",value:function(e){var t=this,n=["checked","expanded"];Object.keys(this.flatNodes).forEach(function(e){n.forEach(function(n){t.flatNodes[e][n]=!1})}),n.forEach(function(n){e[n].forEach(function(e){void 0!==t.flatNodes[e]&&(t.flatNodes[e][n]=!0)})})}},{key:"serializeList",value:function(e){var t=this,n=[];return Object.keys(this.flatNodes).forEach(function(r){t.flatNodes[r][e]&&n.push(r)}),n}},{key:"expandAllNodes",value:function(e){var t=this;return Object.keys(this.flatNodes).forEach(function(n){t.flatNodes[n].isParent&&(t.flatNodes[n].expanded=e)}),this}},{key:"toggleChecked",value:function(e,t,n,r){var i=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.flatNodes[e.value],s=[k.PARENT,k.ALL].indexOf(n)>-1,l=[k.LEAF,k.ALL].indexOf(n)>-1;if(a.isLeaf||r){if(e.disabled)return this;this.toggleNode(e.value,"checked",t)}else(s||0===a.children.length)&&this.toggleNode(e.value,"checked",t),l&&a.children.forEach(function(e){i.toggleChecked(e,t,n,r,!1)});return o&&!r&&a.isChild&&s&&this.toggleParentStatus(a.parent,n),this}},{key:"toggleParentStatus",value:function(e,t){var n=this.flatNodes[e.value];n.isChild?(t===k.ALL&&this.toggleNode(e.value,"checked",this.isEveryChildChecked(n)),this.toggleParentStatus(n.parent,t)):this.toggleNode(e.value,"checked",this.isEveryChildChecked(n))}},{key:"isEveryChildChecked",value:function(e){var t=this;return e.children.every(function(e){return t.getNode(e.value).checked})}},{key:"toggleNode",value:function(e,t,n){return this.flatNodes[e][t]=n,this}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e,t){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var e,t=I(r);if(i){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.apply(this,arguments)}return t=a,n=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var e=this.props.indeterminate;this.checkbox.indeterminate=e}},{key:"render",value:function(){var e=this,t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){R(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.props);return delete t.indeterminate,p().createElement("input",C({},t,{ref:function(t){e.checkbox=t},type:"checkbox"}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().PureComponent);R(D,"propTypes",{indeterminate:u().bool}),R(D,"defaultProps",{indeterminate:!1});const N=D,j=u().shape({check:u().node,uncheck:u().node,halfCheck:u().node,expandClose:u().node,expandOpen:u().node,expandAll:u().node,collapseAll:u().node,parentClose:u().node,parentOpen:u().node,leaf:u().node}),L=u().shape({collapseAll:u().string.isRequired,expandAll:u().string.isRequired,toggle:u().string.isRequired});function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(s,e);var n,r,i,o,a=(i=s,o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var e,t=H(i);if(o){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).onCheck=t.onCheck.bind(z(t)),t.onCheckboxKeyPress=t.onCheckboxKeyPress.bind(z(t)),t.onCheckboxKeyUp=t.onCheckboxKeyUp.bind(z(t)),t.onClick=t.onClick.bind(z(t)),t.onExpand=t.onExpand.bind(z(t)),t}return n=s,(r=[{key:"onCheck",value:function(){var e=this.props,t=e.value;(0,e.onCheck)({value:t,checked:this.getCheckState({toggle:!0})})}},{key:"onCheckboxKeyPress",value:function(e){32===e.which&&e.preventDefault()}},{key:"onCheckboxKeyUp",value:function(e){var t=e.keyCode;[13,32].includes(t)&&this.onCheck()}},{key:"onClick",value:function(){var e=this.props,t=e.expandOnClick,n=e.isParent,r=e.value,i=e.onClick;n&&t&&this.onExpand(),i({value:r,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var e=this.props,t=e.expanded,n=e.value;(0,e.onExpand)({value:n,expanded:!t})}},{key:"getCheckState",value:function(e){var t=e.toggle,n=this.props,r=n.checked,i=n.optimisticToggle;return!(0!==r||!t)||1===r&&!t||2===r&&i}},{key:"renderCollapseButton",value:function(){var e=this.props,t=e.expandDisabled,n=e.isLeaf,r=e.lang;return n?p().createElement("span",{className:"rct-collapse"},p().createElement("span",{className:"rct-icon"})):p().createElement(_,{className:"rct-collapse rct-collapse-btn",disabled:t,title:r.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var e=this.props,t=e.expanded,n=e.icons,r=n.expandClose,i=n.expandOpen;return t?i:r}},{key:"renderCheckboxIcon",value:function(){var e=this.props,t=e.checked,n=e.icons,r=n.uncheck,i=n.check,o=n.halfCheck;return 0===t?r:1===t?i:o}},{key:"renderNodeIcon",value:function(){var e=this.props,t=e.expanded,n=e.icon,r=e.icons,i=r.leaf,o=r.parentClose,a=r.parentOpen,s=e.isLeaf;return null!==n?n:s?i:t?a:o}},{key:"renderBareLabel",value:function(e){var t=this.props,n=t.onClick,r=t.title,i=null!==n;return p().createElement("span",{className:"rct-bare-label",title:r},i?p().createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},e):e)}},{key:"renderCheckboxLabel",value:function(e){var t=this.props,n=t.checked,r=t.disabled,i=t.title,o=t.treeId,a=t.value,s=null!==t.onClick,l="".concat(o,"-").concat(String(a).split(" ").join("_")),c=[p().createElement("label",{key:0,htmlFor:l,title:i},p().createElement(N,{checked:1===n,disabled:r,id:l,indeterminate:2===n,onClick:this.onCheck,onChange:function(){}}),p().createElement("span",{"aria-checked":1===n,"aria-disabled":r,className:"rct-checkbox",role:"checkbox",tabIndex:0,onKeyPress:this.onCheckboxKeyPress,onKeyUp:this.onCheckboxKeyUp},this.renderCheckboxIcon()),s?null:e)];return s&&c.push(p().createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},e)),c}},{key:"renderLabel",value:function(){var e=this.props,t=e.label,n=e.showCheckbox,r=[e.showNodeIcon?p().createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,p().createElement("span",{key:1,className:"rct-title"},t)];return n?this.renderCheckboxLabel(r):this.renderBareLabel(r)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.disabled,i=e.expanded,o=e.isLeaf,a=t()({"rct-node":!0,"rct-node-leaf":o,"rct-node-parent":!o,"rct-node-expanded":!o&&i,"rct-node-collapsed":!o&&!i,"rct-disabled":r},n);return p().createElement("li",{className:a},p().createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),s}(p().PureComponent);U(V,"propTypes",{checked:u().number.isRequired,disabled:u().bool.isRequired,expandDisabled:u().bool.isRequired,expanded:u().bool.isRequired,icons:j.isRequired,isLeaf:u().bool.isRequired,isParent:u().bool.isRequired,label:u().node.isRequired,lang:L.isRequired,optimisticToggle:u().bool.isRequired,showNodeIcon:u().bool.isRequired,treeId:u().string.isRequired,value:u().oneOfType([u().string,u().number]).isRequired,onCheck:u().func.isRequired,onExpand:u().func.isRequired,children:u().node,className:u().string,expandOnClick:u().bool,icon:u().node,showCheckbox:u().bool,title:u().string,onClick:u().func}),U(V,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});const G=V,X=u().oneOfType([u().arrayOf(u().string),u().arrayOf(u().number)]);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){q(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $={label:u().node.isRequired,value:u().oneOfType([u().string,u().number]).isRequired,disabled:u().bool,icon:u().node,showCheckbox:u().bool,title:u().string};const K=u().oneOfType([u().shape($),u().shape(Y(Y({},$),{},{children:u().arrayOf($).isRequired}))]);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){ie(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(h,e);var n,r,i,a,c,u=(a=h,c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var e,t=re(a);if(c){var n=re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,e)});function h(e){var t;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,h),t=u.call(this,e);var n=new O(e);return n.flattenNodes(e.nodes),n.deserializeLists({checked:e.checked,expanded:e.expanded}),t.state={id:e.id||"rct-".concat(l()),model:n,prevProps:e},t.onCheck=t.onCheck.bind(ne(t)),t.onExpand=t.onExpand.bind(ne(t)),t.onNodeClick=t.onNodeClick.bind(ne(t)),t.onExpandAll=t.onExpandAll.bind(ne(t)),t.onCollapseAll=t.onCollapseAll.bind(ne(t)),t.combineMemorized=s()(function(e,t){return J(J({},e),t)}).bind(ne(t)),t}return n=h,r=[{key:"onCheck",value:function(e){var t=this.props,n=t.checkModel,r=t.noCascade,i=t.onCheck,o=this.state.model.clone(),a=o.getNode(e.value);o.toggleChecked(e,e.checked,n,r),i(o.serializeList("checked"),J(J({},a),e))}},{key:"onExpand",value:function(e){var t=this.props.onExpand,n=this.state.model.clone(),r=n.getNode(e.value);n.toggleNode(e.value,"expanded",e.expanded),t(n.serializeList("expanded"),J(J({},r),e))}},{key:"onNodeClick",value:function(e){(0,this.props.onClick)(J(J({},this.state.model.getNode(e.value)),e))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(0,this.props.onExpand)(this.state.model.clone().expandAllNodes(e).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(e,t){var n=this.state.model.getNode(e.value);return n.isLeaf||t||0===e.children.length?n.checked?1:0:this.isEveryChildChecked(e)?1:this.isSomeChildChecked(e)?2:0}},{key:"isEveryChildChecked",value:function(e){var t=this;return e.children.every(function(e){return 1===t.state.model.getNode(e.value).checkState})}},{key:"isSomeChildChecked",value:function(e){var t=this;return e.children.some(function(e){return t.state.model.getNode(e.value).checkState>0})}},{key:"renderTreeNodes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props,i=r.expandDisabled,o=r.expandOnClick,a=r.icons,s=r.lang,l=r.noCascade,c=r.onClick,u=r.onlyLeafCheckboxes,f=r.optimisticToggle,d=r.showNodeTitle,m=r.showNodeIcon,g=this.state,y=g.id,v=g.model,b=h.defaultProps.icons,_=e.map(function(e){var r=e.value,h=v.getNode(e.value),g=h.isParent?t.renderTreeNodes(e.children,e):null;h.checkState=t.determineShallowCheckState(e,l);var _=u?h.isLeaf:h.showCheckbox;return!n.value||v.getNode(n.value).expanded?p().createElement(G,{key:r,checked:h.checkState,className:e.className,disabled:h.disabled,expandDisabled:i,expandOnClick:o,expanded:h.expanded,icon:e.icon,icons:t.combineMemorized(b,a),label:e.label,lang:s,optimisticToggle:f,isLeaf:h.isLeaf,isParent:h.isParent,showCheckbox:_,showNodeIcon:m,title:d?e.title||e.label:e.title,treeId:y,value:e.value,onCheck:t.onCheck,onClick:c&&t.onNodeClick,onExpand:t.onExpand},g):null});return p().createElement("ol",null,_)}},{key:"renderExpandAll",value:function(){var e=this.props,t=e.icons,n=t.expandAll,r=t.collapseAll,i=e.lang;return e.showExpandAll?p().createElement("div",{className:"rct-options"},p().createElement(_,{className:"rct-option rct-option-expand-all",title:i.expandAll,onClick:this.onExpandAll},n),p().createElement(_,{className:"rct-option rct-option-collapse-all",title:i.collapseAll,onClick:this.onCollapseAll},r)):null}},{key:"renderHiddenInput",value:function(){var e=this.props,t=e.name,n=e.nameAsArray;return void 0===t?null:n?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name;return t.map(function(e){var t="".concat(n,"[]");return p().createElement("input",{key:e,name:t,type:"hidden",value:e})})}},{key:"renderJoinedHiddenInput",value:function(){var e=this.props,t=e.checked,n=e.name,r=t.join(",");return p().createElement("input",{name:n,type:"hidden",value:r})}},{key:"render",value:function(){var e,n=this.props,r=n.direction,i=n.disabled,o=n.iconsClass,a=n.nodes,s=n.nativeCheckboxes,l=this.state.id,c=this.renderTreeNodes(a),u=t()((ie(e={"react-checkbox-tree":!0,"rct-disabled":i},"rct-icons-".concat(o),!0),ie(e,"rct-native-display",s),ie(e,"rct-direction-rtl","rtl"===r),e));return p().createElement("div",{className:u,id:l},this.renderExpandAll(),this.renderHiddenInput(),c)}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.model,r=t.prevProps,i=e.disabled,a=e.id,s=e.nodes,l=J(J({},t),{},{prevProps:e});return n.setProps(e),o()(r.nodes,s)&&r.disabled===i||(n.reset(),n.flattenNodes(s)),null!==a&&(l=J(J({},l),{},{id:a})),n.deserializeLists({checked:e.checked,expanded:e.expanded}),l}}],r&&ee(n.prototype,r),i&&ee(n,i),Object.defineProperty(n,"prototype",{writable:!1}),h}(p().Component);function ae(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>t)return[];var r=[];return e.forEach(function(e){e.children&&(r=[].concat(ae(r),[e.value],ae(le(e.children,t,n+1))))}),r}ie(oe,"propTypes",{nodes:u().arrayOf(K).isRequired,checkModel:u().oneOf([w.LEAF,w.ALL]),checked:X,direction:u().string,disabled:u().bool,expandDisabled:u().bool,expandOnClick:u().bool,expanded:X,icons:j,iconsClass:u().string,id:u().string,lang:L,name:u().string,nameAsArray:u().bool,nativeCheckboxes:u().bool,noCascade:u().bool,onlyLeafCheckboxes:u().bool,optimisticToggle:u().bool,showExpandAll:u().bool,showNodeIcon:u().bool,showNodeTitle:u().bool,onCheck:u().func,onClick:u().func,onExpand:u().func}),ie(oe,"defaultProps",{checkModel:w.LEAF,checked:[],direction:"ltr",disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:p().createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:p().createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:p().createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:p().createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:p().createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:p().createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:p().createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:p().createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:p().createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:p().createElement("span",{className:"rct-icon rct-icon-leaf"})},iconsClass:"fa4",id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});const ce=oe})(),i})(),e.exports=t(i)}(H$);const U$=ks(H$.exports);function V$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G$(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G$(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function X$(e,t,n){return t=Y$(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W$()?Reflect.construct(t,n||[],Y$(e).constructor):t.apply(e,n))}function W$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W$=function(){return!!e})()}function Y$(e){return(Y$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q$(e,t){return(q$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let K$=function(e){function t(e){var n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(n=X$(this,t,[e])).localTracks=Xw.filter(e=>e.local&&!e.hidden).map(e=>{const t={...e};return t.datatype=e.datatype[0],t}),n.augmentedTracksInfo=Xw,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(e=>{n.augmentedTracksInfo.push(window.higlassTracksByType[e].config)}),e.datatype?n.localTracks=n.localTracks.filter(t=>t.datatype[0]===e.datatype):n.localTracks=n.localTracks.filter(e=>e.orientation===n.props.orientation),n.localTracks.forEach(e=>{e.uuid=a_.nice()});const r=n.prepareNewEntries("",n.localTracks,{}),i=Object.keys(r),o=i.length?[i[0]]:null;return n.mounted=!1,n.state={selectedUuid:o,options:r,filter:"",checked:[],expanded:[]},n.requestTilesetLists(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q$(e,t)}(t,e),V$(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.requestTilesetLists(),this.searchBox.focus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"prepareNewEntries",value:function(e,t,n){const r=n;return t.map(t=>({...t,server:e,tilesetUid:t.uuid,serverUidKey:this.serverUidKey(e,t.uuid),datatype:t.datatype,name:t.name,uid:a_.nice()})).forEach(e=>{r[e.serverUidKey]=e}),r}},{key:"serverUidKey",value:function(e,t){return`${e}/${t}`}},{key:"requestTilesetLists",value:function(){let e=null;e=this.props.datatype?`dt=${this.props.datatype}`:[...new Set([].concat(...this.augmentedTracksInfo.filter(e=>e.datatype).filter(e=>e.orientation===this.props.orientation||"1d-vertical"===this.props.orientation&&"1d-horizontal"===e.orientation).map(e=>e.datatype)))].map(e=>`dt=${e}`).join("&"),this.props.trackSourceServers?this.props.trackSourceServers.forEach(t=>{VW.json(`${t}/tilesets/?limit=10000&${e}`,(e,n)=>{if(e)console.error("ERROR:",e);else{const e=this.prepareNewEntries(t,n.results,this.state.options),r=Object.keys(e);let{selectedUuid:i}=this.state;if(!i){i=r.length?[r[0]]:null;const e=this.state.options[i[0]];this.props.selectedTilesetChanged([e])}this.mounted&&this.setState({selectedUuid:i,options:e})}},this.props.pubSub)}):console.warn("No track source servers specified in the viewconf")}},{key:"handleOptionDoubleClick",value:function(e){const t=this.state.options[e.target.value];this.props.onDoubleClick(t)}},{key:"handleSelectedOptions",value:function(e){const t=[],n=[];for(let r=0;r<e.length;r++)t.push(e[r]),n.push(this.state.options[e[r]]);this.props.selectedTilesetChanged(n),this.setState({selectedUuid:t})}},{key:"handleSelect",value:function(){const{selectedOptions:e}=this.multiSelect,t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r.value)}this.handleSelectedOptions(t)}},{key:"handleSearchChange",value:function(){const e=this.searchBox;this.setState({filter:e.value})}},{key:"partitionByGroup",value:function(e,t){const n={"":{name:"",value:"",children:[]}};for(const i of Object.keys(e)){const r=e[i];if(r.name.toLowerCase().includes(t))if("project_name"in r){const e=r.project_name;e in n||(n[e]={value:e,label:e,children:[]}),n[e].children.push({label:r.name,value:i})}else n[""].children.push({label:r.name,value:i})}const r=n[""].children;for(const i of Object.keys(n))""!==i&&(n[i].children.sort((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase(),"en")),r.push(n[i]));return r.sort((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase(),"en")),r}},{key:"handleChecked",value:function(e){this.handleSelectedOptions(e),this.setState({checked:e})}},{key:"handleExpanded",value:function(e){this.setState({expanded:e})}},{key:"render",value:function(){const e=[];for(const i in this.state.options)e.push(this.state.options[i]);const t=this.partitionByGroup(this.state.options,this.state.filter),n={width:15,height:15,top:2,right:2,position:"relative"},r=JSON.parse(JSON.stringify(n));r.opacity=.5;const o=i.createElement("form",{onSubmit:e=>{e.preventDefault()}},i.createElement("div",{className:"tileset-finder-search-bar"},i.createElement("span",{className:"tileset-finder-label"},"Select tileset:"),i.createElement("input",{ref:e=>{this.searchBox=e},className:"tileset-finder-search-box",onChange:this.handleSearchChange.bind(this),placeholder:"Search Term",type:"text"})),i.createElement("div",{className:"tileset-finder-checkbox-tree"},i.createElement(U$,{checked:this.state.checked,expanded:this.state.expanded,icons:{uncheck:i.createElement("svg",{style:n},i.createElement("title",null,"Uncheck"),i.createElement("use",{xlinkHref:"#square_o"})),check:i.createElement("svg",{style:n},i.createElement("title",null,"Check"),i.createElement("use",{xlinkHref:"#check_square_o"})),halfCheck:i.createElement("svg",{style:r},i.createElement("title",null,"Half Check"),i.createElement("use",{xlinkHref:"#check_square_o"})),leaf:i.createElement("svg",{style:n},i.createElement("title",null,"Leaf"),i.createElement("use",{xlinkHref:"#file_o"})),expandClose:i.createElement("svg",{style:n},i.createElement("title",null,"Expand Close"),i.createElement("use",{xlinkHref:"#chevron_right"})),expandOpen:i.createElement("svg",{style:n},i.createElement("title",null,"Expand Open "),i.createElement("use",{xlinkHref:"#chevron_down"})),parentClose:i.createElement("svg",{style:n},i.createElement("title",null,"Parent Close"),i.createElement("use",{xlinkHref:"#folder_o"})),parentOpen:i.createElement("svg",{style:n},i.createElement("title",null,"Parent Open"),i.createElement("use",{xlinkHref:"#folder_open_o"}))},nodes:t,onCheck:this.handleChecked.bind(this),onExpand:this.handleExpanded.bind(this)})));return i.createElement("div",null,o)}}])}(i.Component);K$.propTypes={datatype:xm.string,orientation:xm.string,onDoubleClick:xm.func,pubSub:xm.object.isRequired,selectedTilesetChanged:xm.func,trackSourceServers:xm.array};const Z$=$Y(K$);function Q$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J$(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J$(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function eK(e,t,n){return t=nK(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tK()?Reflect.construct(t,n||[],nK(e).constructor):t.apply(e,n))}function tK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tK=function(){return!!e})()}function nK(e){return(nK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rK(e,t){return(rK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let iK=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eK(this,t,[e])).options={},n.state={selectedTilesets:[{datatype:"none"}],allTracksSameDatatype:!0},n.handleSubmitBound=n.handleSubmit.bind(n),n.handleTilesetPickerDoubleClickBound=n.handleTilesetPickerDoubleClick.bind(n),n.selectedTilesetsChangedBound=n.selectedTilesetsChanged.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rK(e,t)}(t,e),Q$(t,[{key:"getOrientation",value:function(e){let t=null;return t="top"===e||"bottom"===e?"1d-horizontal":"left"===e||"right"===e?"1d-vertical":"2d",t}},{key:"handleSubmit",value:function(e){e&&e.preventDefault(),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.extent,this.props.host)}},{key:"handleTilesetPickerDoubleClick",value:function(e){this.selectedTilesetsChanged([e]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.extent,this.props.host)}},{key:"handleOptionsChanged",value:function(e){this.options=e}},{key:"handlePlotTypeSelected",value:function(e){const{selectedTilesets:t}=this.state;for(const n of t)n.type=e;this.selectedPlotType=e,this.setState({selectedTilesets:t})}},{key:"selectedTilesetsChanged",value:function(e){let t=null;t=0===e.length?[{datatype:"none"}]:e;let n=!0;const r=t[0].datatype;for(const i of t)i.datatype!==r&&(n=!1);if(n)for(const i of t)i.type=this.selectedPlotType;else for(const i of t){let e=[i.datatype];const t=this.getOrientation(this.props.position);"cooler"===i.filetype&&(e=[i.datatype,"chromsizes"]);const n=Zw([e],t),r=lT(e[0],this.props.position,n);i.type=r.type}this.setState({selectedTilesets:t,allTracksSameDatatype:n})}},{key:"render",value:function(){const e=this.getOrientation(this.props.position),t=i.createElement("div",null,i.createElement(Z$,{ref:e=>{this.tilesetFinder=e},datatype:this.props.datatype,onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:e=>this.props.onTracksChosen(e,this.props.position,this.props.extent),orientation:e,selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return i.createElement(uY,{maxHeight:!0,okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Add Track"},i.createElement(i.Fragment,null,t,i.createElement(z$,{ref:e=>{this.plotTypeChooser=e},allTracksSameDatatype:this.state.allTracksSameDatatype,datatypes:this.state.selectedTilesets.map(e=>"cooler"===e.filetype?[e.datatype,"chromsizes"]:[e.datatype]),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:e,position:this.props.position})))}}])}(i.Component);function oK(){return oK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oK.apply(null,arguments)}function aK(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function sK(e,t){if(e){if("string"==typeof e)return aK(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aK(e,t):void 0}}function lK(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0!==t)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||sK(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cK(e){return(cK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uK(e){var t=function(e,t){if("object"!=cK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=cK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cK(t)?t:t+""}function hK(e,t,n){return(t=uK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.forEach(function(t){hK(e,t,n[t])})}return e}function fK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dK(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uK(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gK(e,t){if(t&&("object"==cK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mK(e)}function yK(e){return(yK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vK(e,t){return(vK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bK(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vK(e,t)}iK.defaultProps={position:"top"},iK.propTypes={datatype:xm.string,extent:xm.string,host:xm.string,onCancel:xm.func.isRequired,onTracksChosen:xm.func.isRequired,position:xm.string,trackSourceServers:xm.array.isRequired};var _K=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}};const wK=ks(_K);function TK(e){return function(e){if(Array.isArray(e))return aK(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sK(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xK=function(){function e(){fK(this,e),hK(this,"refs",{})}return dK(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find(function(t){return t.node.sortableInfo.index==e.active.index})}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(EK)}}]),e}();function EK(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function SK(e,t,n){return(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}function kK(e,t){return Object.keys(e).reduce(function(n,r){return-1===t.indexOf(r)&&(n[r]=e[r]),n},{})}var OK={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},PK=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function CK(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function AK(e,t){e.style["".concat(PK,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function MK(e,t){e.style["".concat(PK,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function IK(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function RK(e,t,n){return Math.max(e,Math.min(n,t))}function DK(e){return"px"===e.substr(-2)?parseFloat(e):0}function NK(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function jK(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function LK(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function BK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:BK(e.parentNode,t,r)}}function FK(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,o=t,a="px";if("string"==typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);wK(null!==s,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),o=parseFloat(t),a=s[1]}return wK(isFinite(i)&&isFinite(o),"lockOffset value should be a finite. Given %s",t),"%"===a&&(i=i*n/100,o=o*r/100),{x:i,y:o}}function zK(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find(function(e){return n.test(t[e])})}(e)?e:zK(e.parentNode):null}var HK=27,UK=32,VK=37,GK=38,XK=39,WK=40,YK="A",qK="BUTTON",$K="CANVAS",KK="INPUT",ZK="OPTION",QK="TEXTAREA",JK="SELECT";function eZ(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){var e,t;fK(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return hK(mK(mK(t=gK(this,(e=yK(n)).call.apply(e,[this].concat(o))))),"wrappedInstance",(0,i.createRef)()),t}return bK(n,t),dK(n,[{key:"componentDidMount",value:function(){(0,o.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return wK(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=r.withRef?this.wrappedInstance:null;return(0,i.createElement)(e,oK({ref:t},this.props))}}]),n}(i.Component),hK(t,"displayName",NK("sortableHandle",e)),n}function tZ(e){return null!=e.sortableHandle}var nZ=function(){function e(t,n){fK(this,e),this.container=t,this.onScrollCallback=n}return dK(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,o=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},c=10,u=10,h=this.container,p=h.scrollTop,f=h.scrollLeft,d=h.scrollHeight,m=h.scrollWidth,g=0===p,y=d-p-h.clientHeight===0,v=0===f,b=m-f-h.clientWidth===0;n.y>=i.y-a/2&&!y?(s.y=1,l.y=u*Math.abs((i.y-a/2-n.y)/a)):n.x>=i.x-o/2&&!b?(s.x=1,l.x=c*Math.abs((i.x-o/2-n.x)/o)):n.y<=r.y+a/2&&!g?(s.y=-1,l.y=u*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+o/2&&!v&&(s.x=-1,l.x=c*Math.abs((n.x-o/2-r.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(0!==s.x||0!==s.y)&&(this.interval=setInterval(function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)},5))}}]),e}();var rZ={axis:xm.oneOf(["x","y","xy"]),contentWindow:xm.any,disableAutoscroll:xm.bool,distance:xm.number,getContainer:xm.func,getHelperDimensions:xm.func,helperClass:xm.string,helperContainer:xm.oneOfType([xm.func,typeof HTMLElement>"u"?xm.any:xm.instanceOf(HTMLElement)]),hideSortableGhost:xm.bool,keyboardSortingTransitionDuration:xm.number,lockAxis:xm.string,lockOffset:xm.oneOfType([xm.number,xm.string,xm.arrayOf(xm.oneOfType([xm.number,xm.string]))]),lockToContainerEdges:xm.bool,onSortEnd:xm.func,onSortMove:xm.func,onSortOver:xm.func,onSortStart:xm.func,pressDelay:xm.number,pressThreshold:xm.number,keyCodes:xm.shape({lift:xm.arrayOf(xm.number),drop:xm.arrayOf(xm.number),cancel:xm.arrayOf(xm.number),up:xm.arrayOf(xm.number),down:xm.arrayOf(xm.number)}),shouldCancelStart:xm.func,transitionDuration:xm.number,updateBeforeSortStart:xm.func,useDragHandle:xm.bool,useWindowAsScrollContainer:xm.bool},iZ={lift:[UK],drop:[UK],cancel:[HK],up:[GK,VK],down:[WK,XK]},oZ={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:iZ,shouldCancelStart:function(e){return!(-1===[KK,QK,JK,ZK,qK].indexOf(e.target.tagName)&&!IK(e.target,function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},aZ=Object.keys(rZ);var sZ=(0,i.createContext)({manager:{}});var lZ={index:xm.number.isRequired,collection:xm.oneOfType([xm.number,xm.string]),disabled:xm.bool},cZ=Object.keys(lZ);function uZ(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){var e,t;fK(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return hK(mK(mK(t=gK(this,(e=yK(n)).call.apply(e,[this].concat(o))))),"wrappedInstance",(0,i.createRef)()),t}return bK(n,t),dK(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,i=(0,o.findDOMNode)(this);i.sortableInfo={collection:t,disabled:n,index:r,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return wK(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=r.withRef?this.wrappedInstance:null;return(0,i.createElement)(e,oK({ref:t},kK(this.props,cZ)))}}]),n}(i.Component),hK(t,"displayName",NK("sortableElement",e)),hK(t,"contextType",sZ),hK(t,"propTypes",lZ),hK(t,"defaultProps",{collection:0}),n}const{Provider:hZ,Consumer:pZ}=i.createContext(Sw);function fZ(e){return i.forwardRef((t,n)=>i.createElement(pZ,null,r=>i.createElement(e,{ref:n,...t,theme:r})))}const dZ="_track-control_w7hx2_1",mZ="_track-control-vertical_w7hx2_2",gZ="_track-control-dark_w7hx2_15",yZ="_track-control-active_w7hx2_16 _track-control_w7hx2_1",vZ="_track-control-left_w7hx2_24",bZ="_track-control-padding-right_w7hx2_48",_Z="_track-control-button_w7hx2_52",wZ="_track-control-button-vertical_w7hx2_81",TZ=e=>xs({[yZ]:e.isVisible,[dZ]:!e.isVisible,[vZ]:e.isAlignLeft,[mZ]:e.isVertical,[bZ]:e.paddingRight,[gZ]:e.theme===Ew}),xZ=e=>xs("no-zoom",_Z,{[wZ]:e.isVertical});let EZ=null,SZ=null;function kZ(e){let t,n;return(!e||!EZ||Object.keys(e).some(t=>EZ[t]!==e[t]))&&(EZ=e,SZ=eZ(()=>i.createElement("svg",{className:xZ(e),style:{height:"20px",width:"20px",...e.imgStyleMove}},i.createElement("title",null,"Move track"),i.createElement("use",{xlinkHref:"#move"})))),i.createElement("div",{className:TZ(e)},e.isMoveable&&i.createElement(SZ,null),i.createElement("svg",{ref:e=>{t=e},className:xZ(e),onClick:()=>{e.onConfigTrackMenuOpened(e.uid,t.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleSettings}},i.createElement("title",null,"Configure track"),i.createElement("use",{xlinkHref:"#cog"})),e.onAddSeries&&i.createElement("svg",{className:xZ(e),onClick:()=>e.onAddSeries(e.uid),style:{height:"20px",width:"20px",...e.imgStyleAdd}},i.createElement("title",null,"Add series"),i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{ref:e=>{n=e},className:xZ(e),onClick:()=>{e.onCloseTrackMenuOpened(e.uid,n.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleClose}},i.createElement("title",null,"Close track"),i.createElement("use",{xlinkHref:"#cross"})))}kZ.propTypes={imgStyleAdd:xm.object,imgStyleClose:xm.object,imgStyleMove:xm.object,imgStyleSettings:xm.object,isAlignLeft:xm.bool,isMoveable:xm.bool,isVertical:xm.bool,isVisible:xm.bool,onConfigTrackMenuOpened:xm.func,onCloseTrackMenuOpened:xm.func,onAddSeries:xm.func,paddingRight:xm.bool,theme:xm.symbol.isRequired,uid:xm.string};const OZ=fZ(kZ),PZ="_center-track_fiu64_1",CZ="_center-track-container_fiu64_6",AZ={"track-range-selection":"_track-range-selection_5bcsr_1","track-range-selection-active":"_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-primary":"_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-secondary":"_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-group-inactive":"_track-range-selection-group-inactive_5bcsr_22","track-range-selection-group-brush-selection":"_track-range-selection-group-brush-selection_5bcsr_26"};function MZ(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IZ(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function IZ(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function RZ(e,t,n){return t=NZ(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,DZ()?Reflect.construct(t,n||[],NZ(e).constructor):t.apply(e,n))}function DZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DZ=function(){return!!e})()}function NZ(e){return(NZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jZ(e,t){return(jZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const LZ={pointerEvents:"all"};function BZ(e){return e?.sourceEvent}let FZ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=RZ(this,t,[e])).state={isVisible:!1},n.brushBehaviorX=C$().on("brush",n.brushedX.bind(n)).on("end",n.brushedXEnded.bind(n)),n.brushBehaviorY=A$().on("brush",n.brushedY.bind(n)).on("end",n.brushedYEnded.bind(n)),n.brushBehaviorXY=M$().on("start",n.brushStarted.bind(n)).on("brush",n.brushedXY.bind(n)).on("end",n.brushedXYEnded.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jZ(e,t)}(t,e),MZ(t,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggeredXY){if(this.rangeSelectionTriggeredXY=!1,this.rangeSelectionTriggeredXYEnd){const t=e.rangeSelection[0]||null;this.moveBrushXY([t,e.rangeSelection[1]],!0),this.rangeSelectionTriggeredXYEnd=!1}return this.state!==t}if(this.props.rangeSelection!==e.rangeSelection){const n=e.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(n,e.rangeSelectionEnd),this.rangeSelectionTriggeredXEnd&&this.moveBrushX(n,e.rangeSelectionEnd,!0),this.rangeSelectionTriggeredY||this.moveBrushY(n,e.rangeSelectionEnd),this.rangeSelectionTriggeredYEnd&&this.moveBrushY(n,e.rangeSelectionEnd,!0),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredXEnd=!1,this.rangeSelectionTriggeredY=!1,this.rangeSelectionTriggeredYEnd=!1):this.moveBrushXY([n,e.rangeSelection[1]],e.rangeSelectionEnd);const r=this.props.is1dRangeSelection&&!e.is1dRangeSelection&&null===n;return this.state!==t||r}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){!this.brushElX||!this.brushElY||this.brushElXOld===this.brushElX&&this.brushElYOld===this.brushElY||(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),QT(this.brushElX,AZ["track-range-selection-group-brush-selection"]),QT(this.brushElY,AZ["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){!this.brushElXY||this.brushElXYOld===this.brushElXY||(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,QT(this.brushElXY,AZ["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,BZ(e)&&this.props.onRangeSelectionX&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(e.selection))}},{key:"brushedXEnded",value:function(e){const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,BZ(e)&&this.props.onRangeSelectionX&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredX=!0,this.rangeSelectionTriggeredXEnd=!0,this.props.onRangeSelectionXEnd(e.selection))}},{key:"brushedY",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,BZ(e)&&this.props.onRangeSelectionY&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(e.selection))}},{key:"brushedYEnded",value:function(e){const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,BZ(e)&&this.props.onRangeSelectionY&&this.props.is1dRangeSelection&&!t&&(this.rangeSelectionTriggeredY=!0,this.rangeSelectionTriggeredYEnd=!0,this.props.onRangeSelectionYEnd(e.selection))}},{key:"brushedXY",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,BZ(e)&&this.props.onRangeSelectionXY&&!t&&!this.props.is1dRangeSelection&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[e.selection[0][0],e.selection[1][0]],[e.selection[0][1],e.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(e){if(this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelectionXY&&!t&&(this.rangeSelectionTriggeredXY=!0,this.rangeSelectionTriggeredXYEnd=!0,this.props.onRangeSelectionXYEnd([[e.selection[0][0],e.selection[1][0]],[e.selection[0][1],e.selection[1][1]]])),e.selection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionReset())}},{key:"brushStarted",value:function(e){BZ(e)&&this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const n=e?[this.props.scaleX(e[0]),this.props.scaleX(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElX.transition().call(this.brushBehaviorX.move,n):this.brushElX.call(this.brushBehaviorX.move,n)}},{key:"moveBrushY",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const n=e?[this.props.scaleY(e[0]),this.props.scaleY(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElY.transition().call(this.brushBehaviorY.move,n):this.brushElY.call(this.brushBehaviorY.move,n)}},{key:"moveBrushXY",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=[[this.props.scaleX(e[0][0]),this.props.scaleY(e[1][0])],[this.props.scaleX(e[0][1]),this.props.scaleY(e[1][1])]];this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushElXY.transition().call(this.brushBehaviorXY.move,n):this.brushElXY.call(this.brushBehaviorXY.move,n)}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){this.brushIs1dBound&&(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){this.brushIs2dBound&&this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map(e=>Ax(e)).reduce(KT,!1),t=this.props.tracks.some(e=>e.contents?e.contents.some(e=>"heatmap"===e.type&&"topRight"===e.options.colorbarPosition):"heatmap"===e.type&&"topRight"===e.options.colorbarPosition);let n="track-range-selection";this.props.isRangeSelectionActive&&(n+=this.props.is1dRangeSelection?"-active-secondary":"-active-primary");const r=xs(!this.props.is1dRangeSelection&&AZ["track-range-selection-group-inactive"]),o=xs(this.props.is1dRangeSelection&&AZ["track-range-selection-group-inactive"]);return i.createElement("div",{className:xs(this.props.className,PZ),onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},e&&i.createElement("svg",{className:AZ[n],style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"},i.createElement("title",null,"Range Selection Brush"),i.createElement("g",{ref:e=>{this.brushElX=pm(e)},className:r}),i.createElement("g",{ref:e=>{this.brushElY=pm(e)},className:r}),i.createElement("g",{ref:e=>{this.brushElXY=pm(e)},className:o})),this.props.editable&&i.createElement(OZ,{imgStyleAdd:LZ,imgStyleClose:LZ,imgStyleMove:LZ,imgStyleSettings:LZ,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:t,uid:this.props.uid}))}}])}(i.Component);FZ.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,rangeSelectionEnd:xm.bool,isRangeSelectionActive:!1,scaleX:e=>e,scaleY:e=>e},FZ.propTypes={className:xm.string,configTrackMenuId:xm.string,editable:xm.bool,height:xm.number.isRequired,is1dRangeSelection:xm.bool,isRangeSelectionActive:xm.bool,onAddSeries:xm.func.isRequired,onCloseTrackMenuOpened:xm.func.isRequired,onConfigTrackMenuOpened:xm.func.isRequired,onRangeSelectionX:xm.func.isRequired,onRangeSelectionXEnd:xm.func.isRequired,onRangeSelectionY:xm.func.isRequired,onRangeSelectionYEnd:xm.func.isRequired,onRangeSelectionXY:xm.func.isRequired,onRangeSelectionXYEnd:xm.func.isRequired,onRangeSelectionReset:xm.func.isRequired,onRangeSelectionStart:xm.func.isRequired,rangeSelection:xm.array.isRequired,rangeSelectionEnd:xm.bool,scaleX:xm.func,scaleY:xm.func,tracks:xm.array.isRequired,uid:xm.string.isRequired,width:xm.number.isRequired};const zZ="_context-menu_18ock_1",HZ="_context-menu-dark_18ock_12",UZ="_context-menu-icon_18ock_17",VZ="_context-menu-item_18ock_27",GZ="_context-menu-hr_18ock_38",XZ="_play-icon_18ock_45",WZ="_context-menu-span_18ock_52";function YZ(e){return i.createElement("div",{"data-menu-item-for":"string"==typeof e.children?e.children:null,className:xs(VZ,e.className),onClick:t=>e.onClick(t),onMouseEnter:t=>e.onMouseEnter(t),onMouseLeave:t=>e.onMouseLeave(t),role:"button",tabIndex:0},i.createElement("span",{className:WZ},e.children))}YZ.defaultProps={onMouseEnter:()=>{},onMouseLeave:()=>{}},YZ.propTypes={children:xm.node.isRequired,onClick:xm.func.isRequired,onMouseEnter:xm.func,onMouseLeave:xm.func};const qZ=e=>{let t=[];for(const n of e)n.contents?t=t.concat(n.contents):t.push(n);return t},$Z=(e,t,n,r)=>e?(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(e=>{qw[e]=window.higlassTracksByType[e].config}),qZ(e).map(e=>{var o,a;const s=qw[e.type]?qw[e.type].thumbnail:null,l=s?i.createElement("div",{className:UZ,dangerouslySetInnerHTML:{__html:s.outerHTML}}):i.createElement("div",{className:UZ},i.createElement("svg",null));return i.createElement(YZ,{key:e.uid,className:VZ,onClick:()=>{r&&r(e.uid)},onMouseEnter:n=>{t&&t(n,e)},onMouseLeave:e=>{n&&n(e)}},l,i.createElement("span",{className:WZ},null!=(a=null==(o=e.options)?void 0:o.name)&&a.length?e.options.name:e.type,t&&n?i.createElement("svg",{className:XZ},i.createElement("title",null,"Play"),i.createElement("use",{xlinkHref:"#play"})):null))})):null;function KZ(e){return i.createElement("div",null,$Z(e.tracks,null,null,e.onCloseTrack),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:()=>e.onCloseTrack(e.tracks[0].uid)},"Close all series"))}function ZZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QZ(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JZ(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JZ(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}KZ.propTypes={onCloseTrack:xm.func.isRequired,tracks:xm.array.isRequired};const eQ="__mixwith_appliedMixin",tQ="__mixwith_wrappedMixin",nQ=e=>e[tQ]||e,rQ=(e,t)=>e.hasOwnProperty(eQ)&&e[eQ]===nQ(t),iQ=(e,t)=>(Object.setPrototypeOf(t,e),e[tQ]||(e[tQ]=e),t),oQ="__mixwith_cachedApplications",aQ=e=>iQ(e,t=>((e,t)=>{for(;null!==e;){if(rQ(e,t))return!0;e=Object.getPrototypeOf(e)}return!1})(t.prototype,e)?t:e(t)),sQ=e=>iQ(e,t=>((e,t)=>{const n=t(e);return n.prototype[eQ]=nQ(t),n})(t,e)),lQ=e=>aQ((e=>iQ(e,t=>{let n=t[oQ];n||(t[oQ]=new Map,n=t[oQ]);let r=n.get(e);return r||(r=e(t),n.set(e,r)),r}))(sQ(e)));let cQ=function(){return QZ(function e(t){ZZ(this,e),this.superclass=t||QZ(function e(){ZZ(this,e)})},[{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>t(e),this.superclass)}}])}();const uQ=e=>new cQ(e);function hQ(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pQ(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pQ(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function fQ(e,t,n){return t=mQ(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dQ()?Reflect.construct(t,n||[],mQ(e).constructor):t.apply(e,n))}function dQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dQ=function(){return!!e})()}function mQ(e){return(mQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gQ(e,t){return(gQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let yQ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fQ(this,t,[e])).adjusted=!1,n.state={orientation:n.props.orientation?n.props.orientation:"right",left:n.props.position.left,top:n.props.position.top,submenuShown:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gQ(e,t)}(t,e),hQ(t,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.adjusted=!1,this.setState({left:e.position.left,top:e.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(e,t){this.setState({submenuShown:t,submenuSourceBbox:e})}},{key:"handleItemMouseEnter",value:function(e,t){this.handleItemMouseEnterWithRect(e.currentTarget.getBoundingClientRect(),t)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(this.adjusted)return;this.adjusted=!0,this.divDom=o.findDOMNode(this.div);const e=this.divDom.getBoundingClientRect(),t=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0};let n=this.state.orientation,r=t.top;if(t.top+e.height>window.innerHeight&&(t.top-e.height>0?r=t.top-e.height+20:(r=t.top-e.height+20,r-=r+e.height-window.innerHeight)),"left"===this.state.orientation){let i=t.left-e.width;i<0&&(t.left+t.width+e.width>window.innerWidth?i=0:(i=t.left+t.width,n="right")),this.setState({left:i,top:r,orientation:n})}else{let i=t.left+t.width;t.left+t.width+e.width>window.innerWidth&&(t.left-e.width<0?(i=0,n="right"):(i=t.left-e.width,n="left")),this.setState({left:i,top:r,orientation:n})}}},{key:"render",value:function(){const e=this.state.left?{left:this.state.left}:{right:this.state.right},t={top:this.state.top},n=Object.assign(e,t);return i.createElement("div",{ref:e=>{this.div=e},className:xs("context-menu-item",zZ,{[HZ]:this.props.theme===Ew}),style:n},this.props.children)}}])}(i.Component);function vQ(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bQ(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bQ(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _Q(e,t,n){return t=TQ(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wQ()?Reflect.construct(t,n||[],TQ(e).constructor):t.apply(e,n))}function wQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wQ=function(){return!!e})()}function TQ(e){return(TQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xQ(e,t){return(xQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}yQ.propTypes={children:xm.node,orientation:xm.string,parentBbox:xm.object,position:xm.object,theme:xm.symbol.isRequired};let EQ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_Q(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xQ(e,t)}(t,e),vQ(t,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,n="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},r=this.state.submenuShown;return i.createElement(t,{menuItems:r.children,orientation:this.state.orientation,parentBbox:e,position:n,theme:this.props.theme})}return i.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){const e=[];for(const t in this.props.menuItems){const n=this.props.menuItems[t];e.push(i.createElement(YZ,{key:t,onClick:n.handler?n.handler:()=>null,onMouseEnter:n.children?e=>this.handleItemMouseEnter(e,n):this.handleOtherMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave},n.name,n.children&&i.createElement("svg",{className:XZ},i.createElement("title",null,"Play"),i.createElement("use",{xlinkHref:"#play"}))))}return i.createElement("div",{ref:e=>{this.div=e},className:xs(zZ,{[HZ]:this.props.theme===Ew}),style:{left:this.state.left,top:this.state.top}},e,this.getSubmenu())}}])}(yQ);var SQ={},kQ={},OQ="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,PQ="object"==typeof self&&self&&self.Object===Object&&self,CQ=OQ||PQ||Function("return this")(),AQ=CQ.Symbol,MQ=Object.prototype,IQ=MQ.hasOwnProperty,RQ=MQ.toString,DQ=AQ?AQ.toStringTag:void 0;var NQ=Object.prototype.toString;var jQ=AQ?AQ.toStringTag:void 0;function LQ(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":jQ&&jQ in Object(e)?function(e){var t=IQ.call(e,DQ),n=e[DQ];try{e[DQ]=void 0;var r=!0}catch{}var i=RQ.call(e);return r&&(t?e[DQ]=n:delete e[DQ]),i}(e):function(e){return NQ.call(e)}(e)}var BQ=Array.isArray;function FQ(e){return null!=e&&"object"==typeof e}const zQ=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){return"string"==typeof e||!BQ(e)&&FQ(e)&&"[object String]"==LQ(e)}},Symbol.toStringTag,{value:"Module"})),HQ=Os(zQ);var UQ=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e};function VQ(e){return FQ(e)&&"[object Arguments]"==LQ(e)}var GQ=Object.prototype,XQ=GQ.hasOwnProperty,WQ=GQ.propertyIsEnumerable,YQ=VQ(function(){return arguments}())?VQ:function(e){return FQ(e)&&XQ.call(e,"callee")&&!WQ.call(e,"callee")};var qQ="object"==typeof exports&&exports&&!exports.nodeType&&exports,$Q=qQ&&"object"==typeof module&&module&&!module.nodeType&&module,KQ=$Q&&$Q.exports===qQ?CQ.Buffer:void 0,ZQ=(KQ?KQ.isBuffer:void 0)||function(){return!1},QQ=/^(?:0|[1-9]\d*)$/;function JQ(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&("number"==n||"symbol"!=n&&QQ.test(e))&&e>-1&&e%1==0&&e<t}function eJ(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var tJ={};function nJ(e){return function(t){return e(t)}}tJ["[object Float32Array]"]=tJ["[object Float64Array]"]=tJ["[object Int8Array]"]=tJ["[object Int16Array]"]=tJ["[object Int32Array]"]=tJ["[object Uint8Array]"]=tJ["[object Uint8ClampedArray]"]=tJ["[object Uint16Array]"]=tJ["[object Uint32Array]"]=!0,tJ["[object Arguments]"]=tJ["[object Array]"]=tJ["[object ArrayBuffer]"]=tJ["[object Boolean]"]=tJ["[object DataView]"]=tJ["[object Date]"]=tJ["[object Error]"]=tJ["[object Function]"]=tJ["[object Map]"]=tJ["[object Number]"]=tJ["[object Object]"]=tJ["[object RegExp]"]=tJ["[object Set]"]=tJ["[object String]"]=tJ["[object WeakMap]"]=!1;var rJ="object"==typeof exports&&exports&&!exports.nodeType&&exports,iJ=rJ&&"object"==typeof module&&module&&!module.nodeType&&module,oJ=iJ&&iJ.exports===rJ&&OQ.process,aJ=function(){try{return iJ&&iJ.require&&iJ.require("util").types||oJ&&oJ.binding&&oJ.binding("util")}catch{}}(),sJ=aJ&&aJ.isTypedArray,lJ=sJ?nJ(sJ):function(e){return FQ(e)&&eJ(e.length)&&!!tJ[LQ(e)]},cJ=Object.prototype.hasOwnProperty;function uJ(e,t){var n=BQ(e),r=!n&&YQ(e),i=!n&&!r&&ZQ(e),o=!n&&!r&&!i&&lJ(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)(t||cJ.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||JQ(c,l)))&&s.push(c);return s}var hJ=Object.prototype;function pJ(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||hJ)}function fJ(e,t){return function(n){return e(t(n))}}var dJ=fJ(Object.keys,Object),mJ=Object.prototype.hasOwnProperty;function gJ(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function yJ(e){if(!gJ(e))return!1;var t=LQ(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function vJ(e){return null!=e&&eJ(e.length)&&!yJ(e)}function bJ(e){return vJ(e)?uJ(e):function(e){if(!pJ(e))return dJ(e);var t=[];for(var n in Object(e))mJ.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function _J(e,t){return e&&UQ(e,t,bJ)}function wJ(e){return e}function TJ(e){return"function"==typeof e?e:wJ}const xJ=Object.freeze(Object.defineProperty({__proto__:null,default:function(e,t){return e&&_J(e,TJ(t))}},Symbol.toStringTag,{value:"Module"})),EJ=Os(xJ);var SJ=fJ(Object.getPrototypeOf,Object),kJ=Function.prototype,OJ=Object.prototype,PJ=kJ.toString,CJ=OJ.hasOwnProperty,AJ=PJ.call(Object);function MJ(e){if(!FQ(e)||"[object Object]"!=LQ(e))return!1;var t=SJ(e);if(null===t)return!0;var n=CJ.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&PJ.call(n)==AJ}const IJ=Os(Object.freeze(Object.defineProperty({__proto__:null,default:MJ},Symbol.toStringTag,{value:"Module"})));function RJ(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function DJ(e,t){return e===t||e!==e&&t!==t}function NJ(e,t){for(var n=e.length;n--;)if(DJ(e[n][0],t))return n;return-1}var jJ=Array.prototype.splice;function LJ(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}LJ.prototype.clear=function(){this.__data__=[],this.size=0},LJ.prototype.delete=function(e){var t=this.__data__,n=NJ(t,e);return!(n<0)&&(n==t.length-1?t.pop():jJ.call(t,n,1),--this.size,!0)},LJ.prototype.get=function(e){var t=this.__data__,n=NJ(t,e);return n<0?void 0:t[n][1]},LJ.prototype.has=function(e){return NJ(this.__data__,e)>-1},LJ.prototype.set=function(e,t){var n=this.__data__,r=NJ(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var BJ=CQ["__core-js_shared__"],FJ=function(){var e=/[^.]+$/.exec(BJ&&BJ.keys&&BJ.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var zJ=Function.prototype.toString;function HJ(e){if(null!=e){try{return zJ.call(e)}catch{}try{return e+""}catch{}}return""}var UJ=/^\[object .+?Constructor\]$/,VJ=Function.prototype,GJ=Object.prototype,XJ=VJ.toString,WJ=GJ.hasOwnProperty,YJ=RegExp("^"+XJ.call(WJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qJ(e){return!(!gJ(e)||function(e){return!!FJ&&FJ in e}(e))&&(yJ(e)?YJ:UJ).test(HJ(e))}function $J(e,t){var n=function(e,t){return e?.[t]}(e,t);return qJ(n)?n:void 0}var KJ=$J(CQ,"Map"),ZJ=$J(Object,"create");var QJ=Object.prototype.hasOwnProperty;var JJ=Object.prototype.hasOwnProperty;function e1(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function t1(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function n1(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}e1.prototype.clear=function(){this.__data__=ZJ?ZJ(null):{},this.size=0},e1.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},e1.prototype.get=function(e){var t=this.__data__;if(ZJ){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return QJ.call(t,e)?t[e]:void 0},e1.prototype.has=function(e){var t=this.__data__;return ZJ?void 0!==t[e]:JJ.call(t,e)},e1.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ZJ&&void 0===t?"__lodash_hash_undefined__":t,this},n1.prototype.clear=function(){this.size=0,this.__data__={hash:new e1,map:new(KJ||LJ),string:new e1}},n1.prototype.delete=function(e){var t=t1(this,e).delete(e);return this.size-=t?1:0,t},n1.prototype.get=function(e){return t1(this,e).get(e)},n1.prototype.has=function(e){return t1(this,e).has(e)},n1.prototype.set=function(e,t){var n=t1(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function r1(e){var t=this.__data__=new LJ(e);this.size=t.size}r1.prototype.clear=function(){this.__data__=new LJ,this.size=0},r1.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},r1.prototype.get=function(e){return this.__data__.get(e)},r1.prototype.has=function(e){return this.__data__.has(e)},r1.prototype.set=function(e,t){var n=this.__data__;if(n instanceof LJ){var r=n.__data__;if(!KJ||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new n1(r)}return n.set(e,t),this.size=n.size,this};function i1(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new n1;++t<n;)this.add(e[t])}function o1(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function a1(e,t){return e.has(t)}i1.prototype.add=i1.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i1.prototype.has=function(e){return this.__data__.has(e)};function s1(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,p=!0,f=2&n?new i1:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var d=e[h],m=t[h];if(r)var g=a?r(m,d,h,t,e,o):r(d,m,h,e,t,o);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!o1(t,function(e,t){if(!a1(f,t)&&(d===e||i(d,e,n,r,o)))return f.push(t)})){p=!1;break}}else if(d!==m&&!i(d,m,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}var l1=CQ.Uint8Array;function c1(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function u1(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var h1=AQ?AQ.prototype:void 0,p1=h1?h1.valueOf:void 0;var f1=Object.prototype.propertyIsEnumerable,d1=Object.getOwnPropertySymbols,m1=d1?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(d1(e),function(t){return f1.call(e,t)}))}:function(){return[]};function g1(e){return function(e,t,n){var r=t(e);return BQ(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,bJ,m1)}var y1=Object.prototype.hasOwnProperty;var v1=$J(CQ,"DataView"),b1=$J(CQ,"Promise"),_1=$J(CQ,"Set"),w1=$J(CQ,"WeakMap"),T1="[object Map]",x1="[object Promise]",E1="[object Set]",S1="[object WeakMap]",k1="[object DataView]",O1=HJ(v1),P1=HJ(KJ),C1=HJ(b1),A1=HJ(_1),M1=HJ(w1),I1=LQ;(v1&&I1(new v1(new ArrayBuffer(1)))!=k1||KJ&&I1(new KJ)!=T1||b1&&I1(b1.resolve())!=x1||_1&&I1(new _1)!=E1||w1&&I1(new w1)!=S1)&&(I1=function(e){var t=LQ(e),n="[object Object]"==t?e.constructor:void 0,r=n?HJ(n):"";if(r)switch(r){case O1:return k1;case P1:return T1;case C1:return x1;case A1:return E1;case M1:return S1}return t});var R1="[object Arguments]",D1="[object Array]",N1="[object Object]",j1=Object.prototype.hasOwnProperty;function L1(e,t,n,r,i,o){var a=BQ(e),s=BQ(t),l=a?D1:I1(e),c=s?D1:I1(t),u=(l=l==R1?N1:l)==N1,h=(c=c==R1?N1:c)==N1,p=l==c;if(p&&ZQ(e)){if(!ZQ(t))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new r1),a||lJ(e)?s1(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new l1(e),new l1(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return DJ(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=c1;case"[object Set]":var l=1&r;if(s||(s=u1),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=s1(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(p1)return p1.call(e)==p1.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var f=u&&j1.call(e,"__wrapped__"),d=h&&j1.call(t,"__wrapped__");if(f||d){var m=f?e.value():e,g=d?t.value():t;return o||(o=new r1),i(m,g,n,r,o)}}return!!p&&(o||(o=new r1),function(e,t,n,r,i,o){var a=1&n,s=g1(e),l=s.length;if(l!=g1(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:y1.call(t,u)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);for(var d=a;++c<l;){var m=e[u=s[c]],g=t[u];if(r)var y=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===y?m===g||i(m,g,n,r,o):y)){f=!1;break}d||(d="constructor"==u)}if(f&&!d){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}function B1(e,t,n,r,i){return e===t||(null==e||null==t||!FQ(e)&&!FQ(t)?e!==e&&t!==t:L1(e,t,n,r,B1,i))}function F1(e){return e===e&&!gJ(e)}function z1(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function H1(e){var t=function(e){for(var t=bJ(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,F1(i)]}return t}(e);return 1==t.length&&t[0][2]?z1(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var s=(a=n[i])[0],l=e[s],c=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else if(!B1(c,l,3,r,new r1))return!1}return!0}(n,0,t)}}function U1(e){return"symbol"==typeof e||FQ(e)&&"[object Symbol]"==LQ(e)}var V1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,G1=/^\w*$/;function X1(e,t){if(BQ(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!U1(e))||(G1.test(e)||!V1.test(e)||null!=t&&e in Object(t))}function W1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(W1.Cache||n1),n}W1.Cache=n1;var Y1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q1=/\\(\\)?/g,$1=function(e){var t=W1(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Y1,function(e,n,r,i){t.push(r?i.replace(q1,"$1"):n||e)}),t}),K1=AQ?AQ.prototype:void 0,Z1=K1?K1.toString:void 0;function Q1(e){if("string"==typeof e)return e;if(BQ(e))return RJ(e,Q1)+"";if(U1(e))return Z1?Z1.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function J1(e,t){return BQ(e)?e:X1(e,t)?[e]:$1(function(e){return null==e?"":Q1(e)}(e))}function e0(e){if("string"==typeof e||U1(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function t0(e,t){for(var n=0,r=(t=J1(t,e)).length;null!=e&&n<r;)e=e[e0(t[n++])];return n&&n==r?e:void 0}function n0(e,t){return null!=e&&t in Object(e)}function r0(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=J1(t,e)).length,o=!1;++r<i;){var a=e0(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&eJ(i)&&JQ(a,i)&&(BQ(e)||YQ(e))}(e,t,n0)}function i0(e,t){return X1(e)&&F1(t)?z1(e0(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:t0(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?r0(n,e):B1(t,r,3)}}function o0(e){return X1(e)?function(e){return function(t){return t?.[e]}}(e0(e)):function(e){return function(t){return t0(t,e)}}(e)}var a0=function(e){return function(t,n){if(null==t)return t;if(!vJ(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(_J);function s0(e,t){var n=-1,r=vJ(e)?Array(e.length):[];return a0(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function l0(e,t){return(BQ(e)?RJ:s0)(e,function(e){return"function"==typeof e?e:null==e?wJ:"object"==typeof e?BQ(e)?i0(e[0],e[1]):H1(e):o0(e)}(t))}const c0=Os(Object.freeze(Object.defineProperty({__proto__:null,default:l0},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(kQ,"__esModule",{value:!0}),kQ.flattenNames=void 0;var u0=d0(HQ),h0=d0(EJ),p0=d0(IJ),f0=d0(c0);function d0(e){return e&&e.__esModule?e:{default:e}}var m0=kQ.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,f0.default)(t,function(t){Array.isArray(t)?e(t).map(function(e){return n.push(e)}):(0,p0.default)(t)?(0,h0.default)(t,function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)}):(0,u0.default)(t)&&n.push(t)}),n};kQ.default=m0;var g0={};function y0(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var v0=function(){try{var e=$J(Object,"defineProperty");return e({},"",{}),e}catch{}}();function b0(e,t,n){"__proto__"==t&&v0?v0(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var _0=Object.prototype.hasOwnProperty;function w0(e,t,n){var r=e[t];(!_0.call(e,t)||!DJ(r,n)||void 0===n&&!(t in e))&&b0(e,t,n)}var T0=Object.prototype.hasOwnProperty;function x0(e){if(!gJ(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=pJ(e),n=[];for(var r in e)"constructor"==r&&(t||!T0.call(e,r))||n.push(r);return n}function E0(e){return vJ(e)?uJ(e,!0):x0(e)}var S0="object"==typeof exports&&exports&&!exports.nodeType&&exports,k0=S0&&"object"==typeof module&&module&&!module.nodeType&&module,O0=k0&&k0.exports===S0?CQ.Buffer:void 0,P0=O0?O0.allocUnsafe:void 0;function C0(e,t){if(t)return e.slice();var n=e.length,r=P0?P0(n):new e.constructor(n);return e.copy(r),r}var A0=Object.prototype.hasOwnProperty;function M0(e){var t=new e.constructor(e.byteLength);return new l1(t).set(new l1(e)),t}var I0=/\w*$/;var R0=AQ?AQ.prototype:void 0,D0=R0?R0.valueOf:void 0;function N0(e,t){var n=t?M0(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function j0(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return M0(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return function(e){var t=M0(e.buffer);return new e.constructor(t,e.byteOffset,e.byteLength)}(e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return N0(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,I0.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return D0?Object(D0.call(e)):{}}(e)}}var L0=Object.create,B0=function(){function e(){}return function(t){if(!gJ(t))return{};if(L0)return L0(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function F0(e){return"function"!=typeof e.constructor||pJ(e)?{}:B0(SJ(e))}var z0=aJ&&aJ.isMap,H0=z0?nJ(z0):function(e){return FQ(e)&&"[object Map]"==I1(e)};var U0=aJ&&aJ.isSet,V0=U0?nJ(U0):function(e){return FQ(e)&&"[object Set]"==I1(e)},G0="[object Arguments]",X0="[object Function]",W0="[object Object]",Y0={};function q0(e,t,n,r,i,o){var a,s=1&t;if(void 0!==a)return a;if(!gJ(e))return e;var l=BQ(e);if(l)a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&A0.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e);else{var c=I1(e),u=c==X0||"[object GeneratorFunction]"==c;if(ZQ(e))return C0(e,s);if(c==W0||c==G0||u&&!i)a=u?{}:F0(e);else{if(!Y0[c])return i?e:{};a=j0(e,c,s)}}o||(o=new r1);var h=o.get(e);if(h)return h;o.set(e,a),V0(e)?e.forEach(function(r){a.add(q0(r,t,n,r,e,o))}):H0(e)&&e.forEach(function(r,i){a.set(i,q0(r,t,n,i,e,o))});var p=l?void 0:g1(e);return y0(p||e,function(r,i){p&&(r=e[i=r]),w0(a,i,q0(r,t,n,i,e,o))}),a}Y0[G0]=Y0["[object Array]"]=Y0["[object ArrayBuffer]"]=Y0["[object DataView]"]=Y0["[object Boolean]"]=Y0["[object Date]"]=Y0["[object Float32Array]"]=Y0["[object Float64Array]"]=Y0["[object Int8Array]"]=Y0["[object Int16Array]"]=Y0["[object Int32Array]"]=Y0["[object Map]"]=Y0["[object Number]"]=Y0[W0]=Y0["[object RegExp]"]=Y0["[object Set]"]=Y0["[object String]"]=Y0["[object Symbol]"]=Y0["[object Uint8Array]"]=Y0["[object Uint8ClampedArray]"]=Y0["[object Uint16Array]"]=Y0["[object Uint32Array]"]=!0,Y0["[object Error]"]=Y0[X0]=Y0["[object WeakMap]"]=!1;const $0=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){return q0(e,5)}},Symbol.toStringTag,{value:"Module"})),K0=Os($0);Object.defineProperty(g0,"__esModule",{value:!0}),g0.mergeClasses=void 0;var Z0=e2(EJ),Q0=e2(K0),J0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function e2(e){return e&&e.__esModule?e:{default:e}}var t2=g0.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,Q0.default)(e.default)||{};return t.map(function(t){var r=e[t];return r&&(0,Z0.default)(r,function(e,t){n[t]||(n[t]={}),n[t]=J0({},n[t],r[t])}),t}),n};g0.default=t2;var n2={};Object.defineProperty(n2,"__esModule",{value:!0}),n2.autoprefix=void 0;var r2=function(e){return e&&e.__esModule?e:{default:e}}(EJ),i2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o2={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},a2=n2.autoprefix=function(e){var t={};return(0,r2.default)(e,function(e,n){var r={};(0,r2.default)(e,function(e,t){var n=o2[t];n?r=i2({},r,n(e)):r[t]=e}),t[n]=r}),t};n2.default=a2;var s2={};Object.defineProperty(s2,"__esModule",{value:!0}),s2.hover=void 0;var l2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c2=function(e){return e&&e.__esModule?e:{default:e}}(i);function u2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h2=s2.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=o=u2(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),o.state={hover:!1},o.handleMouseOver=function(){return o.setState({hover:!0})},o.handleMouseOut=function(){return o.setState({hover:!1})},o.render=function(){return c2.default.createElement(t,{onMouseOver:o.handleMouseOver,onMouseOut:o.handleMouseOut},c2.default.createElement(e,l2({},o.props,o.state)))},u2(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(c2.default.Component)};s2.default=h2;var p2={};Object.defineProperty(p2,"__esModule",{value:!0}),p2.active=void 0;var f2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d2=function(e){return e&&e.__esModule?e:{default:e}}(i);function m2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g2=p2.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=o=m2(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(s))),o.state={active:!1},o.handleMouseDown=function(){return o.setState({active:!0})},o.handleMouseUp=function(){return o.setState({active:!1})},o.render=function(){return d2.default.createElement(t,{onMouseDown:o.handleMouseDown,onMouseUp:o.handleMouseUp},d2.default.createElement(e,f2({},o.props,o.state)))},m2(o,i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(d2.default.Component)};p2.default=g2;var y2={};Object.defineProperty(y2,"__esModule",{value:!0});y2.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n},Object.defineProperty(SQ,"__esModule",{value:!0}),SQ.ReactCSS=SQ.loop=SQ.handleActive=S2=SQ.handleHover=SQ.hover=void 0;var v2=E2(kQ),b2=E2(g0),_2=E2(n2),w2=E2(s2),T2=E2(p2),x2=E2(y2);function E2(e){return e&&e.__esModule?e:{default:e}}SQ.hover=w2.default;var S2=SQ.handleHover=w2.default;SQ.handleActive=T2.default,SQ.loop=x2.default;var k2=SQ.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=(0,v2.default)(n),o=(0,b2.default)(e,i);return(0,_2.default)(o)},O2=SQ.default=k2,P2={},C2=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(P2[i])return P2[i];var o=function(e,t,n,r){if(typeof document>"u"&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return P2[i]=o,o},A2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M2=function(e){var t=e.white,n=e.grey,r=e.size,o=e.renderers,a=e.borderRadius,s=e.boxShadow,l=e.children,c=O2({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+C2(t,n,r,o.canvas)+") center left"}}});return(0,i.isValidElement)(l)?i.cloneElement(l,A2({},l.props,{style:A2({},l.props.style,c.grid)})):i.createElement("div",{style:c.grid})};M2.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var I2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function D2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N2=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=D2(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var p=void 0;if(r!==(p=c<0?0:c>o?1:Math.round(100*c/o)/100))return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},D2(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),R2(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=O2({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:I2({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.createElement("div",{style:n.alpha},i.createElement("div",{style:n.checkboard},i.createElement(M2,{renderers:this.props.renderers})),i.createElement("div",{style:n.gradient}),i.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("div",{style:n.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:n.slider}))))}}]),t}(i.PureComponent||i.Component),j2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var L2=[38,40],B2=1,F2=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(t)&&function(e){return L2.indexOf(e)>-1}(e.keyCode)){var r=n.getArrowOffset(),i=38===e.keyCode?t+r:t-r;n.setUpdatedValue(i,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+B2++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j2(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value!==this.state.value&&(e.value!==this.props.value||t.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=O2({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return i.createElement("div",{style:t.wrap},i.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?i.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(i.PureComponent||i.Component),z2=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function H2(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var U2=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=H2(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(u=c<0?359:c>o?0:360*(-100*c/o+100)/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(h=l<0?0:l>i?359:100*l/i*360/100,n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},H2(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),z2(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=O2({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return i.createElement("div",{style:r.hue},i.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),i.createElement("div",{style:r.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:r.slider}))))}}]),t}(i.PureComponent||i.Component);function V2(e,t,n){(void 0!==n&&!DJ(e[t],n)||void 0===n&&!(t in e))&&b0(e,t,n)}function G2(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function X2(e){return function(e,t,n){var r=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=void 0;void 0===s&&(s=e[a]),r?b0(n,a,s):w0(n,a,s)}return n}(e,E0(e))}function W2(e,t,n,r,i,o,a){var s=G2(e,n),l=G2(t,n),c=a.get(l);if(c)V2(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var p=BQ(l),f=!p&&ZQ(l),d=!p&&!f&&lJ(l);u=l,p||f||d?BQ(s)?u=s:function(e){return FQ(e)&&vJ(e)}(s)?u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):f?(h=!1,u=C0(l,!0)):d?(h=!1,u=N0(l,!0)):u=[]:MJ(l)||YQ(l)?(u=s,YQ(s)?u=X2(s):(!gJ(s)||yJ(s))&&(u=F0(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),V2(e,n,u)}}function Y2(e,t,n,r,i){e!==t&&UQ(t,function(o,a){if(i||(i=new r1),gJ(o))W2(e,t,a,n,Y2,r,i);else{var s=r?r(G2(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),V2(e,a,s)}},E0)}var q2=Math.max;function $2(e){return function(){return e}}var K2=v0?function(e,t){return v0(e,"toString",{configurable:!0,enumerable:!1,value:$2(t),writable:!0})}:wJ,Z2=Date.now;var Q2=function(e){var t=0,n=0;return function(){var r=Z2(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(K2);function J2(e,t){return Q2(function(e,t,n){return t=q2(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=q2(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}(e,t,wJ),e+"")}var e5=function(e){return J2(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&function(e,t,n){if(!gJ(n))return!1;var r=typeof t;return!!("number"==r?vJ(n)&&JQ(t,n.length):"string"==r&&t in n)&&DJ(n[t],e)}(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}(function(e,t,n){Y2(e,t,n)}),t5=function(e){var t=e.zDepth,n=e.radius,r=e.background,o=e.children,a=e.styles,s=O2(e5({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},void 0===a?{}:a),{"zDepth-1":1===t});return i.createElement("div",{style:s.wrap},i.createElement("div",{style:s.bg}),i.createElement("div",{style:s.content},o))};t5.propTypes={background:xm.string,zDepth:xm.oneOf([0,1,2,3,4,5]),radius:xm.number,styles:xm.object},t5.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var n5=function(){return CQ.Date.now()},r5=/\s/;var i5=/^\s+/;function o5(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&r5.test(e.charAt(t)););return t}(e)+1).replace(i5,"")}var a5=/^[-+]0x[0-9a-f]+$/i,s5=/^0b[01]+$/i,l5=/^0o[0-7]+$/i,c5=parseInt;function u5(e){if("number"==typeof e)return e;if(U1(e))return NaN;if(gJ(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=gJ(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o5(e);var n=s5.test(e);return n||l5.test(e)?c5(e.slice(2),n?2:8):a5.test(e)?NaN:+e}var h5=Math.max,p5=Math.min;function f5(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function d(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=n5();if(d(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-l);return h?p5(n,o-(e-c)):n}(e))}function g(e){return s=void 0,p&&r?f(e):(r=i=void 0,a)}function y(){var e=n5(),n=d(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(m,t),u?f(e):a}(l);if(h)return clearTimeout(s),s=setTimeout(m,t),f(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=u5(t)||0,gJ(n)&&(u=!!n.leading,o=(h="maxWait"in n)?h5(u5(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:g(n5())},y}var d5=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m5=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>o&&(c=o);var u=l/i,h=1-c/o;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return gJ(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),f5(e,t,{leading:r,maxWait:t,trailing:i})}(function(e,t,n){e(t,n)},50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),d5(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,a=t.pointer,s=t.circle,l=O2({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:a,circle:s}},{custom:!!this.props.style});return i.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),i.createElement("div",{style:l.white,className:"saturation-white"},i.createElement("div",{style:l.black,className:"saturation-black"}),i.createElement("div",{style:l.pointer},this.props.pointer?i.createElement(this.props.pointer,this.props):i.createElement("div",{style:l.circle}))))}}]),t}(i.PureComponent||i.Component);function g5(e){return(g5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y5=/^\s+/,v5=/\s+$/;function b5(e,t){if(t=t||{},(e=e||"")instanceof b5)return e;if(!(this instanceof b5))return new b5(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"==typeof e&&(e=function(e){e=e.replace(y5,"").replace(v5,"").toLowerCase();var t,n=!1;if(j5[e])e=j5[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=W5.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=W5.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=W5.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=W5.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=W5.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=W5.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=W5.hex8.exec(e))?{r:H5(t[1]),g:H5(t[2]),b:H5(t[3]),a:X5(t[4]),format:n?"name":"hex8"}:(t=W5.hex6.exec(e))?{r:H5(t[1]),g:H5(t[2]),b:H5(t[3]),format:n?"name":"hex"}:(t=W5.hex4.exec(e))?{r:H5(t[1]+""+t[1]),g:H5(t[2]+""+t[2]),b:H5(t[3]+""+t[3]),a:X5(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=W5.hex3.exec(e))&&{r:H5(t[1]+""+t[1]),g:H5(t[2]+""+t[2]),b:H5(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==g5(e)&&(Y5(e.r)&&Y5(e.g)&&Y5(e.b)?(t=function(e,t,n){return{r:255*F5(e,255),g:255*F5(t,255),b:255*F5(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):Y5(e.h)&&Y5(e.s)&&Y5(e.v)?(r=V5(e.s),i=V5(e.v),t=function(e,t,n){e=6*F5(e,360),t=F5(t,100),n=F5(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*c,g:255*u,b:255*h}}(e.h,r,i),a=!0,s="hsv"):Y5(e.h)&&Y5(e.s)&&Y5(e.l)&&(r=V5(e.s),o=V5(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=F5(e,360),t=F5(t,100),n=F5(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=B5(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function _5(e,t,n){e=F5(e,255),t=F5(t,255),n=F5(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function w5(e,t,n){e=F5(e,255),t=F5(t,255),n=F5(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function T5(e,t,n,r){var i=[U5(Math.round(e).toString(16)),U5(Math.round(t).toString(16)),U5(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function x5(e,t,n,r){return[U5(G5(r)),U5(Math.round(e).toString(16)),U5(Math.round(t).toString(16)),U5(Math.round(n).toString(16))].join("")}function E5(e,t){t=0===t?0:t||10;var n=b5(e).toHsl();return n.s-=t/100,n.s=z5(n.s),b5(n)}function S5(e,t){t=0===t?0:t||10;var n=b5(e).toHsl();return n.s+=t/100,n.s=z5(n.s),b5(n)}function k5(e){return b5(e).desaturate(100)}function O5(e,t){t=0===t?0:t||10;var n=b5(e).toHsl();return n.l+=t/100,n.l=z5(n.l),b5(n)}function P5(e,t){t=0===t?0:t||10;var n=b5(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),b5(n)}function C5(e,t){t=0===t?0:t||10;var n=b5(e).toHsl();return n.l-=t/100,n.l=z5(n.l),b5(n)}function A5(e,t){var n=b5(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,b5(n)}function M5(e){var t=b5(e).toHsl();return t.h=(t.h+180)%360,b5(t)}function I5(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=b5(e).toHsl(),r=[b5(e)],i=360/t,o=1;o<t;o++)r.push(b5({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function R5(e){var t=b5(e).toHsl(),n=t.h;return[b5(e),b5({h:(n+72)%360,s:t.s,l:t.l}),b5({h:(n+216)%360,s:t.s,l:t.l})]}function D5(e,t,n){t=t||6,n=n||30;var r=b5(e).toHsl(),i=360/n,o=[b5(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(b5(r));return o}function N5(e,t){t=t||6;for(var n=b5(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(b5({h:r,s:i,v:o})),o=(o+s)%1;return a}b5.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=B5(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=w5(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=w5(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=_5(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=_5(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return T5(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[U5(Math.round(e).toString(16)),U5(Math.round(t).toString(16)),U5(Math.round(n).toString(16)),U5(G5(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*F5(this._r,255))+"%",g:Math.round(100*F5(this._g,255))+"%",b:Math.round(100*F5(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*F5(this._r,255))+"%, "+Math.round(100*F5(this._g,255))+"%, "+Math.round(100*F5(this._b,255))+"%)":"rgba("+Math.round(100*F5(this._r,255))+"%, "+Math.round(100*F5(this._g,255))+"%, "+Math.round(100*F5(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L5[T5(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+x5(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=b5(e);n="#"+x5(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return b5(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(O5,arguments)},brighten:function(){return this._applyModification(P5,arguments)},darken:function(){return this._applyModification(C5,arguments)},desaturate:function(){return this._applyModification(E5,arguments)},saturate:function(){return this._applyModification(S5,arguments)},greyscale:function(){return this._applyModification(k5,arguments)},spin:function(){return this._applyModification(A5,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(D5,arguments)},complement:function(){return this._applyCombination(M5,arguments)},monochromatic:function(){return this._applyCombination(N5,arguments)},splitcomplement:function(){return this._applyCombination(R5,arguments)},triad:function(){return this._applyCombination(I5,[3])},tetrad:function(){return this._applyCombination(I5,[4])}},b5.fromRatio=function(e,t){if("object"==g5(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:V5(e[r]));e=n}return b5(e,t)},b5.equals=function(e,t){return!(!e||!t)&&b5(e).toRgbString()==b5(t).toRgbString()},b5.random=function(){return b5.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},b5.mix=function(e,t,n){n=0===n?0:n||50;var r=b5(e).toRgb(),i=b5(t).toRgb(),o=n/100;return b5({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},b5.readability=function(e,t){var n=b5(e),r=b5(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},b5.isReadable=function(e,t,n){var r,i,o=b5.readability(e,t);switch(i=!1,r=function(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},b5.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=b5.readability(e,t[c]))>l&&(l=r,s=b5(t[c]));return b5.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,b5.mostReadable(e,["#fff","#000"],n))};var j5=b5.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L5=b5.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(j5);function B5(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function F5(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function z5(e){return Math.min(1,Math.max(0,e))}function H5(e){return parseInt(e,16)}function U5(e){return 1==e.length?"0"+e:""+e}function V5(e){return e<=1&&(e=100*e+"%"),e}function G5(e){return Math.round(255*parseFloat(e)).toString(16)}function X5(e){return H5(e)/255}var W5=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y5(e){return!!W5.CSS_UNIT.exec(e)}var q5=function(e){var t=0,n=0;return function(e,t){(BQ(e)?y0:a0)(e,TJ(t))}(["r","g","b","a","h","s","l","v"],function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}}),t===n&&e},$5=function(e,t){var n=e.hex?b5(e.hex):b5(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},K5=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&b5(e).isValid()},Z5=function(e){if(!e)return"#fff";var t=$5(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Q5=function(e,t){return b5(t+" ("+e.replace("\xb0","")+")")._ok},J5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e9=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var t9=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(q5(e)){var r=$5(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(q5(e)){var r=$5(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=J5({},$5(e.color,0)),t.debounce=f5(function(e,t,n){e(t,n)},100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),e9(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.createElement(e,J5({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return J5({},$5(e.color,t.oldHue))}}]),n}(i.PureComponent||i.Component);return t.propTypes=J5({},e.propTypes),t.defaultProps=J5({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},n9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r9=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i9(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};const a9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n=i9(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},i9(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r9(r,[{key:"render",value:function(){return i.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.createElement(e,n9({},this.props,this.state)))}}]),r}(i.Component)}(function(e){var t=e.color,n=e.style,r=e.onClick,o=void 0===r?function(){}:r,a=e.onHover,s=e.title,l=void 0===s?t:s,c=e.children,u=e.focus,h=e.focusStyle,p="transparent"===t,f=O2({default:{swatch:o9({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?void 0===h?{}:h:{})}}),d={};return a&&(d.onMouseOver=function(e){return a(t,e)}),i.createElement("div",o9({style:f.swatch,onClick:function(e){return o(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&o(t,e)}},d),c,p&&i.createElement(M2,{borderRadius:f.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))});var s9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l9=function(e){var t=e.rgb,n=e.hsl,r=e.width,o=e.height,a=e.onChange,s=e.direction,l=e.style,c=e.renderers,u=e.pointer,h=e.className,p=void 0===h?"":h,f=O2({default:{picker:{position:"relative",width:r,height:o},alpha:{radius:"2px",style:l}}});return i.createElement("div",{style:f.picker,className:"alpha-picker "+p},i.createElement(N2,s9({},f.alpha,{rgb:t,hsl:n,pointer:u,renderers:c,onChange:a,direction:s})))};l9.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=O2({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return i.createElement("div",{style:n.picker})}},t9(l9);var c9=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,o=O2({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return i.createElement("div",{style:o.swatches},l0(t,function(e){return i.createElement(a9,{key:e,color:e,style:o.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})}),i.createElement("div",{style:o.clear}))},u9=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p="transparent"===r,f=function(e,n){K5(e)&&t({hex:e,source:"hex"},n)},d=O2(e5({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Z5(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":"hide"===s});return i.createElement("div",{style:d.card,className:"block-picker "+h},i.createElement("div",{style:d.triangle}),i.createElement("div",{style:d.head},p&&i.createElement(M2,{borderRadius:"6px 6px 0 0"}),i.createElement("div",{style:d.label},r)),i.createElement("div",{style:d.body},i.createElement(c9,{colors:o,onClick:f,onSwatchHover:n}),i.createElement(F2,{style:{input:d.input},value:r,onChange:f})))};u9.propTypes={width:xm.oneOfType([xm.string,xm.number]),colors:xm.arrayOf(xm.string),triangle:xm.oneOf(["top","hide"]),styles:xm.object},u9.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},t9(u9);var h9="#ffcdd2",p9="#e57373",f9="#f44336",d9="#d32f2f",m9="#b71c1c",g9="#f8bbd0",y9="#f06292",v9="#e91e63",b9="#c2185b",_9="#880e4f",w9="#e1bee7",T9="#ba68c8",x9="#9c27b0",E9="#7b1fa2",S9="#4a148c",k9="#d1c4e9",O9="#9575cd",P9="#673ab7",C9="#512da8",A9="#311b92",M9="#c5cae9",I9="#7986cb",R9="#3f51b5",D9="#303f9f",N9="#1a237e",j9="#bbdefb",L9="#64b5f6",B9="#2196f3",F9="#1976d2",z9="#0d47a1",H9="#b3e5fc",U9="#4fc3f7",V9="#03a9f4",G9="#0288d1",X9="#01579b",W9="#b2ebf2",Y9="#4dd0e1",q9="#00bcd4",$9="#0097a7",K9="#006064",Z9="#b2dfdb",Q9="#4db6ac",J9="#009688",e4="#00796b",t4="#004d40",n4="#c8e6c9",r4="#81c784",i4="#4caf50",o4="#388e3c",a4="#dcedc8",s4="#aed581",l4="#8bc34a",c4="#689f38",u4="#33691e",h4="#f0f4c3",p4="#dce775",f4="#cddc39",d4="#afb42b",m4="#827717",g4="#fff9c4",y4="#fff176",v4="#ffeb3b",b4="#fbc02d",_4="#f57f17",w4="#ffecb3",T4="#ffd54f",x4="#ffc107",E4="#ffa000",S4="#ff6f00",k4="#ffe0b2",O4="#ffb74d",P4="#ff9800",C4="#f57c00",A4="#e65100",M4="#ffccbc",I4="#ff8a65",R4="#ff5722",D4="#e64a19",N4="#bf360c",j4="#d7ccc8",L4="#a1887f",B4="#795548",F4="#5d4037",z4="#3e2723",H4="#cfd8dc",U4="#90a4ae",V4="#607d8b",G4="#455a64",X4="#263238",W4=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,o=e.hover,a=e.active,s=e.circleSize,l=e.circleSpacing,c=O2({default:{swatch:{width:s,height:s,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:o,active:a});return i.createElement("div",{style:c.swatch},i.createElement(a9,{style:c.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};W4.defaultProps={circleSize:28,circleSpacing:14};const Y4=S2(W4);var q4=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,o=e.colors,a=e.hex,s=e.circleSize,l=e.styles,c=void 0===l?{}:l,u=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=O2(e5({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),d=function(e,t){return n({hex:e,source:"hex"},t)};return i.createElement("div",{style:f.card,className:"circle-picker "+p},l0(o,function(e){return i.createElement(Y4,{key:e,color:e,onClick:d,onSwatchHover:r,active:a===e.toLowerCase(),circleSize:s,circleSpacing:u})}))};function $4(e){return void 0===e}q4.propTypes={width:xm.oneOfType([xm.string,xm.number]),circleSize:xm.number,circleSpacing:xm.number,styles:xm.object},q4.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[f9,v9,x9,P9,R9,B9,V9,q9,J9,i4,l4,f4,v4,x4,P4,R4,B4,V4],styles:{}},t9(q4);var K4={};Object.defineProperty(K4,"__esModule",{value:!0});var Z4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q4=function(e){return e&&e.__esModule?e:{default:e}}(i);var J4=K4.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,o=e.height,a=void 0===o?24:o,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return Q4.default.createElement("svg",Z4({viewBox:"0 0 24 24",style:Z4({fill:n,width:i,height:a},l)},c),Q4.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},e3=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var t3=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?K5(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number($4(e.s)?n.props.hsl.s:e.s),l:Number($4(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),e3(t,[{key:"render",value:function(){var e=this,t=O2({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),i.createElement("div",{style:t.alpha},i.createElement(F2,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=i.createElement("div",{style:t.fields,className:"flexbox-fix"},i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),i.createElement("div",{style:t.field},i.createElement(F2,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),i.createElement("div",{style:t.alpha},i.createElement(F2,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),i.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,i.createElement("div",{style:t.toggle},i.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},i.createElement(J4,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(i.Component);t3.defaultProps={view:"hex"};var n3=function(){var e=O2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.createElement("div",{style:e.picker})},r3=function(){var e=O2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return i.createElement("div",{style:e.picker})},i3=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,o=e.rgb,a=e.hsl,s=e.hsv,l=e.hex,c=e.renderers,u=e.styles,h=void 0===u?{}:u,p=e.className,f=void 0===p?"":p,d=e.defaultView,m=O2(e5({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:r});return i.createElement("div",{style:m.picker,className:"chrome-picker "+f},i.createElement("div",{style:m.saturation},i.createElement(m5,{style:m.Saturation,hsl:a,hsv:s,pointer:r3,onChange:n})),i.createElement("div",{style:m.body},i.createElement("div",{style:m.controls,className:"flexbox-fix"},i.createElement("div",{style:m.color},i.createElement("div",{style:m.swatch},i.createElement("div",{style:m.active}),i.createElement(M2,{renderers:c}))),i.createElement("div",{style:m.toggles},i.createElement("div",{style:m.hue},i.createElement(U2,{style:m.Hue,hsl:a,pointer:n3,onChange:n})),i.createElement("div",{style:m.alpha},i.createElement(N2,{style:m.Alpha,rgb:o,hsl:a,pointer:n3,renderers:c,onChange:n})))),i.createElement(t3,{rgb:o,hsl:a,hex:l,view:d,onChange:n,disableAlpha:r})))};i3.propTypes={width:xm.oneOfType([xm.string,xm.number]),disableAlpha:xm.bool,styles:xm.object,defaultView:xm.oneOf(["hex","rgb","hsl"])},i3.defaultProps={width:225,disableAlpha:!1,styles:{}},t9(i3);var o3=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=e.active,s=O2({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Z5(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return i.createElement(a9,{style:s.color,color:t,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},i.createElement("div",{style:s.dot}))},a3=function(e){var t=e.hex,n=e.rgb,r=e.onChange,o=O2({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return i.createElement("div",{style:o.fields,className:"flexbox-fix"},i.createElement("div",{style:o.active}),i.createElement(F2,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:t,onChange:a}),i.createElement(F2,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:a}),i.createElement(F2,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:a}),i.createElement(F2,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:a}))},s3=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,o=e.hex,a=e.rgb,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=O2(e5({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),p=function(e,n){e.hex?K5(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return i.createElement(t5,{style:h.Compact,styles:l},i.createElement("div",{style:h.compact,className:"compact-picker "+u},i.createElement("div",null,l0(r,function(e){return i.createElement(o3,{key:e,color:e,active:e.toLowerCase()===o,onClick:p,onSwatchHover:n})}),i.createElement("div",{style:h.clear})),i.createElement(a3,{hex:o,rgb:a,onChange:p})))};s3.propTypes={colors:xm.arrayOf(xm.string),styles:xm.object},s3.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},t9(s3);const l3=S2(function(e){var t=e.hover,n=e.color,r=e.onClick,o=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=O2({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return i.createElement("div",{style:s.swatch},i.createElement(a9,{color:n,onClick:r,onHover:o,focusStyle:a}))});var c3=function(e){var t=e.width,n=e.colors,r=e.onChange,o=e.onSwatchHover,a=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,h=O2(e5({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),p=function(e,t){return r({hex:e,source:"hex"},t)};return i.createElement("div",{style:h.card,className:"github-picker "+u},i.createElement("div",{style:h.triangleShadow}),i.createElement("div",{style:h.triangle}),l0(n,function(e){return i.createElement(l3,{color:e,key:e,onClick:p,onSwatchHover:o})}))};c3.propTypes={width:xm.oneOfType([xm.string,xm.number]),colors:xm.arrayOf(xm.string),triangle:xm.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:xm.object},c3.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},t9(c3);var u3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h3=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.hsl,a=e.direction,s=e.pointer,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=O2(e5({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},c));return i.createElement("div",{style:p.picker,className:"hue-picker "+h},i.createElement(U2,u3({},p.hue,{hsl:o,pointer:s,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:a})))};h3.propTypes={styles:xm.object},h3.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=O2({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return i.createElement("div",{style:n.picker})},styles:{}},t9(h3);t9(function(e){var t=e.onChange,n=e.hex,r=e.rgb,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=O2(e5({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(e,n){e.hex?K5(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return i.createElement(t5,{styles:a},i.createElement("div",{style:c.material,className:"material-picker "+l},i.createElement(F2,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:u}),i.createElement("div",{style:c.split,className:"flexbox-fix"},i.createElement("div",{style:c.third},i.createElement(F2,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:u})),i.createElement("div",{style:c.third},i.createElement(F2,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:u})),i.createElement("div",{style:c.third},i.createElement(F2,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:u})))))});var p3=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,o=e.hex,a=O2({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,i){e["#"]?K5(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return i.createElement("div",{style:a.fields},i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),i.createElement("div",{style:a.divider}),i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:s}),i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:s}),i.createElement(F2,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:s}),i.createElement("div",{style:a.divider}),i.createElement(F2,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:o.replace("#",""),onChange:s}),i.createElement("div",{style:a.fieldSymbols},i.createElement("div",{style:a.symbol},"\xb0"),i.createElement("div",{style:a.symbol},"%"),i.createElement("div",{style:a.symbol},"%")))},f3=function(e){var t=e.hsl,n=O2({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return i.createElement("div",{style:n.picker})},d3=function(){var e=O2({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return i.createElement("div",{style:e.pointer},i.createElement("div",{style:e.left},i.createElement("div",{style:e.leftInside})),i.createElement("div",{style:e.right},i.createElement("div",{style:e.rightInside})))},m3=function(e){var t=e.onClick,n=e.label,r=e.children,o=e.active,a=O2({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return i.createElement("div",{style:a.button,onClick:t},n||r)},g3=function(e){var t=e.rgb,n=e.currentColor,r=O2({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return i.createElement("div",null,i.createElement("div",{style:r.label},"new"),i.createElement("div",{style:r.swatches},i.createElement("div",{style:r.new}),i.createElement("div",{style:r.current})),i.createElement("div",{style:r.label},"current"))},y3=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v3=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),y3(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,o=void 0===r?"":r,a=O2(e5({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return i.createElement("div",{style:a.picker,className:"photoshop-picker "+o},i.createElement("div",{style:a.head},this.props.header),i.createElement("div",{style:a.body,className:"flexbox-fix"},i.createElement("div",{style:a.saturation},i.createElement(m5,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:f3,onChange:this.props.onChange})),i.createElement("div",{style:a.hue},i.createElement(U2,{direction:"vertical",hsl:this.props.hsl,pointer:d3,onChange:this.props.onChange})),i.createElement("div",{style:a.controls},i.createElement("div",{style:a.top,className:"flexbox-fix"},i.createElement("div",{style:a.previews},i.createElement(g3,{rgb:this.props.rgb,currentColor:this.state.currentColor})),i.createElement("div",{style:a.actions},i.createElement(m3,{label:"OK",onClick:this.props.onAccept,active:!0}),i.createElement(m3,{label:"Cancel",onClick:this.props.onCancel}),i.createElement(p3,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(i.Component);v3.propTypes={header:xm.string,styles:xm.object},v3.defaultProps={header:"Color Picker",styles:{}},t9(v3);var b3=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.disableAlpha,s=O2({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(e,i){e.hex?K5(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return i.createElement("div",{style:s.fields,className:"flexbox-fix"},i.createElement("div",{style:s.double},i.createElement(F2,{style:{input:s.input,label:s.label},label:"hex",value:o.replace("#",""),onChange:l})),i.createElement("div",{style:s.single},i.createElement(F2,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.single},i.createElement(F2,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.single},i.createElement(F2,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),i.createElement("div",{style:s.alpha},i.createElement(F2,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))},_3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w3=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=O2({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){r({hex:e,source:"hex"},t)};return i.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map(function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return i.createElement("div",{key:n,style:a.swatchWrap},i.createElement(a9,_3({},t,{style:a.swatch,onClick:s,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))}))};w3.propTypes={colors:xm.arrayOf(xm.oneOfType([xm.string,xm.shape({color:xm.string,title:xm.string})])).isRequired};var T3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x3=function(e){var t=e.width,n=e.rgb,r=e.hex,o=e.hsv,a=e.hsl,s=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,h=e.renderers,p=e.styles,f=void 0===p?{}:p,d=e.className,m=void 0===d?"":d,g=O2(e5({default:T3({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:c});return i.createElement("div",{style:g.picker,className:"sketch-picker "+m},i.createElement("div",{style:g.saturation},i.createElement(m5,{style:g.Saturation,hsl:a,hsv:o,onChange:s})),i.createElement("div",{style:g.controls,className:"flexbox-fix"},i.createElement("div",{style:g.sliders},i.createElement("div",{style:g.hue},i.createElement(U2,{style:g.Hue,hsl:a,onChange:s})),i.createElement("div",{style:g.alpha},i.createElement(N2,{style:g.Alpha,rgb:n,hsl:a,renderers:h,onChange:s}))),i.createElement("div",{style:g.color},i.createElement(M2,null),i.createElement("div",{style:g.activeColor}))),i.createElement(b3,{rgb:n,hsl:a,hex:r,onChange:s,disableAlpha:c}),i.createElement(w3,{colors:u,onClick:s,onSwatchHover:l}))};x3.propTypes={disableAlpha:xm.bool,width:xm.oneOfType([xm.string,xm.number]),styles:xm.object},x3.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const E3=t9(x3);var S3=function(e){var t=e.hsl,n=e.offset,r=e.onClick,o=void 0===r?function(){}:r,a=e.active,s=e.first,l=e.last,c=O2({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:l});return i.createElement("div",{style:c.swatch,onClick:function(e){return o({h:t.h,s:.5,l:n,source:"hsl"},e)}})},k3=function(e){var t=e.onClick,n=e.hsl,r=O2({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return i.createElement("div",{style:r.swatches},i.createElement("div",{style:r.swatch},i.createElement(S3,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:t,first:!0})),i.createElement("div",{style:r.swatch},i.createElement(S3,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(S3,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(S3,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:t})),i.createElement("div",{style:r.swatch},i.createElement(S3,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:t,last:!0})),i.createElement("div",{style:r.clear}))},O3=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,o=e.styles,a=void 0===o?{}:o,s=e.className,l=void 0===s?"":s,c=O2(e5({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return i.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},i.createElement("div",{style:c.hue},i.createElement(U2,{style:c.Hue,hsl:t,pointer:r,onChange:n})),i.createElement("div",{style:c.swatches},i.createElement(k3,{hsl:t,onClick:n})))};O3.propTypes={styles:xm.object},O3.defaultProps={pointer:function(){var e=O2({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return i.createElement("div",{style:e.picker})},styles:{}},t9(O3);var P3={};Object.defineProperty(P3,"__esModule",{value:!0});var C3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A3=function(e){return e&&e.__esModule?e:{default:e}}(i);var M3=P3.default=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,i=void 0===r?24:r,o=e.height,a=void 0===o?24:o,s=e.style,l=void 0===s?{}:s,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return A3.default.createElement("svg",C3({viewBox:"0 0 24 24",style:C3({fill:n,width:i,height:a},l)},c),A3.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},I3=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,o=e.onSwatchHover,a=e.first,s=e.last,l=e.active,c=O2({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Z5(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return i.createElement(a9,{color:t,style:c.color,onClick:r,onHover:o,focusStyle:{boxShadow:"0 0 4px "+t}},i.createElement("div",{style:c.check},i.createElement(M3,null)))},R3=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,o=e.active,a=O2({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return i.createElement("div",{style:a.group},l0(r,function(e,a){return i.createElement(I3,{key:e,color:e,active:e.toLowerCase()===o,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})}))},D3=function(e){var t=e.width,n=e.height,r=e.onChange,o=e.onSwatchHover,a=e.colors,s=e.hex,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=O2(e5({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),f=function(e,t){return r({hex:e,source:"hex"},t)};return i.createElement("div",{style:p.picker,className:"swatches-picker "+h},i.createElement(t5,null,i.createElement("div",{style:p.overflow},i.createElement("div",{style:p.body},l0(a,function(e){return i.createElement(R3,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:o})}),i.createElement("div",{style:p.clear})))))};D3.propTypes={width:xm.oneOfType([xm.string,xm.number]),height:xm.oneOfType([xm.string,xm.number]),colors:xm.arrayOf(xm.arrayOf(xm.string)),styles:xm.object},D3.defaultProps={width:320,height:240,colors:[[m9,d9,f9,p9,h9],[_9,b9,v9,y9,g9],[S9,E9,x9,T9,w9],[A9,C9,P9,O9,k9],[N9,D9,R9,I9,M9],[z9,F9,B9,L9,j9],[X9,G9,V9,U9,H9],[K9,$9,q9,Y9,W9],[t4,e4,J9,Q9,Z9],["#194D33",o4,i4,r4,n4],[u4,c4,l4,s4,a4],[m4,d4,f4,p4,h4],[_4,b4,v4,y4,g4],[S4,E4,x4,T4,w4],[A4,C4,P4,O4,k4],[N4,D4,R4,I4,M4],[z4,F4,B4,L4,j4],[X4,G4,V4,U4,H4],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},t9(D3);var N3=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,o=e.colors,a=e.width,s=e.triangle,l=e.styles,c=void 0===l?{}:l,u=e.className,h=void 0===u?"":u,p=O2(e5({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){K5(e)&&t({hex:e,source:"hex"},n)};return i.createElement("div",{style:p.card,className:"twitter-picker "+h},i.createElement("div",{style:p.triangleShadow}),i.createElement("div",{style:p.triangle}),i.createElement("div",{style:p.body},l0(o,function(e,t){return i.createElement(a9,{key:t,color:e,hex:e,style:p.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})}),i.createElement("div",{style:p.hash},"#"),i.createElement(F2,{label:null,style:{input:p.input},value:r.replace("#",""),onChange:f}),i.createElement("div",{style:p.clear})))};N3.propTypes={width:xm.oneOfType([xm.string,xm.number]),triangle:xm.oneOf(["hide","top-left","top-right"]),colors:xm.arrayOf(xm.string),styles:xm.object},N3.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},t9(N3);var j3=function(e){var t=O2({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return i.createElement("div",{style:t.picker})};j3.propTypes={hsl:xm.shape({h:xm.number,s:xm.number,l:xm.number,a:xm.number})},j3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var L3=function(e){var t=O2({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return i.createElement("div",{style:t.picker})};L3.propTypes={hsl:xm.shape({h:xm.number,s:xm.number,l:xm.number,a:xm.number})},L3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var B3=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,o=e.hex,a=e.hsv,s=function(e,n){if(e.hex)K5(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");Q5(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");Q5(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var o=e.hsl.split(",");Q5(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("\xb0",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},n))}},l=O2({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(a.h)+"\xb0, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return i.createElement("div",{style:l.wrap,className:"flexbox-fix"},i.createElement("div",{style:l.fields},i.createElement("div",{style:l.double},i.createElement(F2,{style:{input:l.input,label:l.label},label:"hex",value:o,onChange:s})),i.createElement("div",{style:l.column},i.createElement("div",{style:l.single},i.createElement(F2,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:s})),i.createElement("div",{style:l.single},i.createElement(F2,{style:{input:l.input2,label:l.label2},label:"hsv",value:h,onChange:s})),i.createElement("div",{style:l.single},i.createElement(F2,{style:{input:l.input2,label:l.label2},label:"hsl",value:u,onChange:s})))))},F3=function(e){var t=e.width,n=e.onChange,r=e.rgb,o=e.hsl,a=e.hsv,s=e.hex,l=e.header,c=e.styles,u=void 0===c?{}:c,h=e.className,p=void 0===h?"":h,f=O2(e5({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return i.createElement("div",{style:f.picker,className:"google-picker "+p},i.createElement("div",{style:f.head},l),i.createElement("div",{style:f.swatch}),i.createElement("div",{style:f.saturation},i.createElement(m5,{hsl:o,hsv:a,pointer:j3,onChange:n})),i.createElement("div",{style:f.body},i.createElement("div",{style:f.controls,className:"flexbox-fix"},i.createElement("div",{style:f.hue},i.createElement(U2,{style:f.Hue,hsl:o,radius:"4px",pointer:L3,onChange:n}))),i.createElement(B3,{rgb:r,hsl:o,hex:s,hsv:a,onChange:n})))};function z3(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H3(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H3(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function U3(e,t,n){return t=G3(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V3()?Reflect.construct(t,n||[],G3(e).constructor):t.apply(e,n))}function V3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V3=function(){return!!e})()}function G3(e){return(G3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X3(e,t){return(X3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}F3.propTypes={width:xm.oneOfType([xm.string,xm.number]),styles:xm.object,header:xm.string},F3.defaultProps={width:652,styles:{},header:"Color picker"},t9(F3);let W3=function(e){function t(e){var n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),n=U3(this,t,[e]);const r=kc(e.color);return n.state={displayColorPicker:!1,color:{r:r.r,g:r.g,b:r.b,a:r.opacity}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X3(e,t)}(t,e),z3(t,[{key:"handleClick",value:function(){this.setState(e=>({displayColorPicker:!e.displayColorPicker}))}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(e){const t=e.rgb,n=`rgba(${t.r},${t.g},${t.b},${t.a})`;this.props.onChange(n),this.setState({color:e.rgb})}},{key:"render",value:function(){const e=O2({default:{color:{width:"32px",height:"14px",borderRadius:"2px",background:`rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",cursor:"pointer",borderRadius:"1px"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return i.createElement("div",null,i.createElement("div",{onClick:this.handleClick.bind(this),style:e.swatch},i.createElement("div",{style:e.color})),this.state.displayColorPicker?i.createElement("div",{style:e.popover},i.createElement("div",{onClick:this.handleClose.bind(this),style:e.cover}),i.createElement(E3,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}])}(i.Component);function Y3(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q3(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q3(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function $3(e,t,n){return t=Z3(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K3()?Reflect.construct(t,n||[],Z3(e).constructor):t.apply(e,n))}function K3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K3=function(){return!!e})()}function Z3(e){return(Z3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q3(e,t){return(Q3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}W3.propTypes={color:xm.string,onChange:xm.func};let J3=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$3(this,t,[e])).state={colors:e.track.options.colorRange.slice()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q3(e,t)}(t,e),Y3(t,[{key:"handleColorsChanged",value:function(e){this.setState({colors:e})}},{key:"handleSubmit",value:function(){this.props.track.options.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState(e=>({colors:e.colors.concat(e.colors[e.colors.length-1])}))}},{key:"handleRemoveColor",value:function(e){this.setState(t=>({colors:t.colors.slice(0,e).concat(t.colors.slice(e+1))}))}},{key:"render",value:function(){const e=JSON.parse(JSON.stringify(this.props.track)),t=Object.assign(e,{options:{colorRange:this.state.colors}}),n={editable:!1,zoomFixed:!0,views:[{uid:`hmo-${this.props.track.uid}`,initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[t]},layout:{x:0,y:0,h:12,w:12,i:`hmo-${this.props.track.id}`}}]},r=this.state.colors.map((e,t)=>{const n=this.state.colors.length>2&&t===this.state.colors.length-1?i.createElement("div",{onClick:()=>this.handleRemoveColor(t),style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2,cursor:"pointer"}},i.createElement("svg",{height:"10px",style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10}},i.createElement("title",null,"Remove"),i.createElement("use",{xlinkHref:"#cross"}))):null;return i.createElement("div",{key:`l${t}`,style:{borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",position:"relative",outline:"none"}},n,i.createElement(W3,{key:t,color:this.state.colors[t],onChange:e=>{this.setState(n=>{const r=n.colors.slice();return r[t]=e,{colors:r}},()=>{this.handleColorsChanged(this.state.colors)})}}))}).reverse(),o=this.state.colors.length<10?i.createElement("div",{onClick:this.handleAddColor.bind(this),style:{position:"relative",outline:"none",height:"25px",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",cursor:"pointer"}},i.createElement("div",{style:{textAlign:"center",width:"32px",height:"14px"}},i.createElement("svg",{height:"100%",style:{opacity:.5,margin:"auto",display:"block"},width:"10px"},i.createElement("title",null,"Add"),i.createElement("use",{xlinkHref:"#plus"})))):null;return i.createElement(uY,{okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmit.bind(this),title:"Custom Color Map"},i.createElement("table",{className:"table-track-options"},i.createElement("thead",null),i.createElement("tbody",{style:{verticalAlign:"top"}},i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},"Preview")),i.createElement("tr",null,i.createElement("td",{className:"td-track-options","aria-label":"Track options"},i.createElement("div",{style:{width:200}},i.createElement(Kbe,{options:{bounded:!1},viewConfig:n}))))))),i.createElement("td",{className:"td-track-options"},i.createElement("table",null,i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},"Colors")),i.createElement("tr",null,i.createElement("td",{className:"td-track-options"},o,i.createElement("div",{style:{position:"relative"}},r))))))))))}}])}(i.Component);J3.propTypes={handleCancel:xm.func,onCancel:xm.func,onSubmit:xm.func,track:xm.object,xScale:xm.object,yScale:xm.object};const e8=e=>{if(!e.header)return[];const t=e.header.split("\t"),n=[];for(let r=0;r<t.length;r++)n.push({name:t[r],value:r+1});return n},t8=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.reduce((e,r)=>(e[r]={name:`${r*n}${t}`,value:r},e),{})},n8={yes:{name:"Yes",value:!0},no:{name:"No",value:!1}},r8={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},i8=t8([0,1,2,3,5,8,13,21]),o8=Object.assign(i8,{none:{name:"none",value:"none"}}),a8=t8([0,2,4,8,16,32,64,128,256]),s8=t8([0,.2,.4,.6,.8,1],"%",100),l8={axisLabelFormatting:{name:"Axis Label Formatting",inlineOptions:{normal:{name:"normal",value:"normal"},scientific:{name:"scientific",value:"scientific"}}},flipDiagonal:{name:"Flip Across Diagonal",inlineOptions:{none:{name:"No",value:"none"},yes:{name:"Yes",value:"yes"},copy:{name:"Copy",value:"copy"}}},heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},extent:{name:"Extent",inlineOptions:{full:{name:"Full",value:"full"},upperRight:{name:"Upper Right",value:"upper-right"},lowerLeft:{name:"Lower Left",value:"lower-left"}}},labelLeftMargin:{name:"Label Left Margin",inlineOptions:a8},labelRightMargin:{name:"Label Right Margin",inlineOptions:a8},labelTopMargin:{name:"Label Top Margin",inlineOptions:a8},labelBottomMargin:{name:"Label Bottom Margin",inlineOptions:a8},labelShowResolution:{name:"Label Show Resolution",inlineOptions:n8},labelShowAssembly:{name:"Label Show Assembly",inlineOptions:n8},lineStrokeWidth:{name:"Stroke Width",inlineOptions:i8},strokeSingleSeries:{name:"Draw single series",generateOptions:e=>{const t=[];if(e.row_infos)for(let n=0;n<e.row_infos.length;n++)t.push({name:n+1,value:n+1});return t.push({name:"All",value:"all"}),t.push({name:"None",value:"none"}),t}},strokeWidthAndNone:{name:"Stroke Width",inlineOptions:o8},trackBorderWidth:{name:"Track Border Width",inlineOptions:i8},separatePlusMinusStrands:{name:"Separate +/- strands",inlineOptions:n8},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:n8},showTexts:{name:"Show texts",inlineOptions:n8},staggered:{name:"Staggered",inlineOptions:n8},minSquareSize:{name:"Minimum size",inlineOptions:o8},pointSize:{name:"Point Size",inlineOptions:i8},pointColor:{name:"Point Color",inlineOptions:r8},trackBorderColor:{name:"Track Border Color",inlineOptions:r8},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:r8},plusStrandColor:{name:"+ Strand Color",inlineOptions:r8},lineStrokeColor:{name:"Stroke color",inlineOptions:r8},projectionStrokeColor:{name:"Stroke color",inlineOptions:r8},projectionFillColor:{name:"Fill color",inlineOptions:r8},stroke:{name:"Stroke Color",inlineOptions:r8},strokeColor:{name:"Stroke color",inlineOptions:r8},fill:{name:"Fill Color",inlineOptions:r8},color:{name:"Color",inlineOptions:r8},fontColor:{name:"Font color",inlineOptions:r8},fillColor:{name:"Fill color",inlineOptions:r8},barFillColor:{name:"Fill color",inlineOptions:r8},barFillColorTop:{name:"Top Fill color",inlineOptions:r8},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:r8},barOpacity:{name:"Bar opacity",inlineOptions:s8},viewNameOpacity:{name:"View name opacity",inlineOptions:s8},zeroLineVisible:{name:"Zero line visible",inlineOptions:n8},zeroLineColor:{name:"Zero line color",inlineOptions:r8},zeroLineOpacity:{name:"Zero line opacity",inlineOptions:t8([.2,.4,.6,.8,1],"%",100)},fillOpacity:{name:"Fill Opacity",inlineOptions:s8},strokeOpacity:{name:"Stroke Opacity",inlineOptions:s8},strokePos:{name:"Stroke Position",inlineOptions:{aroundInner:{name:"Around Inner",value:"around"},aroundCenter:{name:"Around Center",value:null},hidden:{name:"Hidden",value:"hidden"},top:{name:"Top",value:"top"},right:{name:"Right",value:"right"},bottom:{name:"Bottom",value:"bottom"},left:{name:"Left",value:"left"}}},barBorder:{name:"Bar border",inlineOptions:n8},scaledHeight:{name:"Scaled height",inlineOptions:n8},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:r8},rectangleDomainFillColor:{name:"Fill color",inlineOptions:r8},rectangleDomainFillOpacity:{name:"Fill opacity",inlineOptions:s8},rectangleDomainOpacity:{name:"Opacity",inlineOptions:s8},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:n8},showTooltip:{name:"Show Tooltip",inlineOptions:n8},nanAsZero:{name:"NaN as Zero",inlineOptions:n8},fontSize:{name:"Font Size",inlineOptions:t8([8,9,10,11,12,14,16,18,24],"px")},tickPositions:{name:"Tick Positions",inlineOptions:{even:{name:"Even",value:"even"},ends:{name:"Ends",value:"ends"}}},tickFormat:{name:"Tick Format",inlineOptions:{plain:{name:"Plain",value:"plain"},si:{name:"SI",value:"si"}}},colorEncoding:{name:"Color Encode Annotations",inlineOptions:{none:{name:"None",value:null},itemRgb:{name:"itemRgb",value:"itemRgb"}},generateOptions:e8},fontIsAligned:{name:"Left-Align Font",inlineOptions:n8},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},axisMargin:{name:"Axis Margin",inlineOptions:t8([0,10,20,30,40,50,100,200,400],"px")},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:r8},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:s8},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:{...r8,use_stroke:{name:"Glyph color",value:"[glyph-color]"}}},labelPosition:{name:"Label Position",inlineOptions:{l:{name:"Left",value:"left"},r:{name:"Right",value:"right"},ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},t:{name:"Top",value:"top"},b:{name:"Bottom",value:"bottom"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:s8},geneAnnotationHeight:{name:"Gene Annotation Height",inlineOptions:{8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16}}},annotationHeight:{name:"Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},scaled:{name:"scaled",value:"scaled"}}},maxAnnotationHeight:{name:"Max Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},none:{name:"none",value:null}}},annotationStyle:{name:"Annotation Style",inlineOptions:{box:{name:"Box",value:"box"},segment:{name:"Segment",value:"segment"}}},geneLabelPosition:{name:"Gene Label Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},geneStrandSpacing:{name:"Gene Strand Spacing",inlineOptions:{2:{name:"2px",value:2},4:{name:"4px",value:4},8:{name:"8px",value:8}}},labelBackgroundColor:{name:"Label Background Color",inlineOptions:r8},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:s8},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},magma:{name:"magma",value:["rgba(0,0,3,1)","rgba(0,0,4,1)","rgba(0,0,6,1)","rgba(1,0,7,1)","rgba(1,1,9,1)","rgba(1,1,11,1)","rgba(2,2,13,1)","rgba(2,2,15,1)","rgba(3,3,17,1)","rgba(4,3,19,1)","rgba(4,4,21,1)","rgba(5,4,23,1)","rgba(6,5,25,1)","rgba(7,5,27,1)","rgba(8,6,29,1)","rgba(9,7,32,1)","rgba(10,7,34,1)","rgba(11,8,36,1)","rgba(12,9,38,1)","rgba(13,10,40,1)","rgba(14,10,42,1)","rgba(15,11,45,1)","rgba(16,12,47,1)","rgba(17,12,49,1)","rgba(19,13,51,1)","rgba(20,13,54,1)","rgba(21,14,56,1)","rgba(22,14,58,1)","rgba(23,15,61,1)","rgba(25,15,63,1)","rgba(26,16,66,1)","rgba(27,16,68,1)","rgba(28,16,70,1)","rgba(30,17,73,1)","rgba(31,17,75,1)","rgba(33,17,78,1)","rgba(34,17,80,1)","rgba(36,17,83,1)","rgba(37,17,85,1)","rgba(39,17,87,1)","rgba(40,17,90,1)","rgba(42,17,92,1)","rgba(43,17,94,1)","rgba(45,17,97,1)","rgba(47,16,99,1)","rgba(49,16,101,1)","rgba(50,16,103,1)","rgba(52,16,105,1)","rgba(54,15,107,1)","rgba(55,15,108,1)","rgba(57,15,110,1)","rgba(59,15,112,1)","rgba(61,15,113,1)","rgba(62,15,114,1)","rgba(64,15,116,1)","rgba(66,15,117,1)","rgba(67,15,118,1)","rgba(69,15,119,1)","rgba(71,15,120,1)","rgba(72,16,120,1)","rgba(74,16,121,1)","rgba(76,16,122,1)","rgba(77,17,123,1)","rgba(79,17,123,1)","rgba(81,18,124,1)","rgba(82,18,124,1)","rgba(84,19,125,1)","rgba(85,20,125,1)","rgba(87,20,126,1)","rgba(88,21,126,1)","rgba(90,21,126,1)","rgba(92,22,127,1)","rgba(93,23,127,1)","rgba(95,23,127,1)","rgba(96,24,128,1)","rgba(98,25,128,1)","rgba(99,25,128,1)","rgba(101,26,128,1)","rgba(103,26,128,1)","rgba(104,27,129,1)","rgba(106,28,129,1)","rgba(107,28,129,1)","rgba(109,29,129,1)","rgba(110,30,129,1)","rgba(112,30,129,1)","rgba(113,31,129,1)","rgba(115,32,129,1)","rgba(117,32,129,1)","rgba(118,33,129,1)","rgba(120,33,129,1)","rgba(121,34,130,1)","rgba(123,35,130,1)","rgba(124,35,130,1)","rgba(126,36,130,1)","rgba(128,36,130,1)","rgba(129,37,129,1)","rgba(131,37,129,1)","rgba(132,38,129,1)","rgba(134,39,129,1)","rgba(136,39,129,1)","rgba(137,40,129,1)","rgba(139,40,129,1)","rgba(140,41,129,1)","rgba(142,41,129,1)","rgba(144,42,129,1)","rgba(145,42,129,1)","rgba(147,43,128,1)","rgba(148,43,128,1)","rgba(150,44,128,1)","rgba(152,44,128,1)","rgba(153,45,128,1)","rgba(155,46,127,1)","rgba(157,46,127,1)","rgba(158,47,127,1)","rgba(160,47,127,1)","rgba(161,48,126,1)","rgba(163,48,126,1)","rgba(165,49,126,1)","rgba(166,49,125,1)","rgba(168,50,125,1)","rgba(170,50,125,1)","rgba(171,51,124,1)","rgba(173,51,124,1)","rgba(175,52,123,1)","rgba(176,52,123,1)","rgba(178,53,123,1)","rgba(180,53,122,1)","rgba(181,54,122,1)","rgba(183,55,121,1)","rgba(185,55,121,1)","rgba(186,56,120,1)","rgba(188,56,120,1)","rgba(189,57,119,1)","rgba(191,57,118,1)","rgba(193,58,118,1)","rgba(194,59,117,1)","rgba(196,59,117,1)","rgba(198,60,116,1)","rgba(199,61,115,1)","rgba(201,61,115,1)","rgba(202,62,114,1)","rgba(204,63,113,1)","rgba(206,63,113,1)","rgba(207,64,112,1)","rgba(209,65,111,1)","rgba(210,66,110,1)","rgba(212,67,110,1)","rgba(213,67,109,1)","rgba(215,68,108,1)","rgba(216,69,107,1)","rgba(218,70,107,1)","rgba(219,71,106,1)","rgba(221,72,105,1)","rgba(222,73,104,1)","rgba(223,74,103,1)","rgba(225,75,103,1)","rgba(226,76,102,1)","rgba(227,78,101,1)","rgba(229,79,100,1)","rgba(230,80,100,1)","rgba(231,81,99,1)","rgba(232,83,98,1)","rgba(233,84,97,1)","rgba(234,85,97,1)","rgba(236,87,96,1)","rgba(237,88,95,1)","rgba(238,90,95,1)","rgba(239,91,94,1)","rgba(239,93,94,1)","rgba(240,95,93,1)","rgba(241,96,93,1)","rgba(242,98,93,1)","rgba(243,100,92,1)","rgba(243,101,92,1)","rgba(244,103,92,1)","rgba(245,105,92,1)","rgba(246,107,92,1)","rgba(246,108,92,1)","rgba(247,110,92,1)","rgba(247,112,92,1)","rgba(248,114,92,1)","rgba(248,116,92,1)","rgba(249,118,92,1)","rgba(249,120,92,1)","rgba(250,121,93,1)","rgba(250,123,93,1)","rgba(250,125,94,1)","rgba(251,127,94,1)","rgba(251,129,95,1)","rgba(251,131,95,1)","rgba(252,133,96,1)","rgba(252,135,97,1)","rgba(252,137,97,1)","rgba(252,139,98,1)","rgba(253,140,99,1)","rgba(253,142,100,1)","rgba(253,144,101,1)","rgba(253,146,102,1)","rgba(253,148,103,1)","rgba(254,150,104,1)","rgba(254,152,105,1)","rgba(254,154,106,1)","rgba(254,156,107,1)","rgba(254,157,108,1)","rgba(254,159,109,1)","rgba(254,161,110,1)","rgba(254,163,111,1)","rgba(254,165,112,1)","rgba(255,167,114,1)","rgba(255,169,115,1)","rgba(255,171,116,1)","rgba(255,172,118,1)","rgba(255,174,119,1)","rgba(255,176,120,1)","rgba(255,178,122,1)","rgba(255,180,123,1)","rgba(255,182,124,1)","rgba(255,184,126,1)","rgba(255,185,127,1)","rgba(255,187,129,1)","rgba(255,189,130,1)","rgba(255,191,132,1)","rgba(255,193,133,1)","rgba(255,195,135,1)","rgba(255,197,136,1)","rgba(255,198,138,1)","rgba(255,200,140,1)","rgba(255,202,141,1)","rgba(255,204,143,1)","rgba(254,206,144,1)","rgba(254,208,146,1)","rgba(254,209,148,1)","rgba(254,211,149,1)","rgba(254,213,151,1)","rgba(254,215,153,1)","rgba(254,217,155,1)","rgba(254,219,156,1)","rgba(254,220,158,1)","rgba(254,222,160,1)","rgba(254,224,162,1)","rgba(254,226,163,1)","rgba(253,228,165,1)","rgba(253,230,167,1)","rgba(253,231,169,1)","rgba(253,233,171,1)","rgba(253,235,172,1)","rgba(253,237,174,1)","rgba(253,239,176,1)","rgba(253,241,178,1)","rgba(253,242,180,1)","rgba(253,244,182,1)","rgba(253,246,184,1)","rgba(252,248,186,1)","rgba(252,250,188,1)","rgba(252,251,189,1)","rgba(252,253,191,1)"]},viridis:{name:"viridis",value:["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:J3,"horizontal-heatmap":J3}}}},align:{name:"Align",inlineOptions:{white:{name:"Top",value:"top"},lightGrey:{name:"Bottom",value:"bottom"}}},colorRangeGradient:{name:"Color Gradient",inlineOptions:n8},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:e=>{const t=[];if(e.transforms)for(const n of e.transforms)t.push({name:n.name,value:n.value});return t}},aggregationMode:{name:"Aggregation Mode",inlineOptions:{},generateOptions:e=>{const t=[];return e.aggregationModes?Object.values(e.aggregationModes).forEach(e=>{let{name:n,value:r}=e;t.push({name:n,value:r})}):t.push({name:"Default",value:"default"}),t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:e=>{if(e.maxZoom){const t=[];for(let n=0;n<=e.maxZoom;n++){const{maxWidth:r,binsPerDimension:i,maxZoom:o}=e;let a=1,s=1;if(e.resolutions){const t=e.resolutions.map(e=>+e).sort((e,t)=>t-e);[a]=t,s=t[n]}else s=e.maxWidth/(2**n*e.binsPerDimension),a=r/(2**o*i);const l=sh(a,s),c=th(`.${l}`,s)(s);t.push({name:c,value:n.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:e8},zeroValueColor:{name:"Zero Value Color",inlineOptions:r8}};function c8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u8(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function h8(e,t,n){return t=f8(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p8()?Reflect.construct(t,n||[],f8(e).constructor):t.apply(e,n))}function p8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!e})()}function f8(e){return(f8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d8(e,t){return(d8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m8(e,t,n){let r=t.getTrackObject(e.uid);if(r=r?.originalTrack||r,function(e){return fT(e)&&"contextMenuItems"in e&&"function"==typeof e.contextMenuItems}(r)){let e=n.canvasLeft-r.position[0],t=n.canvasTop-r.position[1];if(r.flipText){const n=e;e=t,t=n}return r.contextMenuItems(e,t)||[]}return[]}let g8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h8(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d8(e,t)}(t,e),c8(t,[{key:"getConfigureSeriesMenu",value:function(e,t,n){var r;const o={},a=(null==(r=window.higlassTracksByType)?void 0:r[n.type])&&window.higlassTracksByType[n.type].config&&window.higlassTracksByType[n.type].config.optionsInfo;if(a)for(const i of Object.keys(a))l8[i]=a[i];const s=qw[n.type];if(!s?.availableOptions)return null;for(const i of s.availableOptions)if(i in l8){const e=l8[i];if(o[i]={name:e.name},"generateOptions"in e){const t=e.generateOptions(n);o[i].children||(o[i].children={});for(const e of t){const t={name:e.name,value:e.value,handler:()=>{n.options[i]=e.value,this.props.onTrackOptionsChanged(n.uid,n.options),this.props.closeMenu()}};o[i].children[e.value]=t}}if("inlineOptions"in e)for(const t in e.inlineOptions){const r=e.inlineOptions[t];o[i].children||(o[i].children={});const a={name:r.name,value:r.value,handler:()=>{}};r.componentPickers&&n.type in r.componentPickers?a.handler=()=>{this.props.onConfigureTrack(n,r.componentPickers[n.type]),this.props.closeMenu()}:a.handler=()=>{n.options[i]=r.value,this.props.onTrackOptionsChanged(n.uid,n.options),this.props.closeMenu()},o[i].children[t]=a}else n.type in e.componentPickers&&(o[i].handler=()=>{this.props.onConfigureTrack(n,e.componentPickers[n.type]),this.props.closeMenu()})}return i.createElement(EQ,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:o,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getTrackTypeItems",value:function(e,t,n){if(window.higlassTracksByType)for(const i of Object.keys(window.higlassTracksByType))qw[i]=window.higlassTracksByType[i].config;let{datatype:r}=n,o=null;n.type in qw&&(r||(r=qw[n.type].datatype[0]),({orientation:o}=qw[n.type]));const a=Object.values(qw).filter(e=>e.datatype).filter(e=>e.orientation).filter(e=>e.datatype.includes(r)).filter(e=>e.orientation===o).map(e=>e.type),s={};for(let i=0;i<a.length;i++)s[a[i]]={value:a[i],name:a[i],handler:()=>{this.props.onChangeTrackType(n.uid,a[i])}};return i.createElement(EQ,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},n=this.state.submenuShown,r=n.value;return"track-type"===n.option?this.getTrackTypeItems(t,e,r):this.getConfigureSeriesMenu(t,e,r)}return i.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){if(this.props.series.data&&"divided"===this.props.series.data.type){const e={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return i.createElement(YZ,{className:VZ,onClick:()=>this.props.onChangeTrackData(this.props.series.uid,e),onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Remove divisor"))}return i.createElement(YZ,{className:VZ,onClick:()=>this.props.onAddDivisor(this.props.series),onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){let e=null;const t=m8(this.props.track,this.props.trackRenderer,this.props.position);qw[this.props.series.type]&&qw[this.props.series.type].exportable&&(e=i.createElement(YZ,{className:VZ,onClick:()=>this.props.onExportData(this.props.hostTrack.uid,this.props.track.uid),onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Export Data")));const n=this.props.onAddSeries?i.createElement(YZ,{className:VZ,onClick:()=>{this.props.onCloseTrack(this.props.series.uid),this.props.onAddSeries(this.props.hostTrack.uid)},onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Replace Series")):null;return i.createElement("div",{ref:e=>{this.div=e},className:xs(zZ,{[HZ]:this.props.theme===Ew}),"data-menu-type":"SeriesListMenu",onMouseLeave:this.props.handleMouseLeave,style:{left:this.state.left,top:this.state.top}},t.map(e=>i.createElement(YZ,{key:e.label,onClick:t=>{e.onClick(t,e=>{this.props.onTrackOptionsChanged(this.props.track.uid,{...this.props.track.options,...e})}),this.props.closeMenu()},onMouseEnter:e=>this.handleOtherMouseEnter(),className:VZ},i.createElement("span",{className:WZ},e.label))),t.length>0&&i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:()=>{},onMouseEnter:e=>this.handleItemMouseEnter(e,{option:"configure-series",value:this.props.track}),onMouseLeave:e=>this.handleMouseLeave()},"Configure Series",i.createElement("svg",{className:XZ},i.createElement("title",null,"Play"),i.createElement("use",{xlinkHref:"#play"}))),i.createElement(YZ,{className:VZ,onClick:()=>{},onMouseEnter:e=>this.handleItemMouseEnter(e,{option:"track-type",value:this.props.track}),onMouseLeave:e=>this.handleMouseLeave()},i.createElement("span",{className:WZ},"Track Type",i.createElement("svg",{className:XZ},i.createElement("title",null,"Play"),i.createElement("use",{xlinkHref:"#play"})))),i.createElement(YZ,{className:VZ,onClick:()=>{this.props.apiPublish("datasetInfo",this.props.track),this.props.closeMenu()},onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Dataset Info")),e,this.getDivideByMenuItem(),i.createElement(YZ,{className:VZ,onClick:this.props.onCloseTrack,onMouseEnter:e=>this.handleOtherMouseEnter()},i.createElement("span",{className:WZ},"Close Series")),n,this.getSubmenu())}}])}(yQ);function y8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v8(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function b8(e,t,n){return t=w8(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_8()?Reflect.construct(t,n||[],w8(e).constructor):t.apply(e,n))}function _8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_8=function(){return!!e})()}function w8(e){return(w8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T8(e,t){return(T8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const x8=lQ(e=>function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b8(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T8(e,t)}(t,e),y8(t,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox;let t=null;t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top},t.canvasLeft=this.props.position.canvasLeft,t.canvasTop=this.props.position.canvasTop;const n=qZ(this.props.tracks).filter(e=>e.uid===this.state.submenuShown.uid)[0],r=n&&"whole"!==n.position;return i.createElement(g8,{key:`series-list-menu-${n.uid}`,ref:e=>{this.seriesListMenu=e},apiPublish:this.props.apiPublish,closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:r?this.props.onAddSeries:null,onChangeTrackData:this.props.onChangeTrackData,onChangeTrackType:this.props.onChangeTrackType,onCloseTrack:()=>this.props.onCloseTrack(this.state.submenuShown.uid),onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:e,position:t,series:this.state.submenuShown,theme:this.props.theme,track:n,trackOrientation:this.props.trackOrientation,trackRenderer:this.props.trackRenderer,trackSourceServers:this.props.trackSourceServers})}return i.createElement("div",null)}}])}(e));function E8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S8(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function k8(e,t,n){return t=C8(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O8()?Reflect.construct(t,n||[],C8(e).constructor):t.apply(e,n))}function O8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O8=function(){return!!e})()}function P8(){return P8=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=C8(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},P8.apply(null,arguments)}function C8(e){return(C8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A8(e,t){return(A8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let M8=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k8(this,t,[e])).seriesRefs={},n.seriesListMenu=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A8(e,t)}(t,e),E8(t,[{key:"componentDidMount",value:function(){!function(e,t,n){var r=P8(C8(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"componentDidMount",this)([])}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.div=e},className:xs(zZ,{[HZ]:this.props.theme===Ew}),"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top}},$Z(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),i.createElement("hr",{className:GZ}),i.createElement(YZ,{contextMenu:this,onClick:()=>this.props.onLockValueScale(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Lock Value Scale With"),i.createElement(YZ,{contextMenu:this,onClick:()=>this.props.onUnlockValueScale(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Unlock Value Scale"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{contextMenu:this,onClick:()=>this.props.onAddSeries(this.props.tracks[0].uid),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Series"),i.createElement(YZ,{onClick:()=>this.props.onCloseTrack(this.props.tracks[0].uid)},"Close Track"),i.createElement(YZ,{onClick:()=>{this.props.onReplaceTrack(this.props.tracks[0].uid,this.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}])}(uQ(yQ).with(x8));function I8(){return I8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I8.apply(null,arguments)}function R8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D8(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function N8(e,t,n){return t=L8(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j8()?Reflect.construct(t,n||[],L8(e).constructor):t.apply(e,n))}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!e})()}function L8(e){return(L8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B8(e,t){return(B8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let F8=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N8(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B8(e,t)}(t,e),R8(t,[{key:"render",value:function(){const e=[];return this.props.children.forEach((t,n)=>{const r=`customTrackDialog_${n}`;e.push(i.createElement(t,I8({key:r},this.props.bodyProps[n])))}),i.createElement(uY,{maxHeight:!0,okayOnly:!0,okayTitle:"Close",onCancel:this.props.onCancel,onOkay:this.props.onCancel,title:this.props.title},e)}}])}(i.PureComponent);F8.defaultProps={},F8.propTypes={onCancel:xm.func.isRequired,title:xm.string,bodyProps:xm.array,children:xm.array};const z8="_drag-listening-div-active_19gkt_1";function H8(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U8(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U8(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function V8(e,t,n){return t=X8(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G8()?Reflect.construct(t,n||[],X8(e).constructor):t.apply(e,n))}function G8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G8=function(){return!!e})()}function X8(e){return(X8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W8(e,t){return(W8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Y8=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=V8(this,t,[e])).state={dragOnTop:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W8(e,t)}(t,e),H8(t,[{key:"render",value:function(){let e="red";return this.props.enabled&&this.state.dragOnTop?e="green":this.props.enabled&&(e="blue"),i.createElement("div",{className:xs("DragListeningDiv",{[z8]:this.props.enabled}),onDragEnter:()=>{this.setState({dragOnTop:!0})},onDragLeave:()=>{this.setState({dragOnTop:!1})},onDragOver:e=>{e.preventDefault()},onDrop:()=>{if(!this.props.enabled)return;const e=this.props.draggingHappening,t={type:this.props.defaultTrackType,uid:a_.nice(),tilesetUid:e.tilesetUid,server:e.server};this.props.onTrackDropped(t),this.props.pubSub.publish("trackDropped",t)},style:{background:e,opacity:.6,...this.props.style}})}}])}(i.Component);Y8.defaultProps={enabled:!1,style:{},draggingHappening:{},onTrackDropped:()=>{}},Y8.propTypes={enabled:xm.bool,style:xm.object,defaultTrackType:xm.object,draggingHappening:xm.object,onTrackDropped:xm.func,position:xm.string.isRequired,pubSub:xm.object.isRequired};const q8=$Y(Y8),$8="_gallery-tracks_fbxxi_1",K8="_gallery-track_fbxxi_1",Z8="_gallery-sub-track_fbxxi_18",Q8="_gallery-invisible-track_fbxxi_19",J8={"tiled-plot":"_tiled-plot_1y7td_1",horizontalList:"_horizontalList_1y7td_7",list:"_list_1y7td_14",stylizedList:"_stylizedList_1y7td_21",stylizedItem:"_stylizedItem_1y7td_28",stylizedHelper:"_stylizedHelper_1y7td_39",horizontalItem:"_horizontalItem_1y7td_44","resizable-track":"_resizable-track_1y7td_55",domain:"_domain_1y7td_60"};function e6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function n6(e,t,n){return t=i6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r6()?Reflect.construct(t,n||[],i6(e).constructor):t.apply(e,n))}function r6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r6=function(){return!!e})()}function i6(e){return(i6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o6(e,t){return(o6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const a6={pointerEvents:"all"};let s6=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n6(this,t,[e])).state={hovering:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o6(e,t)}(t,e),e6(t,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){var e;return i.createElement("div",{className:xs("gallery-tracks",$8)},null==(e=this.props.tracks)?void 0:e.map((e,t)=>i.createElement("div",{key:e.uid||t,className:K8,onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:e.height*t,right:e.height*t,bottom:e.height*t,left:e.height*t}},i.createElement("div",{className:Z8,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,left:0,height:e.height}}),i.createElement("div",{className:Z8,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,bottom:0,width:e.height}}),i.createElement("div",{className:Z8,onMouseEnter:this.mouseEnterHandler.bind(this),style:{right:0,bottom:0,left:0,height:e.height}}),i.createElement("div",{className:Z8,onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,bottom:0,left:0,width:e.height}}),i.createElement("div",{className:Q8,onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:e.height,right:e.height,bottom:e.height,left:e.height}}),this.props.editable&&i.createElement(OZ,{configMenuVisible:!0,imgStyleAdd:a6,imgStyleClose:a6,imgStyleMove:a6,imgStyleSettings:a6,isMoveable:!1,isVisible:this.state.hovering,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:e.uid||t}))))}}])}(i.Component);s6.propTypes={editable:xm.bool,onCloseTrackMenuOpened:xm.func.isRequired,onConfigTrackMenuOpened:xm.func.isRequired,tracks:xm.array};const l6={"top-right-handle":"_top-right-handle_cizw2_1","bottom-right-handle":"_bottom-right-handle_cizw2_2","top-left-handle":"_top-left-handle_cizw2_7","bottom-left-handle":"_bottom-left-handle_cizw2_8","top-draggable-handle":"_top-draggable-handle_cizw2_13","bottom-draggable-handle":"_bottom-draggable-handle_cizw2_14","left-draggable-handle":"_left-draggable-handle_cizw2_15","right-draggable-handle":"_right-draggable-handle_cizw2_16","draggable-div":"_draggable-div_cizw2_22","top-draggable-handle-grabber":"_top-draggable-handle-grabber_cizw2_27","bottom-draggable-handle-grabber":"_bottom-draggable-handle-grabber_cizw2_28","left-draggable-handle-grabber":"_left-draggable-handle-grabber_cizw2_43","right-draggable-handle-grabber":"_right-draggable-handle-grabber_cizw2_44"};function c6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function u6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function h6(e,t,n){return t=f6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p6()?Reflect.construct(t,n||[],f6(e).constructor):t.apply(e,n))}function p6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p6=function(){return!!e})()}function f6(e){return(f6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d6(e,t){return(d6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let m6=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h6(this,t,[e])).dragTopRight=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragTopRightFunc.bind(n)),n.dragTopLeft=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragTopLeftFunc.bind(n)),n.dragBottomRight=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragBottomRightFunc.bind(n)),n.dragBottomLeft=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragBottomLeftFunc.bind(n)),n.dragBottom=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragBottomFunc.bind(n)),n.dragTop=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragTopFunc.bind(n)),n.dragLeft=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragLeftFunc.bind(n)),n.dragRight=$G().on("start",n.dragStart.bind(n)).on("drag",n.dragRightFunc.bind(n)),n.minWidth=10,n.minHeight=10,n.bottomHandleWidth=20,n.state={uid:n.props.uid,width:n.props.width,height:n.props.height,top:n.props.top,left:n.props.left},n.domBody=pm("body").node(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d6(e,t)}(t,e),c6(t,[{key:"componentDidMount",value:function(){pm(this.bottomHandle).call(this.dragBottom),pm(this.topHandle).call(this.dragTop),pm(this.leftHandle).call(this.dragLeft),pm(this.rightHandle).call(this.dragRight)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){"width"in e&&this.setState({width:e.width}),"height"in e&&this.setState({height:e.height})}},{key:"dragBottomFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight,this.setState({height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartLeft+t[0]-this.dragStartMousePos[0];r=n>this.minWidth?r:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:r,width:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartTop+t[1]-this.dragStartMousePos[1];r=n>this.minHeight?r:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:r,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth,this.setState({width:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);r=r>this.minWidth?r:this.minWidth;let i=this.dragStartLeft+t[0]-this.dragStartMousePos[0];i=r>this.minWidth?i:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:i,width:r,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartHeight+(t[1]-this.dragStartMousePos[1]);r=r>this.minHeight?r:this.minHeight,this.setState({width:n,height:r}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);n=n>this.minHeight?n:this.minHeight;let r=this.dragStartTop+t[1]-this.dragStartMousePos[1];r=n>this.minHeight?r:this.dragStartTop+this.dragStartHeight-this.minHeight;let i=this.dragStartWidth+(t[0]-this.dragStartMousePos[0]);i=i>this.minWidth?i:this.minWidth,this.setState({top:r,width:i,height:n}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(e){const t=ym(e,this.domBody);let n=this.dragStartWidth-(t[0]-this.dragStartMousePos[0]);n=n>this.minWidth?n:this.minWidth;let r=this.dragStartLeft+t[0]-this.dragStartMousePos[0];r=n>this.minWidth?r:this.dragStartLeft+this.dragStartWidth-this.minWidth;let i=this.dragStartHeight-(t[1]-this.dragStartMousePos[1]);i=i>this.minHeight?i:this.minHeight;let o=this.dragStartTop+t[1]-this.dragStartMousePos[1];o=i>this.minHeight?o:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:o,left:r,width:n,height:i}),e.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(e){this.dragStartMousePos=ym(e,this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,e.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){this.props.sizeChanged&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){const e=this.props.theme===Ew?"white":"black",t={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,opacity:this.props.opacity},n={left:this.state.width/2-12,width:24},r={top:this.state.height/2-12,height:24},o={bottom:{...n,bottom:1},top:{...n,top:1},left:{...r,left:1},right:{...r,right:1}},a=[...this.props.resizeHandles].map(t=>i.createElement("div",{key:t,ref:e=>{this[`${t}Handle`]=e},className:l6[`${t}-draggable-handle`],style:o[t],title:"Resize track"},i.createElement("div",{className:l6[`${t}-draggable-handle-grabber`],style:{borderColor:e}})));return i.createElement("div",{ref:e=>{this.divContainer=e},className:xs(this.props.className,l6["draggable-div"]),style:t},a)}}])}(i.Component);m6.propTypes={className:xm.string,height:xm.number,left:xm.number,opacity:xm.number,resizeHandles:xm.object,sizeChanged:xm.func,top:xm.number,trackClosed:xm.func,trackRotated:xm.func,uid:xm.string,width:xm.number,theme:xm.symbol};const g6=fZ(m6);function y6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function b6(e,t,n){return t=w6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_6()?Reflect.construct(t,n||[],w6(e).constructor):t.apply(e,n))}function _6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_6=function(){return!!e})()}function w6(e){return(w6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T6(e,t){return(T6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let x6=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b6(this,t,[e])).state={controlsVisible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T6(e,t)}(t,e),y6(t,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){let e=null;return e=this.moveable?eZ(()=>i.createElement("svg",{className:"no-zoom",height:"10px",onClick:()=>{},style:this.getMoveImgStyle(),width:"10px"},i.createElement("title",null,"Move"),i.createElement("use",{xlinkHref:"#move"}))):eZ(()=>i.createElement("div",null)),i.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},i.createElement(e,null),i.createElement("svg",{ref:e=>{this.imgConfig=e},className:"no-zoom",height:"10px",onClick:()=>{const e=o.findDOMNode(this.imgConfig).getBoundingClientRect();this.props.onConfigTrackMenuOpened(this.props.uid,e)},style:this.getSettingsImgStyle(),width:"10px"},i.createElement("title",null,"No Zoom"),i.createElement("use",{xlinkHref:"#cog"})),i.createElement("svg",{ref:e=>{this.imgAdd=e},className:"no-zoom",height:"10px",onClick:()=>this.props.onAddSeries(this.props.uid),style:this.getAddImgStyle(),width:"10px"},i.createElement("title",null,"Add"),i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{ref:e=>{this.imgClose=e},className:"no-zoom",height:"10px",onClick:()=>{const e=o.findDOMNode(this.imgClose).getBoundingClientRect();this.props.onCloseTrackMenuOpened(this.props.uid,e)},style:this.getCloseImgStyle(),width:"10px"},i.createElement("title",null,"Close"),i.createElement("use",{xlinkHref:"#cross"})))}}])}(i.Component);function E6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function k6(e,t,n){return t=P6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O6()?Reflect.construct(t,n||[],P6(e).constructor):t.apply(e,n))}function O6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O6=function(){return!!e})()}function P6(e){return(P6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C6(e,t){return(C6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}x6.propTypes={configMenuOpen:xm.bool,onConfigTrackMenuOpened:xm.func,onCloseTrackMenuOpened:xm.func,onAddSeries:xm.func,uid:xm.string};let A6=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k6(this,t,[e])).moveable=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C6(e,t)}(t,e),E6(t,[{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.el=e},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:()=>{this.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},i.createElement(g6,{key:this.props.uid,height:this.props.height,resizeHandles:this.props.editable?this.props.resizeHandles:new Set,sizeChanged:e=>this.props.handleResizeTrack(this.props.uid,e.width,e.height),style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}])}(x6);function M6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function I6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function R6(e,t,n){return t=N6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D6()?Reflect.construct(t,n||[],N6(e).constructor):t.apply(e,n))}function D6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D6=function(){return!!e})()}function N6(e){return(N6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j6(e,t){return(j6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}A6.propTypes={className:xm.string,uid:xm.string,item:xm.object,height:xm.number,width:xm.number};const L6={pointerEvents:"all"};let B6=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R6(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j6(e,t)}(t,e),M6(t,[{key:"getControls",value:function(e){return i.createElement(OZ,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:L6,imgStyleClose:L6,imgStyleMove:L6,imgStyleSettings:L6,isMoveable:this.moveable,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}])}(A6);const F6=uZ(e=>i.createElement(B6,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width}));function z6(){return z6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z6.apply(null,arguments)}function H6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function V6(e,t,n){return t=X6(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G6()?Reflect.construct(t,[],X6(e).constructor):t.apply(e,n))}function G6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G6=function(){return!!e})()}function X6(e){return(X6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W6(e,t){return(W6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Y6=function(e){function t(e){let{items:n}=e;var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=V6(this,t)).state={items:n,isSorting:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W6(e,t)}(t,e),H6(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({items:e.items})}},{key:"onSortStart",value:function(e,t){let{node:n,index:r,collection:i}=e;t.stopImmediatePropagation();const{onSortStart:o}=this.props;this.setState({isSorting:!0}),o&&o(this.ref),this.sortingIndex=r,this.sortStartTop=t.offsetTop,this.sortStartLeft=t.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function(e){let{oldIndex:t,newIndex:n}=e;const{onSortEnd:r}=this.props,{items:i}=this.state;this.setState({items:SK(i,t,n),isSorting:!1}),r&&r(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){const e=this.props.component,{items:t,isSorting:n}=this.state,r={isSorting:n,items:t,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return i.createElement(e,z6({},this.props,r,{ref:e=>{this.ref=e}}))}}])}(i.Component);function q6(){return q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q6.apply(null,arguments)}Y6.propTypes={axis:xm.string,className:xm.string,component:xm.func,editable:xm.bool,handleConfigTrack:xm.func,handleResizeTrack:xm.func,height:xm.number,helperClass:xm.string,itemClass:xm.string,itemControlAlignLeft:xm.bool,itemReactClass:xm.func,items:xm.array,onAddSeries:xm.func,onCloseTrack:xm.func,onCloseTrackMenuOpened:xm.func,onConfigTrackMenuOpened:xm.func,onSortEnd:xm.func,onSortStart:xm.func,referenceAncestor:xm.string,resizeHandles:xm.object,useDragHandle:xm.bool,width:xm.number},Y6.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600};const $6=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;fK(this,n),hK(mK(mK(t=gK(this,yK(n).call(this,e)))),"state",{}),hK(mK(mK(t)),"handleStart",function(e){var n=t.props,r=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=LK(e);var o=IK(e.target,function(e){return null!=e.sortableInfo});if(o&&o.sortableInfo&&t.nodeIsChild(o)&&!t.state.sorting){var a=t.props.useDragHandle,s=o.sortableInfo,l=s.index,c=s.collection;if(s.disabled||a&&!IK(e.target,tZ))return;t.manager.active={collection:c,index:l},!function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)&&e.target.tagName===YK&&e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout(function(){return t.handlePress(e)},t.props.pressDelay))}}}),hK(mK(mK(t)),"nodeIsChild",function(e){return e.sortableInfo.manager===t.manager}),hK(mK(mK(t)),"handleMove",function(e){var n=t.props,r=n.distance,i=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var o=LK(e),a={x:t.position.x-o.x,y:t.position.y-o.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||i&&!(s>=i)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}),hK(mK(mK(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),hK(mK(mK(t)),"cancel",function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)}),hK(mK(mK(t)),"handlePress",function(e){try{var n=t.manager.getActive(),i=function(){if(n){var i=function(){var n=f.sortableInfo.index,r=function(e){var t=window.getComputedStyle(e);return{bottom:DK(t.marginBottom),left:DK(t.marginLeft),right:DK(t.marginRight),top:DK(t.marginTop)}}(f),i=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:DK(t.gridColumnGap),y:DK(t.gridRowGap)}:{x:0,y:0}}(t.container),o=t.scrollContainer.getBoundingClientRect(),u=s({index:n,node:f,collection:d});if(t.node=f,t.margin=r,t.gridGap=i,t.width=u.width,t.height=u.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=f.getBoundingClientRect(),t.containerBoundingRect=o,t.index=n,t.newIndex=n,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=BK(f,t.container),t.initialOffset=LK(m?pK({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(function(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return TK(r.querySelectorAll(t)).forEach(function(e,t){"file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===$K&&n[t].width>0&&n[t].height>0&&e.getContext("2d").drawImage(n[t],0,0)}),r}(f)),CK(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-r.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-r.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),c&&(t.sortableGhost=f,CK(f,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var g=p?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,y=g.top,v=g.left,b=g.width,_=y+g.height,w=v+b;t.axis.x&&(t.minTranslate.x=v-t.boundingClientRect.left,t.maxTranslate.x=w-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=y-t.boundingClientRect.top,t.maxTranslate.y=_-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(p?0:o.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(p?t.contentWindow.innerWidth:o.left+o.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(p?0:o.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(p?t.contentWindow.innerHeight:o.top+o.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach(function(e){return t.helper.classList.add(e)}),t.listenerNode=e.touches?e.target:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(OK.move.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)}),OK.end.forEach(function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:n}),h&&h({node:f,index:n,collection:d,isKeySorting:m,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),m&&t.keyMove(0)},o=t.props,a=o.axis,s=o.getHelperDimensions,l=o.helperClass,c=o.hideSortableGhost,u=o.updateBeforeSortStart,h=o.onSortStart,p=o.useWindowAsScrollContainer,f=n.node,d=n.collection,m=t.manager.isKeySorting,g=function(){if("function"==typeof u){t._awaitingUpdateBeforeSortStart=!0;var n=function(e,t){try{var n=e()}catch(r){return t(!0,r)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){var t=f.sortableInfo.index;return Promise.resolve(u({collection:d,index:t,node:f,isKeySorting:m},e)).then(function(){})},function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n});if(n&&n.then)return n.then(function(){})}}();return g&&g.then?g.then(i):i()}}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(o){return Promise.reject(o)}}),hK(mK(mK(t)),"handleSortMove",function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)}),hK(mK(mK(t)),"handleSortEnd",function(e){var n=t.props,r=n.hideSortableGhost,i=n.onSortEnd,o=t.manager,a=o.active.collection,s=o.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(OK.move.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)}),OK.end.forEach(function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),r&&t.sortableGhost&&CK(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=l.length;c<u;c++){var h=l[c],p=h.node;h.edgeOffset=null,h.boundingClientRect=null,AK(p,null),MK(p,null),h.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof i&&i({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1}),hK(mK(mK(t)),"autoscroll",function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=pK({},t.translate),i=0,o=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),o=t.translate.y-r.y),t.translate=r,AK(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=o)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}}),hK(mK(mK(t)),"onAutoScroll",function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),hK(mK(mK(t)),"handleKeyDown",function(e){var n=e.keyCode,r=t.props,i=r.shouldCancelStart,o=r.keyCodes,a=pK({},iZ,void 0===o?{}:o);t.manager.active&&!t.manager.isKeySorting||!t.manager.active&&(!a.lift.includes(n)||i(e)||!t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),a.lift.includes(n)&&!t.manager.active?t.keyLift(e):a.drop.includes(n)&&t.manager.active?t.keyDrop(e):a.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):a.up.includes(n)?t.keyMove(-1):a.down.includes(n)&&t.keyMove(1))}),hK(mK(mK(t)),"keyLift",function(e){var n=e.target,r=IK(n,function(e){return null!=e.sortableInfo}).sortableInfo,i=r.index,o=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:o},t.handlePress(e)}),hK(mK(mK(t)),"keyMove",function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,o=t.newIndex;if(!(i<0||i>r)){t.prevIndex=o,t.newIndex=i;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find(function(e){return e.node.sortableInfo.index===a}),l=s.node,c=t.containerScrollDelta,u=s.boundingClientRect||jK(l,c),h=s.translate||{x:0,y:0},p={top:u.top+h.y-c.top,left:u.left+h.x-c.left},f=o<i,d={x:f&&t.axis.x?l.offsetWidth-t.width:0,y:f&&t.axis.y?l.offsetHeight-t.height:0};t.handleSortMove({pageX:p.left+d.x,pageY:p.top+d.y,ignoreTransition:0===e})}}),hK(mK(mK(t)),"keyDrop",function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()}),hK(mK(mK(t)),"handleKeyEnd",function(e){t.manager.active&&t.keyDrop(e)}),hK(mK(mK(t)),"isValidSortingTarget",function(e){var n=t.props.useDragHandle,r=e.target,i=IK(r,function(e){return null!=e.sortableInfo});return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?tZ(r):r.sortableInfo)});var o=new xK;return function(e){wK(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=o,t.wrappedInstance=(0,i.createRef)(),t.sortableContextValue={manager:o},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return bK(n,t),dK(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then(function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:zK(e.container)||e.container,e.autoScroller=new nZ(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach(function(t){return OK[t].forEach(function(n){return e.container.addEventListener(n,e.events[t],!1)})}),e.container.addEventListener("keydown",e.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(t){return OK[t].forEach(function(n){return e.container.removeEventListener(n,e.events[t])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,i=t.lockToContainerEdges,o=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?o:a,l=this.manager.isKeySorting,c=e.ignoreTransition,u=LK(e),h={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,i){var p=function(e){var t=e.height,n=e.width,r=e.lockOffset,i=Array.isArray(r)?r:[r,r];wK(2===i.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",r);var o=lK(i,2),a=o[0],s=o[1];return[FK({height:t,lockOffset:a,width:n}),FK({height:t,lockOffset:s,width:n})]}({height:this.height,lockOffset:r,width:this.width}),f=lK(p,2),d=f[0],m=f[1],g={x:this.width/2-d.x,y:this.height/2-d.y},y={x:this.width/2-m.x,y:this.height/2-m.y};h.x=RK(this.minTranslate.x+g.x,this.maxTranslate.x-y.x,h.x),h.y=RK(this.minTranslate.y+g.y,this.maxTranslate.y-y.y,h.y)}"x"===n?h.y=0:"y"===n&&(h.x=0),l&&s&&!c&&MK(this.helper,s),AK(this.helper,h)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,o=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var h=0,p=a.length;h<p;h++){var f=a[h].node,d=f.sortableInfo.index,m=f.offsetWidth,g=f.offsetHeight,y={height:this.height>g?g/2:this.height/2,width:this.width>m?m/2:this.width/2},v=c&&d>this.index&&d<=u,b=c&&d<this.index&&d>=u,_={x:0,y:0},w=a[h].edgeOffset;w||(w=BK(f,this.container),a[h].edgeOffset=w,c&&(a[h].boundingClientRect=jK(f,i)));var T=h<a.length-1&&a[h+1],x=h>0&&a[h-1];(T&&!T.edgeOffset&&(T.edgeOffset=BK(T.node,this.container),c&&(T.boundingClientRect=jK(T.node,i))),d!==this.index)?(t&&MK(f,t),this.axis.x?this.axis.y?b||d<this.index&&(s+o.left-y.width<=w.left&&l+o.top<=w.top+y.height||l+o.top+y.height<=w.top)?(_.x=this.width+this.marginOffset.x,w.left+_.x>this.containerBoundingRect.width-y.width&&T&&(_.x=T.edgeOffset.left-w.left,_.y=T.edgeOffset.top-w.top),null===this.newIndex&&(this.newIndex=d)):(v||d>this.index&&(s+o.left+y.width>=w.left&&l+o.top+y.height>=w.top||l+o.top+y.height>=w.top+g))&&(_.x=-(this.width+this.marginOffset.x),w.left+_.x<this.containerBoundingRect.left+y.width&&x&&(_.x=x.edgeOffset.left-w.left,_.y=x.edgeOffset.top-w.top),this.newIndex=d):v||d>this.index&&s+o.left+y.width>=w.left?(_.x=-(this.width+this.marginOffset.x),this.newIndex=d):(b||d<this.index&&s+o.left<=w.left+y.width)&&(_.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=d)):this.axis.y&&(v||d>this.index&&l+o.top+y.height>=w.top?(_.y=-(this.height+this.marginOffset.y),this.newIndex=d):(b||d<this.index&&l+o.top<=w.top+y.height)&&(_.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=d))),AK(f,_),a[h].translate=_):n&&(this.sortableGhost=f,CK(f,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var E=c?this.prevIndex:u;r&&this.newIndex!==E&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:E,isKeySorting:c,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return wK(r.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,o.findDOMNode)(this):e(r.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=r.withRef?this.wrappedInstance:null;return(0,i.createElement)(sZ.Provider,{value:this.sortableContextValue},(0,i.createElement)(e,oK({ref:t},kK(this.props,aZ))))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(i.Component),hK(t,"displayName",NK("sortableList",e)),hK(t,"defaultProps",oZ),hK(t,"propTypes",rZ),n}(e=>{let{className:t,items:n,itemClass:r,itemControlAlignLeft:o,sortingIndex:a,useDragHandle:s,sortableHandlers:l,height:c,width:u,onCloseTrack:h,onCloseTrackMenuOpened:p,onConfigTrackMenuOpened:f,onAddSeries:d,handleConfigTrack:m,editable:g,itemReactClass:y,handleResizeTrack:v,resizeHandles:b}=e;const _=n.map((e,t)=>i.createElement(y,{key:`sci-${e.uid}`,className:r,controlAlignLeft:o,sortingIndex:a,index:t,uid:e.uid,height:e.height,width:e.width,item:e,useDragHandle:s,onCloseTrack:h,onCloseTrackMenuOpened:p,onConfigTrackMenuOpened:f,onAddSeries:d,handleConfigTrack:m,editable:g,handleResizeTrack:v,resizeHandles:b}));return i.createElement("div",q6({className:t,style:{height:c,width:u,background:"transparent"}},l),_)}),K6="_horizontal-tiled-plot_1bqkg_1";function Z6(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q6(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q6(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function J6(e,t,n){return t=t7(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,e7()?Reflect.construct(t,n||[],t7(e).constructor):t.apply(e,n))}function e7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e7=function(){return!!e})()}function t7(e){return(t7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n7(e,t){return(n7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r7(e){return e?.sourceEvent}let i7=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J6(this,t,[e])).brushBehavior=C$().on("start",n.brushStarted.bind(n)).on("brush",n.brushed.bind(n)).on("end",n.brushedEnded.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n7(e,t)}(t,e),Z6(t,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==e.rangeSelection&&this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==t):this.props.rangeSelection===e.rangeSelection||(this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,e.rangeSelectionEnd),this.state!==t)}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,QT(this.brushEl,AZ["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,r7(e)&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(e.selection))}},{key:"brushStarted",value:function(e){!r7(e)||!e.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(e){if(!this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(e.selection)),e.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushEl.transition().call(this.brushBehavior.move,n):this.brushEl.call(this.brushBehavior.move,n)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map(e=>e.height).reduce(rx,0),t=this.props.tracks.map(e=>Ax(e)).reduce(KT,!1),n=this.props.isRangeSelectionActive?AZ["track-range-selection-active"]:AZ["track-range-selection"];return i.createElement("div",{className:xs("horizontal-tiled-plot",K6)},t&&i.createElement("svg",{ref:e=>{this.brushEl=pm(e)},className:n,style:{height:e,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"}),i.createElement(Y6,{className:xs(J8.list,J8.stylizedList),component:$6,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:e,helperClass:J8.stylizedHelper,itemClass:J8.stylizedItem,itemReactClass:F6,items:this.props.tracks.map(e=>({configMenuVisible:e.uid===this.props.configTrackMenuId,uid:e.uid||a_.nice(),width:this.props.width,height:e.height,value:e.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}}])}(i.Component);i7.propTypes={configTrackMenuId:xm.string,editable:xm.bool,handleConfigTrack:xm.func,handleResizeTrack:xm.func,handleSortEnd:xm.func,is1dRangeSelection:xm.bool,isRangeSelectionActive:xm.bool,onAddSeries:xm.func,onCloseTrack:xm.func,onCloseTrackMenuOpened:xm.func,onConfigTrackMenuOpened:xm.func,onRangeSelection:xm.func,onRangeSelectionEnd:xm.func,onRangeSelectionReset:xm.func,onRangeSelectionStart:xm.func,rangeSelection:xm.array,rangeSelectionEnd:xm.bool,referenceAncestor:xm.func,resizeHandles:xm.object,scale:xm.func,tracks:xm.array,width:xm.number};var o7={},a7={};function s7(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}a7.INT_BITS=32,a7.INT_MAX=2147483647,a7.INT_MIN=-1<<31,a7.sign=function(e){return(e>0)-(e<0)},a7.abs=function(e){var t=e>>31;return(e^t)-t},a7.min=function(e,t){return t^(e^t)&-(e<t)},a7.max=function(e,t){return e^(e^t)&-(e<t)},a7.isPow2=function(e){return!(e&e-1)&&!!e},a7.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},a7.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},a7.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},a7.countTrailingZeros=s7,a7.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},a7.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},a7.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var l7=new Array(256);function c7(e,t,n){var r=0|e[n];if(r<=0)return[];var i,o=new Array(r);if(n===e.length-1)for(i=0;i<r;++i)o[i]=t;else for(i=0;i<r;++i)o[i]=c7(e,t,n+1);return o}!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(l7),a7.reverse=function(e){return l7[255&e]<<24|l7[e>>>8&255]<<16|l7[e>>>16&255]<<8|l7[e>>>24&255]},a7.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},a7.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},a7.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},a7.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},a7.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>s7(e)+1};for(var u7=function(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return c7(e,t,0)}return[]},h7={},p7={byteLength:function(e){var t=v7(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=v7(e),i=r[0],o=r[1],a=new m7(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,l=o>0?i-4:i;for(n=0;n<l;n+=4)t=d7[e.charCodeAt(n)]<<18|d7[e.charCodeAt(n+1)]<<12|d7[e.charCodeAt(n+2)]<<6|d7[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=d7[e.charCodeAt(n)]<<2|d7[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=d7[e.charCodeAt(n)]<<10|d7[e.charCodeAt(n+1)]<<4|d7[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(_7(e,a,a+o>s?s:a+o));return 1===r?(t=e[n-1],i.push(f7[t>>2]+f7[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(f7[t>>10]+f7[t>>4&63]+f7[t<<2&63]+"=")),i.join("")}},f7=[],d7=[],m7=typeof Uint8Array<"u"?Uint8Array:Array,g7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y7=0;y7<64;++y7)f7[y7]=g7[y7],d7[g7.charCodeAt(y7)]=y7;function v7(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function b7(e){return f7[e>>18&63]+f7[e>>12&63]+f7[e>>6&63]+f7[63&e]}function _7(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(b7(r));return i.join("")}d7[45]=62,d7[95]=63;var w7={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=p,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=d,a/=256,c-=8);e[n+f-d]|=128*m}};!function(e){function t(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function r(e,t,n){return t=o(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i()?Reflect.construct(t,[],o(e).constructor):t.apply(e,n))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i=function(){return!!e})()}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const s=p7,l=w7,c="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=p,e.SlowBuffer=function(e){return+e!=e&&(e=0),p.alloc(+e)},e.INSPECT_MAX_BYTES=50;const u=2147483647;function h(e){if(e>u)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,p.prototype),t}function p(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return f(e,t,n)}function f(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|b(e,t);let r=h(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return p.from(r,t,n);const i=function(e){if(p.isBuffer(e)){const t=0|v(e.length),n=h(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||ee(e.length)?h(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return d(e),h(e<0?0:0|v(e))}function g(e){const t=e.length<0?0:0|v(e.length),n=h(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,p.prototype),r}function v(e){if(e>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|e}function b(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return r?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function T(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),ee(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=p.from(t,r)),p.isBuffer(t))return 0===t.length?-1:x(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,r,i){let o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function E(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(ee(r))return a;e[n+a]=r}return a}function S(e,t,n,r){return Q(K(t,e.length-n),e,n,r)}function k(e,t,n,r){return Q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return Q(Z(t),e,n,r)}function P(e,t,n,r){return Q(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128===(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[i+1],r=e[i+2],128===(192&n)&&128===(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128===(192&n)&&128===(192&r)&&128===(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}(r)}e.kMaxLength=u,p.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(e,t,n){return f(e,t,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?h(e):void 0!==t?"string"==typeof n?h(e).fill(t,n):h(e).fill(t):h(e)}(e,t,n)},p.allocUnsafe=function(e){return m(e)},p.allocUnsafeSlow=function(e){return m(e)},p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(J(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=p.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))i+t.length>r.length?(p.isBuffer(t)||(t=p.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!p.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},p.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},p.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},p.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function(e,t,n,r,i){if(J(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n);for(let u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],a=c[u];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return T(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return T(this,e,t,n,!1)},p.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return k(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const M=4096;function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=t;o<n;++o)i+=te[e[o]];return i}function N(e,t,n){const r=e.slice(t,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){W(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function F(e,t,n,r,i){W(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function z(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,4),l.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,8),l.write(e,t,n,r,52,8),n+8}p.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readBigUInt64LE=ne(function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),p.prototype.readBigUInt64BE=ne(function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readBigInt64LE=ne(function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),p.prototype.readBigInt64BE=ne(function(e){Y(e>>>=0,"offset");const t=this[e],n=this[e+7];(void 0===t||void 0===n)&&q(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),p.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),l.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),l.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),l.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),l.read(this,e,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigUInt64LE=ne(function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=ne(function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},p.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigInt64LE=ne(function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=ne(function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,r){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},p.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=p.isBuffer(e)?e:p.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const V={};function G(e,n,i){V[e]=function(i){function o(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=r(this,o),Object.defineProperty(t,"message",{value:n.apply(t,arguments),writable:!0,configurable:!0}),t.name=`${t.name} [${e}]`,t.stack,delete t.name,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(o,i),t(o,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${e}]: ${this.message}`}}])}(i)}function X(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function W(e,t,n,r,i,o){if(e>n||e<t){const n="bigint"==typeof t?"n":"";let r;throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`,new V.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){Y(t,"offset"),(void 0===e[t]||void 0===e[t+n])&&q(t,e.length-(n+1))}(r,i,o)}function Y(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function q(e,t,n){throw Math.floor(e)!==e?(Y(e,n),new V.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),G("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=X(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=X(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const $=/[^+/0-9A-Za-z-_]/g;function K(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Z(e){return s.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Q(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ee(e){return e!==e}const te=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function ne(e){return typeof BigInt>"u"?re:e}function re(){throw new Error("BigInt not supported")}}(h7);var T7=a7,x7=u7,E7=h7.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:x7([32,0]),UINT16:x7([32,0]),UINT32:x7([32,0]),BIGUINT64:x7([32,0]),INT8:x7([32,0]),INT16:x7([32,0]),INT32:x7([32,0]),BIGINT64:x7([32,0]),FLOAT:x7([32,0]),DOUBLE:x7([32,0]),DATA:x7([32,0]),UINT8C:x7([32,0]),BUFFER:x7([32,0])});var S7=typeof Uint8ClampedArray<"u",k7=typeof BigUint64Array<"u",O7=typeof BigInt64Array<"u",P7=globalThis.__TYPEDARRAY_POOL;P7.UINT8C||(P7.UINT8C=x7([32,0])),P7.BIGUINT64||(P7.BIGUINT64=x7([32,0])),P7.BIGINT64||(P7.BIGINT64=x7([32,0])),P7.BUFFER||(P7.BUFFER=x7([32,0]));var C7=P7.DATA,A7=P7.BUFFER;function M7(e){if(e){var t=e.length||e.byteLength,n=T7.log2(t);C7[n].push(e)}}function I7(e){e=T7.nextPow2(e);var t=T7.log2(e),n=C7[t];return n.length>0?n.pop():new ArrayBuffer(e)}function R7(e){return new Uint8Array(I7(e),0,e)}function D7(e){return new Uint16Array(I7(2*e),0,e)}function N7(e){return new Uint32Array(I7(4*e),0,e)}function j7(e){return new Int8Array(I7(e),0,e)}function L7(e){return new Int16Array(I7(2*e),0,e)}function B7(e){return new Int32Array(I7(4*e),0,e)}function F7(e){return new Float32Array(I7(4*e),0,e)}function z7(e){return new Float64Array(I7(8*e),0,e)}function H7(e){return S7?new Uint8ClampedArray(I7(e),0,e):R7(e)}function U7(e){return k7?new BigUint64Array(I7(8*e),0,e):null}function V7(e){return O7?new BigInt64Array(I7(8*e),0,e):null}function G7(e){return new DataView(I7(e),0,e)}function X7(e){e=T7.nextPow2(e);var t=T7.log2(e),n=A7[t];return n.length>0?n.pop():new E7(e)}o7.free=function(e){if(E7.isBuffer(e))A7[T7.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|T7.log2(t);C7[n].push(e)}},o7.freeUint8=o7.freeUint16=o7.freeUint32=o7.freeBigUint64=o7.freeInt8=o7.freeInt16=o7.freeInt32=o7.freeBigInt64=o7.freeFloat32=o7.freeFloat=o7.freeFloat64=o7.freeDouble=o7.freeUint8Clamped=o7.freeDataView=function(e){M7(e.buffer)},o7.freeArrayBuffer=M7,o7.freeBuffer=function(e){A7[T7.log2(e.length)].push(e)},o7.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return I7(e);switch(t){case"uint8":return R7(e);case"uint16":return D7(e);case"uint32":return N7(e);case"int8":return j7(e);case"int16":return L7(e);case"int32":return B7(e);case"float":case"float32":return F7(e);case"double":case"float64":return z7(e);case"uint8_clamped":return H7(e);case"bigint64":return V7(e);case"biguint64":return U7(e);case"buffer":return X7(e);case"data":case"dataview":return G7(e);default:return null}return null},o7.mallocArrayBuffer=I7,o7.mallocUint8=R7,o7.mallocUint16=D7,o7.mallocUint32=N7,o7.mallocInt8=j7,o7.mallocInt16=L7,o7.mallocInt32=B7,o7.mallocFloat32=o7.mallocFloat=F7,o7.mallocFloat64=o7.mallocDouble=z7,o7.mallocUint8Clamped=H7,o7.mallocBigUint64=U7,o7.mallocBigInt64=V7,o7.mallocDataView=G7,o7.mallocBuffer=X7,o7.clearCache=function(){for(var e=0;e<32;++e)P7.UINT8[e].length=0,P7.UINT16[e].length=0,P7.UINT32[e].length=0,P7.INT8[e].length=0,P7.INT16[e].length=0,P7.INT32[e].length=0,P7.FLOAT[e].length=0,P7.DOUBLE[e].length=0,P7.BIGUINT64[e].length=0,P7.BIGINT64[e].length=0,P7.UINT8C[e].length=0,C7[e].length=0,A7[e].length=0};var W7=function(e,t){t<=4*Y7?q7(0,t-1,e):tee(0,t-1,e)},Y7=32;function q7(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var o=n[r++],a=n[r++],s=i,l=r-2;s-- >e;){var c=n[l-2],u=n[l-1];if(c<o)break;if(c===o&&u<a)break;n[l]=c,n[l+1]=u,l-=2}n[l]=o,n[l+1]=a}}function $7(e,t,n){t*=2;var r=n[e*=2],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function K7(e,t,n){t*=2,n[e*=2]=n[t],n[e+1]=n[t+1]}function Z7(e,t,n,r){t*=2,n*=2;var i=r[e*=2],o=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=o}function Q7(e,t,n,r,i){t*=2,i[e*=2]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function J7(e,t,n){t*=2;var r=n[e*=2],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function eee(e,t,n,r){var i=r[e*=2];return i<t||i===t&&r[e+1]<n}function tee(e,t,n){var r=(t-e+1)/6|0,i=e+r,o=t-r,a=e+t>>1,s=a-r,l=a+r,c=i,u=s,h=a,p=l,f=o,d=e+1,m=t-1,g=0;J7(c,u,n)&&(g=c,c=u,u=g),J7(p,f,n)&&(g=p,p=f,f=g),J7(c,h,n)&&(g=c,c=h,h=g),J7(u,h,n)&&(g=u,u=h,h=g),J7(c,p,n)&&(g=c,c=p,p=g),J7(h,p,n)&&(g=h,h=p,p=g),J7(u,f,n)&&(g=u,u=f,f=g),J7(u,h,n)&&(g=u,u=h,h=g),J7(p,f,n)&&(g=p,p=f,f=g);for(var y=n[2*u],v=n[2*u+1],b=n[2*p],_=n[2*p+1],w=2*c,T=2*h,x=2*f,E=2*i,S=2*a,k=2*o,O=0;O<2;++O){var P=n[w+O],C=n[T+O],A=n[x+O];n[E+O]=P,n[S+O]=C,n[k+O]=A}K7(s,e,n),K7(l,t,n);for(var M=d;M<=m;++M)if(eee(M,y,v,n))M!==d&&$7(M,d,n),++d;else if(!eee(M,b,_,n))for(;;){if(eee(m,b,_,n)){eee(m,y,v,n)?(Z7(M,d,m,n),++d,--m):($7(M,m,n),--m);break}if(--m<M)break;continue}Q7(e,d-1,y,v,n),Q7(t,m+1,b,_,n),d-2-e<=Y7?q7(e,d-2,n):tee(e,d-2,n),t-(m+2)<=Y7?q7(m+2,t,n):tee(m+2,t,n),m-d<=Y7?q7(d,m,n):tee(d,m,n)}var nee={init:function(e){var t=iee.nextPow2(e);lee.length<t&&(ree.free(lee),lee=ree.mallocInt32(t)),cee.length<t&&(ree.free(cee),cee=ree.mallocInt32(t)),uee.length<t&&(ree.free(uee),uee=ree.mallocInt32(t)),hee.length<t&&(ree.free(hee),hee=ree.mallocInt32(t)),pee.length<t&&(ree.free(pee),pee=ree.mallocInt32(t)),fee.length<t&&(ree.free(fee),fee=ree.mallocInt32(t));var n=8*t;dee.length<n&&(ree.free(dee),dee=ree.mallocDouble(n))},sweepBipartite:function(e,t,n,r,i,o,a,s,l,c){for(var u=0,h=2*e,p=e-1,f=h-1,d=n;d<r;++d){var m=o[d],g=h*d;dee[u++]=i[g+p],dee[u++]=-(m+1),dee[u++]=i[g+f],dee[u++]=m}for(d=a;d<s;++d){m=c[d]+aee;var y=h*d;dee[u++]=l[y+p],dee[u++]=-m,dee[u++]=l[y+f],dee[u++]=m}var v=u>>>1;oee(dee,v);var b=0,_=0;for(d=0;d<v;++d){var w=0|dee[2*d+1];if(w>=aee)mee(uee,hee,_--,w=w-aee|0);else if(w>=0)mee(lee,cee,b--,w);else if(w<=-268435456){w=-w-aee|0;for(var T=0;T<b;++T){if(void 0!==(x=t(lee[T],w)))return x}gee(uee,hee,_++,w)}else{w=-w-1|0;for(T=0;T<_;++T){var x;if(void 0!==(x=t(w,uee[T])))return x}gee(lee,cee,b++,w)}}},sweepComplete:function(e,t,n,r,i,o,a,s,l,c){for(var u=0,h=2*e,p=e-1,f=h-1,d=n;d<r;++d){var m=o[d]+1<<1,g=h*d;dee[u++]=i[g+p],dee[u++]=-m,dee[u++]=i[g+f],dee[u++]=m}for(d=a;d<s;++d){m=c[d]+1<<1;var y=h*d;dee[u++]=l[y+p],dee[u++]=1|-m,dee[u++]=l[y+f],dee[u++]=1|m}var v=u>>>1;oee(dee,v);var b=0,_=0,w=0;for(d=0;d<v;++d){var T=0|dee[2*d+1],x=1&T;if(d<v-1&&T>>1===dee[2*d+3]>>1&&(x=2,d+=1),T<0){for(var E=-(T>>1)-1,S=0;S<w;++S){if(void 0!==(k=t(pee[S],E)))return k}if(0!==x)for(S=0;S<b;++S){if(void 0!==(k=t(lee[S],E)))return k}if(1!==x)for(S=0;S<_;++S){var k;if(void 0!==(k=t(uee[S],E)))return k}0===x?gee(lee,cee,b++,E):1===x?gee(uee,hee,_++,E):2===x&&gee(pee,fee,w++,E)}else{E=(T>>1)-1;0===x?mee(lee,cee,b--,E):1===x?mee(uee,hee,_--,E):2===x&&mee(pee,fee,w--,E)}}},scanBipartite:function(e,t,n,r,i,o,a,s,l,c,u,h){var p=0,f=2*e,d=t,m=t+e,g=1,y=1;r?y=aee:g=aee;for(var v=i;v<o;++v){var b=v+g,_=f*v;dee[p++]=a[_+d],dee[p++]=-b,dee[p++]=a[_+m],dee[p++]=b}for(v=l;v<c;++v){b=v+y;var w=f*v;dee[p++]=u[w+d],dee[p++]=-b}var T=p>>>1;oee(dee,T);var x=0;for(v=0;v<T;++v){var E=0|dee[2*v+1];if(E<0){var S=!1;if((b=-E)>=aee?(S=!r,b-=aee):(S=!!r,b-=1),S)gee(lee,cee,x++,b);else{var k=h[b],O=f*b,P=u[O+t+1],C=u[O+t+1+e];e:for(var A=0;A<x;++A){var M=lee[A],I=f*M;if(!(C<a[I+t+1]||a[I+t+1+e]<P)){for(var R=t+2;R<e;++R)if(u[O+R+e]<a[I+R]||a[I+R+e]<u[O+R])continue e;var D,N=s[M];if(void 0!==(D=r?n(k,N):n(N,k)))return D}}}}else mee(lee,cee,x--,E-g)}},scanComplete:function(e,t,n,r,i,o,a,s,l,c,u){for(var h=0,p=2*e,f=t,d=t+e,m=r;m<i;++m){var g=m+aee,y=p*m;dee[h++]=o[y+f],dee[h++]=-g,dee[h++]=o[y+d],dee[h++]=g}for(m=s;m<l;++m){g=m+1;var v=p*m;dee[h++]=c[v+f],dee[h++]=-g}var b=h>>>1;oee(dee,b);var _=0;for(m=0;m<b;++m){var w=0|dee[2*m+1];if(w<0){if((g=-w)>=aee)lee[_++]=g-aee;else{var T=u[g-=1],x=p*g,E=c[x+t+1],S=c[x+t+1+e];e:for(var k=0;k<_;++k){var O=lee[k],P=a[O];if(P===T)break;var C=p*O;if(!(S<o[C+t+1]||o[C+t+1+e]<E)){for(var A=t+2;A<e;++A)if(c[x+A+e]<o[C+A]||o[C+A+e]<c[x+A])continue e;var M=n(P,T);if(void 0!==M)return M}}}}else{for(g=w-aee,k=_-1;k>=0;--k)if(lee[k]===g){for(A=k+1;A<_;++A)lee[A-1]=lee[A];break}--_}}}},ree=o7,iee=a7,oee=W7,aee=1<<28,see=1024,lee=ree.mallocInt32(see),cee=ree.mallocInt32(see),uee=ree.mallocInt32(see),hee=ree.mallocInt32(see),pee=ree.mallocInt32(see),fee=ree.mallocInt32(see),dee=ree.mallocDouble(8192);function mee(e,t,n,r){var i=t[r],o=e[n-1];e[i]=o,t[o]=i}function gee(e,t,n,r){e[n]=r,t[r]=n}var yee={},vee="d",bee="ax",_ee="fp",wee="es",Tee="rs",xee="re",Eee="rb",See="bs",kee="be",Oee="bb",Pee=[vee,bee,"vv",Tee,xee,Eee,"ri",See,kee,Oee,"bi"];function Cee(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],r=Pee.slice();e||r.splice(3,0,_ee);var i=["function "+t+"("+r.join()+"){"];function o(t,r){var o=function(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",Pee.join(),"){","var ",wee,"=2*",vee,";"],o="for(var i=rs,rp=es*rs;i<re;++i,rp+=es){var x0=rb[ax+rp],x1=rb[ax+rp+d],xi=ri[i];",a="for(var j=bs,bp=es*bs;j<be;++j,bp+=es){var y0=bb[ax+bp],"+(n?"y1=bb[ax+bp+d],":"")+"yi=bi[j];";return e?i.push(o,"Q",":",a):i.push(a,"Q",":",o),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k=ax+1;k<d;++k){var r0=rb[k+rp],r1=rb[k+d+rp],b0=bb[k+bp],b1=bb[k+d+bp];if(r1<b0||b1<r0)continue Q;}var rv=vv("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if(rv!==void 0)return rv;}}}"),{name:r,code:i.join("")}}(t,r,e);n.push(o.code),i.push("return "+o.name+"("+Pee.join()+");")}i.push("if(re-rs>be-bs){"),e?(o(!0,!1),i.push("}else{"),o(!1,!1)):(i.push("if(fp){"),o(!0,!0),i.push("}else{"),o(!0,!1),i.push("}}else{if(fp){"),o(!1,!0),i.push("}else{"),o(!1,!1),i.push("}")),i.push("}}return "+t);var a=n.join("")+i.join("");return new Function(a)()}yee.partial=Cee(!1),yee.full=Cee(!0);var Aee=function(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(Mee.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)},Mee="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";var Iee=function(e,t,n,r,i,o){if(r<=n+1)return n;for(var a=n,s=r,l=r+n>>>1,c=2*e,u=l,h=i[c*l+t];a<s;){if(s-a<Dee){Nee(e,t,a,s,i,o),h=i[c*l+t];break}var p=s-a,f=Math.random()*p+a|0,d=i[c*f+t],m=Math.random()*p+a|0,g=i[c*m+t],y=Math.random()*p+a|0,v=i[c*y+t];d<=g?v>=g?(u=m,h=g):d>=v?(u=f,h=d):(u=y,h=v):g>=v?(u=m,h=g):v>=d?(u=f,h=d):(u=y,h=v);for(var b=c*(s-1),_=c*u,w=0;w<c;++w,++b,++_){var T=i[b];i[b]=i[_],i[_]=T}var x=o[s-1];o[s-1]=o[u],o[u]=x;for(b=c*(s-1),_=c*(u=Ree(e,t,a,s-1,i,o,h)),w=0;w<c;++w,++b,++_){T=i[b];i[b]=i[_],i[_]=T}x=o[s-1];if(o[s-1]=o[u],o[u]=x,l<u){for(s=u-1;a<s&&i[c*(s-1)+t]===h;)s-=1;s+=1}else{if(!(u<l))break;for(a=u+1;a<s&&i[c*a+t]===h;)a+=1}}return Ree(e,t,n,l,i,o,i[c*l+t])},Ree=Aee("lo<p0",["p0"]),Dee=8;function Nee(e,t,n,r,i,o){for(var a=2*e,s=a*(n+1)+t,l=n+1;l<r;++l,s+=a)for(var c=i[s],u=l,h=a*(l-1);u>n&&i[h+t]>c;--u,h-=a){for(var p=h,f=h+a,d=0;d<a;++d,++p,++f){var m=i[p];i[p]=i[f],i[f]=m}var g=o[u];o[u]=o[u-1],o[u-1]=g}}var jee=function(e,t,n,r,i,o,a,s,l){!function(e,t){var n=8*Bee.log2(t+1)*(e+1)|0,r=Bee.nextPow2(ete*n);nte.length<r&&(Lee.free(nte),nte=Lee.mallocInt32(r));var i=Bee.nextPow2(tte*n);rte.length<i&&(Lee.free(rte),rte=Lee.mallocDouble(i))}(e,r+a);var c,u=0,h=2*e;for(ite(u++,0,0,r,0,a,n?16:0,-1/0,1/0),n||ite(u++,0,0,a,0,r,1,-1/0,1/0);u>0;){var p=(u-=1)*ete,f=nte[p],d=nte[p+1],m=nte[p+2],g=nte[p+3],y=nte[p+4],v=nte[p+5],b=u*tte,_=rte[b],w=rte[b+1],T=1&v,x=!!(16&v),E=i,S=o,k=s,O=l;if(T&&(E=s,S=l,k=i,O=o),!(2&v&&(m=Kee(e,f,d,m,E,S,w),d>=m))&&!(4&v&&(d=Zee(e,f,d,m,E,S,_),d>=m))){var P=m-d,C=y-g;if(x){if(e*P*(P+C)<Yee){if(void 0!==(c=Uee.scanComplete(e,f,t,d,m,E,S,g,y,k,O)))return c;continue}}else{if(e*Math.min(P,C)<Xee){if(void 0!==(c=zee(e,f,t,T,d,m,E,S,g,y,k,O)))return c;continue}if(e*P*C<Wee){if(void 0!==(c=Uee.scanBipartite(e,f,t,T,d,m,E,S,g,y,k,O)))return c;continue}}var A=qee(e,f,d,m,E,S,_,w);if(d<A)if(e*(A-d)<Xee){if(void 0!==(c=Hee(e,f+1,t,d,A,E,S,g,y,k,O)))return c}else if(f===e-2){if(void 0!==(c=T?Uee.sweepBipartite(e,t,g,y,k,O,d,A,E,S):Uee.sweepBipartite(e,t,d,A,E,S,g,y,k,O)))return c}else ite(u++,f+1,d,A,g,y,T,-1/0,1/0),ite(u++,f+1,g,y,d,A,1^T,-1/0,1/0);if(A<m){var M=Vee(e,f,g,y,k,O),I=k[h*M+f],R=$ee(e,f,M,y,k,O,I);if(R<y&&ite(u++,f,A,m,R,y,(4|T)+(x?16:0),I,w),g<M&&ite(u++,f,A,m,g,M,(2|T)+(x?16:0),_,I),M+1===R){if(void 0!==(c=x?ate(e,f,t,A,m,E,S,M,k,O[M]):ote(e,f,t,T,A,m,E,S,M,k,O[M])))return c}else if(M<R){var D;if(x){if(A<(D=Qee(e,f,A,m,E,S,I))){var N=$ee(e,f,A,D,E,S,I);if(f===e-2){if(A<N&&void 0!==(c=Uee.sweepComplete(e,t,A,N,E,S,M,R,k,O))||N<D&&void 0!==(c=Uee.sweepBipartite(e,t,N,D,E,S,M,R,k,O)))return c}else A<N&&ite(u++,f+1,A,N,M,R,16,-1/0,1/0),N<D&&(ite(u++,f+1,N,D,M,R,0,-1/0,1/0),ite(u++,f+1,M,R,N,D,1,-1/0,1/0))}}else A<(D=T?Jee(e,f,A,m,E,S,I):Qee(e,f,A,m,E,S,I))&&(f===e-2?c=T?Uee.sweepBipartite(e,t,M,R,k,O,A,D,E,S):Uee.sweepBipartite(e,t,A,D,E,S,M,R,k,O):(ite(u++,f+1,A,D,M,R,T,-1/0,1/0),ite(u++,f+1,M,R,A,D,1^T,-1/0,1/0)))}}}}},Lee=o7,Bee=a7,Fee=yee,zee=Fee.partial,Hee=Fee.full,Uee=nee,Vee=Iee,Gee=Aee,Xee=128,Wee=1<<22,Yee=1<<22,qee=Gee("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),$ee=Gee("lo===p0",["p0"]),Kee=Gee("lo<p0",["p0"]),Zee=Gee("hi<=p0",["p0"]),Qee=Gee("lo<=p0&&p0<=hi",["p0"]),Jee=Gee("lo<p0&&p0<=hi",["p0"]),ete=6,tte=2,nte=Lee.mallocInt32(1024),rte=Lee.mallocDouble(1024);function ite(e,t,n,r,i,o,a,s,l){var c=ete*e;nte[c]=t,nte[c+1]=n,nte[c+2]=r,nte[c+3]=i,nte[c+4]=o,nte[c+5]=a;var u=tte*e;rte[u]=s,rte[u+1]=l}function ote(e,t,n,r,i,o,a,s,l,c,u){var h=2*e,p=l*h,f=c[p+t];e:for(var d=i,m=i*h;d<o;++d,m+=h){var g=a[m+t],y=a[m+t+e];if(!(f<g||y<f)&&(!r||f!==g)){for(var v=s[d],b=t+1;b<e;++b){g=a[m+b],y=a[m+b+e];var _=c[p+b],w=c[p+b+e];if(y<_||w<g)continue e}var T;if(void 0!==(T=r?n(u,v):n(v,u)))return T}}}function ate(e,t,n,r,i,o,a,s,l,c){var u=2*e,h=s*u,p=l[h+t];e:for(var f=r,d=r*u;f<i;++f,d+=u){var m=a[f];if(m!==c){var g=o[d+t],y=o[d+t+e];if(!(p<g||y<p)){for(var v=t+1;v<e;++v){g=o[d+v],y=o[d+v+e];var b=l[h+v],_=l[h+v+e];if(y<b||_<g)continue e}var w=n(m,c);if(void 0!==w)return w}}}}var ste,lte=function(e,t,n){switch(arguments.length){case 1:return function(e){return ste=[],dte(e,e,mte,!0),ste}(e);case 2:return"function"==typeof t?dte(e,e,t,!0):function(e,t){return ste=[],dte(e,t,mte,!1),ste}(e,t);case 3:return dte(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}},cte=o7,ute=nee,hte=jee;function pte(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function fte(e,t,n,r){for(var i=0,o=0,a=0,s=e.length;a<s;++a){var l=e[a];if(!pte(t,l)){for(var c=0;c<2*t;++c)n[i++]=l[c];r[o++]=a}}return o}function dte(e,t,n,r){var i=e.length,o=t.length;if(!(i<=0||o<=0)){var a=e[0].length>>>1;if(!(a<=0)){var s,l=cte.mallocDouble(2*a*i),c=cte.mallocInt32(i);if((i=fte(e,a,l,c))>0){if(1===a&&r)ute.init(i),s=ute.sweepComplete(a,n,0,i,l,c,0,i,l,c);else{var u=cte.mallocDouble(2*a*o),h=cte.mallocInt32(o);(o=fte(t,a,u,h))>0&&(ute.init(i+o),s=1===a?ute.sweepBipartite(a,n,0,i,l,c,0,o,u,h):hte(a,n,r,i,l,c,o,u,h),cte.free(u),cte.free(h))}cte.free(l),cte.free(c)}return s}}}function mte(e,t){ste.push([e,t])}const gte=ks(lte);var yte={exports:{}},vte=function(e,t,n){var r=e*t,i=bte*e,o=i-e,a=i-o,s=e-a,l=bte*t,c=l-(l-t),u=t-c,h=s*u-(r-a*c-s*c-a*u);return n?(n[0]=h,n[1]=r,n):[h,r]},bte=+(Math.pow(2,27)+1);var _te=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}(e[0],t[0]);var i,o,a=new Array(n+r),s=0,l=0,c=0,u=Math.abs,h=e[l],p=u(h),f=t[c],d=u(f);p<d?(o=h,(l+=1)<n&&(h=e[l],p=u(h))):(o=f,(c+=1)<r&&(f=t[c],d=u(f))),l<n&&p<d||c>=r?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=t[c],d=u(f)));for(var m,g,y=i+o,v=y-i,b=o-v,_=b,w=y;l<n&&c<r;)p<d?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=t[c],d=u(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m,(l+=1)<n&&(h=e[l]);for(;c<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m,(c+=1)<r&&(f=t[c]);return _&&(a[s++]=_),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a};var wte=function(e,t,n){var r=e+t,i=r-e,o=t-i,a=e-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]};var Tte=vte,xte=wte,Ete=function(e,t){var n=e.length;if(1===n){var r=Tte(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Tte(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var l=1;l<n;++l){Tte(e[l],t,a);var c=o[1];xte(c,a[0],o),o[0]&&(i[s++]=o[0]);var u=a[1],h=o[1],p=u+h,f=h-(p-u);o[1]=p,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i};var Ste=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=n-r,o=t-r,a=e-i,s=a+o;return s?[s,n]:[n]}(e[0],-t[0]);var i,o,a=new Array(n+r),s=0,l=0,c=0,u=Math.abs,h=e[l],p=u(h),f=-t[c],d=u(f);p<d?(o=h,(l+=1)<n&&(h=e[l],p=u(h))):(o=f,(c+=1)<r&&(f=-t[c],d=u(f))),l<n&&p<d||c>=r?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=-t[c],d=u(f)));for(var m,g,y=i+o,v=y-i,b=o-v,_=b,w=y;l<n&&c<r;)p<d?(i=h,(l+=1)<n&&(h=e[l],p=u(h))):(i=f,(c+=1)<r&&(f=-t[c],d=u(f))),(b=(o=_)-(v=(y=i+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m;for(;l<n;)(b=(o=_)-(v=(y=(i=h)+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m,(l+=1)<n&&(h=e[l]);for(;c<r;)(b=(o=_)-(v=(y=(i=f)+o)-i))&&(a[s++]=b),_=w-((m=w+y)-(g=m-w))+(y-g),w=m,(c+=1)<r&&(f=-t[c]);return _&&(a[s++]=_),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a};!function(e){var t=vte,n=_te,r=Ete,i=Ste,o=11102230246251565e-32,a=(3+16*o)*o,s=(7+56*o)*o;function l(e,t,n,r){return function(n,i,o){var a=e(e(t(i[1],o[0]),t(-o[1],i[0])),e(t(n[1],i[0]),t(-i[1],n[0]))),s=e(t(n[1],o[0]),t(-o[1],n[0])),l=r(a,s);return l[l.length-1]}}function c(e,t,n,r){return function(i,o,a,s){var l=e(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2])))),c=e(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2])))),u=r(l,c);return u[u.length-1]}}function u(e,t,n,r){return function(i,o,a,s,l){var c=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),o[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),-a[3]),n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),l[2]))),s[3]))),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),-l[3]),e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-s[2]),n(e(t(o[1],s[0]),t(-s[1],o[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-o[3])))),e(e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),s[3]),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),-l[3]),n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),o[2]),e(n(e(t(o[1],s[0]),t(-s[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),s[2]))),i[3]))),e(n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-o[3]),e(n(e(n(e(t(o[1],s[0]),t(-s[1],o[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),s[2]))),a[3]),n(e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2]))),-s[3]))))),u=e(e(e(n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),a[2]),e(n(e(t(a[1],l[0]),t(-l[1],a[0])),-s[2]),n(e(t(a[1],s[0]),t(-s[1],a[0])),l[2]))),i[3]),n(e(n(e(t(s[1],l[0]),t(-l[1],s[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-s[2]),n(e(t(i[1],s[0]),t(-s[1],i[0])),l[2]))),-a[3])),e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),s[3]),n(e(n(e(t(a[1],s[0]),t(-s[1],a[0])),i[2]),e(n(e(t(i[1],s[0]),t(-s[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),s[2]))),-l[3]))),e(e(n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),o[2]),e(n(e(t(o[1],l[0]),t(-l[1],o[0])),-a[2]),n(e(t(o[1],a[0]),t(-a[1],o[0])),l[2]))),i[3]),n(e(n(e(t(a[1],l[0]),t(-l[1],a[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-a[2]),n(e(t(i[1],a[0]),t(-a[1],i[0])),l[2]))),-o[3])),e(n(e(n(e(t(o[1],l[0]),t(-l[1],o[0])),i[2]),e(n(e(t(i[1],l[0]),t(-l[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),l[2]))),a[3]),n(e(n(e(t(o[1],a[0]),t(-a[1],o[0])),i[2]),e(n(e(t(i[1],a[0]),t(-a[1],i[0])),-o[2]),n(e(t(i[1],o[0]),t(-o[1],i[0])),a[2]))),-l[3])))),h=r(c,u);return h[h.length-1]}}function h(e){return(3===e?l:4===e?c:u)(n,t,r,i)}var p=h(3),f=h(4),d=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),o=(e[0]-n[0])*(t[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var l=a*r;return s>=l||s<=-l?s:p(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],o=t[0]-r[0],a=n[0]-r[0],l=e[1]-r[1],c=t[1]-r[1],u=n[1]-r[1],h=e[2]-r[2],p=t[2]-r[2],d=n[2]-r[2],m=o*u,g=a*c,y=a*l,v=i*u,b=i*c,_=o*l,w=h*(m-g)+p*(y-v)+d*(b-_),T=(Math.abs(m)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(v))*Math.abs(p)+(Math.abs(b)+Math.abs(_))*Math.abs(d),x=s*T;return w>x||-w>x?w:f(e,t,n,r)}];function m(e){var t=d[e.length];return t||(t=d[e.length]=h(e.length)),t.apply(void 0,e)}function g(e,t,n,r,i,o,a){return function(t,n,s,l,c){switch(arguments.length){case 0:case 1:return 0;case 2:return r(t,n);case 3:return i(t,n,s);case 4:return o(t,n,s,l);case 5:return a(t,n,s,l,c)}for(var u=new Array(arguments.length),h=0;h<arguments.length;++h)u[h]=arguments[h];return e(u)}}!function(){for(;d.length<=5;)d.push(h(d.length));e.exports=g.apply(void 0,[m].concat(d));for(var t=0;t<=5;++t)e.exports[t]=d[t]}()}(yte);var kte=function(e,t){for(var n=t[0],r=t[1],i=e.length,o=1,a=i,s=0,l=i-1;s<a;l=s++){var c=e[s],u=e[l],h=c[1],p=u[1];if(p<h){if(p<r&&r<h){if(0===(f=Ote(c,u,t)))return 0;o^=0<f|0}else if(r===h){if(h<e[(s+1)%i][1]){if(0===(f=Ote(c,u,t)))return 0;o^=0<f|0}}}else if(h<p){if(h<r&&r<p){if(0===(f=Ote(c,u,t)))return 0;o^=f<0|0}else if(r===h){if(e[(s+1)%i][1]<h){var f;if(0===(f=Ote(c,u,t)))return 0;o^=f<0|0}}}else if(r===h){var d=Math.min(c[0],u[0]),m=Math.max(c[0],u[0]);if(0===s){for(;l>0;){var g=(l+i-1)%i;if((b=e[g])[1]!==r)break;var y=b[0];d=Math.min(d,y),m=Math.max(m,y),l=g}if(0===l)return d<=n&&n<=m?0:1;a=l+1}for(var v=e[(l+i-1)%i][1];s+1<a;){var b;if((b=e[s+1])[1]!==r)break;y=b[0];d=Math.min(d,y),m=Math.max(m,y),s+=1}if(d<=n&&n<=m)return 0;var _=e[(s+1)%i][1];n<d&&v<r!=_<r&&(o^=1)}}return 2*o-1},Ote=yte.exports;const Pte=ks(kte);function Cte(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ate(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ate(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let Mte=function(){return Cte(function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.context=t;const{id:r,pubSub:i,getTheme:o}=t;this.pubSub=i??XW,this.id=r,this._xScale=ph(),this._yScale=ph(),this._refXScale=ph(),this._refYScale=ph(),this.position=[0,0],this.dimensions=[1,1],this.options=n,this.pubSubs=[],this.getTheme=o??(()=>{}),this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this))),this.isLeftModified=!1},[{key:"isWithin",value:function(e,t){let n=e,r=t,i=this.position[0],o=this.position[1];return this.isLeftModified&&(n=t,r=e,i=this.position[1],o=this.position[0]),CT(n,r,i,this.dimensions[0]+i,o,this.dimensions[1]+o)}},{key:"getProp",value:function(e){return()=>this[e]}},{key:"getData",value:function(){}},{key:"click",value:function(e,t,n){return{type:"generic",event:n,payload:null}}},{key:"clickOutside",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(e){return e?(this._refXScale=e,this):this._refXScale}},{key:"refYScale",value:function(e){return e?(this._refYScale=e,this):this._refYScale}},{key:"xScale",value:function(e){return e?(this._xScale=e,this):this._xScale}},{key:"yScale",value:function(e){return e?(this._yScale=e,this):this._yScale}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t)}},{key:"refScalesChanged",value:function(e,t){this._refXScale=e,this._refYScale=t}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"defaultMouseMoveHandler",value:function(e){}},{key:"remove",value:function(){this.pubSubs.forEach(e=>this.pubSub.unsubscribe(e)),this.pubSubs=[]}},{key:"rerender",value:function(e){}},{key:"respondsToPosition",value:function(e,t){return this.isWithin(e,t)}},{key:"zoomedY",value:function(e,t){}},{key:"movedY",value:function(e){}}])}();function Ite(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rte(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Dte(e,t,n){return t=Lte(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Nte()?Reflect.construct(t,n||[],Lte(e).constructor):t.apply(e,n))}function Nte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nte=function(){return!!e})()}function jte(){return jte=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Lte(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jte.apply(null,arguments)}function Lte(e){return(Lte=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bte(e,t){return(Bte=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fte(e,t){const n=e.map(e=>+e).sort((e,t)=>t-e);return function(e,t){const n=sh(t,e);return th(`.${n}`,e)(e)}(n[t],n[n.length-1])}let zte=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Dte(this,t,[e,n]);const{scene:i}=e;r.scene=i,r.delayDrawing=!1,r.pBase=new ow.PIXI.Graphics,r.pMasked=new ow.PIXI.Graphics,r.pMask=new ow.PIXI.Graphics,r.pMain=new ow.PIXI.Graphics,r.pBorder=new ow.PIXI.Graphics,r.pBackground=new ow.PIXI.Graphics,r.pForeground=new ow.PIXI.Graphics,r.pLabel=new ow.PIXI.Graphics,r.pMobile=new ow.PIXI.Graphics,r.pAxis=new ow.PIXI.Graphics,r.pMouseOver=new ow.PIXI.Graphics,r.scene.addChild(r.pBase),r.pBase.addChild(r.pMasked),r.pMasked.addChild(r.pBackground),r.pMasked.addChild(r.pMain),r.pMasked.addChild(r.pMask),r.pMasked.addChild(r.pMobile),r.pMasked.addChild(r.pBorder),r.pMasked.addChild(r.pLabel),r.pMasked.addChild(r.pForeground),r.pMasked.addChild(r.pMouseOver),r.pBase.addChild(r.pAxis),r.pMasked.mask=r.pMask,r.prevOptions="",r.options=Object.assign(r.options,n);const o=r.getName();return r.labelTextFontFamily="Arial",r.labelTextFontSize=12,r.labelXOffset=0,r.labelText=new ow.PIXI.Text(o,{fontSize:`${r.labelTextFontSize}px`,fontFamily:r.labelTextFontFamily,fill:"black"}),r.pLabel.addChild(r.labelText),r.errorText=new ow.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),r.errorText.anchor.x=.5,r.errorText.anchor.y=.5,r.pLabel.addChild(r.errorText),r.flipText=!1,r.tilesetInfo=void 0,r.errorTexts={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bte(e,t)}(t,e),Ite(t,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(e){this.position=e,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setDimensions",value:function(e){(function(e,t,n){var r=jte(Lte(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r})(t,"setDimensions",this)([e]),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setMask",value:function(e,t){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(e[0],e[1],t[0],t[1]),this.pMask.endFill()}},{key:"setForeground",value:function(){this.pForeground.position.y=this.position[1],this.pForeground.position.x=this.position[0]}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){const e=this.pBorder;if(e.clear(),!this.options||!this.options.trackBorderWidth)return;const t=aw(this.options.trackBorderColor?this.options.trackBorderColor:"white");e.lineStyle(this.options.trackBorderWidth,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"setError",value:function(e,t){this.errorTexts[t]=e,this.drawError()}},{key:"drawError",value:function(){this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2;const e=Object.values(this.errorTexts).filter(e=>e?.length).reduce((e,t)=>e?`${e}\n${t}`:t,"");if(this.errorText.text=e,this.errorText.alpha=.8,e?.length){const e=this.pBorder;e.clear(),e.lineStyle(1,aw("red")),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}else this.pBorder.clear()}},{key:"drawBackground",value:function(){const e=this.pBackground;if(e.clear(),!this.options||!this.options.backgroundColor)return;let t=1,n=this.options.backgroundColor;"transparent"===this.options.backgroundColor&&(t=0,n="white");const r=aw(n);e.beginFill(r,t),e.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"getLabelColor",value:function(){return this.options.labelColor&&"[glyph-color]"!==this.options.labelColor?this.options.labelColor:this.options.lineStrokeColor||this.options.barFillColor||"black"}},{key:"getName",value:function(){var e;return this.options.name?this.options.name:(null==(e=this.tilesetInfo)?void 0:e.name)||""}},{key:"drawLabel",value:function(){var e,t;if(!this.labelText)return;const n=this.pLabel;if(n.clear(),!this.options||!this.options.labelPosition||"hidden"===this.options.labelPosition)return void(this.labelText.alpha=0);const{labelBackgroundColor:r="white",labelBackgroundOpacity:i=.5}=this.options;n.beginFill(aw(r),+i);const o=aw(this.getLabelColor());if(this.dimensions[0]<0)return;let a=this.options.labelShowAssembly&&this.tilesetInfo&&this.tilesetInfo.coordSystem?`${this.tilesetInfo.coordSystem} | `:"";if(a+=this.getName(),this.options.labelShowResolution&&dT(this.tilesetInfo)&&this.tilesetInfo.bins_per_dimension){const e=function(e,t,n,r){const i=t/(2**e*n);if(!Number.isNaN(i)){const e=sh(t/(2**r*n),i);return th(`.${e}`,i)(i)}return console.warn("NaN resolution, screen is probably too small."),""}(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);a+=`\n[Current data resolution: ${e}]`}else if(this.options.labelShowResolution&&mT(this.tilesetInfo)){a+=`\n[Current data resolution: ${Fte(this.tilesetInfo.resolutions,this.calculateZoomLevel())}]`}if(null!=(e=this.options)&&e.dataTransform){let e=null;if(null!=(t=this.tilesetInfo)&&t.transforms)for(const t of this.tilesetInfo.transforms)t.value===this.options.dataTransform&&(e=t);e?a+=`\n[Transform: ${e.name}]`:"None"===this.options.dataTransform?a+="\n[Transform: None ]":a+="\n[Transform: Default ]"}this.labelText.text=a,this.labelText.style={fontSize:`${this.labelTextFontSize}px`,fontFamily:this.labelTextFontFamily,fill:o},this.labelText.alpha=typeof this.options.labelTextOpacity<"u"?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1);const{labelLeftMargin:s=0,labelRightMargin:l=0,labelTopMargin:c=0,labelBottomMargin:u=0}=this.options;"topLeft"===this.options.labelPosition?(this.labelText.x=this.position[0]+s+this.labelXOffset,this.labelText.y=this.position[1]+c,this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,n.drawRect(this.position[0]+s+this.labelXOffset,this.position[1]+c,this.labelText.width+2,this.labelText.height+2)):"bottomLeft"===this.options.labelPosition&&!this.flipText||"topRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+(s||c),this.labelText.y=this.position[1]+this.dimensions[1]-(u||l),this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+(s||c)+this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-2-(u||l),this.labelText.width+2,this.labelText.height+2)):"topRight"===this.options.labelPosition&&!this.flipText||"bottomLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]-(l||u),this.labelText.y=this.position[1]+(c||s),this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2-(l||u)-this.labelXOffset,this.position[1]+(c||s),this.labelText.width+2,this.labelText.height+2)):"bottomRight"===this.options.labelPosition?(this.labelText.x=this.position[0]+this.dimensions[0]-l,this.labelText.y=this.position[1]+this.dimensions[1]-u,this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2+this.labelXOffset,n.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-2-l-this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-2-u,this.labelText.width+2,this.labelText.height+2)):"outerLeft"===this.options.labelPosition&&!this.flipText||"outerTop"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):"outerTop"===this.options.labelPosition&&!this.flipText||"outerLeft"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):"outerBottom"===this.options.labelPosition&&!this.flipText||"outerRight"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):"outerRight"===this.options.labelPosition&&!this.flipText||"outerBottom"===this.options.labelPosition&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,"outerLeft"===this.options.labelPosition||"outerRight"===this.options.labelPosition||"outerTop"===this.options.labelPosition||"outerBottom"===this.options.labelPosition?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}},{key:"rerender",value:function(e){this.options=e,this.draw(),this.drawBackground(),this.drawLabel(),this.drawError(),this.drawBorder()}},{key:"draw",value:function(){this.drawError()}},{key:"exportSVG",value:function(){var e;const t=document.createElement("g"),n=document.createElement("rect");n.setAttribute("x",`${this.position[0]}`),n.setAttribute("y",`${this.position[1]}`),n.setAttribute("width",`${this.dimensions[0]}`),n.setAttribute("height",`${this.dimensions[1]}`),null!=(e=this.options)&&e.backgroundColor?n.setAttribute("fill",this.options.backgroundColor):n.setAttribute("fill-opacity","0");const r=document.createElement("g");r.setAttribute("class","g-clipped"),t.appendChild(r),r.appendChild(n);const i=document.createElement("g");r.setAttribute("class","g-track"),r.appendChild(i);const o=document.createElement("g");r.setAttribute("class","g-labels"),r.appendChild(o);const a=document.createElementNS("http://www.w3.org/2000/svg","clipPath");t.appendChild(a);const s=document.createElementNS("http://www.w3.org/2000/svg","polygon");a.appendChild(s),s.setAttribute("points",`${this.position[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]+this.dimensions[1]} ${this.position[0]},${this.position[1]+this.dimensions[1]} `);const l=a_.nice();a.setAttribute("id",l),r.setAttribute("style",`clip-path:url(#${l});`);const c=this.labelText.text.split("\n");let u=0;const h=(this.labelTextFontSize+2)*c.length+3;.5===this.labelText.anchor.y?u=h/2:1===this.labelText.anchor.y&&(u=-h);for(let p=0;p<c.length;p++){const e=document.createElement("text");if(e.setAttribute("font-family",this.labelTextFontFamily),e.setAttribute("font-size",`${this.labelTextFontSize}px`),e.innerText=c[p],"topLeft"===this.options.labelPosition||"topRight"===this.options.labelPosition){const t=u+(p+1)*(this.labelTextFontSize+2);e.setAttribute("dy",String(t))}else("bottomLeft"===this.options.labelPosition||"bottomRight"===this.options.labelPosition)&&e.setAttribute("dy",String(u+p*(this.labelTextFontSize+2)));e.setAttribute("fill",this.options.labelColor??""),.5===this.labelText.anchor.x?e.setAttribute("text-anchor","middle"):1===this.labelText.anchor.x&&e.setAttribute("text-anchor","end"),o.appendChild(e)}return o.setAttribute("transform",`translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`),[t,i]}},{key:"calculateZoomLevel",value:function(){throw new Error("Must be implemented by subclass")}}])}(Mte);function Hte(e){if(!e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}function Ute(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vte(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let Gte=function(){return Ute(function e(t,n,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._tileSource=r||function(e){return{fetchTiles:async t=>await MW(t,e),fetchTilesetInfo(t){let{server:n,tilesetUid:r}=t;return new Promise((t,i)=>{UW(n,r,t,i,e)})},registerTileset(e){let{server:t,url:n,filetype:r,coordSystem:i}=e;const o=`${lx(t)}/register_url/`;return fetch(o,{method:"POST",body:JSON.stringify({fileurl:n,filetype:r,coordSystem:i}),headers:{"Content-Type":"application/json; charset=utf-8"}})}}}(n),this.tilesetInfoLoading=!0,t?(this.dataConfig=JSON.parse(JSON.stringify(t)),this.uuid=a_.nice(),this.pubSub=n,t.children&&(this.dataConfig.children=t.children.map(t=>new e(t,n)))):console.error("No dataconfig provided")},[{key:"registerFileUrl",value:async function(e){let{server:t,url:n,filetype:r,coordSystem:i}=e;return this._tileSource.registerTileset({server:t,url:n,filetype:r,coordSystem:i})}},{key:"tilesetInfo",value:function(e){const{server:t,url:n,filetype:r,coordSystem:i}=this.dataConfig;return t&&n&&r?this.registerFileUrl({server:t,url:n,filetype:r,coordSystem:i}).then(e=>e.json()).then(t=>{this.dataConfig.tilesetUid=t.uid,this.tilesetInfoAfterRegister(e)}).catch(e=>{console.error("Error registering url",e)}):new Promise(()=>{this.tilesetInfoAfterRegister(e)})}},{key:"tilesetInfoAfterRegister",value:function(e){if(this.dataConfig.children){const t=this.dataConfig.children.map(e=>new Promise(t=>{e.tilesetInfo(t)}));Promise.all(t).then(t=>{e(t[0])})}else{const{server:t,tilesetUid:n}=this.dataConfig;t&&n?this._tileSource.fetchTilesetInfo({server:t,tilesetUid:n}).then(t=>{this.dataConfig.tilesetInfo=t[n],e(t[n],n)}).catch(t=>{this.tilesetInfoLoading=!1,e({error:t})}):(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),e(null))}}},{key:"fullTileId",value:function(e,t){return`${e}.${t}`}},{key:"fetchTilesDebounced",value:function(e,t){var n;if("horizontal-section"===this.dataConfig.type)return this.fetchHorizontalSection(e,t);if("vertical-section"===this.dataConfig.type)return this.fetchHorizontalSection(e,t,!0);if(!this.dataConfig.children&&this.dataConfig.tilesetUid&&this.dataConfig.server)return this._tileSource.fetchTiles({id:a_.nice(),server:this.dataConfig.server,tileIds:t.map(e=>`${this.dataConfig.tilesetUid}.${e}`),options:this.dataConfig.options}).then(n=>{const r=dw(n)[0].tilesetUid,i={};for(let e=0;e<t.length;e++){const o=this.fullTileId(r,t[e]);n[o].tilePositionId=t[e],i[t[e]]=n[o]}return e(i),i});const r=(null==(n=this.dataConfig.children)?void 0:n.map(e=>new Promise(n=>{e.fetchTilesDebounced(n,t)})))??[];return Promise.all(r).then(n=>{if("divided"===this.dataConfig.type&&function(e){return 2===e.length}(n)){const r=this.makeDivided(n,t);return e(r),r}return console.warn("Unimplemented dataConfig type. Returning first data source.",this.dataConfig),e(n[0]),n[0]})}},{key:"divideData",value:function(e,t){const n=new Float32Array(e.length);for(let r=0;r<n.length;r++)0===t[r]?n[r]=Number.NaN:n[r]=e[r]/t[r];return n}},{key:"horizontalSlice",value:function(){return null}},{key:"extractDataSlice",value:function(e,t,n,r){if(!r)return e.slice(t[1]*n,t[1]*(n+1));const i=new Array(t[1]);for(let o=n;o<e.length;o+=t[0])i[Math.floor(o/t[0])]=e[o];return i}},{key:"fetchHorizontalSection",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[],i=[],{slicePos:o,tilesetInfo:a,server:s}=this.dataConfig;Hte(o,"No slice position in dataConfig."),Hte(s,"No server in dataConfig."),Hte(a,"No tilesetInfo in dataConfig.");for(const l of t){const e=l.split("."),t=+e[0],s=+e[1],c=ph().domain([o,o]);let u=[];if(mT(a)){const e=a.resolutions.map(e=>+e).sort((e,t)=>t-e);u=BW(e[t],c,a.min_pos[n?1:0],a.max_pos[n?1:0])}else u=jW(t,c,a.min_pos[n?1:0],a.max_pos[n?1:0],a.max_zoom,a.max_width);const h=[s,u[0]].sort((e,t)=>e-t);h[0]===s?i.push(!1):i.push(!0);const p=`${t}.${h[0]}.${h[1]}`;r.push(p)}return this._tileSource.fetchTiles({id:a_.nice(),server:s,tileIds:r.map(e=>`${this.dataConfig.tilesetUid}.${e}`)}).then(n=>{const s=dw(n)[0].tilesetUid,l={};for(let e=0;e<r.length;e++){const c=r[e].split("."),u=+c[0],h=+c[1],p=+c[2],f=NW(a,a.max_width,a.min_pos[1],u,+o)[1],d=n[this.fullTileId(s,r[e])];let m=null;if(h===p){m=this.extractDataSlice(d.dense,[256,256],f);const e=this.extractDataSlice(d.dense,[256,256],f,1);for(let t=0;t<m.length;t++)m[t]+=e[t]}else m=i[e]?this.extractDataSlice(d.dense,[256,256],f,1):this.extractDataSlice(d.dense,[256,256],f);const g={min_value:Math.min.apply(null,m),max_value:Math.max.apply(null,m),denseDataExtrema:new Ex(m),minNonZero:DT(m),maxNonZero:IT(m),dense:m,dtype:d.dtype,server:d.server,tilePos:i[e]?[p]:[h],tilePositionId:t[e],tilesetUid:s,zoomLevel:d.zoomLevel};l[t[e]]=g}return e(l),l})}},{key:"makeDivided",value:function(e,t){e.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);const n={};for(let r=0;r<t.length;r++){const i=e[0][t[r]].zoomLevel,o=e[0][t[r]].tilePos;let a={zoomLevel:i,tilePos:o,tilePositionId:t[r]};const s=e[0][t[r]].dense,l=e[1][t[r]].dense;if(s&&l){const e=this.divideData(s,l);a={dense:e,denseDataExtrema:2===o.length?new Ox(e):new Ex(e),minNonZero:DT(e),maxNonZero:IT(e),zoomLevel:i,tilePos:o,tilePositionId:t[r]}}n[t[r]]=a}return n}}])}();const Xte=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];function Wte(e){let t=/^\s*/.exec(e);return null!==t?t[0].length:0}var Yte=function(e){if("string"!=typeof e)throw new TypeError("input must be a string");let t,n,r,i,o,a,s,l=[],c="LOCUS",u="DEFINITION",h="ACCESSION",p="VERSION",f="KEYWORDS",d="SOURCE",m="ORGANISM",g="REFERENCE",y="FEATURES",v="ORIGIN",b="//",_=e.split(/\r?\n/),w=!1;for(let j of _){if(null===j)break;let e=A(j),n=I(j),o=D(j),a=R(j);if(e===b||a?(r=e,i=null):o&&(i=e),""!==j.trim()&&";"!==e){if(!w&&r!==c)break;switch(r){case c:w=!0,S(j);break;case y:P(j,e,n);break;case v:E(j,e);break;case u:case h:case p:case f:M(r,j,r.toLowerCase());break;case d:i===m?M(i,j,"organism"):M(e,j,"source");break;case g:if(e===g){const e=t.references||[];t.references=e,e.push({})}O(j,i);break;case b:T()}}}return l[l.length-1]!==t&&T(),l;function T(){(function(){if(t&&t.features)for(let e=0;e<t.features.length;e++)t.features[e]=N(t.features[e])})(),l.push(t)}function x(){return t.features[t.features.length-1]}function E(e,n){if(n!==v){let n=e.replace(/[\s]*[0-9]*/g,"");t.sequence+=n}}function S(e){t={features:[],name:"Untitled sequence",sequence:"",references:[]};const n=(e=k(c,e)).match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);let r=n[1],i=+n[2],o=n[3],a="circular"===n[4];const s=t;let l="";n[6]?(s.genbankDivision=n[5],l=n[6]):l=n[5],s.circular=a,s.moleculeType=o;const u=l.match(/^(\d{2})-(.{3})-(\d{4})$/),h=new Date;h.setFullYear(+u[3]),h.setUTCMonth(Xte.indexOf(u[2].toUpperCase())),h.setDate(+u[1]),h.setUTCHours(12),h.setMinutes(0),h.setSeconds(0),h.setMilliseconds(0),s.date=h.toISOString(),s.name=r,s.size=i}function k(e,t){return 0===(t=t.replace(/^\s*/,"")).indexOf(e)&&(t=t.replace(e,"")),t.trim()}function O(e,n){const r=t.references;let i=r[r.length-1];n?M(n,e,n.toLowerCase(),i):M(g,e,"description",i)}function P(e,r,i){let l;if(r!==y)if(a&&(o=Wte(e),a=!1),function(e,t){let n=Wte(e);return!(t===n||e.trim().charAt(0).match(/\//))}(e,o))s?(C(e.trim()),s=!0):(n&&(n[n.length-1]+=e.trim().replace(/"/g,"")),s=!1);else if(function(e){let t=!1;return(e.trim().charAt(0).match(/\//)||e.match(/^[\s]*\/[\w]+=[\S]+/))&&(t=!0),t}(e))x()&&(function(e){let t,r;t=e.trim(),t=t.replace(/^\/|"$/g,""),r=t.split(/="|=/);let i=r[1];i&&(i=i.replace(/\\/g," "),e.match(/="/g)?i=i.replace(/".*/g,""):i.match(/^\d+$/g)&&(i=+i));let o=r[0],a=x().notes;a[o]?a[o].push(i):a[o]=[i],n=a[o]}(e),s=!1);else{l=i.match(/complement/g)?-1:1,t.features.push({notes:{}});let e=x();e.type=r,e.strand=l,C(i),s=!0}else a=!0}function C(e){e=e.trim();let t=[];e.replace(/(\d+)/g,function(e,n){t.push(n)});let n=x();n.start=+t[0],n.end=void 0===t[1]?+t[0]:+t[1]}function A(e){let t;return t=(e=e.trim()).split(/[\s]+/),t[0]}function M(e,n,r,i){i=i||t;let o=k(e,n);i[r]=i[r]?`${i[r]} `:"",i[r]+=o}function I(e){let t;return e.indexOf("=")<0?e=(e=e.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,"")).trim():(t=e.split(/=/),t[1])}function R(e){let t=!1;return e.substr(0,10).match(/^[\S]+/)&&(t=!0),t}function D(e){let t=!1;return e.substr(0,10).match(/^[\s]+[\S]+/)&&(t=!0),t}function N(e){return e.notes.label?e.name=e.notes.label[0]:e.notes.gene?e.name=e.notes.gene[0]:e.notes.ApEinfo_label?e.name=e.notes.ApEinfo_label[0]:e.notes.name?e.name=e.notes.name[0]:e.notes.organism?e.name=e.notes.organism[0]:e.notes.locus_tag?e.name=e.notes.locus_tag[0]:e.notes.note?e.name=e.notes.note[0]:e.name="Untitled Feature",e.name="string"==typeof e.name?e.name:String(e.name),e}};const qte=ks(Yte);function $te(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kte(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Zte(e,t,n){const r=[];if(!e.length)return[];let i=e[0].start,o=e[0].end;for(let a=1;a<e.length;a++)e[a].start<o+5/t?o=Math.max(o,e[a].end):(r.push({type:"filler",start:i,end:o,strand:n}),i=e[a].start,o=e[a].end);return r.push({start:i,end:o,type:"filler",strand:n}),r}function Qte(e){const t=e.end-e.start,n=1===e.strand?"+":"-",r=a_.nice();return function(e){return"filler"===e.type}(e)?{xStart:e.start,xEnd:e.end,strand:e.strand,fields:[],type:"filler",uid:r}:{xStart:e.start,xEnd:e.end,strand:n,chrOffset:0,importance:e.end-e.start,uid:r,type:e.type,fields:["chrom",e.start,e.end,e.name,t,n,"","",e.type,e.name,e.start.toString(),e.end.toString(),e.start.toString(),e.end.toString()]}}function Jte(e){const t=qte(e),n=function(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}(t[0].features.filter(e=>"source"!==e.type).sort((e,t)=>e.start-t.start));return{json:t,features:n}}let ene=function(){return $te(function e(t){let n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataConfig=t,this.trackUid=a_.nice(),this.errorTxt="",t.url){const e=t.url.slice(t.url.length-3);n=fetch(t.url,{mode:"cors",redirect:"follow",method:"GET"}).then(t=>(".gz"===e?function(e,t){const{format:n,signal:r}=t,i=e instanceof Response?e:new Response(e);return Hte(i.body,"Response does not include a body."),new Response(i.body.pipeThrough(new DecompressionStream(n),{signal:r}))}(t,{format:"gzip"}):t).text())}else{if(!t.text)throw new Error("No data or URL specified");n=Promise.resolve(t.text)}this.gbDataPromise=n.then(e=>Jte(e))},[{key:"tilesetInfo",value:function(e){return this.tilesetInfoLoading=!0,this.gbDataPromise.then(t=>{this.tilesetInfoLoading=!1;const n={name:`genbank-${this.trackUid}`,tile_size:1024,max_zoom:Math.ceil(Math.log(t.json[0].size/1024)/Math.log(2)),max_width:t.json[0].size,min_pos:[0],max_pos:[t.json[0].size]};return e&&e(n),n}).catch(t=>{this.tilesetInfoLoading=!1,e&&e({error:`Error parsing genbank: ${t}`})})}},{key:"fetchTilesDebounced",value:async function(e,t){const n={},r=[],i=[];for(const a of t){const e=a.split("."),t=Number.parseInt(e[0],10),n=Number.parseInt(e[1],10);Number.isNaN(n)||Number.isNaN(t)?console.warn("Invalid tile zoom or position:",t,n):(r.push(a),i.push(this.tile(t,n)))}const o=await Promise.all(i);for(let a=0;a<o.length;a++){const e=r[a];n[e]=o[a],n[e].tilePositionId=e}return e(n),n}},{key:"tile",value:async function(e,t){const[n,r]=await Promise.all([this.tilesetInfo(),this.gbDataPromise]);if(!n)throw new Error("No tileset info");const i=+n.max_width/2**+e,o=n.min_pos[0]+t*i,a=n.min_pos[0]+(t+1)*i,s=r.features.filter(e=>e.end>o&&e.start<a),l=1024/2**(n.max_zoom-e),c=Zte(s.filter(e=>1===e.strand),l,"+"),u=Zte(s.filter(e=>1!==e.strand),l,"-"),h=[];for(let p=0;p<r.features.length&&!(h.length>=20);p++)r.features[p].end>=o&&r.features[p].start<=a&&h.push(r.features[p]);return[h,c,u].flatMap(e=>e.map(Qte))}}])}();function tne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nne(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let rne=function(){return tne(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.dataConfig=t,this.tilesetInfoData=Object.values(this.dataConfig.tilesetInfo)[0],this.tilesData={},this.tilesetInfoLoading=!0},[{key:"tilesetInfo",value:async function(e){return this.tilesetInfoLoading=!1,await new Promise(t=>setTimeout(()=>{e(this.tilesetInfoData),t(!0)},0)),this.tilesetInfoData}},{key:"fetchTilesDebounced",value:async function(e,t){this.tilesData={};for(const i of Object.keys(this.dataConfig.tiles)){const e=`localtile.${i.split(".").slice(1).join(".")}`;this.tilesData[e]=this.dataConfig.tiles[i]}const n={},r=t.map(e=>`localtile.${e}`);xW(this.tilesData,"",r);for(const i of t)n[i]=this.tilesData[`localtile.${i}`],n[i].tilePositionId=i;return e(n),n}},{key:"tile",value:function(e,t){}}])}();function ine(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,one(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function one(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function ane(e){return null===e.data}let sne=function(){return ine(function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.taskList=[],this.taskHandle=null,this.requestIdleCallbackTimeout=300},[{key:"enqueueTask",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n?this.taskList.push({handler:e,data:t}):(this.taskList=this.taskList.filter(e=>e.trackId!==n),this.taskList.push({handler:e,data:t,trackId:n})),this.taskHandle||(this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}))}},{key:"runTaskQueue",value:function(e){for(;(e.timeRemaining()>0||e.didTimeout)&&this.taskList.length;){const e=this.taskList.shift();e&&ane(e)?e.handler():e&&e.handler(e.data)}this.taskList.length?this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}):this.taskHandle=0}}])}();const lne=new sne;function cne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,une(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function une(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function hne(e,t,n){return t=mne(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pne()?Reflect.construct(t,n||[],mne(e).constructor):t.apply(e,n))}function pne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pne=function(){return!!e})()}function fne(e,t,n,r){var i=dne(mne(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function dne(){return dne=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=mne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},dne.apply(null,arguments)}function mne(e){return(mne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gne(e,t){return(gne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let yne=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=hne(this,t,[e,n]);const{pubSub:i,dataConfig:o,handleTilesetInfoReceived:a,animate:s,onValueScaleChanged:l}=e;return r.renderVersion=1,r.visibleTiles=[],r.visibleTileIds=new Set,r.renderingTiles=new Set,r.fetching=new Set,r.scale={},r.fetchedTiles={},r.tileGraphics={},r.maxZoom=0,r.medianVisibleValue=null,r.backgroundTaskScheduler=lne,r.continuousScaling="requestIdleCallback"in window,r.valueScaleMin=null,r.fixedValueScaleMin=null,r.valueScaleMax=null,r.fixedValueScaleMax=null,r.listeners={},r.pubSub=i,r.animate=s,r.onValueScaleChanged=l,r.prevValueScale=null,e.dataFetcher?r.dataFetcher=e.dataFetcher:r.dataFetcher=new Gte(o,r.pubSub),r.tilesetInfo=null,r.tilesetInfoError=null,r.uuid=a_.nice(),r.trackNotFoundText=new ow.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),r.pLabel.addChild(r.trackNotFoundText),r.refreshTilesDebounced=ox(r.refreshTiles.bind(r),10,10),r.dataFetcher.tilesetInfo((e,t)=>{var n,i;if(e){if(!function(e){return fT(e)&&!("error"in e)}(e))return console.warn("Error retrieving tilesetInfo:",o,e.error),e.error&&r.setError(e.error,"dataFetcher.tilesetInfo"),void(r.tilesetInfo=void 0);r.tilesetInfo=e,r.tilesetInfo.chromsizes&&(r.chromInfo=H_(r.tilesetInfo.chromsizes)),r.dataFetcher.dataConfig.tilesetUid||(r.dataFetcher.dataConfig.tilesetUid=t),r.tilesetUid=r.dataFetcher.dataConfig.tilesetUid,r.server=r.dataFetcher.dataConfig.server||"unknown",null!=(n=r.tilesetInfo)&&n.chromsizes&&(r.chromInfo=H_(r.tilesetInfo.chromsizes)),mT(r.tilesetInfo)?r.maxZoom=r.tilesetInfo.resolutions.length:r.maxZoom=+r.tilesetInfo.max_zoom,null!=(i=r.options)&&i.maxZoom&&(r.options.maxZoom>=0?r.maxZoom=Math.min(r.options.maxZoom,r.maxZoom):console.error("Invalid maxZoom on track:",r)),r.refreshTiles(),r.tilesetInfoReceived(),a?.(r.tilesetInfo),r.options??(r.options={}),r.options.name=r.options.name||r.tilesetInfo.name,r.checkValueScaleLimits(),r.draw(),r.drawLabel(),r.animate()}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gne(e,t)}(t,e),cne(t,[{key:"setError",value:function(e,t){this.errorTexts[t]=e,this.drawError()}},{key:"setFixedValueScaleMin",value:function(e){Number.isNaN(+e)?this.fixedValueScaleMin=null:this.fixedValueScaleMin=+e}},{key:"setFixedValueScaleMax",value:function(e){Number.isNaN(+e)?this.fixedValueScaleMax=null:this.fixedValueScaleMax=+e}},{key:"checkValueScaleLimits",value:function(){this.valueScaleMin=typeof this.options.valueScaleMin<"u"?+this.options.valueScaleMin:null,null!==this.fixedValueScaleMin&&(this.valueScaleMin=this.fixedValueScaleMin),this.valueScaleMax=typeof this.options.valueScaleMax<"u"?+this.options.valueScaleMax:null,null!==this.fixedValueScaleMax&&(this.valueScaleMax=this.fixedValueScaleMax)}},{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){const n=this.listeners[e].indexOf(t);-1===n||n>=this.listeners[e].length||this.listeners[e].splice(n,1)}},{key:"rerender",value:function(e){var n;fne(t,"rerender",this)([e]),this.renderVersion+=1,this.tilesetInfo&&(this.checkValueScaleLimits(),mT(this.tilesetInfo)?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,null!=(n=this.options)&&n.maxZoom&&(this.options.maxZoom>=0?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"tilesetInfoReceived",value:function(){}},{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(e=>this.visibleTileIds.has(e))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(e=>this.fetchedTiles[e])}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e),mirrored:e.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"removeOldTiles",value:function(){this.calculateVisibleTiles();const e=[...new Set(Object.keys(this.fetchedTiles))].filter(e=>!this.visibleTileIds.has(e));this.removeTiles(e)}},{key:"refreshTiles",value:function(){if(!this.tilesetInfo)return;this.calculateVisibleTiles();const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTiles].filter(t=>!this.fetching.has(t.remoteId)&&!e.has(t.tileId));for(let n=0;n<t.length;n++)this.fetching.add(t[n].remoteId);this.removeOldTiles(),this.fetchNewTiles(t)}},{key:"parentInFetched",value:function(e){const t=e.tileData.tilesetUid;let n=e.tileData.zoomLevel,r=e.tileData.tilePos;for(;n>0;)if(n-=1,r=r.map(e=>Math.floor(e/2)),`${t}.${n}.${r.join(".")}`in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(e){const t=e.tileData.zoomLevel-1,n=e.tileData.tilePos.map(e=>Math.floor(e/2));return`${e.tileData.tilesetUid}.${t}.${n.join(".")}`}},{key:"removeTiles",value:function(e){!e.length||!this.areAllVisibleTilesLoaded()||this.renderingTiles.size||(e.forEach(e=>{const t=e;this.destroyTile(this.fetchedTiles[t]),t in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[t]),delete this.tileGraphics[t]),delete this.fetchedTiles[t]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.xScale(e),this.yScale(t),this.refreshTilesDebounced(),this.pMobile.position.x=r,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=n,this.pMobile.scale.y=1}},{key:"setPosition",value:function(e){fne(t,"setPosition",this)([e])}},{key:"setDimensions",value:function(e){fne(t,"setDimensions",this)([e])}},{key:"areAllVisibleTilesLoaded",value:function(){const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTileIds];for(let n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){return e?(this.scale.minValue=e,this):null!==this.valueScaleMin?this.valueScaleMin:this.scale.minValue}},{key:"maxValue",value:function(e){return e?(this.scale.maxValue=e,this):null!==this.valueScaleMax?this.valueScaleMax:this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(e){var t;null!=(t=e.tileData)&&t.dense&&(this.scale.minRawValue=this.continuousScaling?this.minVisibleValue():this.minVisibleValueInTiles(),this.scale.maxRawValue=this.continuousScaling?this.maxVisibleValue():this.maxVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue)}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"addMissingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);this.renderVersion+=1;for(let t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){const n=new ow.PIXI.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++){const n=this.fetchedTiles[e[t]];this.updateTile(n)}}},{key:"synchronizeTilesAndGraphics",value:function(){if(this.addMissingGraphics(),this.removeOldTiles(),this.updateExistingGraphics(),this.listeners.dataChanged)for(const e of this.listeners.dataChanged)e(this.visibleAndFetchedTiles().map(e=>e.tileData))}},{key:"loadTileData",value:function(e,t){let n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"fetchNewTiles",value:function(e){if(this._checkForErrors(),this.draw(),e.length>0){const t=[...new Set(e.map(e=>e.remoteId))];this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),t)}}},{key:"receivedTiles",value:function(e){var t;for(let n=0;n<this.visibleTiles.length;n++){const{tileId:t}=this.visibleTiles[n];if(e[this.visibleTiles[n].remoteId]&&this.visibleTiles[n].remoteId in e){if(t in this.fetchedTiles||(this.fetchedTiles[t]=this.visibleTiles[n]),Array.isArray(e[this.visibleTiles[n].remoteId])){const r=e[this.visibleTiles[n].remoteId];this.fetchedTiles[t].tileData=[...r],Object.keys(r).filter(e=>Number.isNaN(+e)).forEach(e=>{this.fetchedTiles[t].tileData[e]=r[e]})}else this.fetchedTiles[t].tileData={...e[this.visibleTiles[n].remoteId]};this.fetchedTiles[t].tileData.error&&console.warn("Error in loaded tile",t,this.fetchedTiles[t].tileData)}}for(const n in e)if(e[n]){const t=e[n].tilePositionId;this.fetching.has(t)&&this.fetching.delete(t)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(!this.prevValueScale||JSON.stringify(this.valueScale.domain())!==JSON.stringify(this.prevValueScale.domain()))&&(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged()),this.animate(),this.areAllVisibleTilesLoaded()&&(null==(t=this.pubSub)||t.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid}))}},{key:"_checkForErrors",value:function(){const e=Object.values(this.fetchedTiles).map(e=>{var t;return(null==(t=e.tileData)?void 0:t.error)&&`${e.tileId}: ${e.tileData.error}`}).filter(e=>e);return e.length?this.errorTexts.TiledPixiTrack=e.join("\n"):this.errorTexts.TiledPixiTrack="",this.tilesetInfoError&&(this.errorTexts.TiledPixiTrack=this.tilesetInfoError,e.push(this.tilesetInfoError)),e}},{key:"draw",value:function(){var e,n;if(!this.delayDrawing){if(this.tilesetInfo)this.trackNotFoundText.visible=!1;else{if(this.dataFetcher.tilesetInfoLoading)this.trackNotFoundText.text="Loading...";else{const e=this.dataFetcher.dataConfig.server||"unknown",t=this.dataFetcher.dataConfig.tilesetUid;this.trackNotFoundText.text=`Tileset info not found. Server: [${e}] tilesetUid: [${t}]`}[this.trackNotFoundText.x,this.trackNotFoundText.y]=this.position,this.trackNotFoundText.visible=!0}null==(e=this.pubSub)||e.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid}),this._checkForErrors(),fne(t,"draw",this)([]),Object.keys(this.fetchedTiles).forEach(e=>{this.drawTile(this.fetchedTiles[e])}),null==(n=this.pubSub)||n.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid})}}},{key:"drawTile",value:function(e){}},{key:"calculateMedianVisibleValue",value:function(){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let e=this.visibleAndFetchedIds();0===e.length&&(e=Object.keys(this.fetchedTiles));const t=[].concat(...e.filter(e=>this.fetchedTiles[e].tileData.dense).map(e=>Array.from(this.fetchedTiles[e].tileData.dense))).filter(e=>e>0);return this.medianVisibleValue=Bl(t),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){return[].concat(...this.visibleAndFetchedIds().map(e=>Array.from(this.fetchedTiles[e].tileData.dense)))}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.minVisibleValueInTiles(e)}},{key:"minVisibleValueInTiles",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.min(...t.map(e=>this.fetchedTiles[e].tileData.minNonZero));return n===Number.MAX_SAFE_INTEGER&&(n=null),e?n:null!==this.valueScaleMin?this.valueScaleMin:n}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.maxVisibleValueInTiles(e)}},{key:"maxVisibleValueInTiles",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.max(...t.map(e=>this.fetchedTiles[e].tileData.maxNonZero));return n===Number.MIN_SAFE_INTEGER&&(n=null),e?n:null!==this.valueScaleMax?this.valueScaleMax:n}},{key:"makeValueScale",value:function(e,t,n,r){let i=null,o=0,a=r;(null===a||typeof a>"u")&&(a=6);let s=Math.min(this.dimensions[1]-a,a),l=Math.max(this.dimensions[1]-a,a);if(this.dimensions[1]-a<a&&(s=this.dimensions[1]/2,l=this.dimensions[1]/2),"log"===this.options.valueScaling)o=t,o||(o=e),i=wh().domain([o,n+o]).range([l,s]);else{if("quantile"===this.options.valueScaling){const e=this.dimensions[1]-a,t=a,n=Mh().domain(this.allVisibleValues()).range(Ul(e,t,(t-e)/256));return n.ticks=n=>El(e,t,n),[n,0]}if("setquantile"===this.options.valueScaling){const e=this.dimensions[1]-a,t=a,n=new Set(this.allVisibleValues()),r=Mh().domain([...n]).range(Ul(e,t,(t-e)/256));return r.ticks=n=>El(e,t,n),[r,0]}i=ph().domain([e,n]).range([l,s])}return[i,o]}}])}(zte);function vne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bne(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _ne(e,t,n){return t=Ene(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wne()?Reflect.construct(t,n||[],Ene(e).constructor):t.apply(e,n))}function wne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wne=function(){return!!e})()}function Tne(e,t,n,r){var i=xne(Ene(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function xne(){return xne=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ene(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},xne.apply(null,arguments)}function Ene(e){return(Ene=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sne(e,t){return(Sne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let kne=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=_ne(this,t,[e,n]);const{onMouseMoveZoom:i,isValueScaleLocked:o,getLockGroupExtrema:a}=e;return r.onMouseMoveZoom=i,r.isValueScaleLocked=o,r.getLockGroupExtrema=a,r.onMouseMoveZoom&&r.pubSubs.push(r.pubSub.subscribe("app.mouseMove",r.mouseMoveHandler.bind(r))),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sne(e,t)}(t,e),vne(t,[{key:"initTile",value:function(e){Tne(t,"initTile",this)([e])}},{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e),t=VW.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map(e=>[this.zoomLevel,e]);return void this.setVisibleTiles(t)}const e=VW.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map(e=>[this.zoomLevel,e]);this.setVisibleTiles(e)}},{key:"getTilePosAndDimensions",value:function(e,t,n){const r=t[0],i=t[0];if(this.tilesetInfo.resolutions){const r=n||1024,i=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e)[e],o=i*r,a=o;return{tileX:i*r*t[0],tileY:i*r*t[1],tileWidth:o,tileHeight:a}}const o=this.tilesetInfo.max_width/2**e,a=this.tilesetInfo.max_width/2**e;return{tileX:this.tilesetInfo.min_pos[0]+r*o,tileY:this.tilesetInfo.min_pos[1]+i*a,tileWidth:o,tileHeight:a}}},{key:"updateTile",value:function(e){}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!1)}},{key:"getIndicesOfVisibleDataInTile",value:function(e){const t=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),i=ph().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]);return[Math.max(0,Math.round(i.invert(this._xScale.invert(t[0])))),Math.min(e.tileData.dense.length,Math.round(i.invert(this._xScale.invert(t[1]))))]}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=t.map(e=>this.fetchedTiles[e]).map(e=>{const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMinNonZeroInSubset(t)}),r=Math.min(...n);return e?r:null!==this.valueScaleMin?this.valueScaleMin:r}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=t.map(e=>this.fetchedTiles[e]).map(e=>{const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMaxNonZeroInSubset(t)}),r=Math.max(...n);return e?r:null!==this.valueScaleMax?this.valueScaleMax:r}},{key:"getAggregatedVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"max";const t="min"===e?Math.min:Math.max,n="min"===e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;let r=this.visibleAndFetchedIds();0===r.length&&(r=Object.keys(this.fetchedTiles));const i=this._xScale.range();return r.map(e=>this.fetchedTiles[e]).map(t=>{if(!t.tileData.tilePos)return"min"===e?this.minVisibleValue():this.maxVisibleValue();const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(t.tileData.zoomLevel,t.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),o=ph().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]),a=Math.max(0,Math.round(o.invert(this._xScale.invert(i[0])))),s=Math.min(t.tileData.dense.length,Math.round(o.invert(this._xScale.invert(i[1]))));return t.tileData.dense.slice(a,s)}).reduce((e,n)=>t(e,...n),n)}},{key:"getDataAtPos",value:function(e){let t;if(!this.tilesetInfo)return t;const n=this.calculateZoomLevel(),r=VW.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r,o=this.tileToLocalId([n,Math.floor(i)]),a=this.fetchedTiles[o];if(!a)return t;const s=this.tilesetInfo.tile_size*(i-Math.floor(i));return a.tileData.dense?a.tileData.dense[Math.floor(s)]:null}},{key:"mouseMoveHandler",value:function(){let{x:e,y:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWithin(e,t)&&(this.mouseX=e,this.mouseY=t,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){}},{key:"zoomed",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Tne(t,"zoomed",this)(n),this.mouseMoveZoomHandler()}}])}(yne);function One(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pne(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Cne(e,t,n){return t=Rne(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ane()?Reflect.construct(t,n||[],Rne(e).constructor):t.apply(e,n))}function Ane(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ane=function(){return!!e})()}function Mne(e,t,n,r){var i=Ine(Rne(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Ine(){return Ine=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Rne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ine.apply(null,arguments)}function Rne(e){return(Rne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dne(e,t){return(Dne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Nne=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Cne(this,t,[e,n]);const{animate:i,isShowGlobalMousePosition:o}=e;return r.constIndicator=new ow.PIXI.Graphics,r.pMain.addChild(r.constIndicator),r.axis=new pW(r),r.pBase.addChild(r.axis.pAxis),r.animate=i,r.options=n,r.isShowGlobalMousePosition=o,r.pubSubs=[],r.options.showMousePosition&&!r.hideMousePosition&&(r.hideMousePosition=nx(r,r.is2d,r.isShowGlobalMousePosition())),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dne(e,t)}(t,e),One(t,[{key:"rerender",value:function(e,n){const r=JSON.stringify(e);!n&&r===this.prevOptions||(Mne(t,"rerender",this,3)([e,n]),this.prevOptions=r,this.options=e,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=nx(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return VW.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"relevantScale",value:function(){return this._xScale}},{key:"draw",value:function(){Mne(t,"draw",this,3)([]),this.drawConstIndicator()}},{key:"drawAxis",value:function(e){if(!this.options.axisPositionVertical&&!this.options.axisPositionHorizontal)return void this.axis.clearAxis();if(this.options.axisPositionVertical&&"hidden"===this.options.axisPositionVertical)return void this.axis.clearAxis();if(this.options.axisPositionHorizontal&&"hidden"===this.options.axisPositionHorizontal)return void this.axis.clearAxis();const t=this.options.axisMargin||0;"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1])):"outsideLeft"===this.options.axisPositionHorizontal||"outsideTop"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):"right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(e,this.dimensions[1])):("outsideRight"===this.options.axisPositionHorizontal||"outsideBottom"===this.options.axisPositionVertical)&&(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-t,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(e,this.dimensions[1]))}},{key:"mouseMoveZoomHandler",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mouseX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mouseY;if(typeof e>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;let n=0,r=0,i="1d-horizontal";this.isLeftModified?(n=t-this.position[1],r=e-this.position[0],i="1d-vertical"):(n=e-this.position[0],r=t-this.position[1]);const o=e-this.position[0],a=t-this.position[1],s=this._xScale.invert(n),l=this._yScale.invert(r),c=this.getDataAtPos(n);c&&this.onMouseMoveZoom({trackId:this.id,data:c,absX:e,absY:t,relX:o,relY:a,dataX:s,dataY:l,orientation:i})}},{key:"drawConstIndicator",value:function(){var e=this;if(this.constIndicator){for(this.constIndicator.clear();this.constIndicator.children[0];)this.constIndicator.removeChild(this.constIndicator.children[0]);!this.options.constIndicators||!this.valueScale||this.options.constIndicators.forEach(function(){let{color:t="black",opacity:n=1,label:r=null,labelColor:i="black",labelOpacity:o=1,labelPosition:a="leftTop",labelSize:s=12,value:l=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=aw(t),u=aw(i);e.constIndicator.beginFill(c,n);const h=e.valueScale(l);let p=0,f=0;if(r){const t=new ow.PIXI.Text(r,{fontFamily:"Arial",fontSize:s,fill:u});switch(t.alpha=o,a){case"right":t.anchor.x=1,t.anchor.y=.5,t.x=e.position[0]+e.dimensions[0]-6,t.y=h,f=t.width+8;break;case"rightBottom":t.anchor.x=1,t.anchor.y=0,t.x=e.position[0]+e.dimensions[0]-6,t.y=h;break;case"rightTop":t.anchor.x=1,t.anchor.y=1,t.x=e.position[0]+e.dimensions[0]-6,t.y=h;break;case"left":t.anchor.x=0,t.anchor.y=.5,t.x=e.position[0]+2,t.y=h,p=t.width+4;break;case"leftBottom":t.anchor.x=0,t.anchor.y=0,t.x=e.position[0]+2,t.y=h;break;default:t.anchor.x=0,t.anchor.y=1,t.x=e.position[0]+2,t.y=h}e.constIndicator.addChild(t)}e.constIndicator.drawRect(e.position[0]+p,h,e.dimensions[0]-f,1)})}}},{key:"exportSVG",value:function(){var e=this;let n=null,r=null;Mne(t,"exportSVG",this,1)?[r,n]=Mne(t,"exportSVG",this,3)([]):(r=document.createElement("g"),n=r),r.setAttribute("class","horizontal-tiled-1d-track");const i=document.createElement("g");return n.appendChild(i),this.options.constIndicators&&this.options.constIndicators.forEach(function(){let{color:t="black",opacity:n=1,label:r=null,labelColor:o="black",labelOpacity:a=1,labelPosition:s="leftTop",labelSize:l=12,value:c=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=e.valueScale(c);if(r){const t=document.createElement("text");switch(t.textContent=r,t.setAttribute("x",e.position[0]),t.setAttribute("y",u),t.setAttribute("style",`font-family: 'Arial'; font-size: ${l}px; fill: ${o}; fill-opacity: ${a};`),s){case"rightBottom":t.setAttribute("x",e.position[0]+e.dimensions[0]-6),t.setAttribute("y",u+l+2),t.setAttribute("text-anchor","end");break;case"right":case"rightTop":t.setAttribute("x",e.position[0]+e.dimensions[0]-6),t.setAttribute("y",u-2),t.setAttribute("text-anchor","end");break;case"leftBottom":t.setAttribute("x",e.position[0]+2),t.setAttribute("y",u+l+2);break;default:t.setAttribute("x",e.position[0]+2),t.setAttribute("y",u-2)}i.appendChild(t)}const h=document.createElement("line");h.setAttribute("x1",e.position[0]),h.setAttribute("y1",u),h.setAttribute("x2",e.dimensions[0]),h.setAttribute("y2",u),h.setAttribute("stroke",t),h.setAttribute("stroke-opacity",n),i.appendChild(h)}),[r,n]}}])}(kne);function jne(e,t,n){return t=zne(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lne()?Reflect.construct(t,n||[],zne(e).constructor):t.apply(e,n))}function Lne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lne=function(){return!!e})()}function Bne(e,t,n,r){var i=Fne(zne(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Fne(){return Fne=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zne(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fne.apply(null,arguments)}function zne(e){return(zne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hne(e,t){return(Hne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Une(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gne(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}const Xne=5e3,Wne={align:"center",fontSize:"14px",fontFamily:"Arial",stroke:"white",strokeThickness:2,fontWeight:400,dropShadow:!0,dropShadowColor:"white",dropShadowDistance:0,dropShadowBlur:2},Yne=(e,t,n,r,i)=>{const o=[];for(;e.length;){const[a,s]=e.splice(0,2);o.push([a*t+n,s*r+i])}return o},qne=(e,t,n)=>{const r=(n.domain()[1]-n.domain()[0])/(t.domain()[1]-t.domain()[0]),i=t.domain().map(n)[0];e.scale.x=r,e.position.x=-i*r};let $ne=function(){return Vne(function e(t){Une(this,e),this.track=t,this.texts={},this.textsList=[],this.textWidths={},this.textHeights={},this.textGraphics=new ow.PIXI.Graphics,this.track.pMain.addChild(this.textGraphics),this.fontSize=9},[{key:"hideOverlaps",value:function(){const[e,t]=[this.allBoxes,this.allTexts];gte(e,(e,n)=>{t[e].importance>t[n].importance?t[e].text.visible&&(t[n].text.visible=!1):t[n].text.visible&&(t[e].text.visible=!1)})}},{key:"startDraw",value:function(){this.allBoxes=[],this.allTexts=[]}},{key:"lightUpdateSingleText",value:function(e,t,n,r){if(!this.texts[e.uid]||!this.track.options.showTexts)return;const i=this.texts[e.uid];i.position.x=t,i.position.y=n,i.visible=!0,this.allBoxes.push([i.position.x-3,i.position.y-this.textHeights[e.uid]/2,i.position.x+this.textWidths[e.uid]+3,i.position.y+this.textHeights[e.uid]/2]),this.allTexts.push({text:i,...r})}},{key:"updateSingleText",value:function(e,t,n,r){if(!this.texts[e.uid])return;const i=this.texts[e.uid];i.position.x=t,i.position.y=n,i.nominalY=n;const o=void 0!==this.track.options.fontColor?aw(this.track.options.fontColor):"black",a=+this.track.options.fontSize||Wne.fontSize;if(a!==this.fontSize&&(this.fontSize=a,this.textWidths={},this.textHeights={}),i.style={...Wne,fill:o,fontSize:this.fontSize},i.text=r,!(e.uid in this.textWidths)){i.updateTransform();const t=i.getBounds().width,n=i.getBounds().height,r=5;this.textWidths[e.uid]=t,this.textHeights[e.uid]=n-r}}},{key:"updateTexts",value:function(){if(this.track.options.showTexts){this.texts={};let e=[(0-this.track.vertY)/(this.track.vertK*this.track.prevK),(this.track.dimensions[1]-this.track.vertY)/(this.track.vertK*this.track.prevK)];const t=e[1]-e[0];e=[e[0]-.8*t,e[1]+.8*t];const n=this.track.uniqueSegments.filter(t=>!t.yMiddle||t.yMiddle>e[0]&&t.yMiddle<e[1]);for(n.forEach((e,t)=>{if(t>=(+this.track.options.maxTexts||50))return;let n=this.textsList[t];n||(n=new ow.PIXI.Text,this.textsList.push(n),this.textGraphics.addChild(n)),n.style={...Wne,fontSize:+this.track.options.fontSize||Wne.fontSize},this.track.isLeftModified&&(n.scale.x=-1),n.anchor.x=.5,n.anchor.y=.5,this.texts[e.uid]=n});this.textsList.length>Math.min(n.length,+this.track.options.maxTexts||50);){const e=this.textsList.pop();this.textGraphics.removeChild(e)}}}}])}(),Kne=function(e){function t(e,n){var r;return Une(this,t),(r=jne(this,t,[e,n])).valueScaleTransform=QX,r.textManager=new $ne(r),r.vertY=1,r.vertK=0,r.prevY=0,r.prevK=1,r.minRawValue=null,r.maxRawValue=null,r.rectGraphics=new ow.PIXI.Graphics,r.pMain.addChild(r.rectGraphics),r.selectedRect=null,r.uniqueSegments=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hne(e,t)}(t,e),Vne(t,[{key:"initialize",value:function(){this.initialized||([this.prevK,this.vertK,this.vertY]=[1,1,0],this.drawnRects||(this.drawnRects={}),this.colorScale||(this.options.colorRange?this.colorScale=iw(this.options.colorRange):this.colorScale=Yw),this.initialized=!0)}},{key:"updateExistingGraphics",value:function(){let e=[],t=[];if(this._checkForErrors().length>0)this.draw();else{if(this.uniqueSegments=(e=>{const t={};for(let n=0;n<e.length;n++)t[e[n].uid]=e[n];return Object.values(t)})(Object.values(this.fetchedTiles).filter(e=>e.tileData.length).flatMap(e=>e.tileData)),this.uniqueSegments.forEach(e=>{e.importance||(e.importance=(e=>{let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t})(e.uid.toString()))}),this.uniqueSegments.sort((e,t)=>t.importance-e.importance),this.options&&this.options.valueColumn)e=[this.uniqueSegments.map(e=>({value:e}))];else{const n=this.uniqueSegments.map(e=>{const t=+e.chrOffset;return{from:+e.fields[1]+t,to:+e.fields[2]+t,value:e,text:e.fields[3],strand:e.fields.length>=6&&"-"===e.fields[5]?"-":"+"}});e=wx(n.filter(e=>"+"===e.strand)),t=wx(n.filter(e=>"-"===e.strand))}this.plusStrandRows=e,this.minusStrandRows=t,this.textManager.updateTexts(),this.render()}}},{key:"selectRect",value:function(e){this.selectedRect=e,this.render(),this.animate()}},{key:"clickOutside",value:function(){this.selectRect(null)}},{key:"initTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"removeTiles",value:function(e){Bne(t,"removeTiles",this,3)([e])}},{key:"drawTile",value:function(e){var t;null!=(t=this.options)&&t.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"rerender",value:function(e,n){Bne(t,"rerender",this,3)([e,n]),this.valueScale=null,this.drawnRects={},this.options.colorRange?this.colorScale=iw(this.options.colorRange):this.colorScale=Yw,this.updateExistingGraphics()}},{key:"updateTile",value:function(e){}},{key:"allVisibleRects",value:function(){const e={};Object.values(this.fetchedTiles).forEach(t=>{if(t.plusStrandRows)for(const n of t.plusStrandRows[0])e[n.value.uid]||(e[n.value.uid]=n)});const t=Object.values(e).sort((e,t)=>e.from-t.from);let n=0,r=0;for(let i=0;i<t.length;i++)if(void 0!==t[i].staggeredStartPosition){n=i,r=t[i].staggeredStartPosition;break}for(let i=n;i<t.length;i++)t[i].staggeredStartPosition=(r+i-n)%2;for(let i=n;i>=0&&t.length;i--)t[i].staggeredStartPosition=(r+n-i)%2;return e}},{key:"drawSegmentStyle",value:function(e,t,n,r,i){const o=n+r/2,a=[e,n,e+.2,n,e+.2,o-.1,t-.2,o-.1,t-.2,n,t,n,t,n+r,t-.2,n+r,t-.2,o+.1,e+.2,o+.1,e+.2,n+r,e,n+r];return this.rectGraphics.drawPolygon(a),a}},{key:"drawPoly",value:function(e,t,n,r,i){let o=null;return"segment"===this.options.annotationStyle?this.drawSegmentStyle(e,t,n,r,i):(("+"===i||"-"===i)&&t-e<8?(o=[e,n,e+r/2,n+r/2,e,n+r],"+"===i||(o=[t,n,t-r/2,n+r/2,t,n+r]),this.rectGraphics.drawPolygon(o)):(o="+"===i?[e,n,t-r/2,n,t,n+r/2,t-r/2,n+r,e,n+r]:"-"===i?[e+r/2,n,t,n,t,n+r,e+r/2,n+r,e,n+r/2]:[e,n,t,n,t,n+r,e,n+r],this.rectGraphics.drawPolygon(o)),o)}},{key:"setValueScale",value:function(){var e;if(this.valueScale=null,null!=(e=this.options)&&e.valueColumn){const e=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),t=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);this.options.valueColumn&&([this.valueScale]=this.makeValueScale(e,this.calculateMedianVisibleValue(+this.options.valueColumn),t))}}},{key:"setColorValueScale",value:function(){var e;if(this.colorValueScale=null,null!=(e=this.options)&&e.colorEncoding&&"itemRgb"!==this.options.colorEncoding){const e=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.colorEncoding),t=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.colorEncoding);this.colorValueScale=ph().domain([e,t]).range([0,255])}}},{key:"renderRows",value:function(e,t,n,r,i){this.initialize();const o=nc().domain(Ul(t)).range([n,r]);this.allVisibleRects();let a=null;this.options.staggered&&(a=this.allVisibleRects());for(let s=0;s<e.length;s++)for(let t=0;t<e[s].length;t++){const n=e[s][t].value,r=n.fields,l=+n.xStart,c=+n.xEnd,u=(l+c)/2;let h=o(s)+o.bandwidth()/2,p=this.options.annotationHeight||"scaled";if("scaled"===p&&(p=o.bandwidth(),this.options.maxAnnotationHeight&&(p=Math.min(p,+this.options.maxAnnotationHeight))),this.options&&"itemRgb"===this.options.colorEncoding&&n.fields[8]){let e=[];try{e=n.fields[8].split(",")}catch{}3===e.length&&(i=`rgb(${n.fields[8]})`)}else this.colorValueScale?i=`rgba(${cx(this.colorValueScale,this.colorScale,0,-Number.MIN_VALUE)(+r[+this.options.colorEncoding-1]).join(",")})`:this.options&&"itemRgb"===this.options.colorEncoding&&n.fields[8]&&3===n.fields[8].split(",").length&&(i=`rgb(${n.fields[8]})`);if(this.valueScale){const e=+r[+this.options.valueColumn-1];h=this.valueScale(e)}const f=this.options.fillOpacity||.3;this.selectedRect===n.uid?this.rectGraphics.lineStyle(3,0,.75):this.rectGraphics.lineStyle(1,aw(i),f),this.rectGraphics.beginFill(aw(i),f);let d=h-p/2;const m=this._xScale(l),g=this._xScale(c);this.options.staggered&&(a[n.uid].staggeredStartPosition?d-=2.5:d+=2.5);const y=this.drawPoly(m,g,d*this.prevK,p*this.prevK,r[5]);this.drawnRects[n.uid]=[y,{start:l,end:c,value:n,fill:i}],n.yMiddle=h,this.options.showTexts&&(t>=(+this.options.maxTexts||50)||this.textManager.updateSingleText(n,this._xScale(u),d+p/2,n.fields[3]))}this.textManager.updateTexts()}},{key:"render",value:function(){const e=this.plusStrandRows?this.plusStrandRows.length:1,t=this.minusStrandRows?this.minusStrandRows.length:1;this.prevVertY=this.vertY;const n=this.rectGraphics;this.rectGraphics=new ow.PIXI.Graphics,this.drawnAtScale=this._xScale.copy(),this.setValueScale(),this.setColorValueScale();const r=this.options.plusStrandColor||this.options.fillColor||"blue",i=this.options.minusStrandColor||this.options.fillColor||"purple";let o=0;o=this.options.separatePlusMinusStrands?e*this.dimensions[1]/(e+t)-0:this.dimensions[1],this.renderRows(this.plusStrandRows,e,0,o,r),this.renderRows(this.minusStrandRows,t,this.options.separatePlusMinusStrands?o+0:0,this.dimensions[1],i),this.pMain.removeChild(n),this.pMain.addChild(this.rectGraphics),qne(this.rectGraphics,this._xScale,this.drawnAtScale)}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"minVisibleValueInTiles",value:function(e){let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.min.apply(null,t.map(e=>this.fetchedTiles[e]).filter(e=>{var t;return null==(t=e.tileData)?void 0:t.length}).map(t=>Math.min.apply(null,t.tileData.sort((e,t)=>t.importance-e.importance).slice(0,Xne).map(t=>+t.fields[e-1]).filter(e=>!Number.isNaN(e)))));return n===Number.MAX_SAFE_INTEGER&&(n=null),n}},{key:"maxVisibleValueInTiles",value:function(e){let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));let n=Math.max.apply(null,t.map(e=>this.fetchedTiles[e]).filter(e=>{var t;return null==(t=e.tileData)?void 0:t.length}).map(t=>Math.max.apply(null,t.tileData.sort((e,t)=>t.importance-e.importance).slice(0,Xne).map(t=>+t.fields[e-1]).filter(e=>!Number.isNaN(e)))));return n===Number.MIN_SAFE_INTEGER&&(n=null),n}},{key:"calculateMedianVisibleValue",value:function(e){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let t=this.visibleAndFetchedIds();0===t.length&&(t=Object.keys(this.fetchedTiles));const n=[].concat(...t.map(e=>this.fetchedTiles[e]).filter(e=>{var t;return null==(t=e.tileData)?void 0:t.length}).map(t=>t.tileData.sort((e,t)=>t.importance-e.importance).slice(0,Xne).map(t=>+t.fields[e-1]))).filter(e=>e>0);this.medianVisibleValue=Bl(n)}},{key:"draw",value:function(){var e;Bne(t,"draw",this,3)([]),this.textManager.startDraw(),this.rectGraphics.scale.y=this.vertK,this.rectGraphics.position.y=this.vertY,this.drawnAtScale&&(qne(this.rectGraphics,this._xScale,this.drawnAtScale),null!=(e=this.uniqueSegments)&&e.length&&this.uniqueSegments.forEach(e=>{const t=e.fields,n=t[3],r=this._xScale((e.xStart+e.xEnd)/2);if(this.textManager.texts[e.uid]){const i=this.textManager.texts[e.uid].nominalY*(this.vertK*this.prevK)+this.vertY;this.textManager.lightUpdateSingleText(e,r,i,{importance:e.importance,caption:n,strand:t[5]})}}),this.textManager.hideOverlaps())}},{key:"setPosition",value:function(e){Bne(t,"setPosition",this,3)([e]),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(e){Bne(t,"setDimensions",this,3)([e])}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){let e=null,n=null;Bne(t,"exportSVG",this,1)?[n,e]=Bne(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=document.createElement("g"),o=document.createElement("g");return r.appendChild(i),r.appendChild(o),this.uniqueSegments.forEach(e=>{const t=document.createElement("g");if(t.setAttribute("transform",`translate(${this.rectGraphics.position.x},${this.rectGraphics.position.y})scale(${this.rectGraphics.scale.x},${this.rectGraphics.scale.y})`),i.appendChild(t),this.drawnRects&&e.uid in this.drawnRects){const n=this.drawnRects[e.uid][0],r=document.createElement("path");let i=`M ${n[0]} ${n[1]}`;for(let e=2;e<n.length;e+=2)i+=` L ${n[e]} ${n[e+1]}`;const a=this.drawnRects[e.uid][1].fill,s=void 0!==this.options.fontColor?aw(this.options.fontColor):a;if(r.setAttribute("d",i),r.setAttribute("fill",a),r.setAttribute("opacity",.3),r.style.stroke=a,r.style.strokeWidth="1px",t.appendChild(r),this.textManager.texts[e.uid]){const t=this.textManager.texts[e.uid];if(!t.visible)return;const n=document.createElement("g"),r=document.createElement("text");o.appendChild(n),n.appendChild(r),n.setAttribute("transform",`translate(${t.x},${t.y})scale(${t.scale.x},1)`),r.setAttribute("text-anchor","middle"),r.setAttribute("font-family",Wne.fontFamily),r.setAttribute("font-size",+this.options.fontSize||Wne.fontSize),r.setAttribute("font-weight","bold"),r.setAttribute("dy","5px"),r.setAttribute("fill",s),r.setAttribute("stroke",Wne.stroke),r.setAttribute("stroke-width","0.4"),r.setAttribute("text-shadow","0px 0px 2px grey"),r.innerHTML=t.text}}}),[n,n]}},{key:"movedY",value:function(e){const t=this.valueScaleTransform,{y:n,k:r}=t;n+e/r>-(r-1)*this.dimensions[1]&&n+e/r<0&&(this.valueScaleTransform=t.translate(0,e/r)),this.rectGraphics.position.y=this.valueScaleTransform.y,this.vertY=this.valueScaleTransform.y,this.animate(),this.vertY-this.prevVertY>this.dimensions[1]/2&&this.render()}},{key:"zoomedY",value:function(e,t){const n=mW.zoomedY(e,t,this.valueScaleTransform,this.dimensions[1]);this.valueScaleTransform=n;let r=n.k;const i=n.y;let o=!1;r/=this.prevK,(r>1.5||r<1/1.5)&&(this.prevK*=r,r=1,o=!0),this.vertK=r,this.vertY=i,o&&this.render(),this.rectGraphics.scale.y=r,this.rectGraphics.position.y=i,this.draw(),this.animate()}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo||!this.drawnRects)return"";const n=[e,t],r=Object.values(this.drawnRects);for(let i=0;i<r.length;i++){const e=r[i][0].slice(0),t=Yne(e,this.rectGraphics.scale.x,this.rectGraphics.position.x,this.rectGraphics.scale.y,this.rectGraphics.position.y);if(-1===Pte(t,n))return r[i][1].value.fields.join(" ")}return""}}])}(Nne);function Zne(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qne(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Jne(e,t,n){return t=rre(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ere()?Reflect.construct(t,n||[],rre(e).constructor):t.apply(e,n))}function ere(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ere=function(){return!!e})()}function tre(e,t,n,r){var i=nre(rre(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function nre(){return nre=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=rre(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nre.apply(null,arguments)}function rre(e){return(rre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ire(e,t){return(ire=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const ore=10,are=10,sre=are;let lre=function(e){function t(e,n){var r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);const o={...e};o.onValueScaleChanged=()=>{e.onValueScaleChanged(),i.drawColorbar()},i=Jne(this,t,[o,n]);const{pubSub:a,animate:s,svgElement:l,onTrackOptionsChanged:c,onMouseMoveZoom:u,isShowGlobalMousePosition:h,isValueScaleLocked:p}=e;return i.pubSub=a,i.is2d=!0,i.animate=s,i.uid=a_.nice(),i.scaleBrush=A$(),i.onTrackOptionsChanged=c,i.isShowGlobalMousePosition=h,i.isValueScaleLocked=p,i.pColorbarArea=new ow.PIXI.Graphics,i.pMasked.addChild(i.pColorbarArea),i.pColorbar=new ow.PIXI.Graphics,i.pColorbarArea.addChild(i.pColorbar),i.axis=new pW(i),i.pColorbarArea.addChild(i.axis.pAxis),i.colorScale=Yw,n?.colorRange&&(i.colorScale=iw(n.colorRange)),i.gBase=pm(l).append("g"),i.gMain=i.gBase.append("g"),i.gColorscaleBrush=i.gMain.append("g"),i.brushing=!1,i.prevOptions="",i.prevIndUpperLeftTile="",i.onMouseMoveZoom=u,i.setDataLensSize(11),i.dataLens=new Float32Array(i.dataLensSize**2),i.mouseMoveHandlerBound=i.mouseMoveHandler.bind(i),i.onMouseMoveZoom&&i.pubSubs.push(i.pubSub.subscribe("app.mouseMove",i.mouseMoveHandlerBound)),null!=(r=i.options)&&r.showMousePosition&&!i.hideMousePosition&&(i.hideMousePosition=nx(i,i.is2d,i.isShowGlobalMousePosition())),i.prevOptions=JSON.stringify(n),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ire(e,t)}(t,e),Zne(t,[{key:"mouseMoveHandler",value:function(e){this.isWithin(e.x,e.y)&&(this.mouseX=e.x,this.mouseY=e.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mouseX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mouseY;if(typeof e>"u"||typeof t>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;const n=e-this.position[0],r=t-this.position[1];let i,o;try{o=this.getVisibleRectangleData(n-this.dataLensPadding,r-this.dataLensPadding,this.dataLensSize,this.dataLensSize),i=o.get(this.dataLensPadding,this.dataLensPadding)}catch{return}const a=this.dataLensSize;let s;try{s=cx(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch{return}if(!s)return;const l=Math.round(this._xScale.invert(n)),c=Math.round(this._yScale.invert(r));let u=[l,c],h=[Math.round(this._xScale.invert(n-this.dataLensPadding)),Math.round(this._xScale.invert(n+this.dataLensPadding))],p=[Math.round(this._yScale.invert(r-this.dataLensPadding)),Math.round(this._yScale.invert(r+this.dataLensPadding))];this.chromInfo&&(u=u.map(e=>Z_(e,this.chromInfo).slice(0,2)),h=h.map(e=>Z_(e,this.chromInfo).slice(0,2)),p=p.map(e=>Z_(e,this.chromInfo).slice(0,2))),this.onMouseMoveZoom({trackId:this.id,data:i,absX:e,absY:t,relX:n,relY:r,dataX:l,dataY:c,orientation:"2d",dataLens:o,dim:a,toRgb:s,center:u,xRange:h,yRange:p,isGenomicCoords:!!this.chromInfo})}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!0)}},{key:"getAbsTileDim",value:function(e,t,n){const{tileX:r,tileY:i,tileWidth:o,tileHeight:a}=this.getTilePosAndDimensions(e,t),s={};return s.width=this._refXScale(r+o)-this._refXScale(r),s.height=this._refYScale(i+a)-this._refYScale(i),n?(s.x=this._refXScale(i),s.y=this._refYScale(r)):(s.x=this._refXScale(r),s.y=this._refYScale(i)),s}},{key:"updateValueScale",value:function(){var e;let t=this.minValue(),n=this.maxValue();const r=1e-6;null!=t&&void 0!==n&&null!==n&&Math.abs(t-n)<r&&(t=Math.max(r,t-.001),n+=.001);const[i,o]=function(e,t,n,r){return"log"===e&&t>0?["log",wh().range([254,0]).domain([t+0,r+0])]:["linear",ph().range([254,0]).domain([t,r])]}((null==(e=this.options)?void 0:e.heatmapValueScaling)||"log",t,this.medianVisibleValue,n);return this.valueScale=o,this.limitedValueScale=this.valueScale.copy(),this.options&&typeof this.options.scaleStartPercent<"u"&&typeof this.options.scaleEndPercent<"u"&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),[i,o]}},{key:"rerender",value:function(e,n){var r;tre(t,"rerender",this,3)([e,n]),this.updateValueScale();const i=JSON.stringify(e);this.drawColorbar(),(n||i!==this.prevOptions)&&(this.prevOptions=i,this.options=e,tre(t,"rerender",this,3)([e,n]),this.calculateVisibleTiles(),e?.colorRange&&(this.colorScale=iw(e.colorRange)),this.visibleAndFetchedTiles().forEach(e=>this.renderTile(e)),this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),null!=(r=this.options)&&r.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=nx(this,this.is2d,this.isShowGlobalMousePosition())))}},{key:"drawLabel",value:function(){this.options.labelPosition===this.options.colorbarPosition?this.labelXOffset=75:this.labelXOffset=0,tre(t,"drawLabel",this,3)([])}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");t.width=this.binsPerTile(),t.height=this.binsPerTile();const n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);const r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"exportData",value:function(){if(this.tilesetInfo){const e=this.getVisibleRectangleData(0,0,this.dimensions[0],this.dimensions[1]),t={bounds:[this._xScale.domain(),this._yScale.domain()],dimensions:e.shape,data:qT(e)};mw("data.json",JSON.stringify(t))}}},{key:"setSpriteProperties",value:function(e,t,n,r){const i=this.getAbsTileDim(t,n,r);e.width=i.width,e.height=i.height,e.x=i.x,e.y=i.y,r&&n[0]!==n[1]&&(e.rotation=-Math.PI/2,e.scale.x=-1*Math.abs(e.scale.x))}},{key:"refXScale",value:function(e){tre(t,"refXScale",this,3)([e]),this.draw()}},{key:"refYScale",value:function(e){tre(t,"refYScale",this,3)([e]),this.draw()}},{key:"draw",value:function(){tre(t,"draw",this,3)([])}},{key:"newBrushOptions",value:function(e){const t=JSON.parse(JSON.stringify(this.options)),n=this.valueScale.copy().range([this.colorbarHeight,0]),r=n.invert(e[0]),i=(n.invert(e[1])-n.domain()[0])/(n.domain()[1]-n.domain()[0]),o=(r-n.domain()[0])/(n.domain()[1]-n.domain()[0]);return t.scaleStartPercent=i.toFixed(5),t.scaleEndPercent=o.toFixed(5),t}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(e){if(!e.selection)return;const t=this.newBrushOptions(e.selection),n=JSON.stringify(t);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",t=>"n"===t.type?e.selection[0]:e.selection[1]-2),n!==this.prevOptions&&(this.prevOptions=n,this.rerender(t,!0),this.onTrackOptionsChanged(t),this.isValueScaleLocked()&&this.onValueScaleChanged())}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"setPosition",value:function(e){tre(t,"setPosition",this,3)([e]),this.drawColorbar()}},{key:"setDimensions",value:function(e){tre(t,"setDimensions",this,3)([e]),this.drawColorbar()}},{key:"removeColorbar",value:function(){this.pColorbarArea.visible=!1,this.scaleBrush.on(".brush")&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.selectAll("rect").remove()}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options||!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition)return void this.removeColorbar();if(this.pColorbarArea.visible=!0,!this.valueScale||Number.isNaN(+this.valueScale.domain()[0])||Number.isNaN(+this.valueScale.domain()[1]))return;const e=Math.min(this.dimensions[1]/2,200);if(this.colorbarHeight=e-20,this.colorbarHeight<0)return void this.removeColorbar();if(this.valueScale.domain()[1]===this.valueScale.domain()[0])return void this.removeColorbar();const t=this.valueScale.copy().range([this.colorbarHeight,0]);"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.scaleBrush.extent([[4,0],[sre,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[6,this.colorbarHeight]]),"topLeft"===this.options.colorbarPosition&&([this.pColorbarArea.x,this.pColorbarArea.y]=this.position,this.pColorbar.y=are,this.axis.pAxis.y=are,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+4},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"topRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1],this.pColorbar.y=are,this.axis.pAxis.y=are,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+ore+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"bottomRight"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-75,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=are,this.axis.pAxis.y=are,this.axis.pAxis.x=50,this.pColorbar.x=50,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+ore+1},${this.pColorbarArea.y+this.pColorbar.y-1})`)),"bottomLeft"===this.options.colorbarPosition&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-e,this.pColorbar.y=are,this.axis.pAxis.y=are,this.axis.pAxis.x=25,this.pColorbar.x=15,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.pColorbarArea.clear(),this.pColorbarArea.beginFill(aw(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity>=0?+this.options.colorbarBackgroundOpacity:.6),this.pColorbarArea.drawRect(0,0,75,e),this.options?(this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1)):this.options={scaleStartPercent:0,scaleEndPercent:1};const n=t.domain()[1]-t.domain()[0],r=t(this.options.scaleStartPercent*n+t.domain()[0]),i=t(this.options.scaleEndPercent*n+t.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",sre).attr("height",4).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[i,r]));const o=ph().domain([0,255]).range([0,this.colorbarHeight]);for(let a=0;a<this.colorbarHeight;a++){const e=this.limitedValueScale(t.invert(a)),n=Math.max(0,Math.min(254,Math.floor(e)));this.pColorbar.beginFill(aw(`rgb(${this.colorScale[n][0]},${this.colorScale[n][1]},${this.colorScale[n][2]})`)),this.pColorbar.drawRect(0,a,ore,1)}this.pAxis.position.x=ore,this.pAxis.position.y=o(0),"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?this.axis.drawAxisRight(t,this.colorbarHeight):("topRight"===this.options.colorbarPosition||"bottomRight"===this.options.colorbarPosition)&&this.axis.drawAxisLeft(t,this.colorbarHeight)}},{key:"exportColorBarSVG",value:function(){const e=document.createElement("g");if(e.setAttribute("class","color-bar"),!this.options.colorbarPosition||"hidden"===this.options.colorbarPosition||!this.valueScale)return e;e.setAttribute("transform",`translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);const t=document.createElement("rect");e.appendChild(t);const n=document.createElement("g");e.appendChild(n),n.setAttribute("transform",`translate(${this.pColorbar.x}, ${this.pColorbar.y})`);const r=Math.min(this.dimensions[1]/2,200);this.colorbarHeight=r-20,t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",75),t.setAttribute("height",r),t.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");const i=ph().domain([0,255]).range([0,this.colorbarHeight]),o=this.colorbarHeight/256;for(let c=0;c<256;c++){const e=document.createElement("rect");n.appendChild(e),e.setAttribute("x",0),e.setAttribute("y",i(c)),e.setAttribute("width",ore),e.setAttribute("height",o),e.setAttribute("class","color-rect");const t=Math.min(this.colorScale.length-1,Math.max(0,Math.floor(this.limitedValueScale(this.valueScale.invert(c))))),r=this.colorScale[t];r?e.setAttribute("style",`fill: rgb(${r[0]}, ${r[1]}, ${r[2]})`):e.setAttribute("style","fill: rgb(255,255,255,0)")}const a=document.createElement("g");e.appendChild(a),a.setAttribute("transform",`translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);let s=null;const l=this.valueScale.copy().range([this.colorbarHeight,0]);return"topLeft"===this.options.colorbarPosition||"bottomLeft"===this.options.colorbarPosition?s=this.axis.exportAxisRightSVG(l,this.colorbarHeight):("topRight"===this.options.colorbarPosition||"bottomRight"===this.options.colorbarPosition)&&(s=this.axis.exportAxisLeftSVG(l,this.colorbarHeight)),a.appendChild(s),e}},{key:"setDataLensSize",value:function(e){this.dataLensPadding=Math.max(0,Math.floor((e-1)/2)),this.dataLensSize=2*this.dataLensPadding+1}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||256}},{key:"getVisibleRectangleData",value:function(e,t,n,r){let i=this.calculateZoomLevel();i=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,i):i;const o=LW(this.tilesetInfo,i,this.binsPerTile())/this.binsPerTile(),a=[this._xScale.invert(e),this._xScale.invert(e+n)],s=[this._yScale.invert(t),this._yScale.invert(t+r)],l=[Math.max(a[0],this.tilesetInfo.min_pos[0]),Math.min(a[1],this.tilesetInfo.max_pos[0])],c=[Math.max(s[0],this.tilesetInfo.min_pos[1]),Math.min(s[1],this.tilesetInfo.max_pos[1])],u=Math.floor(l[0]/o),h=Math.floor(c[0]/o),p=Math.max(0,Math.ceil((l[1]-l[0])/o)),f=Math.max(0,Math.ceil((c[1]-c[0])/o)),d=WT(new Array(f*p).fill(Number.NaN),[f,p]);return this.visibleAndFetchedTiles().forEach(e=>{const t=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos,{tileX:n,tileY:r,tileWidth:i,tileHeight:a}=this.getTilePosAndDimensions(e.tileData.zoomLevel,t,this.binsPerTile()),s=Math.floor(n/o),l=Math.floor((n+i)/o),c=Math.floor(r/o),m=Math.floor((r+a)/o);let g=Math.max(u,s)-s,y=Math.max(h,c)-c;const v=Math.min(u+p,l)-s,b=Math.min(h+f,m)-c,_=Math.max(s-u,0),w=Math.max(c-h,0),T=v-g,x=b-y;if(!(T<0||x<0)){if(e.mirrored&&g>y){const e=g;g=y,y=e}NT(d.hi(w+x,_+T).lo(w,_),e.dataArray.hi(y+x,g+T).lo(y,g))}}),d}},{key:"initTile",value:function(e){tre(t,"initTile",this,3)([e]),e.tileData.dense.length===this.binsPerTile()**2&&(e.dataArray=WT(Array.from(e.tileData.dense),[this.binsPerTile(),this.binsPerTile()]),this.continuousScaling&&e.tileData.tilePos[0]===e.tileData.tilePos[1]&&e.mirrored&&(e.tileData.denseDataExtrema.mirrorPrecomputedExtrema(),tre(t,"initTile",this,3)([e]))),null!==this.scale.minValue&&null!==this.scale.maxValue&&this.renderTile(e)}},{key:"updateTile",value:function(e){e.scale&&this.scale&&this.scale.minValue===e.scale.minValue&&this.scale.maxValue===e.scale.maxValue||(this.renderTile(e),this.drawColorbar())}},{key:"destroyTile",value:function(e){e.sprite.destroy(!0),e.canvas=null,e.sprite=null,e.texture=null}},{key:"pixDataFunction",value:function(e,t){if(t){const{graphics:n}=e,r=this.tileDataToCanvas(t.pixData);e.sprite&&e.sprite.destroy(!0);const i="4"===ow.PIXI.VERSION[0]?ow.PIXI.Texture.fromCanvas(r,ow.PIXI.SCALE_MODES.NEAREST):ow.PIXI.Texture.from(r,{scaleMode:ow.PIXI.SCALE_MODES.NEAREST}),o=new ow.PIXI.Sprite(i);e.sprite=o,e.texture=i,e.canvas=r,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored),n.removeChildren(),n.addChild(e.sprite)}this.renderingTiles.delete(e.tileId)}},{key:"renderTile",value:function(e){var t;const[n]=this.updateValueScale();if(this.renderingTiles.add(e.tileId),this.tilesetInfo.tile_size&&(null==(t=e.tileData.dense)?void 0:t.length)<this.tilesetInfo.tile_size){const t=new Float32Array(this.tilesetInfo.tile_size);t.fill(Number.NaN),t.set(e.tileData.dense),e.tileData.dense=t}FW(e,n,this.limitedValueScale.domain(),0,this.colorScale,t=>this.pixDataFunction(e,t),this.mirrorTiles()&&!e.mirrored&&e.tileData.tilePos[0]===e.tileData.tilePos[1],"upper-right"===this.options.extent&&e.tileData.tilePos[0]===e.tileData.tilePos[1],this.options.zeroValueColor?sw(this.options.zeroValueColor):void 0,{selectedRows:this.options.selectRows,selectedRowsAggregationMode:this.options.selectRowsAggregationMode,selectedRowsAggregationWithRelativeHeight:this.options.selectRowsAggregationWithRelativeHeight,selectedRowsAggregationMethod:this.options.selectRowsAggregationMethod})}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null,tre(t,"remove",this,3)([])}},{key:"refScalesChanged",value:function(e,n){tre(t,"refScalesChanged",this,3)([e,n]),AT(this.fetchedTiles).filter(e=>e.sprite).forEach(e=>this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored))}},{key:"superSVG",value:function(){return tre(t,"exportSVG",this,3)([])}},{key:"exportSVG",value:function(){let e=null,n=null;tre(t,"exportSVG",this,1)?[n,e]=tre(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const t of this.visibleAndFetchedTiles()){const e=180*t.sprite.rotation/Math.PI,n=document.createElement("g");n.setAttribute("transform",`translate(${t.sprite.x},${t.sprite.y}) rotate(${e}) scale(${t.sprite.scale.x},${t.sprite.scale.y})`);const i=document.createElement("image");i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.canvas.toDataURL()),i.setAttribute("width",t.canvas.width),i.setAttribute("height",t.canvas.height),i.setAttribute("style","image-rendering: pixelated"),n.appendChild(i),r.appendChild(n)}const i=this.exportColorBarSVG();return e.appendChild(i),[n,n]}},{key:"getVisiblePartOfUppLeftTile",value:function(){const e=this.visibleAndFetchedTiles().map(e=>{const t=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos;return[t[0],t[1],e.tileId]});if(0===e.length)return null;let t=e[0];for(let u=0;u<e.length;u++){const n=e[u];(n[0]<t[0]||n[1]<t[1])&&(t=n)}const n=Math.min(8,this.binsPerTile()),r=this.binsPerTile()/n,i=this.visibleAndFetchedTiles().filter(e=>e.tileId===t[2])[0],o=this.getIndicesOfVisibleDataInTile(i),a=o[0],s=o[1],l=a-a%r,c=s-s%r;return[i.tileId,l,c]}},{key:"getIndicesOfVisibleDataInTile",value:function(e){const t=this._xScale.range(),n=this._yScale.range(),r=e.mirrored?[e.tileData.tilePos[1],e.tileData.tilePos[0]]:e.tileData.tilePos,{tileX:i,tileY:o,tileWidth:a,tileHeight:s}=this.getTilePosAndDimensions(e.tileData.zoomLevel,r,this.binsPerTile()),l=ph().domain([0,this.binsPerTile()]).range([i,i+a]),c=Math.max(0,Math.round(l.invert(this._xScale.invert(t[0])))-1),u=Math.min(this.binsPerTile(),Math.round(l.invert(this._xScale.invert(t[1])))),h=ph().domain([0,this.binsPerTile()]).range([o,o+s]),p=Math.max(0,Math.round(h.invert(this._yScale.invert(n[0])))-1),f=Math.min(this.binsPerTile(),Math.round(h.invert(this._yScale.invert(n[1]))));return e.mirrored&&r[0]!==r[1]?[p,c,f,u]:[c,p,u,f]}},{key:"minVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.visibleAndFetchedTiles().map(e=>{if(void 0===e.tileData.denseDataExtrema)return null;const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMinNonZeroInSubset(t)});if(0===n.length&&null===this.valueScaleMax)return null;const r=Math.min.apply(null,n);return r===Number.MAX_SAFE_INTEGER?tre(t,"minVisibleValue",this,3)([e]):e?r:null!==this.valueScaleMin?this.valueScaleMin:r}},{key:"maxVisibleValue",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.visibleAndFetchedTiles().map(e=>{if(void 0===e.tileData.denseDataExtrema)return null;const t=this.getIndicesOfVisibleDataInTile(e);return e.tileData.denseDataExtrema.getMaxNonZeroInSubset(t)});if(0===n.length&&null===this.valueScaleMax)return null;const r=Math.max.apply(null,n);return r===Number.MIN_SAFE_INTEGER?tre(t,"maxVisibleValue",this,3)([e]):e?r:null!==this.valueScaleMax?this.valueScaleMax:r}},{key:"zoomed",value:function(e,n,r,i,o){if(this.brushing)return;tre(t,"zoomed",this,3)([e,n]),this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=r,this.pMain.scale.y=r;const a=this.isValueScaleLocked();if(this.continuousScaling&&void 0!==this.minValue()&&void 0!==this.maxValue()){const e=JSON.stringify(this.getVisiblePartOfUppLeftTile());if(null===this.valueScaleMin&&null===this.valueScaleMax&&!a&&e!==this.prevIndUpperLeftTile){const t=this.minVisibleValue(),n=this.maxVisibleValue(),r=1e-6;null!==t&&null!==n&&(Math.abs(this.minValue()-t)>r||Math.abs(this.maxValue()-n)>r)&&(this.minValue(t),this.maxValue(n),this.scheduleRerender()),this.prevIndUpperLeftTile=e}a&&this.onValueScaleChanged()}this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=[t,n,r];a.mirrored=o,a.dataTransform=i,e.push(a)}},{key:"tilesToId",value:function(e,t,n){var r;const i=e,o=t,a=(null==(r=this.options)?void 0:r.dataTransform)||"default",s=[];for(let l=0;l<i.length;l++)for(let e=0;e<o.length;e++)this.mirrorTiles()?(i[l]>=o[e]?"lower-left"!==this.options.extent&&this.addTileId(s,n,o[e],i[l],a,!0):"upper-right"!==this.options.extent&&this.addTileId(s,n,i[l],o[e],a),i[l]===o[e]&&"lower-left"===this.options.extent&&this.addTileId(s,n,i[l],o[e],a)):this.addTileId(s,n,i[l],o[e],a);return s}},{key:"calculateVisibleTiles",value:function(){if(this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e);this.xTiles=BW(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=BW(e[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=jW(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=jW(this.zoomLevel,this._yScale,this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],this.options.reverseYAxis?this.tilesetInfo.min_pos[1]:this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel))}}},{key:"mirrorTiles",value:function(){return!(this.tilesetInfo.mirror_tiles&&(!1===this.tilesetInfo.mirror_tiles||"false"===this.tilesetInfo.mirror_tiles))}},{key:"contextMenuItems",value:function(e,t){return[]}},{key:"getMouseOverHtml",value:function(e,t){if(!this.options||!this.options.showTooltip||!this.tilesetInfo)return"";const n=RW(this.tilesetInfo,this.zoomLevel),r=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),i=Math.ceil(Math.log(r/n)/Math.log(10));this.setDataLensSize(1);const o=this._xScale.invert(e),a=this._yScale.invert(t);let s="<b>Position:</b> ";if(this.chromInfo){const e=Z_(o,this.chromInfo),t=Z_(a,this.chromInfo),n=e=>eh(`.${i}s`)(e);s+=`${e[0]}:${n(e[1])} & ${t[0]}:${n(t[1])}`,s+="<br/>"}let l=null;try{l=this.getVisibleRectangleData(e,t,1,1).get(0,0)}catch{return""}return this.options&&"log"===this.options.heatmapValueScaling?l>0?`${s}<b>Value:</b> 1e${eh(".3f")(Math.log(l)/Math.log(10))}`:0===l?`${s}<b>Value:</b> 0`:`${s}<b>Value:</b> N/A`:`${s}<b>Value:</b> ${eh(".3f")(l)}`}},{key:"getTilePosAndDimensions",value:function(e,t,n){const r=n||this.binsPerTile();if(this.tilesetInfo.resolutions){const n=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e)[e],i=n*r,o=i;return{tileX:n*r*t[0],tileY:n*r*t[1],tileWidth:i,tileHeight:o}}const i=t[0],o=t[1],a=this.tilesetInfo.min_pos[0],s=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],l=this.tilesetInfo.max_width/2**e,c=this.tilesetInfo.max_width/2**e;return{tileX:a+i*l,tileY:s+o*c,tileWidth:l,tileHeight:c}}},{key:"calculateZoomLevel",value:function(){var e;this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1];let t=null;if(this.tilesetInfo.resolutions){const e=IW(this.tilesetInfo.resolutions,this._xScale),n=IW(this.tilesetInfo.resolutions,this._yScale);t=Math.min(e,n)}else{const e=DW(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.binsPerTile()),n=DW(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.binsPerTile());t=Math.max(e,n),t=Math.min(t,this.maxZoom)}return null!=(e=this.options)&&e.maxZoom&&(this.options.maxZoom>=0?t=Math.min(this.options.maxZoom,t):console.error("Invalid maxZoom on track:",this)),t}},{key:"tileToLocalId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?`${e.join(".")}.${e.mirrored}.${e.dataTransform}`:`${e.join(".")}.${e.mirrored}`}},{key:"tileToRemoteId",value:function(e){return e.dataTransform&&"default"!==e.dataTransform?`${e.join(".")}.${e.dataTransform}`:`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}}])}(yne);function cre(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ure(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ure(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function hre(e,t,n){return t=fre(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pre()?Reflect.construct(t,n||[],fre(e).constructor):t.apply(e,n))}function pre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pre=function(){return!!e})()}function fre(e){return(fre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dre(e,t){return(dre=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mre(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileY:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos);e.drawnAtScale=this._xScale.copy();const o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))),a=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,e.text.scale.y=a;const s=this._xScale(i)-this._xScale(0);if(e.textGraphics.scale.x=s/256,e.textGraphics.scale.y=s/256,t.clear(),t.lineStyle(4*o,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){const o=this._refXScale(r+i)-this._refXScale(r),a=this._refYScale(n+i)-this._refYScale(n);e.textGraphics.position.x=this._refXScale(r)+o/2,e.textGraphics.position.y=this._refYScale(n)+a/2,t.drawRect(this._refXScale(r),this._refYScale(n),o,a)}else{const o=this._refXScale(n+i)-this._refXScale(n),a=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=this._refXScale(n)+o/2,e.textGraphics.position.y=this._refYScale(r)+a/2,t.drawRect(this._refXScale(n),this._refYScale(r),o,a)}}function gre(e){const t=e.graphics;e.textGraphics=new ow.PIXI.Graphics,e.mirrored?e.text=new ow.PIXI.Text(`${e.tileData.zoomLevel}/${[e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}):e.text=new ow.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics)}let yre=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hre(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dre(e,t)}(t,e),cre(t,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){gre.bind(this)(e),this.drawTile(e)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){mre.bind(this)(e)}},{key:"fetchNewTiles",value:function(e){e.forEach(e=>{const t=e.remoteId.split("."),n={zoomLevel:t[0],tilePos:t.slice(1,t.length).map(e=>+e)};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)}),this.synchronizeTilesAndGraphics()}}])}(lre);function vre(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bre(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bre(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _re(e,t,n){return t=xre(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wre()?Reflect.construct(t,n||[],xre(e).constructor):t.apply(e,n))}function wre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wre=function(){return!!e})()}function Tre(){return Tre=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=xre(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Tre.apply(null,arguments)}function xre(e){return(xre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ere(e,t){return(Ere=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Sre=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_re(this,t,[e,n])).pMain=r.pMobile,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ere(e,t)}(t,e),vre(t,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){const t=e.graphics;e.textGraphics=new ow.PIXI.Graphics,e.text=new ow.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics),this.drawTile(e)}},{key:"destroyTile",value:function(e){}},{key:"drawTile",value:function(e){if(function(e,t,n){var r=Tre(xre(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"drawTile",this)([e]),!e.graphics)return;const n=e.graphics,{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)));e.text.scale.x=o,n.clear();const a=this.dimensions[1],s=this._refXScale(r+i)-this._refXScale(r);e.textGraphics.position.x=this._refXScale(r)+s/2,e.textGraphics.position.y=a/2;const l=this._refXScale(r);n.lineStyle(4*o,255,1),n.beginFill(16740363,.4),n.alpha=.5,n.moveTo(l,0),n.lineTo(l,a),n.moveTo(l+s,0),n.lineTo(l+s,a),n.lineStyle(0,255,1),n.drawRect(l,0,s,a)}}])}(Nne);function kre(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ore(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ore(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Pre(e,t,n){return t=Mre(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cre()?Reflect.construct(t,n||[],Mre(e).constructor):t.apply(e,n))}function Cre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cre=function(){return!!e})()}function Are(){return Are=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Mre(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Are.apply(null,arguments)}function Mre(e){return(Mre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ire(e,t){return(Ire=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Rre=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pre(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ire(e,t)}(t,e),kre(t,[{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(e,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(e,n){!function(e,t,n){var r=Are(Mre(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"zoomed",this)([e,n]);const r=(n(1)-n(0))/(this._refYScale(1)-this._refYScale(0)),i=this.position[0],o=n(0)+this.position[1]-this._refYScale(1)*r;this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=1,this.pMain.scale.y=r}}])}(kne);function Dre(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nre(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nre(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function jre(e,t,n){return t=Fre(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lre()?Reflect.construct(t,n||[],Fre(e).constructor):t.apply(e,n))}function Lre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lre=function(){return!!e})()}function Bre(){return Bre=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Fre(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Bre.apply(null,arguments)}function Fre(e){return(Fre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zre(e,t){return(zre=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Hre=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jre(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zre(e,t)}(t,e),Dre(t,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(e){const t=e.graphics;e.textGraphics=new ow.PIXI.Graphics,e.text=new ow.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,e.text.rotation=-Math.PI/2,t.addChild(e.textGraphics),this.drawTile(e,t)}},{key:"destroyTile",value:function(e,t){}},{key:"drawTile",value:function(e){if(function(e,t,n){var r=Bre(Fre(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"drawTile",this)([e]),!e.graphics)return;const n=e.graphics,{tileY:r,tileHeight:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=o,n.clear(),n.lineStyle(4*o,255,1),n.beginFill(16740363,.4),n.alpha=.5;const a=this.dimensions[0],s=this._refYScale(r+i)-this._refYScale(r);e.textGraphics.position.x=a/2,e.textGraphics.position.y=this._refYScale(r)+s/2,n.drawRect(0,this._refYScale(r),a,s)}},{key:"fetchNewTiles",value:function(e){e.forEach(e=>{const t=e.remoteId.split("."),n={zoomLevel:t[1],tilePos:t.slice(2,t.length).map(e=>+e)};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)}),this.synchronizeTilesAndGraphics()}}])}(Rre);var Ure=Array.prototype.slice;function Vre(e){return e}var Gre=1e-6;function Xre(e){return"translate("+e+",0)"}function Wre(e){return"translate(0,"+e+")"}function Yre(e){return t=>+e(t)}function qre(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function $re(){return!this.__axis}function Kre(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1===e||4===e?-1:1,u=4===e||2===e?"x":"y",h=1===e||3===e?Xre:Wre;function p(p){var f=r??(t.ticks?t.ticks.apply(t,n):t.domain()),d=i??(t.tickFormat?t.tickFormat.apply(t,n):Vre),m=Math.max(o,0)+s,g=t.range(),y=+g[0]+l,v=+g[g.length-1]+l,b=(t.bandwidth?qre:Yre)(t.copy(),l),_=p.selection?p.selection():p,w=_.selectAll(".domain").data([null]),T=_.selectAll(".tick").data(f,t).order(),x=T.exit(),E=T.enter().append("g").attr("class","tick"),S=T.select("line"),k=T.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(E),S=S.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),k=k.merge(E.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),p!==_&&(w=w.transition(p),T=T.transition(p),S=S.transition(p),k=k.transition(p),x=x.transition(p).attr("opacity",Gre).attr("transform",function(e){return isFinite(e=b(e))?h(e+l):this.getAttribute("transform")}),E.attr("opacity",Gre).attr("transform",function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:b(e))+l)})),x.remove(),w.attr("d",4===e||2===e?a?"M"+c*a+","+y+"H"+l+"V"+v+"H"+c*a:"M"+l+","+y+"V"+v:a?"M"+y+","+c*a+"V"+l+"H"+v+"V"+c*a:"M"+y+","+l+"H"+v),T.attr("opacity",1).attr("transform",function(e){return h(b(e)+l)}),S.attr(u+"2",c*o),k.attr(u,c*m).text(d),_.filter($re).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),_.each(function(){this.__axis=b})}return p.scale=function(e){return arguments.length?(t=e,p):t},p.ticks=function(){return n=Ure.call(arguments),p},p.tickArguments=function(e){return arguments.length?(n=null==e?[]:Ure.call(e),p):n.slice()},p.tickValues=function(e){return arguments.length?(r=null==e?null:Ure.call(e),p):r&&r.slice()},p.tickFormat=function(e){return arguments.length?(i=e,p):i},p.tickSize=function(e){return arguments.length?(o=a=+e,p):o},p.tickSizeInner=function(e){return arguments.length?(o=+e,p):o},p.tickSizeOuter=function(e){return arguments.length?(a=+e,p):a},p.tickPadding=function(e){return arguments.length?(s=+e,p):s},p.offset=function(e){return arguments.length?(l=+e,p):l},p}function Zre(e){return Kre(1,e)}function Qre(e){return Kre(4,e)}const Jre=Object.freeze(Object.defineProperty({__proto__:null,axisBottom:function(e){return Kre(3,e)},axisLeft:Qre,axisRight:function(e){return Kre(2,e)},axisTop:Zre},Symbol.toStringTag,{value:"Module"}));function eie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function nie(e,t,n){return t=iie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rie()?Reflect.construct(t,n||[],iie(e).constructor):t.apply(e,n))}function rie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rie=function(){return!!e})()}function iie(e){return(iie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oie(e,t){return(oie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let aie=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=nie(this,t,[e,n]);const{svgElement:i}=e;return r.gMain=pm(i).append("g"),r.clipUid=a_.nice(),r.clipRect=r.gMain.append("clipPath").attr("id",`track-bounds-${r.clipUid}`).append("rect"),r.gMain.attr("clip-path",`url(#track-bounds-${r.clipUid})`),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oie(e,t)}(t,e),eie(t,[{key:"setPosition",value:function(e){this.position=e,this.gMain.attr("transform",`translate(${this.position[0]},${this.position[1]})`),this.draw()}},{key:"setDimensions",value:function(e){this.dimensions=e,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),e[0]>=0&&e[1]>=0?(this.clipRect.attr("width",e[0]),this.clipRect.attr("height",e[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}])}(Mte);function sie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function cie(e,t,n){return t=fie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,uie()?Reflect.construct(t,n||[],fie(e).constructor):t.apply(e,n))}function uie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uie=function(){return!!e})()}function hie(e,t,n,r){var i=pie(fie(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function pie(){return pie=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fie(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},pie.apply(null,arguments)}function fie(e){return(fie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function die(e,t){return(die=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let mie=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=cie(this,t,[e,n])).axis=Qre(r._yScale),r.gAxis=r.gMain.append("g"),r.tilesetInfo=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&die(e,t)}(t,e),sie(t,[{key:"setDimensions",value:function(e){hie(t,"setDimensions",this)([e]),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform",`translate(${e[0]},0)`)}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,n){hie(t,"zoomed",this)([e,n]),this.draw()}}])}(aie);function gie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function vie(e,t,n){return t=Tie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bie()?Reflect.construct(t,n||[],Tie(e).constructor):t.apply(e,n))}function bie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bie=function(){return!!e})()}function _ie(e,t,n,r){var i=wie(Tie(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function wie(){return wie=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Tie(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wie.apply(null,arguments)}function Tie(e){return(Tie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xie(e,t){return(xie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Eie=(e,t,n,r,i,o)=>{i instanceof HTMLElement?function(e,t,n,r,i){let{fill:o=0,fillOpacity:a=0,stroke:s=0,strokeWidth:l=0,strokeOpacity:c=0}=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const u=document.createElement("rect");u.setAttribute("x",e),u.setAttribute("y",t),u.setAttribute("width",n),u.setAttribute("height",r),u.setAttribute("fill",`#${uw(o)}`),u.setAttribute("fill-opacity",a),u.setAttribute("stroke",`#${uw(s)}`),u.setAttribute("stroke-opacity",c),u.setAttribute("stroke-width",l),i.appendChild(u)}(e,t,n,r,i,o):((e,t,n,r,i)=>{i.drawRect(e,t,n,r)})(e,t,n,r,i)},Sie=function(e,t,n,r,i,o,a,s){let{isVertical:l=!1,svg:c=null}=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{};var u,h;let p=t,f=n,d=r,m=i;const g=2*s.width>r?r/2:s.width,y=2*s.width>i?i/2:s.width,v=c||e,b={fill:0,fillOpacity:0,stroke:0,strokeOpacity:0,strokeWidth:1};if(null!=(u=s.positions)&&u.length?(e.lineStyle(1,0,0),e.beginFill(s.color,s.opacity),b.fill=s.color,b.fillOpacity=s.opacity,b.stroke=0,b.strokeOpacity=0,b.strokeWidth=1,s.positions.forEach(e=>{"top"===e&&!l||"left"===e&&l?Eie(t-g,n-y,r+2*g,y,v,b):"bottom"===e&&!l||"right"===e&&l?Eie(t-g,n+i,r+2*g,y,v,b):"left"===e&&!l||"top"===e&&l?Eie(t-g,n-y,g,i+2*y,v,b):("right"===e&&!l||"bottom"===e&&l)&&Eie(t+r,n-y,g,i+2*y,v,b)})):s.width>0&&s.opacity>0&&(e.lineStyle(s.width,s.color,s.opacity),e.beginFill(0,0),b.fill=0,b.fillOpacity=0,b.stroke=s.color,b.strokeOpacity=s.opacity,b.strokeWidth=s.width,Eie(t-g,n-y,r+2*g,i+2*y,v,b)),null!=(h=a.positions)&&h.length){e.lineStyle(1,0,0),e.beginFill(a.color,a.opacity);const o=2*a.width>r?r/2:a.width,s=2*a.width>i?i/2:a.width;b.fill=a.color,b.fillOpacity=a.opacity,b.stroke=0,b.strokeOpacity=0,b.strokeWidth=1,a.positions.forEach(e=>{"top"===e&&!l||"left"===e&&l?(Eie(t,n,r,s,v,b),f+=s,m-=s):"bottom"===e&&!l||"right"===e&&l?(Eie(t,n+i-s,r,s,v,b),m-=s):"left"===e&&!l||"top"===e&&l?(Eie(t,n,o,i,v,b),p+=o,d-=o):("right"===e&&!l||"bottom"===e&&l)&&(Eie(t+r-o,n,o,i,v,b),d-=o)})}else e.lineStyle(a.width,a.color,a.opacity),b.stroke=a.color,b.strokeOpacity=a.opacity,b.strokeWidth=a.width;e.beginFill(o.color,o.opacity),b.fill=o.color,b.fillOpacity=o.opacity,Eie(p,f,d,m,v,b)};let kie=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vie(this,t,[e,n])).options=n||{},r.drawnRects={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xie(e,t)}(t,e),gie(t,[{key:"drawHorizontalOverlay",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;if(!n||n.length<2)return;let l=this.position[0]+t.left+this._xScale(n[0]);const c=this.position[1]+t.top,u=t.height;let h=this._xScale(n[1])-this._xScale(n[0]);h<r&&(l-=(r-h)/2,h=r),Sie(e,l,c,h,u,i,o,a,s)}},{key:"drawVerticalOverlay",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!n||n.length<2)return;const l=this.position[0]+t.left;let c=this.position[1]+t.top+this._yScale(n.length>=4?n[2]:n[0]);const u=this.position[1]+t.top,h=this.position[1]+t.top+t.height;if(c>h)return;c<u&&(c=u);const p=t.width;let f=this._yScale(n.length>=4?n[3]:n[1])-c+t.top+this.position[1];f<0||(c+f>h&&(f+=h-(c+f)),f<r&&(c-=(r-f)/2,f=r),s.isVertical=!0,Sie(e,l,c,p,f,i,o,a,s))}},{key:"draw",value:function(e){_ie(t,"draw",this,3)([]);const n=this.pMain,r={color:aw(this.options.fill||this.options.fillColor||"blue"),opacity:Number.isNaN(+this.options.fillOpacity)?.3:+this.options.fillOpacity},i={color:aw(this.options.stroke||"blue"),opacity:+this.options.strokeOpacity||1,width:+this.options.strokeWidth||0,positions:!this.options.strokePos||Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]},o={color:aw(this.options.outline||"white"),opacity:+this.options.outlineOpacity||1,width:+this.options.outlineWidth||0,positions:!this.options.outlinePos||Array.isArray(this.options.outlinePos)?this.options.outlinePos:[this.options.outlinePos]};(!e||!e.svg)&&n.clear(),n.lineStyle(i.width,i,+!i.positions*i.opacity),n.beginFill(r.color,r.opacity);const a=Math.max(0,+this.options.minWidth||0),s=Math.max(0,+this.options.minHeight||0);Array.isArray(this.options.extent)&&this.options.orientationsAndPositions.forEach(t=>{("1d-horizontal"===t.orientation||"2d"===t.orientation)&&this.options.extent.forEach(s=>this.drawHorizontalOverlay(n,t.position,s,a,r,i,o,e)),("1d-vertical"===t.orientation||"2d"===t.orientation)&&this.options.extent.forEach(a=>this.drawVerticalOverlay(n,t.position,a,s,r,i,o,e))})}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){_ie(t,"setPosition",this,3)([e]),this.draw()}},{key:"setDimensions",value:function(e){_ie(t,"setDimensions",this,3)([e]),this.draw()}},{key:"exportSVG",value:function(){let e=null,n=null;_ie(t,"exportSVG",this,1)?[n,e]=_ie(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");return e.appendChild(r),this.draw({svg:r}),[n,e]}}])}(zte);function Oie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Cie(e,t,n){return t=Rie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Aie()?Reflect.construct(t,n||[],Rie(e).constructor):t.apply(e,n))}function Aie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Aie=function(){return!!e})()}function Mie(e,t,n,r){var i=Iie(Rie(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Iie(){return Iie=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Rie(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Iie.apply(null,arguments)}function Rie(e){return(Rie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Die(e,t){return(Die=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Nie=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Cie(this,t,[e,n])).axis=Zre(r._xScale),r.gAxis=r.gMain.append("g"),r.tilesetInfo=!0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Die(e,t)}(t,e),Oie(t,[{key:"setDimensions",value:function(e){Mie(t,"setDimensions",this)([e]),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform",`translate(0,${e[1]})`)}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(e,n){Mie(t,"zoomed",this)([e,n]),this.draw()}}])}(aie);function jie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Bie(e,t,n){return t=Uie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fie()?Reflect.construct(t,n||[],Uie(e).constructor):t.apply(e,n))}function Fie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fie=function(){return!!e})()}function zie(e,t,n,r){var i=Hie(Uie(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Hie(){return Hie=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Uie(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hie.apply(null,arguments)}function Uie(e){return(Uie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vie(e,t){return(Vie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Gie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bie(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vie(e,t)}(t,e),jie(t,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(e){if(!this.tilesetInfo||!this.options.showTooltip||!this.valueScale)return"";const t=this.getDataAtPos(e);let n="";t&&(n=eh(".3f")(t));const r=this.pMouseOver,i=this.valueScale(t);r.clear(),r.beginFill(0,.5),r.lineStyle(1,0,1);return r.drawRect(e-2,i-2,4,4),this.animate(),`${n}`}},{key:"initTile",value:function(e){if(zie(t,"initTile",this,3)([e]),e.tileData&&e.tileData.dense){if(e.xValues=new Array(e.tileData.dense.length),e.yValues=new Array(e.tileData.dense.length),this.isValueScaleLocked()){const e=this.getLockGroupExtrema();null!==e&&(this.minValue(e[0]),this.maxValue(e[1]))}this.drawTile(e)}else console.warn("emptyTile:",e)}},{key:"rerender",value:function(e,n){zie(t,"rerender",this,3)([e,n]),this.options=e,zie(t,"draw",this,3)([]),this.visibleAndFetchedTiles().forEach(e=>{this.renderTile(e)})}},{key:"renderTile",value:function(e){this.drawTile(e),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(e){if(zie(t,"drawTile",this,3)([e]),!e.graphics||!e.tileData||!e.tileData.dense)return;const n=e.graphics,{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),o=e.tileData.dense;if(0===o.length)return;const[a,s]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(this.valueScale=a,n.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const l=aw(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue");!this.tilesetInfo.tile_size&&!this.tilesetInfo.bins_per_dimension&&console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension",this.tilesetInfo);const c=this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension,u=ph().domain([0,c]).range([r,r+i]),h=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;n.lineStyle(h,l,1),e.segments=[];let p=[];for(let t=0;t<o.length;t++){const n=this._xScale(u(t)),r=this.valueScale(o[t]+s);if("log"===this.options.valueScaling&&0===o[t]||Number.isNaN(r))p.length>1&&e.segments.push(p),p=[];else{if(u(t)>this.tilesetInfo.max_pos[0])break;p.push([n,r])}}p.length>1&&e.segments.push(p);for(const t of e.segments){const e=t[0],r=t.slice(1);n.moveTo(e[0],e[1]);for(const t of r)n.lineTo(t[0],t[1])}}},{key:"setPosition",value:function(e){zie(t,"setPosition",this,3)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw();const n=this.isValueScaleLocked();if(this.continuousScaling&&void 0!==this.minValue()&&void 0!==this.maxValue()){if(null===this.valueScaleMin&&null===this.valueScaleMax&&!n){const e=this.minVisibleValue(),t=this.maxVisibleValue(),n=1e-6;null!==e&&null!==t&&(Math.abs(this.minValue()-e)>n||Math.abs(this.maxValue()-t)>n)&&(this.minValue(e),this.maxValue(t),this.scheduleRerender())}n&&this.onValueScaleChanged()}}},{key:"superSVG",value:function(){return zie(t,"exportSVG",this,3)([])}},{key:"exportSVG",value:function(){let e=null,n=null;zie(t,"exportSVG",this,1)?[n,e]=zie(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n),n.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);const i=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue";this.visibleAndFetchedTiles().forEach(e=>{const t=document.createElement("path");t.setAttribute("fill","transparent"),t.setAttribute("stroke",i);let n="";for(const r of e.segments){const e=r[0],t=r.slice(1);n+=`M${e[0]} ${e[1]}`;for(const r of t)n+=`L${r[0]} ${r[1]}`}t.setAttribute("d",n),r.appendChild(t)});const o=document.createElement("g");if(o.setAttribute("id","axis"),n.appendChild(o),o.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);o.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);o.appendChild(e)}return[n,e]}},{key:"tileToLocalId",value:function(e){return this.options.aggregationMode&&"mean"!==this.options.aggregationMode?`${e.join(".")}.${this.options.aggregationMode}`:`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return this.tileToLocalId(e)}}])}(Nne);function Xie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wie(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wie(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Yie(e,t,n){return t=Zie(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qie()?Reflect.construct(t,n||[],Zie(e).constructor):t.apply(e,n))}function qie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qie=function(){return!!e})()}function $ie(e,t,n,r){var i=Kie(Zie(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Kie(){return Kie=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Zie(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Kie.apply(null,arguments)}function Zie(e){return(Zie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qie(e,t){return(Qie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Jie=aw("#FFFFFF");let eoe=function(e){function t(){for(var e,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Yie(this,t,[...i])).zeroLine=new ow.PIXI.Graphics,n.pMain.addChild(n.zeroLine),n.valueScaleTransform=QX,null!=(e=n.options)&&e.colorRange&&(n.options.colorRangeGradient?n.setColorGradient(n.options.colorRange):n.setColorScale(n.options.colorRange)),n.initialized=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qie(e,t)}(t,e),Xie(t,[{key:"setColorScale",value:function(e){e&&(this.colorScale=iw(e),this.colorScale=this.colorScale.map(e=>e.map(e=>e/255)))}},{key:"setColorGradient",value:function(e){if(!e)return;const t=e.length-1;this.colorGradientColors="bottom"===this.options.align?e.slice().reverse().map((e,n)=>({from:n/t,color:e})):e.map((e,n)=>({from:n/t,color:e}))}},{key:"initTile",value:function(e){this.initialized&&$ie(t,"initTile",this)([e])}},{key:"updateTile",value:function(e){(!e.valueScale||!this.scale||this.scale.minValue!==e.scale.minValue||this.scale.maxValue!==e.scale.maxValue)&&this.renderTile(e)}},{key:"renderTile",value:function(e){this.initialized&&$ie(t,"renderTile",this)([e])}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const{graphics:t}=e;e.svgData=void 0;const{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),i=e.tileData.dense;if(0===i.length)return;const[o,a]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue(),0);o.clamp(!0),this.valueScale=o;const s=o.copy();if(s.range([254,0]).clamp(!0),t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const l=aw(this.options.lineStrokeColor||"blue"),c=ph().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([n,n+r]);t.lineStyle(0,l,1);const u=this.options.barFillColor||"grey",h=aw(u),p="barOpacity"in this.options?this.options.barOpacity:1;t.beginFill(h,p),e.drawnAtScale=this._xScale.copy();const f="top"===this.options.align;let d,m,g,y,v,b;if(this.colorGradientColors){v=new ow.PIXI.Graphics,v.beginFill(Jie,1);const e=wT(this.colorGradientColors,1,this.dimensions[1],0,0,0,this.dimensions[1]);b=new ow.PIXI.Sprite(ow.PIXI.Texture.fromCanvas(e,ow.PIXI.SCALE_MODES.NEAREST)),b.x=this._xScale(n),b.width=this._xScale(n+r)-b.x}for(let _=0;_<i.length;_++)if(d=this._xScale(c(_)),g=this.valueScale(i[_]+a),m=this._xScale(c(_+1))-d,y=this.dimensions[1]-g,f&&(g=0),!(Number.isNaN(y)||y<0||g<0)){if(this.addSVGInfo(e,d,g,m,y,u),c(_)>this.tilesetInfo.max_pos[0])break;if(this.colorScale&&!this.options.colorRangeGradient){const e=Math.round(s(i[_]+a)),n=this.colorScale[e],r=ow.PIXI.utils.rgb2hex(n);t.beginFill(r,p)}(v||t).drawRect(d,g,m,y)}this.colorGradientColors&&(b.mask=v,t.removeChildren(),t.addChild(b,v))}},{key:"rerender",value:function(e,n){e?.colorRange&&(e.colorRangeGradient?this.setColorGradient(e.colorRange):this.setColorScale(e.colorRange)),$ie(t,"rerender",this)([e,n])}},{key:"drawZeroLine",value:function(){this.zeroLine.clear();const e=aw(this.options.barFillColor||"grey"),t=+this.options.barOpacity||1,n=this.options.zeroLineColor?aw(this.options.zeroLineColor):e,r=Number.isNaN(+this.options.zeroLineOpacity)?t:+this.options.zeroLineOpacity;this.zeroLine.beginFill(n,r),this.zeroLine.drawRect(0,this.dimensions[1]-1,this.dimensions[0],1)}},{key:"drawZeroLineSvg",value:function(e){const t=document.createElement("rect");t.setAttribute("id","zero-line"),t.setAttribute("x",0),t.setAttribute("y",this.dimensions[1]-1),t.setAttribute("height",1),t.setAttribute("width",this.dimensions[0]),t.setAttribute("fill",this.options.zeroLineColor||this.options.barFillColor),t.setAttribute("fill-opacity",this.options.zeroLineOpacity||this.options.barOpacity),e.appendChild(t)}},{key:"getXScaleAndOffset",value:function(e){const t=e.domain(),n=this._xScale.domain(),r=(t[1]-t[0])/(n[1]-n[0]);return[r,-this._xScale.domain().map(e)[0]*r]}},{key:"draw",value:function(){this.initialized&&($ie(t,"draw",this)([]),this.options.zeroLineVisible?this.drawZeroLine():this.zeroLine.clear(),Object.values(this.fetchedTiles).forEach(e=>{const[t,n]=this.getXScaleAndOffset(e.drawnAtScale);e.graphics.scale.x=t,e.graphics.position.x=n}))}},{key:"zoomed",value:function(e,n){$ie(t,"zoomed",this)([e,n])}},{key:"movedY",value:function(e){}},{key:"zoomedY",value:function(e,t){}},{key:"addSVGInfo",value:function(e,t,n,r,i,o){e.svgData?(e.svgData.barXValues.push(t),e.svgData.barYValues.push(n),e.svgData.barWidths.push(r),e.svgData.barHeights.push(i),e.svgData.barColors.push(o)):e.svgData={barXValues:[t],barYValues:[n],barWidths:[r],barHeights:[i],barColors:[o]}}},{key:"exportSVG",value:function(){let e=null,n=null;[n,e]=$ie(t,"superSVG",this)([]),n.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.options.zeroLine&&this.drawZeroLineSvg(r),this.visibleAndFetchedTiles().filter(e=>{var t;return null==(t=e.svgData)?void 0:t.barXValues}).forEach(e=>{const t=e.svgData;for(let n=0;n<t.barXValues.length;n++){const i=document.createElement("rect");i.setAttribute("fill",t.barColors[n]),i.setAttribute("stroke",t.barColors[n]),i.setAttribute("x",t.barXValues[n]),i.setAttribute("y",t.barYValues[n]),i.setAttribute("height",t.barHeights[n]),i.setAttribute("width",t.barWidths[n]),e.barBorders&&(i.setAttribute("stroke-width","0.1"),i.setAttribute("stroke","black")),r.appendChild(i)}});const i=document.createElement("g");if(i.setAttribute("id","axis"),n.appendChild(i),i.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}return[n,e]}}])}(Gie);function toe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,noe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function noe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function roe(e,t,n){return t=ooe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ioe()?Reflect.construct(t,n||[],ooe(e).constructor):t.apply(e,n))}function ioe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ioe=function(){return!!e})()}function ooe(e){return(ooe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aoe(e,t){return(aoe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let soe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),roe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aoe(e,t)}(t,e),toe(t,[{key:"drawTile",value:function(e){this.renderTile(e)}},{key:"renderTile",value:function(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),i=e.tileData.dense;if(0===i.length)return;let o=0;if(this.valueScale=null,"log"===this.options.valueScaling){let e=this.medianVisibleValue;this.medianVisibleValue||(e=this.minValue()),this.valueScale=wh().domain([e,this.maxValue()+e]).range([this.dimensions[1],0]),o=e}else this.valueScale=ph().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const a=aw(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),s=ph().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,a,1);const l=this.options.barFillColorTop?this.options.barFillColorTop:"green",c=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",u=aw(l),h=aw(c),p="barOpacity"in this.options?this.options.barOpacity:1;e.drawnAtScale=this._xScale.copy();let f=0;f="log"===this.options.valueScaling?this.valueScale(1):this.valueScale(0),delete e.svgData;for(let d=0;d<i.length;d++){const n=this._xScale(s(d)),r=this.valueScale(i[d]+o),a=this._xScale(s(d+1))-n;if(r>f?(t.beginFill(h,p),this.addSVGInfo(e,n,f,a,r-f,c)):(t.beginFill(u,p),this.addSVGInfo(e,n,r,a,f-r,l)),s(d)>this.tilesetInfo.max_pos[0])break;t.drawRect(n,e.svgData.barYValues[d],a,e.svgData.barHeights[d])}}}])}(eoe);function loe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,coe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function coe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function uoe(e,t,n){return t=foe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,hoe()?Reflect.construct(t,n||[],foe(e).constructor):t.apply(e,n))}function hoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hoe=function(){return!!e})()}function poe(){return poe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=foe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},poe.apply(null,arguments)}function foe(e){return(foe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function doe(e,t){return(doe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let moe=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uoe(this,t,[e,n])).setColorScale(n.colorRange),r.opacity=n.opacity||1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&doe(e,t)}(t,e),loe(t,[{key:"setColorScale",value:function(e){this.colorScale=e?iw(e):Yw,this.colorScale=this.colorScale.map(e=>e.map(e=>e/255))}},{key:"rerender",value:function(e){e?.colorRange&&this.setColorScale(e.colorRange),this.opacity=e.opacity||1,function(e,t,n){var r=poe(foe(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"rerender",this)([e])}},{key:"drawAxis",value:function(){}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),i=e.tileData.dense;if(0===i.length)return;const[o,a]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(o.range([254,0]).clamp(!0),this.valueScale=o,t.clear(),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const s=ph().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,0,0);for(let l=0;l<i.length;l++){if(Number.isNaN(i[l]))continue;const n=Math.round(this.valueScale(i[l]+a));if(Number.isNaN(+n))continue;const r=this._xScale(s(l)),o=this._xScale(s(l+1))-r,c=this.dimensions[1];e.xValues[l]=r,e.yValues[l]=n;const u=this.colorScale[n],h=ow.PIXI.utils.rgb2hex(u);if(t.beginFill(h,this.opacity),0!==l){if(s(l)>this.tilesetInfo.max_pos[0])break;0!==i[l]&&t.drawRect(r,0,o,c)}}}}])}(Gie);const goe=(e,t)=>{const n=Cx(e,t);return function(e){let t=0;const n=[];return e.forEach(e=>{t+=+e||0,n.push(t)}),Float64Array.from(n)}(e.map(e=>(Array.isArray(e)&&t?e.length:1)/n))};function yoe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,voe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function voe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function boe(e,t,n){return t=xoe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_oe()?Reflect.construct(t,n||[],xoe(e).constructor):t.apply(e,n))}function _oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_oe=function(){return!!e})()}function woe(e,t,n,r){var i=Toe(xoe(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Toe(){return Toe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=xoe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Toe.apply(null,arguments)}function xoe(e){return(xoe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eoe(e,t){return(Eoe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Soe=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=boe(this,t,[e,n])).pMain=r.pMobile,r.continuousScaling=!1,r.updateDataFetcher(n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eoe(e,t)}(t,e),yoe(t,[{key:"updateDataFetcher",value:function(e){if(e?.selectRows&&"server"===e.selectRowsAggregationMethod){const{pubSub:t,dataFetcher:n}=this,r=n.dataConfig.options,i={aggGroups:e.selectRows,aggFunc:e.selectRowsAggregationMode};if(JSON.stringify(r)!==JSON.stringify(i)){const e={...n.dataConfig,options:i};this.dataFetcher=new n.constructor(e,t),this.dataFetcher.dataConfig.tilesetUid&&this.fetchNewTiles(Object.keys(this.fetchedTiles).map(e=>({tileId:e,remoteId:e})))}}}},{key:"rerender",value:function(e,n){this.updateDataFetcher(e),woe(t,"rerender",this)([e,n]),e.selectRows&&(this.selectRowsCumWeights=goe(e.selectRows,e.selectRowsAggregationWithRelativeHeight))}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");this.options.selectRows&&this.tilesetInfo.shape?(t.width=this.tilesetInfo.shape[0],t.height=Cx(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight)):this.tilesetInfo.shape?(t.width=this.tilesetInfo.shape[0],t.height=this.tilesetInfo.shape[1]):(t.width=this.tilesetInfo.tile_size,t.height=1);const n=t.getContext("2d");if(n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height),0!==e.length&&e.length===4*t.width*t.height){const r=new ImageData(e,t.width,t.height);n.putImageData(r,0,0)}else console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");return t}},{key:"setSpriteProperties",value:function(e,t,n){const{tileX:r,tileWidth:i}=this.getTilePosAndDimensions(t,n,this.tilesetInfo.tile_size),o=r+i;e.width=this._refXScale(o)-this._refXScale(r),e.height=this.dimensions[1],e.x=this._refXScale(r),e.y=0}},{key:"leftTrackZoomed",value:function(e,t,n,r,i){const o=this._xScale(0)-n*this._refXScale(0);this.pMobile.position.x=o+this.position[0],this.pMobile.position.y=this.position[1],this.pMobile.scale.x=n,this.pMobile.scale.y=1}},{key:"zoomed",value:function(e,n,r,i){woe(t,"zoomed",this)([e,n]),this.pMain.position.x=i,this.pMain.position.y=this.position[1],this.pMain.scale.x=r,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const e=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e);this.xTiles=VW.calculateTilesFromResolution(e[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size)}else this.xTiles=VW.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles.map(e=>[this.zoomLevel,e]);this.setVisibleTiles(e)}},{key:"calculateZoomLevel",value:function(){if(!this.tilesetInfo)return;const e=this.tilesetInfo.min_pos[0];let t=null;return t=this.tilesetInfo.resolutions?VW.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,e):VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t}},{key:"tileToLocalId",value:function(e){return e.join(".")}},{key:"tileToRemoteId",value:function(e){return e.join(".")}},{key:"getTilePosAtPosition",value:function(e,t){if(!this.tilesetInfo)return;const n=this.calculateZoomLevel(),r=VW.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r;return[n,Math.floor(i)]}},{key:"getVisibleData",value:function(e,t){const n=this.calculateZoomLevel(),r=VW.calculateTileWidth(this.tilesetInfo,n,this.tilesetInfo.tile_size),i=this._xScale.invert(e)/r;let o=this.tilesetInfo.shape?this.tilesetInfo.shape[1]:1;this.options.selectRows&&(o=Cx(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight));let a=this.tilesetInfo.tile_size*(i-Math.floor(i));const s=t/this.dimensions[1],l=s*o;let c,u=Math.floor(l);this.options.selectRows&&(this.options.selectRowsAggregationWithRelativeHeight&&(u=this.selectRowsCumWeights.findIndex((e,t)=>s<=e&&(t===this.selectRowsCumWeights.length-1||this.selectRowsCumWeights[t+1]>=s))),c=this.options.selectRows[u]);const h=this.tileToLocalId([n,Math.floor(i)]),p=this.fetchedTiles[h];let f="";if(p){this.tilesetInfo.shape||(a=p.tileData.dense.length*(i-Math.floor(i)));let e=null;if(e=this.tilesetInfo.shape?Array.isArray(c)&&"client"===this.options.selectRowsAggregationMethod?c.map(e=>this.tilesetInfo.shape[0]*e+Math.floor(a)):c&&"client"===this.options.selectRowsAggregationMethod?this.tilesetInfo.shape[0]*c+Math.floor(a):this.tilesetInfo.shape[0]*u+Math.floor(a):p.tileData.dense.length*u+Math.floor(a),Array.isArray(e)){const t=Px(this.options.selectRowsAggregationMode),n=e.map(e=>p.tileData.dense[e]);f=eh(".3f")(t(n)),f+="<br/>",f+=`${e.length}-item ${this.options.selectRowsAggregationMode}`}else f=eh(".3f")(p.tileData.dense[e]),Array.isArray(c)&&(f+="<br/>",f+=`${c.length}-item ${this.options.selectRowsAggregationMode}`)}if(this.tilesetInfo.row_infos){f+="<br/>";let e="";this.options.selectRows&&!Array.isArray(c)?e=this.tilesetInfo.row_infos[c]:u>=0&&u<this.tilesetInfo.row_infos.length&&(e=this.tilesetInfo.row_infos[u]),f+="object"==typeof e?Object.values(e).join("\t"):e}return`${f}`}},{key:"getMouseOverHtml",value:function(e,t){var n;if(!this.tilesetInfo)return"";const r=this.getTilePosAtPosition(e,t);let i="";if(null!=(n=this.options)&&n.heatmapValueScaling&&"categorical"===this.options.heatmapValueScaling&&this.options.colorRange){const n=this.getVisibleData(e,t).split("<br/>"),r=this.options.colorRange[Number.parseInt(n[0],10)-1],o=n[1];if(Number.isNaN(r)||"NaN"===r||typeof r>"u"||"undefined"===r)return"";i=`<svg width="10" height="10" style="position:relative;bottom:1px"><rect width="10" height="10" rx="2" ry="2"\n                 style="fill:${r};stroke:black;stroke-width:2;"></svg> ${o}`}else i+=`Data value: ${this.getVisibleData(e,t)}</br>`,i+=`Zoom level: ${r[0]} tile position: ${r[1]}`;return i}}])}(lre);function koe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ooe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ooe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Poe(e,t,n){return t=Ioe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Coe()?Reflect.construct(t,n||[],Ioe(e).constructor):t.apply(e,n))}function Coe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Coe=function(){return!!e})()}function Aoe(e,t,n,r){var i=Moe(Ioe(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Moe(){return Moe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ioe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Moe.apply(null,arguments)}function Ioe(e){return(Ioe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Roe(e,t){return(Roe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Doe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Poe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Roe(e,t)}(t,e),koe(t,[{key:"initTile",value:function(e){e.barXValues=new Array(e.tileData.dense.length),e.barYValues=new Array(e.tileData.dense.length),e.barWidths=new Array(e.tileData.dense.length),e.barHeights=new Array(e.tileData.dense.length),Aoe(t,"initTile",this)([e])}},{key:"drawTile",value:function(e){if(!e.graphics||!e.tileData||!e.tileData.dense)return;const t=e.graphics,{tileX:n,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos),i=e.tileData.dense;if(0===i.length)return;let o=0;if(this.valueScale=null,"log"===this.options.valueScaling){let e=this.medianVisibleValue;this.medianVisibleValue||(e=this.minValue()),this.valueScale=wh().domain([e,this.maxValue()+e]).range([this.dimensions[1],0]),o=e}else this.valueScale=ph().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(t.clear(),this.drawAxis(this.valueScale),"log"===this.options.valueScaling&&this.valueScale.domain()[1]<0)return void console.warn("Negative values present when using a log scale",this.valueScale.domain());const a=aw(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),s=ph().domain([0,this.tilesetInfo.tile_size]).range([n,n+r]);t.lineStyle(0,a,1);const l=this.options.pointSize?this.options.pointSize:3,c=aw(this.options.pointColor?this.options.pointColor:"red");t.beginFill(c,1),e.drawnAtScale=this._xScale.copy();for(let u=0;u<i.length;u++){const n=this._xScale(s(u)),r=this.valueScale(i[u]+o);if(e.barXValues[u]=n-l/2/this.pMain.scale.x,e.barYValues[u]=r-l/2/this.pMain.scale.y,e.barWidths[u]=l/this.pMain.scale.x,e.barHeights[u]=l/this.pMain.scale.y,s(u)>this.tilesetInfo.max_pos[0])break;t.drawRect(n-l/2/this.pMain.scale.x,r-l/2/this.pMain.scale.y,l/this.pMain.scale.x,l/this.pMain.scale.y)}}},{key:"draw",value:function(){Aoe(t,"draw",this)([]);for(const e of dw(this.fetchedTiles)){const t=(e.drawnAtScale.domain()[1]-e.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),n=this._xScale.domain().map(e.drawnAtScale)[0];e.graphics.scale.x=t,e.graphics.position.x=-n*t}}},{key:"zoomed",value:function(e,n,r,i,o){Aoe(t,"zoomed",this)([e,n])}},{key:"exportSVG",value:function(){let e=null,n=null;[n,e]=Aoe(t,"superSVG",this)([]),n.setAttribute("class","exported-line-track");const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);for(const t of this.visibleAndFetchedTiles())for(let e=0;e<t.barXValues.length;e++){const n=document.createElement("rect"),i=this.options.lineStrokeColor||"blue",o=this.options.pointColor||"red";n.setAttribute("fill",o),n.setAttribute("stroke",i),n.setAttribute("stroke-width",0),n.setAttribute("x",t.barXValues[e]),n.setAttribute("y",t.barYValues[e]),n.setAttribute("height",t.barHeights[e]),n.setAttribute("width",t.barWidths[e]),r.appendChild(n)}const i=document.createElement("g");if(i.setAttribute("id","axis"),n.appendChild(i),i.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),"left"===this.options.axisPositionHorizontal||"top"===this.options.axisPositionVertical){const e=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}else if("right"===this.options.axisPositionHorizontal||"bottom"===this.options.axisPositionVertical){const e=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);i.appendChild(e)}return[n,e]}}])}(Gie);var Noe=function(e,t){var n=e.length,r=0,i=t||!1;(e=e.map(joe))[0]!=e[e.length-1]&&(e=e.concat(e[0]));for(var o=0;o<n;o++)r+=e[o].x*e[o+1].y-e[o].y*e[o+1].x;return i?r/2:Math.abs(r)/2};function joe(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e}const Loe=ks(Noe);function Boe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Foe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Foe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function zoe(e,t,n){return t=Goe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hoe()?Reflect.construct(t,n||[],Goe(e).constructor):t.apply(e,n))}function Hoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hoe=function(){return!!e})()}function Uoe(e,t,n,r){var i=Voe(Goe(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Voe(){return Voe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Goe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Voe.apply(null,arguments)}function Goe(e){return(Goe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xoe(e,t){return(Xoe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Woe=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zoe(this,t,[e,n])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xoe(e,t)}(t,e),Boe(t,[{key:"rerender",value:function(e,n){if(e&&e.projectUid!==this.options.projectUid)return this.options=e,this.fetchedTiles={},void this.refreshTiles();Uoe(t,"rerender",this)([e,n])}},{key:"tileToLocalId",value:function(e){return this.tileToRemoteId(e)}},{key:"tileToRemoteId",value:function(e){let t=`${e.join(".")}`;return this.options.projectUid&&(t=`${t}.ui=${this.options.projectUid}`),t}},{key:"click",value:function(e,t){const n=((e,t,n)=>{const r=Object.values(e.drawnRects),i=[t,n],o=[],a=e.rectGraphics;for(const s of r){const e=s[0].slice(0),t=Yne(e,a.scale.x,a.position.x,a.scale.y,a.position.y),n=Loe(t);if(-1===Pte(t,i)){const e=s[1];e.area=n,o.push(e)}}return o})(this,e,t);return n.length?this.selectRect(n[0].value.uid):this.selectRect(null),{type:"1d-annotations",event:null,payload:n}}},{key:"render",value:function(){Uoe(t,"render",this)([])}}])}(Kne);function Yoe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qoe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qoe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function $oe(e,t,n){return t=Joe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Koe()?Reflect.construct(t,n||[],Joe(e).constructor):t.apply(e,n))}function Koe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Koe=function(){return!!e})()}function Zoe(e,t,n,r){var i=Qoe(Joe(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Qoe(){return Qoe=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Joe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Qoe.apply(null,arguments)}function Joe(e){return(Joe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eae(e,t){return(eae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let tae=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=$oe(this,t,[e,n]);const{pubSub:i}=e;r.drawnAnnotations={},r.drawnAnnoGfx={},r.selectedAnno=null,r.options.minSquareSize=+r.options.minSquareSize;const{publish:o,subscribe:a,unsubscribe:s}=Mm();return r.publish=o,r.subscribe=a,r.unsubscribe=s,r.sT=0,r.annoSelectedBound=r.annoSelected.bind(r),r.pubSubs.push(i.subscribe("annoSelected",r.annoSelectedBound)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eae(e,t)}(t,e),Yoe(t,[{key:"minX",get:function(){var e;return null!=(e=this.tilesetInfo)&&e.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){var e;return null!=(e=this.tilesetInfo)&&e.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){return this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1])||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}},{key:"projection",value:function(e){let[t,n]=e;return[this._xScale(t),this._yScale(n)]}},{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=VW.calculateZoomLevel(this._yScale,this.minY,this.maxY);return RT(MT(e,t),this.maxZoom)}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=VW.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=VW.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);const e=this.zoomLevel,t=[];for(let n=0;n<this.xTiles.length;n++)for(let r=0;r<this.yTiles.length;r++)t.push([e,this.xTiles[n],this.yTiles[r]]);this.setVisibleTiles(t)}},{key:"draw",value:function(){this.drawnAnnotations={},Zoe(t,"draw",this,3)([])}},{key:"drawTile",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.graphics)return;e.graphics.__tile__=e;const r=e.graphics;r.clear(),this.setBorderStyle(r),this.setFill(r),r.alpha=+this.options.rectangleDomainOpacity,e.tileData.length&&e.tileData.filter(e=>!(e.uid in this.drawnAnnotations)||t).forEach(e=>{const[t,i]=this.projection([e.xStart,e.yStart]),[o,a]=this.projection([e.xEnd,e.yEnd]);this.options.exclude&&this.options.exclude.indexOf(e.uid)>=0||this.drawAnnotation(this.prepAnnotation(r,e.uid,t,i,o-t,a-i,e),n)})}},{key:"prepAnnotation",value:function(e,t,n,r,i,o,a){let s;try{s=JSON.parse(a.fields)}catch{}return{graphics:e,id:a.id,uid:t,annotation:{x:n,y:r,width:i,height:o},dataPos:[a.xStart,a.xEnd,a.yStart,a.yEnd],importance:a.importance,info:s}}},{key:"drawAnnotation",value:function(e,t){let{graphics:n,id:r,uid:i,annotation:o,dataPos:a,importance:s,info:l}=e;this.options.minSquareSize&&(o.width<this.options.minSquareSize||o.height<this.options.minSquareSize)&&(o.x=(o.x+o.width)/2,o.y=(o.y+o.height)/2,o.width=this.options.minSquareSize,o.height=this.options.minSquareSize),this.drawnAnnotations[i]=o;const c=[o.x,o.y,o.width,o.height];let u=this.drawnAnnoGfx[i];u||(u=new ow.PIXI.Graphics,this.drawnAnnoGfx[i]=u),-1===n.children.indexOf(u)&&n.addChild(u),this._drawRect(u,c,i),n.interactive=!0,u.interactive=!0,u.buttonMode=!0;const h={id:r,uid:i,dataPos:a,importance:s,info:l,viewPos:[o.x,o.y,o.x+o.width,o.y+o.height]};u.mouseover=()=>this.hover(u,c,i),u.mouseout=()=>this.blur(u,c,i),u.mousedown=()=>this.mouseDown(),u.mouseup=e=>this.mouseUp(u,c,i,e,h),t||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:i,annotationId:r,viewPos:c,dataPos:a,importance:s,info:l})}},{key:"_drawRect",value:function(e,t,n){let r=this.options.rectangleDomainStrokeColor,i=this.options.rectangleDomainStrokeWidth,o=this.options.rectangleDomainStrokeOpacity,a=this.options.rectangleDomainFillColor,s=this.options.rectangleDomainFillOpacity;this.hoveredAnno===n&&(r=this.options.hoverColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.hoverColor,s=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===n&&(r=this.options.selectColor,i=this.options.rectangleDomainStrokeWidth+1||2,o=1,a=this.options.selectColor,s=MT(.33,this.options.rectangleDomainFillOpacity)),e.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(e,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(e,a,0),e.drawRect(...t)),this.setBorderStyle(e,r,i,o),this.setFill(e,a,s),e.drawRect(...t),e.__viewPos__=t}},{key:"context",value:function(e,t,n){return r=>r(e,t,n)}},{key:"click",value:function(e,t,n,r,i){this.select(e,t,n),this.pubSub.publish("app.click",{type:"annotation",event:r,payload:i})}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(e,t,n,r,i){performance.now()-this.sT<=250&&this.click(e,t,n,r,i)}},{key:"hover",value:function(e,t,n){this.hoveredAnno=n,this._drawRect(e,t,n),this.animate()}},{key:"focus",value:function(e,t,n){this._drawRect(e,t,n),this.animate()}},{key:"blur",value:function(e,t,n){this.hoveredAnno=null,this._drawRect(e,t,n),this.animate()}},{key:"select",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null,o=null;this.selectedAnno&&(i=this.selectedAnno.graphics,o=this.selectedAnno.uid),this.selectedAnno={graphics:e,uid:n},this.focus(e,t,n),this.options.onSelect&&!r&&(window[this.options.onSelect](n),this.pubSub.publish("annoSelected",n)),i&&o&&this.blur(i,i.__viewPos__,o)}},{key:"unselect",value:function(){const e=this.selectedAnno.graphics,t=this.selectedAnno.uid;this.selectedAnno=null,this.blur(e,e.__viewPos__,t)}},{key:"annoSelected",value:function(e){if(!this.selectedAnno||this.selectedAnno.uid!==e){this.selectedAnno&&this.unselect();const t=this.drawnAnnoGfx[e];t&&this.select(t,t.__viewPos__,e,!0)}}},{key:"exportSVG",value:function(){let e=null,n=null;Zoe(t,"exportSVG",this,1)?[n,e]=Zoe(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");return r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r),this.visibleAndFetchedTiles().filter(e=>{var t;return null==(t=e.tileData)?void 0:t.length}).map(e=>({graphics:e.graphics,td:e.tileData})).forEach(e=>{let{td:t,graphics:n}=e;const i=document.createElement("g");if(i.setAttribute("transform",`translate(${n.position.x},${n.position.y})scale(${n.scale.x},${n.scale.y})`),r.appendChild(i),t.uid in this.drawnAnnotations){const e=this.drawnAnnotations[t.uid],n=document.createElement("rect");n.setAttribute("x",e.x),n.setAttribute("y",e.y),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.setAttribute("fill",this.options.fillColor||"grey"),n.setAttribute("opacity",.3),n.style.stroke=this.options.fillColor||"grey",n.style.strokeWidth="1px",i.appendChild(n)}}),[n,n]}},{key:"setBorderStyle",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainStrokeColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainStrokeWidth,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.rectangleDomainStrokeOpacity;e.lineStyle(typeof n<"u"?n:1,aw(t||"black"),typeof r<"u"?r:1)}},{key:"setFill",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.rectangleDomainFillColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.rectangleDomainFillOpacity;e.beginFill(aw(t||"grey"),typeof n<"u"?n:.4)}},{key:"setPosition",value:function(e){Zoe(t,"setPosition",this,3)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}}])}(yne);function nae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function iae(e,t,n){return t=lae(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oae()?Reflect.construct(t,n||[],lae(e).constructor):t.apply(e,n))}function oae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oae=function(){return!!e})()}function aae(e,t,n,r){var i=sae(lae(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function sae(){return sae=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=lae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},sae.apply(null,arguments)}function lae(e){return(lae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cae(e,t){return(cae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uae(e,t,n,r,i,o,a,s,l,c){const u=c?e._xScale(n.yStart):e._xScale(n.xStart),h=c?e._xScale(n.yEnd):e._xScale(n.xEnd),p=c?e._yScale(n.xStart):e._yScale(n.yStart),f=c?e._yScale(n.xEnd):e._yScale(n.yEnd),d=n.uid+c,m=h-u,g=f-p;let y={x:u,y:p,width:m,height:g};r&&(m<r||g<r)&&(y={x:u-r/2,y:p-r/2,width:r,height:r}),e.drawnRects[d]=y;const v=y.x+y.width,b=y.y+y.height;(y.x>i&&y.x<o||v>i&&v<o||y.y>a&&y.y<s||b>a&&b<s)&&(y.width>l||y.height>l)&&(t.drawRect(y.x,y.y,y.width,y.height),e.publish("annotationDrawn",{trackUuid:e.uuid,annotationUuid:d,viewPos:[y.x,y.y,y.width,y.height],dataPos:[n.xStart,n.xEnd,n.yStart,n.yEnd],importance:n.importance,info:{patternType:e.options.patternType}}))}let hae=function(e){function t(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(e=iae(this,t,[...r])).drawnRects={};const{publish:o,subscribe:a,unsubscribe:s}=Mm();return e.publish=o,e.subscribe=a,e.unsubscribe=s,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cae(e,t)}(t,e),nae(t,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let n=Math.max(e,t);return n=Math.min(n,this.maxZoom),n}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.remoteId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=VW.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=VW.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},aae(t,"draw",this,3)([])}},{key:"drawTile",value:function(e){const t=e.graphics;if(!t)return;t.clear();const n=aw(this.options.rectangleDomainStrokeColor||"black"),r=aw(this.options.rectangleDomainFillColor||"grey");t.lineStyle(typeof this.options.rectangleDomainStrokeWidth<"u"?this.options.rectangleDomainStrokeWidth:1,n,typeof this.options.rectangleDomainStrokeOpacity<"u"?this.options.rectangleDomainStrokeOpacity:1),t.beginFill(r,typeof this.options.rectangleDomainFillOpacity<"u"?this.options.rectangleDomainFillOpacity:.4),t.alpha=this.options.rectangleDomainOpacity||.5;const i=this.options.minSquareSize&&"none"!==this.options.minSquareSize?+this.options.minSquareSize:0,o=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,a=this._xScale.range()[0],s=this._xScale.range()[1],l=this._yScale.range()[0],c=this._yScale.range()[1];e.tileData.length&&e.tileData.filter(e=>!(e.uid in this.drawnRects)).forEach(e=>{uae(this,t,e,i,a,s,l,c,o,"yes"===this.options.flipDiagonal),this.options.flipDiagonal&&"copy"===this.options.flipDiagonal&&uae(this,t,e,i,a,s,l,c,o,!0)})}},{key:"exportSVG",value:function(){let e=null,n=null;aae(t,"exportSVG",this,1)?[n,e]=aae(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);for(const t of[!0,!1])for(const e of this.visibleAndFetchedTiles())!e.tileData||!e.tileData.length||e.tileData.forEach(n=>{const i=n.uid+t,o=document.createElement("g");if(o.setAttribute("transform",`translate(${e.graphics.position.x},${e.graphics.position.y})scale(${e.graphics.scale.x},${e.graphics.scale.y})`),r.appendChild(o),i in this.drawnRects){const e=this.drawnRects[i],t=document.createElement("rect");t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("fill",this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey"),t.setAttribute("opacity",.3),t.style.stroke="black",t.style.strokeWidth="1px",o.appendChild(t)}});return[n,n]}},{key:"setPosition",value:function(e){aae(t,"setPosition",this,3)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale().domain()[0]===e.domain()[0]&&this.xScale().domain()[1]===e.domain()[1]&&this.yScale().domain()[0]===t.domain()[0]&&this.yScale().domain()[1]===t.domain()[1]||(this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw())}},{key:"leftTrackDraw",value:function(){this.draw()}}])}(yne);function pae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function dae(e,t,n){return t=gae(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mae()?Reflect.construct(t,n||[],gae(e).constructor):t.apply(e,n))}function mae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mae=function(){return!!e})()}function gae(e){return(gae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yae(e,t){return(yae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let vae=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dae(this,t,[e,n])).seen=new Set,r.pMain=r.pMobile,r.rows=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yae(e,t)}(t,e),pae(t,[{key:"uid",value:function(e){return e[e.length-2]}},{key:"segmentOverlap",value:function(e,t){}},{key:"drawAll",value:function(e){this.pMain.clear();const t=new Set,n=wx(e.map(e=>t.has(this.uid(e))?null:(t.add(this.uid(e)),{from:+e[1],to:+e[2],type:e[4],uid:this.uid(e)})).filter(e=>e));this.rows=n,this.draw()}},{key:"draw",value:function(){const e=this.rows;if(!e)return;const t=nc().range([0,this.dimensions[1]]).padding(.1).domain(Ul(0,this.maxRows())),n=this.pMain;n.clear(),n.lineStyle(1,255,0),n.beginFill(16740363,.8);for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++){const o=e[r][i],a=this._refXScale(o.from),s=this._refXScale(o.to),l=t(r),c=s-a,u=l+t.bandwidth()-l;n.drawRect(a,l,c,u)}}},{key:"allTilesLoaded",value:function(){const e=this.visibleAndFetchedIds().map(e=>this.fetchedTiles[e].tileData.discrete),t=[].concat(...e);this.drawAll(t)}},{key:"initTile",value:function(e){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){e.tileData.discrete.forEach(e=>{const t=e[e.length-2];this.seen.has(t)&&this.seen.delete(t)})}},{key:"drawTile",value:function(e){}}])}(Nne);function bae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_ae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function wae(e,t,n){return t=Sae(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tae()?Reflect.construct(t,n||[],Sae(e).constructor):t.apply(e,n))}function Tae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tae=function(){return!!e})()}function xae(e,t,n,r){var i=Eae(Sae(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Eae(){return Eae=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Sae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Eae.apply(null,arguments)}function Sae(e){return(Sae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kae(e,t){return(kae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Oae="Arial",Pae="outside",Cae=aw("#ffffff"),Aae=2*(20/3)/3,Mae="blue",Iae="red",Rae=(e,t,n)=>{"filler"!==n.type&&t.pubSub.publish("app.click",{type:"gene-annotation",event:e,payload:n})},Dae=(e,t)=>{const n=e.concat(t),r=n.map(e=>[e.xStart,1,e.xEnd,1]);gte(r,(e,t)=>{let r=null,i=null;if("filler"===n[e].type?r=n[e]:i=n[e],"filler"===n[t].type){if(r)return;r=n[t]}else{if(!r)return;i=n[t]}r.xStart>=i.xStart&&r.xEnd<=i.xEnd&&(r.hide=!0)})};function Nae(e,t,n,r,i,o,a,s,l){const c=s-l/2;e.forEach(e=>{const r=new ow.PIXI.Graphics;n.rectGraphics.addChild(r),r.beginFill(o,.1),r.lineStyle(0,o);const a=[i(e.xStart)-0,c,i(e.xEnd)+0,c,i(e.xEnd)+0,c+l,i(e.xStart)-0,c+l,i(e.xStart)-0,c];r.interactive=!0,r.buttonMode=!0,r.mouseup=n=>Rae(n,t,e),r.drawPolygon(a),n.allRects.push([a,e.strand,e])})}function jae(e,t,n,r,i,o,a,s,l){e.forEach(e=>{const r=e.fields,i=+e.chrOffset,c=r[12],u=r[13],h=new ow.PIXI.Graphics;n.rectGraphics.addChild(h),h.beginFill(o,a),h.interactive=!0,h.buttonMode=!0,h.mouseup=n=>Rae(n,t,e),n.allRects=n.allRects.concat(function(e,t,n,r,i,o,a,s,l,c){const u=s-l/2,h=i.split(",").map(e=>+e+a),p=o.split(",").map(e=>+e+a),f=e._xScale(n),d=e._xScale(r),m=d-f,g=s,y=[];let v=[f,g-1,f+m,g-1,f+m,g+1,f,g+1];t.drawPolygon(v),y.push(v);const b=2*l;for(let _=Math.max(e.position[0],f)+b;_<Math.min(e.position[0]+e.dimensions[0],f+m);_+=b)v="+"===c?[_,g-Aae/2,_+Aae/2,g,_,g+Aae/2]:[_,g-Aae/2,_-Aae/2,g,_,g+Aae/2],y.push(v),t.drawPolygon(v);for(let _=0;_<h.length;_++){const n=h[_],r=p[_],i=e._xScale(n),o=Math.max(1,e._xScale(r)-e._xScale(n));let a=f,s=d;const m=e.geneRectHeight/2;let g=null;"+"===c?(s=d-m,g=[Math.min(i,s),u,Math.min(i+o,s),u,Math.min(i+o,s),u+l,Math.min(i,s),u+l,Math.min(i,s),u]):(a=f+m,g=[Math.max(i,a),u,Math.max(i+o,a),u,Math.max(i+o,a),u+l,Math.max(i,a),u+l,Math.max(i,a),u]),y.push(g),t.drawPolygon(g)}return y}(t,h,e.xStart,e.xEnd,c,u,i,s,l,e.strand||e.fields[5]).map(t=>[t,e.strand,e]))})}function Lae(e,t,n,r,i,o,a,s,l){(function(e,t,n,r,i,o,a,s,l){const c=s-l/2;e.forEach(e=>{const r=t._xScale(e.xStart),i=t._xScale(e.xEnd),s=new ow.PIXI.Graphics;n.rectGraphics.addChild(s),s.beginFill(o,a),s.interactive=!0,s.buttonMode=!0,s.mouseup=n=>Rae(n,t,e);const l=t.geneRectHeight/2;let u=[];if("+"===e.strand||"+"===e.fields[5]){const e=Math.max(r,i-l);u=[e,c,e+l,c+t.geneRectHeight/2,e,c+t.geneRectHeight]}else{const e=Math.min(i,r+l);u=[e,c,e-l,c+t.geneRectHeight/2,e,c+t.geneRectHeight]}s.drawPolygon(u),n.allRects.push([u,e.strand,e])})})(e,t,n,0,0,o,a,s,l),jae(e,t,n,0,0,o,a,s,l)}let Bae=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=wae(this,t,[e,n]);const{animate:i}=e;return r.animate=i,r.options=n,r.fontSize=+r.options.fontSize||11,r.geneLabelPos=r.options.geneLabelPosition||Pae,r.geneRectHeight=+r.options.geneAnnotationHeight||10,r.geneRectHeight-=2,r.geneStrandSpacing=+r.options.geneStrandSpacing||4,r.geneStrandHSpacing=r.geneStrandSpacing/2,r.geneRectHHeight=r.geneRectHeight/2,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kae(e,t)}(t,e),bae(t,[{key:"initTile",value:function(e){(function(e,t,n){const{flipText:r,fontSize:i,fontFamily:o,plusStrandColor:a,minusStrandColor:s,maxGeneEntries:l,maxFillerEntries:c,maxTexts:u}=n;if(t.texts={},t.rectGraphics=new ow.PIXI.Graphics,t.textBgGraphics=new ow.PIXI.Graphics,t.textGraphics=new ow.PIXI.Graphics,t.rectMaskGraphics=new ow.PIXI.Graphics,t.graphics.addChild(t.rectGraphics),t.graphics.addChild(t.textBgGraphics),t.graphics.addChild(t.textGraphics),t.graphics.addChild(t.rectMaskGraphics),t.rectGraphics.mask=t.rectMaskGraphics,!t.tileData.sort)return;t.tileData.sort((e,t)=>t.importance-e.importance);const h=t.tileData.filter(e=>"filler"!==e.type).slice(0,l),p=t.tileData.filter(e=>"filler"===e.type).slice(0,c);t.tileData=h.concat(p),t.tileData.forEach((n,l)=>{if("filler"===n.type)return;const c=n.fields,h=c[3],p=e.geneId(c,n.type),f=n.strand||c[5];n.strand=n.strand||f;let d=a||Mae;if("-"===f&&(d=s||Iae),t.textWidths={},t.textHeights={},l>=u)return;const m=new ow.PIXI.Text(h,{fontSize:`${i}px`,fontFamily:o,fill:aw(d)});m.interactive=!0,r&&(m.scale.x=-1),m.anchor.x=.5,m.anchor.y=1,t.texts[p]=m,t.texts[p].strand=f,t.textGraphics.addChild(m)}),t.initialized=!0})(this,e,{flipText:this.flipText,fontSize:this.fontSize,fontFamily:Oae,plusStrandColor:this.options.plusStrandColor,minusStrandColor:this.options.minusStrandColor,maxGeneEntries:50,maxFillerEntries:5e3,maxTexts:20}),this.renderTile(e)}},{key:"destroyTile",value:function(e){e.rectGraphics.destroy(),e.rectMaskGraphics.destroy(),e.textGraphics.destroy(),e.textBgGraphics.destroy(),e.graphics.destroy()}},{key:"rerender",value:function(e,n){const r=JSON.stringify(e);!n&&r===this.prevOptions||(xae(t,"rerender",this,3)([e,n]),this.fontSize=+this.options.fontSize||11,this.geneLabelPos=this.options.geneLabelPosition||Pae,this.geneRectHeight=+this.options.geneAnnotationHeight||10,this.geneStrandHSpacing=this.geneStrandSpacing/2,this.geneRectHHeight=this.geneRectHeight/2,this.prevOptions=r,this.visibleAndFetchedTiles().forEach(e=>{this.renderTile(e)}))}},{key:"drawTile",value:function(){}},{key:"geneId",value:function(e,t){return`${t}_${e[0]}_${e[1]}_${e[2]}_${e[3]}`}},{key:"renderTile",value:function(e){if(!e.initialized)return;e.allRects=[],e.drawnAtScale=this._xScale.copy(),e.rectGraphics.removeChildren(),e.rectGraphics.clear(),e.textBgGraphics.clear();const t={};t["+"]=aw(this.options.plusStrandColor||Mae),t["-"]=aw(this.options.minusStrandColor||Iae);let n=e.tileData.filter(e=>"filler"===e.type&&"+"===e.strand),r=e.tileData.filter(e=>"filler"===e.type&&"-"===e.strand);const i=e.tileData.filter(e=>"filler"!==e.type&&("+"===e.strand||"+"===e.fields[5])),o=e.tileData.filter(e=>"filler"!==e.type&&("-"===e.strand||"-"===e.fields[5]));Dae(i,n),Dae(o,r),n=n.filter(e=>!e.hide),r=r.filter(e=>!e.hide);const a=this.dimensions[1]/2,s=a-this.geneRectHeight/2-this.geneStrandSpacing/2,l=a+this.geneRectHeight/2+this.geneStrandSpacing/2,c=[this,e,e.rectGraphics,this._xScale,t["+"],.3,s,this.geneRectHeight],u=[this,e,e.rectGraphics,this._xScale,t["-"],.3,l,this.geneRectHeight];Nae(n,...c),Nae(r,...u),c[5]=.3,u[5]=.3,Lae(i,...c),Lae(o,...u),function(e,t){const{tileX:n,tileWidth:r}=mW.getTilePosAndDimensions(e.tilesetInfo,t.tileId);t.rectMaskGraphics.clear();const i=Math.floor(Math.random()*16**6);t.rectMaskGraphics.beginFill(i,.3);const o=e._xScale(n),a=e._xScale(n+r)-e._xScale(n),s=e.dimensions[1];t.rectMaskGraphics.drawRect(o,0,a,s)}(this,e),mW.stretchRects(this,[e=>e.rectGraphics,e=>e.rectMaskGraphics]);for(const h of Object.values(e.texts))h.style={fontSize:`${this.fontSize}px`,FONT_FAMILY:Oae,fill:aw("-"===h.strand?this.options.minusStrandColor||Iae:this.options.plusStrandColor||Mae)}}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let t=Math.min(e,this.maxZoom);return t=Math.max(t,0),t}},{key:"draw",value:function(){xae(t,"draw",this,3)([]),this.allTexts=[],this.allBoxes=[];const e=[];this.geneAreaHeight=this.geneRectHeight;const n=this.fontSize/2;mW.stretchRects(this,[e=>e.rectGraphics,e=>e.rectMaskGraphics]),Object.values(this.fetchedTiles).filter(e=>e.drawnAtScale).forEach(t=>{t.textBgGraphics.clear(),t.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor<"u"?aw(this.options.labelBackgroundColor):Cae);const r=this.parentInFetched(t);t.initialized&&t.tileData.forEach(i=>{if(!t.texts||"filler"===i.type)return;const o=i.fields,a=o[3],s=this.geneId(o,i.type),l=t.texts[s];if(!l)return;const c=+i.chrOffset,u=(+o[1]+c+(+o[2]+c))/2;let h=this.dimensions[1]/2;const p=(this.geneAreaHeight-this.fontSize)/2;if("+"===o[5]?h-="inside"===this.geneLabelPos?p+this.geneStrandSpacing-2:this.fontSize/2+this.geneAreaHeight-2:h+="inside"===this.geneLabelPos?this.fontSize+this.geneStrandSpacing/2+p+1:1.5*this.fontSize+this.geneAreaHeight+2,l.position.x=this._xScale(u),l.position.y=h,!t.textWidths[s]){const e=l.getBounds().width,n=l.getBounds().height;t.textHeights[s]=n,t.textWidths[s]=e}if(r)l.visible=!1;else{l.visible=!0;const r=2;this.flipText?this.allBoxes.push([l.position.x-t.textHeights[s]/2-r,h-n-1,l.position.x+t.textHeights[s]/2+r,h+n-1,a]):this.allBoxes.push([l.position.x-t.textWidths[s]/2-r,h-n-1,l.position.x+t.textWidths[s]/2+r,h+n-1,a]),this.allTexts.push({importance:+o[4],text:l,caption:a,strand:o[5]}),e.push(t.textBgGraphics)}})}),this.hideOverlaps(this.allBoxes,this.allTexts),this.renderTextBg(this.allBoxes,this.allTexts,e)}},{key:"renderTextBg",value:function(e,t,n){t.forEach((t,r)=>{if(t.text.visible&&e[r]&&n[r]){const[t,i,o,a]=e[r],s=o-t,l=a-i;n[r].drawRect(t-s/2,i-l/2,s,l)}})}},{key:"hideOverlaps",value:function(e,t){gte(e,(e,n)=>{t[e].importance>t[n].importance?t[n].text.visible=!1:t[e].text.visible=!1})}},{key:"setPosition",value:function(e){xae(t,"setPosition",this,3)([e]),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(e){xae(t,"setDimensions",this,3)([e]),this.halfRectHHeight=this.dimensions[1]/2,this.visibleAndFetchedTiles().forEach(e=>{this.renderTile(e)})}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}},{key:"getMouseOverHtml",value:function(e,t){if(!this.tilesetInfo)return"";const n=[e,t];for(const r of this.visibleAndFetchedTiles())for(let e=0;e<r.allRects.length;e++){if("filler"===r.allRects[e][2].type)continue;const t=r.allRects[e][0].slice(0),i=[];for(;t.length;){const e=t.splice(0,2);e[0]=e[0]*r.rectGraphics.scale.x+r.rectGraphics.position.x,e[1]=e[1]*r.rectGraphics.scale.y+r.rectGraphics.position.y,i.push(e)}if(-1===Pte(i,n)){const t=r.allRects[e][2];return`\n            <div>\n              <b>${t.fields[3]}</b><br>\n              <b>Position:</b> ${t.fields[0]}:${t.fields[1]}-${t.fields[2]}<br>\n              <b>Strand:</b> ${t.fields[5]}\n            </div>\n          `}}return""}},{key:"exportSVG",value:function(){let e=null,n=null;xae(t,"exportSVG",this,1)?[n,e]=xae(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");return r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r),this.visibleAndFetchedTiles().filter(e=>e.allRects).forEach(e=>{const t=document.createElement("g");t.setAttribute("transform",`translate(${e.rectGraphics.position.x},\n          ${e.rectGraphics.position.y})\n          scale(${e.rectGraphics.scale.x},\n          ${e.rectGraphics.scale.y})`),e.allRects.forEach(e=>{const n=document.createElement("path"),r=e[0];let i=`M ${r[0]} ${r[1]}`;for(let t=2;t<r.length;t+=2)i+=` L ${r[t]} ${r[t+1]}`;n.setAttribute("d",i),"+"===e[1]?n.setAttribute("fill",this.options.plusStrandColor):n.setAttribute("fill",this.options.minusStrandColor),n.setAttribute("opacity","0.3"),t.appendChild(n)}),r.appendChild(t)}),this.allTexts.filter(e=>e.text.visible).forEach(e=>{const t=document.createElement("g"),n=document.createElement("text");n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",Oae),n.setAttribute("font-size",`${this.fontSize}px`),n.setAttribute("dy","-.2em"),t.setAttribute("transform",`scale(${e.text.scale.x},1)`),"+"===e.strand?n.setAttribute("fill",this.options.plusStrandColor):n.setAttribute("fill",this.options.minusStrandColor),n.innerHTML=e.text.text,t.appendChild(n),t.setAttribute("transform",`translate(${e.text.x},${e.text.y})scale(${e.text.scale.x},1)`),r.appendChild(t)}),[n,n]}}])}(Nne);function Fae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}let Hae=function(){return Fae(function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.scene=t.scene,this.originalTrack=t,this.pBase=new ow.PIXI.Graphics,this.scene.removeChild(t.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new ow.PIXI.Graphics,this.moveToOrigin.addChild(t.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,t.isLeftModified=!0,t.flipText=!0,this.svgOutput=null,t.gBase&&t.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                             rotate(90)\n                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))},[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(e){this.dimensions=e;const t=[e[1],e[0]];this.originalTrack.setDimensions(t)}},{key:"setPosition",value:function(e){this.position=e,this.originalTrack.setPosition(e),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                                 rotate(90)\n                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}},{key:"refXScale",value:function(e){return arguments.length?(this.originalTrack._refXScale=e,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(e){return arguments.length?(this.originalTrack._refYScale=e,this):this.originalTrack._refXScale}},{key:"xScale",value:function(e){return arguments.length?(this.originalTrack._yScale=e,this):this.originalTrack._xScale}},{key:"yScale",value:function(e){return arguments.length?(this.originalTrack._xScale=e,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(e,t){return this.originalTrack.getMouseOverHtml(t,e)}},{key:"clickOutside",value:function(){this.originalTrack.clickOutside()}},{key:"click",value:function(){this.originalTrack.click(...arguments)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.xScale(e),this.yScale(t),this.originalTrack.leftTrackZoomed)return this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackZoomed(e,t,n,r,i),void this.originalTrack.draw();const o=this.originalTrack._xScale(0)-n*this.originalTrack._refXScale(0);if(this.originalTrack.pMobile.position.x=o+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=n,this.originalTrack.pMobile.scale.y=n,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-n,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.leftTrackDraw)return this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),void this.originalTrack.leftTrackDraw();this.originalTrack.zoomed(this.xScale(),this.yScale())}},{key:"zoomedY",value:function(e,t){this.originalTrack.zoomedY(e,t)}},{key:"movedY",value:function(e){this.originalTrack.movedY(e)}},{key:"refScalesChanged",value:function(e,t){this.originalTrack.refScalesChanged(t,e)}},{key:"rerender",value:function(e){this.originalTrack.rerender(e)}},{key:"exportSVG",value:function(){const e=document.createElement("g");if(e.setAttribute("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})\n                             rotate(90)\n                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.exportSVG){const t=document.createElement("g");t.setAttribute("transform",`translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`),t.appendChild(this.originalTrack.exportSVG()[0]),e.appendChild(t)}return[e,e]}},{key:"respondsToPosition",value:function(e,t){return e>=this.position[0]&&e<=this.dimensions[0]+this.position[0]&&t>=this.position[1]&&t<=this.dimensions[1]+this.position[1]}}])}();function Uae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Gae(e,t,n){return t=qae(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xae()?Reflect.construct(t,n||[],qae(e).constructor):t.apply(e,n))}function Xae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xae=function(){return!!e})()}function Wae(e,t,n,r){var i=Yae(qae(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Yae(){return Yae=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yae.apply(null,arguments)}function qae(e){return(qae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $ae(e,t){return($ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Kae=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Gae(this,t,[e,n])).drawnRects=new Set,r.pMain=r.pMobile,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$ae(e,t)}(t,e),Uae(t,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){var e;const t=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),n=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let r=Math.max(t,n);return r=Math.min(r,this.maxZoom),null!=(e=this.options)&&e.maxZoom&&(this.options.maxZoom>=0?r=Math.min(this.options.maxZoom,r):console.error("Invalid maxZoom on track:",this)),r}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const e=this._xScale.copy();e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=VW.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=VW.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const t=this.xTiles,n=this.yTiles,r=this.zoomLevel,i=this.tilesetInfo.max_width/2**r,o=[];for(let a=0;a<t.length;a++)for(let e=a;e<n.length;e++){if((e-a-2)*(this._xScale(i)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const s=[r,t[a],n[e]];s.mirrored=!1,o.push(s)}this.setVisibleTiles(o)}},{key:"initTile",value:function(e){Wae(t,"initTile",this)([e]),this.drawTile(e)}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),Wae(t,"draw",this)([])}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear();const n=aw(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),r=aw(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(t.lineStyle(1/this.pMain.scale.x,n,1),t.beginFill(r,.4),t.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,e.tileData.sort)for(const i of e.tileData){const e=this._refXScale(i.xStart),n=this._refXScale(i.xEnd),r=this._refYScale(i.yStart),o=this._refYScale(i.yEnd),a=i.uid;this.drawnRects.has(a)||(this.drawnRects.add(a),t.drawRect(e,r,n-e,o-r),t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0)}}},{key:"setPosition",value:function(e){Wae(t,"setPosition",this)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(e,n){Wae(t,"refScalesChanged",this)([e,n]);for(const t in this.fetchedTiles){const e=this.fetchedTiles[t];if(e.sprite){const t=e.graphics;t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0}}}},{key:"zoomed",value:function(e,n,r,i,o){Wae(t,"zoomed",this)([e,n,r,i,o]),this.pMain.position.x=i,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=r,this.pMain.scale.y=r,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-r,this.pMain.position.y=this.position[1]),this.draw()}},{key:"leftTrackDraw",value:function(){this.draw()}}])}(yne);function Zae(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qae(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qae(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Jae(e,t,n){return t=rse(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ese()?Reflect.construct(t,n||[],rse(e).constructor):t.apply(e,n))}function ese(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ese=function(){return!!e})()}function tse(e,t,n,r){var i=nse(rse(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function nse(){return nse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=rse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nse.apply(null,arguments)}function rse(e){return(rse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ise(e,t){return(ise=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let ose=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Jae(this,t,[e,n]);const{chromInfoPath:i,pubSub:o}=e;return r.pubSub=o,r.rects={},WW(i,e=>{r.chromInfo=e,r.draw()},r.pubSub),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ise(e,t)}(t,e),Zae(t,[{key:"draw",value:function(){if(!this.chromInfo)return;const e=this.options.minRectWidth?this.options.minRectWidth:10,n=this.options.minRectWidth?this.options.minRectHeight:10;tse(t,"draw",this)([]);const r=this.pMain;r.clear();const i=performance.now();this.options.regions.forEach(t=>{const o=t.slice(0,6).join("-");this.rects[o]||(this.rects[o]={graphics:new ow.PIXI.Graphics},r.addChild(this.rects[o].graphics)),this.rects[o].timeStamp=i;const a=Tc(t[6]);let s=Tc(t[7]);s||(s=a);const l=ow.PIXI.utils.rgb2hex([a.r/255,a.g/255,a.b/255]),c=ow.PIXI.utils.rgb2hex([s.r/255,s.g/255,s.b/255]);r.lineStyle(1,c,s.opacity),r.beginFill(l,a.opacity);let u=this._xScale(this.chromInfo.chrPositions[t[0]].pos+ +t[1]);const h=this._xScale(this.chromInfo.chrPositions[t[0]].pos+ +t[2]);let p=this._yScale(this.chromInfo.chrPositions[t[3]].pos+ +t[4]);const f=this._yScale(this.chromInfo.chrPositions[t[3]].pos+ +t[5]);let d=h-u,m=f-p;const g=typeof t[8]<"u"?t[8]:e,y=typeof t[9]<"u"?t[9]:n;d<g&&(u=(u+h)/2-g/2,d=g),m<y&&(p=(p+f)/2-y/2,m=y),r.drawRect(u,p,d,m),this.rects[o].graphics.clear(),this.rects[o].graphics.interactive=!0,this.rects[o].graphics.buttonMode=!0,this.rects[o].graphics.hitArea=new ow.PIXI.Rectangle(u,p,d,m),this.rects[o].graphics.mousedown=()=>{this.rects[o].mouseDownTime=performance.now()},this.rects[o].graphics.mouseup=e=>{performance.now()-this.rects[o].mouseDownTime<300&&this.pubSub.publish("app.click",{type:"annotation",event:e,payload:t})}})}},{key:"setPosition",value:function(e){tse(t,"setPosition",this)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}])}(zte);function ase(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sse(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sse(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function lse(e,t,n){return t=hse(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,cse()?Reflect.construct(t,n||[],hse(e).constructor):t.apply(e,n))}function cse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cse=function(){return!!e})()}function use(){return use=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},use.apply(null,arguments)}function hse(e){return(hse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pse(e,t){return(pse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let fse=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=lse(this,t,[e,n]);const{dataConfig:i,animate:o,pubSub:a}=e;r.searchField=null,r.chromInfo=null,r.animate=o;return WW(`${i.server}/chrom-sizes/?id=${i.tilesetUid}`,e=>{r.chromInfo=e,r.searchField=new WY(r.chromInfo),r.draw(),r.texts=[];for(let t=0;t<r.chromInfo.cumPositions.length;t++){const e=[];for(let n=0;n<r.chromInfo.cumPositions.length;n++){const i=`${r.chromInfo.cumPositions[t].chr}/${r.chromInfo.cumPositions[n].chr}`,o=new ow.PIXI.Text(i,{fontSize:"14px",fontFamily:"Arial",fill:"red"});o.anchor.x=.5,o.anchor.y=.5,o.visible=!1,o.hashValue=Math.random(),e.push(o),r.pMain.addChild(o)}r.texts.push(e)}r.draw(),r.animate()},a),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pse(e,t)}(t,e),ase(t,[{key:"draw",value:function(){const e=[];if(!this.texts||!this.searchField)return;const t=Z_(this._xScale.domain()[0],this.chromInfo),n=Z_(this._xScale.domain()[1],this.chromInfo),r=Z_(this._yScale.domain()[0],this.chromInfo),i=Z_(this._yScale.domain()[1],this.chromInfo);for(let o=0;o<this.texts.length;o++)for(let e=0;e<this.texts.length;e++)this.texts[o][e].visible=!1;for(let o=t[3];o<=n[3];o++)for(let t=r[3];t<=i[3];t++){const n=this.chromInfo.cumPositions[o],r=this.chromInfo.cumPositions[t],i=n.pos+this.chromInfo.chromLengths[n.chr]/2,a=r.pos+this.chromInfo.chromLengths[r.chr]/2,s=this._xScale(i),l=this._yScale(a),c=this.texts[o][t];c.x=s,c.y=l,c.updateTransform();const u=c.getBounds(),h=u.width/2,p=u.height/2;s+h>this.dimensions[0]?c.x-=s+h-this.dimensions[0]:s-h<0&&(c.x-=s-h),l+p>this.dimensions[1]?c.y-=l+p-this.dimensions[1]:l-p<0&&(c.y-=l-p),c.visible=!0,e.push({importance:this.texts[o][t].hashValue,text:this.texts[o][t],caption:null})}this.hideOverlaps(e)}},{key:"hideOverlaps",value:function(e){let t=[];t=e.map(e=>{const t=e.text;t.updateTransform();const n=t.getBounds();return[n.x,n.y,n.x+n.width,n.y+n.height]}),gte(t,(t,n)=>{e[t].importance>e[n].importance?e[n].text.visible=0:e[t].text.visible=0})}},{key:"setPosition",value:function(e){(function(e,t,n){var r=use(hse(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r})(t,"setPosition",this)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}}])}(zte);function dse(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mse(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mse(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function gse(e,t,n){return t=_se(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yse()?Reflect.construct(t,n||[],_se(e).constructor):t.apply(e,n))}function yse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yse=function(){return!!e})()}function vse(e,t,n,r){var i=bse(_se(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function bse(){return bse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_se(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},bse.apply(null,arguments)}function _se(e){return(_se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wse(e,t){return(wse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Tse=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=gse(this,t,[e,n]);const{chromInfoPath:i,dataConfig:o,animate:a,pubSub:s,orientation:l="2d",isOverlay:c=!1}=e;return r.chromInfo=null,r.animate=a,r.orientation=l,r.isOverlay=c,i&&WW(i,e=>{r.chromInfo=e,r.tilesetInfoReceived()},r.pubSub),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wse(e,t)}(t,e),dse(t,[{key:"tilesetInfoReceived",value:function(){this.texts=[],this.lineGraphics=new ow.PIXI.Graphics,this.lineGraphics1dH=new ow.PIXI.Graphics,this.lineGraphics1dV=new ow.PIXI.Graphics,this.lineGraphics2d=new ow.PIXI.Graphics,this.mask1dH=new ow.PIXI.Graphics,this.mask1dV=new ow.PIXI.Graphics,this.mask2d=new ow.PIXI.Graphics,this.lineGraphics.addChild(this.lineGraphics1dH),this.lineGraphics1dH.addChild(this.mask1dH),this.lineGraphics.addChild(this.lineGraphics1dV),this.lineGraphics1dV.addChild(this.mask1dV),this.lineGraphics.addChild(this.lineGraphics2d),this.lineGraphics2d.addChild(this.mask2d),this.pMain.addChild(this.lineGraphics),this.draw(),this.animate()}},{key:"calculateVisibleTiles",value:function(){return[]}},{key:"drawLines",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.orientation,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.lineGraphics;this.isOverlay&&"1d-horizontal"===e&&(r=this.lineGraphics1dH),this.isOverlay&&"1d-vertical"===e&&(r=this.lineGraphics1dV),this.isOverlay&&"2d"===e&&(r=this.lineGraphics2d);const i=aw(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),o=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;r.lineStyle(o,i,1),("2d"===e||"1d-horizontal"===e)&&(r.moveTo(this._xScale(0)+t,n),r.lineTo(this._xScale(0)+t,this.dimensions[1]+n)),("2d"===e||"1d-vertical"===e)&&(r.moveTo(t,this._yScale(0)+n),r.lineTo(this.dimensions[0]+t,this._yScale(0)+n));for(let a=0;a<this.chromInfo.cumPositions.length;a++){const i=this.chromInfo.cumPositions[a],o=i.pos+ +this.chromInfo.chromLengths[i.chr]+1;("2d"===e||"1d-horizontal"===e)&&(r.moveTo(this._xScale(o)+t,n),r.lineTo(this._xScale(o)+t,this.dimensions[1]+n)),("2d"===e||"1d-vertical"===e)&&(r.moveTo(t,this._yScale(o)+n),r.lineTo(this.dimensions[0]+t,this._yScale(o)+n))}}},{key:"draw",value:function(){if(this.texts&&this.tilesetInfo)if(this.lineGraphics.clear(),this.isOverlay){this.lineGraphics1dH.clear(),this.lineGraphics1dV.clear(),this.lineGraphics2d.clear(),this.mask1dH.clear(),this.mask1dV.clear(),this.mask2d.clear(),this.mask1dH.beginFill(16777215),this.mask1dV.beginFill(16777215),this.mask2d.beginFill(16711680);for(let e=0;e<this.options.orientationsAndPositions.length;e++){const t=this.options.orientationsAndPositions[e].orientation,{left:n,top:r,width:i,height:o}=this.options.orientationsAndPositions[e].position;"1d-horizontal"===t&&this.mask1dH.drawRect(n,r,i,o),"1d-vertical"===t&&this.mask1dV.drawRect(n,r,i,o),"2d"===t&&this.mask2d.drawRect(n,r,i,o),this.drawLines(t,n,r)}this.lineGraphics1dH.mask=this.mask1dH,this.lineGraphics1dV.mask=this.mask1dV,this.lineGraphics2d.mask=this.mask2d}else this.drawLines()}},{key:"setPosition",value:function(e){vse(t,"setPosition",this,3)([e]),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"createSvgLine",value:function(e,t,n,r,i,o){const a=document.createElement("line");return a.setAttribute("x1",e),a.setAttribute("x2",t),a.setAttribute("y1",n),a.setAttribute("y2",r),a.setAttribute("stroke",i),a.setAttribute("stroke-width",o),a}},{key:"drawLinesSvg",value:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",s=this.options.lineStrokeWidth;if("2d"===t||"1d-vertical"===t){const t=this._yScale(0);t>0&&t<o+r&&e.appendChild(this.createSvgLine(i,n+i,t+o,t+o,a,s))}if("2d"===t||"1d-horizontal"===t){const t=this._xScale(0);t>0&&t<i+n&&e.appendChild(this.createSvgLine(t+i,t+i,o,r+o,a,s))}for(let l=0;l<this.chromInfo.cumPositions.length;l++){const c=this.chromInfo.cumPositions[l],u=c.pos+ +this.chromInfo.chromLengths[c.chr]+1;if("2d"===t||"1d-vertical"===t){const t=this._yScale(u);t>0&&t<o+r&&e.appendChild(this.createSvgLine(i,n+i,t+o,t+o,a,s))}if("2d"===t||"1d-horizontal"===t){const t=this._xScale(u);t>0&&t<i+n&&e.appendChild(this.createSvgLine(t+i,t+i,o,r+o,a,s))}}}},{key:"exportSVG",value:function(){let e=null,n=null;vse(t,"exportSVG",this,1)?[n,e]=vse(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");if(e.appendChild(r),n.setAttribute("id","ChromosomeGrid"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),!this.chromInfo)return[n,e];if(this.isOverlay)for(let t=0;t<this.options.orientationsAndPositions.length;t++){const e=this.options.orientationsAndPositions[t].orientation,{left:n,top:i,width:o,height:a}=this.options.orientationsAndPositions[t].position;this.drawLinesSvg(r,e,o,a,n,i)}else this.drawLinesSvg(r,this.orientation,...this.dimensions);return[n,e]}}])}(yne);function xse(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ese(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ese(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Sse(e,t,n){return t=Cse(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kse()?Reflect.construct(t,n||[],Cse(e).constructor):t.apply(e,n))}function kse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kse=function(){return!!e})()}function Ose(e,t,n,r){var i=Pse(Cse(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function Pse(){return Pse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Cse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Pse.apply(null,arguments)}function Cse(e){return(Cse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ase(e,t){return(Ase=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Mse=7829367;let Ise=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Sse(this,t,[e,n]);const{dataConfig:i,animate:o,chromInfoPath:a,isShowGlobalMousePosition:s}=e;return r.chromInfo=null,r.dataConfig=i,r.pTicks=new ow.PIXI.Graphics,r.pMain.addChild(r.pTicks),r.gTicks={},r.tickTexts={},r.options=n,r.isShowGlobalMousePosition=s,r.textFontSize=12,r.textFontFamily="Arial",r.textFontColor="#808080",r.textStrokeColor=r.getTheme()===Ew?"#000000":"#ffffff",r.pixiTextConfig={fontSize:+r.options.fontSize?+r.options.fontSize+"px":`${r.textFontSize}px`,fontFamily:r.textFontFamily,fill:r.options.color||r.textFontColor,lineJoin:"round",stroke:r.options.stroke||r.textStrokeColor,strokeThickness:2},r.stroke=aw(r.pixiTextConfig.stroke),r.tickWidth=200,r.tickHeight=6,r.tickTextSeparation=2,r.tickColor=r.options.tickColor?aw(r.options.tickColor):Mse,r.animate=o,r.pubSubs=[],r.options.showMousePosition&&!r.hideMousePosition&&(r.hideMousePosition=nx(r,r.is2d,r.isShowGlobalMousePosition())),a&&WW(a,e=>{r.chromInfo=e,r.tilesetInfoReceived()},r.pubSub),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ase(e,t)}(t,e),xse(t,[{key:"tilesetInfoReceived",value:function(){this.rerender(this.options,!0),this.draw(),this.animate()}},{key:"calculateVisibleTiles",value:function(){return[]}},{key:"initBoundsTicks",value:function(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new ow.PIXI.Graphics,this.leftBoundTick=new ow.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new ow.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}},{key:"initChromLabels",value:function(){if(this.chromInfo){this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new ow.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren();for(let e=0;e<this.chromInfo.cumPositions.length;e++){const t=this.chromInfo.cumPositions[e].chr;this.gTicks[t]=new ow.PIXI.Graphics,this.tickTexts[t]||(this.tickTexts[t]=[]);const n=new ow.PIXI.Text(t,this.pixiTextConfig);n.hashValue=Math.random(),this.pTicks.addChild(n),this.pTicks.addChild(this.gTicks[t]),this.texts.push(n)}}}},{key:"rerender",value:function(e,n){const r=JSON.stringify(e);!n&&r===this.prevOptions||(this.prevOptions=r,this.options=e,this.tickTexts={},this.pixiTextConfig.fontSize=+this.options.fontSize?+this.options.fontSize+"px":this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=aw(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?aw(this.options.tickColor):Mse,"ends"===this.options.tickPositions?this.initBoundsTicks():this.initChromLabels(),Ose(t,"rerender",this,3)([e,n]),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=nx(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"formatTick",value:function(e){const t=this._xScale.domain(),n=t[1]-t[0],r=sh(e,n),i=eh(","),o=th(`,.${r}`,n);let a=i;return"si"===this.options.tickFormat?a=o:"plain"===this.options.tickFormat?a=i:"ends"===this.options.tickPositions&&(a=o),a(e)}},{key:"drawBoundsTicks",value:function(e,t){const n=this.gBoundTicks;n.clear(),n.lineStyle(1,0);const r=this.options.reverseOrientation?0:this.dimensions[1],i=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;n.moveTo(1,r),n.lineTo(1,i),n.moveTo(this.dimensions[0]-1,r),n.lineTo(this.dimensions[0]-1,i),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?i+this.tickTextSeparation:i-this.tickTextSeparation,this.leftBoundTick.text=`${e[0]}: ${this.formatTick(e[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text=`${t[0]}: ${this.formatTick(t[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?i+this.tickTextSeparation:i-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}},{key:"drawTicks",value:function(e){const t=this.gTicks[e.chr];t.visible=!0,t.clear();const n=+this.chromInfo.chromLengths[e.chr],r=Math.max(this._xScale(e.pos),0),i=Math.min(this._xScale(e.pos+n),this.dimensions[0]),o=(i-r)/this.tickWidth,a=ph().domain([Math.max(1,this._xScale.invert(0)-e.pos),Math.min(n,this._xScale.invert(this.dimensions[0])-e.pos)]).range(r,i).ticks(o).filter(e=>Number.isInteger(e)),s=this.tickTexts[e.chr],l=this.options.fontIsLeftAligned?(+this.options.fontSize||this.textFontSize)/2:this.tickHeight,c=this.flipText?-1:1,u=this.options.fontIsLeftAligned?4*c:0;let h=this.options.fontIsLeftAligned?0:l+this.tickTextSeparation;for(this.options.reverseOrientation&&(h=this.dimensions[1]-h);s.length<a.length;){const t=new ow.PIXI.Text("",this.pixiTextConfig);s.push(t),this.gTicks[e.chr].addChild(t)}for(;s.length>a.length;){const t=s.pop();this.gTicks[e.chr].removeChild(t)}let p=0;for(;p<a.length;){s[p].visible=!0,s[p].anchor.x=this.options.fontIsLeftAligned?0:.5,s[p].anchor.y=this.options.reverseOrientation?0:1,this.flipText&&(s[p].scale.x=-1),s[p].x=this._xScale(e.pos+a[p])+u,s[p].y=this.dimensions[1]-h,s[p].text=0===a[p]?`${e.chr}: 1`:`${e.chr}: ${this.formatTick(a[p])}`;const n=this._xScale(e.pos+a[p]);s[p].tickLine=[n-1,this.dimensions[1],n-1,this.dimensions[1]-l-1];const r=this.options.reverseOrientation?0:this.dimensions[1],i=this.options.reverseOrientation?l:this.dimensions[1]-l;t.lineStyle(1,this.stroke),t.moveTo(n-1,r),t.lineTo(n-1,i-1),this.options.fontIsLeftAligned?(t.lineTo(n+2*c+1*c,i-1),t.lineTo(n+2*c+1*c,i+1),t.lineTo(n+1,i+1)):t.lineTo(n+1,i-1),t.lineTo(n+1,r),t.lineStyle(1,this.tickColor),t.moveTo(n,r),t.lineTo(n,i),this.options.fontIsLeftAligned&&t.lineTo(n+2*c,i),p+=1}for(;p<s.length;)s[p].visible=!1,p+=1;return a.length}},{key:"draw",value:function(){if(this.allTexts=[],!this.texts)return;const e=Z_(this._xScale.domain()[0],this.chromInfo),t=Z_(this._xScale.domain()[1],this.chromInfo);if(!e||!t)return void console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);if("ends"===this.options.tickPositions){if(!this.gBoundTicks)return;return this.gBoundTicks.visible=!0,void this.drawBoundsTicks(e,t)}if(!this.pTicks)return;for(let r=0;r<this.texts.length;r++)this.texts[r].visible=!1,this.gTicks[this.chromInfo.cumPositions[r].chr].visible=!1;let n=this.options.fontIsLeftAligned?0:this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(n=this.dimensions[1]-n),Object.keys(this.chromInfo.chrPositions).forEach(e=>{if(this.tickTexts[e])for(let t=0;t<this.tickTexts[e].length;t++)this.tickTexts[e][t].visible=!1});for(let r=e[3];r<=t[3];r++){const e=this.chromInfo.cumPositions[r],t=e.pos+this.chromInfo.chromLengths[e.chr]/2,i=this._xScale(t),o=this.texts[r];o.anchor.x=this.options.fontIsLeftAligned?0:.5,o.anchor.y=this.options.reverseOrientation?0:1,o.x=i,o.y=this.dimensions[1]-n,o.updateTransform(),this.flipText&&(o.scale.x=-1);const a=this.drawTicks(e);o.visible=a<=0,this.allTexts.push({importance:o.hashValue,text:o,caption:null})}this.hideOverlaps(this.allTexts)}},{key:"hideOverlaps",value:function(e){let t=[];t=e.map((e,t)=>{let{text:n}=e;n.updateTransform();const r=n.getBounds();return[r.x,r.y,r.x+r.width,r.y+r.height]}),gte(t,(t,n)=>{e[t].importance>e[n].importance?e[n].text.visible=!1:e[t].text.visible=!1})}},{key:"setPosition",value:function(e){Ose(t,"setPosition",this,3)([e]),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"exportSVG",value:function(){let e=null,n=null;Ose(t,"exportSVG",this,1)?[n,e]=Ose(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n),n.setAttribute("class","chromosome-labels");const r=document.createElement("g");return e.appendChild(r),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter(e=>e.text.visible).forEach(e=>{const t=ZT(e.text);r.appendChild(t)}),Object.values(this.tickTexts).forEach(e=>{e.filter(e=>e.visible).forEach(e=>{let t=ZT(e);r.appendChild(t),t=ix(e.x,this.options.reverseOrientation?0:this.dimensions[1],e.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const n=document.createElement("line");n.setAttribute("x1",e.tickLine[0]),n.setAttribute("y1",e.tickLine[1]),n.setAttribute("x2",e.tickLine[2]),n.setAttribute("y2",e.tickLine[3]),n.setAttribute("style","stroke: grey"),r.appendChild(t),r.appendChild(n)})}),[n,e]}}])}(yne);function Rse(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dse(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dse(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Nse(e,t,n){return t=Fse(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jse()?Reflect.construct(t,n||[],Fse(e).constructor):t.apply(e,n))}function jse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jse=function(){return!!e})()}function Lse(e,t,n,r){var i=Bse(Fse(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Bse(){return Bse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Fse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Bse.apply(null,arguments)}function Fse(e){return(Fse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zse(e,t){return(zse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Hse=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Nse(this,t,[e,n])).drawnRects=new Set,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zse(e,t)}(t,e),Rse(t,[{key:"tileToLocalId",value:function(e){return`${e.join(".")}`}},{key:"tileToRemoteId",value:function(e){return`${e.join(".")}`}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),t=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let n=Math.max(e,t);return n=Math.min(n,this.maxZoom),n}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e)})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=VW.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=VW.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"initTile",value:function(e){}},{key:"destroyTile",value:function(e,t){}},{key:"draw",value:function(){this.drawnRects.clear(),Lse(t,"draw",this)([])}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear();const n=aw("green");t.lineStyle(1,255,1),t.beginFill(n,.8),t.alpha=.5;for(const r of e.tileData){const e=this._xScale(r.xStart),n=this._xScale(r.xEnd),i=this._yScale(r.yStart),o=this._yScale(r.yEnd),a=r.uid;if(this.drawnRects.has(a))continue;this.drawnRects.add(a);const s=6,l=6;let c=o-i,u=n-e;const h=(e+n)/2,p=(i+o)/2;c<s&&(c=s),u<l&&(u=l),t.drawRect(h-c/2,p-u/2,c,u)}}},{key:"setPosition",value:function(e){Lse(t,"setPosition",this)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.refreshTiles(),this.draw()}}])}(yne);function Use(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vse(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vse(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Gse(e,t,n){return t=qse(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xse()?Reflect.construct(t,n||[],qse(e).constructor):t.apply(e,n))}function Xse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xse=function(){return!!e})()}function Wse(e,t,n,r){var i=Yse(qse(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Yse(){return Yse=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qse(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yse.apply(null,arguments)}function qse(e){return(qse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $se(e,t){return($se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Kse=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Gse(this,t,[e,n]);const{animate:i}=e;return r.pMain=r.pMobile,r.colorScale=Yw,r.continuousScaling=!1,n?.colorRange&&(r.colorScale=iw(n.colorRange)),r.animate=i,r.options=n,r.pubSubs=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$se(e,t)}(t,e),Use(t,[{key:"rerender",value:function(e,n){Wse(t,"rerender",this)([e,n]),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){var e;let t=null;if(this.tilesetInfo.resolutions){const e=VW.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),n=VW.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);t=Math.min(e,n)}else{const e=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),n=VW.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);t=Math.max(e,n),t=Math.min(t,this.maxZoom)}return null!=(e=this.options)&&e.maxZoom&&(this.options.maxZoom>=0?t=Math.min(this.options.maxZoom,t):console.error("Invalid maxZoom on track:",this)),t}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const e=this._xScale.copy();if(e.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){const t=this.tilesetInfo.resolutions.map(e=>+e).sort((e,t)=>t-e);this.xTiles=VW.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=VW.calculateTilesFromResolution(t[this.zoomLevel],e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=VW.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=VW.calculateTiles(this.zoomLevel,e,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const t=this.xTiles,n=this.yTiles,r=this.zoomLevel,i=this.tilesetInfo.max_width/2**r,o=[];for(let a=0;a<t.length;a++)for(let e=a;e<n.length;e++){if((e-a-2)*(this._xScale(i)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const s=[r,t[a],n[e]];s.mirrored=!1,s.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",o.push(s)}this.setVisibleTiles(o)}},{key:"tileDataToCanvas",value:function(e){const t=document.createElement("canvas");t.width=256,t.height=256;const n=t.getContext("2d");n.fillStyle="transparent",n.fillRect(0,0,t.width,t.height);const r=new ImageData(e,t.width,t.height);return n.putImageData(r,0,0),t}},{key:"setSpriteProperties",value:function(e,t,n,r){const{tileX:i,tileY:o,tileWidth:a,tileHeight:s}=this.getTilePosAndDimensions(t,n),l=i+a,c=o+s;e.width=this._refXScale(l)-this._refXScale(i),e.height=this._refYScale(c)-this._refYScale(o),e.x=this._refXScale(i),e.y=this._refYScale(o)}},{key:"pixDataFunction",value:function(e,t){if(t){const n=e.graphics,r=this.tileDataToCanvas(t.pixData),i="4"===ow.PIXI.VERSION[0]?ow.PIXI.Texture.fromCanvas(r,ow.PIXI.SCALE_MODES.NEAREST):ow.PIXI.Texture.from(r,{scaleMode:ow.PIXI.SCALE_MODES.NEAREST});e.sprite=new ow.PIXI.Sprite(i),e.canvas=r,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored),n.pivot.x=this._refXScale(0),n.pivot.y=this._refYScale(0),n.scale.x=-1/Math.sqrt(2),n.rotation=-3*Math.PI/4,n.scale.y=1/Math.sqrt(2),n.position.x=this._refXScale(0),n.position.y=0,n.removeChildren(),n.addChild(e.sprite)}this.renderingTiles.delete(e.tileId)}},{key:"refScalesChanged",value:function(e,n){Wse(t,"refScalesChanged",this)([e,n]);for(const t in this.fetchedTiles){const e=this.fetchedTiles[t];if(e.sprite){this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos,e.mirrored);const t=e.graphics;t.pivot.x=this._refXScale(0),t.pivot.y=this._refYScale(0),t.scale.x=-1/Math.sqrt(2),t.rotation=-3*Math.PI/4,t.scale.y=1/Math.sqrt(2),t.position.x=this._refXScale(0),t.position.y=0}}}},{key:"zoomed",value:function(e,n,r,i,o){Wse(t,"zoomed",this)([e,n,r,i,o]),Wse(t,"draw",this)([]),this.pMain.position.x=i,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=r,this.pMain.scale.y=r,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-r,this.pMain.position.y=this.position[1])}},{key:"leftTrackDraw",value:function(){this.draw()}},{key:"exportSVG",value:function(){let e=null,n=null;[n,e]=Wse(t,"superSVG",this)([]);const r=document.createElement("g");e.appendChild(r),r.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const t of this.visibleAndFetchedTiles()){const e=document.createElement("g"),n=t.graphics,i=180*n.rotation/Math.PI,o=`translate(${n.position.x},${n.position.y}) rotate(${i}) scale(${n.scale.x},${n.scale.y}) translate(${-n.pivot.x},${-n.pivot.y})`;e.setAttribute("transform",o);const a=180*t.sprite.rotation/Math.PI,s=document.createElement("g");s.setAttribute("transform",`translate(${t.sprite.x},${t.sprite.y}) rotate(${a}) scale(${t.sprite.scale.x},${t.sprite.scale.y})`);const l=document.createElement("image");l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.canvas.toDataURL()),l.setAttribute("width",256),l.setAttribute("height",256),s.appendChild(l),e.appendChild(s),r.appendChild(e)}const i=this.exportColorBarSVG();return e.appendChild(i),[n,n]}}])}(lre);function Zse(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qse(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qse(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Jse(e,t,n){return t=tle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ele()?Reflect.construct(t,n||[],tle(e).constructor):t.apply(e,n))}function ele(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ele=function(){return!!e})()}function tle(e){return(tle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nle(e,t){return(nle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let rle=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jse(this,t,[e,n])).tilesetInfo={},r.setError(`Unknown track type: ${n.type}`),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nle(e,t)}(t,e),Zse(t,[{key:"zoomed",value:function(){this.draw()}}])}(zte);function ile(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ole(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ole(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function ale(e,t,n){return t=lle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sle()?Reflect.construct(t,n||[],lle(e).constructor):t.apply(e,n))}function sle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sle=function(){return!!e})()}function lle(e){return(lle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cle(e,t){return(cle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let ule=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ale(this,t,[e,n])).axis=new pW(r),r.pBase.addChild(r.axis.pAxis),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cle(e,t)}(t,e),ile(t,[{key:"initTile",value:function(e){this.scale.minRawValue=this.minVisibleValueInTiles(),this.scale.maxRawValue=this.minVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(e)}},{key:"drawTile",value:function(e){if(!e.graphics)return;const t=e.graphics;t.clear(),this.valueScale=wh().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-3,3]);const n=aw("black");t.lineStyle(1,n,.3),t.beginFill(n,.3),this.drawAxis(this.valueScale),e.tileData.forEach(e=>{const n=e.fields,r=+e.chrOffset,i=+n[1]+r,o=+n[2]+r,a=+n[3],s=this._xScale(i),l=this._xScale(o),c=Math.max(l-s,4),u=this.valueScale(a),h=(l+s)/2;t.drawRect(h-c/2,u-3,c,6)})}},{key:"minVisibleValueInTiles",value:function(){let e=this.visibleAndFetchedIds();return 0===e.length&&(e=Object.keys(this.fetchedTiles)),Math.min.apply(null,e.map(e=>+Math.min(...this.fetchedTiles[e].tileData.filter(e=>!Number.isNaN(e.fields[3])).map(e=>+e.fields[3]))))}},{key:"maxVisibleValueInTiles",value:function(){let e=this.visibleAndFetchedIds();return 0===e.length&&(e=Object.keys(this.fetchedTiles)),Math.max.apply(null,e.map(e=>+Math.max(...this.fetchedTiles[e].tileData.filter(e=>!Number.isNaN(e.fields[3])).map(e=>+e.fields[3]))))}}])}(Gie);function hle(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ple(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ple(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function fle(e,t,n){return t=yle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dle()?Reflect.construct(t,n||[],yle(e).constructor):t.apply(e,n))}function dle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dle=function(){return!!e})()}function mle(e,t,n,r){var i=gle(yle(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function gle(){return gle=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=yle(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},gle.apply(null,arguments)}function yle(e){return(yle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vle(e,t){return(vle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let ble=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=fle(this,t,[e,n]);const{registerViewportChanged:i,removeViewportChanged:o,setDomainsCallback:a}=e,s=a_.nice();return r.uid=s,r.options=n,r.hasFromView=!e.projectionXDomain||!e.projectionYDomain,r.removeViewportChanged=o,r.setDomainsCallback=a,r.viewportXDomain=r.hasFromView?null:e.projectionXDomain,r.viewportYDomain=r.hasFromView?null:e.projectionYDomain,r.brush=M$().on("brush",r.brushed.bind(r)),r.gBrush=r.gMain.append("g").attr("id",`brush-${r.uid}`).call(r.brush),r.gBrush.selectAll(".overlay").style("pointer-events","none"),r.gBrush.selectAll(".handle--n").style("pointer-events","none"),r.gBrush.selectAll(".handle--s").style("pointer-events","none"),r.gBrush.selectAll(".handle--w").style("pointer-events","none"),r.gBrush.selectAll(".handle--e").style("pointer-events","none"),i(s,r.viewportChanged.bind(r)),r.rerender(),r.draw(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vle(e,t)}(t,e),hle(t,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=[this._xScale.invert(t[0][0]),this._xScale.invert(t[1][0])],r=[this._yScale.invert(t[0][1]),this._yScale.invert(t[1][1])];this.hasFromView||(this.viewportXDomain=n,this.viewportYDomain=r),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),mle(t,"remove",this)([])}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[[this._xScale(this.viewportXDomain[0]),this._yScale(this.viewportYDomain[0])],[this._xScale(this.viewportXDomain[1]),this._yScale(this.viewportYDomain[1])]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){mle(t,"setPosition",this)([e]),this.draw()}},{key:"setDimensions",value:function(e){mle(t,"setDimensions",this)([e]);const n=this._xScale.range(),r=this._yScale.range(),i=n[1]-n[0],o=r[1]-r[0];this.brush.extent([[n[0]-i,r[0]-o],[n[1]+i,r[1]+o]]),this.gBrush.call(this.brush),this.draw()}}])}(aie);function _le(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wle(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Tle(e,t,n){return t=kle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xle()?Reflect.construct(t,n||[],kle(e).constructor):t.apply(e,n))}function xle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xle=function(){return!!e})()}function Ele(e,t,n,r){var i=Sle(kle(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Sle(){return Sle=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=kle(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Sle.apply(null,arguments)}function kle(e){return(kle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ole(e,t){return(Ole=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Ple=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Tle(this,t,[e,n]);const{registerViewportChanged:i,removeViewportChanged:o,setDomainsCallback:a}=e,s=a_.nice();return r.uid=s,r.options=n,r.hasFromView=!e.projectionXDomain,r.removeViewportChanged=o,r.setDomainsCallback=a,r.viewportXDomain=r.hasFromView?null:e.projectionXDomain,r.viewportYDomain=r.hasFromView?null:[0,0],r.brush=C$().on("brush",r.brushed.bind(r)),r.gBrush=r.gMain.append("g").attr("id",`brush-${r.uid}`).call(r.brush),r.gBrush.selectAll(".overlay").style("pointer-events","none"),r.gBrush.selectAll(".handle--ne").style("pointer-events","none"),r.gBrush.selectAll(".handle--nw").style("pointer-events","none"),r.gBrush.selectAll(".handle--sw").style("pointer-events","none"),r.gBrush.selectAll(".handle--se").style("pointer-events","none"),r.gBrush.selectAll(".handle--n").style("pointer-events","none"),r.gBrush.selectAll(".handle--s").style("pointer-events","none"),i(s,r.viewportChanged.bind(r)),r.rerender(),r.draw(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ole(e,t)}(t,e),_le(t,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=[this._xScale.invert(t[0]),this._xScale.invert(t[1])],r=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=n),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),Ele(t,"remove",this)([])}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[this._xScale(this.viewportXDomain[0]),this._xScale(this.viewportXDomain[1])];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){Ele(t,"setPosition",this)([e]),this.draw()}},{key:"setDimensions",value:function(e){Ele(t,"setDimensions",this)([e]);const n=this._xScale.range(),r=this._yScale.range(),i=n[1]-n[0];this.brush.extent([[n[0]-i,r[0]],[n[1]+i,r[1]]]),this.gBrush.call(this.brush),this.draw()}}])}(aie);function Cle(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ale(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ale(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Mle(e,t,n){return t=Nle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ile()?Reflect.construct(t,n||[],Nle(e).constructor):t.apply(e,n))}function Ile(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ile=function(){return!!e})()}function Rle(e,t,n,r){var i=Dle(Nle(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Dle(){return Dle=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Nle(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Dle.apply(null,arguments)}function Nle(e){return(Nle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jle(e,t){return(jle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Lle=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Mle(this,t,[e,n]);const{registerViewportChanged:i,removeViewportChanged:o,setDomainsCallback:a}=e,s=a_.nice();return r.uid=s,r.options=n,r.hasFromView=!e.projectionYDomain,r.removeViewportChanged=o,r.setDomainsCallback=a,r.viewportXDomain=r.hasFromView?null:[0,0],r.viewportYDomain=r.hasFromView?null:e.projectionYDomain,r.brush=A$().on("brush",r.brushed.bind(r)),r.gBrush=r.gMain.append("g").attr("id",`brush-${r.uid}`).call(r.brush),r.gBrush.selectAll(".overlay").style("pointer-events","none"),r.gBrush.selectAll(".handle--ne").style("pointer-events","none"),r.gBrush.selectAll(".handle--nw").style("pointer-events","none"),r.gBrush.selectAll(".handle--sw").style("pointer-events","none"),r.gBrush.selectAll(".handle--se").style("pointer-events","none"),r.gBrush.selectAll(".handle--e").style("pointer-events","none"),r.gBrush.selectAll(".handle--w").style("pointer-events","none"),i(s,r.viewportChanged.bind(r)),r.rerender(),r.draw(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jle(e,t)}(t,e),Cle(t,[{key:"brushed",value:function(e){const t=e.selection;if(!this._xScale||!this._yScale)return;const n=this.viewportXDomain,r=[this._yScale.invert(t[0]),this._yScale.invert(t[1])];this.hasFromView||(this.viewportYDomain=r),this.setDomainsCallback(n,r)}},{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),Rle(t,"remove",this)([])}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const e=[this._yScale(this.viewportYDomain[0]),this._yScale(this.viewportYDomain[1])];this.brush.on("brush",null),this.gBrush.call(this.brush.move,e),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){Rle(t,"setPosition",this)([e]),this.draw()}},{key:"setDimensions",value:function(e){Rle(t,"setDimensions",this)([e]);const n=this._xScale.range(),r=this._yScale.range(),i=r[1]-r[0];this.brush.extent([[n[0],r[0]-i],[n[1],r[1]+i]]),this.gBrush.call(this.brush),this.draw()}}])}(aie);function Ble(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fle(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function zle(e,t,n){return t=Gle(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hle()?Reflect.construct(t,n||[],Gle(e).constructor):t.apply(e,n))}function Hle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hle=function(){return!!e})()}function Ule(e,t,n,r){var i=Vle(Gle(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Vle(){return Vle=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Gle(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Vle.apply(null,arguments)}function Gle(e){return(Gle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xle(e,t){return(Xle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Wle=lQ(e=>function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=zle(this,t,[e,n]);const{animate:i}=e;return r.highlighted=!1,r.animate=i,r.MOUSEOVER_RADIUS=4,r.pubSub=e.pubSub,r.pubSubs.push(r.pubSub.subscribe("app.mouseMove",r.mouseMoveHandler.bind(r))),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xle(e,t)}(t,e),Ble(t,[{key:"setPosition",value:function(e){Ule(t,"setPosition",this)([e]),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(e,n){Ule(t,"zoomed",this)([e,n]),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}])}(e));function Yle(e,t,n,r){var i=qle(ece(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function qle(){return qle=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ece(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},qle.apply(null,arguments)}function $le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kle(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zle(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zle(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Qle(e,t,n){return t=ece(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jle()?Reflect.construct(t,n||[],ece(e).constructor):t.apply(e,n))}function Jle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jle=function(){return!!e})()}function ece(e){return(ece=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nce(e,t)}function nce(e,t){return(nce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const rce=lQ(e=>function(e){function t(){return $le(this,t),Qle(this,t,arguments)}return tce(t,e),Kle(t,[{key:"drawVerticalRule",value:function(e){let t=aw(this.options.color||"black");this.highlighted&&(t=aw("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[1];)e.moveTo(this._xScale(this.xPosition),n),e.lineTo(this._xScale(this.xPosition),n+this.dashLength),n+=this.dashLength+this.dashGap}},{key:"isMouseOverVerticalLine",value:function(e){return Math.abs(e.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}])}(e));let ice=function(e){function t(e,n){var r;return $le(this,t),(r=Qle(this,t,[e,n])).xPosition=e.xPosition,r.strokeWidth=2,r.strokeOpacity=1,r.dashLength=5,r.dashGap=3,r}return tce(t,e),Kle(t,[{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawVerticalRule(e),this.animate()}},{key:"exportSVG",value:function(){let e=null,n=null;Yle(t,"exportSVG",this,1)?[n,e]=Yle(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");r.setAttribute("class","vertical-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");return o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",this._xScale(this.xPosition)),o.setAttribute("y1",0),o.setAttribute("x2",this._xScale(this.xPosition)),o.setAttribute("y2",this.dimensions[1]),r.appendChild(o),[n,e]}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&this.isMouseOverVerticalLine(e),this.draw()}}])}(uQ(zte).with(Wle,rce));function oce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ace(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ace(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function sce(e,t,n){return t=hce(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lce()?Reflect.construct(t,n||[],hce(e).constructor):t.apply(e,n))}function lce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lce=function(){return!!e})()}function cce(e,t,n,r){var i=uce(hce(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function uce(){return uce=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},uce.apply(null,arguments)}function hce(e){return(hce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pce(e,t){return(pce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let fce=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=sce(this,t,[e,n]);const{x:i,y:o}=e;return r.xPosition=i,r.yPosition=o,r.strokeWidth=2,r.strokeOpacity=1,r.dashLength=5,r.dashGap=3,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pce(e,t)}(t,e),oce(t,[{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.drawVerticalRule(e)}},{key:"mouseMoveHandler",value:function(e){this.highlighted=this.isWithin(e.x,e.y)&&(this.isMouseOverHorizontalLine(e)||this.isMouseOverVerticalLine(e)),this.draw()}},{key:"drawHorizontalRule",value:function(e){let t=aw(this.options.color||"black");this.highlighted&&(t=aw("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[0];)e.moveTo(n,this._yScale(this.yPosition)),e.lineTo(n+this.dashLength,this._yScale(this.yPosition)),n+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(e){return Math.abs(e.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}},{key:"exportSVG",value:function(){let e=null,n=null;cce(t,"exportSVG",this,1)?[n,e]=cce(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");r.setAttribute("class","cross-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",this._xScale(this.xPosition)),o.setAttribute("y1",0),o.setAttribute("x2",this._xScale(this.xPosition)),o.setAttribute("y2",this.dimensions[1]);const a=document.createElement("line");return a.setAttribute("stroke",i),a.setAttribute("stroke-width",this.strokeWidth),a.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),a.setAttribute("x1",0),a.setAttribute("y1",this._yScale(this.yPosition)),a.setAttribute("x2",this.dimensions[0]),a.setAttribute("y2",this._yScale(this.yPosition)),r.appendChild(o),r.appendChild(a),[n,e]}}])}(uQ(zte).with(Wle,rce));function dce(e,t,n,r){var i=mce(wce(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function mce(){return mce=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=wce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mce.apply(null,arguments)}function gce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vce(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vce(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function bce(e,t,n){return t=wce(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_ce()?Reflect.construct(t,n||[],wce(e).constructor):t.apply(e,n))}function _ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ce=function(){return!!e})()}function wce(e){return(wce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xce(e,t)}function xce(e,t){return(xce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const Ece=lQ(e=>function(e){function t(){return gce(this,t),bce(this,t,arguments)}return Tce(t,e),yce(t,[{key:"drawHorizontalRule",value:function(e){let t=aw(this.options.color||"black");this.highlighted&&(t=aw("red")),e.lineStyle(this.strokeWidth,t,this.strokeOpacity);let n=0;for(;n<this.dimensions[0];)e.moveTo(n,this._yScale(this.yPosition)),e.lineTo(n+this.dashLength,this._yScale(this.yPosition)),n+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(e){return Math.abs(e.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}])}(e));let Sce=function(e){function t(e,n){var r;return gce(this,t),(r=bce(this,t,[e,n])).yPosition=e.yPosition,r.strokeWidth=2,r.strokeOpacity=1,r.dashLength=5,r.dashGap=3,r}return Tce(t,e),yce(t,[{key:"mouseMoveHandler",value:function(e){if(this.isWithin(e.x,e.y)&&this.isMouseOverHorizontalLine(e))return this.highlighted=!0,void this.draw();this.highlighted=!1,this.draw()}},{key:"draw",value:function(){const e=this.pMain;e.clear(),this.drawHorizontalRule(e),this.animate()}},{key:"exportSVG",value:function(){let e=null,n=null;dce(t,"exportSVG",this,1)?[n,e]=dce(t,"exportSVG",this,3)([]):(n=document.createElement("g"),e=n);const r=document.createElement("g");r.setAttribute("class","horizontal-rule"),r.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),e.appendChild(r);const i=this.options.color||"black",o=document.createElement("line");return o.setAttribute("stroke",i),o.setAttribute("stroke-width",this.strokeWidth),o.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),o.setAttribute("x1",0),o.setAttribute("y1",this._yScale(this.yPosition)),o.setAttribute("x2",this.dimensions[0]),o.setAttribute("y2",this._yScale(this.yPosition)),r.appendChild(o),[n,e]}}])}(uQ(zte).with(Wle,Ece));function kce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oce(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oce(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Pce(e,t,n){return t=Ice(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cce()?Reflect.construct(t,n||[],Ice(e).constructor):t.apply(e,n))}function Cce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cce=function(){return!!e})()}function Ace(e,t,n,r){var i=Mce(Ice(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function Mce(){return Mce=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ice(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Mce.apply(null,arguments)}function Ice(e){return(Ice=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rce(e,t){return(Rce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Dce=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=Pce(this,t,[e,n]);const{animate:i}=e;return r.visibleTiles=new Set,r.visibleTileIds=new Set,r.fetching=new Set,r.fetchedTiles={},r.tileGraphics={},r.minX=typeof r.options.minPos<"u"&&!Number.isNaN(+r.options.minPos)?+r.options.minPos:-180,r.maxX=+r.options.maxPos||180,r.maxX=typeof r.options.maxPos<"u"&&!Number.isNaN(+r.options.maxPos)?+r.options.maxPos:180,r.minY=r.options.minY||r.minX,r.maxY=r.options.maxY||r.maxX,r.maxZoom=19,r.maxWidth=r.maxX-r.minX,r.animate=i,r.uuid=a_.nice(),r.refreshTilesDebounced=cw(r.refreshTiles.bind(r),10),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rce(e,t)}(t,e),kce(t,[{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(e=>this.visibleTileIds.has(e))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(e=>this.fetchedTiles[e])}},{key:"setVisibleTiles",value:function(e){this.visibleTiles=e.map(e=>({tileId:this.tileToLocalId(e),remoteId:this.tileToRemoteId(e),mirrored:e.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(e=>e.tileId))}},{key:"removeAllTiles",value:function(){const e=new Set(Object.keys(this.fetchedTiles));this.removeTiles([...e])}},{key:"refreshTiles",value:function(){this.calculateVisibleTiles();const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTiles].filter(t=>!this.fetching.has(t.remoteId)&&!e.has(t.tileId));for(let r=0;r<t.length;r++)this.fetching.add(t[r].remoteId);const n=[...e].filter(e=>!this.visibleTileIds.has(e));this.removeTiles(n),this.fetchNewTiles(t)}},{key:"removeTiles",value:function(e){e.length&&this.areAllVisibleTilesLoaded()&&(e.forEach(e=>{const t=e;this.destroyTile(this.fetchedTiles[t]),t in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[t]),delete this.tileGraphics[t]),delete this.fetchedTiles[t]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(e){return e.join(".")}},{key:"tileToRemoteId",value:function(e){return e.join(".")}},{key:"localToRemoteId",value:function(e){const t=e.split(".");return t.slice(0,t.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const e=VW.calculateZoomLevel(this._xScale,this.minX,this.maxX),t=VW.calculateZoomLevel(this._xScale,this.minY,this.maxY);let n=Math.min(Math.max(e,t),this.maxZoom);return this.options.maxZoom&&(this.options.maxZoom>=0?n=Math.min(this.options.maxZoom,n):console.error("Invalid maxZoom on track:",this)),n}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=VW.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=VW.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.maxZoom,this.maxWidth);const e=this.xTiles,t=this.yTiles,n=this.zoomLevel,r=[];for(let i=0;i<e.length;i++)for(let o=0;o<t.length;o++){const a=[n,e[i],t[o]];r.push(a)}this.setVisibleTiles(r)}},{key:"zoomed",value:function(e,n,r,i,o){Ace(t,"zoomed",this)([e,n]),this.xScale(e),this.yScale(n),this.pMain.position.x=i,this.pMain.position.y=o,this.pMain.scale.x=r,this.pMain.scale.y=r,this.refreshTilesDebounced(),this.draw()}},{key:"setPosition",value:function(e){Ace(t,"setPosition",this)([e])}},{key:"setDimensions",value:function(e){Ace(t,"setDimensions",this)([e])}},{key:"areAllVisibleTilesLoaded",value:function(){const e=new Set(Object.keys(this.fetchedTiles)),t=[...this.visibleTileIds];for(let n=0;n<t.length;n++)if(!e.has(t[n]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(e){return e&&(this.scale.minValue=e),this.scale.minValue}},{key:"maxValue",value:function(e){return e&&(this.scale.maxValue=e),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(e,t){const n=this.maxWidth/2**e,r=n;return{tileX:this.minX+t[0]*n,tileY:this.minY+t[1]*r,tileWidth:n,tileHeight:r}}},{key:"setSpriteProperties",value:function(e,t,n){const{tileX:r,tileY:i,tileWidth:o,tileHeight:a}=this.getTilePosAndDimensions(t,n);e.x=this._refXScale(r),e.y=this._refYScale(i);const s=r+o,l=i+a;e.width=this._refXScale(s)-this._refXScale(r),e.height=this._refYScale(l)-this._refYScale(i)}},{key:"initTile",value:function(e){const t=new ow.PIXI.Texture(new ow.PIXI.BaseTexture(e.tileData.img)),n=new ow.PIXI.Sprite(t),r=e.graphics;e.sprite=n,this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos),r.removeChildren(),r.addChild(e.sprite)}},{key:"updateTile",value:function(e){}},{key:"destroyTile",value:function(e){}},{key:"addMissingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++)if(!(e[t]in this.tileGraphics)){const n=new ow.PIXI.Graphics;this.pMain.addChild(n),this.fetchedTiles[e[t]].graphics=n,this.initTile(this.fetchedTiles[e[t]]),this.tileGraphics[e[t]]=n}}},{key:"updateExistingGraphics",value:function(){const e=Object.keys(this.fetchedTiles);for(let t=0;t<e.length;t++)this.updateTile(this.fetchedTiles[e[t]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(e,t){let n=this.lruCache.get(e.tileId);return n||(n=t(e.data,e.type),this.lruCache.put(e.tileId,n)),n}},{key:"getTileUrl",value:function(e){const t=["a","b","c"];return`https://${t[Math.floor(Math.random()*t.length)]}.tile.openstreetmap.org/${e[0]}/${e[1]}/${e[2]}.png`}},{key:"fetchNewTiles",value:function(e){if(e.length>0){const t=[...new Set(e.map(e=>e.remoteId))];for(const e of t){const t=e.split("."),n=this.getTileUrl(t),r=new Image;r.crossOrigin="Anonymous",r.src=n,r.onload=()=>{const i={};i[e]={tileId:e,img:r,zoomLevel:+t[0],tilePos:[+t[1],+t[2]],tileSrc:n},this.receivedTiles(i)}}}}},{key:"receivedTiles",value:function(e){for(let t=0;t<this.visibleTiles.length;t++){const n=this.visibleTiles[t].tileId;e[this.visibleTiles[t].remoteId]&&this.visibleTiles[t].remoteId in e&&(n in this.fetchedTiles||(this.fetchedTiles[n]=this.visibleTiles[t]),this.fetchedTiles[n].tileData=e[this.visibleTiles[t].remoteId])}for(const t in e)e[t]&&this.fetching.has(t)&&this.fetching.delete(t);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||Ace(t,"draw",this)([])}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(e,n){Ace(t,"refScalesChanged",this)([e,n]);for(const t in this.fetchedTiles){const e=this.fetchedTiles[t];e.sprite&&this.setSpriteProperties(e.sprite,e.tileData.zoomLevel,e.tileData.tilePos)}}}])}(zte);function Nce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jce(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jce(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Lce(e,t,n){return t=zce(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bce()?Reflect.construct(t,n||[],zce(e).constructor):t.apply(e,n))}function Bce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bce=function(){return!!e})()}function Fce(){return Fce=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Fce.apply(null,arguments)}function zce(e){return(zce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hce(e,t){return(Hce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Uce=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Lce(this,t,[e,n])).style=n.style,r.options.accessToken||(r.setError("No access token provided in the viewconf's track options ('accessToken' option)."),r.drawError()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hce(e,t)}(t,e),Nce(t,[{key:"rerender",value:function(e){(function(e,t,n){var r=Fce(zce(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r})(t,"rerender",this)([e]),e.style!==this.style&&(this.style=e.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(e){var t;return`https://api.mapbox.com/styles/v1/mapbox/${null!=(t=this.options)&&t.style?this.options.style:"streets-v10"}/tiles/${this.options&&+this.options.tileSize?+this.options.tileSize:256}/${e[0]}/${e[1]}/${e[2]}?access_token=${this.options.accessToken}`}}])}(Dce);function Vce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gce(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gce(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Xce(e,t,n){return t=qce(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wce()?Reflect.construct(t,n||[],qce(e).constructor):t.apply(e,n))}function Wce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wce=function(){return!!e})()}function Yce(){return Yce=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qce(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yce.apply(null,arguments)}function qce(e){return(qce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $ce(e,t){return($ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Kce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xce(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$ce(e,t)}(t,e),Vce(t,[{key:"initTile",value:function(e){gre.bind(this)(e),this.drawTile(e)}},{key:"drawTile",value:function(e){mre.bind(this)(e)}},{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"fetchNewTiles",value:function(e){e.forEach(e=>{const t=e.remoteId.split("."),n={zoomLevel:t[0],tilePos:t.slice(1,t.length).map(e=>+e)};this.fetchedTiles[e.tileId]=e,this.fetchedTiles[e.tileId].tileData=n,this.fetching.has(e.remoteId)&&this.fetching.delete(e.remoteId)}),this.synchronizeTilesAndGraphics(),this.draw(),this.animate()}},{key:"draw",value:function(){!function(e,t,n){var r=Yce(qce(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r}(t,"draw",this)([])}}])}(Dce);function Zce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qce(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qce(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Jce(e,t,n){return t=tue(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eue()?Reflect.construct(t,n||[],tue(e).constructor):t.apply(e,n))}function eue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eue=function(){return!!e})()}function tue(e){return(tue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nue(e,t){return(nue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let rue=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jce(this,t,[e,n])).style=n.style,r.options.tileSource||(r.setError("No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}"),r.drawError()),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nue(e,t)}(t,e),Zce(t,[{key:"getTileUrl",value:function(e){let t=this.options.tileSource.replace("{z}",e[0]);return t=t.replace("{x}",e[1]),t=t.replace("{y}",e[2]),t}}])}(Dce);var iue=1e-6,oue=1e-12,aue=Math.PI,sue=aue/2,lue=aue/4,cue=2*aue,uue=180/aue,hue=aue/180,pue=Math.abs,fue=Math.atan,due=Math.atan2,mue=Math.cos,gue=Math.ceil,yue=Math.exp,vue=Math.hypot,bue=Math.log,_ue=Math.pow,wue=Math.sin,Tue=Math.sign||function(e){return e>0?1:e<0?-1:0},xue=Math.sqrt,Eue=Math.tan;function Sue(e){return e>1?0:e<-1?aue:Math.acos(e)}function kue(e){return e>1?sue:e<-1?-sue:Math.asin(e)}function Oue(e){return(e=wue(e/2))*e}function Pue(){}function Cue(e,t){e&&Mue.hasOwnProperty(e.type)&&Mue[e.type](e,t)}var Aue={Feature:function(e,t){Cue(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Cue(n[r].geometry,t)}},Mue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Iue(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Iue(n[r],t,0)},Polygon:function(e,t){Rue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Rue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Cue(n[r],t)}};function Iue(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Rue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Iue(e[n],t,1);t.polygonEnd()}function Due(e,t){e&&Aue.hasOwnProperty(e.type)?Aue[e.type](e,t):Cue(e,t)}var Nue,jue,Lue,Bue,Fue,zue=new qs,Hue=new qs,Uue={point:Pue,lineStart:Pue,lineEnd:Pue,polygonStart:function(){zue=new qs,Uue.lineStart=Vue,Uue.lineEnd=Gue},polygonEnd:function(){var e=+zue;Hue.add(e<0?cue+e:e),this.lineStart=this.lineEnd=this.point=Pue},sphere:function(){Hue.add(cue)}};function Vue(){Uue.point=Xue}function Gue(){Wue(Nue,jue)}function Xue(e,t){Uue.point=Wue,Nue=e,jue=t,Lue=e*=hue,Bue=mue(t=(t*=hue)/2+lue),Fue=wue(t)}function Wue(e,t){var n=(e*=hue)-Lue,r=n>=0?1:-1,i=r*n,o=mue(t=(t*=hue)/2+lue),a=wue(t),s=Fue*a,l=Bue*o+s*mue(i),c=s*r*wue(i);zue.add(due(c,l)),Lue=e,Bue=o,Fue=a}function Yue(e){return[due(e[1],e[0]),kue(e[2])]}function que(e){var t=e[0],n=e[1],r=mue(n);return[r*mue(t),r*wue(t),wue(n)]}function $ue(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kue(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zue(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Que(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Jue(e){var t=xue(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ehe,the,nhe,rhe,ihe,ohe,ahe,she,lhe,che,uhe,hhe={point:phe,lineStart:dhe,lineEnd:mhe,polygonStart:function(){hhe.point=ghe,hhe.lineStart=yhe,hhe.lineEnd=vhe,lhe=new qs,Uue.polygonStart()},polygonEnd:function(){Uue.polygonEnd(),hhe.point=phe,hhe.lineStart=dhe,hhe.lineEnd=mhe,zue<0?(ehe=-(nhe=180),the=-(rhe=90)):lhe>iue?rhe=90:lhe<-1e-6&&(the=-90),uhe[0]=ehe,uhe[1]=nhe},sphere:function(){ehe=-(nhe=180),the=-(rhe=90)}};function phe(e,t){che.push(uhe=[ehe=e,nhe=e]),t<the&&(the=t),t>rhe&&(rhe=t)}function fhe(e,t){var n=que([e*hue,t*hue]);if(she){var r=Kue(she,n),i=Kue([r[1],-r[0],0],r);Jue(i),i=Yue(i);var o,a=e-ihe,s=a>0?1:-1,l=i[0]*uue*s,c=pue(a)>180;c^(s*ihe<l&&l<s*e)?(o=i[1]*uue)>rhe&&(rhe=o):c^(s*ihe<(l=(l+360)%360-180)&&l<s*e)?(o=-i[1]*uue)<the&&(the=o):(t<the&&(the=t),t>rhe&&(rhe=t)),c?e<ihe?bhe(ehe,e)>bhe(ehe,nhe)&&(nhe=e):bhe(e,nhe)>bhe(ehe,nhe)&&(ehe=e):nhe>=ehe?(e<ehe&&(ehe=e),e>nhe&&(nhe=e)):e>ihe?bhe(ehe,e)>bhe(ehe,nhe)&&(nhe=e):bhe(e,nhe)>bhe(ehe,nhe)&&(ehe=e)}else che.push(uhe=[ehe=e,nhe=e]);t<the&&(the=t),t>rhe&&(rhe=t),she=n,ihe=e}function dhe(){hhe.point=fhe}function mhe(){uhe[0]=ehe,uhe[1]=nhe,hhe.point=phe,she=null}function ghe(e,t){if(she){var n=e-ihe;lhe.add(pue(n)>180?n+(n>0?360:-360):n)}else ohe=e,ahe=t;Uue.point(e,t),fhe(e,t)}function yhe(){Uue.lineStart()}function vhe(){ghe(ohe,ahe),Uue.lineEnd(),pue(lhe)>iue&&(ehe=-(nhe=180)),uhe[0]=ehe,uhe[1]=nhe,she=null}function bhe(e,t){return(t-=e)<0?t+360:t}function _he(e,t){return e[0]-t[0]}function whe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var The,xhe,Ehe,She,khe,Ohe,Phe,Che,Ahe,Mhe,Ihe,Rhe,Dhe,Nhe,jhe,Lhe,Bhe={sphere:Pue,point:Fhe,lineStart:Hhe,lineEnd:Ghe,polygonStart:function(){Bhe.lineStart=Xhe,Bhe.lineEnd=Whe},polygonEnd:function(){Bhe.lineStart=Hhe,Bhe.lineEnd=Ghe}};function Fhe(e,t){e*=hue;var n=mue(t*=hue);zhe(n*mue(e),n*wue(e),wue(t))}function zhe(e,t,n){++The,Ehe+=(e-Ehe)/The,She+=(t-She)/The,khe+=(n-khe)/The}function Hhe(){Bhe.point=Uhe}function Uhe(e,t){e*=hue;var n=mue(t*=hue);Nhe=n*mue(e),jhe=n*wue(e),Lhe=wue(t),Bhe.point=Vhe,zhe(Nhe,jhe,Lhe)}function Vhe(e,t){e*=hue;var n=mue(t*=hue),r=n*mue(e),i=n*wue(e),o=wue(t),a=due(xue((a=jhe*o-Lhe*i)*a+(a=Lhe*r-Nhe*o)*a+(a=Nhe*i-jhe*r)*a),Nhe*r+jhe*i+Lhe*o);xhe+=a,Ohe+=a*(Nhe+(Nhe=r)),Phe+=a*(jhe+(jhe=i)),Che+=a*(Lhe+(Lhe=o)),zhe(Nhe,jhe,Lhe)}function Ghe(){Bhe.point=Fhe}function Xhe(){Bhe.point=Yhe}function Whe(){qhe(Rhe,Dhe),Bhe.point=Fhe}function Yhe(e,t){Rhe=e,Dhe=t,e*=hue,t*=hue,Bhe.point=qhe;var n=mue(t);Nhe=n*mue(e),jhe=n*wue(e),Lhe=wue(t),zhe(Nhe,jhe,Lhe)}function qhe(e,t){e*=hue;var n=mue(t*=hue),r=n*mue(e),i=n*wue(e),o=wue(t),a=jhe*o-Lhe*i,s=Lhe*r-Nhe*o,l=Nhe*i-jhe*r,c=vue(a,s,l),u=kue(c),h=c&&-u/c;Ahe.add(h*a),Mhe.add(h*s),Ihe.add(h*l),xhe+=u,Ohe+=u*(Nhe+(Nhe=r)),Phe+=u*(jhe+(jhe=i)),Che+=u*(Lhe+(Lhe=o)),zhe(Nhe,jhe,Lhe)}function $he(e){return function(){return e}}function Khe(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Zhe(e,t){return[pue(e)>aue?e+Math.round(-e/cue)*cue:e,t]}function Qhe(e,t,n){return(e%=cue)?t||n?Khe(epe(e),tpe(t,n)):epe(e):t||n?tpe(t,n):Zhe}function Jhe(e){return function(t,n){return[(t+=e)>aue?t-cue:t<-aue?t+cue:t,n]}}function epe(e){var t=Jhe(e);return t.invert=Jhe(-e),t}function tpe(e,t){var n=mue(e),r=wue(e),i=mue(t),o=wue(t);function a(e,t){var a=mue(t),s=mue(e)*a,l=wue(e)*a,c=wue(t),u=c*n+s*r;return[due(l*i-u*o,s*n-c*r),kue(u*i+l*o)]}return a.invert=function(e,t){var a=mue(t),s=mue(e)*a,l=wue(e)*a,c=wue(t),u=c*i-l*o;return[due(l*i+c*o,s*n+u*r),kue(u*n-s*r)]},a}function npe(e){function t(t){return(t=e(t[0]*hue,t[1]*hue))[0]*=uue,t[1]*=uue,t}return e=Qhe(e[0]*hue,e[1]*hue,e.length>2?e[2]*hue:0),t.invert=function(t){return(t=e.invert(t[0]*hue,t[1]*hue))[0]*=uue,t[1]*=uue,t},t}function rpe(e,t,n,r,i,o){if(n){var a=mue(t),s=wue(t),l=r*n;null==i?(i=t+r*cue,o=t-l/2):(i=ipe(a,i),o=ipe(a,o),(r>0?i<o:i>o)&&(i+=r*cue));for(var c,u=i;r>0?u>o:u<o;u-=l)c=Yue([a,-s*mue(u),-s*wue(u)]),e.point(c[0],c[1])}}function ipe(e,t){(t=que(t))[0]-=e,Jue(t);var n=Sue(-t[1]);return((-t[2]<0?-n:n)+cue-iue)%cue}function ope(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Pue,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ape(e,t){return pue(e[0]-t[0])<iue&&pue(e[1]-t[1])<iue}function spe(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function lpe(e,t,n,r,i){var o,a,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(ape(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*iue}s.push(n=new spe(r,e,null,!0)),l.push(n.o=new spe(r,null,n,!1)),s.push(n=new spe(a,e,null,!1)),l.push(n.o=new spe(a,null,n,!0))}}),s.length){for(l.sort(t),cpe(s),cpe(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function cpe(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function upe(e){return pue(e[0])<=aue?e[0]:Tue(e[0])*((pue(e[0])+aue)%cue-aue)}function hpe(e,t){var n=upe(t),r=t[1],i=wue(r),o=[wue(n),-mue(n),0],a=0,s=0,l=new qs;1===i?r=sue+iue:-1===i&&(r=-sue-iue);for(var c=0,u=e.length;c<u;++c)if(p=(h=e[c]).length)for(var h,p,f=h[p-1],d=upe(f),m=f[1]/2+lue,g=wue(m),y=mue(m),v=0;v<p;++v,d=_,g=T,y=x,f=b){var b=h[v],_=upe(b),w=b[1]/2+lue,T=wue(w),x=mue(w),E=_-d,S=E>=0?1:-1,k=S*E,O=k>aue,P=g*T;if(l.add(due(P*S*wue(k),y*x+P*mue(k))),a+=O?E+S*cue:E,O^d>=n^_>=n){var C=Kue(que(f),que(b));Jue(C);var A=Kue(o,C);Jue(A);var M=(O^E>=0?-1:1)*kue(A[2]);(r>M||r===M&&(C[0]||C[1]))&&(s+=O^E>=0?1:-1)}}return(a<-1e-6||a<iue&&l<-1e-12)^1&s}function ppe(e,t,n,r){return function(i){var o,a,s,l=t(i),c=ope(),u=t(c),h=!1,p={point:f,lineStart:m,lineEnd:g,polygonStart:function(){p.point=y,p.lineStart=v,p.lineEnd=b,a=[],o=[]},polygonEnd:function(){p.point=f,p.lineStart=m,p.lineEnd=g,a=Fl(a);var e=hpe(o,r);a.length?(h||(i.polygonStart(),h=!0),lpe(a,dpe,e,n,i)):e&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(t,n){e(t,n)&&i.point(t,n)}function d(e,t){l.point(e,t)}function m(){p.point=d,l.lineStart()}function g(){p.point=f,l.lineEnd()}function y(e,t){s.push([e,t]),u.point(e,t)}function v(){u.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),u.lineEnd();var e,t,n,r,l=u.clean(),p=c.result(),f=p.length;if(s.pop(),o.push(s),s=null,f){if(1&l){if((t=(n=p[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}return}f>1&&2&l&&p.push(p.pop().concat(p.shift())),a.push(p.filter(fpe))}}return p}}function fpe(e){return e.length>1}function dpe(e,t){return((e=e.x)[0]<0?e[1]-sue-iue:sue-e[1])-((t=t.x)[0]<0?t[1]-sue-iue:sue-t[1])}Zhe.invert=Zhe;const mpe=ppe(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?aue:-aue,l=pue(o-n);pue(l-aue)<iue?(e.point(n,r=(r+a)/2>0?sue:-sue),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=aue&&(pue(n-i)<iue&&(n-=i*iue),pue(o-s)<iue&&(o-=s*iue),r=function(e,t,n,r){var i,o,a=wue(e-n);return pue(a)>iue?fue((wue(t)*(o=mue(r))*wue(n)-wue(r)*(i=mue(t))*wue(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*sue,r.point(-aue,i),r.point(0,i),r.point(aue,i),r.point(aue,0),r.point(aue,-i),r.point(0,-i),r.point(-aue,-i),r.point(-aue,0),r.point(-aue,i);else if(pue(e[0]-t[0])>iue){var o=e[0]<t[0]?aue:-aue;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-aue,-sue]);function gpe(e){var t=mue(e),n=6*hue,r=t>0,i=pue(t)>iue;function o(e,n){return mue(e)*mue(n)>t}function a(e,n,r){var i=[1,0,0],o=Kue(que(e),que(n)),a=$ue(o,o),s=o[0],l=a-s*s;if(!l)return!r&&e;var c=t*a/l,u=-t*s/l,h=Kue(i,o),p=Que(i,c);Zue(p,Que(o,u));var f=h,d=$ue(p,f),m=$ue(f,f),g=d*d-m*($ue(p,p)-1);if(!(g<0)){var y=xue(g),v=Que(f,(-d-y)/m);if(Zue(v,p),v=Yue(v),!r)return v;var b,_=e[0],w=n[0],T=e[1],x=n[1];w<_&&(b=_,_=w,w=b);var E=w-_,S=pue(E-aue)<iue;if(!S&&x<T&&(b=T,T=x,x=b),S||E<iue?S?T+x>0^v[1]<(pue(v[0]-_)<iue?T:x):T<=v[1]&&v[1]<=x:E>aue^(_<=v[0]&&v[0]<=w)){var k=Que(f,(-d+y)/m);return Zue(k,p),[v,Yue(k)]}}}function s(t,n){var i=r?e:aue-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ppe(o,function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,p){var f,d=[h,p],m=o(h,p),g=r?m?0:s(h,p):m?s(h+(h<0?aue:-aue),p):0;if(!t&&(c=l=m)&&e.lineStart(),m!==l&&((!(f=a(t,d))||ape(t,f)||ape(d,f))&&(d[2]=1)),m!==l)u=0,m?(e.lineStart(),f=a(d,t),e.point(f[0],f[1])):(f=a(t,d),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(i&&t&&r^m){var y;!(g&n)&&(y=a(d,t,!0))&&(u=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}m&&(!t||!ape(t,d))&&e.point(d[0],d[1]),t=d,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}},function(t,r,i,o){rpe(o,e,n,i,t,r)},r?[0,-e]:[-aue,e-aue])}var ype=1e9,vpe=-1e9;function bpe(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,c){var u=0,h=0;if(null==i||(u=a(i,s))!==(h=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?r:t)}while((u=(u+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return pue(r[0]-e)<iue?i>0?0:3:pue(r[0]-n)<iue?i>0?2:1:pue(r[1]-t)<iue?i>0?1:0:i>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,h,p,f,d,m,g,y,v,b=a,_=ope(),w={point:T,lineStart:function(){w.point=x,c&&c.push(u=[]),y=!0,g=!1,d=m=NaN},lineEnd:function(){l&&(x(h,p),f&&g&&_.rejoin(),l.push(_.result())),w.point=T,g&&b.lineEnd()},polygonStart:function(){b=_,l=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,h=s[0],p=h[0],f=h[1];l<u;++l)o=p,a=f,h=s[l],p=h[0],f=h[1],a<=r?f>r&&(p-o)*(r-a)>(f-a)*(e-o)&&++t:f<=r&&(p-o)*(r-a)<(f-a)*(e-o)&&--t;return t}(),n=v&&t,i=(l=Fl(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&lpe(l,s,t,o,a),a.polygonEnd()),b=a,l=c=u=null}};function T(e,t){i(e,t)&&b.point(e,t)}function x(o,a){var s=i(o,a);if(c&&u.push([o,a]),y)h=o,p=a,f=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[d=Math.max(vpe,Math.min(ype,d)),m=Math.max(vpe,Math.min(ype,m))],_=[o=Math.max(vpe,Math.min(ype,o)),a=Math.max(vpe,Math.min(ype,a))];!function(e,t,n,r,i,o){var a,s=e[0],l=e[1],c=0,u=1,h=t[0]-s,p=t[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<u&&(u=a)}else if(p>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,p||!(a<0)){if(a/=p,p<0){if(a>u)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<u&&(u=a)}return c>0&&(e[0]=s+c*h,e[1]=l+c*p),u<1&&(t[0]=s+u*h,t[1]=l+u*p),!0}}}}}(l,_,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}d=o,m=a,g=s}return w}}var _pe,wpe,Tpe,xpe,Epe={sphere:Pue,point:Pue,lineStart:function(){Epe.point=kpe,Epe.lineEnd=Spe},lineEnd:Pue,polygonStart:Pue,polygonEnd:Pue};function Spe(){Epe.point=Epe.lineEnd=Pue}function kpe(e,t){wpe=e*=hue,Tpe=wue(t*=hue),xpe=mue(t),Epe.point=Ope}function Ope(e,t){e*=hue;var n=wue(t*=hue),r=mue(t),i=pue(e-wpe),o=mue(i),a=r*wue(i),s=xpe*n-Tpe*r*o,l=Tpe*n+xpe*r*o;_pe.add(due(xue(a*a+s*s),l)),wpe=e,Tpe=n,xpe=r}function Ppe(e){return _pe=new qs,Due(e,Epe),+_pe}var Cpe=[null,null],Ape={type:"LineString",coordinates:Cpe};function Mpe(e,t){return Cpe[0]=e,Cpe[1]=t,Ppe(Ape)}var Ipe={Feature:function(e,t){return Dpe(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(Dpe(n[r].geometry,t))return!0;return!1}},Rpe={Sphere:function(){return!0},Point:function(e,t){return Npe(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Npe(n[r],t))return!0;return!1},LineString:function(e,t){return jpe(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(jpe(n[r],t))return!0;return!1},Polygon:function(e,t){return Lpe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Lpe(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(Dpe(n[r],t))return!0;return!1}};function Dpe(e,t){return!(!e||!Rpe.hasOwnProperty(e.type))&&Rpe[e.type](e,t)}function Npe(e,t){return 0===Mpe(e,t)}function jpe(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(0===(r=Mpe(e[o],t))||o>0&&((i=Mpe(e[o],e[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<oue*i))return!0;n=r}return!1}function Lpe(e,t){return!!hpe(e.map(Bpe),Fpe(t))}function Bpe(e){return(e=e.map(Fpe)).pop(),e}function Fpe(e){return[e[0]*hue,e[1]*hue]}function zpe(e,t,n){var r=Ul(e,t-iue,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function Hpe(e,t,n){var r=Ul(e,t-iue,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function Upe(){var e,t,n,r,i,o,a,s,l,c,u,h,p=10,f=p,d=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ul(gue(r/d)*d,n,d).map(u).concat(Ul(gue(s/m)*m,a,m).map(h)).concat(Ul(gue(t/p)*p,e,p).filter(function(e){return pue(e%d)>iue}).map(l)).concat(Ul(gue(o/f)*f,i,f).filter(function(e){return pue(e%m)>iue}).map(c))}return y.lines=function(){return v().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[u(r).concat(h(a).slice(1),u(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(d=+e[0],m=+e[1],y):[d,m]},y.stepMinor=function(e){return arguments.length?(p=+e[0],f=+e[1],y):[p,f]},y.precision=function(p){return arguments.length?(g=+p,l=zpe(o,i,90),c=Hpe(t,e,g),u=zpe(s,a,90),h=Hpe(r,n,g),y):g},y.extentMajor([[-180,-90+iue],[180,90-iue]]).extentMinor([[-180,-80-iue],[180,80+iue]])}const Vpe=e=>e;var Gpe,Xpe,Wpe,Ype,qpe=new qs,$pe=new qs,Kpe={point:Pue,lineStart:Pue,lineEnd:Pue,polygonStart:function(){Kpe.lineStart=Zpe,Kpe.lineEnd=efe},polygonEnd:function(){Kpe.lineStart=Kpe.lineEnd=Kpe.point=Pue,qpe.add(pue($pe)),$pe=new qs},result:function(){var e=qpe/2;return qpe=new qs,e}};function Zpe(){Kpe.point=Qpe}function Qpe(e,t){Kpe.point=Jpe,Gpe=Wpe=e,Xpe=Ype=t}function Jpe(e,t){$pe.add(Ype*e-Wpe*t),Wpe=e,Ype=t}function efe(){Jpe(Gpe,Xpe)}var tfe=1/0,nfe=tfe,rfe=-tfe,ife=rfe,ofe={point:function(e,t){e<tfe&&(tfe=e),e>rfe&&(rfe=e),t<nfe&&(nfe=t),t>ife&&(ife=t)},lineStart:Pue,lineEnd:Pue,polygonStart:Pue,polygonEnd:Pue,result:function(){var e=[[tfe,nfe],[rfe,ife]];return rfe=ife=-(nfe=tfe=1/0),e}};var afe,sfe,lfe,cfe,ufe=0,hfe=0,pfe=0,ffe=0,dfe=0,mfe=0,gfe=0,yfe=0,vfe=0,bfe={point:_fe,lineStart:wfe,lineEnd:Efe,polygonStart:function(){bfe.lineStart=Sfe,bfe.lineEnd=kfe},polygonEnd:function(){bfe.point=_fe,bfe.lineStart=wfe,bfe.lineEnd=Efe},result:function(){var e=vfe?[gfe/vfe,yfe/vfe]:mfe?[ffe/mfe,dfe/mfe]:pfe?[ufe/pfe,hfe/pfe]:[NaN,NaN];return ufe=hfe=pfe=ffe=dfe=mfe=gfe=yfe=vfe=0,e}};function _fe(e,t){ufe+=e,hfe+=t,++pfe}function wfe(){bfe.point=Tfe}function Tfe(e,t){bfe.point=xfe,_fe(lfe=e,cfe=t)}function xfe(e,t){var n=e-lfe,r=t-cfe,i=xue(n*n+r*r);ffe+=i*(lfe+e)/2,dfe+=i*(cfe+t)/2,mfe+=i,_fe(lfe=e,cfe=t)}function Efe(){bfe.point=_fe}function Sfe(){bfe.point=Ofe}function kfe(){Pfe(afe,sfe)}function Ofe(e,t){bfe.point=Pfe,_fe(afe=lfe=e,sfe=cfe=t)}function Pfe(e,t){var n=e-lfe,r=t-cfe,i=xue(n*n+r*r);ffe+=i*(lfe+e)/2,dfe+=i*(cfe+t)/2,mfe+=i,gfe+=(i=cfe*e-lfe*t)*(lfe+e),yfe+=i*(cfe+t),vfe+=3*i,_fe(lfe=e,cfe=t)}function Cfe(e){this._context=e}Cfe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,cue)}},result:Pue};var Afe,Mfe,Ife,Rfe,Dfe,Nfe=new qs,jfe={point:Pue,lineStart:function(){jfe.point=Lfe},lineEnd:function(){Afe&&Bfe(Mfe,Ife),jfe.point=Pue},polygonStart:function(){Afe=!0},polygonEnd:function(){Afe=null},result:function(){var e=+Nfe;return Nfe=new qs,e}};function Lfe(e,t){jfe.point=Bfe,Mfe=Rfe=e,Ife=Dfe=t}function Bfe(e,t){Rfe-=e,Dfe-=t,Nfe.add(xue(Rfe*Rfe+Dfe*Dfe)),Rfe=e,Dfe=t}function Ffe(){this._string=[]}function zfe(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Hfe(e){return function(t){var n=new Ufe;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ufe(){}function Vfe(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Due(n,e.stream(ofe)),t(ofe.result()),null!=r&&e.clipExtent(r),e}function Gfe(e,t,n){return Vfe(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])},n)}function Xfe(e,t,n){return Gfe(e,[[0,0],t],n)}function Wfe(e,t,n){return Vfe(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])},n)}function Yfe(e,t,n){return Vfe(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])},n)}Ffe.prototype={_radius:4.5,_circle:zfe(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=zfe(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Ufe.prototype={constructor:Ufe,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var qfe=mue(30*hue);function $fe(e,t){return+t?function(e,t){function n(r,i,o,a,s,l,c,u,h,p,f,d,m,g){var y=c-r,v=u-i,b=y*y+v*v;if(b>4*t&&m--){var _=a+p,w=s+f,T=l+d,x=xue(_*_+w*w+T*T),E=kue(T/=x),S=pue(pue(T)-1)<iue||pue(o-h)<iue?(o+h)/2:due(w,_),k=e(S,E),O=k[0],P=k[1],C=O-r,A=P-i,M=v*C-y*A;(M*M/b>t||pue((y*C+v*A)/b-.5)>.3||a*p+s*f+l*d<qfe)&&(n(r,i,o,a,s,l,O,P,S,_/=x,w/=x,T,m,g),g.point(O,P),n(O,P,S,_,w,T,c,u,h,p,f,d,m,g))}}return function(t){var r,i,o,a,s,l,c,u,h,p,f,d,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=_},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){u=NaN,m.point=v,t.lineStart()}function v(r,i){var o=que([r,i]),a=e(r,i);n(u,h,c,p,f,d,u=a[0],h=a[1],c=r,p=o[0],f=o[1],d=o[2],16,t),t.point(u,h)}function b(){m.point=g,t.lineEnd()}function _(){y(),m.point=w,m.lineEnd=T}function w(e,t){v(r=e,t),i=u,o=h,a=p,s=f,l=d,m.point=v}function T(){n(u,h,c,p,f,d,i,o,r,a,s,l,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return Hfe({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var Kfe=Hfe({point:function(e,t){this.stream.point(e*hue,t*hue)}});function Zfe(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=mue(o),s=wue(o),l=a*e,c=s*e,u=a/e,h=s/e,p=(s*n-a*t)/e,f=(s*t+a*n)/e;function d(e,o){return[l*(e*=r)-c*(o*=i)+t,n-c*e-l*o]}return d.invert=function(e,t){return[r*(u*e-h*t+p),i*(f-h*e-u*t)]},d}function Qfe(e){return Jfe(function(){return e})()}function Jfe(e){var t,n,r,i,o,a,s,l,c,u,h=150,p=480,f=250,d=0,m=0,g=0,y=0,v=0,b=0,_=1,w=1,T=null,x=mpe,E=null,S=Vpe,k=.5;function O(e){return l(e[0]*hue,e[1]*hue)}function P(e){return(e=l.invert(e[0],e[1]))&&[e[0]*uue,e[1]*uue]}function C(){var e=Zfe(h,0,0,_,w,b).apply(null,t(d,m)),r=Zfe(h,p-e[0],f-e[1],_,w,b);return n=Qhe(g,y,v),s=Khe(t,r),l=Khe(n,s),a=$fe(s,k),A()}function A(){return c=u=null,O}return O.stream=function(e){return c&&u===e?c:c=Kfe(function(e){return Hfe({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(x(a(S(u=e)))))},O.preclip=function(e){return arguments.length?(x=e,T=void 0,A()):x},O.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,A()):S},O.clipAngle=function(e){return arguments.length?(x=+e?gpe(T=e*hue):(T=null,mpe),A()):T*uue},O.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,Vpe):bpe(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),A()):null==E?null:[[E,r],[i,o]]},O.scale=function(e){return arguments.length?(h=+e,C()):h},O.translate=function(e){return arguments.length?(p=+e[0],f=+e[1],C()):[p,f]},O.center=function(e){return arguments.length?(d=e[0]%360*hue,m=e[1]%360*hue,C()):[d*uue,m*uue]},O.rotate=function(e){return arguments.length?(g=e[0]%360*hue,y=e[1]%360*hue,v=e.length>2?e[2]%360*hue:0,C()):[g*uue,y*uue,v*uue]},O.angle=function(e){return arguments.length?(b=e%360*hue,C()):b*uue},O.reflectX=function(e){return arguments.length?(_=e?-1:1,C()):_<0},O.reflectY=function(e){return arguments.length?(w=e?-1:1,C()):w<0},O.precision=function(e){return arguments.length?(a=$fe(s,k=e*e),A()):xue(k)},O.fitExtent=function(e,t){return Gfe(O,e,t)},O.fitSize=function(e,t){return Xfe(O,e,t)},O.fitWidth=function(e,t){return Wfe(O,e,t)},O.fitHeight=function(e,t){return Yfe(O,e,t)},function(){return t=e.apply(this,arguments),O.invert=t.invert&&P,C()}}function ede(e){var t=0,n=aue/3,r=Jfe(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*hue,n=e[1]*hue):[t*uue,n*uue]},i}function tde(e,t){var n=wue(e),r=(n+wue(t))/2;if(pue(r)<iue)return function(e){var t=mue(e);function n(e,n){return[e*t,wue(n)/t]}return n.invert=function(e,n){return[e/t,kue(n*t)]},n}(e);var i=1+n*(2*r-n),o=xue(i)/r;function a(e,t){var n=xue(i-2*r*wue(t))/r;return[n*wue(e*=r),o-n*mue(e)]}return a.invert=function(e,t){var n=o-t,a=due(e,pue(n))*Tue(n);return n*r<0&&(a-=aue*Tue(e)*Tue(n)),[a/r,kue((i-(e*e+n*n)*r*r)/(2*r))]},a}function nde(){return ede(tde).scale(155.424).center([0,33.6442])}function rde(){return nde().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ide(e){return function(t,n){var r=mue(t),i=mue(n),o=e(r*i);return o===1/0?[2,0]:[o*i*wue(t),o*wue(n)]}}function ode(e){return function(t,n){var r=xue(t*t+n*n),i=e(r),o=wue(i),a=mue(i);return[due(t*o,r*a),kue(r&&n*o/r)]}}var ade=ide(function(e){return xue(2/(1+e))});ade.invert=ode(function(e){return 2*kue(e/2)});var sde=ide(function(e){return(e=Sue(e))&&e/wue(e)});function lde(e,t){return[e,bue(Eue((sue+t)/2))]}function cde(e){var t,n,r,i=Qfe(e),o=i.center,a=i.scale,s=i.translate,l=i.clipExtent,c=null;function u(){var o=aue*a(),s=i(npe(i.rotate()).invert([0,0]));return l(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===lde?[[Math.max(s[0]-o,c),t],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),u()):a()},i.translate=function(e){return arguments.length?(s(e),u()):s()},i.center=function(e){return arguments.length?(o(e),u()):o()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),u()):null==c?null:[[c,t],[n,r]]},u()}function ude(e){return Eue((sue+e)/2)}function hde(e,t){var n=mue(e),r=e===t?wue(e):bue(n/mue(t))/bue(ude(t)/ude(e)),i=n*_ue(ude(e),r)/r;if(!r)return lde;function o(e,t){i>0?t<-sue+iue&&(t=-sue+iue):t>sue-iue&&(t=sue-iue);var n=i/_ue(ude(t),r);return[n*wue(r*e),i-n*mue(r*e)]}return o.invert=function(e,t){var n=i-t,o=Tue(r)*xue(e*e+n*n),a=due(e,pue(n))*Tue(n);return n*r<0&&(a-=aue*Tue(e)*Tue(n)),[a/r,2*fue(_ue(i/o,1/r))-sue]},o}function pde(e,t){return[e,t]}function fde(e,t){var n=mue(e),r=e===t?wue(e):(n-mue(t))/(t-e),i=n/r+e;if(pue(r)<iue)return pde;function o(e,t){var n=i-t,o=r*e;return[n*wue(o),i-n*mue(o)]}return o.invert=function(e,t){var n=i-t,o=due(e,pue(n))*Tue(n);return n*r<0&&(o-=aue*Tue(e)*Tue(n)),[o/r,i-Tue(r)*xue(e*e+n*n)]},o}sde.invert=ode(function(e){return e}),lde.invert=function(e,t){return[e,2*fue(yue(t))-sue]},pde.invert=pde;var dde=1.340264,mde=-.081106,gde=893e-6,yde=.003796,vde=xue(3)/2;function bde(e,t){var n=kue(vde*wue(t)),r=n*n,i=r*r*r;return[e*mue(n)/(vde*(dde+3*mde*r+i*(7*gde+9*yde*r))),n*(dde+mde*r+i*(gde+yde*r))]}function _de(e,t){var n=mue(t),r=mue(e)*n;return[n*wue(e)/r,wue(t)/r]}function wde(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Tde(e,t){return[mue(t)*wue(e),wue(t)]}function xde(e,t){var n=mue(t),r=1+mue(e)*n;return[n*wue(e)/r,wue(t)/r]}function Ede(e,t){return[bue(Eue((sue+t)/2)),-e]}bde.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(dde+mde*i+o*(gde+yde*i))-t)/(dde+3*mde*i+o*(7*gde+9*yde*i)))*r)*i*i,!(pue(n)<oue));++a);return[vde*e*(dde+3*mde*i+o*(7*gde+9*yde*i))/mue(r),kue(wue(r)/vde)]},_de.invert=ode(fue),wde.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(pue(n)>iue&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Tde.invert=ode(kue),xde.invert=ode(function(e){return 2*fue(e)}),Ede.invert=function(e,t){return[-t,2*fue(yue(e))-sue]};const Sde=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:rde,geoAlbersUsa:function(){var e,t,n,r,i,o,a=rde(),s=nde().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=nde().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function h(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(e)},u.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([a.stream(t=n),s.stream(n),l.stream(n)])},u.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),l.precision(e),h()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),l.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),r=s.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+iue,u+.12*t+iue],[o-.214*t-iue,u+.234*t-iue]]).stream(c),i=l.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+iue,u+.166*t+iue],[o-.115*t-iue,u+.234*t-iue]]).stream(c),h()},u.fitExtent=function(e,t){return Gfe(u,e,t)},u.fitSize=function(e,t){return Xfe(u,e,t)},u.fitWidth=function(e,t){return Wfe(u,e,t)},u.fitHeight=function(e,t){return Yfe(u,e,t)},u.scale(1070)},geoArea:function(e){return Hue=new qs,Due(e,Uue),2*Hue},geoAzimuthalEqualArea:function(){return Qfe(ade).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:ade,geoAzimuthalEquidistant:function(){return Qfe(sde).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:sde,geoBounds:function(e){var t,n,r,i,o,a,s;if(rhe=nhe=-(ehe=the=1/0),che=[],Due(e,hhe),n=che.length){for(che.sort(_he),t=1,o=[r=che[0]];t<n;++t)whe(r,(i=che[t])[0])||whe(r,i[1])?(bhe(r[0],i[1])>bhe(r[0],r[1])&&(r[1]=i[1]),bhe(i[0],r[1])>bhe(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=bhe(r[1],i[0]))>a&&(a=s,ehe=i[0],nhe=r[1])}return che=uhe=null,ehe===1/0||the===1/0?[[NaN,NaN],[NaN,NaN]]:[[ehe,the],[nhe,rhe]]},geoCentroid:function(e){The=xhe=Ehe=She=khe=Ohe=Phe=Che=0,Ahe=new qs,Mhe=new qs,Ihe=new qs,Due(e,Bhe);var t=+Ahe,n=+Mhe,r=+Ihe,i=vue(t,n,r);return i<oue&&(t=Ohe,n=Phe,r=Che,xhe<iue&&(t=Ehe,n=She,r=khe),(i=vue(t,n,r))<oue)?[NaN,NaN]:[due(n,t)*uue,kue(r/i)*uue]},geoCircle:function(){var e,t,n=$he([0,0]),r=$he(90),i=$he(6),o={point:function(n,r){e.push(n=t(n,r)),n[0]*=uue,n[1]*=uue}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*hue,l=i.apply(this,arguments)*hue;return e=[],t=Qhe(-a[0]*hue,-a[1]*hue,0).invert,rpe(o,s,l,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return a.center=function(e){return arguments.length?(n="function"==typeof e?e:$he([+e[0],+e[1]]),a):n},a.radius=function(e){return arguments.length?(r="function"==typeof e?e:$he(+e),a):r},a.precision=function(e){return arguments.length?(i="function"==typeof e?e:$he(+e),a):i},a},geoClipAntimeridian:mpe,geoClipCircle:gpe,geoClipExtent:function(){var e,t,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=bpe(r,i,o,a)(t=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],e=t=null,n):[[r,i],[o,a]]}}},geoClipRectangle:bpe,geoConicConformal:function(){return ede(hde).scale(109.5).parallels([30,30])},geoConicConformalRaw:hde,geoConicEqualArea:nde,geoConicEqualAreaRaw:tde,geoConicEquidistant:function(){return ede(fde).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:fde,geoContains:function(e,t){return(e&&Ipe.hasOwnProperty(e.type)?Ipe[e.type]:Dpe)(e,t)},geoDistance:Mpe,geoEqualEarth:function(){return Qfe(bde).scale(177.158)},geoEqualEarthRaw:bde,geoEquirectangular:function(){return Qfe(pde).scale(152.63)},geoEquirectangularRaw:pde,geoGnomonic:function(){return Qfe(_de).scale(144.049).clipAngle(60)},geoGnomonicRaw:_de,geoGraticule:Upe,geoGraticule10:function(){return Upe()()},geoIdentity:function(){var e,t,n,r,i,o,a,s=1,l=0,c=0,u=1,h=1,p=0,f=null,d=1,m=1,g=Hfe({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=Vpe;function v(){return d=s*u,m=s*h,o=a=null,b}function b(n){var r=n[0]*d,i=n[1]*m;if(p){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+l,i+c]}return b.invert=function(n){var r=n[0]-l,i=n[1]-c;if(p){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/d,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,f=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(f=n=r=i=null,Vpe):bpe(f=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==f?null:[[f,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(l=+e[0],c=+e[1],v()):[l,c]},b.angle=function(n){return arguments.length?(t=wue(p=n%360*hue),e=mue(p),v()):p*uue},b.reflectX=function(e){return arguments.length?(u=e?-1:1,v()):u<0},b.reflectY=function(e){return arguments.length?(h=e?-1:1,v()):h<0},b.fitExtent=function(e,t){return Gfe(b,e,t)},b.fitSize=function(e,t){return Xfe(b,e,t)},b.fitWidth=function(e,t){return Wfe(b,e,t)},b.fitHeight=function(e,t){return Yfe(b,e,t)},b},geoInterpolate:function(e,t){var n=e[0]*hue,r=e[1]*hue,i=t[0]*hue,o=t[1]*hue,a=mue(r),s=wue(r),l=mue(o),c=wue(o),u=a*mue(n),h=a*wue(n),p=l*mue(i),f=l*wue(i),d=2*kue(xue(Oue(o-r)+a*l*Oue(i-n))),m=wue(d),g=d?function(e){var t=wue(e*=d)/m,n=wue(d-e)/m,r=n*u+t*p,i=n*h+t*f,o=n*s+t*c;return[due(i,r)*uue,due(o,xue(r*r+i*i))*uue]}:function(){return[n*uue,r*uue]};return g.distance=d,g},geoLength:Ppe,geoMercator:function(){return cde(lde).scale(961/cue)},geoMercatorRaw:lde,geoNaturalEarth1:function(){return Qfe(wde).scale(175.295)},geoNaturalEarth1Raw:wde,geoOrthographic:function(){return Qfe(Tde).scale(249.5).clipAngle(90+iue)},geoOrthographicRaw:Tde,geoPath:function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),Due(e,n(r))),r.result()}return o.area=function(e){return Due(e,n(Kpe)),Kpe.result()},o.measure=function(e){return Due(e,n(jfe)),jfe.result()},o.bounds=function(e){return Due(e,n(ofe)),ofe.result()},o.centroid=function(e){return Due(e,n(bfe)),bfe.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,Vpe):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new Ffe):new Cfe(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},geoProjection:Qfe,geoProjectionMutator:Jfe,geoRotation:npe,geoStereographic:function(){return Qfe(xde).scale(250).clipAngle(142)},geoStereographicRaw:xde,geoStream:Due,geoTransform:function(e){return{stream:Hfe(e)}},geoTransverseMercator:function(){var e=cde(Ede),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:Ede},Symbol.toStringTag,{value:"Module"}));var kde="$";function Ode(){}function Pde(e,t){var n=new Ode;if(e instanceof Ode)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Cde(){}Ode.prototype=Pde.prototype={constructor:Ode,has:function(e){return kde+e in this},get:function(e){return this[kde+e]},set:function(e,t){return this[kde+e]=t,this},remove:function(e){var t=kde+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===kde&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===kde&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===kde&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===kde&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===kde&&++e;return e},empty:function(){for(var e in this)if(e[0]===kde)return!1;return!0},each:function(e){for(var t in this)t[0]===kde&&e(this[t],t.slice(1),this)}};var Ade=Pde.prototype;Cde.prototype={constructor:Cde,has:Ade.has,add:function(e){return this[kde+(e+="")]=e,this},remove:Ade.remove,clear:Ade.clear,values:Ade.keys,size:Ade.size,empty:Ade.empty,each:Ade.each};var Mde={value:function(){}};function Ide(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Rde(r)}function Rde(e){this._=e}function Dde(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Nde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Mde,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function jde(e,t){var n,r,i,o,a=Ide("beforesend","progress","load","error"),s=Pde(),l=new XMLHttpRequest,c=null,u=null,h=0;function p(e){var t,r=l.status;if(!r&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||r>=200&&r<300||304===r){if(i)try{t=i.call(n,l)}catch(o){return void a.call("error",n,o)}else t=l;a.call("load",n,t)}else a.call("error",n,e)}if(typeof XDomainRequest<"u"&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=p:l.onreadystatechange=function(e){l.readyState>3&&p(e)},l.onprogress=function(e){a.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(null==t?s.remove(e):s.set(e,t+""),n)},mimeType:function(e){return arguments.length?(r=null==e?null:e+"",n):r},responseType:function(e){return arguments.length?(o=e,n):o},timeout:function(e){return arguments.length?(h=+e,n):h},user:function(e){return arguments.length<1?c:(c=null==e?null:e+"",n)},password:function(e){return arguments.length<1?u:(u=null==e?null:e+"",n)},response:function(e){return i=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,i,p){return l.open(t,e,!0,c,u),null!=r&&!s.has("accept")&&s.set("accept",r+",*/*"),l.setRequestHeader&&s.each(function(e,t){l.setRequestHeader(t,e)}),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=o&&(l.responseType=o),h>0&&(l.timeout=h),null==p&&"function"==typeof i&&(p=i,i=null),null!=p&&1===p.length&&(p=function(e){return function(t,n){e(null==t?n:null)}}(p)),null!=p&&n.on("error",p).on("load",function(e){p(null,e)}),a.call("beforesend",n,l),l.send(i??null),n},abort:function(){return l.abort(),n},on:function(){var e=a.on.apply(a,arguments);return e===a?n:e}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return n.get(t)}return n}function Lde(e,t){return function(n,r){var i=jde(n).mimeType(e).response(t);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}}Rde.prototype=Ide.prototype={constructor:Rde,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=Nde(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Nde(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=Dde(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Rde(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Bde=Lde("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),Fde=Lde("application/json",function(e){return JSON.parse(e.responseText)}),zde=Lde("text/plain",function(e){return e.responseText}),Hde=Lde("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var Ude={},Vde={};function Gde(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function Xde(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function Wde(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Yde(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function(e){return e<0?"-"+Wde(-e,6):e>9999?"+"+Wde(e,6):Wde(e,4)}(e.getUTCFullYear())+"-"+Wde(e.getUTCMonth()+1,2)+"-"+Wde(e.getUTCDate(),2)+(i?"T"+Wde(t,2)+":"+Wde(n,2)+":"+Wde(r,2)+"."+Wde(i,3)+"Z":r?"T"+Wde(t,2)+":"+Wde(n,2)+":"+Wde(r,2)+"Z":n||t?"T"+Wde(t,2)+":"+Wde(n,2)+"Z":"")}function qde(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return Vde;if(c)return c=!1,Ude;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=u())!==Vde;){for(var h=[];r!==Ude&&r!==Vde;)h.push(r),r=u();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?Yde(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Gde(e);return function(r,i){return t(n(r),i,e)}}(e,t):Gde(e)});return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Xde(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Xde(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var $de=qde(",").parse,Kde=qde("\t").parse;function Zde(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=jde(n).mimeType(e);return o.row=function(e){return arguments.length?o.response(function(e,t){return function(n){return e(n.responseText,t)}}(t,r=e)):r},o.row(r),i?o.get(i):o}}const Qde=Zde("text/csv",$de),Jde=Zde("text/tab-separated-values",Kde),eme=Object.freeze(Object.defineProperty({__proto__:null,csv:Qde,html:Bde,json:Fde,request:jde,text:zde,tsv:Jde,xml:Hde},Symbol.toStringTag,{value:"Module"}));function tme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nme(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nme(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function rme(e,t,n){return t=ome(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ime()?Reflect.construct(t,n||[],ome(e).constructor):t.apply(e,n))}function ime(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ime=function(){return!!e})()}function ome(e){return(ome=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ame(e,t){return(ame=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const sme={pointerEvents:"all"};let lme=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rme(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ame(e,t)}(t,e),tme(t,[{key:"getControls",value:function(e){return i.createElement(OZ,{imgStyleAdd:sme,imgStyleClose:sme,imgStyleMove:sme,imgStyleSettings:sme,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:e,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}])}(A6);function cme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ume(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ume(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function hme(e,t,n){return t=dme(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pme()?Reflect.construct(t,n||[],dme(e).constructor):t.apply(e,n))}function pme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pme=function(){return!!e})()}function fme(){return fme=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=dme(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},fme.apply(null,arguments)}function dme(e){return(dme=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mme(e,t){return(mme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let gme=function(e){function t(e,n){var r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),r=hme(this,t,[e,n]);const{registerViewportChanged:i,removeViewportChanged:o}=e,a=a_.nice();return r.uid=a,r.removeViewportChanged=o,r.viewportXDomain=null,r.viewportYDomain=null,i(a,r.viewportChanged.bind(r)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mme(e,t)}(t,e),cme(t,[{key:"viewportChanged",value:function(e,t){const n=e.domain(),r=t.domain();this.viewportXDomain=n,this.viewportYDomain=r,this.draw()}},{key:"draw",value:function(){const e=this.pMain;if(!this.viewportXDomain||!this.viewportYDomain)return;e.clear(),e.lineStyle(1,255,1),e.beginFill(16740363,1);const t=this._xScale(this.viewportXDomain[0]),n=this._yScale(this.viewportYDomain[0]),r=this._xScale(this.viewportXDomain[1])-this._xScale(this.viewportXDomain[0]),i=this._yScale(this.viewportYDomain[1])-this._yScale(this.viewportYDomain[0]);this.pMain.drawRect(t,n,r,i)}},{key:"zoomed",value:function(e,t){this.xScale(e),this.yScale(t),this.draw()}},{key:"setPosition",value:function(e){(function(e,t,n){var r=fme(dme(e.prototype),t,n);return"function"==typeof r?function(e){return r.apply(n,e)}:r})(t,"setPosition",this)([e]),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.draw()}}])}(zte);function yme(e){this.size=0,this.limit=e,this._keymap={}}Object.assign(yme.prototype,{put:function(e,t){const n={key:e,value:t};if(this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size+=1},get:function(e,t){const n=this._keymap[e];if(void 0!==n)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),t?n:n.value},find:function(e){return this._keymap[e]},keys:function(){return Object.keys(this._keymap)},set:function(e,t){const n=this.get(e,!0);let r;return n?(r=n.value,n.value=t):(r=this.put(e,t),r&&(r=r.value)),r},shift:function(){const e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e},remove:function(e){const t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value},removeAll:function(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}},forEach:function(e,t,n){let r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.tail;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.head;r;)e.call(t,r.key,r.value,this),r=r.newer},toJSON:function(){const e=[];let t=this.head;for(;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},toString:function(){let e="",t=this.head;for(;t;)e+=`${String(t.key)}:${t.value}`,t=t.newer,t&&(e+=" < ");return e}});const vme="2.0.0",bme={...rT,IS_TRACK_RANGE_SELECTABLE:Ax,OPTIONS_INFO:l8},_me={d3Array:Zl,d3Axis:Jre,d3Brush:R$,d3Color:hu,d3Drag:KG,d3Dsv:z_,d3Format:ch,d3Geo:Sde,d3Queue:OY,d3Request:eme,d3Scale:ed,d3Selection:vm,d3Transition:qX,d3Zoom:cW,PIXI:bme.GLOBALS.PIXI,mix:uQ,slugid:a_},wme={DataFetcher:Gte,GBKDataFetcher:ene,LocalDataFetcher:rne,getDataFetcher:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Tme;const i=n[e.type];return i?new i.dataFetcher(r,e,t):"genbank"===e.type?new ene(e,t):"local-tiles"===e.type?new rne(e,t):new Gte(e,t)}},Tme={chromosomes:{ChromosomeInfo:WW,SearchField:WY},libraries:_me,tracks:{Annotations1dTrack:Woe,Annotations2dTrack:tae,ArrowheadDomainsTrack:hae,BarTrack:eoe,BedLikeTrack:Kne,CNVIntervalTrack:vae,Chromosome2DAnnotations:ose,Chromosome2DLabels:fse,ChromosomeGrid:Tse,CombinedTrack:OT,CrossRule:fce,DivergentBarTrack:soe,HeatmapTiledPixiTrack:lre,Horizontal1dHeatmapTrack:moe,Horizontal2DDomainsTrack:Kae,HorizontalChromosomeLabels:Ise,HorizontalGeneAnnotationsTrack:Bae,HorizontalHeatmapTrack:Kse,HorizontalLine1DPixiTrack:Gie,HorizontalMultivecTrack:Soe,HorizontalPoint1DPixiTrack:Doe,HorizontalRule:Sce,HorizontalTiled1DPixiTrack:Nne,HorizontalTiledPlot:i7,HorizontalTrack:B6,Id2DTiledPixiTrack:yre,IdHorizontal1DTiledPixiTrack:Sre,IdVertical1DTiledPixiTrack:Hre,LeftAxisTrack:mie,MapboxTilesTrack:Uce,MoveableTrack:A6,OSMTileIdsTrack:Kce,OSMTilesTrack:Dce,OverlayTrack:kie,PixiTrack:zte,RasterTilesTrack:rue,SVGTrack:aie,SquareMarkersTrack:Hse,Tiled1DPixiTrack:kne,TiledPixiTrack:yne,TopAxisTrack:Nie,Track:Mte,ValueIntervalTrack:ule,VerticalRule:ice,VerticalTiled1DPixiTrack:Rre,VerticalTrack:lme,ViewportTracker2D:ble,ViewportTracker2DPixi:gme,ViewportTrackerHorizontal:Ple,ViewportTrackerVertical:Lle},dataFetchers:wme,factories:{ContextMenuItem:YZ,DataFetcher:Gte,LruCache:yme},services:GW,utils:gW,configs:bme,VERSION:vme},xme="_track-renderer_11dwb_1",Eme="_track-renderer-element_11dwb_5",Sme="_track-renderer-events_11dwb_6";function kme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ome(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ome(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Pme(e,t,n){return t=Ame(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Cme()?Reflect.construct(t,n||[],Ame(e).constructor):t.apply(e,n))}function Cme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cme=function(){return!!e})()}function Ame(e){return(Ame=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mme(e,t){return(Mme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}const{getDataFetcher:Ime}=Tme.dataFetchers;let Rme=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pme(this,t,[e])).dragging=!1,n.element=null,n.eventTracker=null,n.eventTrackerOld=null,n.closing=!1,n.yPositionOffset=0,n.xPositionOffset=0,n.scrollTop=0,n.scrollTimeout=null,n.activeTransitions=0,n.zoomTransform=QX,n.windowScrolledBound=n.windowScrolled.bind(n),n.zoomStartedBound=n.zoomStarted.bind(n),n.zoomedBound=n.zoomed.bind(n),n.zoomEndedBound=n.zoomEnded.bind(n),n.uid=a_.nice(),n.viewUid=n.props.uid,n.availableForPlugins={...Tme,services:{...Tme.services,pubSub:n.props.pubSub,pixiRenderer:n.props.pixiRenderer}},n.mounted=!1,n.emptyZoomBehavior=lW(),n.currentProps=e,n.prevPropsStr="",n.zoomBehavior=lW().filter(e=>!(e.target.classList.contains("no-zoom")||e.target.classList.contains("react-resizable-handle"))).on("start",n.zoomStartedBound).on("zoom",n.zoomedBound).on("end",n.zoomEndedBound),n.zoomTransform=QX,n.prevZoomTransform=QX,n.initialXDomain=[0,1],n.initialYDomain=[0,1],n.xDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],n.yDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],n.zoomLimits=[0,Number.MAX_SAFE_INTEGER],n.prevCenterX=n.currentProps.paddingLeft+n.currentProps.leftWidth+n.currentProps.centerWidth/2,n.prevCenterY=n.currentProps.paddingTop+n.currentProps.topHeight+n.currentProps.centerHeight/2,n.cumCenterXOffset=0,n.cumCenterYOffset=0,n.setUpInitialScales(n.currentProps.initialXDomain,n.currentProps.initialYDomain,n.currentProps.xDomainLimits,n.currentProps.yDomainLimits,n.currentProps.zoomLimits),n.setUpScales(),n.trackDefObjects={},n.metaTracks={},n.pubSubs=[],window.higlassTracksByType)for(const t in window.higlassTracksByType)qw[t]=window.higlassTracksByType[t].config;return n.boundForwardEvent=n.forwardEvent.bind(n),n.boundScrollEvent=n.scrollEvent.bind(n),n.boundForwardContextMenu=n.forwardContextMenu.bind(n),n.dispatchEventBound=n.dispatchEvent.bind(n),n.zoomToDataPosHandlerBound=n.zoomToDataPosHandler.bind(n),n.onScrollHandlerBound=n.onScrollHandler.bind(n),n.elementPos={height:0,width:0,left:0,top:0},n.elementSelection=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mme(e,t)}(t,e),kme(t,[{key:"xScale",get:function(){if(!this._xScale)throw new Error("xScale is not defined");return this._xScale}},{key:"yScale",get:function(){if(!this._yScale)throw new Error("yScale is not defined");return this._yScale}},{key:"UNSAFE_componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.event",this.dispatchEventBound)),this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandlerBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.scroll",this.onScrollHandlerBound))}},{key:"componentDidMount",value:function(){if(!this.element)throw new Error("Component did not mount, this.element is not defined.");if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=pm(this.element),this.pStage=new ow.PIXI.Graphics,this.pMask=new ow.PIXI.Graphics,this.pOutline=new ow.PIXI.Graphics,this.pBackground=new ow.PIXI.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pOutline),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),!this.currentProps.svgElement||!this.currentProps.canvasElement)return;this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();const e=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],t=this.svgElement.getBoundingClientRect(),n=[[Math.max(e[0][0],0),Math.max(e[0][1],0)],[Math.min(e[1][0],t.width),Math.min(e[1][1],t.height)]];this.zoomBehavior.extent(n).translateExtent(e).scaleExtent(this.zoomLimits)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(!e.svgElement||!e.canvasElement)return;const t=this.updatablePropsToString(e);if(this.currentProps=e,this.prevPropsStr===t)return;this.setBackground();for(const o in this.trackDefObjects){this.trackDefObjects[o].trackObject.delayDrawing=!0}this.prevPropsStr=t,this.setUpInitialScales(e.initialXDomain,e.initialYDomain,e.xDomainLimits,e.yDomainLimits,e.zoomLimits),this.setUpScales(e.width!==this.props.width||e.height!==this.props.height),this.svgElement=e.svgElement;const n=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],r=this.svgElement.getBoundingClientRect(),i=[[Math.max(n[0][0],0),Math.max(n[0][1],0)],[Math.min(n[1][0],r.width),Math.min(n[1][1],r.height)]];this.zoomBehavior.extent(i).translateExtent(n).scaleExtent(this.zoomLimits),this.syncTrackObjects(e.positionedTracks),this.syncMetaTracks(e.metaTracks);for(const o of e.positionedTracks){const e=o.track.options,t=this.trackDefObjects[o.track.uid].trackObject;if(t.rerender(e),pT(o.track)){const e={};for(const t of o.track.contents)e[t.uid]=t;for(const n in t.createdTracks)t.createdTracks[n].rerender(e[n].options)}}this.props.onNewTilesLoaded();for(const o in this.trackDefObjects){const e=this.trackDefObjects[o].trackObject;e.delayDrawing=!1,e.draw()}}},{key:"componentDidUpdate",value:function(e){(this.props.initialXDomain[0]!==e.initialXDomain[0]||this.props.initialXDomain[1]!==e.initialXDomain[1]||this.props.initialYDomain[0]!==e.initialYDomain[0]||this.props.initialYDomain[1]!==e.initialYDomain[1])&&this.element&&(this.element.__zoom=QX),e.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),e.zoomable!==this.props.zoomable&&(this.props.zoomable?this.addZoom():this.removeZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){var e,t;this.mounted=!1,this.removeTracks(Object.keys(this.trackDefObjects)),this.removeMetaTracks(Object.keys(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.pStage&&this.currentProps.pixiStage.removeChild(this.pStage),null==(e=this.pMask)||e.destroy(!0),null==(t=this.pStage)||t.destroy(!0),this.pubSubs.forEach(e=>this.props.pubSub.unsubscribe(e)),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(e){e.sourceUid===this.uid&&"contextmenu"!==e.type&&this.element&&sT(e,this.element)}},{key:"isWithin",value:function(e,t){const n=e>=this.elementPos.left&&e<=this.elementPos.width+this.elementPos.left,r=t>=this.elementPos.top&&t<=this.elementPos.height+this.elementPos.top;return n&&r}},{key:"zoomToDataPosHandler",value:function(e){let{pos:t,animateTime:n}=e;this.zoomToDataPos(...t,n)}},{key:"addZoom",value:function(){!this.elementSelection||!this.currentProps.zoomable||(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){var e,t,n,r;null==(e=this.pMask)||e.clear(),null==(t=this.pMask)||t.beginFill(),null==(n=this.pMask)||n.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),null==(r=this.pMask)||r.endFill()}},{key:"setBackground",value:function(){var e,t,n,r,i;const o=this.props.theme===Ew?"black":"white",a=aw((null==(e=this.currentProps.viewOptions)?void 0:e.backgroundColor)??o);null==(t=this.pBackground)||t.clear(),null==(n=this.pBackground)||n.beginFill(a),null==(r=this.pBackground)||r.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),null==(i=this.pBackground)||i.endFill()}},{key:"windowScrolled",value:function(){this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.addZoom()},100)}},{key:"setUpInitialScales",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,1],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,Number.MAX_SAFE_INTEGER];i[0]=null===i[0]?0:i[0],i[1]=null===i[1]?Number.POSITIVE_INFINITY:i[1];const o=e[1]-e[0],a=(t[0]+t[1])/2;if(t[0]=a-o/2,t[1]=a+o/2,e[0]===this.initialXDomain[0]&&e[1]===this.initialXDomain[1]&&t[0]===this.initialYDomain[0]&&t[1]===this.initialYDomain[1]&&n[0]===this.xDomainLimits[0]&&n[1]===this.xDomainLimits[1]&&r[0]===this.yDomainLimits[0]&&r[1]===this.yDomainLimits[1]&&i[0]===this.zoomLimits[0]&&i[1]===this.zoomLimits[1])return;let s,l;this.initialXDomain=e,this.initialYDomain=t,this.xDomainLimits=n,this.yDomainLimits=r,this.zoomLimits=i,this.zoomTransform=QX,this.prevZoomTransform=QX,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=ph().domain([this.currentProps.paddingLeft+this.currentProps.leftWidth,this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([e[0],e[1]]),0===this.currentProps.centerWidth?(s=this.currentProps.paddingTop+this.currentProps.topHeight,l=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight):(s=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,l=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2),this.drawableToDomainY=ph().domain([s,l]).range([t[0],t[1]]),this.prevCenterX=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2}},{key:"updatablePropsToString",value:function(e){return JSON.stringify({positionedTracks:e.positionedTracks,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,width:e.width,height:e.height,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,leftWidth:e.leftWidth,topHeight:e.topHeight,dragging:e.dragging,viewOptions:e.viewOptions})}},{key:"draggingChanged",value:function(e){this.dragging=e,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,n=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2;if(!this.drawableToDomainX||!this.drawableToDomainY)return;const r=(this.drawableToDomainX(t)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,i=(this.drawableToDomainY(n)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=i,this.cumCenterXOffset+=r,this.prevCenterY=n,this.prevCenterX=t;const o=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],a=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];this._xScale=ph().domain(o).range([0,this.currentProps.width]),this._yScale=ph().domain(a).range([0,this.currentProps.height]);for(const s in this.trackDefObjects)this.trackDefObjects[s].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(e)}},{key:"getTrackDef",value:function(e){const t=pw(this.trackDefObjects);for(const[,{trackDef:n,trackObject:r}]of t){if(r===e)return n.track;if(pT(n.track))for(const t of n.track.contents)if(r.createdTracks[t.uid]===e)return t}return null}},{key:"getTrackObject",value:function(e){const t=pw(this.trackDefObjects);for(let n=0;n<t.length;n++){const r=t[n][0],i=t[n][1].trackObject;if(r===e)return i;if(i.createdTracks){const t=pw(i.createdTracks);for(let n=0;n<t.length;n++){const r=t[n][0],i=t[n][1];if(r===e)return i}}}}},{key:"timedUpdatePositionAndDimensions",value:function(){this.closing||!this.element||(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top+this.scrollTop,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(e){const t=Object.keys(this.metaTracks),n=new Set(e.map(e=>e.uid));this.addMetaTracks(e.filter(e=>!this.metaTracks[e.uid])),this.updateMetaTracks(e.filter(e=>this.metaTracks[e.uid])),this.removeMetaTracks(t.filter(e=>!n.has(e)))}},{key:"syncTrackObjects",value:function(e){this.prevTrackDefinitions=JSON.stringify(e);const t={};for(let s=0;s<e.length;s++)t[e[s].track.uid]=e[s];const n=new Set(Object.keys(this.trackDefObjects)),r=new Set(Object.keys(t)),i=new Set([...r].filter(e=>!n.has(e))),o=new Set([...n].filter(e=>!r.has(e))),a=new Set([...r].filter(e=>n.has(e)));this.updateExistingTrackDefs([...a].map(e=>t[e])),this.addNewTracks([...i].map(e=>t[e])),this.updateExistingTrackDefs([...i].map(e=>t[e])),this.removeTracks([...o])}},{key:"addMetaTracks",value:function(e){e.filter(e=>!this.metaTracks[e.uid]).forEach(e=>{this.metaTracks[e.uid]={trackDef:e,trackObject:this.createMetaTrack(e)}})}},{key:"addNewTracks",value:function(e){if(this.currentProps.pixiStage){for(let t=0;t<e.length;t++){const n=e[t],r=this.createTrackObject(n.track);r.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[n.track.uid]={trackDef:n,trackObject:r};const i=this.zoomTransform.rescaleX(this.xScale),o=this.zoomTransform.rescaleY(this.yScale);r.setDimensions([n.width,n.height]),r.zoomed(i,o)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(e){}},{key:"updateExistingTrackDefs",value:function(e){for(const t of e){const e=this.trackDefObjects[t.track.uid];e.trackDef=t,pT(t.track)&&e.trackObject.updateContents(t.track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale)}this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){let e=!1;for(const t in this.trackDefObjects){const n=this.trackDefObjects[t].trackDef,r=this.trackDefObjects[t].trackObject,i=r.position,o=r.dimensions,a=[this.xPositionOffset+n.left,this.yPositionOffset+n.top],s=[n.width,n.height];(!i||a[0]!==i[0]||a[1]!==i[1])&&(r.setPosition(a),e=!0),(!o||s[0]!==o[0]||s[1]!==o[1])&&(r.setDimensions(s),e=!0)}return e}},{key:"removeMetaTracks",value:function(e){e.forEach(e=>{this.metaTracks[e].trackObject.remove(),this.metaTracks[e]=void 0,delete this.metaTracks[e]})}},{key:"removeTracks",value:function(e){for(let t=0;t<e.length;t++)this.trackDefObjects[e[t]].trackObject.remove(),delete this.trackDefObjects[e[t]]}},{key:"setCenter",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.xScale,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.yScale;const s=(this.xScale.invert(1)-this.xScale.invert(0))/n,l=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,c=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,u=l-o(e)*s,h=c-a(t)*s;let p;const f=()=>{const e=QX.translate(u,h).scale(s);this.zoomTransform=e,this.elementSelection&&this.emptyZoomBehavior.transform(this.elementSelection,e),p=this.applyZoomTransform(r)};if(i&&this.elementSelection){let e=this.elementSelection;this.activeTransitions+=1,document.hidden||(e=e.transition().duration(i)),e.call(this.zoomBehavior.transform,QX.translate(u,h).scale(s)).on("end",()=>{f(),this.activeTransitions-=1})}else f();return p}},{key:"valueScaleMove",value:function(e){if(this.zoomStartPos){for(const t of this.getTracksAtPosition(...this.zoomStartPos))t.movedY(e);this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}}},{key:"valueScaleZoom",value:function(e,t){if(!function(e){return"deltaY"in e&&"deltaMode"in e}(e.sourceEvent))return;const n=e.sourceEvent.deltaY,r=e.sourceEvent.deltaMode,i=n*(r?120:1)/500,o=ym(e.sourceEvent,this.props.canvasElement);for(const a of this.getTracksAtPosition(...o)){const e="1d-horizontal"===t?o[1]-a.position[1]:o[0]-a.position[0];a.zoomedY(e,2**i)}this.zoomStartTransform&&(this.zoomTransform=this.zoomStartTransform)}},{key:"zoomed",value:function(e){var t;let n=null;if(this.zoomStartPos){const e=this.getTracksAtPosition(...this.zoomStartPos);if(e.length){const r=e[0],i=this.getTrackDef(r);if(!i)return;null!=(t=qw[i.type])&&t.orientation&&(n=qw[i.type].orientation),r instanceof Hae&&(n="1d-vertical")}}if(n&&e.sourceEvent){if(e.shiftKey||this.valueScaleZooming){if(void 0!==e.sourceEvent.deltaY)return void this.valueScaleZoom(e,n);"1d-horizontal"===n?this.valueScaleMove(e.sourceEvent.movementY):"1d-vertical"===n&&this.valueScaleMove(e.sourceEvent.movementX)}"1d-horizontal"===n&&e.sourceEvent.movementY?this.valueScaleMove(e.sourceEvent.movementY):"1d-vertical"===n&&e.sourceEvent.movementX&&this.valueScaleMove(e.sourceEvent.movementX)}this.zoomTransform=this.currentProps.zoomable?e.transform:QX,this.prevZoomTransform.k!==this.zoomTransform.k||("1d-horizontal"===n?this.zoomTransform=QX.translate(this.zoomTransform.x,this.prevZoomTransform.y).scale(this.zoomTransform.k):"1d-vertical"===n&&(this.zoomTransform=QX.translate(this.prevZoomTransform.x,this.zoomTransform.y).scale(this.zoomTransform.k)),this.element&&(this.element.__zoom=this.zoomTransform)),this.applyZoomTransform(!0),this.prevZoomTransform=this.zoomTransform,this.props.pubSub.publish("app.zoom",e),e.sourceEvent&&(e.sourceEvent.stopPropagation(),e.sourceEvent.preventDefault())}},{key:"getTracksAtPosition",value:function(e,t){const n=[];let r=[];for(const i in this.trackDefObjects){const e=this.trackDefObjects[i].trackObject;e.childTracks?r=r.concat(e.childTracks):r.push(e)}for(const i of r){const r=i.position[0]<=e&&e<=i.position[0]+i.dimensions[0],o=i.position[1]<=t&&t<=i.position[1]+i.dimensions[1];r&&o&&n.push(i)}return n}},{key:"zoomStarted",value:function(e){this.zooming=!0,e?.sourceEvent&&(this.zoomStartPos=ym(e.sourceEvent,this.props.canvasElement),e.sourceEvent.shiftKey&&(this.valueScaleZooming=!0)),this.zoomStartTransform=this.zoomTransform,this.props.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,this.zoomStartPos=null,this.valueScaleZooming&&(this.valueScaleZooming=!1,this.element&&(this.element.__zoom=this.zoomStartTransform)),this.props.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.currentProps,n=t.paddingLeft+t.leftWidth,r=t.paddingTop+t.topHeight;if(!this.xScale||!this.yScale)return;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);const i=ph().domain([n,n+t.centerWidth].map(this.zoomedXScale.invert)).range([0,t.centerWidth]),o=ph().domain([r,r+t.centerHeight].map(this.zoomedYScale.invert)).range([0,t.centerHeight]);for(const a in this.trackDefObjects){const e=this.trackDefObjects[a].trackObject,n=this.trackDefObjects[a].trackDef;let r="unknown";if(qw[n.track.type]&&(r=qw[n.track.type].orientation),"whole"===r){const n=ph().domain([t.paddingLeft,t.width-t.paddingLeft].map(this.zoomedXScale.invert)).range([0,t.width-2*t.paddingLeft]),r=ph().domain([t.paddingTop,t.height-t.paddingTop].map(this.zoomedYScale.invert)).range([0,t.height-2*t.paddingTop]);e.zoomed(n,r);continue}if("gallery"===this.trackDefObjects[a].trackDef.track.position){const n=ph().domain([t.paddingLeft+t.leftWidthNoGallery,t.paddingLeft+t.leftWidth+t.centerWidth+t.galleryDim].map(this.zoomedXScale.invert)).range([0,t.centerWidth+2*t.galleryDim]),r=ph().domain([t.paddingTop+t.topHeightNoGallery,t.paddingTop+t.topHeight+t.centerHeight+t.galleryDim].map(this.zoomedYScale.invert)).range([0,t.centerHeight-2*t.galleryDim]);e.zoomed(n.copy(),r.copy(),this.zoomTransform.k);continue}e.zoomed(i.copy(),o.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,t.paddingLeft+t.leftWidth,t.paddingTop+t.topHeight)}return this.currentXScale=i,this.currentYScale=o,e&&this.currentProps.onScalesChanged(i,o),[i,o]}},{key:"createMetaTrack",value:function(e){e.type;{const n=this.props.pluginTracks[e.type];if(n?.isMetaTrack){const r={getTrackObject:this.getTrackObject.bind(this),onNewTilesLoaded:()=>{this.currentProps.onNewTilesLoaded(e.uid)},definition:e};try{return new n.track(this.availableForPlugins,r,e.options??{})}catch(t){console.error("Plugin meta track",e.type,"failed to instantiate.",t)}}return console.warn(`Unknown meta track of type: ${e.type}`),new rle(this.pStage,{name:"Unknown Track Type",type:e.type})}}},{key:"createTrackObject",value:function(e){const t=this.createLocationAgnosticTrackObject(e);return"left"!==e.position&&"right"!==e.position||"1d-horizontal"!==qw[e.type].orientation?t:new Hae(t)}},{key:"createLocationAgnosticTrackObject",value:function(e){let t=e.data;t||(t={server:lx(e.server??""),tilesetUid:e.tilesetUid}),e.coordSystem&&(t.coordSystem=e.coordSystem);const n=Ime(t,this.props.pubSub,this.props.pluginDataFetchers,this.availableForPlugins);if(!this.pStage||!this.svgElement)throw new Error("No PIXI stage or svg element");const r={id:e.uid,trackUid:e.uid,trackType:e.type,viewUid:this.viewUid,pubSub:this.props.pubSub,scene:this.pStage,dataConfig:t,dataFetcher:n,getLockGroupExtrema:()=>this.currentProps.getLockGroupExtrema(e.uid),handleTilesetInfoReceived:t=>{this.currentProps.onTilesetInfoReceived(e.uid,t)},animate:()=>{this.currentProps.onNewTilesLoaded(e.uid)},svgElement:this.svgElement,isValueScaleLocked:()=>this.currentProps.isValueScaleLocked(e.uid),onValueScaleChanged:()=>{this.currentProps.onValueScaleChanged(e.uid)},onTrackOptionsChanged:t=>{this.currentProps.onTrackOptionsChanged(e.uid,t)},onMouseMoveZoom:this.props.onMouseMoveZoom,chromInfoPath:e.chromInfoPath,isShowGlobalMousePosition:()=>this.props.isShowGlobalMousePosition,getTheme:()=>this.props.theme};switch(e.y&&(r.yPosition=e.y),e.x&&(r.xPosition=e.x),e.projectionXDomain&&(r.projectionXDomain=e.projectionXDomain),e.projectionYDomain&&(r.projectionYDomain=e.projectionYDomain),e.type){case"left-axis":return new mie(r,e.options);case"top-axis":return new Nie(r,e.options);case"heatmap":return new lre(r,e.options);case"multivec":case"vector-heatmap":case"horizontal-multivec":case"horizontal-vector-heatmap":case"vertical-multivec":case"vertical-vector-heatmap":return new Soe(r,e.options);case"1d-heatmap":case"horizontal-1d-heatmap":case"vertical-1d-heatmap":return new moe(r,e.options);case"line":case"horizontal-line":case"vertical-line":return new Gie(r,e.options);case"point":case"horizontal-point":case"vertical-point":return new Doe(r,e.options);case"bar":case"horizontal-bar":case"vertical-bar":return new eoe(r,e.options);case"divergent-bar":case"horizontal-divergent-bar":case"vertical-divergent-bar":return new soe(r,e.options);case"horizontal-1d-tiles":return new Sre(r,e.options);case"vertical-1d-tiles":return new Hre(r,e.options);case"2d-tiles":return new yre(r,e.options);case"stacked-interval":case"top-stacked-interval":case"left-stacked-interval":return new vae(r,e.options);case"viewport-projection-center":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new ble(r,e.options)):new Mte(r,{});case"viewport-projection-horizontal":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new Ple(r,e.options)):new Mte(r,{});case"viewport-projection-vertical":return e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback?(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback,new Lle(r,e.options)):new Mte(r,{});case"gene-annotations":case"horizontal-gene-annotations":case"vertical-gene-annotations":return new Bae(r,e.options);case"2d-rectangle-domains":case"arrowhead-domains":return new hae(r,e.options);case"1d-annotations":case"horizontal-1d-annotations":case"vertical-1d-annotations":return new Woe(r,e.options,!0);case"2d-annotations":return new tae(r,e.options);case"linear-2d-rectangle-domains":case"horizontal-2d-rectangle-domains":case"vertical-2d-rectangle-domains":return new Kae(r,e.options);case"square-markers":return new Hse(r,e.options);case"combined":return r.tracks=e.contents,r.createTrackObject=this.createTrackObject.bind(this),new OT(r);case"2d-chromosome-labels":return new fse(r,e.options);case"horizontal-chromosome-grid":return r.orientation="1d-horizontal",new Tse(r,e.options);case"vertical-chromosome-grid":return r.orientation="1d-vertical",new Tse(r,e.options);case"2d-chromosome-grid":return new Tse(r,e.options);case"chromosome-labels":case"horizontal-chromosome-labels":case"vertical-chromosome-labels":return new Ise(r,e.options);case"linear-heatmap":case"horizontal-heatmap":case"vertical-heatmap":return new Kse(r,e.options);case"2d-chromosome-annotations":return new ose(r,e.options);case"1d-value-interval":case"horizontal-1d-value-interval":case"vertical-1d-value-interval":return new ule(r,e.options);case"osm":case"osm-tiles":return new Dce(r,e.options);case"osm-2d-tile-ids":return new Kce(r,e.options);case"mapbox":case"mapbox-tiles":return new Uce(r,e.options);case"raster-tiles":return new rue(r,e.options);case"bedlike":case"vertical-bedlike":return new Kne(r,e.options);case"overlay-track":return new kie(r,e.options);case"overlay-chromosome-grid-track":return r.isOverlay=!0,new Tse(r,e.options);case"horizontal-rule":return new Sce(r,e.options);case"vertical-rule":return new ice(r,e.options);case"cross-rule":return r.x=e.x,r.y=e.y,new fce(r,e.options);case"simple-svg":return new aie(r,e.options);case"empty":{const t=e.options;return new zte(r,t)}default:{const t=this.props.pluginTracks[e.type];if(t&&!t.isMetaTrack){r.AVAILABLE_FOR_PLUGINS=this.availableForPlugins,r.baseEl=this.baseEl,r.definition=e,e.registerViewportChanged&&e.removeViewportChanged&&e.setDomainsCallback&&(r.registerViewportChanged=e.registerViewportChanged,r.removeViewportChanged=e.removeViewportChanged,r.setDomainsCallback=e.setDomainsCallback);try{return new t.track(this.availableForPlugins,r,e.options??{})}catch(i){console.error("Plugin track",e.type,"failed to instantiate.",i)}}return console.warn("Unknown track type:",e.type),new rle(r,{name:"Unknown Track Type",type:e.type})}}}},{key:"zoomToDataPos",value:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const[a,s,l]=ex(this.xScale.copy().domain([e,t]),this.yScale.copy().domain([n,r])),c=o?o(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(a,s,l,!1,i,c[0],c[1])}},{key:"forwardContextMenu",value:function(e){this.props.disableTrackMenu||e.altKey||(e.preventDefault(),setTimeout(()=>{this.props.pubSub.publish("contextmenu",e)},0))}},{key:"addEventTracker",value:function(){!this.eventTracker||this.eventTracker===this.eventTrackerOld||(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){this.eventTracker&&(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(){this.element&&(this.elementPos=this.element.getBoundingClientRect())}},{key:"forwardEvent",value:function(e){e.sourceUid=this.uid,e.forwarded=!0,this.props.pubSub.publish("app.event",e)}},{key:"onScrollHandler",value:function(e){this.scrollTop=e}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.baseEl=e},className:xs("track-renderer-div",xme),style:{height:this.currentProps.height,width:this.currentProps.width}},i.createElement("div",{ref:e=>{this.element=e},className:xs("track-renderer-element",Eme)}),i.createElement("div",{ref:e=>{this.eventTracker=e},className:xs("track-renderer-events",Sme)},this.currentProps.children))}}])}(i.Component);Rme.defaultProps={pluginDataFetchers:{},pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isShowGlobalMousePosition:!1,isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,paddingLeft:0,paddingTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]},Rme.propTypes={canvasElement:xm.object,centerHeight:xm.number,centerWidth:xm.number,children:xm.array,disableTrackMenu:xm.bool,galleryDim:xm.number,height:xm.number,initialXDomain:xm.array,initialYDomain:xm.array,isShowGlobalMousePosition:xm.bool,isRangeSelection:xm.bool,leftWidth:xm.number,leftWidthNoGallery:xm.number,paddingLeft:xm.number,paddingTop:xm.number,metaTracks:xm.array,onMouseMoveZoom:xm.func,onNewTilesLoaded:xm.func.isRequired,onScalesChanged:xm.func.isRequired,pixiRenderer:xm.object.isRequired,pixiStage:xm.object.isRequired,pluginDataFetchers:xm.object,pluginTracks:xm.object,positionedTracks:xm.array,pubSub:xm.object.isRequired,setCentersFunction:xm.func,svgElement:xm.object.isRequired,theme:xm.symbol.isRequired,topHeight:xm.number,topHeightNoGallery:xm.number,viewOptions:xm.object,width:xm.number,xDomainLimits:xm.array,yDomainLimits:xm.array,valueScaleZoom:xm.bool,zoomable:xm.bool.isRequired,zoomDomain:xm.array,uid:xm.string,zoomLimits:xm.array};const Dme=$Y(fZ(Rme)),Nme=uZ(e=>i.createElement(lme,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})),jme="_vertical-tiled-plot_f3ho8_1";function Lme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bme(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bme(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Fme(e,t,n){return t=Hme(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zme()?Reflect.construct(t,n||[],Hme(e).constructor):t.apply(e,n))}function zme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zme=function(){return!!e})()}function Hme(e){return(Hme=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ume(e,t){return(Ume=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vme(e){return e?.sourceEvent}let Gme=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fme(this,t,[e])).brushBehavior=A$().on("start",n.brushStarted.bind(n)).on("brush",n.brushed.bind(n)).on("end",n.brushedEnded.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ume(e,t)}(t,e),Lme(t,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(e,t){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==e.rangeSelection&&this.moveBrush(e.rangeSelection[0]?e.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==t;if(this.props.rangeSelection!==e.rangeSelection){const n=this.props.is1dRangeSelection?0:1;return this.moveBrush(e.rangeSelection[n]?e.rangeSelection[n]:null,e.rangeSelectionEnd),this.state!==t}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,QT(this.brushEl,AZ["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(e){const t=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,Vme(e)&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(e.selection))}},{key:"brushStarted",value:function(e){!Vme(e)||!e.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(e){if(!this.props.is1dRangeSelection)return;const t=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,e.selection&&e.sourceEvent&&this.props.onRangeSelection&&!t&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(e.selection)),e.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.brushEl)return;const n=e?[this.props.scale(e[0]),this.props.scale(e[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,t?this.brushEl.transition().call(this.brushBehavior.move,n):this.brushEl.call(this.brushBehavior.move,n)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const e=this.props.tracks.map(e=>e.width).reduce(rx,0),t=this.props.tracks.map(e=>Ax(e)).reduce(KT,!1),n=AZ[this.props.isRangeSelectionActive?"track-range-selection-active":"track-range-selection"];return i.createElement("div",{className:jme},t&&i.createElement("svg",{ref:e=>{this.brushEl=pm(e)},className:n,style:{height:this.props.height,width:e},xmlns:"http://www.w3.org/2000/svg"}),i.createElement(Y6,{axis:"x",className:xs(J8.list,J8.stylizedList,J8.horizontalList),component:$6,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:J8.stylizedHelper,itemClass:xs(J8.stylizedItem,J8.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:Nme,items:this.props.tracks.map(e=>({configMenuVisible:e.uid===this.props.configTrackMenuId,uid:e.uid||a_.nice(),height:this.props.height,width:e.width,value:e.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:e}))}}])}(i.Component);function Xme(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{},e=>{}):function(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch{}document.body.removeChild(t)}(e)}function Wme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yme(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yme(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function qme(e,t,n){return t=Kme(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$me()?Reflect.construct(t,n||[],Kme(e).constructor):t.apply(e,n))}function $me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($me=function(){return!!e})()}function Kme(e){return(Kme=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zme(e,t){return(Zme=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Gme.propTypes={configTrackMenuId:xm.string,editable:xm.bool,handleConfigTrack:xm.func,handleResizeTrack:xm.func,handleSortEnd:xm.func,is1dRangeSelection:xm.bool,isRangeSelectionActive:xm.bool,height:xm.number,onAddSeries:xm.func,onCloseTrack:xm.func,onCloseTrackMenuOpened:xm.func,onConfigTrackMenuOpened:xm.func,onRangeSelection:xm.func,onRangeSelectionEnd:xm.func,onRangeSelectionReset:xm.func,onRangeSelectionStart:xm.func,rangeSelection:xm.array,rangeSelectionEnd:xm.bool,referenceAncestor:xm.func,resizeHandles:xm.object,scale:xm.func,tracks:xm.array,tracksControlAlignLeft:xm.bool};let Qme=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qme(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zme(e,t)}(t,e),Wme(t,[{key:"render",value:function(){const e=$Z(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),t=this.props.customItems?i.Children.map(this.props.customItems,e=>i.cloneElement(e,{onMouseEnter:e=>{this.handleOtherMouseEnter(e)}})):null;return i.createElement("div",{ref:e=>{this.div=e},className:xs(zZ,{[HZ]:this.props.theme===Ew}),"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top}},t,t&&i.createElement("hr",{className:GZ}),e,e&&i.createElement("hr",{className:GZ}),this.props.genomePositionSearchBox&&i.createElement(YZ,{onClick:this.copyLocationToClipboard.bind(this),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Copy location under cursor"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:()=>this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Horizontal Rule"),i.createElement(YZ,{onClick:()=>this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Vertical Rule"),i.createElement(YZ,{onClick:()=>this.props.onAddTrack({type:"cross-rule",x:this.props.coords[0],y:this.props.coords[1],position:"whole"}),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Cross Rule"),i.createElement("hr",{className:GZ}),this.hasMatrixTrack(this.props.tracks)&&i.createElement(YZ,{onClick:this.handleAddHorizontalSection.bind(this),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&i.createElement(YZ,{onClick:this.handleAddVerticalSection.bind(this),onMouseEnter:e=>this.handleOtherMouseEnter(e)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(e){return ux(this.props.tracks).filter(e=>"heatmap"===e.type).length>0}},{key:"handleAddHorizontalSection",value:function(){const e=ux(this.props.tracks).filter(e=>"heatmap"===e.type)[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"copyLocationToClipboard",value:function(){var e,t;const n=this.props.tracks[0]&&"center"===this.props.tracks[0].position,r=null==(t=null==(e=this.props.genomePositionSearchBox)?void 0:e.searchField)?void 0:t.chromInfo;if(!r)return console.warn("There needs to be a genome position search box present to copy the location"),void this.props.closeMenu();const i=this.props.coords[0],o=this.props.coords[1],a=Z_(i,r),s=eh(",d");let l=`${a[0]}:${s(a[1])}`;if(n){const e=Z_(o,r);l=`${l} & ${e[0]}:${s(e[1])}`,Xme(l)}else Xme(l);this.props.closeMenu()}},{key:"handleAddVerticalSection",value:function(){const e=ux(this.props.tracks).filter(e=>"heatmap"===e.type)[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:e.server,tilesetUid:e.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}])}(uQ(yQ).with(x8));function Jme(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ege(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ege(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function tge(e,t,n){return t=rge(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nge()?Reflect.construct(t,n||[],rge(e).constructor):t.apply(e,n))}function nge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nge=function(){return!!e})()}function rge(e){return(rge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ige(e,t){return(ige=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Qme.propTypes={coords:xm.array,customItems:xm.array};let oge=function(e){function t(e){var n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),(n=tge(this,t,[e])).closing=!1,n.brushX=C$();const{tracks:r}=n.props;return n.canvasElement=null,n.tracksByUidInit={},[...n.props.tracks.top||[],...n.props.tracks.right||[],...n.props.tracks.bottom||[],...n.props.tracks.left||[],...n.props.tracks.gallery||[],...n.props.tracks.center||[]].forEach(e=>{"combined"===e.type?e.contents.forEach(e=>{n.tracksByUidInit[e.uid]=!1}):n.tracksByUidInit[e.uid]=!1}),n.annotationUid=null,n.annotationCreatedNotified=!1,n.xScale=null,n.yScale=null,n.addUidsToTracks(r),n.trackToReplace=null,n.trackRenderer=null,n.brushSelection=null,n.configTrackMenu=null,n.state={sizeMeasured:!1,height:10,width:10,tracks:r,init:!1,addTrackExtent:null,addTrackPosition:null,customDialog:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],rangeSelectionEnd:!1,chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},n.reset=!0,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(e=>{qw[e]=window.higlassTracksByType[e].config}),n.topHeight=0,n.bottomHeight=0,n.leftWidth=0,n.rightWidth=0,n.centerHeight=0,n.centerWidth=0,n.dragTimeout=null,n.previousPropsStr="",n.brushesCreated={},n.appZoomedBound=n.appZoomed.bind(n),n.handleClickBound=n.handleClick.bind(n),n.contextMenuHandlerBound=n.contextMenuHandler.bind(n),n.handleNoTrackAddedBound=n.handleNoTrackAdded.bind(n),n.handleTracksAddedBound=n.handleTracksAdded.bind(n),n.closeMenusBound=n.closeMenus.bind(n),n.handleAddDivisorBound=n.handleAddDivisor.bind(n),n.handleAddSeriesBound=n.handleAddSeries.bind(n),n.handleChangeTrackDataBound=n.handleChangeTrackData.bind(n),n.handleChangeTrackTypeBound=n.handleChangeTrackType.bind(n),n.handleCloseTrackBound=n.handleCloseTrack.bind(n),n.handleConfigureTrackBound=n.handleConfigureTrack.bind(n),n.handleExportTrackDataBound=n.handleExportTrackData.bind(n),n.handleLockValueScaleBound=n.handleLockValueScale.bind(n),n.handleReplaceTrackBound=n.handleReplaceTrack.bind(n),n.handleTrackOptionsChangedBound=n.handleTrackOptionsChanged.bind(n),n.handleUnlockValueScaleBound=n.handleUnlockValueScale.bind(n),n.onAddTrack=n.handleAddTrack.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ige(e,t)}(t,e),Jme(t,[{key:"waitForDOMAttachment",value:function(e){if(!this.mounted)return;const t=this.divTiledPlot;document.body.contains(t)?e():requestAnimationFrame(()=>this.waitForDOMAttachment(e))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=this.divTiledPlot,this.waitForDOMAttachment(()=>{Ms.ElementQueries.listen(),this.resizeSensor=new Ms.ResizeSensor(this.element.parentNode,this.measureSize.bind(this)),this.measureSize()}),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"getTracksData",value:function(e,t){let n=[];const r=this.listAllTrackObjects();for(const o of e)n=o.track.contents?[...n,...o.track.contents]:[...n,o.track];const i=[];for(const o of n)if("heatmap"===o.type){const e=r.filter(e=>e.id===o.uid)[0],n=e._xScale(t[0][0]),a=e._xScale(t[1][0]),s=e._yScale(t[0][1]),l=e._yScale(t[1][1])-s,c=a-n,u=e.getVisibleRectangleData(n,s,l,c),h=u.data.reduce((e,t)=>e+t,0)/u.data.length;i.push({name:o.options.name,mean:h,trackUid:o.uid})}return i}},{key:"appZoomed",value:function(){if(this.brushCurrent&&this.brushEl){if("horizontal"===this.brushType){const e=[this.xScale(this.brushSelection[0])+this.brushTrack.left,this.xScale(this.brushSelection[1])+this.brushTrack.left];this.brushEl.call(this.brushCurrent.move,e)}if("vertical"===this.brushType){const e=[this.yScale(this.brushSelection[0])+this.brushTrack.top,this.yScale(this.brushSelection[1])+this.brushTrack.top];this.brushEl.call(this.brushCurrent.move,e)}if("2d"===this.brushType){const e=[[this.xScale(this.brushSelection[0][0])+this.brushTrack.left,this.yScale(this.brushSelection[0][1])+this.brushTrack.top],[this.xScale(this.brushSelection[1][0])+this.brushTrack.left,this.yScale(this.brushSelection[1][1])+this.brushTrack.top]];this.brushEl.call(this.brushCurrent.move,e)}}}},{key:"clearOtherBrushes",value:function(e){for(const t of Object.values(this.brushes))t.on("brush",null);for(const t in this.brushes){const n=this.brushes[t];n!==e&&this.brushEls[t].call(n.move,null)}for(const t of Object.values(this.brushes))t.on("brush",()=>this.clearOtherBrushes(t))}},{key:"handleClick",value:function(e){const t=ym(e,this.divTiledPlot);let n=!1;if(this.brushEl){const e=this.brushSelectionRaw,r=this.brushTrack;"2d"===this.brushType?t[0]>=e[0][0]&&t[0]<=e[1][0]&&t[1]>=e[0][1]&&t[1]<=e[1][1]&&(n=!0):"horizontal"===this.brushType?t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=r.top&&t[1]<=r.top+r.height&&(n=!0):"vertical"===this.brushType&&t[1]>=e[0]&&t[1]<=e[1]&&t[0]>=r.left&&t[0]<=r.left+r.width&&(n=!0),n||this.cancelBrushes()}}},{key:"cancelBrushes",value:function(){this.brushEl.call(this.brushCurrent.move,null),this.brushEl=null,this.props.apiPublish("annotationRemoved",this.annotationUid),this.annotationUid=null,this.annotationCreatedNotified=!1,this.removeBrushText()}},{key:"removeBrushText",value:function(){pm(this.divTiledPlot).selectAll(".brush-svg").selectAll(".data-values").remove()}},{key:"enableBrushes",value:function(){pm(this.divTiledPlot).selectAll(".brush-svg").selectAll(".overlay").style("pointer-events","all")}},{key:"disableBrushes",value:function(){pm(this.divTiledPlot).selectAll(".overlay").attr("pointer-events","none"),pm(this.divTiledPlot).selectAll(".brush-rect").attr("pointer-events","none"),pm(this.divTiledPlot).selectAll(".selection").attr("pointer-events","all"),pm(this.divTiledPlot).selectAll(".brush-svg").attr("pointer-events","none")}},{key:"createBrushes",value:function(e){const t={};this.brushCurrent=null;const n=this.props.apiPublish,r=this;for(const i of e){if(t[i.track.uid])continue;let o=null;["top","bottom"].includes(i.track.position)?(o=C$(),o.on("brush",e=>{e.selection&&(this.brushCurrent=o,this.brushType="horizontal",this.brushTrack=i,this.brushSelectionRaw=e.selection,this.brushSelection=[this.xScale.invert(e.selection[0]-i.left),this.xScale.invert(e.selection[1]-i.left)],n("annotationChanged",{annotationUid:this.annotationUid,viewUid:this.props.uid,track:i.track,extent:[this.brushSelection,[null,null]]}))}),o.on("end",e=>{this.annotationCreatedNotified||n("annotationCreated",{annotationUid:r.annotationUid,track:i.track,viewUid:this.props.uid,extent:[this.brushSelection,[null,null]]})})):["left","right"].includes(i.track.position)?(o=A$(),o.on("brush",e=>{e.selection&&(this.brushCurrent=o,this.brushType="vertical",this.brushTrack=i,this.brushSelectionRaw=e.selection,this.brushSelection=[this.yScale.invert(e.selection[0]-i.top),this.yScale.invert(e.selection[1]-i.top)],n("annotationChanged",{annotationUid:this.annotationUid,track:i.track,viewUid:this.props.uid,extent:[[null,null],this.brushSelection]}))}),o.on("end",e=>{this.annotationCreatedNotified||n("annotationCreated",{annotationUid:r.annotationUid,track:i.track,viewUid:this.props.uid,extent:[[null,null],this.brushSelection]})})):(o=M$(),o.on("brush",t=>{if(!t.selection)return;this.brushCurrent=o,this.brushType="2d",this.brushTrack=i,this.brushSelectionRaw=t.selection,this.brushSelection=[[this.xScale.invert(t.selection[0][0]-i.left),this.yScale.invert(t.selection[0][1]-i.top)],[this.xScale.invert(t.selection[1][0]-i.left),this.yScale.invert(t.selection[1][1]-i.top)]];const r=this.getTracksData(e.filter(e=>"center"===e.track.position),this.brushSelection),a=Object.values(r).filter(e=>void 0!==e.mean).map(e=>e.mean);if(a.length){pm(this.divTiledPlot).selectAll(".brush-svg").selectAll(".data-values").data(a).enter().append("text").classed("data-values",!0);const e=eh(".3f");pm(this.divTiledPlot).selectAll(".data-values").attr("x",t.selection[0][0]).attr("y",t.selection[0][1]).text(t=>`mean: ${e(t)}`)}n("annotationChanged",{annotationUid:this.annotationUid,extent:this.brushSelection,data:r,track:i.track,viewUid:this.props.uid})}),o.on("end",t=>{var o;let a={};null!=(o=this.brushSelection)&&o[0].length&&(a=this.getTracksData(e.filter(e=>"center"===e.track.position),this.brushSelection)),this.annotationCreatedNotified?t.selection||this.removeBrushText():(n("annotationCreated",{annotationUid:r.annotationUid,track:i.track,viewUid:this.props.uid,extent:this.brushSelection,data:a}),this.annotationCreatedNotified=!0)})),o.keyModifiers(!1),o.extent([[i.left,i.top],[i.left+i.width,i.top+i.height]]),o.on("start",function(e){r.annotationUid||(r.annotationUid=a_.nice(),i.annotationUid=r.annotationUid),r.brushEl=pm(this)}),t[i.track.uid]=o}return t}},{key:"removeBrushes",value:function(){pm(this.divTiledPlot).selectAll(".brush-svg").remove()}},{key:"addBrushes",value:function(){if(this.annotationUid)return;const e=this.positionedTracks().filter(e=>"whole"!==e.track.position),t=this.createBrushes(e);this.brushes=t;const n={};this.brushEls=n,pm(this.divTiledPlot).selectAll(".brush").remove(),pm(this.divTiledPlot).selectAll(".brush-svg").data([1]).enter().append("svg").classed("brush-svg",!0).style("position","absolute").style("left",0).style("top",0).style("z-index",101);const r=pm(this.divTiledPlot).select(".brush-svg").selectAll(".brush").data(e,e=>e.track.uid).enter().append("g").attr("class","brush");pm(this.divTiledPlot).selectAll(".brush-svg").attr("width",this.state.width).attr("height",this.state.height),pm(this.divTiledPlot).selectAll(".brush-rect").attr("x",e=>e.left).attr("y",e=>e.top).style("stroke","1px solid black").style("fill","transparent").attr("width",e=>e.width).attr("height",e=>e.height),r.each(function(e){n[e.track.uid]=pm(this),n[e.track.uid].call(t[e.track.uid])})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.addUidsToTracks(e.tracks),this.setState({tracks:e.tracks})}},{key:"shouldComponentUpdate",value:function(e,t){const n=this.previousPropsStr,r=this.updatablePropsToString(e),i=JSON.stringify(this.state),o=JSON.stringify(t),a=n!==r||i!==o||this.props.chooseTrackHandler!==e.chooseTrackHandler||this.props.customDialog!==e.customDialog;a&&(this.previousPropsStr=r);const s=this.numTracks;return this.numTracks=0,yT(this.props.tracks,()=>this.numTracks++),this.reset=this.reset||0===s&&this.numTracks>0,this.numTracks||(this.tracksByUidInit={}),e.mouseTool===vw?this.addBrushes():this.disableBrushes(),a}},{key:"componentDidUpdate",value:function(e,t){if(t.rangeSelection!==this.state.rangeSelection){let e=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every(e=>e?.length)&&(e=this.state.rangeSelection.map(e=>lw(...e,this.state.defaultChromSizes))),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:e})}if(this.state.customDialog||this.props.customDialog){const e=this.state.customDialog||this.props.customDialog;if(e.length>0){const t=[],n=[];e.forEach(e=>{t.push(e.bodyComponent),n.push(e.bodyProps)}),this.props.modal.open(i.createElement(F8,{children:t,bodyProps:n,onCancel:this.props.closeCustomDialog,title:e[0].title}))}}if(e.tracks.center,this.props.tracks.center,(this.state.addTrackPosition||this.props.addTrackPosition)&&this.props.modal.open(i.createElement(iK,{extent:this.state.addTrackExtent||this.props.addTrackExtent,host:this.state.addTrackHost,onCancel:this.handleNoTrackAddedBound,onTracksChosen:this.handleTracksAddedBound,position:this.state.addTrackPosition||this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),this.state.addDivisorDialog){const e=this.state.addDivisorDialog;this.props.modal.open(i.createElement(iK,{datatype:qw[e.type].datatype[0],host:this.state.addTrackHost,onCancel:()=>{this.setState({addDivisorDialog:null})},onTracksChosen:t=>{this.handleDivisorChosen(e,t)},trackSourceServers:this.props.trackSourceServers}))}}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach(e=>this.props.pubSub.unsubscribe(e))}},{key:"addUidsToTracks",value:function(e){Object.keys(e).forEach(t=>{e[t].forEach(e=>{e.uid=e.uid||a_.nice()})})}},{key:"contextMenuHandler",value:function(e){if(!this.divTiledPlot)return;const t=this.divTiledPlot.getBoundingClientRect();if(!CT(e.clientX,e.clientY,t.left,t.left+t.width,t.top,t.top+t.height))return;const n=[e.clientX,e.clientY],r=ym(e,this.divTiledPlot),o=this.trackRenderer.zoomedXScale.invert(r[0]),a=this.trackRenderer.zoomedYScale.invert(r[1]);let s=null;e.hgCustomItems&&(s=e.hgCustomItems.map(e=>i.createElement(YZ,{key:e.key,onClick:e.onClick},e.text))),this.setState({contextMenuCustomItems:s,contextMenuPosition:{left:n[0],top:n[1],canvasLeft:r[0]+this.trackRenderer.xPositionOffset,canvasTop:r[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:o,contextMenuDataY:a})}},{key:"measureSize",value:function(){this.element.clientWidth>0&&this.element.clientHeight>0&&this.setState({sizeMeasured:!0,width:this.element.clientWidth,height:this.element.clientHeight})}},{key:"handleTrackOptionsChanged",value:function(e,t){return this.props.onTrackOptionsChanged(e,t)}},{key:"handleScalesChanged",value:function(e,t){this.xScale=e,this.yScale=t,this.appZoomed(),this.props.onScalesChanged(e,t)}},{key:"handleTilesetInfoReceived",value:function(e,t){const n=uT(this.props.tracks,e);n?(this.tracksByUidInit[n.uid]=!0,this.checkAllTilesetInfoReceived(),n.options||(n.options={}),n.name=t.name,n.maxWidth=t.max_width,n.transforms=t.transforms,n.aggregationModes=t.aggregation_modes,n.header=t.header,n.binsPerDimension=t.bins_per_dimension,t.resolutions?(n.maxZoom=t.resolutions.length-1,n.resolutions=t.resolutions):n.maxZoom=t.max_zoom,t.row_infos&&(n.row_infos=t.row_infos),n.coordSystem=t.coordSystem,n.datatype=t.datatype):console.warn("Strange, track not found:",e)}},{key:"checkAllTilesetInfoReceived",value:function(){if(this.state.init&&!this.reset||!this.trackRenderer||!this.props.zoomToDataExtentOnInit())return;const e=Object.keys(this.trackRenderer.trackDefObjects).map(e=>{const t=this.trackRenderer.trackDefObjects[e].trackObject;return t.childTracks?t.childTracks:t}).reduce((e,t)=>e.concat(t),[]).filter(e=>{let{tilesetInfo:t}=e;return typeof t<"u"&&!0!==t}),t=Object.values(this.tracksByUidInit).filter(e=>e).length;e.length===t&&(this.setState({init:!0}),this.reset=!1,this.handleZoomToData())}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e}),this.props.setOverTrackChooser(!0)}},{key:"handleOverlayMouseLeave",value:function(e){e===this.state.mouseOverOverlayUid&&this.setState({mouseOverOverlayUid:null}),this.props.setOverTrackChooser(!1)}},{key:"handleTrackPositionChosen",value:function(e,t){this.setState({mouseOverOverlayUid:null}),this.props.chooseTrackHandler(e.track.uid,t)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackExtent:null,addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(e){this.setState({addDivisorDialog:e})}},{key:"handleDivisorChosen",value:function(e,t){this.setState({addDivisorDialog:null});const n=e.data?{server:e.data.server,tilesetUid:e.data.tilesetUid}:{server:e.server,tilesetUid:e.tilesetUid},r={server:t[0].server,tilesetUid:t[0].uuid};this.handleChangeTrackData(e.uid,{type:"divided",children:[n,r]})}},{key:"handleDivideSeries",value:function(e){}},{key:"handleAddSeries",value:function(e){const t=vT(this.props.tracks,e),n=uT(this.props.tracks,e);this.setState({addTrackPosition:t,addTrackHost:n})}},{key:"handleReplaceTrack",value:function(e,t){this.trackToReplace=e,this.handleAddTrack(t)}},{key:"handleAddTrack",value:function(e,t){this.setState({addTrackExtent:t,addTrackPosition:e,addTrackHost:null})}},{key:"handleResizeTrack",value:function(e,t,n){const{tracks:r}=this.state;for(const i in r){const o=r[i].filter(t=>t.uid===e);o.length>0&&(o[0].width=t,o[0].height=n)}this.setState({tracks:r,forceUpdate:Math.random()}),this.props.onResizeTrack()}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(e){this.closeMenus(),this.props.onLockValueScale(e)}},{key:"handleUnlockValueScale",value:function(e){this.closeMenus(),this.props.onUnlockValueScale(e)}},{key:"handleCloseTrack",value:function(e){this.closeMenus(),this.props.onCloseTrack(e)}},{key:"handleChangeTrackType",value:function(e,t){this.closeMenus(),this.props.onChangeTrackType(e,t)}},{key:"handleChangeTrackData",value:function(e,t){this.closeMenus(),this.props.onChangeTrackData(e,t)}},{key:"handleTracksAdded",value:function(e,t,n,r){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(e,t,n,r),this.setState({addTrackExtent:null,addTrackPosition:null,addTrackHost:null}),e}},{key:"handleCloseTrackMenuOpened",value:function(e,t){this.setState({closeTrackMenuId:e,closeTrackMenuLocation:t})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(e,t){this.closeMenus(),this.setState({configTrackMenuId:e,configTrackMenuLocation:t})}},{key:"handleConfigureTrack",value:function(e,t){this.setState({configTrackMenuId:null,trackOptions:{track:e,configComponent:t}}),this.closeMenus()}},{key:"handleSortEnd",value:function(e){this.setState(t=>{const n=t.tracks,r={};for(let i=0;i<e.length;i++)r[e[i].uid]=i;for(const e in n){const t=n[e];if(t.length&&t[0].uid in r){const i=new Array(t.length);for(let e=0;e<t.length;e++)i[r[t[e].uid]]=t[e];n[e]=i}}return{tracks:n,forceUpdate:Math.random()}})}},{key:"createTracksAndLocations",value:function(){const e=[],{tracks:t}=this.state;return Tw.forEach(n=>{t[n]&&t[n].forEach(t=>{t.contents&&t.contents.forEach(e=>{e.position=n}),t.position=n,e.push({track:t,location:n})})}),e}},{key:"calculateTrackPosition",value:function(e,t){let n=this.props.paddingTop,r=this.props.paddingBottom,i=this.props.paddingLeft,o=this.props.paddingRight,a=this.centerWidth,s=e.height,l=0,c=0;switch(t){case"top":i+=this.leftWidth;for(let t=0;t<this.state.tracks.top.length&&this.state.tracks.top[t].uid!==e.uid;t++)n+=this.state.tracks.top[t].height;break;case"bottom":i+=this.leftWidth,n+=this.topHeight+this.centerHeight+this.galleryDim;for(let t=0;t<this.state.tracks.bottom.length&&this.state.tracks.bottom[t].uid!==e.uid;t++)n+=this.state.tracks.bottom[t].height;break;case"left":n+=this.topHeight,a=e.width,s=this.centerHeight;for(let t=0;t<this.state.tracks.left.length&&this.state.tracks.left[t].uid!==e.uid;t++)i+=this.state.tracks.left[t].width;break;case"right":i+=this.leftWidth+this.centerWidth+this.galleryDim,n+=this.topHeight,a=e.width,s=this.centerHeight;for(let t=0;t<this.state.tracks.right.length&&this.state.tracks.right[t].uid!==e.uid;t++)i+=this.state.tracks.right[t].width;break;case"center":i+=this.leftWidth,n+=this.topHeight,s=this.centerHeight;break;case"gallery":i+=this.leftWidthNoGallery,n+=this.topHeightNoGallery,a=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-this.props.paddingLeft,s=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-this.props.paddingTop,l=this.galleryDim,c=this.galleryDim;for(let t=0;t<this.state.tracks.gallery.length&&this.state.tracks.gallery[t].uid!==e.uid;t++)a-=2*this.state.tracks.gallery[t].height,s-=2*this.state.tracks.gallery[t].height,i+=this.state.tracks.gallery[t].height,n+=this.state.tracks.gallery[t].height,l-=this.state.tracks.gallery[t].height,c-=this.state.tracks.gallery[t].height;for(let e=0;e<this.state.tracks.right.length;e++)o+=this.state.tracks.right[e].width;for(let e=0;e<this.state.tracks.bottom.length;e++)r+=this.state.tracks.bottom[e].height;e.offsetX=l,e.offsetY=c,e.offsetTop=n,e.offsetRight=o,e.offsetBottom=r,e.offsetLeft=i;break;default:a=this.leftWidth+this.centerWidth+this.rightWidth,s=this.topHeight+this.centerHeight+this.bottomHeight}return-1===Tw.indexOf(t)&&console.warn("Track with unknown position present:",t,e),{left:i,top:n,width:a,height:s,track:e}}},{key:"findCentralHeatmapTrack",value:function(e){for(let t=0;t<e.length;t++){if("combined"===e[t].type)return this.findCentralHeatmapTrack(e[t].contents);if("heatmap"===e[t].type)return e[t]}}},{key:"trackUuidToOrientation",value:function(e){}},{key:"overlayTracks",value:function(e){return this.props.overlays?this.props.overlays.filter(e=>{var t;return null==(t=e.includes)?void 0:t.length}).map(t=>{const n=t.type?`overlay-${t.type}-track`:"overlay-track",r={...t,uid:t.uid||a_.nice(),includes:t.includes,type:n,options:Object.assign(t.options,{orientationsAndPositions:t.includes.map(t=>{const n=uT(this.props.tracks,t);if(!n)return console.warn(`OverlayTrack included uid (${t}) not found in the track list`),null;const r=vT(this.props.tracks,n.uid);let i;if(("top"===r||"bottom"===r)&&(i="1d-horizontal"),("left"===r||"right"===r)&&(i="1d-vertical"),"center"===r&&(i="2d"),!i)return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"),null;const o=e.filter(e=>e.track.uid===t);if(!o.length)return null;return{orientation:i,position:{left:o[0].left-this.props.paddingLeft,top:o[0].top-this.props.paddingTop,width:o[0].width,height:o[0].height}}}).filter(e=>e)})};return{top:this.props.paddingTop,left:this.props.paddingLeft,width:this.leftWidth+this.centerWidth+this.rightWidth,height:this.topHeight+this.centerHeight+this.bottomHeight+this.props.marginTop+this.props.marginBottom,track:r}}):[]}},{key:"positionedTracks",value:function(){return this.createTracksAndLocations().map(e=>{let{track:t,location:n}=e;return this.calculateTrackPosition(t,n)})}},{key:"createTrackPositionTexts",value:function(){const e=this.positionedTracks();return this.createTracksAndLocations(),e.map(e=>{const{track:t}=e;return i.createElement("div",{key:t.uid,style:{left:e.left,top:e.top,width:e.width,height:e.height,position:"absolute"}},t.uid.slice(0,2))})}},{key:"handleExportTrackData",value:function(e,t){const n=uT(this.props.tracks,t);let r=null;e!==t?r=this.trackRenderer.trackDefObjects[e].trackObject.createdTracks[n.uid]:({trackObject:r}=this.trackRenderer.trackDefObjects[e]),r.exportData(),this.closeMenus()}},{key:"listTracksAtPosition",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r;const i=[];if(!this.trackRenderer)return[];for(const o in this.trackRenderer.trackDefObjects){const a=this.trackRenderer.trackDefObjects[o].trackObject;if(a.respondsToPosition(e,t))if(n){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(let e=0;e<this.props.tracks.center.contents.length;e++)this.props.tracks.center.contents[e].uid===o&&(a.is2d=!0);else null!=(r=this.props.tracks.center)&&r.length&&this.props.tracks.center[0].uid===o&&(a.is2d=!0);i.push(a)}else i.push(this.trackRenderer.trackDefObjects[o].trackDef.track)}return i}},{key:"listAllTrackObjects",value:function(){const e=[];for(const t in this.trackRenderer.trackDefObjects){const n=this.trackRenderer.trackDefObjects[t];if(n.trackObject.createdTracks)for(const t in n.trackObject.createdTracks){const r=n.trackObject.createdTracks[t];e.push(r)}else e.push(n.trackObject)}return e}},{key:"handleZoomToData",value:function(){const e=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER,n=[e,e],r=[t,t],i=this.listAllTrackObjects();for(const c of i)if(c.tilesetInfo&&c.tilesetInfo.min_pos)for(let e=0;e<c.tilesetInfo.min_pos.length;e++)c.tilesetInfo.min_pos[e]<n[e]&&(n[e]=c.tilesetInfo.min_pos[e]),c.tilesetInfo.max_pos[e]>r[e]&&(r[e]=c.tilesetInfo.max_pos[e]);const o=this.trackRenderer.currentProps.paddingLeft+this.trackRenderer.currentProps.leftWidth;let a=[o,o+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);const s=this.trackRenderer.currentProps.paddingTop+this.trackRenderer.currentProps.topHeight;let l=[s,s+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),n[0]<Number.MAX_SAFE_INTEGER&&r[0]>Number.MIN_SAFE_INTEGER&&(a=[n[0],r[0]]),n[1]<Number.MAX_SAFE_INTEGER&&r[1]>Number.MIN_SAFE_INTEGER&&(l=[n[1],r[1]]),this.props.onDataDomainChanged(a,l)}},{key:"resetViewport",value:function(){this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),this.props.onDataDomainChanged(this.props.initialXDomain,this.props.initialYDomain)}},{key:"updatablePropsToString",value:function(e){return JSON.stringify({tracks:e.tracks,overlays:e.overlays,viewOptions:e.viewOptions,uid:e.uid,addTrackExtent:e.addTrackExtent,addTrackPosition:e.addTrackPosition,editable:e.editable,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingLeft:e.paddingLeft,paddingRight:e.paddingRight,mouseTool:e.mouseTool,initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,trackSourceServers:e.trackSourceServers,zoomable:e.zoomable,draggingHappening:e.draggingHappening})}},{key:"getXYScales",value:function(){this.trackRenderer&&(this.xScale=this.trackRenderer.currentXScale,this.yScale=this.trackRenderer.currentYScale)}},{key:"rangeViewToDataLoci",value:function(e,t){return t?[Number.parseInt(t.invert(e[0]),10),Number.parseInt(t.invert(e[1]),10)]:[null,null]}},{key:"rangeSelectionResetHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null,rangeSelectionEnd:!1})}},{key:"rangeSelection1dEndHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t="x"===e?this.xScale:this.yScale;return n=>{this.setState(r=>{const i=r.is1dRangeSelection?[null,null]:r.rangeSelection.slice(),o=this.state.is1dRangeSelection||"y"!==e?0:1;let a=this.rangeViewToDataLoci(n,t);const s=a[1]-a[0];if(this.props.rangeSelection1dSize[0]>s){const e=a[0]+s/2;a=[e-this.props.rangeSelection1dSize[0]/2,e+this.props.rangeSelection1dSize[0]/2]}else if(this.props.rangeSelection1dSize[1]<s){const e=a[0]+s/2;a=[e-this.props.rangeSelection1dSize[1]/2,e+this.props.rangeSelection1dSize[1]/2]}return i[o]=a,this.props.rangeSelectionToInt&&(i[o]=i[o].map(e=>Math.round(e))),{rangeSelection:i,rangeSelectionEnd:!0}})}}},{key:"rangeSelection1dHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t="x"===e?this.xScale:this.yScale;return n=>{this.setState(r=>{const i=r.is1dRangeSelection?[null,null]:r.rangeSelection.slice();return i[r.is1dRangeSelection||"y"!==e?0:1]=this.rangeViewToDataLoci(n,t),{rangeSelection:i,rangeSelectionEnd:!1}})}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales(),this.setState({rangeSelection:[this.rangeViewToDataLoci(e[0],this.xScale),this.rangeViewToDataLoci(e[1],this.yScale)],rangeSelectionEnd:!1})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dEndHandler",value:function(e){(!this.xScale||!this.yScale)&&this.getXYScales();const t=this.rangeViewToDataLoci(e[0],this.xScale),n=this.rangeViewToDataLoci(e[1],this.yScale);let r=[t,n];const i=[t[1]-t[0],n[1]-n[0]];r.forEach((e,t)=>{if(this.props.rangeSelection1dSize[0]>i[t]){const n=e[0]+Math.round(i[t]/2);e[0]=n-this.props.rangeSelection1dSize[0]/2,e[1]=n+this.props.rangeSelection1dSize[0]/2}else if(this.props.rangeSelection1dSize[1]<i[t]){const n=e[0]+Math.round(i[t]/2);e[0]=n-this.props.rangeSelection1dSize[1]/2,e[1]=n+this.props.rangeSelection1dSize[1]/2}}),this.props.rangeSelectionToInt&&(r=r.map(e=>e.map(e=>Math.round(e)))),this.setState({rangeSelection:r,rangeSelectionEnd:!0})}},{key:"getContextMenu",value:function(){if(this.state.contextMenuPosition){const e=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return i.createElement(VY,{onMenuClosed:this.closeMenusBound},i.createElement(Qme,{apiPublish:this.props.apiPublish,closeMenu:this.closeMenusBound,coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,genomePositionSearchBox:this.props.genomePositionSearchBox,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:e=>{this.props.onTracksAdded([e],e.position,null,null),this.handleCloseContextMenu()},onChangeTrackData:this.handleChangeTrackDataBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,orientation:"right",position:this.state.contextMenuPosition,theme:this.props.theme,trackRenderer:this.trackRenderer,tracks:e,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){const e=this.props.draggingHappening,{datatype:t}=e,n=function(e,t){if(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(e=>{qw[e]=window.higlassTracksByType[e].config}),!(e in Kw)&&!t)return void console.warn("unknown data type:",e);const n={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},r=Kw[e]||{};if(t)for(const i of t)if(qw[i])for(const e of n[qw[i].orientation])r[e]=i;else console.warn("unknown track type",i);return r}(t,e.defaultTracks);if(!n)return null;const r=new Set(["top","left","right","center","bottom"].filter(e=>e in this.state.tracks&&this.state.tracks[e].length)),o="top"in n,a="left"in n,s="right"in n,l="bottom"in n,c="center"in n,u="center"in n||r.has("left")||r.has("right")||r.has("center"),h="top"in n,p="bottom"in n&&u,f="left"in n&&u,d="right"in n&&u,m=Object.keys(n).length&&("center"in n||u),g=i.createElement("div",{style:{flexGrow:1}}),y=i.cloneElement(g),v=i.createElement("div",{style:{display:"flex",flexGrow:1}},h&&(m||f)?g:null,i.createElement(q8,{defaultTrackType:n.top,draggingHappening:this.props.draggingHappening,enabled:o,onTrackDropped:e=>this.handleTracksAdded([e],"top"),style:{border:"1px solid black",flexGrow:1}}),h&&(m||f)?y:null),b=i.createElement("div",{style:{display:"flex",flexGrow:1}},h&&(m||f)?g:null,i.createElement(q8,{defaultTrackType:n.bottom,draggingHappening:this.props.draggingHappening,enabled:l,onTrackDropped:e=>this.handleTracksAdded([e],"bottom"),style:{border:"1px solid black",flexGrow:1}}),h&&(m||f)?y:null),_=i.createElement(q8,{defaultTrackType:n.left,draggingHappening:this.props.draggingHappening,enabled:a,onTrackDropped:e=>this.handleTracksAdded([e],"left"),style:{border:"1px solid black",flexGrow:1}}),w=i.createElement(q8,{defaultTrackType:n.center,draggingHappening:this.props.draggingHappening,enabled:c,onTrackDropped:e=>this.handleTracksAdded([e],"center"),position:"center",style:{border:"1px solid black",flexGrow:1}}),T=i.cloneElement(_,{defaultTrackType:n.right,enabled:s,onTrackDropped:e=>this.handleTracksAdded([e],"right")});return i.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},i.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),i.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},h?v:null,u&&i.createElement("div",{style:{display:"flex",height:h||p?"40%":"100%",width:"100%"}},f?_:null,m?w:null,d?T:null),p?b:null))}},{key:"render",value:function(){this.galleryDim=this.props.tracks.gallery?this.props.tracks.gallery.map(e=>e.height).reduce(rx,0):0,this.topHeightNoGallery=this.props.tracks.top.map(e=>e.height).reduce(rx,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map(e=>e.height).reduce(rx,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map(e=>e.width).reduce(rx,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map(e=>e.width).reduce(rx,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim;const e=this.props.paddingTop+this.props.paddingBottom,t=this.props.paddingLeft+this.props.paddingRight;this.centerHeight=Math.max(1,this.state.height-this.topHeight-this.bottomHeight-e),this.centerWidth=Math.max(1,this.state.width-this.leftWidth-this.rightWidth-t);const n="none",r=i.createElement("div",{className:"top-track-container",style:{left:this.leftWidth+this.props.paddingLeft,top:this.props.paddingTop,width:this.centerWidth,height:this.topHeightNoGallery,outline:n,position:"absolute"}},i.createElement(i7,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===yw,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),o=i.createElement("div",{className:"left-track-container",style:{left:this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.leftWidthNoGallery,height:this.centerHeight,outline:n,position:"absolute"}},i.createElement(Gme,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===yw,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),a=i.createElement("div",{className:"right-track-container",style:{right:this.props.paddingRight,top:this.topHeight+this.props.paddingTop,width:this.rightWidthNoGallery,height:this.centerHeight,outline:n,position:"absolute"}},i.createElement(Gme,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===yw,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),s=i.createElement("div",{className:"bottom-track-container",style:{left:this.leftWidth+this.props.paddingLeft,bottom:this.props.paddingBottom,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:n,position:"absolute"}},i.createElement(i7,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===yw,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),l=i.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.paddingLeft,top:this.topHeightNoGallery+this.props.paddingTop,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:n,position:"absolute"}},i.createElement(s6,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim}));let c=i.createElement("div",{className:xs("center-track-container",CZ),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.bottomHeight,outline:n}});this.props.tracks.center.length&&(c=i.createElement("div",{className:xs("center-track-container",CZ),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.centerHeight,outline:n}},i.createElement(FZ,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===yw,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionXYEnd:this.rangeSelection2dEndHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionYEnd:this.rangeSelection1dEndHandler("y").bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();let u=this.positionedTracks();u=u.concat(this.overlayTracks(u));let h=null;this.state.sizeMeasured&&(h=i.createElement(Dme,{ref:e=>{this.trackRenderer=e,this.checkAllTilesetInfoReceived()},canvasElement:this.props.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,disableTrackMenu:this.props.disableTrackMenu,dragging:this.props.dragging,galleryDim:this.galleryDim,getLockGroupExtrema:this.props.getLockGroupExtrema,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===yw,isShowGlobalMousePosition:this.props.isShowGlobalMousePosition,isValueScaleLocked:this.props.isValueScaleLocked,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,paddingLeft:this.props.paddingLeft,paddingTop:this.props.paddingTop,pixiRenderer:this.props.pixiRenderer,pixiStage:this.props.pixiStage,pluginDataFetchers:this.props.pluginDataFetchers,pluginTracks:this.props.pluginTracks,positionedTracks:u,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,viewOptions:this.props.viewOptions,width:this.state.width,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},r,o,a,s,l,c));let p=null,f=null;this.state.configTrackMenuId&&(p=i.createElement(VY,{onMenuClosed:this.closeMenusBound},i.createElement(M8,{ref:e=>{this.configTrackMenu=e},apiPublish:this.props.apiPublish,closeMenu:this.closeMenusBound,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:this.handleAddTrackBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,position:this.state.configTrackMenuLocation,theme:this.props.theme,trackOrientation:vT(this.props.tracks,this.state.configTrackMenuId),trackRenderer:this.trackRenderer,tracks:[uT(this.props.tracks,this.state.configTrackMenuId)]}))),this.state.closeTrackMenuId&&(f=i.createElement(VY,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},i.createElement(yQ,{position:this.state.closeTrackMenuLocation,theme:this.props.theme},i.createElement(KZ,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[uT(this.props.tracks,this.state.closeTrackMenuId)]}))));let d=null;this.props.chooseTrackHandler&&(d=u.filter(e=>"whole"!==e.track.position).map(e=>{let t="tiled-plot-track-overlay-animate";return(this.state.mouseOverOverlayUid||this.props.overTrackChooser)&&(t="tiled-plot-track-overlay-plain"),this.state.mouseOverOverlayUid===e.track.uid&&(t="tiled-plot-track-overlay-selected"),i.createElement("div",{className:J8[t],key:e.track.uid,onClick:t=>this.handleTrackPositionChosen(e,t),onDragEnter:t=>{this.handleOverlayMouseEnter(e.track.uid),t.preventDefault()},onDragLeave:()=>this.handleOverlayMouseLeave(e.track.uid),onDragOver:e=>e.preventDefault(),onDrop:()=>this.handleTrackPositionChosen(e),onMouseEnter:()=>this.handleOverlayMouseEnter(e.track.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(e.track.uid),style:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,zIndex:1}})}));let m=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){const e=this.state.trackOptions.configComponent,t=this.state.trackOptions.track;m=i.createElement(e,{track:t,xScale:this.xScale,yScale:this.yScale,onCancel:()=>{this.setState({trackOptions:null})},onTrackOptionsChanged:e=>e,onSubmit:e=>{this.handleTrackOptionsChanged(this.state.trackOptions.track.uid,e),this.setState({trackOptions:null})}})}return i.createElement("div",{ref:e=>{this.divTiledPlot=e},className:xs("tiled-plot-div",J8["tiled-plot"]),onClick:this.handleClickBound,style:{marginBottom:this.props.marginBottom,marginLeft:this.props.marginLeft,marginRight:this.props.marginRight,marginTop:this.props.marginTop}},h,d,p,f,m,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach(e=>document.addEventListener(e.name,e.callback,!1))}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach(e=>document.removeEventListener(e.name,e.callback))}}])}(i.Component);oge.defaultProps={isShowGlobalMousePosition:!1,pluginTracks:{},metaTracks:[],zoomable:!0},oge.propTypes={addTrackExtent:xm.string,addTrackPosition:xm.string,canvasElement:xm.object,chooseTrackHandler:xm.func,chromInfoPath:xm.string,customDialog:xm.array,closeCustomDialog:xm.func,disableTrackMenu:xm.bool,dragging:xm.bool,draggingHappening:xm.bool,editable:xm.bool,getLockGroupExtrema:xm.func,initialXDomain:xm.array,initialYDomain:xm.array,isShowGlobalMousePosition:xm.bool,isValueScaleLocked:xm.func,marginBottom:xm.number.isRequired,marginLeft:xm.number.isRequired,marginRight:xm.number.isRequired,marginTop:xm.number.isRequired,paddingBottom:xm.number.isRequired,paddingLeft:xm.number.isRequired,paddingRight:xm.number.isRequired,paddingTop:xm.number.isRequired,metaTracks:xm.array,modal:xm.object,mouseTool:xm.string,onCloseTrack:xm.func,onChangeTrackData:xm.func,onChangeTrackType:xm.func,onDataDomainChanged:xm.func,onLockValueScale:xm.func,onMouseMoveZoom:xm.func,onNewTilesLoaded:xm.func,onNoTrackAdded:xm.func,onRangeSelection:xm.func.isRequired,onScalesChanged:xm.func,onTrackOptionsChanged:xm.func,onTrackPositionChosen:xm.func,onTracksAdded:xm.func,onUnlockValueScale:xm.func,onValueScaleChanged:xm.func,onResizeTrack:xm.func,overlays:xm.array,openModal:xm.func,pixiRenderer:xm.object,pixiStage:xm.object,pluginTracks:xm.object,pubSub:xm.object.isRequired,rangeSelection1dSize:xm.array,rangeSelectionToInt:xm.bool,registerDraggingChangedListener:xm.func,removeDraggingChangedListener:xm.func,setCentersFunction:xm.func,svgElement:xm.object,theme:xm.symbol.isRequired,tracks:xm.object,trackSourceServers:xm.array,uid:xm.string,viewOptions:xm.object,xDomainLimits:xm.array,yDomainLimits:xm.array,zoomable:xm.bool,zoomLimits:xm.array,zoomToDataExtentOnInit:xm.func};const age=$Y(JW(fZ(oge)));var sge={exports:{}};!function(e){var t=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof o?new o(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,o;switch(n=n||{},i.util.type(t)){case"Object":if(o=i.util.objId(t),n[o])return n[o];for(var a in r={},n[o]=r,t)t.hasOwnProperty(a)&&(r[a]=e(t[a],n));return r;case"Array":return o=i.util.objId(t),n[o]?n[o]:(r=[],n[o]=r,t.forEach(function(t,i){r[i]=e(t,n)}),r);default:return t}},getLanguage:function(e){for(;e;){var n=t.exec(e.className);if(n)return n[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,n){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+n)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName)return document.currentScript;try{throw new Error}catch(r){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(r.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var n in t)if(t[n].src==e)return t[n]}return null}},isActive:function(e,t,n){for(var r="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(r))return!1;e=e.parentElement}return!!n}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var o=(r=r||i.languages)[e],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==t)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var c=r[e];return r[e]=a,i.languages.DFS(i.languages,function(t,n){n===c&&t!=e&&(this[t]=a)}),a},DFS:function e(t,n,r,o){o=o||{};var a=i.util.objId;for(var s in t)if(t.hasOwnProperty(s)){n.call(t,s,t[s],r||s);var l=t[s],c=i.util.type(l);"Object"!==c||o[a(l)]?"Array"===c&&!o[a(l)]&&(o[a(l)]=!0,e(l,n,s,o)):(o[a(l)]=!0,e(l,n,null,o))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),i.hooks.run("before-all-elements-highlight",r);for(var o,a=0;o=r.elements[a++];)i.highlightElement(o,!0===t,r.callback)},highlightElement:function(t,n,r){var o=i.util.getLanguage(t),a=i.languages[o];i.util.setLanguage(t,o);var s=t.parentElement;s&&"pre"===s.nodeName.toLowerCase()&&i.util.setLanguage(s,o);var l={element:t,language:o,grammar:a,code:t.textContent};function c(e){l.highlightedCode=e,i.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i.hooks.run("after-highlight",l),i.hooks.run("complete",l),r&&r.call(l.element)}if(i.hooks.run("before-sanity-check",l),(s=l.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!l.code)return i.hooks.run("complete",l),void(r&&r.call(l.element));if(i.hooks.run("before-highlight",l),l.grammar)if(n&&e.Worker){var u=new Worker(i.filename);u.onmessage=function(e){c(e.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(i.highlight(l.code,l.grammar,l.language));else c(i.util.encode(l.code))},highlight:function(e,t,n){var r={code:e,grammar:t,language:n};if(i.hooks.run("before-tokenize",r),!r.grammar)throw new Error('The language "'+r.language+'" has no grammar.');return r.tokens=i.tokenize(r.code,r.grammar),i.hooks.run("after-tokenize",r),o.stringify(i.util.encode(r.tokens),r.language)},tokenize:function(e,t){var n=t.rest;if(n){for(var r in n)t[r]=n[r];delete t.rest}var i=new l;return c(i,i.head,e),s(e,i,t,i.head,0),function(e){for(var t=[],n=e.head.next;n!==e.tail;)t.push(n.value),n=n.next;return t}(i)},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var r,o=0;r=n[o++];)r(t)}},Token:o};function o(e,t,n,r){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length}function a(e,t,n,r){e.lastIndex=t;var i=e.exec(n);if(i&&r&&i[1]){var o=i[1].length;i.index+=o,i[0]=i[0].slice(o)}return i}function s(e,t,n,r,l,h){for(var p in n)if(n.hasOwnProperty(p)&&n[p]){var f=n[p];f=Array.isArray(f)?f:[f];for(var d=0;d<f.length;++d){if(h&&h.cause==p+","+d)return;var m=f[d],g=m.inside,y=!!m.lookbehind,v=!!m.greedy,b=m.alias;if(v&&!m.pattern.global){var _=m.pattern.toString().match(/[imsuy]*$/)[0];m.pattern=RegExp(m.pattern.source,_+"g")}for(var w=m.pattern||m,T=r.next,x=l;T!==t.tail&&!(h&&x>=h.reach);x+=T.value.length,T=T.next){var E=T.value;if(t.length>e.length)return;if(!(E instanceof o)){var S,k=1;if(v){if(!(S=a(w,x,e,y))||S.index>=e.length)break;var O=S.index,P=S.index+S[0].length,C=x;for(C+=T.value.length;O>=C;)C+=(T=T.next).value.length;if(x=C-=T.value.length,T.value instanceof o)continue;for(var A=T;A!==t.tail&&(C<P||"string"==typeof A.value);A=A.next)k++,C+=A.value.length;k--,E=e.slice(x,C),S.index-=x}else if(!(S=a(w,0,E,y)))continue;O=S.index;var M=S[0],I=E.slice(0,O),R=E.slice(O+M.length),D=x+E.length;h&&D>h.reach&&(h.reach=D);var N=T.prev;if(I&&(N=c(t,N,I),x+=I.length),u(t,N,k),T=c(t,N,new o(p,g?i.tokenize(M,g):M,b,M)),R&&c(t,T,R),k>1){var j={cause:p+","+d,reach:D};s(e,t,n,T.prev,x,j),h&&j.reach>h.reach&&(h.reach=j.reach)}}}}}}function l(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function u(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=i,o.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var r="";return t.forEach(function(t){r+=e(t,n)}),r}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(o.classes,a):o.classes.push(a)),i.hooks.run("wrap",o);var s="";for(var l in o.attributes)s+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+s+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",function(t){var n=JSON.parse(t.data),r=n.language,o=n.code,a=n.immediateClose;e.postMessage(i.highlight(o,i.languages[r],r)),a&&e.close()},!1)),i;var h=i.util.currentScript();function p(){i.manual||i.highlightAll()}if(h&&(i.filename=h.src,h.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var f=document.readyState;"loading"===f||"interactive"===f&&h&&h.defer?document.addEventListener("DOMContentLoaded",p):window.requestAnimationFrame?window.requestAnimationFrame(p):window.setTimeout(p,16)}return i}(typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=t),typeof globalThis<"u"&&(globalThis.Prism=t)}(sge);var lge=sge.exports,cge={},uge=Ss&&Ss.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hge=Ss&&Ss.__assign||function(){return hge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hge.apply(this,arguments)},pge=Ss&&Ss.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),fge=Ss&&Ss.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),dge=Ss&&Ss.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&pge(t,e,n);return fge(t,e),t},mge=Ss&&Ss.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(cge,"__esModule",{value:!0});var gge=dge(i),yge=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),vge=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),bge="npm__react-simple-code-editor__textarea",_ge="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(bge,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(bge," {\n    color: transparent !important;\n  }\n\n  .").concat(bge,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),wge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={capture:!0},t._recordCurrentState=function(){var e=t._input;if(e){var n=e.value,r=e.selectionStart,i=e.selectionEnd;t._recordChange({value:n,selectionStart:r,selectionEnd:i})}},t._getLines=function(e,t){return e.substring(0,t).split("\n")},t._recordChange=function(e,n){var r,i,o;void 0===n&&(n=!1);var a=t._history,s=a.stack,l=a.offset;if(s.length&&l>-1){t._history.stack=s.slice(0,l+1);var c=t._history.stack.length;if(c>100){var u=c-100;t._history.stack=s.slice(u,c),t._history.offset=Math.max(t._history.offset-u,0)}}var h=Date.now();if(n){var p=t._history.stack[t._history.offset];if(p&&h-p.timestamp<3e3){var f=/[^a-z0-9]([a-z0-9]+)$/i,d=null===(r=t._getLines(p.value,p.selectionStart).pop())||void 0===r?void 0:r.match(f),m=null===(i=t._getLines(e.value,e.selectionStart).pop())||void 0===i?void 0:i.match(f);if(d?.[1]&&null!==(o=m?.[1])&&void 0!==o&&o.startsWith(d[1]))return void(t._history.stack[t._history.offset]=hge(hge({},e),{timestamp:h}))}}t._history.stack.push(hge(hge({},e),{timestamp:h})),t._history.offset++},t._updateInput=function(e){var n=t._input;n&&(n.value=e.value,n.selectionStart=e.selectionStart,n.selectionEnd=e.selectionEnd,t.props.onValueChange(e.value))},t._applyEdits=function(e){var n=t._input,r=t._history.stack[t._history.offset];r&&n&&(t._history.stack[t._history.offset]=hge(hge({},r),{selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})),t._recordChange(e),t._updateInput(e)},t._undoEdit=function(){var e=t._history,n=e.stack,r=e.offset,i=n[r-1];i&&(t._updateInput(i),t._history.offset=Math.max(r-1,0))},t._redoEdit=function(){var e=t._history,n=e.stack,r=e.offset,i=n[r+1];i&&(t._updateInput(i),t._history.offset=Math.min(r+1,n.length-1))},t._handleKeyDown=function(e){var n=t.props,r=n.tabSize,i=n.insertSpaces,o=n.ignoreTabKey,a=n.onKeyDown;if(!a||(a(e),!e.defaultPrevented)){27===e.keyCode&&e.currentTarget.blur();var s=e.currentTarget,l=s.value,c=s.selectionStart,u=s.selectionEnd,h=(i?" ":"\t").repeat(r);if(9===e.keyCode&&!o&&t.state.capture)if(e.preventDefault(),e.shiftKey){var p=(g=t._getLines(l,c)).length-1,f=t._getLines(l,u).length-1,d=l.split("\n").map(function(e,t){return t>=p&&t<=f&&e.startsWith(h)?e.substring(h.length):e}).join("\n");if(l!==d){var m=g[p];t._applyEdits({value:d,selectionStart:m?.startsWith(h)?c-h.length:c,selectionEnd:u-(l.length-d.length)})}}else if(c!==u){var g,y=(g=t._getLines(l,c)).length-1,v=t._getLines(l,u).length-1;m=g[y];t._applyEdits({value:l.split("\n").map(function(e,t){return t>=y&&t<=v?h+e:e}).join("\n"),selectionStart:m&&/\S/.test(m)?c+h.length:c,selectionEnd:u+h.length*(v-y+1)})}else{var b=c+h.length;t._applyEdits({value:l.substring(0,c)+h+l.substring(u),selectionStart:b,selectionEnd:b})}else if(8===e.keyCode){var _=c!==u;if(l.substring(0,c).endsWith(h)&&!_){e.preventDefault();b=c-h.length;t._applyEdits({value:l.substring(0,c-h.length)+l.substring(u),selectionStart:b,selectionEnd:b})}}else if(13===e.keyCode){if(c===u){var w=t._getLines(l,c).pop(),T=w?.match(/^\s+/);if(T?.[0]){e.preventDefault();var x="\n"+T[0];b=c+x.length;t._applyEdits({value:l.substring(0,c)+x+l.substring(u),selectionStart:b,selectionEnd:b})}}}else if(57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode){var E=void 0;57===e.keyCode&&e.shiftKey?E=["(",")"]:219===e.keyCode?E=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?E=e.shiftKey?['"','"']:["'","'"]:192===e.keyCode&&!e.shiftKey&&(E=["`","`"]),c!==u&&E&&(e.preventDefault(),t._applyEdits({value:l.substring(0,c)+E[0]+l.substring(c,u)+E[1]+l.substring(u),selectionStart:c,selectionEnd:u+2}))}else!(vge?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)||e.shiftKey||e.altKey?(vge?e.metaKey&&90===e.keyCode&&e.shiftKey:yge?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),t._redoEdit()):77===e.keyCode&&e.ctrlKey&&(!vge||e.shiftKey)&&(e.preventDefault(),t.setState(function(e){return{capture:!e.capture}})):(e.preventDefault(),t._undoEdit())}},t._handleChange=function(e){var n=e.currentTarget,r=n.value,i=n.selectionStart,o=n.selectionEnd;t._recordChange({value:r,selectionStart:i,selectionEnd:o},!0),t.props.onValueChange(r)},t._history={stack:[],offset:-1},t._input=null,t}return uge(t,e),t.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(t.prototype,"session",{get:function(){return{history:this._history}},set:function(e){this._history=e.history},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props,n=t.value,r=t.style,i=t.padding,o=t.highlight,a=t.textareaId,s=t.textareaClassName,l=t.autoFocus,c=t.disabled,u=t.form,h=t.maxLength,p=t.minLength,f=t.name,d=t.placeholder,m=t.readOnly,g=t.required,y=t.onClick,v=t.onFocus,b=t.onBlur,_=t.onKeyUp;t.onKeyDown,t.onValueChange,t.tabSize,t.insertSpaces,t.ignoreTabKey;var w=t.preClassName,T=mge(t,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),x={paddingTop:"object"==typeof i?i.top:i,paddingRight:"object"==typeof i?i.right:i,paddingBottom:"object"==typeof i?i.bottom:i,paddingLeft:"object"==typeof i?i.left:i},E=o(n);return gge.createElement("div",hge({},T,{style:hge(hge({},xge.container),r)}),gge.createElement("pre",hge({className:w,"aria-hidden":"true",style:hge(hge(hge({},xge.editor),xge.highlight),x)},"string"==typeof E?{dangerouslySetInnerHTML:{__html:E+"<br />"}}:{children:E})),gge.createElement("textarea",{ref:function(t){return e._input=t},style:hge(hge(hge({},xge.editor),xge.textarea),x),className:bge+(s?" ".concat(s):""),id:a,value:n,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:y,onKeyUp:_,onFocus:v,onBlur:b,disabled:c,form:u,maxLength:h,minLength:p,name:f,placeholder:d,readOnly:m,required:g,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),gge.createElement("style",{dangerouslySetInnerHTML:{__html:_ge}}))},t.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t}(gge.Component),Tge=cge.default=wge,xge={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;var Ege={exports:{}};(function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function a(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function s(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),a=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,i,"[\\+\\-\\.]")+"*"),n(n(a+"|"+t(u,s,"[\\:]"))+"*");var h=n(n("25[0-5]")+"|"+n("2[0-4]"+i)+"|"+n("1"+i+i)+"|"+n("0?[1-9]"+i)+"|0?0?"+i),p=n(h+"\\."+h+"\\."+h+"\\."+h),f=n(o+"{1,4}"),d=n(n(f+"\\:"+f)+"|"+p),m=n(n(f+"\\:")+"{6}"+d),g=n("\\:\\:"+n(f+"\\:")+"{5}"+d),y=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+d),v=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+d),b=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+d),_=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+d),w=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+d),T=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),x=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),E=n([m,g,y,v,b,_,w,T,x].join("|")),S=n(n(u+"|"+a)+"+");n("[vV]"+o+"+\\."+t(u,s,"[\\:]")+"+"),n(n(a+"|"+t(u,s))+"*");var k=n(a+"|"+t(u,s,"[\\:\\@]"));return n(n(a+"|"+t(u,s,"[\\@]"))+"+"),n(n(k+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,s),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+S+")")+"?\\]?$")}}var l=s(!1),c=s(!0),u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},p=2147483647,f=36,d=1,m=26,g=38,y=700,v=72,b=128,_="-",w=/^xn--/,T=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=f-d,k=Math.floor,O=String.fromCharCode;function P(e){throw new RangeError(E[e])}function C(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function A(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+C((e=e.replace(x,".")).split("."),t).join(".")}function M(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var I=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:f},R=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},D=function(e,t,n){var r=0;for(e=n?k(e/y):e>>1,e+=k(e/t);e>S*m>>1;r+=f)e=k(e/S);return k(r+(S+1)*e/(e+g))},N=function(e){var t=[],n=e.length,r=0,i=b,o=v,a=e.lastIndexOf(_);a<0&&(a=0);for(var s=0;s<a;++s)e.charCodeAt(s)>=128&&P("not-basic"),t.push(e.charCodeAt(s));for(var l=a>0?a+1:0;l<n;){for(var c=r,u=1,h=f;;h+=f){l>=n&&P("invalid-input");var g=I(e.charCodeAt(l++));(g>=f||g>k((p-r)/u))&&P("overflow"),r+=g*u;var y=h<=o?d:h>=o+m?m:h-o;if(g<y)break;var w=f-y;u>k(p/w)&&P("overflow"),u*=w}var T=t.length+1;o=D(r-c,T,0==c),k(r/T)>p-i&&P("overflow"),i+=k(r/T),r%=T,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},j=function(e){var t=[],n=(e=M(e)).length,r=b,i=0,o=v,a=!0,s=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;h<128&&t.push(O(h))}}catch(W){s=!0,l=W}finally{try{!a&&u.return&&u.return()}finally{if(s)throw l}}var g=t.length,y=g;for(g&&t.push(_);y<n;){var w=p,T=!0,x=!1,E=void 0;try{for(var S,C=e[Symbol.iterator]();!(T=(S=C.next()).done);T=!0){var A=S.value;A>=r&&A<w&&(w=A)}}catch(W){x=!0,E=W}finally{try{!T&&C.return&&C.return()}finally{if(x)throw E}}var I=y+1;w-r>k((p-i)/I)&&P("overflow"),i+=(w-r)*I,r=w;var N=!0,j=!1,L=void 0;try{for(var B,F=e[Symbol.iterator]();!(N=(B=F.next()).done);N=!0){var z=B.value;if(z<r&&++i>p&&P("overflow"),z==r){for(var H=i,U=f;;U+=f){var V=U<=o?d:U>=o+m?m:U-o;if(H<V)break;var G=H-V,X=f-V;t.push(O(R(V+G%X,0))),H=k(G/X)}t.push(O(R(H,0))),o=D(i,I,y==g),i=0,++y}}}catch(W){j=!0,L=W}finally{try{!N&&F.return&&F.return()}finally{if(j)throw L}}++i,++r}return t.join("")},L=function(e){return A(e,function(e){return w.test(e)?N(e.slice(4).toLowerCase()):e})},B=function(e){return A(e,function(e){return T.test(e)?"xn--"+j(e):e})},F={version:"2.1.0",ucs2:{decode:M,encode:function(e){return String.fromCodePoint.apply(String,h(e))}},decode:N,encode:j,toASCII:B,toUnicode:L},z={};function H(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function U(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function V(e,t){function n(e){var n=U(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,H).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,H).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,H).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,H).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,H).replace(t.PCT_ENCODED,i)),e}function G(e){return e.replace(/^0*(.*)/,"$1")||"0"}function X(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(G).join("."):e}function W(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=u(a,2),l=s[0],c=s[1],h=c?c.split(":").map(G):[],p=l.split(":").map(G),f=t.IPV4ADDRESS.test(p[p.length-1]),d=f?7:8,m=p.length-d,g=Array(d),y=0;y<d;++y)g[y]=h[y]||p[m+y]||"";f&&(g[d-1]=X(g[d-1],t));var v=g.reduce(function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],b=void 0;if(v&&v.length>1){var _=g.slice(0,v.index),w=g.slice(v.index+v.length);b=_.join(":")+"::"+w.join(":")}else b=g.join(":");return o&&(b+="%"+o),b}return e}var Y=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,q=void 0==="".match(/(){0}/)[1];function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(Y);if(i){q?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=W(X(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=z[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)V(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(r.PCT_ENCODED,U).toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+a}V(n,l)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function K(e,t){var n=!1!==t.iri?c:l,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(W(X(String(e.host),n),n).replace(n.IPV6ADDRESS,function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"})),("number"==typeof e.port||"string"==typeof e.port)&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var Z=/^\.\.?\//,Q=/^\/\.(\/|$)/,J=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Z))e=e.replace(Z,"");else if(e.match(Q))e=e.replace(Q,"/");else if(e.match(J))e=e.replace(J,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,r=[],i=z[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host&&!n.IPV6ADDRESS.test(e.host)&&(t.domainHost||i&&i.domainHost))try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,U).toLowerCase())}catch(s){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+s}V(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=K(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;!t.absolutePath&&(!i||!i.absolutePath)&&(a=te(a)),void 0===o&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=$(ne(e,n),n),t=$(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function ie(e,t,n){var r=a({scheme:"null"},n);return ne(re($(e,r),$(t,r),r,!0),r)}function oe(e,t){return"string"==typeof e?e=ne($(e,t),t):"object"===r(e)&&(e=$(ne(e,t),t)),e}function ae(e,t,n){return"string"==typeof e?e=ne($(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"==typeof t?t=ne($(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function se(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,H)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,U)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return(e.port===(n?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function he(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var pe={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=he(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if((e.port===(he(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=u(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},fe={scheme:"wss",domainHost:pe.domainHost,parse:pe.parse,serialize:pe.serialize},de={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ye=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ve="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),_e="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",we=new RegExp(me,"g"),Te=new RegExp(ye,"g"),xe=new RegExp(t("[^]",ve,"[\\.]",'[\\"]',be),"g"),Ee=new RegExp(t("[^]",me,_e),"g"),Se=Ee;function ke(e){var t=U(e);return t.match(we)?t:e}var Oe={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,l=a.length;s<l;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,p=u.length;h<p;++h)r.push(u[h]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:i=!0,o[le(c[0],t)]=le(c[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var f=0,d=r.length;f<d;++f){var m=r[f].split("@");if(m[0]=le(m[0]),t.unicodeSupport)m[1]=le(m[1],t).toLowerCase();else try{m[1]=F.toASCII(le(m[1],t).toLowerCase())}catch(g){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}r[f]=m.join("@")}return n},serialize:function(e,t){var n=e,r=o(e.to);if(r){for(var a=0,s=r.length;a<s;++a){var l=String(r[a]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(Te,ke).replace(Te,i).replace(xe,H),h=l.slice(c+1);try{h=t.iri?F.toUnicode(h):F.toASCII(le(h,t).toLowerCase())}catch(m){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+m}r[a]=u+"@"+h}n.path=r.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var f=[];for(var d in p)p[d]!==de[d]&&f.push(d.replace(Te,ke).replace(Te,i).replace(Ee,H)+"="+p[d].replace(Te,ke).replace(Te,i).replace(Se,H));return f.length&&(n.query=f.join("&")),n}},Pe=/^([^\:]+)\:(.*)/,Ce={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Pe),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),l=z[s];r.nid=o,r.nss=a,r.path=void 0,l&&(r=l.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=z[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},Ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Me={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!n.uuid.match(Ae))&&(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};z[ce.scheme]=ce,z[ue.scheme]=ue,z[pe.scheme]=pe,z[fe.scheme]=fe,z[Oe.scheme]=Oe,z[Ce.scheme]=Ce,z[Me.scheme]=Me,e.SCHEMES=z,e.pctEncChar=H,e.pctDecChars=U,e.parse=$,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=ie,e.normalize=oe,e.equal=ae,e.escapeComponent=se,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})})(Ege.exports);var Sge=Ege.exports,kge=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},Oge={copy:function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},checkDataType:Pge,checkDataTypes:function(e,t,n){if(1===e.length)return Pge(e[0],t,n,!0);var r="",i=Age(e);for(var o in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+Pge(o,t,n,!0);return r},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++){var i=t[r];(Cge[i]||"array"===e&&"array"===i)&&(n[n.length]=i)}if(n.length)return n}else{if(Cge[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:Age,getProperty:Rge,escapeQuotes:Dge,equal:kge,ucs2length:function(e){for(var t,n=0,r=e.length,i=0;i<r;)n++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r&&(56320==(64512&(t=e.charCodeAt(i)))&&i++);return n},varOccurences:function(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0},varReplace:function(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0},schemaHasRulesExcept:function(e,t,n){if("boolean"==typeof e)return!e&&"not"!=n;for(var r in e)if(r!=n&&t[r])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var n in e)if(!t[n])return n},toQuotedString:Nge,getPathExpr:function(e,t,n,r){var i=n?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return Bge(e,i)},getPath:function(e,t,n){var r=Nge(n?"/"+Fge(t):Rge(t));return Bge(e,r)},getData:function(e,t,n){var r,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!jge.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(Lge)))throw new Error("Invalid JSON-pointer: "+e);if(r=+a[1],"#"==(i=a[2])){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return n[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(o="data"+(t-r||""),!i)return o}for(var s=o,l=i.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(s+=" && "+(o+=Rge(zge(u))))}return s},unescapeFragment:function(e){return zge(decodeURIComponent(e))},unescapeJsonPointer:zge,escapeFragment:function(e){return encodeURIComponent(Fge(e))},escapeJsonPointer:Fge};function Pge(e,t,n,r){var i=r?" !== ":" === ",o=r?" || ":" && ",a=r?"!":"",s=r?"":"!";switch(e){case"null":return t+i+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+i+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+s+"("+t+" % 1)"+o+t+i+t+(n?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(n?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}var Cge=Age(["string","number","integer","boolean","null"]);function Age(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var Mge=/^[a-z$_][a-z$_0-9]*$/i,Ige=/'|\\/g;function Rge(e){return"number"==typeof e?"["+e+"]":Mge.test(e)?"."+e:"['"+Dge(e)+"']"}function Dge(e){return e.replace(Ige,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Nge(e){return"'"+Dge(e)+"'"}var jge=/^\/(?:[^~]|~0|~1)*$/,Lge=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Bge(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function Fge(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function zge(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var Hge=Oge,Uge=function(e){Hge.copy(e,this)};var Vge={exports:{}},Gge=Vge.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),Xge(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function Xge(e,t,n,r,i,o,a,s,l,c){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var u in t(r,i,o,a,s,l,c),r){var h=r[u];if(Array.isArray(h)){if(u in Gge.arrayKeywords)for(var p=0;p<h.length;p++)Xge(e,t,n,h[p],i+"/"+u+"/"+p,o,i,u,r,p)}else if(u in Gge.propsKeywords){if(h&&"object"==typeof h)for(var f in h)Xge(e,t,n,h[f],i+"/"+u+"/"+Wge(f),o,i,u,r,f)}else(u in Gge.keywords||e.allKeys&&!(u in Gge.skipKeywords))&&Xge(e,t,n,h,i+"/"+u,o,i,u,r)}n(r,i,o,a,s,l,c)}}function Wge(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Gge.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},Gge.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Gge.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Gge.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var Yge=Vge.exports,qge=Sge,$ge=kge,Kge=Oge,Zge=Uge,Qge=Yge,Jge=eye;function eye(e,t,n){var r=this._refs[n];if("string"==typeof r){if(!this._refs[r])return eye.call(this,e,t,r);r=this._refs[r]}if((r=r||this._schemas[n])instanceof Zge)return aye(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i,o,a,s=tye.call(this,t,n);return s&&(i=s.schema,t=s.root,a=s.baseId),i instanceof Zge?o=i.validate||e.call(this,i.schema,t,void 0,a):void 0!==i&&(o=aye(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,a)),o}function tye(e,t){var n=qge.parse(t),r=uye(n),i=cye(this._getId(e.schema));if(0===Object.keys(e.schema).length||r!==i){var o=pye(r),a=this._refs[o];if("string"==typeof a)return nye.call(this,e,a,n);if(a instanceof Zge)a.validate||this._compile(a),e=a;else{if(!((a=this._schemas[o])instanceof Zge))return;if(a.validate||this._compile(a),o==pye(t))return{schema:a,root:e,baseId:i};e=a}if(!e.schema)return;i=cye(this._getId(e.schema))}return iye.call(this,n,i,e.schema,e)}function nye(e,t,n){var r=tye.call(this,e,t);if(r){var i=r.schema,o=r.baseId;e=r.root;var a=this._getId(i);return a&&(o=fye(o,a)),iye.call(this,n,o,i,e)}}eye.normalizeId=pye,eye.fullPath=cye,eye.url=fye,eye.ids=function(e){var t=pye(this._getId(e)),n={"":t},r={"":cye(t,!1)},i={},o=this;return Qge(e,{allKeys:!0},function(e,t,a,s,l,c,u){if(""!==t){var h=o._getId(e),p=n[s],f=r[s]+"/"+l;if(void 0!==u&&(f+="/"+("number"==typeof u?u:Kge.escapeFragment(u))),"string"==typeof h){h=p=pye(p?qge.resolve(p,h):h);var d=o._refs[h];if("string"==typeof d&&(d=o._refs[d]),d&&d.schema){if(!$ge(e,d.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=pye(f))if("#"==h[0]){if(i[h]&&!$ge(e,i[h]))throw new Error('id "'+h+'" resolves to more than one schema');i[h]=e}else o._refs[h]=f}n[t]=p,r[t]=f}}),i},eye.inlineRef=aye,eye.schema=tye;var rye=Kge.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function iye(e,t,n,r){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(void 0===(n=n[a=Kge.unescapeFragment(a)]))break;var s;if(!rye[a]&&((s=this._getId(n))&&(t=fye(t,s)),n.$ref)){var l=fye(t,n.$ref),c=tye.call(this,r,l);c&&(n=c.schema,r=c.root,t=c.baseId)}}}if(void 0!==n&&n!==r.schema)return{schema:n,root:r,baseId:t}}}var oye=Kge.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function aye(e,t){return!1!==t&&(void 0===t||!0===t?sye(e):t?lye(e)<=t:void 0)}function sye(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&!sye(t))return!1}else for(var r in e)if("$ref"==r||"object"==typeof(t=e[r])&&!sye(t))return!1;return!0}function lye(e){var t,n=0;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&(n+=lye(t)),n==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(oye[i])n++;else if("object"==typeof(t=e[i])&&(n+=lye(t)+1),n==1/0)return 1/0}return n}function cye(e,t){return!1!==t&&(e=pye(e)),uye(qge.parse(e))}function uye(e){return qge.serialize(e).split("#")[0]+"#"}var hye=/#\/?$/;function pye(e){return e?e.replace(hye,""):""}function fye(e,t){return t=pye(t),qge.resolve(e,t)}var dye=Jge,mye={Validation:yye(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:yye(gye)};function gye(e,t,n){this.message=n||gye.message(e,t),this.missingRef=dye.url(e,t),this.missingSchema=dye.normalizeId(dye.fullPath(this.missingRef))}function yye(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}gye.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var vye=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n="boolean"==typeof t.cycles&&t.cycles,r=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},o={key:r,value:t[r]};return e(i,o)}}}(t.cmp),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var o,a;if(Array.isArray(t)){for(a="[",o=0;o<t.length;o++)o&&(a+=","),a+=e(t[o])||"null";return a+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=i.push(t)-1,l=Object.keys(t).sort(r&&r(t));for(a="",o=0;o<l.length;o++){var c=l[o],u=e(t[c]);u&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u)}return i.splice(s,1),"{"+a+"}"}}(e)},bye=function(e,t,n){var r="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,h=e.schema[t],p=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,m="data"+(u||""),g="valid"+c;if(!1===e.schema){e.isTop?d=!0:r+=" var "+g+" = false; ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?r+=i?" return data; ":" validate.errors = null; return true; ":r+=" var "+g+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var v=e.isTop;c=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{c=e.level,m="data"+((u=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+c+" = errors;"}g="valid"+c,d=!e.opts.allErrors;var _="",w="",T=e.schema.type,x=Array.isArray(T);if(T&&e.opts.nullable&&!0===e.schema.nullable&&(x?-1==T.indexOf("null")&&(T=T.concat("null")):"null"!=T&&(T=[T,"null"],x=!0)),x&&1==T.length&&(T=T[0],x=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),T){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,T);var S=e.RULES.types[T];if(E||x||!0===S||S&&!Z(S)){p=e.schemaPath+".type",f=e.errSchemaPath+"/type",p=e.schemaPath+".type",f=e.errSchemaPath+"/type";var k=x?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[k](T,m,e.opts.strictNumbers,!0)+") { ",E){var O="dataType"+c,P="coerced"+c;r+=" var "+O+" = typeof "+m+"; var "+P+" = undefined; ","array"==e.opts.coerceTypes&&(r+=" if ("+O+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+O+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+P+" = "+m+"; } "),r+=" if ("+P+" !== undefined) ; ";var C=E;if(C)for(var A,M=-1,I=C.length-1;M<I;)"string"==(A=C[M+=1])?r+=" else if ("+O+" == 'number' || "+O+" == 'boolean') "+P+" = '' + "+m+"; else if ("+m+" === null) "+P+" = ''; ":"number"==A||"integer"==A?(r+=" else if ("+O+" == 'boolean' || "+m+" === null || ("+O+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==A&&(r+=" && !("+m+" % 1)"),r+=")) "+P+" = +"+m+"; "):"boolean"==A?r+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+P+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+P+" = true; ":"null"==A?r+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+P+" = null; ":"array"==e.opts.coerceTypes&&"array"==A&&(r+=" else if ("+O+" == 'string' || "+O+" == 'number' || "+O+" == 'boolean' || "+m+" == null) "+P+" = ["+m+"]; ");r+=" else {   ",(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=x?""+T.join(","):""+T,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+T.join(","):""+T,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+P+" !== undefined) {  ";var R=u?"data"+(u-1||""):"parentData";r+=" "+m+" = "+P+"; ",u||(r+="if ("+R+" !== undefined)"),r+=" "+R+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+P+"; } "}else{(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=x?""+T.join(","):""+T,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+T.join(","):""+T,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",d&&(r+=" } if (errors === ",r+=v?"0":"errs_"+c,r+=") { ",w+="}");else{var D=e.RULES;if(D)for(var N=-1,j=D.length-1;N<j;)if(Z(S=D[N+=1])){if(S.type&&(r+=" if ("+e.util.checkDataType(S.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==S.type&&e.schema.properties){h=e.schema.properties;var L=Object.keys(h);if(L)for(var B,F=-1,z=L.length-1;F<z;){if(void 0!==(V=h[B=L[F+=1]]).default){var H=m+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}}else if("array"==S.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){M=-1;for(var V,G=U.length-1;M<G;)if(void 0!==(V=U[M+=1]).default){H=m+"["+M+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+H+" === null || "+H+" === '' "),r+=" ) "+H+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}}var X=S.rules;if(X)for(var W,Y=-1,q=X.length-1;Y<q;)if(Q(W=X[Y+=1])){var $=W.code(e,W.keyword,S.type);$&&(r+=" "+$+" ",d&&(_+="}"))}if(d&&(r+=" "+_+" ",_=""),S.type&&(r+=" } ",T&&T===S.type&&!E)){r+=" else { ";var K;p=e.schemaPath+".type",f=e.errSchemaPath+"/type";(K=K||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",r+=x?""+T.join(","):""+T,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=x?""+T.join(","):""+T,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";y=r;r=K.pop(),!e.compositeRule&&d?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}d&&(r+=" if (errors === ",r+=v?"0":"errs_"+c,r+=") { ",w+="}")}}function Z(e){for(var t=e.rules,n=0;n<t.length;n++)if(Q(t[n]))return!0}function Q(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var n=t.implements,r=0;r<n.length;r++)if(void 0!==e.schema[n[r]])return!0}(t)}return d&&(r+=" "+w+" "),v?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+g+" = errors === errs_"+c+";",r},_ye=Jge,wye=Oge,Tye=mye,xye=vye,Eye=bye,Sye=wye.ucs2length,kye=kge,Oye=Tye.Validation,Pye=function e(t,n,r,i){var o=this,a=this._opts,s=[void 0],l={},c=[],u={},h=[],p={},f=[];n=n||{schema:t,refVal:s,refs:l};var d=Cye.call(this,t,n,i),m=this._compilations[d.index];if(d.compiling)return m.callValidate=function e(){var t=m.validate,n=t.apply(this,arguments);return e.errors=t.errors,n};var g=this._formats,y=this.RULES;try{var v=_(t,n,r,i);m.validate=v;var b=m.callValidate;return b&&(b.schema=v.schema,b.errors=null,b.refs=v.refs,b.refVal=v.refVal,b.root=v.root,b.$async=v.$async,a.sourceCode&&(b.source=v.source)),v}finally{Aye.call(this,t,n,i)}function _(t,r,i,u){var p=!r||r&&r.schema==t;if(r.schema!=n.schema)return e.call(o,t,r,i,u);var d,m=!0===t.$async,v=Eye({isTop:!0,schema:t,isRoot:p,baseId:u,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Tye.MissingRef,RULES:y,validate:Eye,util:wye,resolve:_ye,resolveRef:w,usePattern:E,useDefault:S,useCustomRule:k,opts:a,formats:g,logger:o.logger,self:o});v=jye(s,Dye)+jye(c,Iye)+jye(h,Rye)+jye(f,Nye)+v,a.processCode&&(v=a.processCode(v,t));try{d=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",v)(o,y,g,n,s,h,f,kye,Sye,Oye),s[0]=d}catch(b){throw o.logger.error("Error compiling schema, function code:",v),b}return d.schema=t,d.errors=null,d.refs=l,d.refVal=s,d.root=p?d:r,m&&(d.$async=!0),!0===a.sourceCode&&(d.source={code:v,patterns:c,defaults:h}),d}function w(t,i,c){i=_ye.url(t,i);var u,h,p=l[i];if(void 0!==p)return x(u=s[p],h="refVal["+p+"]");if(!c&&n.refs){var f=n.refs[i];if(void 0!==f)return x(u=n.refVal[f],h=T(i,u))}h=T(i);var d=_ye.call(o,_,n,i);if(void 0===d){var m=r&&r[i];m&&(d=_ye.inlineRef(m,a.inlineRefs)?m:e.call(o,m,n,r,t))}if(void 0!==d)return function(e,t){var n=l[e];s[n]=t}(i,d),x(d,h);!function(e){delete l[e]}(i)}function T(e,t){var n=s.length;return s[n]=t,l[e]=n,"refVal"+n}function x(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function E(e){var t=u[e];return void 0===t&&(t=u[e]=c.length,c[t]=e),"pattern"+t}function S(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return wye.toQuotedString(e);case"object":if(null===e)return"null";var t=xye(e),n=p[t];return void 0===n&&(n=p[t]=h.length,h[n]=e),"default"+n}}function k(e,t,n,r){if(!1!==o._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every(function(e){return Object.prototype.hasOwnProperty.call(n,e)}))throw new Error("parent schema must have all required keywords: "+i.join(","));var s=e.definition.validateSchema;if(s)if(!s(t)){var l="keyword schema is invalid: "+o.errorsText(s.errors);if("log"!=o._opts.validateSchema)throw new Error(l);o.logger.error(l)}}var c,u=e.definition.compile,h=e.definition.inline,p=e.definition.macro;if(u)c=u.call(o,t,n,r);else if(p)c=p.call(o,t,n,r),!1!==a.validateSchema&&o.validateSchema(c,!0);else if(h)c=h.call(o,r,e.keyword,t,n);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=f.length;return f[d]=c,{code:"customRule"+d,validate:c}}};function Cye(e,t,n){var r=Mye.call(this,e,t,n);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:n},{index:r,compiling:!1})}function Aye(e,t,n){var r=Mye.call(this,e,t,n);r>=0&&this._compilations.splice(r,1)}function Mye(e,t,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==e&&i.root==t&&i.baseId==n)return r}return-1}function Iye(e,t){return"var pattern"+e+" = new RegExp("+wye.toQuotedString(t[e])+");"}function Rye(e){return"var default"+e+" = defaults["+e+"];"}function Dye(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function Nye(e){return"var customRule"+e+" = customRules["+e+"];"}function jye(e,t){if(!e.length)return"";for(var n="",r=0;r<e.length;r++)n+=t(r,e);return n}var Lye={exports:{}},Bye=Lye.exports=function(){this._cache={}};Bye.prototype.put=function(e,t){this._cache[e]=t},Bye.prototype.get=function(e){return this._cache[e]},Bye.prototype.del=function(e){delete this._cache[e]},Bye.prototype.clear=function(){this._cache={}};var Fye=Lye.exports,zye=Oge,Hye=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Uye=[0,31,28,31,30,31,30,31,31,30,31,30,31],Vye=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Gye=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Xye=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Wye=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Yye=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,qye=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,$ye=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Kye=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Zye=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Qye=Jye;function Jye(e){return e="full"==e?"full":"fast",zye.copy(Jye[e])}function eve(e){var t=e.match(Hye);if(!t)return!1;var n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(2==r&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:Uye[r])}function tve(e,t){var n=e.match(Vye);if(!n)return!1;var r=n[1],i=n[2],o=n[3],a=n[5];return(r<=23&&i<=59&&o<=59||23==r&&59==i&&60==o)&&(!t||a)}Jye.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Wye,url:Yye,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Gye,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ove,uuid:qye,"json-pointer":$ye,"json-pointer-uri-fragment":Kye,"relative-json-pointer":Zye},Jye.full={date:eve,time:tve,"date-time":function(e){var t=e.split(nve);return 2==t.length&&eve(t[0])&&tve(t[1],!0)},uri:function(e){return rve.test(e)&&Xye.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":Wye,url:Yye,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Gye,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ove,uuid:qye,"json-pointer":$ye,"json-pointer-uri-fragment":Kye,"relative-json-pointer":Zye};var nve=/t|\s/i;var rve=/\/|:/;var ive=/[^\\]\\Z/;function ove(e){if(ive.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var ave=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s;var f="maximum"==t,d=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[d],g=e.opts.$data&&m&&m.$data,y=f?"<":">",v=f?">":"<",b=void 0;if(!p&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(d+" must be number or boolean");if(g){var _=e.util.getData(m.$data,a,e.dataPathArr),w="exclusive"+o,T="exclType"+o,x="exclIsNumber"+o,E="' + "+(O="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+_+"; ",i+=" var "+w+"; var "+T+" = typeof "+(_="schemaExcl"+o)+"; if ("+T+" != 'boolean' && "+T+" != 'undefined' && "+T+" != 'number') { ";var S;b=d;(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+d+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var k=i;i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+T+" == 'number' ? ( ("+w+" = "+r+" === undefined || "+_+" "+y+"= "+r+") ? "+h+" "+v+"= "+_+" : "+h+" "+v+" "+r+" ) : ( ("+w+" = "+_+" === true) ? "+h+" "+v+"= "+r+" : "+h+" "+v+" "+r+" ) || "+h+" !== "+h+") { var op"+o+" = "+w+" ? '"+y+"' : '"+y+"='; ",void 0===s&&(b=d,c=e.errSchemaPath+"/"+d,r=_,p=g)}else{E=y;if((x="number"==typeof m)&&p){var O="'"+E+"'";i+=" if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" ( "+r+" === undefined || "+m+" "+y+"= "+r+" ? "+h+" "+v+"= "+m+" : "+h+" "+v+" "+r+" ) || "+h+" !== "+h+") { "}else{x&&void 0===s?(w=!0,b=d,c=e.errSchemaPath+"/"+d,r=m,v+="="):(x&&(r=Math[f?"min":"max"](m,s)),m===(!x||r)?(w=!0,b=d,c=e.errSchemaPath+"/"+d,v+="="):(w=!1,E+="="));O="'"+E+"'";i+=" if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+" "+v+" "+r+" || "+h+" !== "+h+") { "}}b=b||t,(S=S||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+O+", limit: "+r+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+E+" ",i+=p?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";k=i;return i=S.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i},sve=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var f=t,d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=d.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},lve=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");var f="maxLength"==t?">":"<";i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+f+" "+r+") { ";var d=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},cve=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var f=t,d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=p?"' + "+r+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=d.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},uve={$ref:function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(s||""),p="valid"+a;if("#"==l||"#/"==l)e.isRoot?(r=e.async,i="validate"):(r=!0===e.root.schema.$async,i="root.refVal[0]");else{var f=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===f){var d=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(d),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var m=o;o=v.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,d);e.logger.warn(d),u&&(o+=" if (true) { ")}}else if(f.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=f.schema,g.schemaPath="",g.errSchemaPath=l,o+=" "+e.validate(g).replace(/validate\.schema/g,f.code)+" ",u&&(o+=" if ("+y+") { ")}else r=!0===f.$async||e.async&&!1!==f.$async,i=f.code}if(i){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+h+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(o+=" var "+p+"; "),o+=" try { await "+b+"; ",u&&(o+=" "+p+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(o+=" "+p+" = false; "),o+=" } ",u&&(o+=" if ("+p+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",u&&(o+=" else { ")}return o},allOf:function(e,t,n){var r=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,h=l.baseId,p=!0,f=i;if(f)for(var d,m=-1,g=f.length-1;m<g;)d=f[m+=1],(e.opts.strictKeywords?"object"==typeof d&&Object.keys(d).length>0||!1===d:e.util.schemaHasRules(d,e.RULES.all))&&(p=!1,l.schema=d,l.schemaPath=o+"["+m+"]",l.errSchemaPath=a+"/"+m,r+="  "+e.validate(l)+" ",l.baseId=h,s&&(r+=" if ("+u+") { ",c+="}"));return s&&(r+=p?" if (true) { ":" "+c.slice(0,-1)+" "),r},anyOf:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level;if(a.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)})){var g=f.baseId;r+=" var "+p+" = errors; var "+h+" = false;  ";var y=e.compositeRule;e.compositeRule=f.compositeRule=!0;var v=a;if(v)for(var b,_=-1,w=v.length-1;_<w;)b=v[_+=1],f.schema=b,f.schemaPath=s+"["+_+"]",f.errSchemaPath=l+"/"+_,r+="  "+e.validate(f)+" ",f.baseId=g,r+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",d+="}";e.compositeRule=f.compositeRule=y,r+=" "+d+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else c&&(r+=" if (true) { ");return r},$comment:function(e,t,n){var r=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t;e.opts.allErrors;var a=e.util.toQuotedString(i);return!0===e.opts.$comment?r+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(r+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r},const:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),p||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+h+" = equal("+u+", schema"+i+"); if (!"+h+") {   ";var f=f||[];f.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var d=r;return r=f.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+d+"]); ":r+=" validate.errors = ["+d+"]; return false; ":r+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},contains:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level,m="i"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all);if(r+="var "+p+" = errors;var "+h+";",b){var _=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+=" var "+d+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";f.dataPathArr[g]=m;var T=e.validate(f);f.baseId=v,e.util.varOccurences(T,y)<2?r+=" "+e.util.varReplace(T,y,w)+" ":r+=" var "+y+" = "+w+"; "+T+" ",r+=" if ("+d+") break; }  ",e.compositeRule=f.compositeRule=_,r+="  if (!"+d+") {"}else r+=" if ("+u+".length == 0) {";var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var E=r;return r=x.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",b&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},dependencies:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e),f="";p.level++;var d="valid"+p.level,m={},g={},y=e.opts.ownProperties;for(w in a)if("__proto__"!=w){var v=a[w],b=Array.isArray(v)?g:m;b[w]=v}r+="var "+h+" = errors;";var _=e.errorPath;for(var w in r+="var missing"+i+";",g)if((b=g[w]).length){if(r+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),c){r+=" && ( ";var T=b;if(T)for(var x=-1,E=T.length-1;x<E;){A=T[x+=1],x&&(r+=" || "),r+=" ( ( "+(D=u+(R=e.util.getProperty(A)))+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:R)+") ) "}r+=")) {  ";var S="missing"+i,k="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,S,!0):_+" + "+S);var O=O||[];O.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var P=r;r=O.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+P+"]); ":r+=" validate.errors = ["+P+"]; return false; ":r+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var C=b;if(C)for(var A,M=-1,I=C.length-1;M<I;){A=C[M+=1];var R=e.util.getProperty(A),D=(k=e.util.escapeQuotes(A),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,A,e.opts.jsonPointers)),r+=" if ( "+D+" === undefined ",y&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",c&&(f+="}",r+=" else { ")}e.errorPath=_;var N=p.baseId;for(var w in m){v=m[w];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(r+=" "+d+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",y&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),r+=") { ",p.schema=v,p.schemaPath=s+e.util.getProperty(w),p.errSchemaPath=l+"/"+e.util.escapeFragment(w),r+="  "+e.validate(p)+" ",p.baseId=N,r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}"))}return c&&(r+="   "+f+" if ("+h+" == errors) {"),r},enum:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="i"+i,d="schema"+i;p||(r+=" var "+d+" = validate.schema"+s+";"),r+="var "+h+";",p&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=h+" = false;for (var "+f+"=0; "+f+"<"+d+".length; "+f+"++) if (equal("+u+", "+d+"["+f+"])) { "+h+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+h+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",c&&(r+=" else { "),r},format:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||"");if(!1===e.opts.format)return c&&(r+=" if (true) { "),r;var h,p=e.opts.$data&&a&&a.$data;p?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var f=e.opts.unknownFormats,d=Array.isArray(f);if(p){r+=" var "+(m="format"+i)+" = formats["+h+"]; var "+(g="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+i)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(r+=" var async"+i+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",p&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" (","ignore"!=f&&(r+=" ("+h+" && !"+m+" ",d&&(r+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),r+=") || "),r+=" ("+m+" && "+y+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":r+=" "+m+"("+u+") ",r+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[a])){if("ignore"==f)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(r+=" if (true) { "),r;if(d&&f.indexOf(a)>=0)return c&&(r+=" if (true) { "),r;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=n)return c&&(r+=" if (true) { "),r;if(v){if(!e.async)throw new Error("async format in sync schema");r+=" if (!(await "+(b="formats"+e.util.getProperty(a)+".validate")+"("+u+"))) { "}else{r+=" if (! ";var b="formats"+e.util.getProperty(a);g&&(b+=".validate"),r+="function"==typeof m?" "+b+"("+u+") ":" "+b+".test("+u+") ",r+=") { "}}var _=_||[];_.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",r+=p?""+h:""+e.util.toQuotedString(a),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=p?"' + "+h+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=p?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var w=r;return r=_.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c&&(r+=" else { "),r},if:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=f.baseId;if(y||v){var _;f.createErrors=!1,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+=" var "+p+" = errors; var "+h+" = true;  ";var w=e.compositeRule;e.compositeRule=f.compositeRule=!0,r+="  "+e.validate(f)+" ",f.baseId=b,f.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=w,y?(r+=" if ("+d+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(f)+" ",f.baseId=b,r+=" "+h+" = "+d+"; ",y&&v?r+=" var "+(_="ifClause"+i)+" = 'then'; ":_="'then'",r+=" } ",v&&(r+=" else { ")):r+=" if (!"+d+") { ",v&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(f)+" ",f.baseId=b,r+=" "+h+" = "+d+"; ",y&&v?r+=" var "+(_="ifClause"+i)+" = 'else'; ":_="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",c&&(r+=" else { ")}else c&&(r+=" if (true) { ");return r},items:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level,g="i"+i,y=f.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(r+="var "+p+" = errors;var "+h+";",Array.isArray(a)){var _=e.schema.additionalItems;if(!1===_){r+=" "+h+" = "+u+".length <= "+a.length+"; ";var w=l;l=e.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var T=T||[];T.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var x=r;r=T.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l=w,c&&(d+="}",r+=" else { ")}var E=a;if(E)for(var S,k=-1,O=E.length-1;k<O;)if(S=E[k+=1],e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all)){r+=" "+m+" = true; if ("+u+".length > "+k+") { ";var P=u+"["+k+"]";f.schema=S,f.schemaPath=s+"["+k+"]",f.errSchemaPath=l+"/"+k,f.errorPath=e.util.getPathExpr(e.errorPath,k,e.opts.jsonPointers,!0),f.dataPathArr[y]=k;var C=e.validate(f);f.baseId=b,e.util.varOccurences(C,v)<2?r+=" "+e.util.varReplace(C,v,P)+" ":r+=" var "+v+" = "+P+"; "+C+" ",r+=" }  ",c&&(r+=" if ("+m+") { ",d+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))){f.schema=_,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+u+".length > "+a.length+") {  for (var "+g+" = "+a.length+"; "+g+" < "+u+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);P=u+"["+g+"]";f.dataPathArr[y]=g;C=e.validate(f);f.baseId=b,e.util.varOccurences(C,v)<2?r+=" "+e.util.varReplace(C,v,P)+" ":r+=" var "+v+" = "+P+"; "+C+" ",c&&(r+=" if (!"+m+") break; "),r+=" } }  ",c&&(r+=" if ("+m+") { ",d+="}")}}else if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=l,r+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);P=u+"["+g+"]";f.dataPathArr[y]=g;C=e.validate(f);f.baseId=b,e.util.varOccurences(C,v)<2?r+=" "+e.util.varReplace(C,v,P)+" ":r+=" var "+v+" = "+P+"; "+C+" ",c&&(r+=" if (!"+m+") break; "),r+=" }"}return c&&(r+=" "+d+" if ("+p+" == errors) {"),r},maximum:ave,minimum:ave,maxItems:sve,minItems:sve,maxLength:lve,minLength:lve,maxProperties:cve,minProperties:cve,multipleOf:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;if(p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!p&&"number"!=typeof s)throw new Error(t+" must be number");i+="var division"+o+";if (",p&&(i+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+r+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",p&&(i+="  )  "),i+=" ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=p?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var d=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+d+"]); ":i+=" validate.errors = ["+d+"]; return false; ":i+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},not:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=l,r+=" var "+h+" = errors;  ";var d,m=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(d=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,d&&(p.opts.allErrors=d),e.compositeRule=p.compositeRule=m,r+=" if ("+f+") {   ";var g=g||[];g.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var y=r;r=g.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ");return r},oneOf:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p="errs__"+i,f=e.util.copy(e),d="";f.level++;var m="valid"+f.level,g=f.baseId,y="prevValid"+i,v="passingSchemas"+i;r+="var "+p+" = errors , "+y+" = false , "+h+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=f.compositeRule=!0;var _=a;if(_)for(var w,T=-1,x=_.length-1;T<x;)w=_[T+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))?(f.schema=w,f.schemaPath=s+"["+T+"]",f.errSchemaPath=l+"/"+T,r+="  "+e.validate(f)+" ",f.baseId=g):r+=" var "+m+" = true; ",T&&(r+=" if ("+m+" && "+y+") { "+h+" = false; "+v+" = ["+v+", "+T+"]; } else { ",d+="}"),r+=" if ("+m+") { "+h+" = "+y+" = true; "+v+" = "+T+"; }";return e.compositeRule=f.compositeRule=b,r+=d+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},pattern:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p=e.opts.$data&&s&&s.$data;p?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",p&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),i+=" !"+(p?"(new RegExp("+r+"))":e.usePattern(s))+".test("+h+") ) {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=p?""+r:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=p?"' + "+r+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+l:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var d=i;return i=f.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+d+"]); ":i+=" validate.errors = ["+d+"]; return false; ":i+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i},properties:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e),f="";p.level++;var d="valid"+p.level,m="key"+i,g="idx"+i,y=p.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+i,_=Object.keys(a||{}).filter(R),w=e.schema.patternProperties||{},T=Object.keys(w).filter(R),x=e.schema.additionalProperties,E=_.length||T.length,S=!1===x,k="object"==typeof x&&Object.keys(x).length,O=e.opts.removeAdditional,P=S||k||O,C=e.opts.ownProperties,A=e.baseId,M=e.schema.required;if(M&&(!e.opts.$data||!M.$data)&&M.length<e.opts.loopRequired)var I=e.util.toHash(M);function R(e){return"__proto__"!==e}if(r+="var "+h+" = errors;var "+d+" = true;",C&&(r+=" var "+b+" = undefined;"),P){if(r+=C?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",E){if(r+=" var isAdditional"+i+" = !(false ",_.length)if(_.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var D=_;if(D)for(var N=-1,j=D.length-1;N<j;)$=D[N+=1],r+=" || "+m+" == "+e.util.toQuotedString($)+" "}if(T.length){var L=T;if(L)for(var B=-1,F=L.length-1;B<F;)oe=L[B+=1],r+=" || "+e.usePattern(oe)+".test("+m+") "}r+=" ); if (isAdditional"+i+") { "}if("all"==O)r+=" delete "+u+"["+m+"]; ";else{var z=e.errorPath,H="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),S)if(O)r+=" delete "+u+"["+m+"]; ";else{r+=" "+d+" = false; ";var U=l;l=e.errSchemaPath+"/additionalProperties",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var V=r;r=ne.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,c&&(r+=" break; ")}else if(k)if("failing"==O){r+=" var "+h+" = errors;  ";var G=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=x,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var X=u+"["+m+"]";p.dataPathArr[y]=m;var W=e.validate(p);p.baseId=A,e.util.varOccurences(W,v)<2?r+=" "+e.util.varReplace(W,v,X)+" ":r+=" var "+v+" = "+X+"; "+W+" ",r+=" if (!"+d+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=p.compositeRule=G}else{p.schema=x,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);X=u+"["+m+"]";p.dataPathArr[y]=m;W=e.validate(p);p.baseId=A,e.util.varOccurences(W,v)<2?r+=" "+e.util.varReplace(W,v,X)+" ":r+=" var "+v+" = "+X+"; "+W+" ",c&&(r+=" if (!"+d+") break; ")}e.errorPath=z}E&&(r+=" } "),r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}")}var Y=e.opts.useDefaults&&!e.compositeRule;if(_.length){var q=_;if(q)for(var $,K=-1,Z=q.length-1;K<Z;){var Q=a[$=q[K+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){var J=e.util.getProperty($),ee=(X=u+J,Y&&void 0!==Q.default);p.schema=Q,p.schemaPath=s+J,p.errSchemaPath=l+"/"+e.util.escapeFragment($),p.errorPath=e.util.getPath(e.errorPath,$,e.opts.jsonPointers),p.dataPathArr[y]=e.util.toQuotedString($);W=e.validate(p);if(p.baseId=A,e.util.varOccurences(W,v)<2){W=e.util.varReplace(W,v,X);var te=X}else{te=v;r+=" var "+v+" = "+X+"; "}if(ee)r+=" "+W+" ";else{if(I&&I[$]){r+=" if ( "+te+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=") { "+d+" = false; ";z=e.errorPath,U=l;var ne,re=e.util.escapeQuotes($);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(z,$,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+re+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";V=r;r=ne.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+V+"]); ":r+=" validate.errors = ["+V+"]; return false; ":r+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=U,e.errorPath=z,r+=" } else { "}else c?(r+=" if ( "+te+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=") { "+d+" = true; } else { "):(r+=" if ("+te+" !== undefined ",C&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes($)+"') "),r+=" ) { ");r+=" "+W+" } "}}c&&(r+=" if ("+d+") { ",f+="}")}}if(T.length){var ie=T;if(ie)for(var oe,ae=-1,se=ie.length-1;ae<se;){Q=w[oe=ie[ae+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){p.schema=Q,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),r+=C?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+u+") { ",r+=" if ("+e.usePattern(oe)+".test("+m+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);X=u+"["+m+"]";p.dataPathArr[y]=m;W=e.validate(p);p.baseId=A,e.util.varOccurences(W,v)<2?r+=" "+e.util.varReplace(W,v,X)+" ":r+=" var "+v+" = "+X+"; "+W+" ",c&&(r+=" if (!"+d+") break; "),r+=" } ",c&&(r+=" else "+d+" = true; "),r+=" }  ",c&&(r+=" if ("+d+") { ",f+="}")}}}return c&&(r+=" "+f+" if ("+h+" == errors) {"),r},propertyNames:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level;if(r+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=l;var d="key"+i,m="idx"+i,g="i"+i,y="' + "+d+" + '",v="data"+(p.dataLevel=e.dataLevel+1),b="dataProperties"+i,_=e.opts.ownProperties,w=e.baseId;_&&(r+=" var "+b+" = undefined; "),r+=_?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+d+" = "+b+"["+m+"]; ":" for (var "+d+" in "+u+") { ",r+=" var startErrs"+i+" = errors; ";var T=d,x=e.compositeRule;e.compositeRule=p.compositeRule=!0;var E=e.validate(p);p.baseId=w,e.util.varOccurences(E,v)<2?r+=" "+e.util.varReplace(E,v,T)+" ":r+=" var "+v+" = "+T+"; "+E+" ",e.compositeRule=p.compositeRule=x,r+=" if (!"+f+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+d+"; }   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),c&&(r+=" break; "),r+=" } }"}return c&&(r+="  if ("+h+" == errors) {"),r},required:function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(o||""),h="valid"+i,p=e.opts.$data&&a&&a.$data;p&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="schema"+i;if(!p)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var d=[],m=a;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(d[d.length]=g)}}else d=a;if(p||d.length){var _=e.errorPath,w=p||d.length>=e.opts.loopRequired,T=e.opts.ownProperties;if(c)if(r+=" var missing"+i+"; ",w){p||(r+=" var "+f+" = validate.schema"+s+"; ");var x="' + "+(C="schema"+i+"["+(k="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,C,e.opts.jsonPointers)),r+=" var "+h+" = true; ",p&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=" for (var "+k+" = 0; "+k+" < "+f+".length; "+k+"++) { "+h+" = "+u+"["+f+"["+k+"]] !== undefined ",T&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+f+"["+k+"]) "),r+="; if (!"+h+") break; } ",p&&(r+="  }  "),r+="  if (!"+h+") {   ",(P=P||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var E=r;r=P.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var S=d;if(S)for(var k=-1,O=S.length-1;k<O;){M=S[k+=1],k&&(r+=" || "),r+=" ( ( "+(N=u+(D=e.util.getProperty(M)))+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(M)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:D)+") ) "}r+=") {  ";var P;x="' + "+(C="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,C,!0):_+" + "+C),(P=P||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";E=r;r=P.pop(),!e.compositeRule&&c?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(w){p||(r+=" var "+f+" = validate.schema"+s+"; ");var C;x="' + "+(C="schema"+i+"["+(k="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,C,e.opts.jsonPointers)),p&&(r+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),r+=" for (var "+k+" = 0; "+k+" < "+f+".length; "+k+"++) { if ("+u+"["+f+"["+k+"]] === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+f+"["+k+"]) "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var A=d;if(A)for(var M,I=-1,R=A.length-1;I<R;){M=A[I+=1];var D=e.util.getProperty(M),N=(x=e.util.escapeQuotes(M),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,M,e.opts.jsonPointers)),r+=" if ( "+N+" === undefined ",T&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(M)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+x+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else c&&(r+=" if (true) {");return r},uniqueItems:function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(a||""),p="valid"+o,f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,(s||f)&&!1!==e.opts.uniqueItems){f&&(i+=" var "+p+"; if ("+r+" === false || "+r+" === undefined) "+p+" = true; else if (typeof "+r+" != 'boolean') "+p+" = false; else { "),i+=" var i = "+h+".length , "+p+" = true , j; if (i > 1) { ";var d=e.schema.items&&e.schema.items.type,m=Array.isArray(d);if(!d||"object"==d||"array"==d||m&&(d.indexOf("object")>=0||d.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+p+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var g="checkDataType"+(m?"s":"");i+=" if ("+e.util[g](d,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",f&&(i+="  }  "),i+=" if (!"+p+") {   ";var y=y||[];y.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+l:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i},validate:bye},hve=uve,pve=Oge.toHash,fve=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],dve=mye.MissingRef,mve=function e(t,n,r){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(r=n,n=void 0);var o=a(t).then(function(){var e=i._addSchema(t,void 0,n);return e.validate||s(e)});return r&&o.then(function(e){r(null,e)},r),o;function a(t){var n=t.$schema;return n&&!i.getSchema(n)?e.call(i,{$ref:n},!0):Promise.resolve()}function s(e){try{return i._compile(e)}catch(t){if(t instanceof dve)return function(t){var r=t.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+t.missingRef+" cannot be resolved");var o=i._loadingSchemas[r];return o||(o=i._loadingSchemas[r]=i._opts.loadSchema(r)).then(l,l),o.then(function(e){if(!c(r))return a(e).then(function(){c(r)||i.addSchema(e,r,void 0,n)})}).then(function(){return s(e)});function l(){delete i._loadingSchemas[r]}function c(e){return i._refs[e]||i._schemas[e]}}(t);throw t}}};const gve={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var yve=gve,vve={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:yve.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:yve.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},bve=/^[a-z_$][a-z0-9_$-]*$/i,_ve=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,p="data"+(s||""),f="valid"+a,d="errs__"+a,m=e.opts.$data&&l&&l.$data;m?(o+=" var schema"+a+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=l;var g,y,v,b,_,w=this,T="definition"+a,x=w.definition,E="";if(m&&x.$data){_="keywordValidate"+a;var S=x.validateSchema;o+=" var "+T+" = RULES.custom['"+t+"'].definition; var "+_+" = "+T+".validate;"}else{if(!(b=e.useCustomRule(w,l,e.schema,e)))return;i="validate.schema"+c,_=b.code,g=x.compile,y=x.inline,v=x.macro}var k=_+".errors",O="i"+a,P="ruleErr"+a,C=x.async;if(C&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(o+=k+" = null;"),o+="var "+d+" = errors;var "+f+";",m&&x.$data&&(E+="}",o+=" if ("+i+" === undefined) { "+f+" = true; } else { ",S&&(E+="}",o+=" "+f+" = "+T+".validateSchema("+i+"); if ("+f+") { ")),y)x.statements?o+=" "+b.validate+" ":o+=" "+f+" = "+b.validate+"; ";else if(v){var A=e.util.copy(e);E="";A.level++;var M="valid"+A.level;A.schema=b.validate,A.schemaPath="";var I=e.compositeRule;e.compositeRule=A.compositeRule=!0;var R=e.validate(A).replace(/validate\.schema/g,_);e.compositeRule=A.compositeRule=I,o+=" "+R}else{(L=L||[]).push(o),o="",o+="  "+_+".call( ",e.opts.passContext?o+="this":o+="self",g||!1===x.schema?o+=" , "+p+" ":o+=" , "+i+" , "+p+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var D=s?"data"+(s-1||""):"parentData",N=s?e.dataPathArr[s]:"parentDataProperty",j=o+=" , "+D+" , "+N+" , rootData )  ";o=L.pop(),!1===x.errors?(o+=" "+f+" = ",C&&(o+="await "),o+=j+"; "):C?o+=" var "+(k="customErrors"+a)+" = null; try { "+f+" = await "+j+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } ":o+=" "+k+" = null; "+f+" = "+j+"; "}if(x.modifying&&(o+=" if ("+D+") "+p+" = "+D+"["+N+"];"),o+=""+E,x.valid)h&&(o+=" if (true) { ");else{var L;o+=" if ( ",void 0===x.valid?(o+=" !",o+=v?""+M:""+f):o+=" "+!x.valid+" ",o+=") { ",r=w.keyword,(L=L||[]).push(o),o="",(L=L||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+w.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+w.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var B=o;o=L.pop(),!e.compositeRule&&h?e.async?o+=" throw new ValidationError(["+B+"]); ":o+=" validate.errors = ["+B+"]; return false; ":o+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var F=o;o=L.pop(),y?x.errors?"full"!=x.errors&&(o+="  for (var "+O+"="+d+"; "+O+"<errors; "+O+"++) { var "+P+" = vErrors["+O+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+p+"; "),o+=" } "):!1===x.errors?o+=" "+F+" ":(o+=" if ("+d+" == errors) { "+F+" } else {  for (var "+O+"="+d+"; "+O+"<errors; "+O+"++) { var "+P+" = vErrors["+O+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+p+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+w.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+w.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===x.errors?o+=" "+F+" ":(o+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+O+"="+d+"; "+O+"<errors; "+O+"++) { var "+P+" = vErrors["+O+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+p+"; "),o+=" } } else { "+F+" } "),o+=" } ",h&&(o+=" else { ")}return o},wve=vve,Tve={add:function(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!bve.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var r=t.type;if(Array.isArray(r))for(var i=0;i<r.length;i++)a(e,r[i],t);else a(e,r,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function a(e,t,r){for(var i,o=0;o<n.length;o++){var a=n[o];if(a.type==t){i=a;break}}i||(i={type:t,rules:[]},n.push(i));var s={keyword:e,definition:r,custom:!0,code:_ve,implements:r.implements};i.rules.push(s),n.custom[e]=s}return n.keywords[e]=n.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)if(r[i].keyword==e){r.splice(i,1);break}return this},validate:function e(t,n){e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(wve,!0);if(r(t))return!0;if(e.errors=r.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}};const xve={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var Eve=Pye,Sve=Jge,kve=Fye,Ove=Uge,Pve=vye,Cve=Qye,Ave=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=pve(t),e.types=pve(["number","integer","string","array","object","boolean","null"]),e.forEach(function(n){n.rules=n.rules.map(function(n){var r;if("object"==typeof n){var i=Object.keys(n)[0];r=n[i],n=i,r.forEach(function(n){t.push(n),e.all[n]=!0})}return t.push(n),e.all[n]={keyword:n,code:hve[n],implements:r}}),e.all.$comment={keyword:"$comment",code:hve.$comment},n.type&&(e.types[n.type]=n)}),e.keywords=pve(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e},Mve=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var r,i=t[n].split("/"),o=e;for(r=1;r<i.length;r++)o=o[i[r]];for(r=0;r<fve.length;r++){var a=fve[r],s=o[a];s&&(o[a]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},Ive=Oge,Rve=Fve;Fve.prototype.validate=function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);n=r.validate||this._compile(r)}var i=n(t);return!0!==n.$async&&(this.errors=n.errors),i},Fve.prototype.compile=function(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)},Fve.prototype.addSchema=function(e,t,n,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,n,r);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return t=Sve.normalizeId(t||o),Xve(this,t),this._schemas[t]=this._addSchema(e,n,r,!0),this},Fve.prototype.addMetaSchema=function(e,t,n){return this.addSchema(e,t,n,!0),this},Fve.prototype.validateSchema=function(e,t){var n=e.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(jve)?jve:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return r},Fve.prototype.getSchema=function(e){var t=zve(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var n=Sve.schema.call(e,{schema:{}},t);if(n){var r=n.schema,i=n.root,o=n.baseId,a=Eve.call(e,r,i,void 0,o);return e._fragments[t]=new Ove({ref:t,fragment:!0,schema:r,root:i,baseId:o,validate:a}),a}}(this,e)}},Fve.prototype.removeSchema=function(e){if(e instanceof RegExp)return Hve(this,this._schemas,e),Hve(this,this._refs,e),this;switch(typeof e){case"undefined":return Hve(this,this._schemas),Hve(this,this._refs),this._cache.clear(),this;case"string":var t=zve(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,r=n?n(e):e;this._cache.del(r);var i=this._getId(e);i&&(i=Sve.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},Fve.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},Fve.prototype.errorsText=function(e,t){if(e=e||this.errors,!e)return"No errors";for(var n=void 0===(t=t||{}).separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=r+a.dataPath+" "+a.message+n)}return i.slice(0,-n.length)},Fve.prototype._addSchema=function(e,t,n,r){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(e):e,a=this._cache.get(o);if(a)return a;r=r||!1!==this._opts.addUsedSchema;var s=Sve.normalizeId(this._getId(e));s&&r&&Xve(this,s);var l,c=!1!==this._opts.validateSchema&&!t;c&&!(l=s&&s==Sve.normalizeId(e.$schema))&&this.validateSchema(e,!0);var u=Sve.ids.call(this,e),h=new Ove({id:s,schema:e,localRefs:u,cacheKey:o,meta:n});return"#"!=s[0]&&r&&(this._refs[s]=h),this._cache.put(o,h),c&&l&&this.validateSchema(e,!0),h},Fve.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var n,r;e.compiling=!0,e.meta&&(n=this._opts,this._opts=this._metaOpts);try{r=Eve.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=r,e.refs=r.refs,e.refVal=r.refVal,e.root=r.root,r;function i(){var t=e.validate,n=t.apply(this,arguments);return i.errors=t.errors,n}},Fve.prototype.compileAsync=mve;var Dve=Tve;Fve.prototype.addKeyword=Dve.add,Fve.prototype.getKeyword=Dve.get,Fve.prototype.removeKeyword=Dve.remove,Fve.prototype.validateKeyword=Dve.validate;var Nve=mye;Fve.ValidationError=Nve.Validation,Fve.MissingRefError=Nve.MissingRef,Fve.$dataMetaSchema=Mve;var jve="http://json-schema.org/draft-07/schema",Lve=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Bve=["/properties"];function Fve(e){if(!(this instanceof Fve))return new Fve(e);e=this._opts=Ive.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:Wve,warn:Wve,error:Wve};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=Cve(e.format),this._cache=e.cache||new kve,this._loadingSchemas={},this._compilations=[],this.RULES=Ave(),this._getId=function(e){switch(e.schemaId){case"auto":return Gve;case"id":return Uve;default:return Vve}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=Pve),this._metaOpts=function(e){for(var t=Ive.copy(e._opts),n=0;n<Lve.length;n++)delete t[Lve[n]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}(this),function(e){var t;if(e._opts.$data&&(t=xve,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=gve;e._opts.$data&&(n=Mve(n,Bve)),e.addMetaSchema(n,jve,!0),e._refs["http://json-schema.org/schema"]=jve}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}(this)}function zve(e,t){return t=Sve.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function Hve(e,t,n){for(var r in t){var i=t[r];!i.meta&&(!n||n.test(r))&&(e._cache.del(i.cacheKey),delete t[r])}}function Uve(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function Vve(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function Gve(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function Xve(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function Wve(){}const Yve=ks(Rve),qve={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://higlass.io/#viewconf",title:"HiGlass viewconf",type:"object",additionalProperties:!1,required:[],properties:{editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/zoomLocks"},locationLocks:{$ref:"#/definitions/locks/locationLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},definitions:{data:{type:"object",properties:{url:{type:"string"},server:{type:"string"},filetype:{type:"string"},type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},axisSpecificLocks:{additionalProperties:!1,properties:{axis:{enum:["x","y"],type:"string"},lock:{type:"string"}},required:["lock","axis"],type:"object"},locationLocksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{anyOf:[{type:"string"},{additionalProperties:!1,properties:{x:{$ref:"#/definitions/locks/axisSpecificLocks"},y:{$ref:"#/definitions/locks/axisSpecificLocks"}},type:"object"}]}}},zoomLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},locationLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locationLocksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2,default:[1,null]}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"integer",title:"The X Position",default:0},y:{type:"integer",title:"The Y Position",default:0},w:{type:"integer",title:"Width",default:12},h:{type:"integer",title:"Height",default:12},moved:{type:"boolean"},static:{type:"boolean"}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"},transforms:{type:"array"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["multivec","1d-heatmap","line","point","bar","divergent-bar","stacked-interval","gene-annotations","linear-2d-rectangle-domains","chromosome-labels","linear-heatmap","1d-value-interval","2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}}},$ve={"view-config-editor-header":"_view-config-editor-header_1hlm6_1","view-config-editor":"_view-config-editor_1hlm6_1","view-config-log":"_view-config-log_1hlm6_34","view-config-log-header":"_view-config-log-header_1hlm6_46","view-config-log-msg":"_view-config-log-msg_1hlm6_60",title:"_title_1hlm6_70",Warning:"_Warning_1hlm6_76",Success:"_Success_1hlm6_79",Error:"_Error_1hlm6_82"};function Kve(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zve(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zve(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Qve(e,t,n){return t=ebe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jve()?Reflect.construct(t,n||[],ebe(e).constructor):t.apply(e,n))}function Jve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jve=function(){return!!e})()}function ebe(e){return ebe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ebe(e)}function tbe(e,t){return(tbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let nbe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qve(this,t,[e])).state={code:e.viewConfig,hide:!1,showLog:!1,logMsgs:n.getLogMsgs(e.viewConfig)},n.handleChangeBound=n.handleChange.bind(n),n.handleKeyDownBound=n.handleKeyDown.bind(n),n.handleKeyUpBound=n.handleKeyUp.bind(n),n.handleSubmitBound=n.handleSubmit.bind(n),n.hideBound=n.hide.bind(n),n.showBound=n.show.bind(n),n.toggleLogBound=n.toggleLog.bind(n),n.pubSubs=[],n.pubSubs.push(n.props.pubSub.subscribe("keydown",n.handleKeyDownBound)),n.pubSubs.push(n.props.pubSub.subscribe("keyup",n.handleKeyUpBound)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tbe(e,t)}(t,e),Kve(t,[{key:"componentDidMount",value:async function(){this.editor&&(this.editor._input.focus(),this.editor._input.setSelectionRange(0,0),await ax(0),this.editorWrap&&(this.editorWrap.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.pubSubs.forEach(e=>this.props.pubSub.unsubscribe(e)),this.pubSubs=[]}},{key:"handleChange",value:function(e){const t=this.getLogMsgs(e);this.setState({code:e,logMsgs:t})}},{key:"handleKeyDown",value:function(e){"s"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.props.onChange(this.state.code)),"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.props.onChange(this.state.code),this.props.modal.close())}},{key:"handleKeyUp",value:function(e){this.setState({hide:!1}),"Escape"===e.key&&(e.preventDefault(),this.props.modal.close(),this.props.onCancel())}},{key:"handleSubmit",value:function(e){e&&e.preventDefault(),this.props.onSave(this.state.code)}},{key:"getLogMsgs",value:function(e){const t=[];let n;try{n=JSON.parse(e)}catch(i){return console.warn(i),t.push({type:"Error",msg:i.toString()}),t}const r=(new Yve).compile(qve);return r(n)||(console.warn("Invalid viewconf"),t.push({type:"Warning",msg:"Invalid viewconf"})),r.errors&&(console.warn(JSON.stringify(r.errors,null,2)),r.errors.forEach(e=>{t.push({type:"Warning",msg:JSON.stringify(e,null,2)})})),0===t.length&&t.push({type:"Success",msg:"No error or warnings"}),t}},{key:"hide",value:function(){this.setState({hide:!0})}},{key:"show",value:function(){this.setState({hide:!1})}},{key:"hideLog",value:function(){this.setState({showLog:!1})}},{key:"showLog",value:function(){this.setState({showLog:!0})}},{key:"toggleLog",value:function(){this.state.showLog?this.hideLog():this.showLog()}},{key:"render",value:function(){const e=this.state.logMsgs.map((e,t)=>{const n=`${t}-${e.msg}`;return i.createElement("tr",{key:n},i.createElement("td",{className:xs($ve.title,$ve[e.type])},`[${t}] ${e.type}`),i.createElement("td",null,i.createElement("pre",null,e.msg)))});return i.createElement(uY,{cancelShortcut:"ESC",cancelTitle:"Discard Changes",hide:this.state.hide,maxHeight:!0,okayShortcut:"\u2318+Enter",okayTitle:"Save and Close",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Edit View Config"},i.createElement(i.Fragment,null,i.createElement("header",{className:$ve["view-config-editor-header"]},i.createElement(qW,{onBlur:this.showBound,onMouseDown:this.hideBound,onMouseOut:this.showBound,onMouseUp:this.showBound},"Hide While Mousedown"),i.createElement(qW,{onClick:()=>{this.props.onChange(this.state.code)},shortcut:"\u2318+S"},"Save")),i.createElement("div",{ref:e=>{this.editorWrap=e},className:$ve["view-config-editor"]},i.createElement(Tge,{ref:e=>{this.editor=e},highlight:e=>lge.highlight(e,lge.languages.json),onValueChange:this.handleChangeBound,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:"inherit"},value:this.state.code})),i.createElement("div",{className:$ve["view-config-log"],style:{height:this.state.showLog?"50%":"30px"}},i.createElement("div",{className:$ve["view-config-log-header"],onClick:()=>this.toggleLogBound()},`Log Messages (${this.state.logMsgs.filter(e=>"Success"!==e.type).length})`),i.createElement("div",{className:$ve["view-config-log-msg"],style:{padding:this.state.showLog?"10px":0}},i.createElement("table",null,i.createElement("tbody",null,e))))))}}])}(i.Component);nbe.propTypes={modal:xm.object.isRequired,onCancel:xm.func.isRequired,onChange:xm.func.isRequired,onSave:xm.func.isRequired,pubSub:xm.object.isRequired,viewConfig:xm.string.isRequired};const rbe=$Y(JW(nbe)),ibe="_add-track-position-table_egwog_1",obe="_add-track-position-table-dark_egwog_7",abe="_add-track-position-other_egwog_11",sbe="_add-track-position-top-center_egwog_15",lbe="_add-track-position-middle-left_egwog_30",cbe="_add-track-position-middle-right_egwog_45",ube="_add-track-position-middle-middle_egwog_60",hbe="_add-track-position-middle-middle-full_egwog_72",pbe="_add-track-position-middle-middle-upper-right_egwog_80",fbe="_add-track-position-middle-middle-lower-left_egwog_94",dbe="_add-track-position-bottom-middle_egwog_108",mbe="_add-track-position-span_egwog_123";function gbe(e){return i.createElement("div",null,i.createElement("div",{className:mbe},"Add Track..."),i.createElement("table",{className:xs(ibe,{[obe]:e.theme===Ew})},i.createElement("tbody",null,i.createElement("tr",{style:{height:"30px"}},i.createElement("td",{"aria-hidden":"true",className:abe}),i.createElement("td",{className:sbe,onClick:()=>e.onTrackPositionChosen("top")},"top"),i.createElement("td",{"aria-hidden":"true",className:abe})),i.createElement("tr",{style:{height:"80px"}},i.createElement("td",{className:lbe,onClick:()=>e.onTrackPositionChosen("left")},"left"),i.createElement("td",{className:ube},i.createElement("span",{onClick:()=>e.onTrackPositionChosen("center"),className:hbe,"data-testid":"add-track-center"},"center"),i.createElement("span",{onClick:()=>e.onTrackPositionChosen("center","upper-right"),className:pbe,"data-testid":"add-track-upper-right"}),i.createElement("span",{onClick:()=>e.onTrackPositionChosen("center","lower-left"),className:fbe,"data-testid":"add-track-lower-left"})),i.createElement("td",{className:cbe,onClick:()=>e.onTrackPositionChosen("right")},"right")),i.createElement("tr",{style:{height:"30px"}},i.createElement("td",{"aria-hidden":"true",className:abe}),i.createElement("td",{className:dbe,onClick:()=>e.onTrackPositionChosen("bottom")},"bottom"),i.createElement("td",{"aria-hidden":"true",className:abe})))))}gbe.propTypes={onTrackPositionChosen:xm.func.isRequired,theme:xm.symbol.isRequired};const ybe=fZ(gbe);function vbe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bbe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bbe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _be(e,t,n){return t=Tbe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wbe()?Reflect.construct(t,n||[],Tbe(e).constructor):t.apply(e,n))}function wbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wbe=function(){return!!e})()}function Tbe(e){return Tbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tbe(e)}function xbe(e,t){return(xbe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Ebe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_be(this,t,[e])).state={submenuShown:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xbe(e,t)}(t,e),vbe(t,[{key:"getConfigureViewMenu",value:function(e,t){const n=["backgroundColor"],r={},o={};for(const i of n)if(i in Object.keys(l8)&&(r[i]={name:l8[i].name},l8[i].inlineOptions))for(const e in l8[i].inlineOptions){const t=l8[i].inlineOptions[e];r[i].children||(r[i].children={});const n={name:t.name,value:t.value};n.handler=()=>{o[i]=t.value,this.props.onOptionsChanged(o)},r[i].children[e]=n}return i.createElement(EQ,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:r,orientation:this.state.orientation,parentBbox:t,position:e,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const e=this.state.submenuSourceBbox,t="left"===this.state.orientation?{left:this.state.left,top:e.top}:{left:this.state.left+e.width+7,top:e.top};return"options"===this.state.submenuShown.option?this.getConfigureViewMenu(t,e):i.createElement("div",null)}return i.createElement("div",null)}},{key:"render",value:function(){return i.createElement("div",{ref:e=>{this.div=e},className:xs(zZ,{[HZ]:this.props.theme===Ew}),"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top}},i.createElement(YZ,{onClick:e=>this.props.onTogglePositionSearchBox(e)},"Toggle position search box"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:e=>this.props.onZoomToData(e)},"Zoom to data extent"),i.createElement(YZ,{onClick:e=>this.props.onClearView(e)},"Clear View"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:e=>this.props.onYankZoom(e)},"Take zoom from"),i.createElement(YZ,{onClick:e=>this.props.onYankLocation(e)},"Take location from"),i.createElement(YZ,{onClick:e=>this.props.onYankZoomAndLocation(e)},"Take zoom and location from"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:this.props.onLockZoom},"Lock zoom with"),i.createElement(YZ,{onClick:this.props.onLockLocation},"Lock location with"),i.createElement(YZ,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:e=>this.props.onUnlockZoom(e)},"Unlock zoom"),i.createElement(YZ,{onClick:e=>this.props.onUnlockLocation(e)},"Unlock location"),i.createElement(YZ,{onClick:e=>this.props.onUnlockZoomAndLocation(e)},"Unlock zoom and location"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:e=>this.props.onProjectViewport(e)},"Show this viewport on"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:e=>this.props.onEditViewConfig(e)},"Edit view config"),i.createElement("hr",{className:GZ}),i.createElement(YZ,{onClick:()=>this.props.onExportSVG()},"Export views as SVG"),i.createElement(YZ,{onClick:()=>this.props.onExportPNG()},"Export views as PNG"),i.createElement(YZ,{onClick:()=>this.props.onExportViewAsJSON()},"Export views as JSON"),i.createElement(YZ,{onClick:()=>this.props.onExportViewAsLink()},"Export views as Link"),this.getSubmenu())}}])}(yQ);function Sbe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kbe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kbe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Obe(e,t,n){return t=Cbe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pbe()?Reflect.construct(t,n||[],Cbe(e).constructor):t.apply(e,n))}function Pbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pbe=function(){return!!e})()}function Cbe(e){return Cbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cbe(e)}function Abe(e,t){return(Abe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Ebe.propTypes={onEditViewConfig:xm.func.isRequired,onExportSVG:xm.func,onExportPNG:xm.func,onExportViewAsJSON:xm.func,onExportViewAsLink:xm.func,onLockLocation:xm.func,onLockZoom:xm.func,onLockZoomAndLocation:xm.func,onProjectViewport:xm.func,onTakeAndLockZoomAndLocation:xm.func,onTogglePositionSearchBox:xm.func,onUnlockLocation:xm.func,onUnlockZoom:xm.func,onUnlockZoomAndLocation:xm.func,onYankLocation:xm.func,onYankZoom:xm.func,onYankZoomAndLocation:xm.func,onZoomToData:xm.func,theme:xm.symbol};let Mbe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Obe(this,t,[e])).configImg=null,n.plusImg=null,n.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},n.handleTrackPositionChosenBound=n.handleTrackPositionChosen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Abe(e,t)}(t,e),Sbe(t,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){const e=this.el.clientWidth;e!==this.state.width&&this.setState({width:e})}},{key:"handleConfigMenuOpened",value:function(e){this.setState({configMenuUid:e,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(e){this.setState({addTrackPositionMenuUid:e,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(e,t){this.props.onTrackPositionChosen(e,t),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){let e=null,t=null;this.state.addTrackPositionMenuPosition&&(t=i.createElement(VY,{onMenuClosed:()=>{this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},i.createElement(yQ,{orientation:"left",position:this.state.addTrackPositionMenuPosition,theme:this.props.theme},i.createElement(ybe,{onTrackPositionChosen:this.handleTrackPositionChosenBound})))),this.state.configMenuUid&&(e=i.createElement(VY,{onMenuClosed:()=>this.setState({configMenuUid:null})},i.createElement(Ebe,{onClearView:()=>{this.setState({configMenuUid:null}),this.props.onClearView()},onEditViewConfig:()=>{this.setState({configMenuUid:null}),this.props.onEditViewConfig(this.state.configMenuUid)},onExportPNG:()=>{this.setState({configMenuUid:null}),this.props.onExportPNG()},onExportSVG:()=>{this.setState({configMenuUid:null}),this.props.onExportSVG()},onExportViewAsJSON:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsJSON()},onExportViewAsLink:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsLink()},onLockLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockLocation(this.state.configMenuUid)},onLockZoom:()=>{this.setState({configMenuUid:null}),this.props.onLockZoom(this.state.configMenuUid)},onLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockZoomAndLocation(this.state.configMenuUid)},onOptionsChanged:e=>{this.props.onViewOptionsChanged(e),this.setState({configMenuUid:null})},onProjectViewport:()=>{this.setState({configMenuUid:null}),this.props.onProjectViewport(this.state.configMenuUid)},onTakeAndLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid)},onTogglePositionSearchBox:()=>{this.setState({configMenuUid:null}),this.props.onTogglePositionSearchBox(this.state.configMenuUid)},onUnlockLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockLocation(this.state.configMenuUid)},onUnlockZoom:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoom(this.state.configMenuUid)},onUnlockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoomAndLocation(this.state.configMenuUid)},onYankLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankLocation(this.state.configMenuUid)},onYankZoom:()=>{this.setState({configMenuUid:null}),this.props.onYankZoom(this.state.configMenuUid)},onYankZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankZoomAndLocation(this.state.configMenuUid)},onZoomToData:()=>{this.setState({configMenuUid:null}),this.props.onZoomToData(this.state.configMenuUid)},orientation:"left",position:this.state.configMenuPosition,theme:this.props.theme})));const n=this.props.getGenomePositionSearchBox(this.state.isFocused,e=>{this.setState({isFocused:e})}),r=xs(this.state.isFocused?kw["multitrack-header-focus"]:kw["multitrack-header"],{[kw["multitrack-header-dark"]]:this.props.theme===Ew}),o=this.state.width<=400?kw["multitrack-header-icon-squeazed"]:kw["multitrack-header-icon"];return i.createElement("div",{ref:e=>{this.el=e},className:r},i.createElement("div",{className:kw["multitrack-header-left"]},this.props.mouseTool===yw&&i.createElement("svg",{className:xs(kw["mouse-tool-selection"],o)},i.createElement("title",null,"Selection tool active"),i.createElement("use",{xlinkHref:"#select"})),i.createElement("div",{className:kw["multitrack-header-grabber"],title:"Drag to move the view"},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null)),this.state.width>300&&i.createElement("div",{className:kw["multitrack-header-search"]},this.props.isGenomePositionSearchBoxVisible&&n)),i.createElement("nav",{className:kw["multitrack-header-nav-list"]},i.createElement("svg",{className:o,onClick:this.props.onAddView},i.createElement("title",null,"Add new view (clone this view)"),i.createElement("use",{xlinkHref:"#copy"})),i.createElement("svg",{ref:e=>{this.configImg=e},className:o,onClick:()=>this.handleConfigMenuOpened(this.props.viewUid)},i.createElement("title",null,"Configure this view"),i.createElement("use",{xlinkHref:"#cog"})),i.createElement("svg",{ref:e=>{this.plusImg=e},className:o,onClick:()=>this.handleAddTrackPositionMenuOpened(this.props.viewUid),"data-testid":"add-track"},i.createElement("title",null,"Add Track"),i.createElement("use",{xlinkHref:"#plus"})),i.createElement("svg",{className:o,onClick:this.props.onCloseView},i.createElement("title",null,"Close View"),i.createElement("use",{xlinkHref:"#cross"}))),e,t)}}])}(i.Component);Mbe.defaultProps={isGenomePositionSearchBoxVisible:!1},Mbe.propTypes={getGenomePositionSearchBox:xm.func.isRequired,isGenomePositionSearchBoxVisible:xm.bool,mouseTool:xm.string.isRequired,onAddView:xm.func.isRequired,onClearView:xm.func.isRequired,onCloseView:xm.func.isRequired,onEditViewConfig:xm.func.isRequired,onExportSVG:xm.func.isRequired,onExportPNG:xm.func.isRequired,onExportViewsAsJSON:xm.func.isRequired,onExportViewsAsLink:xm.func.isRequired,onLockLocation:xm.func.isRequired,onLockZoom:xm.func.isRequired,onLockZoomAndLocation:xm.func.isRequired,onProjectViewport:xm.func.isRequired,onTakeAndLockZoomAndLocation:xm.func.isRequired,onTogglePositionSearchBox:xm.func.isRequired,onTrackPositionChosen:xm.func.isRequired,onUnlockLocation:xm.func.isRequired,onUnlockZoom:xm.func.isRequired,onUnlockZoomAndLocation:xm.func.isRequired,onViewOptionsChanged:xm.func.isRequired,onYankLocation:xm.func.isRequired,onYankZoom:xm.func.isRequired,onYankZoomAndLocation:xm.func.isRequired,onZoomToData:xm.func.isRequired,theme:xm.symbol.isRequired,viewUid:xm.string.isRequired};const Ibe=fZ(Mbe);const Rbe=i.createContext(null),Dbe="_higlass_1k7ri_1",Nbe="_higlass-dark-theme_1k7ri_5",jbe="_higlass-container-overflow_1k7ri_9",Lbe="_higlass-scroll-container-overflow_1k7ri_10",Bbe="_higlass-scroll-container-scroll_1k7ri_11",Fbe="_higlass-canvas_1k7ri_28",zbe="_higlass-drawing-surface_1k7ri_33",Hbe="_higlass-svg_1k7ri_38",Ube="_tiled-area_1k7ri_47",Vbe="_track-mouseover-menu_1k7ri_54";function Gbe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xbe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xbe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Wbe(e,t,n){return t=qbe(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ybe()?Reflect.construct(t,n||[],qbe(e).constructor):t.apply(e,n))}function Ybe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ybe=function(){return!!e})()}function qbe(e){return qbe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qbe(e)}function $be(e,t){return($be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}let Kbe=function(e){function t(e){var n,r,a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),a=Wbe(this,t,[e]),$T(i.version)<15.6&&console.warn("HiGlass requires React v15.6 or higher. Current version: ",i.version),a.topDivRef=i.createRef(),a.pubSub=Mm(),a.domEvent=$_(a.pubSub),a.pubSubs=[],a.minHorizontalHeight=20,a.minVerticalWidth=20,a.resizeSensor=null,a.uid=a_.nice(),a.tiledPlots={},a.genomePositionSearchBoxes={},a.xScales={},a.yScales={},a.projectionXDomains={},a.projectionYDomains={},a.topDiv=null,a.zoomToDataExtentOnInit=new Set,a.viewTrackUidsToCombinedUid={},a.combinedUidToViewTrack={},a.scalesChangedListeners={},a.draggingChangedListeners={},a.valueScalesChangedListeners={},a.zoomLocks={},a.locationLocks={},a.locationLocksAxisWise={x:{},y:{}},a.valueScaleLocks={},a.prevAuthToken=e.options.authToken,a.setCenters={},a.plusImg={},a.configImg={},ow.PIXI=(null==(n=e.options)?void 0:n.PIXI)||ws,a.viewMarginTop=+e.options.viewMarginTop>=0?+e.options.viewMarginTop:0,a.viewMarginBottom=+e.options.viewMarginBottom>=0?+e.options.viewMarginBottom:0,a.viewMarginLeft=+e.options.viewMarginLeft>=0?+e.options.viewMarginLeft:0,a.viewMarginRight=+e.options.viewMarginRight>=0?+e.options.viewMarginRight:0,a.viewPaddingTop=+e.options.viewPaddingTop>=0?+e.options.viewPaddingTop:5,a.viewPaddingBottom=+e.options.viewPaddingBottom>=0?+e.options.viewPaddingBottom:5,a.viewPaddingLeft=+e.options.viewPaddingLeft>=0?+e.options.viewPaddingLeft:5,a.viewPaddingRight=+e.options.viewPaddingRight>=0?+e.options.viewPaddingRight:5,a.genomePositionSearchBox=null,a.viewHeaders={},a.boundRefreshView=()=>{a.refreshView(bw)},a.unsetOnLocationChange=[],a.setTheme(e.options.theme,e.options.isDarkTheme),a.viewconfLoaded=!1;const{viewConfig:s}=a.props,l=a.processViewConfig(JSON.parse(JSON.stringify(a.props.viewConfig)));e.options.authToken&&CW(e.options.authToken),a.pixiRoot=new ow.PIXI.Container,a.pixiRoot.interactive=!0,a.pixiStage=new ow.PIXI.Container,a.pixiStage.interactive=!0,a.pixiRoot.addChild(a.pixiStage),a.pixiMask=new ow.PIXI.Graphics,a.pixiRoot.addChild(a.pixiMask),a.pixiStage.mask=a.pixiMask,a.element=null,a.scrollTop=0;let c=gw;if(a.props.options)switch(a.props.options.mouseTool){case yw:c=yw;break;case vw:c=vw}a.props.options.pluginTracks&&(window.higlassTracksByType=Object.assign(window.higlassTracksByType||{},a.props.options.pluginTracks));const u={};try{window.higlassTracksByType&&Object.entries(window.higlassTracksByType).forEach(e=>{let[t,n]=e;u[t]=n})}catch{console.warn("Broken config of a plugin track")}a.props.options.pluginDataFetchers&&(window.higlassDataFetchersByType=Object.assign(window.higlassDataFetchersByType||{},a.props.options.pluginDataFetchers));const h=window.higlassDataFetchersByType,p=a.props.options.pixelPreciseMarginPadding?1:30;a.mounted=!1,a.pluginTracks=u,a.pluginDataFetchers=h,a.state={currentBreakpoint:"lg",width:0,height:0,rowHeight:p,svgElement:null,canvasElement:null,customDialog:null,views:l,viewConfig:s,addTrackPositionMenuPosition:null,typedEditable:void 0,mouseOverOverlayUid:null,mouseTool:c,overTrackChooser:null,isDarkTheme:!1,rangeSelection1dSize:[0,Number.POSITIVE_INFINITY],rangeSelectionToInt:!1,modal:null,sizeMode:null==(r=a.props.options)?void 0:r.sizeMode},a.attachedToDOM=!1;const{public:f,destroy:d,publish:m,stack:g}=function(e,t){const n=e;let r=[];const i=Mm(),a=()=>{r.forEach(e=>t.unsubscribe(e)),r=[]};return{destroy:a,publish:i.publish,stack:i.stack,public:{get version(){return vme},setBroadcastMousePositionGlobally(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setBroadcastMousePositionGlobally(e)},setShowGlobalMousePosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setShowGlobalMousePosition(e)},setGlobalMousePosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setBroadcastMousePositionGlobally(e),n.setShowGlobalMousePosition(e)},setAuthHeader(e){CW(e),n.reload()},getAuthHeader:()=>AW(),getComponent:()=>n,reload(e){let t;t=e?e.flatMap(e=>"string"==typeof e?n.iterateOverTracksInView(e):e):n.iterateOverTracks();for(const{viewId:r,trackId:i}of t){const e=n.getTrackObject(r,i);for(const t of e.childTracks||[e])t.fetchedTiles&&(t.removeTiles(Object.keys(t.fetchedTiles)),t.fetching.clear(),t.refreshTiles()),t.rerender(t.options,!0)}},destroy(){a(),n.topDivRef.current&&o.unmountComponentAtNode(n.topDivRef.current)},setRangeSelectionToInt(){n.setState({rangeSelectionToInt:!0})},setRangeSelectionToFloat(){n.setState({rangeSelectionToInt:!1})},setRangeSelection1dSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;n.setState({rangeSelection1dSize:[e,t]})},setViewConfig(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=n.processViewConfig(e);return new Promise(a=>{this.requestsInFlight=0,r.push(t.subscribe("requestSent",()=>{this.requestsInFlight+=1})),r.push(t.subscribe("requestReceived",()=>{this.requestsInFlight-=1,0===this.requestsInFlight&&a()})),n.setState({viewConfig:e,views:o},()=>{i&&a()})})},getViewConfig:()=>n.getViewsAsJson(),validateViewConfig(e){let{verbose:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(new Yve).compile(qve),r=n(e);return t&&n.errors&&console.warn(JSON.stringify(n.errors,null,2)),r},getMinMaxValue(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.getMinMaxValue(e,t,r,i)},shareViewConfigAsLink:e=>n.handleExportViewsAsLink(e,!0),showAvailableTrackPositions(e){n.setState({draggingHappening:e})},hideAvailableTrackPositions(){n.setState({draggingHappening:null})},measureSize(){n.measureSize();for(const e of Object.values(n.tiledPlots))e&&e.measureSize()},showTrackChooser(e){n.setState({chooseTrackHandler:function(){n.setState({chooseTrackHandler:null}),e(...arguments)}})},hideTrackChooser(){n.setState({chooseTrackHandler:null})},setTrackValueScaleLimits(e,t,r,i){n.setTrackValueScaleLimits(e,t,r,i)},setDarkTheme(e){console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');const t=e?"dark":"light";n.setTheme(t)},setTheme(e){console.warn("Please note that theming is still in beta!"),n.setTheme(e)},zoomTo(e,t,r,i,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n.zoomTo(e,t,r,i,o,a)},zoomToGene(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n.zoomToGene(e,t,r,i)},suggestGene:(e,t,r)=>n.suggestGene(e,t,r),zoomToDataExtent(e){n.handleZoomToData(e)},resetViewport(e){n.resetViewport(e)},activateTool(e){switch(e){case"track-select":n.setMouseTool(vw);break;case"select":n.setMouseTool(yw);break;default:n.setMouseTool(gw)}},setSizeMode(e){switch(e){case"bounded":n.setSizeMode(Jw);break;case"overflow":n.setSizeMode(eT);break;case"bounded-overflow":n.setSizeMode(tT);break;case"scroll":n.setSizeMode(nT);break;default:n.setSizeMode(Qw)}},exportAsPngBlobPromise:()=>n.createPNGBlobPromise(),exportAsSvg:()=>n.createSVGString(),exportAsViewConfString:()=>n.getViewsAsString(),getRangeSelection:()=>n.rangeSelection,getLocation(e){var t;const r=e?n.xScales[e]&&n.yScales[e]&&e:null==(t=Object.values(n.tiledPlots)[0])?void 0:t.props.uid;return r?{xDomain:n.xScales[r].domain(),yDomain:n.yScales[r].domain(),xRange:n.xScales[r].range(),yRange:n.yScales[r].range()}:"Please provide a valid view UUID sweetheart \ud83d\ude19"},getTrackObject(e,t){let r=e,i=t;return t||(r=Object.values(n.state.views)[0].uid,i=e),Mx(n,r,i)},option(e,t){if(typeof t>"u")return n.props.options[e];"sizeMode"===e?(n.props.options[e]=t,(e=>{e.setState(e.state)})(n)):console.warn(`This option "${e}" is either unknown or not settable.`)},off(e,t,r){const o="object"==typeof t?t.callback:t;switch(e){case"annotationCreated":i.unsubscribe("annotationCreated",o);break;case"annotationChanged":i.unsubscribe("annotationChanged",o);break;case"annotationRemoved":i.unsubscribe("annotationRemoved",o);break;case"click":i.unsubscribe("click",o);break;case"cursorLocation":i.unsubscribe("cursorLocation",o);break;case"datasetInfo":i.unsubscribe("datasetInfo",o);break;case"location":n.offLocationChange(r,t);break;case"mouseMoveZoom":i.unsubscribe("mouseMoveZoom",o);break;case"wheel":i.unsubscribe("wheel",o);break;case"rangeSelection":i.unsubscribe("rangeSelection",o);break;case"viewConfig":n.offViewChange(t);break;case"createSVG":n.offPostCreateSVG();break;case"geneSearch":i.unsubscribe("geneSearch",o)}},on(e,t,r,o){switch(e){case"annotationCreated":return i.subscribe("annotationCreated",t);case"annotationChanged":return i.subscribe("annotationChanged",t);case"annotationRemoved":return i.subscribe("annotationRemoved",t);case"click":return i.subscribe("click",t);case"cursorLocation":return i.subscribe("cursorLocation",t);case"datasetInfo":return i.subscribe("datasetInfo",t);case"location":return n.onLocationChange(r,t,o);case"mouseMoveZoom":return i.subscribe("mouseMoveZoom",t);case"wheel":return i.subscribe("wheel",t);case"rangeSelection":return i.subscribe("rangeSelection",t);case"viewConfig":return n.onViewChange(t);case"createSVG":return n.onPostCreateSVG(t);case"geneSearch":return i.subscribe("geneSearch",t);default:return}}}}}(a,a.pubSub);return a.api=f,a.apiDestroy=d,a.apiPublish=m,a.apiStack=g,a.viewChangeListener=[],a.triggerViewChangeDb=cw(a.triggerViewChange.bind(a),250),a.pubSubs=[],a.rangeSelection=[null,null],a.prevMouseHoverTrack=null,a.zooming=!1,a.appClickHandlerBound=a.appClickHandler.bind(a),a.canvasClickHandlerBound=a.canvasClickHandler.bind(a),a.keyDownHandlerBound=a.keyDownHandler.bind(a),a.keyUpHandlerBound=a.keyUpHandler.bind(a),a.resizeHandlerBound=a.resizeHandler.bind(a),a.resizeHandlerBound=a.resizeHandler.bind(a),a.dispatchEventBound=a.dispatchEvent.bind(a),a.animateOnMouseMoveHandlerBound=a.animateOnMouseMoveHandler.bind(a),a.zoomStartHandlerBound=a.zoomStartHandler.bind(a),a.zoomEndHandlerBound=a.zoomEndHandler.bind(a),a.zoomHandlerBound=a.zoomHandler.bind(a),a.trackDroppedHandlerBound=a.trackDroppedHandler.bind(a),a.trackDimensionsModifiedHandlerBound=a.trackDimensionsModifiedHandler.bind(a),a.animateBound=a.animate.bind(a),a.animateOnGlobalEventBound=a.animateOnGlobalEvent.bind(a),a.requestReceivedHandlerBound=a.requestReceivedHandler.bind(a),a.wheelHandlerBound=a.wheelHandler.bind(a),a.mouseMoveHandlerBound=a.mouseMoveHandler.bind(a),a.onMouseLeaveHandlerBound=a.onMouseLeaveHandler.bind(a),a.onBlurHandlerBound=a.onBlurHandler.bind(a),a.openModalBound=a.openModal.bind(a),a.closeModalBound=a.closeModal.bind(a),a.handleEditViewConfigBound=a.handleEditViewConfig.bind(a),a.onScrollHandlerBound=a.onScrollHandler.bind(a),a.viewUidToNameBound=a.viewUidToName.bind(a),a.typedText="",a.typedTextTimeout=null,a.modal={open:a.openModalBound,close:a.closeModalBound},a.setBroadcastMousePositionGlobally(a.props.options.broadcastMousePositionGlobally||a.props.options.globalMousePosition),a.setShowGlobalMousePosition(a.props.options.showGlobalMousePosition||a.props.options.globalMousePosition),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$be(e,t)}(t,e),Gbe(t,[{key:"UNSAFE_componentWillMount",value:function(){this.domEvent.register("keydown",document),this.domEvent.register("keyup",document),this.domEvent.register("scroll",document),this.domEvent.register("resize",window),this.domEvent.register("orientationchange",window),this.domEvent.register("wheel",window),this.domEvent.register("mousedown",window,!0),this.domEvent.register("mouseup",window,!0),this.domEvent.register("click",window,!0),this.domEvent.register("mousemove",window),this.domEvent.register("touchmove",window),this.domEvent.register("touchstart",window),this.domEvent.register("touchend",window),this.domEvent.register("touchcancel",window),this.domEvent.register("blur",window),this.pubSubs.push(this.pubSub.subscribe("app.click",this.appClickHandlerBound),this.pubSub.subscribe("blur",this.onBlurHandlerBound),this.pubSub.subscribe("keydown",this.keyDownHandlerBound),this.pubSub.subscribe("keyup",this.keyUpHandlerBound),this.pubSub.subscribe("resize",this.resizeHandlerBound),this.pubSub.subscribe("wheel",this.wheelHandlerBound),this.pubSub.subscribe("orientationchange",this.resizeHandlerBound),this.pubSub.subscribe("app.event",this.dispatchEventBound),this.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandlerBound),this.pubSub.subscribe("trackDropped",this.trackDroppedHandlerBound),this.pubSub.subscribe("trackDimensionsModified",this.trackDimensionsModifiedHandlerBound),this.pubSub.subscribe("app.zoomStart",this.zoomStartHandlerBound),this.pubSub.subscribe("app.zoomEnd",this.zoomEndHandlerBound),this.pubSub.subscribe("app.zoom",this.zoomHandlerBound),this.pubSub.subscribe("requestReceived",this.requestReceivedHandlerBound)),this.props.getApi&&this.props.getApi(this.api)}},{key:"sizeMode",get:function(){return typeof this.state.sizeMode>"u"?this.props.options.bounded?"bounded":Qw:this.state.sizeMode}},{key:"setBroadcastMousePositionGlobally",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isBroadcastMousePositionGlobally=e}},{key:"setShowGlobalMousePosition",value:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isShowGlobalMousePosition=e,this.isShowGlobalMousePosition&&!this.globalMousePositionListener&&(this.globalMousePositionListener=Rm.subscribe("higlass.mouseMove",this.animateOnGlobalEventBound),this.pubSubs.push(this.globalMousePositionListener)),this.isShowGlobalMousePosition&&!this.globalMousePositionListener){const e=this.pubSubs.findIndex(e=>e===this.globalMousePositionListener);Rm.unsubscribe(this.globalMousePositionListener),e>=0&&this.pubSubs.splice(e,1),this.globalMousePositionListener=void 0}}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(e){e.sourceEvent&&this.mouseMoveHandler(e.sourceEvent)}},{key:"waitForDOMAttachment",value:function(e){if(!this.mounted)return;const t=this.topDivRef.current;t&&document.body.contains(t)?e():requestAnimationFrame(()=>this.waitForDOMAttachment(e))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=this.topDivRef.current,window.addEventListener("focus",this.boundRefreshView),Object.values(this.state.views).forEach(e=>{this.adjustLayoutToTrackSizes(e),e.layout?e.layout.i=e.uid:e.layout=this.generateViewLayout(e)});const e={width:this.state.width,height:this.state.height,view:this.canvasElement,antialias:!0,transparent:!0,resolution:2,autoResize:!0};if("4"===bs[0])console.warn("Deprecation warning: please update Pixi.js to version 5!"),"canvas"===this.props.options.renderer?this.pixiRenderer=new ow.PIXI.CanvasRenderer(e):this.pixiRenderer=new ow.PIXI.WebGLRenderer(e);else"canvas"===this.props.options.renderer?this.pixiRenderer=new ow.PIXI.CanvasRenderer(e):this.pixiRenderer=new ow.PIXI.Renderer(e);this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment(()=>{Ms.ElementQueries.listen(),this.resizeSensor=new Ms.ResizeSensor(this.element.parentNode,this.updateAfterResize.bind(this)),this.updateAfterResize()}),this.handleDragStart(),this.handleDragStop(),this.animate();const t=pm(this.element).append("svg").style("display","none");Ow.forEach(e=>function(e,t,n,r){const i=e.append("symbol").attr("id",t).attr("viewBox",r);n.forEach(e=>i.append("path").attr("d",e).attr("fill","currentColor"))}(t,e.id,e.paths,e.viewBox))}},{key:"getTrackObject",value:function(e,t){return this.tiledPlots[e].trackRenderer.getTrackObject(t)}},{key:"getTrackRenderer",value:function(e){return this.tiledPlots[e].trackRenderer}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.mounted&&this.setState({viewConfig:e.viewConfig});const t=this.processViewConfig(JSON.parse(JSON.stringify(e.viewConfig)));e.options.authToken!==this.prevAuthToken&&(CW(e.options.authToken),this.reload(),this.prevAuthToken=e.options.authToken);for(const n of dw(t))this.adjustLayoutToTrackSizes(n);this.setState({views:t})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.pixiRenderer.render(this.pixiRoot)}},{key:"reload",value:function(){for(const e of this.iterateOverViews()){const t=this.getTrackRenderer(e);if(!t)continue;const n=JSON.parse(t.prevTrackDefinitions);t.syncTrackObjects([]),t.syncTrackObjects(n)}}},{key:"componentDidUpdate",value:function(){this.setTheme(this.props.options.theme,this.props.options.isDarkTheme),this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),this.domEvent.unregister("keydown",document),this.domEvent.unregister("keyup",document),this.domEvent.unregister("scroll",document),this.domEvent.unregister("wheel",window),this.domEvent.unregister("mousedown",window),this.domEvent.unregister("mouseup",window),this.domEvent.unregister("click",window),this.domEvent.unregister("mousemove",window),this.domEvent.unregister("touchmove",window),this.domEvent.unregister("touchstart",window),this.domEvent.unregister("touchend",window),this.domEvent.unregister("touchcancel",window),this.pubSubs.forEach(e=>this.pubSub.unsubscribe(e)),this.pubSubs=[],this.apiDestroy()}},{key:"setTheme",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.options.theme,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.options.isDarkTheme;if(typeof t<"u")console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."),this.theme=t?"dark":"light";else switch(e){case"dark":this.theme=Ew;break;case"light":case void 0:this.theme=xw;break;default:console.warn(`Unknown theme "${e}". Using light theme.`),this.theme=xw}}},{key:"dispatchEvent",value:function(e){this.canvasElement&&sT(e,this.canvasElement)}},{key:"trackDroppedHandler",value:function(){this.setState({draggingHappening:null})}},{key:"requestReceivedHandler",value:function(){!this.viewconfLoaded&&0===kW&&(this.viewconfLoaded=!0,this.props.options.onViewConfLoaded&&this.props.options.onViewConfLoaded())}},{key:"animateOnMouseMoveHandler",value:function(e){e&&!this.animateOnMouseMove&&this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.animateBound)),this.animateOnMouseMove=e}},{key:"fitPixiToParentContainer",value:function(){const e=this.topDivRef.current;if(!e||!e.parentNode)return;const t=e.parentNode.clientWidth,n=e.parentNode.clientHeight;this.pixiMask.beginFill(16777215).drawRect(0,0,t,n).endFill(),this.pixiRenderer.resize(t,n),this.pixiRenderer.view.style.width=`${t}px`,this.pixiRenderer.view.style.height=`${n}px`,this.pixiRenderer.render(this.pixiRoot)}},{key:"addDefaultTrackOptions",value:function(e){var t,n;const r=this.getTrackInfo(e.type);if(!r)return;typeof e.options>"u"&&(e.options={});const i=e.options?e.options:{};if(this.props.options.defaultTrackOptions){if(null!=(t=this.props.options.defaultTrackOptions.trackSpecific)&&t[e.type]){const t=this.props.options.defaultTrackOptions.trackSpecific[e.type];for(const n in t)e.options[n]=typeof e.options[n]<"u"?e.options[n]:JSON.parse(JSON.stringify(t[n]))}if(this.props.options.defaultTrackOptions.all){const t=this.props.options.defaultTrackOptions.all;for(const n in t)e.options[n]=typeof e.options[n]<"u"?e.options[n]:JSON.parse(JSON.stringify(t[n]))}}if(r.defaultOptions){const t=null!=(n=r.defaultOptionsByTheme)&&n[this.theme]?r.defaultOptionsByTheme[this.theme]:{},i={...r.defaultOptions,...t};if(e.options)for(const n in i)e.options[n]=typeof e.options[n]<"u"?e.options[n]:JSON.parse(JSON.stringify(i[n]));else e.options=JSON.parse(JSON.stringify(i))}else e.options=i}},{key:"toggleTypedEditable",value:function(){this.setState({typedEditable:!this.isEditable()})}},{key:"typedTextHandler",value:function(e){if(!this.props.options.cheatCodesEnabled)return;this.typedText=this.typedText.concat(e.key),this.typedText.endsWith("hgedit")&&(this.toggleTypedEditable(),this.typedText="");this.typedTextTimeout&&clearTimeout(this.typedTextTimeout),this.typedTextTimeout=setTimeout(()=>{this.typedText=""},750)}},{key:"keyDownHandler",value:function(e){this.typedTextHandler(e),this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:yw})}},{key:"keyUpHandler",value:function(e){this.props.options.rangeSelectionOnAlt&&"Alt"===e.key&&this.setState({mouseTool:gw})}},{key:"openModal",value:function(e){this.setState({modal:i.cloneElement(e,{ref:e=>{this.modalRef=e}})})}},{key:"closeModal",value:function(){this.modalRef=null,this.setState({modal:null})}},{key:"handleEditViewConfig",value:function(){const{viewConfig:e}=this.state;this.setState({viewConfigTmp:e}),this.openModal(i.createElement(rbe,{onCancel:()=>{const{viewConfigTmp:e}=this.state,t=this.processViewConfig(e);for(const n of dw(t))this.adjustLayoutToTrackSizes(n);this.setState({views:t,viewConfig:e,viewConfigTmp:null})},onChange:e=>{const t=JSON.parse(e),n=this.processViewConfig(t);for(const r of dw(n))this.adjustLayoutToTrackSizes(r);this.setState({views:n,viewConfig:t})},onSave:e=>{const t=JSON.parse(e),n=this.processViewConfig(t);for(const r of dw(n))this.adjustLayoutToTrackSizes(r);this.setState({views:n,viewConfig:t,viewConfigTmp:null})},viewConfig:this.getViewsAsString()}))}},{key:"animate",value:function(){this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame(()=>{this.pixiRenderer&&(this.pixiRenderer.render(this.pixiRoot),this.isRequestingAnimationFrame=!1)}))}},{key:"animateOnGlobalEvent",value:function(){let{sourceUid:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==this.uid&&this.animateOnMouseMove&&this.animate()}},{key:"measureSize",value:function(){const[e,t]=cT(this.element);e>0&&t>0&&this.setState({sizeMeasured:!0,width:e,height:t})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView(bw),this.resizeHandler()}},{key:"onBreakpointChange",value:function(e){this.setState({currentBreakpoint:e})}},{key:"handleOverlayMouseEnter",value:function(e){this.setState({mouseOverOverlayUid:e})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(e){this.setState({chooseViewHandler:t=>this.handleLocationLockChosen(e,t),mouseOverOverlayUid:e})}},{key:"isEditable",value:function(){return void 0!==this.state.typedEditable?this.state.typedEditable:this.props.options&&"editable"in this.props.options?this.props.options.editable&&this.state.viewConfig.editable:this.state.viewConfig.editable}},{key:"isTrackMenuDisabled",value:function(){return!(!this.props.options||!1!==this.props.options.editable&&!1!==this.props.options.tracksEditable)||this.state.viewConfig&&(!1===this.state.viewConfig.tracksEditable||!1===this.state.viewConfig.editable)}},{key:"isViewHeaderDisabled",value:function(){return!(!this.props.options||!1!==this.props.options.editable&&!1!==this.props.options.viewEditable)||this.state.viewConfig&&(!1===this.state.viewConfig.viewEditable||!1===this.state.viewConfig.editable)}},{key:"iterateOverViews",value:function(){const e=[];for(const t of Object.keys(this.state.views))e.push(t);return e}},{key:"iterateOverTracksInView",value:function(e){const t=[],{tracks:n}=this.state.views[e];for(const r in n)for(const i of n[r])if("combined"===i.type&&i.contents)for(const n of i.contents)t.push({viewId:e,trackId:n.uid,track:n});else t.push({viewId:e,trackId:i.uid,track:i});return t}},{key:"iterateOverTracks",value:function(){const e=[];for(const t in this.state.views){const{tracks:n}=this.state.views[t];for(const r in n)for(const i of n[r])if("combined"===i.type&&i.contents)for(const n of i.contents)e.push({viewId:t,trackId:n.uid,track:n});else e.push({viewId:t,trackId:i.uid,track:i})}return e}},{key:"setMouseTool",value:function(e){this.setState({mouseTool:e})}},{key:"setSizeMode",value:function(e){this.setState({sizeMode:e})}},{key:"isValueScaleLocked",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);return!!this.state.views[e]&&!!this.valueScaleLocks[n]}},{key:"getLockGroupExtrema",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);if(!this.state.views[e]||!this.valueScaleLocks[n])return null;const r=this.valueScaleLocks[n],i=Object.values(r).filter(e=>this.tiledPlots[e.view]).map(e=>this.tiledPlots[e.view].trackRenderer.getTrackObject(e.track)).filter(e=>e).filter(e=>{var t;return e.valueScale||(null==(t=e.originalTrack)?void 0:t.valueScale)}).map(e=>void 0===e.originalTrack?e:e.originalTrack),o=i.filter(e=>e.minRawValue&&e.maxRawValue).map(e=>r.ignoreOffScreenValues?e.minVisibleValue(!0):e.minVisibleValueInTiles(!0)),a=i.filter(e=>e.minRawValue&&e.maxRawValue).map(e=>r.ignoreOffScreenValues?e.maxVisibleValue(!0):e.maxVisibleValueInTiles(!0));if(0===o.length||o.filter(e=>null===e||e===Number.POSITIVE_INFINITY).length>0||0===a.length||a.filter(e=>null===e||e===Number.NEGATIVE_INFINITY).length>0)return null;return[Math.min(...o),Math.max(...a)]}},{key:"syncValueScales",value:function(e,t){const n=this.combineViewAndTrackUid(e,t);if(!this.state.views[e])return;const r=uT(this.state.views[e].tracks,t);if(this.valueScaleLocks[n]){const i=this.valueScaleLocks[n],o=Object.values(i).filter(e=>this.tiledPlots[e.view]).map(e=>this.tiledPlots[e.view].trackRenderer.getTrackObject(e.track)).filter(e=>e).map(e=>void 0===e.originalTrack?e:e.originalTrack),a=this.getLockGroupExtrema(e,t);if(null===a)return;const s=a[0],l=a[1],c=1e-6;for(const e of o){if(e.minValue&&e.minValue(s),e.maxValue&&e.maxValue(l),!e.valueScale)continue;const t=Math.abs(e.minValue()-e.valueScale.domain()[0])>c||Math.abs(e.maxValue()-e.valueScale.domain()[1])>c,n=r.options&&e.options&&typeof r.options.scaleStartPercent<"u"&&typeof r.options.scaleEndPercent<"u"&&(Math.abs(e.options.scaleStartPercent-r.options.scaleStartPercent)>c||Math.abs(e.options.scaleEndPercent-r.options.scaleEndPercent)>c);e.continuousScaling&&!t&&!n||(e.valueScale.domain([s,l]),e.prevValueScale=e.valueScale.copy(),n&&(e.options.scaleStartPercent=r.options.scaleStartPercent,e.options.scaleEndPercent=r.options.scaleEndPercent),e.rerender(e.options,!0))}}}},{key:"handleNewTilesLoaded",value:function(e,t){this.animate()}},{key:"notifyDragChangedListeners",value:function(e){dw(this.draggingChangedListeners).forEach(t=>{dw(t).forEach(t=>t(e))})}},{key:"addDraggingChangedListener",value:function(e,t,n){e in this.draggingChangedListeners||(this.draggingChangedListeners[e]={}),this.draggingChangedListeners[e][t]=n,n(!0),n(!1)}},{key:"removeDraggingChangedListener",value:function(e,t){if(e in this.draggingChangedListeners){const n=this.draggingChangedListeners[e];t in n&&(n[t](!1),delete n[t])}}},{key:"addScalesChangedListener",value:function(e,t,n){this.scalesChangedListeners[e]||(this.scalesChangedListeners[e]={}),this.scalesChangedListeners[e][t]=n,this.xScales[e]&&this.yScales[e]&&n(this.xScales[e],this.yScales[e])}},{key:"removeScalesChangedListener",value:function(e,t){if(this.scalesChangedListeners[e]){const n=this.scalesChangedListeners[e];n[t]&&delete n[t]}}},{key:"createSVG",value:function(){const e=document.createElement("svg");e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("version","1.1");for(const t of dw(this.tiledPlots))if(t)for(const n of dw(t.trackRenderer.trackDefObjects))if(n.trackObject.exportSVG){const t=n.trackObject.exportSVG();t&&e.appendChild(t[0])}return e.setAttribute("width",this.canvasElement.style.width),e.setAttribute("height",this.canvasElement.style.height),this.postCreateSVGCallback?this.postCreateSVGCallback(e):e}},{key:"createSVGString",value:function(){const e=this.createSVG();let t=m_.xml((new window.XMLSerializer).serializeToString(e));return t=t.replace(/<a0:/g,"<"),t=t.replace(/<\/a0:/g,"</"),t=t.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm,"$1"),t=t.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm,"$1"),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n${t}`}},{key:"handleExportSVG",value:function(){mw("export.svg",new Blob([this.createSVGString()],{type:"image/svg+xml"}))}},{key:"offPostCreateSVG",value:function(){this.postCreateSVGCallback=null}},{key:"onPostCreateSVG",value:function(e){this.postCreateSVGCallback=e}},{key:"createPNGBlobPromise",value:function(){return new Promise(e=>{const t=this.createSVGString(),n=new Image(this.canvasElement.width,this.canvasElement.height);n.src=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(t)))}`,n.onload=()=>{const t=document.createElement("canvas");t.width=this.canvasElement.width/2,t.height=this.canvasElement.height/2,t.getContext("2d").drawImage(n,0,0),t.toBlob(t=>{e(t)})}})}},{key:"handleExportPNG",value:function(){this.createPNGBlobPromise().then(e=>{mw("export.png",e)})}},{key:"handleScalesChanged",value:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(this.xScales[e]=t,this.yScales[e]=n,r&&e in this.scalesChangedListeners&&dw(this.scalesChangedListeners[e]).forEach(e=>{e(t,n)}),this.zoomLocks[e]){const t=this.zoomLocks[e],n=pw(t),[r,i,o]=ex(this.xScales[e],this.yScales[e]);for(let a=0;a<n.length;a++){const r=n[a][0],i=n[a][1];if(!this.xScales[r]||!this.yScales[r]||r===e)continue;const[s,l,c]=ex(this.xScales[r],this.yScales[r]),u=o*(i[2]/t[e][2]);if(!this.setCenters[r])continue;const[h,p]=this.setCenters[r](s,l,u,!1);this.xScales[r]=h,this.yScales[r]=p,r in this.scalesChangedListeners&&dw(this.scalesChangedListeners[r]).forEach(e=>{e(h,p)})}}if(this.locationLocks[e]){const t=this.locationLocks[e],n=pw(t),[r,i,o]=ex(this.xScales[e],this.yScales[e]);for(let a=0;a<n.length;a++){const o=n[a][0],s=n[a][1];if(!this.xScales[o]||!this.yScales[o])continue;const[l,c,u]=ex(this.xScales[o],this.yScales[o]);if(o===e)continue;const h=r+(s[0]-t[e][0]),p=i+(s[1]-t[e][1]);if(!this.setCenters[o])continue;const[f,d]=this.setCenters[o](h,p,u,!1);this.xScales[o]=f,this.yScales[o]=d,o in this.scalesChangedListeners&&dw(this.scalesChangedListeners[o]).forEach(e=>{e(f,d)})}}if(this.locationLocksAxisWise.x[e]){const t=this.locationLocksAxisWise.x[e].lock,n=pw(t),r="x"!==this.locationLocksAxisWise.x[e].axis,[i,o,a]=ex(this.xScales[e],this.yScales[e]);for(let s=0;s<n.length;s++){const o=n[s][0],a=n[s][1];if(!this.xScales[o]||!this.yScales[o])continue;const[l,c,u]=ex(this.xScales[o],this.yScales[o]);if(o===e)continue;const h=i+(a[0]-t[e][0]);if(!this.setCenters[o])continue;const[p,f]=this.setCenters[o](r?l:h,r?h:c,u,!1);this.xScales[o]=p,this.yScales[o]=f,o in this.scalesChangedListeners&&dw(this.scalesChangedListeners[o]).forEach(e=>{e(p,f)})}}if(this.locationLocksAxisWise.y[e]){const t=this.locationLocksAxisWise.y[e].lock,n=pw(t),r="y"!==this.locationLocksAxisWise.y[e].axis,[i,o,a]=ex(this.xScales[e],this.yScales[e]);for(let s=0;s<n.length;s++){const i=n[s][0],a=n[s][1];if(!this.xScales[i]||!this.yScales[i])continue;const[l,c,u]=ex(this.xScales[i],this.yScales[i]);if(i===e)continue;const h=o+(a[1]-t[e][1]);if(!this.setCenters[i])continue;const[p,f]=this.setCenters[i](r?h:l,r?c:h,u,!1);this.xScales[i]=p,this.yScales[i]=f,i in this.scalesChangedListeners&&dw(this.scalesChangedListeners[i]).forEach(e=>{e(p,f)})}}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(e){this.setState({chooseTrackHandler:(t,n)=>this.handleViewportProjected(e,t,n)})}},{key:"handleZoomToData",value:function(e){if(e&&!this.tiledPlots[e])throw new Error(`View uid ${e} does not exist in the current viewConfig`);e?this.tiledPlots[e].handleZoomToData():Object.values(this.tiledPlots).forEach(e=>e.handleZoomToData())}},{key:"resetViewport",value:function(e){if(e&&!this.tiledPlots[e])throw new Error(`View uid ${e} does not exist in the current viewConfig`);e?this.tiledPlots[e].resetViewport():Object.values(this.tiledPlots).forEach(e=>e.resetViewport())}},{key:"handleYankFunction",value:function(e,t){this.setState({chooseViewHandler:n=>t(e,n),mouseOverOverlayUid:e})}},{key:"handleUnlock",value:function(e,t){const n=fw(t[e]);if(2===n.length)return delete t[n[0]],void delete t[n[1]];t[e]&&t[e][e]&&delete t[e][e],t[e]&&delete t[e]}},{key:"viewScalesLockData",value:function(e){return this.xScales[e]&&this.yScales[e]?ex(this.xScales[e],this.yScales[e]):(console.warn("View scale lock doesn't correspond to existing uid: ",e),null)}},{key:"addLock",value:function(e,t,n,r){let i=[],o=[];i=n[e]?pw(n[e]).filter(e=>r(e[0])).map(e=>[e[0],r(e[0])]):[[e,r.bind(this)(e)]],o=n[t]?pw(n[t]).filter(e=>r.bind(this)(e[0])).map(e=>[e[0],r.bind(this)(e[0])]):[[t,r.bind(this)(t)]];const a=i.concat(o),s=hw(a);a.forEach(e=>{n[e[0]]=s})}},{key:"handleLocationLockChosen",value:function(e,t){e!==t?(this.addLock(e,t,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})):this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(e,t){e!==t?(this.addLock(e,t,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})):this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(e,t,n){let r=null;if(e===t)console.warn("A view can not show its own viewport.");else{const i=uT(this.state.views[t].tracks,n),o=vT(this.state.views[t].tracks,n);r=a_.nice();const a={uid:r,type:`viewport-projection-${{top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[o]}`,fromViewUid:e};this.addCallbacks(t,a),this.handleTrackAdded(t,a,o,null,i)}return this.setState({chooseTrackHandler:null}),r}},{key:"handleLocationYanked",value:function(e,t){const n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],[a,s,l]=ex(i,o),[c,u,h]=ex(n,r);this.setCenters[e](c,u,l,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(e,t){const n=this.xScales[t],r=this.yScales[t],i=this.xScales[e],o=this.yScales[e],[a,s,l]=ex(i,o),[c,u,h]=ex(n,r);this.setCenters[e](a,s,h,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(e,t,n){this.setState({addTrackPosition:t,addTrackExtent:n,addTrackPositionView:e})}},{key:"updateRowHeight",value:function(){if(!this.props.options||this.sizeMode!==Jw&&this.sizeMode!==tT||this.props.options.pixelPreciseMarginPadding)return;const e=this.element.parentNode.clientHeight;let t=1,n=0;for(const a of dw(this.state.views)){t=Math.max(t,a.layout.y+a.layout.h);const e=a.tracks.top.filter(e=>e.height).map(e=>e.height).reduce((e,t)=>e+t,0),r=a.tracks.bottom.filter(e=>e.height).map(e=>e.height).reduce((e,t)=>e+t,0);n=Math.ceil(Math.max(n,(e+r)/a.layout.h))}this.handleDragStart(),this.handleDragStop();const r=e-((this.isEditable()?10:0)*t-1),i=Math.floor(r/t),o=Math.max(i,n);this.topDivRef.current&&this.setState({rowHeight:o})}},{key:"handleLayoutChange",value:function(e){this.element&&(e.forEach(e=>{const t=this.state.views[e.i];t&&(t.layout.x=e.x,t.layout.y=e.y,t.layout.w=e.w,t.layout.h=e.h,t.layout.i=e.i)}),this.updateRowHeight(),this.refreshView(bw))}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(e){var t,n;return qw[e]?qw[e]:null!=(t=this.pluginTracks)&&t[e]?this.pluginTracks[e].config:null!=(n=window.higlassTracksByType)&&n[e]?window.higlassTracksByType[e].config:void console.warn("Track type not found:",e,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:110;this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},e)}},{key:"handleDragStart",value:function(){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},bw)}},{key:"resizeHandler",value:function(){AT(this.viewHeaders).filter(e=>e).forEach(e=>e.checkWidth())}},{key:"calculateViewDimensions",value:function(e){let t=this.viewMarginTop+this.viewMarginBottom+this.viewPaddingTop+this.viewPaddingBottom,n=this.viewMarginLeft+this.viewMarginRight+this.viewPaddingLeft+this.viewPaddingRight,r=0;r+=10;if(e.tracks.top)for(let f=0;f<e.tracks.top.length;f++){const n=e.tracks.top[f];t+=n.height?n.height:20,r+=n.height?n.height:20}if(e.tracks.bottom)for(let f=0;f<e.tracks.bottom.length;f++){const n=e.tracks.bottom[f];t+=n.height?n.height:20,r+=n.height?n.height:20}(e.tracks.left&&e.tracks.left.length>0||e.tracks.right&&e.tracks.right.length>0||e.tracks.center&&e.tracks.center.length>0)&&(r+=20);let i=0;if(e.tracks.left)for(let f=0;f<e.tracks.left.length;f++){const t=e.tracks.left[f],r=t.height?t.height:100;n+=t.width?t.width:0,i=Math.max(i,r)}let o=0;if(e.tracks.right)for(let f=0;f<e.tracks.right.length;f++){const t=e.tracks.right[f],r=t.height?t.height:100;n+=t.width?t.width:0,o=Math.max(o,r)}const a=Math.max(i,o);let s=0,l=0;if(e.tracks.center&&dw(e.tracks.center).length>0){if(!e.tracks.center[0].contents||e.tracks.center[0].contents.length>0){let t=null,n=null;if(e.tracks.center[0].contents)for(const r of e.tracks.center[0].contents)t=Math.max(t,r.height?r.height:100),n=Math.max(n,r.width?r.width:100);else t=e.tracks.center[0].height?e.tracks.center[0].height:100,n=e.tracks.center[0].width?e.tracks.center[0].width:100;s=t,l=n}}else(e.tracks.top&&dw(e.tracks.top).length>1||e.tracks.bottom&&dw(e.tracks.bottom).length>1)&&(e.tracks.left&&dw(e.tracks.left).length||e.tracks.right&&dw(e.tracks.right).length)&&(l=100,s=100);t+=a>s?a:s;let c=0,u=0,h=0,p=0;return"top"in e.tracks&&(c=e.tracks.top.map(e=>e.height?e.height:20).reduce((e,t)=>e+t,0)),"bottom"in e.tracks&&(u=e.tracks.bottom.map(e=>e.height?e.height:20).reduce((e,t)=>e+t,0)),"left"in e.tracks&&(h=e.tracks.left.map(e=>e.width?e.width:0).reduce((e,t)=>e+t,0)),"right"in e.tracks&&(p=e.tracks.right.map(e=>e.width?e.width:0).reduce((e,t)=>e+t,0)),{totalWidth:n,totalHeight:t,topHeight:c,bottomHeight:u,leftWidth:h,rightWidth:p,centerWidth:l,centerHeight:s,minNecessaryHeight:r}}},{key:"calculateZoomLimits",value:function(e,t){const n=[0,Number.POSITIVE_INFINITY];if("zoomLimits"in e){const r=t[1]-t[0],i=e.zoomLimits;if(2!==i.length)return n;if(null!==i[0]&&i[0]>0){const e=r/i[0];n[1]=Math.max(e,1),e<1&&console.warn(`Invalid zoom limits. Lower limit set to ${r}`)}if(null!==i[1]&&i[1]>i[0]){const e=r/i[1];n[0]=Math.min(e,1),e>1&&console.warn(`Invalid zoom limits. Upper limit set to ${r}`)}}return n}},{key:"generateViewLayout",value:function(e){let t=null;return"layout"in e?({layout:t}=e.layout):t={x:0,y:0,w:12,h:12},t}},{key:"handleClearView",value:function(e){const{views:t}=this.state;t[e].tracks.top=[],t[e].tracks.bottom=[],t[e].tracks.center=[],t[e].tracks.left=[],t[e].tracks.right=[],t[e].tracks.whole=[],this.setState({views:t})}},{key:"handleCloseView",value:function(e){1!==dw(this.state.views).length&&(this.handleUnlock(e,this.zoomLocks),this.setState(t=>(delete t.views[e],{views:this.removeInvalidTracks(t.views)})))}},{key:"handleSeriesAdded",value:function(e,t,n,r){const{tracks:i}=this.state.views[e];if("combined"===r.type)r.contents.push(t),r.uid=a_.nice(),"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,r);else{const e={type:"combined",uid:a_.nice(),height:r.height,width:r.width,contents:[r,t]},o=i[n];for(let t=0;t<o.length;t++)o[t].uid===r.uid&&(o[t]=e)}this.setState(e=>({views:e.views})),this.triggerViewChangeDb()}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null,addTrackExtent:null})}},{key:"handleTracksAdded",value:function(e,t,n,r,i){this.storeTrackSizes(e);for(const o of t)this.handleTrackAdded(e,o,n,r,i)}},{key:"handleChangeTrackType",value:function(e,t,n){const r=this.state.views[e],i=uT(r.tracks,t),o=i.uid;i.uid=a_.nice(),i.type=n;const a=i.uid;this.updateTrackLocks(e,o,a),this.setState(e=>({views:e.views}))}},{key:"handleChangeTrackData",value:function(e,t,n){const r=this.state.views[e],i=uT(r.tracks,t);i.uid=a_.nice(),i.data=n,this.setState(e=>({views:e.views}))}},{key:"handleTrackAdded",value:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;var o,a;if(this.addDefaultTrackOptions(t),t.uid||(t.uid=a_.nice()),t.contents)for(const u of t.contents)this.addDefaultTrackOptions(u);if(this.state.addTrackPosition&&this.setState({addTrackPosition:null,addTrackExtent:null}),i)return this.handleSeriesAdded(e,t,n,i),null;t.position=n,r&&(t.options.extent=r);const s=this.getTrackInfo(t.type);t.width=s.defaultWidth||(null==(o=s.defaultOptions)?void 0:o.minWidth)||this.minVerticalWidth,t.height=s.defaultHeight||(null==(a=s.defaultOptions)?void 0:a.minHeight)||this.minHorizontalHeight;const{tracks:l}=this.state.views[e];let c=0;if(yT(l,()=>c++),"left"===n||"top"===n)l[n].unshift(t);else if("center"===n)if(0===l.center.length){const e={uid:a_.nice(),type:"combined",contents:[t]};l.center=[e]}else if("combined"===l.center[0].type)l.center[0].contents.push(t),"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,l.center[0]);else{const e={uid:a_.nice(),type:"combined",contents:[l.center[0],t]};l.center=[e],"heatmap"===t.type&&this.compatibilityfyStackedHeatmaps(t,e)}else l[n]||(l[n]=[]),l[n].push(t);return this.adjustLayoutToTrackSizes(this.state.views[e]),1===Object.keys(this.state.views).length&&0===c&&(this.handleZoomToData(e),this.zoomToDataExtentOnInit.add(e)),t}},{key:"compatibilityfyStackedHeatmaps",value:function(e,t){let n;t.contents.some(e=>(n=e,"heatmap"===e.type))&&(e.options.backgroundColor="transparent",e.options.showTooltip=n.options.showTooltip,e.options.showMousePosition=n.options.showMousePosition,e.options.mousePositionColor=n.options.mousePositionColor)}},{key:"storeTrackSizes",value:function(e){yT(this.state.views[e].tracks,t=>{const n=this.tiledPlots[e].trackRenderer.getTrackObject(t.uid);n&&([t.width,t.height]=n.dimensions)})}},{key:"adjustLayoutToTrackSizes",value:function(e){if(!e.layout)return;let t=0;this.isEditable()&&(t+=20);const{totalHeight:n}=this.calculateViewDimensions(e);t+=n;const r=this.isEditable()?10:0;t+=r;const i=this.state.rowHeight+r;this.sizeMode!==Jw&&this.sizeMode!==tT&&(e.layout.h=Math.ceil(t/i))}},{key:"handleCloseTrack",value:function(e,t){const{tracks:n}=this.state.views[e];this.handleUnlockValueScale(e,t);for(const r in n){const e=n[r],i=e.filter(e=>e.uid!==t);i.length===e.length?i.filter(e=>"combined"===e.type).forEach(e=>{e.contents=e.contents.filter(e=>e.uid!==t)}):n[r]=i}return this.storeTrackSizes(e),this.adjustLayoutToTrackSizes(this.state.views[e]),this.setState(e=>({views:e.views})),this.state.views}},{key:"handleLockValueScale",value:function(e,t){this.setState({chooseTrackHandler:(n,r)=>this.handleValueScaleLocked(e,t,n,r)})}},{key:"combineViewAndTrackUid",value:function(e,t){const n=`${e}.${t}`;if(this.combinedUidToViewTrack[n]={view:e,track:t},this.viewTrackUidsToCombinedUid[e]){if(this.viewTrackUidsToCombinedUid[t])return this.viewTrackUidsToCombinedUid[e][t];this.viewTrackUidsToCombinedUid[e][t]=n}else this.viewTrackUidsToCombinedUid[e]={},this.viewTrackUidsToCombinedUid[e][t]=n;return n}},{key:"updateTrackLocks",value:function(e,t,n){const r=this.combineViewAndTrackUid(e,t),i=this.combineViewAndTrackUid(e,n);if(this.valueScaleLocks[r]){const e=this.valueScaleLocks[r];this.valueScaleLocks[i]=e,delete this.valueScaleLocks[r]}for(const o in this.valueScaleLocks)if(this.valueScaleLocks[o][r]){const e=this.valueScaleLocks[o][r];this.valueScaleLocks[o][i]=e,e.track=n,delete this.valueScaleLocks[o][r]}}},{key:"handleUnlockValueScale",value:function(e,t){if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){const n=fw(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks);for(const t of n)this.handleUnlock(this.combineViewAndTrackUid(e,t),this.valueScaleLocks)}else this.handleUnlock(this.combineViewAndTrackUid(e,t),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(e,t,n,r){if(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks){const i=fw(this.tiledPlots[e].trackRenderer.getTrackObject(t).createdTracks);for(const t of i)this.handleValueScaleLocked(e,t,n,r);return}if(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks){const i=fw(this.tiledPlots[n].trackRenderer.getTrackObject(r).createdTracks);for(const r of i)this.handleValueScaleLocked(e,t,n,r);return}const i=this.combineViewAndTrackUid(e,t),o=this.combineViewAndTrackUid(n,r);this.addLock(i,o,this.valueScaleLocks,e=>this.combinedUidToViewTrack[e]),this.syncValueScales(e,t),this.setState({chooseTrackHandler:null})}},{key:"addCallbacks",value:function(e,t){const n=this.getTrackInfo(t.type);if("viewport-projection-center"===t.type||"viewport-projection-horizontal"===t.type||"viewport-projection-vertical"===t.type||n?.projection){const n=t.fromViewUid;t.registerViewportChanged=(e,t)=>this.addScalesChangedListener(n,e,t),t.removeViewportChanged=e=>this.removeScalesChangedListener(n,e),t.setDomainsCallback=(r,i)=>{if(!n)return this.projectionXDomains[e]||(this.projectionXDomains[e]={}),this.projectionYDomains[e]||(this.projectionYDomains[e]={}),("viewport-projection-horizontal"===t.type||"viewport-projection-center"===t.type)&&(this.projectionXDomains[e][t.uid]=r),("viewport-projection-vertical"===t.type||"viewport-projection-center"===t.type)&&(this.projectionYDomains[e][t.uid]=i),void this.triggerViewChangeDb();const o=ph().domain(r).range(this.xScales[n].range()),a=ph().domain(i).range(this.yScales[n].range()),[s,l,c]=ex(o,a);this.setCenters[n](s,l,c,!1);let u=!1,h=!1;e in this.zoomLocks&&(u=n in this.zoomLocks[e]),u&&this.handleUnlock(e,this.zoomLocks),e in this.locationLocks&&(h=n in this.locationLocks[e]),h&&this.handleUnlock(e,this.locationLocks),this.handleScalesChanged(n,o,a,!0),u&&this.addLock(e,n,this.zoomLocks,this.viewScalesLockData),h&&this.addLock(e,n,this.locationLocks,this.viewScalesLockData)}}}},{key:"validateLocks",value:function(e){const t=[];for(const n of fw(e))(!e[n]||!e[n][n])&&t.push(n);for(const n of t)e[n]&&(console.warn(`View ${n} not present in lock group. Removing...`),this.handleUnlock(n,e),delete e[n])}},{key:"deserializeLocationLocks",value:function(e){if(this.locationLocks={},e.locationLocks)for(const t of fw(e.locationLocks.locksByViewUid))if("object"!=typeof e.locationLocks.locksByViewUid[t])this.locationLocks[t]=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t]];else{if("x"in e.locationLocks.locksByViewUid[t]){const n=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t].x.lock];this.locationLocksAxisWise.x[t]={lock:n,axis:e.locationLocks.locksByViewUid[t].x.axis}}if("y"in e.locationLocks.locksByViewUid[t]){const n=e.locationLocks.locksDict[e.locationLocks.locksByViewUid[t].y.lock];this.locationLocksAxisWise.y[t]={lock:n,axis:e.locationLocks.locksByViewUid[t].y.axis}}}this.validateLocks(this.locationLocks)}},{key:"deserializeZoomLocks",value:function(e){if(this.zoomLocks={},e.zoomLocks)for(const t of fw(e.zoomLocks.locksByViewUid))this.zoomLocks[t]=e.zoomLocks.locksDict[e.zoomLocks.locksByViewUid[t]];this.validateLocks(this.zoomLocks)}},{key:"deserializeValueScaleLocks",value:function(e){if(this.valueScaleLocks={},e.valueScaleLocks)for(const t of fw(e.valueScaleLocks.locksByViewUid))this.valueScaleLocks[t]=e.valueScaleLocks.locksDict[e.valueScaleLocks.locksByViewUid[t]]}},{key:"serializeLocks",value:function(e){var t;const n={},r={};for(const i of fw(e)){let o=null==(t=e[i])?void 0:t.uid;o||(o=a_.nice()),e[i].uid=o,n[o]=e[i],r[i]=e[i].uid}return{locksByViewUid:r,locksDict:n}}},{key:"getViewsAsJson",value:function(e){const t=JSON.parse(JSON.stringify(this.state.viewConfig));return t.views=Object.values(e||this.state.views).map(e=>{const t=JSON.parse(JSON.stringify(e));return yT(t.tracks,t=>{if(t.server&&!URL.canParse(t.server)){const e=new URL(window.location);e.pathname=t.server,t.server=e.href}("viewport-projection-center"===t.type||"viewport-projection-horizontal"===t.type)&&this.projectionXDomains[e.uid]&&this.projectionXDomains[e.uid][t.uid]&&(t.projectionXDomain=this.projectionXDomains[e.uid][t.uid]),("viewport-projection-center"===t.type||"viewport-projection-vertical"===t.type)&&this.projectionYDomains[e.uid]&&this.projectionYDomains[e.uid][t.uid]&&(t.projectionYDomain=this.projectionYDomains[e.uid][t.uid]),delete t.name,delete t.position,delete t.header,delete t.description,delete t.created,delete t.project,delete t.project_name,delete t.serverUidKey,delete t.uuid,delete t.private,delete t.maxZoom,delete t.coordSystem,delete t.coordSystem2,delete t.datatype,delete t.maxWidth,delete t.datafile,delete t.filetype,delete t.binsPerDimension,delete t.resolutions,delete t.row_infos,delete t.aggregationModes}),t.uid=e.uid,t.initialXDomain=this.xScales[e.uid].domain(),t.initialYDomain=this.yScales[e.uid].domain(),delete t.layout.i,t}),t.zoomLocks=this.serializeLocks(this.zoomLocks),t.locationLocks=this.serializeLocks(this.locationLocks),t.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),t}},{key:"getViewsAsString",value:function(){return JSON.stringify(this.getViewsAsJson(),null,2)}},{key:"handleExportViewAsJSON",value:function(){mw("viewconf.json",this.getViewsAsString())}},{key:"handleExportViewsAsLink",value:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.viewConfig.exportViewUrl,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new URL(e,window.location.origin),r=fetch(e,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:`{"viewconf":${this.getViewsAsString()}}`,credentials:"same-origin"}).then(e=>{if(!e.ok)throw e;return e.json()}).catch(e=>{console.warn("err:",e)}).then(e=>({id:e.uid,url:`${n.origin}/l/?d=${e.uid}`}));return t||r.then(e=>{this.openModal(i.createElement(vY,{onDone:()=>{this.closeModalBound()},url:e.url}))}).catch(e=>console.error("Exporting view config as link failed:",e)),r}},{key:"handleDataDomainChanged",value:function(e,t,n){const{views:r}=this.state;if(r[e].initialXDomain=t,r[e].initialYDomain=n,this.xScales[e]=ph().domain(t),this.yScales[e]=ph().domain(n),this.zoomLocks[e]){const i=this.zoomLocks[e],o=pw(i);for(let e=0;e<o.length;e++){const i=o[e][0];i in this.locationLocks&&(r[i].initialXDomain=t,r[i].initialYDomain=n,this.xScales[i]=ph().domain(t),this.yScales[i]=ph().domain(n))}}this.setState({views:r})}},{key:"viewPositionAvailable",value:function(e,t,n,r){const i=e+n,o=t+r;if(e+n>12)return!1;const a=dw(this.state.views);for(let s=0;s<a.length;s++){const n=a[s].layout.x,r=a[s].layout.y,l=n+a[s].layout.w,c=r+a[s].layout.h;if(e<l&&i>n&&t<c&&o>r)return!1}return!0}},{key:"handleAddView",value:function(e,t,n){const r=dw(this.state.views),i=e,o=[];12===e.layout.w&&(e.layout.w=6);for(let u=0;u<r.length;u++){let t=r[u].layout.x+r[u].layout.w,n=r[u].layout.y;this.viewPositionAvailable(t,n,e.layout.w,e.layout.h)&&o.push([t,n]),t=r[u].layout.x,n=r[u].layout.y+r[u].layout.h,this.viewPositionAvailable(t,n,e.layout.w,e.layout.h)&&o.push([t,n])}o.sort((e,t)=>{const n=e[1]-t[1];return 0===n?e[0]-t[0]:n});const a=JSON.stringify(i);let s=JSON.parse(a);s.initialXDomain=this.xScales[s.uid].domain(),s.initialYDomain=this.yScales[s.uid].domain(),t&&(s={...s,...t}),[[s.layout.x,s.layout.y]]=o,s.uid=a_.nice(),s.layout.i=s.uid,this.xScales[s.uid]=ph().domain(s.initialXDomain),this.yScales[s.uid]=ph().domain(s.initialYDomain),yT(s.tracks,e=>{this.addCallbacks(s.uid,e)});const l=e=>{const t=JSON.parse(JSON.stringify(e));return t[s.uid]=s,t};let c=null;return n?c=l(this.state.views):this.setState(e=>(c=l(e.views),{views:c})),{newViewUid:s.uid,newViewconf:this.getViewsAsJson(c)}}},{key:"createGenomePostionSearchBoxEntry",value:function(e,t){let n=e;const r={autocompleteServer:ww,chromInfoServer:ww,visible:!1};return n||(n=JSON.parse(JSON.stringify(r))),n.autocompleteServer||(n.autocompleteServer=r.autocompleteServer),n.chromInfoId||(n.chromInfoId=t),n.chromInfoServer||(n.chromInfoServer=r.chromInfoServer),n.visible||(n.visible=!1),n}},{key:"handleTogglePositionSearchBox",value:function(e){const t=this.state.views[e];t.genomePositionSearchBoxVisible=!t.genomePositionSearchBoxVisible;const n={};yT(t.tracks,e=>{e.coordSystem&&(n[e.coordSystem]||(n[e.coordSystem]=0),n[e.coordSystem]+=1)});const r=pw(n).sort((e,t)=>t[1]-e[1]);let i="hg19";r.length&&(i=r[0][0]),t.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(t.genomePositionSearchBox,i),t.genomePositionSearchBox.visible=!t.genomePositionSearchBox.visible,this.refreshView(),this.setState({configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(e,t,n){const r=this.state.views[e],i=uT(r.tracks,t);i&&(i.options=Object.assign(i.options,n),this.mounted&&(this.setState(e=>({views:e.views})),this.adjustSplitHeatmapTrackOptions(i,n,r.tracks,e)))}},{key:"adjustSplitHeatmapTrackOptions",value:function(e,t,n,r){"heatmap"===e.type&&("upper-right"===t.extent&&"combined"===n.center[0].type&&n.center[0].contents.length>1&&n.center[0].contents.some(n=>{if("heatmap"===n.type&&n.uid!==e.uid&&"full"===n.options.extent){const i={...n.options,extent:"lower-left",labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"},o={...t,labelPosition:"topRight",colorbarPosition:"topRight"};return this.handleTrackOptionsChanged(r,n.uid,i),this.handleTrackOptionsChanged(r,e.uid,o),!0}return!1}),"lower-left"===t.extent&&"lower-left"===t.extent&&"combined"===n.center[0].type&&n.center[0].contents.length>1&&n.center[0].contents.some(n=>{if("heatmap"===n.type&&n.uid!==e.uid&&"full"===n.options.extent){const i={...n.options,extent:"upper-right",labelPosition:"topRight",colorbarPosition:"topRight"},o={...t,labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"};return this.handleTrackOptionsChanged(r,n.uid,i),this.handleTrackOptionsChanged(r,e.uid,o),!0}return!1}))}},{key:"handleViewOptionsChanged",value:function(e,t){const n=this.state.views[e];n&&(n.options=Object.assign(n.options||{},t),this.mounted&&this.setState(e=>({views:e.views})))}},{key:"isTrackValid",value:function(e,t){return!("viewport-projection-center"===e.type&&!t.has(e.fromViewUid))}},{key:"removeInvalidTracks",value:function(e){const t=new Set(fw(e));for(const n of dw(e))for(const e of["left","top","center","right","bottom"])e in(n.tracks??{})&&(n.tracks[e]=n.tracks[e].filter(e=>this.isTrackValid(e,t)),n.tracks[e].forEach(e=>{"combined"===e.type&&(e.contents=e.contents.filter(e=>this.isTrackValid(e,t)))}));return e}},{key:"processViewConfig",value:function(e){let{views:t}=e,n={},r=1;(!e.views||0===e.views.length)&&(console.warn("No views provided in viewConfig"),t=[{editable:!0,tracks:{}}]),t.forEach(e=>{e.tracks&&iT(e.tracks),e.uid||(e.uid=a_.nice()),n[e.uid]=e,this.zoomToDataExtentOnInit.has(e.uid)&&this.zoomToDataExtentOnInit.delete(e.uid),e.initialXDomain?(e.initialXDomain[0]=+e.initialXDomain[0],e.initialXDomain[1]=+e.initialXDomain[1]):(e.initialXDomain=[0,100],this.zoomToDataExtentOnInit.add(e.uid)),e.initialYDomain?(e.initialXDomain[0]=+e.initialXDomain[0],e.initialXDomain[1]=+e.initialXDomain[1]):e.initialYDomain=[e.initialXDomain[0],e.initialXDomain[1]],this.xScales[e.uid]||(this.xScales[e.uid]=ph().domain(e.initialXDomain)),this.yScales[e.uid]||(this.yScales[e.uid]=ph().domain(e.initialYDomain)),yT(e.tracks,t=>{var n,r;if(null!=(r=null==(n=this.state)?void 0:n.views)&&r[e.uid]){const n=uT(this.state.views[e.uid].tracks,t.uid);n&&(t.maxZoom=n.maxZoom,t.resolutions=n.resolutions,t.binsPerDimension=n.binsPerDimension,t.maxWidth=n.maxWidth)}if(t.uid||(t.uid=a_.nice()),this.addCallbacks(e.uid,t),this.addDefaultTrackOptions(t),t.contents)for(const e of t.contents)this.addDefaultTrackOptions(e)}),e.layout?e.layout.i=e.uid:e.layout=this.generateViewLayout(e),r=Math.max(r,e.layout.y+e.layout.h)});const i=Math.ceil(12/r);return t.forEach(e=>{e.layout.h*=i,e.layout.y*=i}),this.deserializeZoomLocks(e),this.deserializeLocationLocks(e),this.deserializeValueScaleLocks(e),n=this.removeInvalidTracks(n),n}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(e){this.rangeSelection=e,this.apiPublish("rangeSelection",e)}},{key:"offViewChange",value:function(e){const t=this.viewChangeListener.indexOf(e);t>-1&&this.viewChangeListener.splice(t,1)}},{key:"onViewChange",value:function(e){return this.viewChangeListener.push(e)-1}},{key:"triggerViewChange",value:function(){const e=this.getViewsAsString();this.viewChangeListener.forEach(t=>t(e))}},{key:"getGenomeLocation",value:function(e){return X_.get(this.state.views[e].chromInfoPath).then(t=>tx(this.xScales[e],this.yScales[e],t))}},{key:"offLocationChange",value:function(e,t){this.removeScalesChangedListener(e,t)}},{key:"zoomTo",value:function(e,t,n,r,i,o){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(Number.isNaN(+t)||Number.isNaN(+n)){const e=[t,n].join(", ");return void console.warn([`Invalid coordinates (${e}). All coordinates need to be numbers\n        and should represent absolute coordinates (not chromosome\n        coordinates).`].join(" "))}(Number.isNaN(+r)||Number.isNaN(+i)||null===r||null===i)&&(r=t,i=n);const[a,s,l]=ex(this.xScales[e].copy().domain([t,n]),this.yScales[e].copy().domain([r,i]));this.setCenters[e](a,s,l,!1,o)}},{key:"zoomToGene",value:function(e,t,n,r){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);this.state.views[e].genomePositionSearchBox&&this.state.views[e].genomePositionSearchBox.autocompleteServer&&this.state.views[e].genomePositionSearchBox.autocompleteId&&this.state.views[e].chromInfoPath?this.suggestGene(e,t,i=>{if(i){const o=i.find(e=>e.geneName.toLowerCase()===t.toLowerCase());if(o){const{chr:t,txStart:i,txEnd:a}=o;WW(this.state.views[e].chromInfoPath,o=>{const s=o.chrToAbs([t,i])-n,l=o.chrToAbs([t,a])+n,[c,u,h]=ex(this.xScales[e].copy().domain([s,l]),this.yScales[e].copy().domain([s,l]));this.setCenters[e](c,u,h,!1,r)},this.pubSub)}else console.warn(`Couldn't find the gene symbol: ${t}`)}}):console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API")}},{key:"suggestGene",value:function(e,t,n){if(!(e in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[e].genomePositionSearchBox||!this.state.views[e].genomePositionSearchBox.autocompleteServer||!this.state.views[e].genomePositionSearchBox.autocompleteId)return void console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");const r=`${this.state.views[e].genomePositionSearchBox.autocompleteServer}/suggest/?d=${this.state.views[e].genomePositionSearchBox.autocompleteId}&ac=${t.toLowerCase()}`;VW.json(r,sx,this.pubSub).then(e=>{n(e)}).catch(e=>console.error(e))}},{key:"onLocationChange",value:function(e,t,n){const r=Object.keys(this.state.views);if(!r.length)return this.unsetOnLocationChange.push({viewId:e,callback:t,callbackId:n}),null;if(typeof(e=typeof e>"u"&&1===r.length?r[0]:e)>"u"||-1===r.indexOf(e))return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ",e),null;const i=this.state.views[e];let o=1;return this.scalesChangedListeners[i.uid]&&(o=Object.keys(this.scalesChangedListeners[i.uid]).filter(e=>0===e.indexOf(_w)).map(e=>Number.parseInt(e.slice(23),10)).reduce((e,t)=>Math.max(e,t),0)+1),this.addScalesChangedListener(i.uid,`${_w}.${o}`,(e,n)=>{t({xDomain:e.domain(),yDomain:n.domain(),xRange:e.range(),yRange:n.range()})}),n&&n(`${_w}.${o}`),o}},{key:"getTiledPlotAtPosition",value:function(e,t){let n;const r=dw(this.state.views);for(let i=0;i<r.length;i++){const o=this.tiledPlots[r[i].uid],a=this.tiledAreasDivs[r[i].uid].getBoundingClientRect(),{top:s,left:l}=a,c=s+a.height,u=l+a.width;if(e>=l&&e<=u&&(t>=s&&t<=c)){n=o;break}}return n}},{key:"mouseMoveHandler",value:function(e){if(!this.topDivRef.current||this.state.modal)return;const t=e.clientX,n=e.clientY,r=ym(e,this.topDivRef.current);r[1]+=this.scrollTop;const i=this.getTiledPlotAtPosition(t,n),o=i?i.listTracksAtPosition(r[0],r[1],!0).map(e=>e.originalTrack||e):[],a=o.find(e=>!e.isAugmentationTrack),s=a?[r[0]-a.position[0],r[1]-a.position[1]]:r;let l=-1,c=-1;a&&(l=a.flipText?a._xScale.invert(s[1]):a._xScale.invert(s[0]),c=a.is2d?a._yScale.invert(s[1]):l);const u={x:r[0],y:r[1],relTrackX:a?.flipText?s[1]:s[0],relTrackY:a?.flipText?s[0]:s[1],dataX:l,dataY:c,isFrom2dTrack:!!a?.is2d,isFromVerticalTrack:!!a?.flipText,track:a,origEvt:e,sourceUid:this.uid,hoveredTracks:o,noHoveredTracks:0===o.length};if(this.pubSub.publish("app.mouseMove",u),this.isBroadcastMousePositionGlobally){const e={...u};e.origEvt=void 0,e.track=void 0,e.hoveredTracks=void 0,delete e.origEvt,delete e.track,delete e.hoveredTracks,Rm.publish("higlass.mouseMove",e)}this.apiPublish("cursorLocation",{absX:t,absY:n,relX:u.x,relY:u.y,relTrackX:u.relTrackX,relTrackY:u.relTrackY,dataX:u.dataX,dataY:u.dataY,isFrom2dTrack:u.isFrom2dTrack,isFromVerticalTrack:u.isFromVerticalTrack}),this.showHoverMenu(u)}},{key:"getMinMaxValue",value:function(e,t,n,r){const i=hT(this.tiledPlots,e,t);if(i){if(i.minVisibleValueInTiles&&i.maxVisibleValueInTiles)return n&&i.getAggregatedVisibleValue?[i.getAggregatedVisibleValue("min"),i.getAggregatedVisibleValue("max")]:[i.minVisibleValueInTiles(r),i.maxVisibleValueInTiles(r)];console.warn(`Track ${t} doesn't support the retrieval of min or max values.`)}else console.warn(`Track with ID: ${t} not found!`)}},{key:"showHoverMenu",value:function(e){var t,n;const r=null!=(t=e.track)&&t.getMouseOverHtml?e.track.getMouseOverHtml(e.relTrackX,e.relTrackY):"";if(e.track!==this.prevMouseHoverTrack&&null!=(n=this.prevMouseHoverTrack)&&n.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=e.track,this.zooming)return;const i=r?.length?[1]:[];let o=pm("body").selectAll(".track-mouseover-menu").data(i);o.exit().remove(),o.enter().append("div").classed("track-mouseover-menu",!0).classed(Vbe,!0),o=pm("body").selectAll(".track-mouseover-menu");const a=ym(e.origEvt,pm("body").node()),s=[a[0]-window.scrollX,a[1]-window.scrollY];if(o.style("left",`${s[0]}px`).style("top",`${s[1]}px`),!o.node())return;const l=o.node().getBoundingClientRect();l.x+l.width>window.innerWidth&&o.style("left",s[0]-l.width+"px"),l.y+l.height>window.innerHeight&&o.style("top",s[1]-l.height+"px"),o.html(r)}},{key:"hideHoverMenu",value:function(){pm("body").selectAll(".track-mouseover-menu").remove()}},{key:"closeCustomDialog",value:function(){this.setState(e=>({customDialog:null}))}},{key:"appClickHandler",value:function(e){this.apiPublish("click",e)}},{key:"canvasClickHandler",value:function(e){const t=e.nativeEvent||e,n=t.clientX,r=t.clientY,i=this.getTiledPlotAtPosition(n,r),o=ym(t,this.topDivRef.current);o[1]+=this.scrollTop;const a=i?i.listTracksAtPosition(o[0],o[1],!0).map(e=>e.originalTrack||e):[],s=a.find(e=>!e.isAugmentationTrack),l=s?[o[0]-s.position[0],o[1]-s.position[1]]:o,c=s?.flipText?l[1]:l[0],u=s?.flipText?l[0]:l[1];for(const f of this.iterateOverTracks()){const e=hT(this.tiledPlots,f.viewId,f.trackId);e.respondsToPosition(o[0],o[1])||e.clickOutside()}const h=[];for(const f of a)if(f.childTracks){for(const t of f.childTracks)h.push({trackUid:t.context.trackUid,viewUid:t.context.viewUid,trackType:t.context.trackType,data:t.click(c,u,e)});h.push({trackUid:f.context.trackUid,viewUid:f.context.viewUid,trackType:f.context.trackType,data:{type:"generic",event:e}})}else h.push({trackUid:f.context.trackUid,viewUid:f.context.viewUid,trackType:f.context.trackType,data:f.click(c,u,e)});const p=[];h.forEach((e,t)=>{const n=hT(this.tiledPlots,e.viewUid,e.trackUid);if("function"==typeof n.clickDialog){const e=n.clickDialog();e&&p.push(e)}}),p.length>0&&this.setState(e=>({customDialog:p})),this.pubSub.publish("app.click",h)}},{key:"mouseMoveZoomHandler",value:function(e){this.apiPublish("mouseMoveZoom",e)}},{key:"geneSearchHandler",value:function(e){this.apiPublish("geneSearch",e)}},{key:"mouseDownHandler",value:function(e){}},{key:"onScrollHandler",value:function(){this.sizeMode===nT&&(this.scrollTop=this.scrollContainer.scrollTop,this.pixiStage.y=-this.scrollTop,this.pubSub.publish("app.scroll",this.scrollTop),this.animate())}},{key:"setTrackValueScaleLimits",value:function(e,t,n,r){const i=hT(this.tiledPlots,e,t);i?i.setFixedValueScaleMin&&i.setFixedValueScaleMax?(i.setFixedValueScaleMin(n),i.setFixedValueScaleMax(r),i.rerender(i.options,!0),i.animate()):console.warn("Track doesn't support fixed value scales."):console.warn(`Could't find track: ${t}`)}},{key:"setChromInfo",value:function(e,t){WW(e,e=>{this.chromInfo=e,t()},this.pubSub)}},{key:"onMouseLeaveHandler",value:function(){this.pubSub.publish("app.mouseLeave"),this.hideHoverMenu(),this.animate()}},{key:"onBlurHandler",value:function(){this.animate()}},{key:"isZoomFixed",value:function(e){return this.props.zoomFixed||this.props.options.zoomFixed||this.state.viewConfig.zoomFixed||this.sizeMode===nT||e?.zoomFixed}},{key:"trackDimensionsModifiedHandler",value:function(e){const t=this.state.views[e.viewId];if(!t)return;const n=uT(t.tracks,e.trackId);n&&(void 0!==e.height&&(n.height=e.height),void 0!==e.width&&(n.width=e.width),this.adjustLayoutToTrackSizes(t),this.setState(e=>({views:e.views})))}},{key:"wheelHandler",value:function(e){if(this.state.modal||this.sizeMode===nT)return;const t=e.nativeEvent||e;if(!TT(t.target,this.topDivRef.current)||this.isZoomFixed())return;const n=t.clientX,r=t.clientY,i=this.getTiledPlotAtPosition(n,r);if(this.apiStack.wheel&&this.apiStack.wheel.length>0){const e=ym(t,this.topDiv);e[1]+=this.scrollTop;const n=i?i.listTracksAtPosition(e[0],e[1],!0).map(e=>e.originalTrack||e):[],r=n.find(e=>!e.isAugmentationTrack),o=r?[e[0]-r.position[0],e[1]-r.position[1]]:e,a={x:e[0],y:e[1],relTrackX:r?.flipText?o[1]:o[0],relTrackY:r?.flipText?o[0]:o[1],track:r,origEvt:t,sourceUid:this.uid,hoveredTracks:n,noHoveredTracks:0===n.length};this.apiPublish("wheel",a)}const o=e.target===this.canvasElement;if(t.forwarded||o)return e.stopPropagation(),void e.preventDefault();if(e.preventDefault(),i){const{trackRenderer:e}=i;t.forwarded=!0,t&&(sT(t,e.eventTracker),t.preventDefault())}}},{key:"viewUidToName",value:function(e){const t=Object.keys(this.state.views);for(let n=0;n<t.length;n++)if(t[n]===e)return String.fromCharCode(65+n);return"UU"}},{key:"render",value:function(){this.tiledAreasDivs={},this.tiledAreas=i.createElement("div",{className:Ube}),this.mounted&&(this.tiledAreas=dw(this.state.views).map(e=>{const t=e.uid===this.state.addTrackPositionMenuUid?this.state.addTrackPositionMenuPosition:null;let n=null;if(this.state.chooseViewHandler){let t="transparent";this.state.mouseOverOverlayUid===e.uid&&(t="green"),n=i.createElement("div",{className:"tiled-plot-overlay",onClick:()=>this.state.chooseViewHandler(e.uid),onMouseEnter:()=>this.handleOverlayMouseEnter(e.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(e.uid),onMouseMove:()=>this.handleOverlayMouseEnter(e.uid),style:{position:"absolute",width:"100%",height:"100%",background:t,opacity:.3,zIndex:1}})}const r=i.createElement(age,{key:`tp${e.uid}`,ref:t=>{this.tiledPlots[e.uid]=t},addTrackExtent:this.state.addTrackPositionView===e.uid?this.state.addTrackExtent:null,addTrackPosition:this.state.addTrackPositionView===e.uid?this.state.addTrackPosition:null,addTrackPositionMenuPosition:t,apiPublish:this.apiPublish,canvasElement:this.state.canvasElement,chooseTrackHandler:this.state.chooseTrackHandler?(t,n)=>this.state.chooseTrackHandler(e.uid,t,n):null,customDialog:this.state.customDialog,closeCustomDialog:()=>this.closeCustomDialog(),chromInfoPath:e.chromInfoPath,disableTrackMenu:this.isTrackMenuDisabled(),draggingHappening:this.state.draggingHappening,editable:this.isEditable(),genomePositionSearchBox:this.genomePositionSearchBoxes[e.uid],getLockGroupExtrema:t=>this.getLockGroupExtrema(e.uid,t),initialXDomain:e.initialXDomain,initialYDomain:e.initialYDomain,isShowGlobalMousePosition:this.isShowGlobalMousePosition,isValueScaleLocked:t=>this.isValueScaleLocked(e.uid,t),marginBottom:this.viewMarginBottom,marginLeft:this.viewMarginLeft,marginRight:this.viewMarginRight,marginTop:this.viewMarginTop,metaTracks:e.metaTracks,mouseTool:this.state.mouseTool,onChangeTrackData:(t,n)=>this.handleChangeTrackData(e.uid,t,n),onChangeTrackType:(t,n)=>this.handleChangeTrackType(e.uid,t,n),onCloseTrack:t=>this.handleCloseTrack(e.uid,t),onDataDomainChanged:(t,n)=>this.handleDataDomainChanged(e.uid,t,n),onLockValueScale:t=>this.handleLockValueScale(e.uid,t),onMouseMoveZoom:this.mouseMoveZoomHandler.bind(this),onNewTilesLoaded:t=>this.handleNewTilesLoaded(e.uid,t),onNoTrackAdded:this.handleNoTrackAdded.bind(this),onRangeSelection:this.rangeSelectionHandler.bind(this),onResizeTrack:()=>{this.adjustLayoutToTrackSizes(e),this.triggerViewChangeDb()},onScalesChanged:(t,n)=>this.handleScalesChanged(e.uid,t,n),onTrackOptionsChanged:(t,n)=>this.handleTrackOptionsChanged(e.uid,t,n),onTrackPositionChosen:this.handleTrackPositionChosen.bind(this),onTracksAdded:(t,n,r,i)=>this.handleTracksAdded(e.uid,t,n,r,i),onUnlockValueScale:t=>this.handleUnlockValueScale(e.uid,t),onValueScaleChanged:t=>this.syncValueScales(e.uid,t),overlays:e.overlays,overTrackChooser:this.state.overTrackChooser,paddingBottom:this.viewPaddingBottom,paddingLeft:this.viewPaddingLeft,paddingRight:this.viewPaddingRight,paddingTop:this.viewPaddingTop,pixiRenderer:this.pixiRenderer,pixiStage:this.pixiStage,pluginDataFetchers:this.pluginDataFetchers,pluginTracks:this.pluginTracks,rangeSelection1dSize:this.state.rangeSelection1dSize,rangeSelectionToInt:this.state.rangeSelectionToInt,registerDraggingChangedListener:t=>this.addDraggingChangedListener(e.uid,e.uid,t),removeDraggingChangedListener:t=>this.removeDraggingChangedListener(e.uid,e.uid,t),setCentersFunction:t=>{this.setCenters[e.uid]=t},setOverTrackChooser:e=>this.setState({overTrackChooser:e}),svgElement:this.state.svgElement,tracks:e.tracks,trackSourceServers:this.state.viewConfig.trackSourceServers,uid:e.uid,verticalMargin:this.verticalMargin,viewOptions:e.options,xDomainLimits:e.xDomainLimits,yDomainLimits:e.yDomainLimits,zoomable:!this.isZoomFixed(e),zoomLimits:this.calculateZoomLimits(e,e.initialXDomain),zoomToDataExtentOnInit:()=>this.zoomToDataExtentOnInit.has(e.uid)}),o=function(e){let{includeCombinedContents:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];for(const r of Tw){const i=e[r];i?.forEach(e=>{"contents"in e&&t&&e.contents.forEach(e=>{n.push(Object.assign({},e,{position:r}))}),n.push(Object.assign({},e,{position:r}))})}return n}(e.tracks),a=o.filter(e=>"horizontal-gene-annotations"===e.type||"vertical-gene-annotations"===e.type||"gene-annotations"===e.type),s=o.filter(e=>"horizontal-chromosome-labels"===e.type||"vertical-chromosome-labels"===e.type||"chromosome-labels"===e.type),l=!this.isEditable()||this.isViewHeaderDisabled()||this.state.viewConfig.hideHeader?null:i.createElement(Ibe,{ref:t=>{this.viewHeaders[e.uid]=t},getGenomePositionSearchBox:(t,n)=>i.createElement(lq,{key:`gpsb${e.uid}`,ref:t=>{this.genomePositionSearchBoxes[e.uid]=t},autocompleteId:1===a.length?a[0].tilesetUid:null,autocompleteServer:1===a.length?a[0].server:null,chromInfoId:s.length?s[0].tilesetUid:null,chromInfoServer:s.length?s[0].server:null,isFocused:t,onFocus:n,registerViewportChangedListener:t=>this.addScalesChangedListener(e.uid,e.uid,t),removeViewportChangedListener:()=>this.removeScalesChangedListener(e.uid,e.uid),setCenters:(t,n,r,i)=>this.setCenters[e.uid](t,n,r,!1,i),trackSourceServers:this.state.viewConfig.trackSourceServers,twoD:!0,error:(0===s.length?"no chromosome track present":s.length>=2&&"multiple chromosome tracks present")||a.length>=2&&"multiple annotation tracks present"}),isGenomePositionSearchBoxVisible:!0,mouseTool:this.state.mouseTool,onAddView:()=>this.handleAddView(e),onClearView:()=>this.handleClearView(e.uid),onCloseView:()=>this.handleCloseView(e.uid),onEditViewConfig:this.handleEditViewConfigBound,onExportPNG:this.handleExportPNG.bind(this),onExportSVG:this.handleExportSVG.bind(this),onExportViewsAsJSON:this.handleExportViewAsJSON.bind(this),onExportViewsAsLink:this.handleExportViewsAsLink.bind(this),onLockLocation:e=>this.handleYankFunction(e,this.handleLocationLockChosen.bind(this)),onLockZoom:e=>this.handleYankFunction(e,this.handleZoomLockChosen.bind(this)),onLockZoomAndLocation:e=>this.handleYankFunction(e,(e,t)=>{this.handleZoomLockChosen(e,t),this.handleLocationLockChosen(e,t)}),onProjectViewport:this.handleProjectViewport.bind(this),onTakeAndLockZoomAndLocation:e=>{this.handleYankFunction(e,(e,t)=>{this.handleZoomYanked(e,t),this.handleLocationYanked(e,t),this.handleZoomLockChosen(e,t),this.handleLocationLockChosen(e,t)})},onTogglePositionSearchBox:this.handleTogglePositionSearchBox.bind(this),onTrackPositionChosen:(t,n)=>this.handleTrackPositionChosen(e.uid,t,n),onUnlockLocation:e=>this.handleUnlock(e,this.locationLocks),onUnlockZoom:e=>this.handleUnlock(e,this.zoomLocks),onUnlockZoomAndLocation:e=>{this.handleUnlock(e,this.zoomLocks),this.handleUnlock(e,this.locationLocks)},onViewOptionsChanged:t=>this.handleViewOptionsChanged(e.uid,t),onYankLocation:e=>this.handleYankFunction(e,this.handleLocationYanked.bind(this)),onYankZoom:e=>this.handleYankFunction(e,this.handleZoomYanked.bind(this)),onYankZoomAndLocation:e=>this.handleYankFunction(e,(e,t)=>{this.handleZoomYanked(e,t),this.handleLocationYanked(e,t)}),onZoomToData:e=>this.handleZoomToData(e),viewUid:e.uid});return i.createElement("div",{key:e.uid},i.createElement("div",{ref:t=>{this.tiledAreasDivs[e.uid]=t},className:Ube},l,r,n))}));let e=this.mounted?Object.values(this.state.views).filter(e=>e.layout).map(e=>e.layout):[];e=JSON.parse(JSON.stringify(e));const t=this.isEditable()?10:0,n=this.isEditable()?10:0,r=+this.props.options.containerPaddingX>=0?+this.props.options.containerPaddingX:t,o=+this.props.options.containerPaddingY>=0?+this.props.options.containerPaddingY:n,a=i.createElement(Cb,{ref:e=>{this.gridLayout=e},cols:12,containerPadding:[r,o],draggableHandle:`.${kw["multitrack-header-grabber"]}`,isDraggable:this.isEditable(),isResizable:this.isEditable(),layout:e,margin:this.isEditable()?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted,verticalCompact:this.state.viewConfig.compactLayout,width:this.state.width},this.tiledAreas);return i.createElement("div",{key:this.uid,ref:this.topDivRef,className:xs("higlass",Dbe,{[Nbe]:this.theme===Ew,[jbe]:this.sizeMode===eT||this.sizeMode===tT||this.sizeMode===nT}),onMouseLeave:this.onMouseLeaveHandlerBound,onMouseMove:this.mouseMoveHandlerBound},i.createElement(YY,{value:this.pubSub},i.createElement(ZW,{value:this.modal},i.createElement(hZ,{value:this.theme},i.createElement(Rbe.Provider,{value:{viewUidToName:this.viewUidToNameBound}},this.state.modal,i.createElement("canvas",{key:this.uid,ref:e=>{this.canvasElement=e},onClick:this.canvasClickHandlerBound,className:Fbe}),i.createElement("div",{ref:e=>{this.scrollContainer=e},className:xs("higlass-scroll-container",{[Lbe]:this.sizeMode===eT||this.sizeMode===tT,[Bbe]:this.sizeMode===nT}),onScroll:this.onScrollHandlerBound},i.createElement("div",{ref:e=>{this.divDrawingSurface=e},className:xs("higlass-drawing-surface",zbe)},a),i.createElement("svg",{ref:e=>{this.svgElement=e},style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none"},className:Hbe})))))))}}])}(i.Component);function Zbe(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qbe(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qbe(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function Jbe(e,t,n){return t=t_e(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,e_e()?Reflect.construct(t,n||[],t_e(e).constructor):t.apply(e,n))}function e_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e_e=function(){return!!e})()}function t_e(e){return t_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t_e(e)}function n_e(e,t){return(n_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Kbe.defaultProps={options:{},zoomFixed:!1,compactLayout:!0},Kbe.propTypes={getApi:xm.func,options:xm.object,viewConfig:xm.oneOfType([xm.string,xm.object]).isRequired,zoomFixed:xm.bool,compactLayout:xm.bool};let r_e=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jbe(this,t,[e])).id=`id-${Math.random()}`,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n_e(e,t)}(t,e),Zbe(t,[{key:"componentDidMount",value:function(){this.initTrackViewer()}},{key:"shouldComponentUpdate",value:function(e){const{x:t,y:n,width:r,height:i}=e;return this.zoomTo(t,n,r,i),!1}},{key:"initTrackViewer",value:function(){const{trackConfig:e,x:t,y:n,width:r,height:i}=this.props,o=document.getElementById(this.id),{id:a,hgApi:s}=((e,t,n)=>{let[r,i,o,a]=t;n.options.colorbarPosition||(n.options.colorbarPosition="hidden"),n.options.labelPosition||(n.options.labelPosition="hidden");const s="arbitary-id";return{id:s,hgApi:i_e(e,{editable:!1,zoomFixed:!1,views:[{uid:s,initialXDomain:[r,i],initialYDomain:[o,a],tracks:{center:[n]},layout:{w:12,h:12,x:0,y:0,moved:!1,static:!1}}]},{sizeMode:"bounded"})}})(o,[t,t+r,n,n+i],e);this.viewUid=a,this.viewer=s}},{key:"zoomTo",value:function(e,t,n,r){this.viewer.zoomTo(this.viewUid,e,e+n,t,t+r)}},{key:"render",value:function(){return i.createElement("div",{id:this.id,style:{height:"100%",width:"100%"}})}}])}(i.Component);r_e.propTypes={trackConfig:xm.object,width:xm.number,height:xm.number,x:xm.number,y:xm.number};const i_e=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(r=>{o.render(i.createElement(Kbe,{ref:e=>{e&&r(e)},options:n,viewConfig:t}),e)})}(e,"string"==typeof t?await fetch(t).then(e=>e.json()):t,n)).api}}}]);
//# sourceMappingURL=80.98ad9f98.chunk.js.map