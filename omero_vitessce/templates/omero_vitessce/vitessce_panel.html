<!DOCTYPE html>
<html>
	<head>
		<title> OMERO Vitessce</title>
	</head>
		</body>
			<div class="right_tab_inner">
			{% if json_configs %}
				<p>Please select an attached config file from the list below:</p>
				<ul>
				{% for file, url in json_configs.items%}
					<li><h1><a href={{url}} target="_blank"> {{file}}</a></h1></li>
				{% endfor %}
				 </ul> 
			{% else %}
				<p> There are no config files attached! </p>
				<p> To use the viewer you can attach a .json config file and refresh the panel. </p>
			{% endif %}
				<br>
			{% if form %}
				 <p> Or use the form below to generate a new config file:</p>
				<form action='/omero_vitessce/generate_config/{{obj_type}}/{{obj_id}}' method="post">
					{% csrf_token %}
					<table>
					<tr>
						<th colspan="2" style="text-align:center;">Vitessce viewer configuration</th>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.config_file_name.label_tag }}</th>
						<th style="text-align:left;">{{ form.config_file_name }}</td>
					</tr>
					<tr>
						<th colspan="2" style="text-align:center;">Images</th>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.image.label_tag }}</td>
						<th style="text-align:left;">{{ form.image }}</td>
					</tr>
					<tr>
						<th colspan="2" style="text-align:center;">Cell Data</th>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.segmentation.label_tag }}</td>
						<th style="text-align:left;">{{ form.segmentation }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.cell_identities.label_tag }}
						<th style="text-align:left;">{{ form.cell_identities }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.cell_id_column.label_tag }}
						<th style="text-align:left;">{{ form.cell_id_column }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.cell_label_column.label_tag }}
						<th style="text-align:left;">{{ form.cell_label_column }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.expression.label_tag }}
						<th style="text-align:left;">{{ form.expression }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.embeddings.label_tag }}
						<th style="text-align:left;">{{ form.embeddings }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.embedding_x.label_tag }}
						<th style="text-align:left;">{{ form.embedding_x }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.embedding_y.label_tag }}
						<th style="text-align:left;">{{ form.embedding_y }}</td>
					</tr>
					<tr>
						<th colspan="2" style="text-align:center;">Molecule Data</th>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.molecules.label_tag }}
						<th style="text-align:left;">{{ form.molecules }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.molecule_id.label_tag }}
						<th style="text-align:left;">{{ form.molecule_id }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.molecule_label.label_tag }}
						<th style="text-align:left;">{{ form.molecule_label }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.molecule_x.label_tag }}
						<th style="text-align:left;">{{ form.molecule_x }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.molecule_y.label_tag }}
						<th style="text-align:left;">{{ form.molecule_y }}</td>
					</tr>
					<tr>
						<th colspan="2" style="text-align:center;">Additional views</th>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.histograms.label_tag }}</td>
						<th style="text-align:left;">{{ form.histograms }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.heatmap.label_tag }}</td>
						<th style="text-align:left;">{{ form.heatmap }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.status.label_tag }}</td>
						<th style="text-align:left;">{{ form.status }}</td>
					</tr>
					<tr>
						<th style="text-align:left;">{{ form.description.label_tag }}</td>
						<th style="text-align:left;">{{ form.description }}</td>
					</tr>
					</table>
					<input type = "submit" value = "Generate Config"> 
				</form>
			{% else %}
				<p> Autogenerating config files requires the 
				<a  href=https://github.com/ome/omero-web-zarr target="_blank">omero-web-zarr</a>
				plugin which seems not to be available. </p>
			{% endif %}
			</div>
		</body>
</html>
